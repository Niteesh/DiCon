provide('/account/templates_t1_more.js',function(exports){if(!twttr.isMockview){var __hogan_opts = {sectionTags:[{o: '_i', c: 'i'}], disableLambda:true}; twttr.provide('twttr.templates',{ "404_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-narrow\">\n  <div class=\"error-page error-404 clearfix\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,103,592,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <h1 class=\"heading\">Sorry, that page doesn’t exist!</h1>\n      <form class=\"inline-form user-search-form\" method=\"GET\" action=\"");t.b(t.v(t.f("who_to_follow_search_form_path",c,p,0)));t.b("\">\n        <p class=\"lead\">Search for a username, first or last name:</p>\n        <input class=\"input-large user-search-query\" type=\"text\" name=\"q\" id=\"fof-user-search-field\" />\n        <button class=\"btn\" type=\"submit\">Search</button>\n      </form>\n      <p><a href=\"");t.b(t.v(t.f("home_path",c,p,0)));t.b("\">&larr; Go to the homepage</a></p>\n");});c.pop();}t.b("  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"500_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-narrow\">\n  <div class=\"error-page error-500 clearfix\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,103,352,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <h1 class=\"heading\">Something is technically wrong.</h1>\n      <p class=\"lead\">Thanks for noticing&mdash;we're going to fix it up and have things back to normal soon.</p>\n      <p><a href=\"");t.b(t.v(t.f("home_path",c,p,0)));t.b("\">&larr; Go to the homepage</a></p>\n");});c.pop();}t.b("  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mobile_complete": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas\">\n  <div class=\"mobile-complete-wrapper\">\n    <h1>Sign up to use Twitter on the web.</h1>\n    <form action=\"");t.b(t.v(t.f("mobile_complete_path",c,p,0)));t.b("\" class=\"mobile-complete\" method=\"post\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n      <fieldset class=\"control-group\">\n        <label for=\"address\" class=\"control-label\">Enter your phone number:</label>\n        <div class=\"controls\">\n          <input type=\"text\" id=\"address\" name=\"address\">\n        </div>\n      </fieldset>\n      <button type=\"submit\" class=\"submit btn primary-btn\" id=\"account_request_verification_code_submit\">Submit</button>\n    </form>\n  </div>\n  <div class=\"contact-support\">\n    Need help? <a href=\"https://support.twitter.com/groups/34-apps-sms-and-mobile/topics/123-mobile-basics/articles/95277-which-twitter-account-is-my-mobile-phone-associated-with\">Please contact Twitter Support</a>.\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mobile_sms_complete": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas\">\n  <div class=\"mobile-complete-wrapper\">\n    <h1>Sign up to use Twitter on the web.</h1>\n    <p>On your phone, send <strong>");t.b(t.v(t.f("start_command",c,p,0)));t.b("</strong> to <strong>");t.b(t.v(t.f("device_address",c,p,0)));t.b("</strong>.</p>\n    <p>Follow the instructions sent to your phone. Once you are finished, click continue.</p>\n    <form action=\"");t.b(t.v(t.f("mobile_sms_complete_path",c,p,0)));t.b("\" class=\"mobile-complete\" method=\"post\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n      <input type=\"hidden\" name=\"address\", value=\"");t.b(t.v(t.f("device",c,p,0)));t.b("\">\n      <button type=\"submit\" class=\"submit btn primary-btn\" id=\"mobile_sms_complete_submit\">Continue</button>\n    </form>\n  </div>\n  <div class=\"contact-support\">\n    Need help? <a href=\"https://support.twitter.com/groups/34-apps-sms-and-mobile/topics/123-mobile-basics/articles/95277-which-twitter-account-is-my-mobile-phone-associated-with\">Please contact Twitter Support</a>.\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mobile_verify": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas\">\n  <div class=\"mobile-complete-wrapper\">\n    <h1>We've sent a verification code to your phone.</h1>\n    <div class=\"verify-device-token\">\n      When you receive the code, type it in the box below. If you don't recieve the code in a few minutes, try\n      <form action=\"");t.b(t.v(t.f("mobile_verify_path",c,p,0)));t.b("\" method=\"post\" class=\"link-form\">\n        <input type=\"hidden\" name=\"send_again\" value=\"true\">\n        <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n        <input type=\"hidden\" name=\"address\" value=\"");t.b(t.v(t.f("device",c,p,0)));t.b("\" %>\n        <button id=\"resend_token\" class=\"btn-link\">resending your request</button>.\n      </form>\n    </div>\n    <form action=\"");t.b(t.v(t.f("mobile_verify_path",c,p,0)));t.b("\" class=\"mobile-complete\" method=\"post\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n      <input type=\"hidden\" name=\"address\" value=\"");t.b(t.v(t.f("device",c,p,0)));t.b("\">\n      <fieldset class=\"control-group\">\n        <div class=\"controls\">\n          <label for=\"verification_code\" class=\"control-label\">Enter your verification code:</label>\n          <input type=\"text\" id=\"verification_code\" name=\"device[verification_code]\" class=\"input-small\">\n        </div>\n      </fieldset>\n      <button type=\"submit\" class=\"submit btn primary-btn\" id=\"mobile_verify_submit\">Submit</button>\n    </form>\n  </div>\n  <div class=\"contact-support\">\n    Need help? <a href=\"https://support.twitter.com/groups/34-apps-sms-and-mobile/topics/123-mobile-basics/articles/95277-which-twitter-account-is-my-mobile-phone-associated-with\">Please contact Twitter Support</a>.\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"password_reset": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas route-resend-password\">\n  <div class=\"resend-password-wrapper\">\n    <h1>Choose your new password.</h2>\n    <form action=\"");t.b(t.v(t.f("accounts_path",c,p,0)));t.b("\" id=\"password-reset-form\" class=\"clearfix resend-password js-resend-password\" method=\"post\">\n      <input type=\"hidden\" name=\"email\" value=\"");t.b(t.v(t.f("email_address",c,p,0)));t.b("\">\n      <input type=\"hidden\" name=\"token\" value=\"");t.b(t.v(t.f("token",c,p,0)));t.b("\">\n      <input type=\"hidden\" name=\"reset_type\" value=\"");t.b(t.v(t.f("reset_type",c,p,0)));t.b("\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n");t.b(t.rp("shared/password0",c,p,"      "));t.b("      <div class=\"clearfix\">\n        <button type=\"submit\" class=\"btn primary-btn\" id=\"password_change_submit\">Submit</button>\n      </div>\n    </form>\n  </div>\n</div>\n");return t.fl(); }, partials: {"shared/password0": {name:"shared/password"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"password_reset_sent": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas route-resend-password\">\n  <div class=\"resend-password-wrapper\">\n    <h1>We've sent password reset instructions to your email address.</h1>\n    If you don't receive instructions within a minute or two, check your email's spam and junk filters, or try <a href=\"");t.b(t.v(t.f("resend_password_path",c,p,0)));t.b("\">resending your request</a>.\n  </div>\n  <div class=\"contact-support\">\n    Need help? <a href=\"https://support.twitter.com/articles/15365?utm_source=15365&utm_medium=website&utm_campaign=inproduct\">Please contact Support</a>.\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"password_reset_type": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas route-resend-password\">\n  <div class=\"resend-password-wrapper\">\n    <h1>Choose your password reset option.</h1>\n    Twitter can send password reset instructions to your email address or the phone number associated with your account.\n    <form action=\"");t.b(t.v(t.f("password_reset_type_path",c,p,0)));t.b("\" class=\"resend-password\" method=\"post\">\n      <input type=\"hidden\" id=\"screen_name\" name=\"screen_name\" value=\"");t.b(t.v(t.f("username",c,p,0)));t.b("\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n      <button type=\"submit\" id=\"email_submit\" name=\"email_submit\" class=\"submit btn primary-btn\">Reset via email</button>\n      <button type=\"submit\" id=\"device_submit\" name=\"device_submit\" class=\"submit btn primary-btn\">Reset via phone</button>\n    </form>\n  </div>\n  <div class=\"contact-support\">\n    Need help? <a href=\"https://support.twitter.com/articles/14663#SMSreset?utm_source=14663&utm_medium=website&utm_campaign=inproduct\">Please contact Twitter Support</a>.\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"resend_password": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas route-resend-password\">\n  <div class=\"resend-password-wrapper\">\n    <h1>Forgot your password?</h1>\n    <form action=\"");t.b(t.v(t.f("accounts_path",c,p,0)));t.b("\" id=\"resend_password_form\" class=\"clearfix resend-password js-resend-password\" method=\"post\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n      <fieldset class=\"control-group\">\n        <label for=\"email_or_phone\" class=\"control-label\">Enter your email address or phone number:</label>\n        <div class=\"controls\">\n          <input type=\"text\" id=\"email_or_phone\" name=\"email_or_phone\" autocomplete=\"on\">\n        </div>\n        <div class=\"separator\">\n          &mdash;OR&mdash;\n        </div>\n        <label for=\"screen_name\" class=\"control-label\">Enter your username:</label>\n        <div class=\"controls\">\n          <div class=\"input-prepend\">\n            <span class=\"add-on\"><i class=\"tweet-at\"></i></span>\n            <input type=\"text\" id=\"screen_name\" name=\"screen_name\" autocomplete=\"on\" class=\"username-prepended-input\">\n          </div>\n        </div>\n      </fieldset>\n      <button type=\"submit\" class=\"submit btn primary-btn\" id=\"lookup_user\">Submit</button>\n");if(!t.s(t.f("no_captcha",c,p,1),c,p,1,0,0,"")){t.b(t.rp("dialogs/captcha_dialog0",c,p,"        "));};t.b("    </form>\n  </div>\n  <div class=\"contact-support\">\n    Need help? <a href=\"https://support.twitter.com/articles/14663#SMSreset?utm_source=14663&utm_medium=website&utm_campaign=inproduct\">Please contact Twitter Support</a>.\n  </div>\n</div>\n");return t.fl(); }, partials: {"dialogs/captcha_dialog0": {name:"dialogs/captcha_dialog"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"verify_device_token": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas route-resend-password\">\n  <div class=\"resend-password-wrapper\">\n    <h1>We've sent a password reset code to your phone.</h1>\n    <div class=\"verify-device-token\">\n      When you receive the code, type it in the box below. If you don't receive the code within a few minutes, try\n      <form action=\"/account/password_reset_type?device_submit=true&device_resend=true\" method=\"post\" class=\"link-form\"><button id=\"resend_token\" class=\"btn-link\">resending your request</button>.<input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\"></form>\n");if(!t.s(t.f("sms_password_reset_only",c,p,1),c,p,1,0,0,"")){t.b("      You can also\n      <form action=\"/account/password_reset_type?email_submit=true\" method=\"post\" class=\"link-form\"><button id=\"resend_email\" class=\"btn-link\">reset your password via email</button>.<input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\"></form>\n");};t.b("    </div>\n    <form action=\"");t.b(t.v(t.f("verify_device_token_path",c,p,0)));t.b("\" id=\"verify-device-token-form\" class=\"clearfix resend-password js-resend-password\" method=\"post\">\n      <input type=\"hidden\" id=\"screen_name\" name=\"screen_name\" value=\"");t.b(t.v(t.f("username",c,p,0)));t.b("\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n      <fieldset class=\"control-group\">\n        <label for=\"token\" class=\"control-label\">Enter your reset code:</label>\n        <div class=\"controls\">\n          <input type=\"text\" id=\"token\" name=\"token\" class=\"input-small\">\n        </div>\n      </fieldset>\n      <button type=\"submit\" id=\"verify_token_submit\" class=\"btn primary-btn\">Submit</button>\n    </form>\n  </div>\n  <div class=\"contact-support\">\n    Need help? <a href=\"https://support.twitter.com/articles/15365?utm_source=15365&utm_medium=website&utm_campaign=inproduct\">Please contact Twitter Support</a>.\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"verify_personal_information": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas route-resend-password\">\n  <div class=\"resend-password-wrapper\">\n    <h1>Verify your personal information.</h1>\n    <form action=\"");t.b(t.v(t.f("verify_personal_information_path",c,p,0)));t.b("\" id=\"verify-personal-information-form\" class=\"clearfix resend-password js-resend-password\" method=\"post\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n      <fieldset class=\"control-group\">\n");if(t.s(t.f("has_valid_phone_number",c,p,1),c,p,0,460,672,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <label for=\"phone\" class=\"control-label\">Enter phone number:</label>\n          <div class=\"controls\">\n            <input type=\"text\" id=\"phone\" name=\"phone\" autocomplete=\"on\">\n          </div>\n");});c.pop();}if(!t.s(t.f("has_valid_phone_number",c,p,1),c,p,1,0,0,"")){t.b("          <label for=\"email\" class=\"control-label\">Enter email address:</label>\n          <div class=\"controls\">\n            <input type=\"text\" id=\"email\" name=\"email\" autocomplete=\"on\">\n          </div>\n");};t.b("      </fieldset>\n      <button type=\"submit\" class=\"submit btn primary-btn\" id=\"lookup_user\">Submit</button>\n    </form>\n  </div>\n  <div class=\"contact-support\">\n    Need help? <a href=\"https://support.twitter.com/articles/14663#SMSreset?utm_source=14663&utm_medium=website&utm_campaign=inproduct\">Please contact Twitter Support</a>.\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-item-content clearfix stream-item-activity stream-item-");t.b(t.v(t.f("event",c,p,0)));t.b(" ");if(t.s(t.f("is_your_activity",c,p,1),c,p,0,105,128,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("stream-item-activity-me");});c.pop();}if(!t.s(t.f("is_your_activity",c,p,1),c,p,1,0,0,"")){t.b("stream-item-activity-network");};t.b("\"\n     data-activity-type=\"");t.b(t.v(t.f("event",c,p,0)));t.b("\"\n     data-activity-min-position=\"");t.b(t.v(t.f("min_position",c,p,0)));t.b("\"\n     data-activity-max-position=\"");t.b(t.v(t.f("max_position",c,p,0)));t.b("\">\n\n     <div class=\"stream-item-activity-header\">\n       <div class=\"activity-additional-info\">\n");if(!t.s(t.f("is_your_activity",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("has_hidden_supplements",c,p,1),c,p,0,523,634,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("             <a href=\"#\" class=\"view-all-supplements show\">");t.b(t.t(t.f("view_all_supplements_sentence",c,p,0)));t.b("</a>\n");});c.pop();}};t.b("\n" + i);t.b("         <div class=\"activity-timestamp\">\n            <span class=\"_timestamp\" data-time=\"");t.b(t.v(t.f("actual_timestamp",c,p,0)));t.b("\" data-long-form=\"true\">");t.b(t.v(t.f("full_timestamp",c,p,0)));t.b("</span>\n          </div>\n       </div>\n\n       <div class=\"stream-item-activity-line js-actionable-user ");if(t.s(t.f("is_your_activity",c,p,1),c,p,0,971,999,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("stream-item-activity-line-me");});c.pop();}if(!t.s(t.f("is_your_activity",c,p,1),c,p,1,0,0,"")){t.b("stream-item-activity-line-network");};t.b("\">\n");if(t.s(t.f("should_show_first_actor",c,p,1),c,p,0,1135,1233,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("first_actor",c,p,1),c,p,0,1163,1207,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_image_160",c,p,"             "));});c.pop();}});c.pop();}t.b("\n" + i);t.b("         ");t.b(t.t(t.f("activity_line",c,p,0)));t.b("\n");t.b("\n" + i);t.b("         <b class=\"activity-type\"><i class=\"");t.b(t.v(t.f("icon_class",c,p,0)));t.b("\"></i></b>\n       </div>\n     </div>\n\n");if(t.s(t.f("should_show_truncated_tweet",c,p,1),c,p,0,1426,1523,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("       <div class=\"activity-truncated-tweet\">\n         ");t.b(t.t(t.f("truncated_tweet",c,p,0)));t.b("\n" + i);t.b("       </div>\n");});c.pop();}t.b("\n" + i);t.b("     <div class=\"activity-supplement ");if(t.s(t.f("has_hidden_supplements",c,p,1),c,p,0,1621,1644,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" has-hidden-supplements");});c.pop();}if(t.s(t.f("user_supplement_and_count_greater_than_two",c,p,1),c,p,0,1718,1738,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("follow-more-than-two");});c.pop();}if(t.s(t.f("user_supplement_and_count_exactly_two",c,p,1),c,p,0,1827,1845,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("follow-exactly-two");});c.pop();}t.b("\">\n       ");t.b(t.t(t.f("activity_supplement",c,p,0)));t.b("\n");t.b("\n" + i);if(t.s(t.f("has_secondary_supplement",c,p,1),c,p,0,1960,2084,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("         <div class=\"activity-secondary-supplement\">\n           ");t.b(t.t(t.f("activity_secondary_supplement",c,p,0)));t.b("\n" + i);t.b("         </div>\n");});c.pop();}t.b("     </div>\n\n");if(t.s(t.f("is_your_activity",c,p,1),c,p,0,2153,2323,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("has_hidden_supplements",c,p,1),c,p,0,2188,2290,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <a class=\"view-all-supplements show\" href=\"#\">");t.b(t.t(t.f("view_all_supplements_sentence",c,p,0)));t.b("</a>\n");});c.pop();}});c.pop();}t.b("</div>");return t.fl(); }, partials: {"user_image_160": {name:"user_image_16"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_item_favorite": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-item-activity-header\">\n  <div class=\"activity-additional-info\">\n    <div class=\"activity-timestamp\">\n      <span class=\"_timestamp ");if(t.s(t.f("is_relative_timestamp",c,p,1),c,p,0,176,197,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("js-relative-timestamp");});c.pop();}t.b("\" data-time=\"");t.b(t.v(t.f("actual_timestamp",c,p,0)));t.b("\" data-long-form=\"true\">");t.b(t.v(t.f("short_timestamp",c,p,0)));t.b("</span>\n    </div>\n  </div>\n  <div class=\"stream-item-activity-line js-actionable-user stream-item-activity-line-me\">\n\n");if(t.s(t.f("sources_1",c,p,1),c,p,0,436,706,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      \n        ");if(t.s(t.f("targets_count_one",c,p,1),c,p,0,474,544,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("source_0",c,p,1),c,p,0,487,510,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link0",c,p,""));});c.pop();}t.b(" favorited your Tweet");});c.pop();}t.b("\n" + i);t.b("        ");if(t.s(t.f("targets_count_other",c,p,1),c,p,0,599,670,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("source_0",c,p,1),c,p,0,612,635,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link1",c,p,""));});c.pop();}t.b(" favorited your Tweets");});c.pop();}t.b("\n" + i);t.b("      \n");});c.pop();}if(t.s(t.f("sources_2",c,p,1),c,p,0,739,1117,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      \n        ");if(t.s(t.f("targets_count_one",c,p,1),c,p,0,777,901,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("source_0",c,p,1),c,p,0,790,813,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link2",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_1",c,p,1),c,p,0,844,867,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link3",c,p,""));});c.pop();}t.b(" favorited your Tweet");});c.pop();}t.b("\n" + i);t.b("        ");if(t.s(t.f("targets_count_other",c,p,1),c,p,0,956,1081,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("source_0",c,p,1),c,p,0,969,992,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link4",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_1",c,p,1),c,p,0,1023,1046,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link5",c,p,""));});c.pop();}t.b(" favorited your Tweets");});c.pop();}t.b("\n" + i);t.b("      \n");});c.pop();}if(t.s(t.f("sources_3",c,p,1),c,p,0,1150,1630,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      \n        ");if(t.s(t.f("targets_count_one",c,p,1),c,p,0,1188,1363,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("source_0",c,p,1),c,p,0,1201,1224,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link6",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("source_1",c,p,1),c,p,0,1252,1275,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link7",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_2",c,p,1),c,p,0,1306,1329,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link8",c,p,""));});c.pop();}t.b(" favorited your Tweet");});c.pop();}t.b("\n" + i);t.b("        ");if(t.s(t.f("targets_count_other",c,p,1),c,p,0,1418,1594,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("source_0",c,p,1),c,p,0,1431,1454,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link9",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("source_1",c,p,1),c,p,0,1482,1505,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link10",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_2",c,p,1),c,p,0,1536,1559,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link11",c,p,""));});c.pop();}t.b(" favorited your Tweets");});c.pop();}t.b("\n" + i);t.b("      \n");});c.pop();}if(t.s(t.f("sources_more",c,p,1),c,p,0,1666,2072,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      \n        ");if(t.s(t.f("targets_count_one",c,p,1),c,p,0,1704,1842,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("source_0",c,p,1),c,p,0,1717,1740,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link12",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("sources_count_less_1",c,p,0)));t.b("</span> others favorited your Tweet");});c.pop();}t.b("\n" + i);t.b("        ");if(t.s(t.f("targets_count_other",c,p,1),c,p,0,1897,2036,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("source_0",c,p,1),c,p,0,1910,1933,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link13",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("sources_count_less_1",c,p,0)));t.b("</span> others favorited your Tweets");});c.pop();}t.b("\n" + i);t.b("      \n");});c.pop();}t.b("\n" + i);t.b("    <b class=\"activity-type\"><i class=\"");t.b(t.v(t.f("icon_class",c,p,0)));t.b("\"></i></b>\n  </div>\n</div>\n<div class=\"activity-truncated-tweet\">\n");if(t.s(t.f("target_0",c,p,1),c,p,0,2225,2250,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("latest_tweet14",c,p,"    "));});c.pop();}t.b("</div>\n<div class=\"activity-supplement ");if(t.s(t.f("sources_2",c,p,1),c,p,0,2317,2335,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("follow-exactly-two");});c.pop();}if(t.s(t.f("sources_3",c,p,1),c,p,0,2363,2383,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("follow-more-than-two");});c.pop();}if(t.s(t.f("sources_more",c,p,1),c,p,0,2414,2434,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("follow-more-than-two");});c.pop();}t.b("\">\n");if(t.s(t.f("sources_limited",c,p,1),c,p,0,2476,2508,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_avatar_link_2415",c,p,"    "));});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"activity_user_link0": {name:"activity_user_link"},"activity_user_link1": {name:"activity_user_link"},"activity_user_link2": {name:"activity_user_link"},"activity_user_link3": {name:"activity_user_link"},"activity_user_link4": {name:"activity_user_link"},"activity_user_link5": {name:"activity_user_link"},"activity_user_link6": {name:"activity_user_link"},"activity_user_link7": {name:"activity_user_link"},"activity_user_link8": {name:"activity_user_link"},"activity_user_link9": {name:"activity_user_link"},"activity_user_link10": {name:"activity_user_link"},"activity_user_link11": {name:"activity_user_link"},"activity_user_link12": {name:"activity_user_link"},"activity_user_link13": {name:"activity_user_link"},"latest_tweet14": {name:"latest_tweet"},"user_avatar_link_2415": {name:"user_avatar_link_24"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_item_follow": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-item-activity-header\">\n  <div class=\"activity-additional-info\">\n    <div class=\"activity-timestamp\">\n      <span class=\"_timestamp ");if(t.s(t.f("is_relative_timestamp",c,p,1),c,p,0,176,197,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("js-relative-timestamp");});c.pop();}t.b("\" data-time=\"");t.b(t.v(t.f("actual_timestamp",c,p,0)));t.b("\" data-long-form=\"true\">");t.b(t.v(t.f("full_timestamp",c,p,0)));t.b("</span>\n    </div>\n  </div>\n  <div class=\"stream-item-activity-line js-actionable-user stream-item-activity-line-me\">\n\n");if(t.s(t.f("sources_1",c,p,1),c,p,0,435,509,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      ");if(t.s(t.f("source_0",c,p,1),c,p,0,455,478,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link0",c,p,""));});c.pop();}t.b(" followed you\n");});c.pop();}if(t.s(t.f("sources_2",c,p,1),c,p,0,542,670,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      ");if(t.s(t.f("source_0",c,p,1),c,p,0,562,585,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link1",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_1",c,p,1),c,p,0,616,639,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link2",c,p,""));});c.pop();}t.b(" followed you\n");});c.pop();}if(t.s(t.f("sources_3",c,p,1),c,p,0,703,882,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      ");if(t.s(t.f("source_0",c,p,1),c,p,0,723,746,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link3",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("source_1",c,p,1),c,p,0,774,797,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link4",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_2",c,p,1),c,p,0,828,851,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link5",c,p,""));});c.pop();}t.b(" followed you\n");});c.pop();}if(t.s(t.f("sources_more",c,p,1),c,p,0,918,1060,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      ");if(t.s(t.f("source_0",c,p,1),c,p,0,938,961,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link6",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("sources_count_less_1",c,p,0)));t.b("</span> others followed you\n");});c.pop();}t.b("\n" + i);t.b("    <b class=\"activity-type\"><i class=\"");t.b(t.v(t.f("icon_class",c,p,0)));t.b("\"></i></b>\n  </div>\n</div>\n<div class=\"activity-supplement ");if(t.s(t.f("sources_2",c,p,1),c,p,0,1205,1223,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("follow-exactly-two");});c.pop();}if(t.s(t.f("sources_3",c,p,1),c,p,0,1251,1271,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("follow-more-than-two");});c.pop();}if(t.s(t.f("sources_more",c,p,1),c,p,0,1302,1322,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("follow-more-than-two");});c.pop();}t.b("\">\n");if(t.s(t.f("sources_limited",c,p,1),c,p,0,1364,1396,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_avatar_link_247",c,p,"    "));});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"activity_user_link0": {name:"activity_user_link"},"activity_user_link1": {name:"activity_user_link"},"activity_user_link2": {name:"activity_user_link"},"activity_user_link3": {name:"activity_user_link"},"activity_user_link4": {name:"activity_user_link"},"activity_user_link5": {name:"activity_user_link"},"activity_user_link6": {name:"activity_user_link"},"user_avatar_link_247": {name:"user_avatar_link_24"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_item_layout": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-stream-item stream-item ");t.b(t.v(t.f("item_class",c,p,0)));t.b(" js-activity js-activity-");t.b(t.v(t.f("event",c,p,0)));t.b("\" data-item-id=\"");t.b(t.v(t.f("item_id",c,p,0)));t.b("\" data-item-type=\"");t.b(t.v(t.f("item_type",c,p,0)));t.b("\"");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,170,246,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" data-item-key=\"");t.b(t.v(t.f("activity_key",c,p,0)));t.b("\" id=\"stream-item-");t.b(t.v(t.f("item_type",c,p,0)));t.b("-");t.b(t.v(t.f("item_id",c,p,0)));t.b("\"");});c.pop();}t.b(">\n");if(t.s(t.f("should_wrap",c,p,1),c,p,0,290,698,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"stream-item-content clearfix stream-item-activity stream-item-");t.b(t.v(t.f("event",c,p,0)));t.b(" ");if(t.s(t.f("is_your_activity",c,p,1),c,p,0,400,423,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("stream-item-activity-me");});c.pop();}if(!t.s(t.f("is_your_activity",c,p,1),c,p,1,0,0,"")){t.b("stream-item-activity-network");};t.b("\"\n       data-activity-type=\"");t.b(t.v(t.f("event",c,p,0)));t.b("\"\n       data-activity-min-position=\"");t.b(t.v(t.f("min_position",c,p,0)));t.b("\"\n       data-activity-max-position=\"");t.b(t.v(t.f("max_position",c,p,0)));t.b("\">\n        ");t.b(t.t(t.f("item_html",c,p,0)));t.b("\n" + i);t.b("    </div>\n");});c.pop();}if(!t.s(t.f("should_wrap",c,p,1),c,p,1,0,0,"")){t.b("    ");t.b(t.t(t.f("item_html",c,p,0)));t.b("\n" + i);};t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_item_list_add": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-item-activity-header\">\n  <div class=\"activity-additional-info\">\n    <div class=\"activity-timestamp\">\n      <span class=\"_timestamp ");if(t.s(t.f("is_relative_timestamp",c,p,1),c,p,0,176,197,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("js-relative-timestamp");});c.pop();}t.b("\" data-time=\"");t.b(t.v(t.f("actual_timestamp",c,p,0)));t.b("\" data-long-form=\"true\">");t.b(t.v(t.f("short_timestamp",c,p,0)));t.b("</span>\n    </div>\n  </div>\n  <div class=\"stream-item-activity-line js-actionable-user stream-item-activity-line-me\">\n\n    \n\n");if(t.s(t.f("sources_1",c,p,1),c,p,0,442,1534,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("target_objects_1",c,p,1),c,p,0,470,628,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,503,526,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link0",c,p,""));});c.pop();}t.b(" added you to list ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,578,592,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link1",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_2",c,p,1),c,p,0,677,895,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,710,733,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link2",c,p,""));});c.pop();}t.b(" added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,786,800,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link3",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("target_object_1",c,p,1),c,p,0,845,859,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link4",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_3",c,p,1),c,p,0,944,1218,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,977,1000,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link5",c,p,""));});c.pop();}t.b(" added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,1053,1067,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link6",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("target_object_1",c,p,1),c,p,0,1109,1123,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link7",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("target_object_2",c,p,1),c,p,0,1168,1182,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link8",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_more",c,p,1),c,p,0,1270,1505,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,1303,1326,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link9",c,p,""));});c.pop();}t.b(" added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,1379,1393,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link10",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("target_objects_count_less_1",c,p,0)));t.b(" others.</span>\n        \n");});c.pop();}});c.pop();}if(t.s(t.f("sources_2",c,p,1),c,p,0,1567,2875,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("target_objects_1",c,p,1),c,p,0,1595,1807,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,1628,1651,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link11",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_1",c,p,1),c,p,0,1682,1705,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link12",c,p,""));});c.pop();}t.b(" added you to list ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,1757,1771,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link13",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_2",c,p,1),c,p,0,1856,2128,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,1889,1912,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link14",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_1",c,p,1),c,p,0,1943,1966,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link15",c,p,""));});c.pop();}t.b(" added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,2019,2033,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link16",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("target_object_1",c,p,1),c,p,0,2078,2092,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link17",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_3",c,p,1),c,p,0,2177,2505,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,2210,2233,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link18",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_1",c,p,1),c,p,0,2264,2287,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link19",c,p,""));});c.pop();}t.b(" added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,2340,2354,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link20",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("target_object_1",c,p,1),c,p,0,2396,2410,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link21",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("target_object_2",c,p,1),c,p,0,2455,2469,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link22",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_more",c,p,1),c,p,0,2557,2846,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,2590,2613,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link23",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_1",c,p,1),c,p,0,2644,2667,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link24",c,p,""));});c.pop();}t.b(" added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,2720,2734,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link25",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("target_objects_count_less_1",c,p,0)));t.b(" others.</span>\n        \n");});c.pop();}});c.pop();}if(t.s(t.f("sources_3",c,p,1),c,p,0,2908,4420,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("target_objects_1",c,p,1),c,p,0,2936,3199,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,2969,2992,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link26",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("source_1",c,p,1),c,p,0,3020,3043,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link27",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_2",c,p,1),c,p,0,3074,3097,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link28",c,p,""));});c.pop();}t.b(" added you to list ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,3149,3163,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link29",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_2",c,p,1),c,p,0,3248,3571,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,3281,3304,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link30",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("source_1",c,p,1),c,p,0,3332,3355,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link31",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_2",c,p,1),c,p,0,3386,3409,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link32",c,p,""));});c.pop();}t.b(" added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,3462,3476,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link33",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("target_object_1",c,p,1),c,p,0,3521,3535,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link34",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_3",c,p,1),c,p,0,3620,3999,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,3653,3676,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link35",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("source_1",c,p,1),c,p,0,3704,3727,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link36",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_2",c,p,1),c,p,0,3758,3781,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link37",c,p,""));});c.pop();}t.b(" added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,3834,3848,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link38",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("target_object_1",c,p,1),c,p,0,3890,3904,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link39",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("target_object_2",c,p,1),c,p,0,3949,3963,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link40",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_more",c,p,1),c,p,0,4051,4391,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,4084,4107,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link41",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("source_1",c,p,1),c,p,0,4135,4158,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link42",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_2",c,p,1),c,p,0,4189,4212,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link43",c,p,""));});c.pop();}t.b(" added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,4265,4279,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link44",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("target_objects_count_less_1",c,p,0)));t.b(" others.</span>\n        \n");});c.pop();}});c.pop();}if(t.s(t.f("sources_more",c,p,1),c,p,0,4456,5820,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("target_objects_1",c,p,1),c,p,0,4484,4710,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,4517,4540,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link45",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("sources_count_less_1",c,p,0)));t.b(" others</span> added you to list ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,4660,4674,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link46",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_2",c,p,1),c,p,0,4759,5045,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,4792,4815,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link47",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("sources_count_less_1",c,p,0)));t.b(" others</span> added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,4936,4950,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link48",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("target_object_1",c,p,1),c,p,0,4995,5009,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link49",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_3",c,p,1),c,p,0,5094,5436,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,5127,5150,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link50",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("sources_count_less_1",c,p,0)));t.b(" others</span> added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,5271,5285,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link51",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("target_object_1",c,p,1),c,p,0,5327,5341,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link52",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("target_object_2",c,p,1),c,p,0,5386,5400,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link53",c,p,""));});c.pop();}t.b("\n" + i);t.b("        \n");});c.pop();}if(t.s(t.f("target_objects_more",c,p,1),c,p,0,5488,5791,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        \n          ");if(t.s(t.f("source_0",c,p,1),c,p,0,5521,5544,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link54",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("sources_count_less_1",c,p,0)));t.b(" others</span> added you to lists ");if(t.s(t.f("target_object_0",c,p,1),c,p,0,5665,5679,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("list_link55",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("target_objects_count_less_1",c,p,0)));t.b(" others.</span>\n        \n");});c.pop();}});c.pop();}t.b("\n" + i);t.b("    <b class=\"activity-type\"><i class=\"");t.b(t.v(t.f("icon_class",c,p,0)));t.b("\"></i></b>\n  </div>\n</div>\n");return t.fl(); }, partials: {"activity_user_link0": {name:"activity_user_link"},"list_link1": {name:"list_link"},"activity_user_link2": {name:"activity_user_link"},"list_link3": {name:"list_link"},"list_link4": {name:"list_link"},"activity_user_link5": {name:"activity_user_link"},"list_link6": {name:"list_link"},"list_link7": {name:"list_link"},"list_link8": {name:"list_link"},"activity_user_link9": {name:"activity_user_link"},"list_link10": {name:"list_link"},"activity_user_link11": {name:"activity_user_link"},"activity_user_link12": {name:"activity_user_link"},"list_link13": {name:"list_link"},"activity_user_link14": {name:"activity_user_link"},"activity_user_link15": {name:"activity_user_link"},"list_link16": {name:"list_link"},"list_link17": {name:"list_link"},"activity_user_link18": {name:"activity_user_link"},"activity_user_link19": {name:"activity_user_link"},"list_link20": {name:"list_link"},"list_link21": {name:"list_link"},"list_link22": {name:"list_link"},"activity_user_link23": {name:"activity_user_link"},"activity_user_link24": {name:"activity_user_link"},"list_link25": {name:"list_link"},"activity_user_link26": {name:"activity_user_link"},"activity_user_link27": {name:"activity_user_link"},"activity_user_link28": {name:"activity_user_link"},"list_link29": {name:"list_link"},"activity_user_link30": {name:"activity_user_link"},"activity_user_link31": {name:"activity_user_link"},"activity_user_link32": {name:"activity_user_link"},"list_link33": {name:"list_link"},"list_link34": {name:"list_link"},"activity_user_link35": {name:"activity_user_link"},"activity_user_link36": {name:"activity_user_link"},"activity_user_link37": {name:"activity_user_link"},"list_link38": {name:"list_link"},"list_link39": {name:"list_link"},"list_link40": {name:"list_link"},"activity_user_link41": {name:"activity_user_link"},"activity_user_link42": {name:"activity_user_link"},"activity_user_link43": {name:"activity_user_link"},"list_link44": {name:"list_link"},"activity_user_link45": {name:"activity_user_link"},"list_link46": {name:"list_link"},"activity_user_link47": {name:"activity_user_link"},"list_link48": {name:"list_link"},"list_link49": {name:"list_link"},"activity_user_link50": {name:"activity_user_link"},"list_link51": {name:"list_link"},"list_link52": {name:"list_link"},"list_link53": {name:"list_link"},"activity_user_link54": {name:"activity_user_link"},"list_link55": {name:"list_link"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_item_mention": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("target_object_0",c,p,1),c,p,0,20,41,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("stream_tweet0",c,p,"  "));});c.pop();}return t.fl(); }, partials: {"stream_tweet0": {name:"stream_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_item_reply": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("target_0",c,p,1),c,p,0,13,34,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("stream_tweet0",c,p,"  "));});c.pop();}return t.fl(); }, partials: {"stream_tweet0": {name:"stream_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_item_retweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-item-activity-header\">\n  <div class=\"activity-additional-info\">\n    <div class=\"activity-timestamp\">\n      <span class=\"_timestamp ");if(t.s(t.f("is_relative_timestamp",c,p,1),c,p,0,176,197,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("js-relative-timestamp");});c.pop();}t.b("\" data-time=\"");t.b(t.v(t.f("actual_timestamp",c,p,0)));t.b("\" data-long-form=\"true\">");t.b(t.v(t.f("full_timestamp",c,p,0)));t.b("</span>\n    </div>\n  </div>\n  <div class=\"stream-item-activity-line js-actionable-user stream-item-activity-line-me\">\n\n");if(t.s(t.f("sources_1",c,p,1),c,p,0,435,510,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      ");if(t.s(t.f("source_0",c,p,1),c,p,0,455,478,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link0",c,p,""));});c.pop();}t.b(" retweeted you\n");});c.pop();}if(t.s(t.f("sources_2",c,p,1),c,p,0,543,672,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      ");if(t.s(t.f("source_0",c,p,1),c,p,0,563,586,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link1",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_1",c,p,1),c,p,0,617,640,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link2",c,p,""));});c.pop();}t.b(" retweeted you\n");});c.pop();}if(t.s(t.f("sources_3",c,p,1),c,p,0,705,885,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      ");if(t.s(t.f("source_0",c,p,1),c,p,0,725,748,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link3",c,p,""));});c.pop();}t.b(", ");if(t.s(t.f("source_1",c,p,1),c,p,0,776,799,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link4",c,p,""));});c.pop();}t.b(" and ");if(t.s(t.f("source_2",c,p,1),c,p,0,830,853,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link5",c,p,""));});c.pop();}t.b(" retweeted you\n");});c.pop();}if(t.s(t.f("sources_more",c,p,1),c,p,0,921,1064,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      ");if(t.s(t.f("source_0",c,p,1),c,p,0,941,964,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("activity_user_link6",c,p,""));});c.pop();}t.b(" and <span class='count-wrap'>");t.b(t.v(t.f("sources_count_less_1",c,p,0)));t.b("</span> others retweeted you\n");});c.pop();}t.b("\n" + i);t.b("    <b class=\"activity-type\"><i class=\"");t.b(t.v(t.f("icon_class",c,p,0)));t.b("\"></i></b>\n  </div>\n</div>\n<div class=\"activity-truncated-tweet\">\n");if(t.s(t.f("target_0",c,p,1),c,p,0,1217,1242,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("latest_tweet7",c,p,"    "));});c.pop();}t.b("</div>\n<div class=\"activity-supplement ");if(t.s(t.f("sources_2",c,p,1),c,p,0,1309,1327,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("follow-exactly-two");});c.pop();}if(t.s(t.f("sources_3",c,p,1),c,p,0,1355,1375,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("follow-more-than-two");});c.pop();}if(t.s(t.f("sources_more",c,p,1),c,p,0,1406,1426,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("follow-more-than-two");});c.pop();}t.b("\">\n");if(t.s(t.f("sources_limited",c,p,1),c,p,0,1468,1500,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_avatar_link_248",c,p,"    "));});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"activity_user_link0": {name:"activity_user_link"},"activity_user_link1": {name:"activity_user_link"},"activity_user_link2": {name:"activity_user_link"},"activity_user_link3": {name:"activity_user_link"},"activity_user_link4": {name:"activity_user_link"},"activity_user_link5": {name:"activity_user_link"},"activity_user_link6": {name:"activity_user_link"},"latest_tweet7": {name:"latest_tweet"},"user_avatar_link_248": {name:"user_avatar_link_24"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_item_truncated_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"sub-stream-item ");if(t.s(t.f("hidden",c,p,1),c,p,0,39,61,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("sub-stream-item-hidden");});c.pop();}t.b("\">\n  <div class=\"stream-item-content tweet js-actionable-tweet truncated-tweet activity-item-tweet ");t.b(t.v(t.f("css_classes",c,p,0)));t.b("\" data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("tweet_impression_id",c,p,0)));t.b(" ");if(t.s(t.f("current_user_retweet",c,p,1),c,p,0,262,289,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-my-retweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");});c.pop();}t.b(" data-item-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");if(t.s(t.f("was_retweeted",c,p,1),c,p,0,355,423,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("retweeting_status",c,p,1),c,p,0,377,401,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-retweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");});c.pop();}});c.pop();}t.b(" ");if(t.s(t.f("user",c,p,1),c,p,0,451,507,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");});c.pop();}t.b(" ");if(t.s(t.f("protected",c,p,1),c,p,0,531,552,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-protected=\"true\"");});c.pop();}t.b(" ");if(t.s(t.f("is_sponsored",c,p,1),c,p,0,584,604,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-promoted=\"true\"");});c.pop();}t.b(">\n    <div class=\"tweet-content\">\n      <div class=\"tweet-row\">\n        ");t.b(t.rp("latest_tweet_timestamp0",c,p,""));t.b(":\n");if(t.s(t.f("was_retweeted",c,p,1),c,p,0,748,848,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span class=\"retweet-icon\"></span>\n        ");t.b(t.t(t.f("retweet_source_screen_name_link",c,p,0)));t.b("\n" + i);});c.pop();}t.b("        &#32;");t.b(t.rp("tweet_text1",c,p,""));t.b("\n" + i);t.b("      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {"latest_tweet_timestamp0": {name:"latest_tweet_timestamp"},"tweet_text1": {name:"tweet_text"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_item_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("  <div class=\"in-reply-to js-tweet-ancestors\">\n  </div>\n\n<div class=\"tweet js-stream-tweet js-hover js-actionable-tweet js-original-tweet ");if(t.s(t.f("is_sponsored",c,p,1),c,p,0,156,171,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" promoted-tweet");});c.pop();}if(t.s(t.f("is_my_tweet",c,p,1),c,p,0,204,213,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" my-tweet");});c.pop();}if(t.s(t.f("favorited",c,p,1),c,p,0,243,253,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" favorited");});c.pop();}if(t.s(t.f("current_user_retweet",c,p,1),c,p,0,292,302,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" retweeted");});c.pop();}t.b(" ");if(t.s(t.f("hidden",c,p,1),c,p,0,339,361,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("sub-stream-item-hidden");});c.pop();}t.b("\" ");t.b(t.rp("tweet_data0",c,p,""));t.b(">\n  <i class=\"dogear\"></i>\n  <div class=\"content\">\n    <div class=\"stream-item-header\">\n");t.b(t.rp("tweet_user_block1",c,p,"      "));t.b(t.rp("tweet_timestamp2",c,p,"      "));t.b(t.rp("tweet_actions3",c,p,"      "));t.b("    </div>\n    <p class=\"js-tweet-text\">");t.b(t.t(t.f("linkified_text",c,p,0)));t.b("</p>\n    <div class=\"stream-item-footer\">\n");t.b(t.rp("tweet_context4",c,p,"      "));t.b("      <a class=\"details with-icn js-details\" href=\"#\">\n        <span class=\"js-icon-container\"");if(t.s(t.f("place_name",c,p,1),c,p,0,793,825,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" data-placename=\"");t.b(t.v(t.f("place_name",c,p,0)));t.b("\"");});c.pop();}t.b(">\n");if(t.s(t.f("is_reply",c,p,1),c,p,0,865,913,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <i class=\"sm-convo\"></i>\n");});c.pop();}t.b("        </span>\n        <b>\n          <span class=\"view-expanded js-view-details\">\n            ");if(t.s(t.f("is_reply",c,p,1),c,p,0,1035,1075,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("in reply to @");t.b(t.v(t.f("in_reply_to_screen_name",c,p,0)));});c.pop();}t.b("\n" + i);t.b("          </span>\n          <span class=\"hide-expanded js-hide-details\">\n            ");if(t.s(t.f("is_reply",c,p,1),c,p,0,1187,1227,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("in reply to @");t.b(t.v(t.f("in_reply_to_screen_name",c,p,0)));});c.pop();}t.b("\n" + i);t.b("          </span>\n        </b>\n      </a>\n    </div>\n");t.b(t.rp("stream_tweet_expansion5",c,p,"    "));t.b("  </div>\n</div>\n\n  <div class=\"replies js-other-components\">\n  </div>\n");return t.fl(); }, partials: {"tweet_data0": {name:"tweet_data"},"tweet_user_block1": {name:"tweet_user_block"},"tweet_timestamp2": {name:"tweet_timestamp"},"tweet_actions3": {name:"tweet_actions"},"tweet_context4": {name:"tweet_context"},"stream_tweet_expansion5": {name:"stream_tweet_expansion"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_item_user": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"sub-stream-item ");if(t.s(t.f("hidden",c,p,1),c,p,0,39,61,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("sub-stream-item-hidden");});c.pop();}t.b("\">\n  <div data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("' class='stream-item-content js-actionable-user user-content-medium clearfix ");if(t.s(t.f("promoted_content",c,p,1),c,p,0,200,216,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("promoted-account");});c.pop();}t.b("' data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(">\n");if(t.s(t.f("is_your_activity",c,p,1),c,p,0,349,499,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <img src='");t.b(t.v(t.f("mini_profile_image_url",c,p,0)));t.b("' alt='");t.b(t.v(t.f("name",c,p,0)));t.b("' class='user-content-image user-profile-link' data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("' title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\"/>\n");});c.pop();}if(!t.s(t.f("is_your_activity",c,p,1),c,p,1,0,0,"")){t.b("      <img src='");t.b(t.v(t.f("bigger_profile_image_url",c,p,0)));t.b("' alt='");t.b(t.v(t.f("name",c,p,0)));t.b("' class='user-content-image user-profile-link' data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("' title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\"/>\n");};t.b("\n" + i);t.b("    <div class=\"user-content-rest\">\n      <span class='user-name'>\n        <a class='user-profile-link' data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("' href='");t.b(t.v(t.f("profile_path",c,p,0)));t.b("' title='");t.b(t.v(t.f("name",c,p,0)));t.b("'><strong>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</strong></a>\n        <span class='full-name'>");t.b(t.v(t.f("name",c,p,0)));t.b("</span>\n");if(t.s(t.f("verified",c,p,1),c,p,0,994,1080,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span class=\"verified-icon-small\" title=\"Verified Account\"></span>\n");});c.pop();}if(t.s(t.f("protected",c,p,1),c,p,0,1116,1172,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span class=\"protected-icon\"></span>\n");});c.pop();}t.b("      </span>\n    </div>\n");t.b(t.rp("stream_user_buttons0",c,p,"      "));t.b("  </div>\n</div>");return t.fl(); }, partials: {"stream_user_buttons0": {name:"stream_user_buttons"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_of_me_stream_title": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span>\n  @mentions and more\n</span>\n<span class='activity-filters'>\n  <label for='show_mentions_only' class='show-mentions-only-label'>\n    <input type=\"checkbox\" name=\"show_mentions_only\" id=\"show_mentions_only\" value=\"1\" />\n    <span class='filter-text'>Show mentions only</span>\n  </label>\n</span>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_user_link": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"pretty-link js-user-profile-link js-action-profile-name\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"><strong class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</strong></a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"add_people": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-placeholder\">\n  <div class=\"stream-end-inner\">\n    <h2>Find people to add to your list</h2>\n    <form class=\"inline-form js-search-for-list-people\" action=\"");t.b(t.v(t.f("who_to_follow_search_form_path",c,p,0)));t.b("\" method=\"GET\">\n      <input type=\"text\" name=\"q\" placeholder=\"find users by name\">\n      <button class=\"btn js-submit\">Search</button>\n    </form>\n    <p>Search for a username, first or last name, business or brand. You can also add people from your <a href=\"");t.b(t.v(t.f("following_path",c,p,0)));t.b("\">Following</a> page or anyone's profile page.</p>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"add_to_list_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"add-to-list-prompt\">\n  <p>Include <span class=\"pretty-link\"><s>@</s><b>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</b></span> in:</p>\n</div>\n<ul class=\"list-membership-container\"></ul>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"admin_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"profile-user-only-admin-accessible\">");if(t.s(t.f("suspended",c,p,1),c,p,0,62,126,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("This account is suspended and is only accessible to admin users.");});c.pop();}if(!t.s(t.f("suspended",c,p,1),c,p,1,0,0,"")){t.b("This account is only accessible to admin users.");};t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"ancestors": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"in-reply-to js-tweet-ancestors\">\n  <div>\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,81,113,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      ");t.b(t.t(t.f("ancestors_html",c,p,0)));t.b("\n" + i);});c.pop();}if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("ancestors",c,p,1),c,p,0,187,220,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("simple_tweet0",c,p,"        "));});c.pop();}if(t.s(t.f("protected_ancestor",c,p,1),c,p,0,264,309,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("protected_ancestor_tweet1",c,p,"        "));});c.pop();}};t.b("  </div>\n</div>");return t.fl(); }, partials: {"simple_tweet0": {name:"simple_tweet"},"protected_ancestor_tweet1": {name:"protected_ancestor_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"avatar_row": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"avatar-row\">\n");if(t.s(t.f("items",c,p,1),c,p,0,37,558,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("image_is_placeholder",c,p,1),c,p,0,67,194,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"avatar avatar-placeholder size32\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" original-title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"></div>\n");});c.pop();}if(!t.s(t.f("image_is_placeholder",c,p,1),c,p,1,0,0,"")){t.b("      <span class=\"js-user-profile-link user-thumb\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n        <img class=\"avatar size32 js-bubble-event js-user-tipsy js-tooltip\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" original-title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n      </span>\n");};});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"back_link": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span>&middot; <a href=\"");t.b(t.v(t.f("route",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a></span>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"back_to_top": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<button type='button' class='btn-link back-to-top ");if(t.s(t.f("swift",c,p,1),c,p,0,60,66,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("hidden");});c.pop();}t.b("'>Back to top &uarr;</button>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"banned_passwords": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<script type=\"text/javascript\" id=\"banned_passwords\">\n  twttr.BANNED_PASSWORDS = [];\n  (function() {\n    var r = ");t.b(t.t(t.f("banned_pwds_rot13_json",c,p,0)));t.b(";\n    for (var i = r.length - 1; i >= 0; i--){\n      twttr.BANNED_PASSWORDS.push(r[i].replace(/[a-z]/gi, function(l){\n          var c = l.charCodeAt(0), n = c + 13;\n          if((c<=90 && n>90) || (n>122)) { n -= 26; }\n          return String.fromCharCode(n);\n      }));\n    };\n  })();\n</script>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"became_user_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"became-user-banner-outer banner-outer\">\n  <div class=\"banner\">\n    <div class=\"became-user-banner-inside banner-inside\">\n      <span>\n        You are accessing a user's account for support purposes. Please ensure you log out.\n      </span>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"big_avatar_list_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<li class=\"list-item js-list-item js-actionable-user\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(">\n");if(t.s(t.f("dismissable",c,p,1),c,p,0,145,224,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a href=\"#\" class=\"dismiss js-action-dismiss\"><i class=\"close\"></i></a>\n");});c.pop();}t.b("\n" + i);t.b("  \n  <a class=\"account-group js-account-group\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n");t.b(t.rp("user_image_1280",c,p,"    "));t.b("    <span class=\"account-group-inner js-action-profile-name\">\n      <strong class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>");if(t.s(t.f("verified",c,p,1),c,p,0,483,507,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified\"></i>");});c.pop();}t.b("\n" + i);t.b("      <small class=\"username\" data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("'><s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</small>\n    </span>\n  </a>\n");t.b(t.rp("combo_follow_button1",c,p,"  "));t.b("</li>");return t.fl(); }, partials: {"user_image_1280": {name:"user_image_128"},"combo_follow_button1": {name:"combo_follow_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"blocked_from_following_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Sorry, you can't follow this user (because they're blocking you).\n<a href=\"");t.b(t.v(t.f("blocked_from_following_learn_more_path",c,p,0)));t.b("\" target=\"_blank\" class=\"learn-more\">Learn more</a>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"bouncing_email_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module module-banner\">\n  <div class=\"flex-module\">\n");if(t.s(t.f("stacked",c,p,1),c,p,0,79,424,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"first-banner-row\">\n        <span class=\"title\">Whoops, we're having problems sending you email!</span>\n        <span>We've tried sending emails to <strong>");t.b(t.v(t.f("current_email",c,p,0)));t.b("</strong> but they are not getting delivered. You will not receive important account emails unless you update your email address.</span>\n      </div>\n");});c.pop();}if(!t.s(t.f("stacked",c,p,1),c,p,1,0,0,"")){t.b("      <div class=\"first-banner-row\">\n        <span class=\"title\">Is your email address active?</span>\n        <span>We've tried to send emails to <strong>");t.b(t.v(t.f("current_email",c,p,0)));t.b("</strong> but they are not getting delivered.</span>\n      </div>\n      <div class=\"second-banner-row\">\n        <p>Please <a id=\"bounce_settings_link\" href=\"");t.b(t.v(t.f("change_email_path",c,p,0)));t.b("\">update your email settings</a> or <a href=\"#\" class='reset-bounce-link'>try sending a message again</a> to your current address.</p>\n      </div>\n");};t.b("  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_accounts_onebox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"user card\">\n  <div class=\"card-body\">\n    <div class=\"onebox-header\">\n      <h3>Top people</h3>\n      <small class=\"view-all\"> &middot; <a class=\"js-onebox-view-all\" href=\"");t.b(t.v(t.f("view_all_path",c,p,0)));t.b("\">View all</a></small>\n    </div>\n    <div class=\"account-summary-grid\">\n      \n");if(t.s(t.f("items",c,p,1),c,p,0,297,343,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("card_accounts_onebox_item0",c,p,"        "));});c.pop();}t.b("    </div>\n  </div>\n</div>");return t.fl(); }, partials: {"card_accounts_onebox_item0": {name:"card_accounts_onebox_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_accounts_onebox_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"account-summary js-onebox-user-item js-actionable-user\" data-user-id=\"");t.b(t.v(t.f("id_str",c,p,0)));t.b("\" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(">\n");if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b(t.rp("combo_follow_button0",c,p,"    "));};t.b("  <div class=\"content\">\n    <a class=\"account-group js-user-profile-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id_str",c,p,0)));t.b("\">\n      <img class=\"avatar size48 js-action-profile-avatar\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n      <b class=\"fullname js-action-profile-name\">");t.b(t.v(t.f("name",c,p,0)));t.b("</b>\n      <span>&rlm;</span>\n      ");if(t.s(t.f("verified",c,p,1),c,p,0,560,584,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified\"></i>");});c.pop();}t.b("\n" + i);t.b("      <span class=\"username js-action-profile-name\"><s>@</s><b>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</b></span>\n    </a>\n    <small class=\"bio js-onebox-ellipsis\">");t.b(t.t(t.f("description",c,p,0)));t.b("</small>\n  </div>\n</div>\n");return t.fl(); }, partials: {"combo_follow_button0": {name:"combo_follow_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_event_onebox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"news card js-onebox-event-item\">\n  <a class=\"card-body\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">\n");if(t.s(t.f("media",c,p,1),c,p,0,98,255,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("thumbnail",c,p,1),c,p,0,119,236,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"image-wrapper\">\n          <img class=\"resize-to-fit\" src=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" alt=\"\">\n        </div>\n");});c.pop();}});c.pop();}t.b("    <h2 class=\"js-news-headline\">");t.b(t.v(t.f("title",c,p,0)));t.b("</h2>\n    <p class=\"js-news-snippet\">");t.b(t.v(t.f("description",c,p,0)));t.b("</p>\n    <span class=\"attribution url\">\n      ");t.b(t.v(t.f("display_url",c,p,0)));t.b("\n" + i);t.b("    </span>\n  </a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_news": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"story article js-story-item ");if(t.s(t.f("is_hashtag",c,p,1),c,p,0,55,65,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("is-hashtag");});c.pop();}t.b("\" data-query=\"");t.b(t.v(t.f("query",c,p,0)));t.b("\" data-story-type=\"news\" data-item-key=\"");t.b(t.v(t.f("story_key",c,p,0)));t.b("\">\n  <span class=\"story-header\">\n    \n    <a class=\"view-tweets js-action-card-search\" href=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\">\n      <small class=\"view-more-tweets\">View Tweets about this &rarr;</small>\n      <small class=\"view-hashtag\"><i class=\"sm-search\"></i><b class=\"search-text\">Search this #hashtag</b></small>\n    </a>\n    <h3 class=\"story-title js-story-title js-news-headline\"><a class=\"js-action-card-search\" href=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\">");t.b(t.v(t.f("story_name",c,p,0)));t.b("</a></h3>\n  </span>\n  <div class=\"story-body\">\n    <a class=\"story-article js-action-card-news\" href=\"");t.b(t.v(t.f("article_url",c,p,0)));t.b("\" target=\"_blank\">\n");if(t.s(t.f("article_image",c,p,1),c,p,0,845,981,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"image-wrapper\">\n          <img class=\"article-image\" src=\"");t.b(t.v(t.f("article_image",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("title",c,p,0)));t.b("\">\n        </div>\n");});c.pop();}t.b("      <h4 class=\"story-title\">");t.b(t.v(t.f("title",c,p,0)));t.b("</h4>\n      <p class=\"story-summary js-news-snippet\">");t.b(t.v(t.f("description",c,p,0)));t.b("</p>\n      <p class=\"metadata js-metadata\">");t.b(t.v(t.f("article_display_url",c,p,0)));t.b("</p>\n    </a>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_news_onebox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"news card js-onebox-news-item\">\n  <a class=\"card-body\" href=\"");t.b(t.v(t.f("article_url",c,p,0)));t.b("\" target=\"_blank\">\n    <div class=\"onebox-header\">\n      <h3>Top news</h3>\n    </div>\n");if(t.s(t.f("article_image",c,p,1),c,p,0,196,293,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"image-wrapper\">\n        <img src=\"");t.b(t.v(t.f("article_image",c,p,0)));t.b("\" alt=\"\">\n      </div>\n");});c.pop();}t.b("    <h2 class=\"js-news-headline\">");t.b(t.v(t.f("title",c,p,0)));t.b("</h2>\n    <p class=\"js-news-snippet\">");t.b(t.v(t.f("description",c,p,0)));t.b("</p>\n    <span class=\"attribution url\">\n      ");t.b(t.v(t.f("article_display_url",c,p,0)));t.b("\n" + i);t.b("    </span>\n  </a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_soccer_onebox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"card card-soccer js-onebox-soccer-item\">\n\n  <div class=\"matched-event\">\n  </div>\n\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_topic": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n");t.b("\n" + i);t.b("<div class=\"story ");t.b(t.v(t.f("media_type",c,p,0)));t.b(" js-story-item js-loading loading ");if(!t.s(t.f("has_media",c,p,1),c,p,1,0,0,"")){t.b("js-nomedia nomedia");};t.b(" ");if(t.s(t.f("is_hashtag",c,p,1),c,p,0,131,141,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("is-hashtag");});c.pop();}t.b("\" data-query=\"");t.b(t.v(t.f("escaped_query",c,p,0)));t.b("\" data-story-type=\"topic\" data-card-media-type=\"");t.b(t.v(t.f("media_type",c,p,0)));t.b("\" data-item-key=\"");t.b(t.v(t.f("story_key",c,p,0)));t.b("\">\n  <span class=\"story-header\">\n    <a class=\"view-tweets js-action-card-search\" href=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\">\n      <span class=\"view-more-tweets\">View Tweets about this &rarr;</span>\n      <span class=\"view-hashtag\"><i class=\"sm-search\"></i><b class=\"search-text\">Search this #hashtag</b></span>\n    </a>\n    <h3 class=\"story-title js-news-headline\"><a class=\"js-action-card-search\" href=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\"  data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\">");t.b(t.v(t.f("story_name",c,p,0)));t.b("</a></h3>\n  </span>\n");if(t.s(t.f("has_media",c,p,1),c,p,0,821,2272,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"story-body\">\n    <a class=\"media-card js-action-card-media\" href=\"");t.b(t.v(t.f("card_url",c,p,0)));t.b("\" >\n      <div class=\"story-load-status\">\n        <p>Loading...</p>\n      </div>\n      <img class=\"story-");t.b(t.v(t.f("media_type",c,p,0)));t.b(" js-story-media\" data-item-id=\"");t.b(t.v(t.f("escaped_query",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("escaped_query",c,p,0)));t.b("\" data-img-src=\"");t.b(t.v(t.f("data_image_url",c,p,0)));t.b("\">\n");if(t.s(t.f("has_video",c,p,1),c,p,0,1162,1204,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <i class=\"play-large\"></i>\n");});c.pop();}t.b("    </a>\n    <a class=\"story-tweet js-action-card-media\" href=\"");t.b(t.v(t.f("card_url",c,p,0)));t.b("\">\n");if(t.s(t.f("tweet",c,p,1),c,p,0,1311,1742,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"content\">\n        <span class=\"details\">\n          <i class=\"disco-media-type\"></i>View details\n        </span>\n");if(t.s(t.f("user",c,p,1),c,p,0,1459,1666,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <img class=\"avatar size20\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n          <strong class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n          <span class=\"username\"><s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span>\n");});c.pop();}t.b("        <p class=\"tweet-text\">");t.b(t.v(t.f("tweet_text",c,p,0)));t.b("</p>\n      </div>\n");});c.pop();}t.b("    </a>\n  </div>\n  <span class=\"media-headline\">\n    <h3 class=\"story-title js-news-headline\">\n      <a class=\"js-action-card-search\" href=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\">\n        <span class=\"story-title-text\">");t.b(t.v(t.f("story_name",c,p,0)));t.b("</span>\n      </a>\n    </h3>\n  </span>\n");if(t.s(t.f("has_attribution",c,p,1),c,p,0,2070,2249,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <a class=\"attribution js-story-attribution\" href=\"");t.b(t.v(t.f("attribution_url",c,p,0)));t.b("\" target=\"_blank\">\n    <img class=\"favicon\" src=\"");t.b(t.v(t.f("attribution_img",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("attribution_name",c,p,0)));t.b("\">\n  </a>\n");});c.pop();}});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n");t.b("\n" + i);if(t.s(t.f("has_media",c,p,1),c,p,0,17,138,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("has_image",c,p,1),c,p,0,34,63,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("card_tweet_image0",c,p,"    "));});c.pop();}if(t.s(t.f("has_video",c,p,1),c,p,0,94,123,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("card_tweet_video1",c,p,"    "));});c.pop();}});c.pop();}t.b("\n");t.b("\n" + i);if(!t.s(t.f("has_media",c,p,1),c,p,1,0,0,"")){t.b("  <div class=\"card js-card-item\" data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-card-type=\"tweet\">\n    \n    <div class=\"stream-item\">");t.b(t.rp("stream_tweet2",c,p,""));t.b("</div>\n    \n    <a class=\"card-footer js-action-card-permalink\" href=\"");t.b(t.v(t.f("permalink_path",c,p,0)));t.b("\">\n      <i class=\"chev-right\"></i>\n      <p class=\"context\">");t.b(t.v(t.f("social_proof",c,p,0)));t.b("</p>\n    </a>\n  </div>\n");};return t.fl(); }, partials: {"card_tweet_image0": {name:"card_tweet_image"},"card_tweet_video1": {name:"card_tweet_video"},"stream_tweet2": {name:"stream_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_tweet_image": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("  \n\n<div class=\"card image js-card-item\" data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-card-type=\"tweet\">\n  \n  <a class=\"card-footer-overlay js-action-card-permalink\" href=\"");t.b(t.v(t.f("permalink_path",c,p,0)));t.b("\">\n    <i class=\"chev-light-right\"></i>\n    <div class=\"headline\">\n");if(t.s(t.f("user",c,p,1),c,p,0,255,356,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <img class=\"attribution-icon\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\">\n        <h3>");t.b(t.v(t.f("name",c,p,0)));t.b(":</h3>\n");});c.pop();}t.b("      <span class=\"content-preview\">");t.b(t.v(t.f("text",c,p,0)));t.b("</span>\n      <p class=\"context\">");t.b(t.v(t.f("social_proof",c,p,0)));t.b("</p>\n    </div>\n  </a>\n  \n  <a class=\"card-background js-action-card-permalink\" href=\"");t.b(t.v(t.f("permalink_path",c,p,0)));t.b("\">\n    <img class=\"card-background-image\" data-item-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" src=\"");t.b(t.v(t.f("card_background_image",c,p,0)));t.b("\" alt=\"\" />\n  </a>\n  <a href=\"#\">\n    <img class=\"media attribution-icon\" src=\"http://yfrog.com/favicon.ico\" alt=\"\">\n  </a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_tweet_video": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"card full-bleed video js-card-item\" data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-card-type=\"tweet\">\n  \n  <a class=\"card-footer-overlay js-action-card-permalink\" href=\"");t.b(t.v(t.f("permalink_path",c,p,0)));t.b("\">\n    <i class=\"chev-light-right\"></i>\n    <div class=\"headline\">\n");if(t.s(t.f("user",c,p,1),c,p,0,264,365,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <img class=\"attribution-icon\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\">\n        <h3>");t.b(t.v(t.f("name",c,p,0)));t.b(":</h3>\n");});c.pop();}t.b("      <span class=\"content-preview\">");t.b(t.v(t.f("text",c,p,0)));t.b("</span>\n      <p class=\"context\">");t.b(t.v(t.f("social_proof",c,p,0)));t.b("</p>\n    </div>\n  </a>\n  \n  <a class=\"card-background js-action-card-permalink\" href=\"");t.b(t.v(t.f("permalink_path",c,p,0)));t.b("\">\n    <img class=\"card-background-image\" data-item-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" src=\"");t.b(t.v(t.f("card_background_image",c,p,0)));t.b("\"alt=\"\" />\n    <i class=\"play-large\"></i>\n  </a>\n  <a href=\"#\">\n    <img class=\"media attribution-icon\" src=\"http://yfrog.com/favicon.ico\" alt=\"\">\n  </a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"cards_base": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("photos",c,p,1),c,p,0,11,27,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("cards_media0",c,p,""));});c.pop();}if(t.s(t.f("players",c,p,1),c,p,0,51,67,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("cards_media1",c,p,""));});c.pop();}if(t.s(t.f("summaries",c,p,1),c,p,0,94,112,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("cards_summary2",c,p,""));});c.pop();}return t.fl(); }, partials: {"cards_media0": {name:"cards_media"},"cards_media1": {name:"cards_media"},"cards_summary2": {name:"cards_summary"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"cards_flag_media": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class=\"flag-container flag-cards\">\n  <button type=\"button\" class=\"flaggable btn-link\">\n    Flag media\n  </button>\n  <span class=\"flagged hidden\">\n    Flagged\n    <span>\n      <a target=\"_blank\" href=\"//support.twitter.com/articles/20069937\">\n        (learn more)\n      </a>\n    </span>\n  </span>\n</span>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"cards_layout": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\">\n    <base href=\"https://twitter.com\" target=\"_top\">\n    <title>Twitter Card Preview</title>\n    <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("core_css_bundle",c,p,0)));t.b("\">\n    <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("more_css_bundle",c,p,0)));t.b("\">\n  </head>\n  <body>\n    ");t.b(t.t(t.f("content_for_layout",c,p,0)));t.b("\n" + i);t.b("  </body>\n</html>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"cards_media": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div data-card-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-card-type=\"");if(t.s(t.f("players",c,p,1),c,p,0,57,63,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("player");});c.pop();}if(!t.s(t.f("players",c,p,1),c,p,1,0,0,"")){t.b("photo");};t.b("\" class=\"cards-base cards-multimedia\">\n  <div class=\"media\">\n");if(t.s(t.f("players",c,p,1),c,p,0,323,409,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <iframe src=\"");t.b(t.v(t.f("source_url",c,p,0)));t.b("\" width=\"");t.b(t.v(t.f("width",c,p,0)));t.b("\" height=\"");t.b(t.v(t.f("height",c,p,0)));t.b("\"></iframe>\n");});c.pop();}if(!t.s(t.f("players",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("images",c,p,1),c,p,0,449,779,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("web",c,p,1),c,p,0,457,771,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a ");if(!t.s(t.f("permalink_continuity",c,p,1),c,p,1,0,0,"")){t.b("target=\"_blank\" ");};t.b("class=\"twitter-timeline-link\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">\n      <img src=\"");t.b(t.v(t.f("image_url",c,p,0)));t.b("\" alt=\"Embedded image permalink\" ");if(t.s(t.f("width",c,p,1),c,p,0,649,708,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("height",c,p,1),c,p,0,660,697,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("width=\"");t.b(t.v(t.f("width",c,p,0)));t.b("\" height=\"");t.b(t.v(t.f("height",c,p,0)));t.b("\"");});c.pop();}});c.pop();}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0,729,746,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("title=\"");t.b(t.v(t.f("title",c,p,0)));t.b("\"");});c.pop();}t.b(">\n    </a>\n");});c.pop();}});c.pop();}};t.b("  </div>\n  <div class=\"cards-content\">\n    ");if(t.s(t.f("title",c,p,1),c,p,0,856,1004,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<h3>\n      <a ");if(!t.s(t.f("permalink_continuity",c,p,1),c,p,1,0,0,"")){t.b("target=\"_blank\" ");};t.b("class=\"twitter-timeline-link\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b(t.v(t.f("title",c,p,0)));t.b("</a>\n    </h3>");});c.pop();}t.b("\n" + i);t.b("    <div class=\"byline\">\n      ");if(t.s(t.f("author_user",c,p,1),c,p,0,1062,1087,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("By ");t.b(t.rp("cards_user_byline0",c,p,""));});c.pop();}t.b("\n" + i);if(t.s(t.f("twimg_attribution",c,p,1),c,p,0,1132,1399,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        ");if(t.s(t.f("author_user",c,p,1),c,p,0,1157,1166,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("&middot; ");});c.pop();}t.b("\n" + i);t.b("        <span class=\"pb-attribution\">\n          Powered by <a target=\"_blank\" class=\"with-icn\" href=\"http://photobucket.com/twitter\"><i class=\"service-sm-native-photobucket\"></i>Photobucket</a>\n        </span>\n");});c.pop();}t.b("    </div>\n    ");if(t.s(t.f("description",c,p,1),c,p,0,1453,1593,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<p><a ");if(!t.s(t.f("permalink_continuity",c,p,1),c,p,1,0,0,"")){t.b("target=\"_blank\" ");};t.b("class=\"twitter-timeline-link\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b(t.v(t.f("description",c,p,0)));t.b("</a></p>");});c.pop();}t.b("\n" + i);t.b("  </div>\n");if(t.s(t.f("site_user",c,p,1),c,p,0,1635,1657,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("cards_user_source1",c,p,""));});c.pop();}t.b("</div>");return t.fl(); }, partials: {"cards_user_byline0": {name:"cards_user_byline"},"cards_user_source1": {name:"cards_user_source"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"cards_summary": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div data-card-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-card-type=\"summary\" class=\"cards-base cards-summary ");if(t.s(t.f("images",c,p,1),c,p,0,97,123,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("web",c,p,1),c,p,0,105,115,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("with-image");});c.pop();}});c.pop();}t.b("\">\n  <div class=\"cards-content clearfix\">\n");if(t.s(t.f("images",c,p,1),c,p,0,191,435,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("web",c,p,1),c,p,0,199,427,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a target=\"_blank\" class=\"twitter-timeline-link\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">\n      <img class=\"summary-thumbnail\" src=\"");t.b(t.v(t.f("image_url",c,p,0)));t.b("\" alt=\"\" ");if(t.s(t.f("width",c,p,1),c,p,0,343,402,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("height",c,p,1),c,p,0,354,391,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("height=\"");t.b(t.v(t.f("height",c,p,0)));t.b("\" width=\"");t.b(t.v(t.f("width",c,p,0)));t.b("\"");});c.pop();}});c.pop();}t.b(">\n    </a>\n");});c.pop();}});c.pop();}t.b("    <h3>\n      <a ");if(!t.s(t.f("permalink_continuity",c,p,1),c,p,1,0,0,"")){t.b("target=\"_blank\" ");};t.b("class=\"twitter-timeline-link\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b(t.v(t.f("title",c,p,0)));t.b("</a>\n    </h3>\n");if(t.s(t.f("author_user",c,p,1),c,p,0,620,681,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"byline\">By ");t.b(t.rp("cards_user_byline0",c,p,""));t.b("</div>\n");});c.pop();}if(t.s(t.f("description",c,p,1),c,p,0,718,896,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <p class=\"article\">\n      <a ");if(!t.s(t.f("permalink_continuity",c,p,1),c,p,1,0,0,"")){t.b("target=\"_blank\" ");};t.b("class=\"twitter-timeline-link\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b(t.v(t.f("description",c,p,0)));t.b("</a>\n    </p>\n");});c.pop();}if(t.s(t.f("site_user",c,p,1),c,p,0,931,953,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("cards_user_source1",c,p,""));});c.pop();}t.b("  </div>\n</div>");return t.fl(); }, partials: {"cards_user_byline0": {name:"cards_user_byline"},"cards_user_source1": {name:"cards_user_source"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"cards_user_byline": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"account-group js-account-group js-action-profile js-user-profile-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n  <strong class=\"fullname js-action-profile-name\">");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n  <span class=\"username js-action-profile-name\"><s>@</s><b>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</b></span>\n</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"cards_user_source": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"source\"><a class=\"account-group js-action-profile js-user-profile-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n  <img class=\"avatar js-action-profile-avatar\" src=\"");t.b(t.v(t.f("profile_image_url_https",c,p,0)));t.b("\" alt=\"\">\n  <strong class=\"fullname js-action-profile-name\">");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n  <span class=\"username js-action-profile-name\"><s>@</s><b>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</b></span>\n</a>\n &middot; ");t.b(t.rp("user_item_action0",c,p,""));t.b("\n" + i);t.b("</div>\n");return t.fl(); }, partials: {"user_item_action0": {name:"user_item_action"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"checkbox_list_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"");t.b(t.v(t.f("className",c,p,0)));t.b("\" data-list-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n");if(t.s(t.f("icon",c,p,1),c,p,0,60,114,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span class=\"");t.b(t.v(t.f("icon",c,p,0)));t.b("\"></span>\n    ");t.b(t.t(t.f("label",c,p,0)));t.b("\n" + i);});c.pop();}if(!t.s(t.f("icon",c,p,1),c,p,1,0,0,"")){t.b("    <img class=\"loading-spinner\" src=\"/images/spinner.gif\" alt=\"waiting\">\n    <input class=\"membership-checkbox\" id=\"list_");t.b(t.v(t.f("id",c,p,0)));t.b("\" type=\"checkbox\" ");if(t.s(t.f("user_is_member",c,p,1),c,p,0,301,341,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-is-checked=\"true\" checked=\"checked\"");});c.pop();}t.b(">\n    ");t.b(t.t(t.f("label",c,p,0)));t.b("\n" + i);if(t.s(t.f("is_private",c,p,1),c,p,0,397,453,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <i title=\"Private List\" class=\"sm-lock\"></i>\n");});c.pop();}};t.b("</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"combo_follow_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"js-follow-combo follow-combo btn-group js-actionable-user ");if(t.s(t.f("blocking",c,p,1),c,p,0,118,125,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("blocked");});c.pop();}if(!t.s(t.f("blocking",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("following",c,p,1),c,p,1,0,0,"")){t.b("not-following");};if(t.s(t.f("following",c,p,1),c,p,0,206,215,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("following");});c.pop();}if(t.s(t.f("follow_request_sent",c,p,1),c,p,0,253,273,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" follow-request-sent");});c.pop();}if(t.s(t.f("protected",c,p,1),c,p,0,311,321,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" protected");});c.pop();}if(t.s(t.f("following",c,p,1),c,p,0,349,441,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("want_retweets",c,p,1),c,p,0,367,377,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" including");});c.pop();}if(t.s(t.f("notifications",c,p,1),c,p,0,413,423,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" notifying");});c.pop();}});c.pop();}if(t.s(t.f("can_dm",c,p,1),c,p,0,466,473,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" can-dm");});c.pop();}};if(t.s(t.f("dismissable",c,p,1),c,p,0,513,525,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" dismissable");});c.pop();}t.b("\"\n    data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" ");t.b(t.t(t.f("source_impression_id",c,p,0)));t.b(" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(">\n  <a class=\"follow-btn btn js-combo-btn js-recommended-item\">\n    <div class=\"js-action-follow follow-text action-text\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      <i class=\"follow\"></i>\n      Follow\n    </div>\n    <div class=\"js-action-unfollow following-text action-text\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Following\n    </div>\n    <div class=\"js-action-unfollow unfollow-text action-text\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Unfollow\n    </div>\n    <div class=\"block-text action-text\">\n      Blocked\n    </div>\n    <div class=\"js-action-unblock unblock-text action-text\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Unblock\n    </div>\n    <div class=\"js-action-unfollow pending-text action-text\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Pending\n    </div>\n    <div class=\"js-action-unfollow cancel-req-text action-text\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Cancel\n    </div>\n  </a>\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,1518,1662,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span href=\"#\" class=\"btn btn-user-actions js-action-profilemenu\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      <i class=\"account-arrow\"></i>\n    </span>\n");});c.pop();}t.b("</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"combo_follow_button_dropdown": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"js-combo-btn-dropdown-options dropdown-menu btn-group-dropdown\">\n  <li class=\"dropdown-caret\">\n    <span class=\"caret-outer\"></span>\n    <span class=\"caret-inner\"></span>\n  </li>\n  <li>\n    <a class=\"js-action-mention is-not-blocked\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Tweet to <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);t.b("    </a>\n  </li>\n  <li>\n    <a class=\"js-direct-message-action can-send-dm\" href=\"#\">\n      Send a Direct Message\n    </a>\n  </li>\n\n  <li>\n    <a class=\"js-action-add-to-list is-not-blocked\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Add or remove from lists...\n    </a>\n  </li>\n\n  <li class=\"is-not-blocked dropdown-divider\"></li>\n\n  <li>\n    <a class=\"js-action-block is-not-blocked\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Block <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);t.b("    </a>\n  </li>\n  <li>\n    <a class=\"js-action-unblock is-blocked\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Unblock <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);t.b("    </a>\n  </li>\n  <li>\n    <a class=\"js-action-spam is-not-blocked\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Report <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" for spam\n    </a>\n  </li>\n  <li>\n    <a class=\"js-action-dismiss is-dismissable\" href=\"#\">\n      Hide this suggestion\n    </a>\n  </li>\n\n  <li class=\"is-following dropdown-divider\"></li>\n\n  <li>\n    <a class=\"js-retweet-setting is-not-including\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Turn on Retweets\n    </a>\n  </li>\n  <li>\n    <a class=\"js-retweet-setting is-including\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      \n      Turn off Retweets\n    </a>\n  </li>\n  <li>\n    <a class=\"js-device-notifications is-not-notifying\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Turn on mobile notifications\n    </a>\n  </li>\n  <li>\n    <a class=\"js-device-notifications is-notifying\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      \n      Turn off mobile notifications\n    </a>\n  </li>\n</ul>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"connect_dashboard": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dashboard\">\n  <div class=\"module\">\n    <ul class=\"js-nav-links\">\n      <li class=\"");if(t.s(t.f("on_interactions",c,p,1),c,p,0,114,120,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link js-nav\" href=\"");t.b(t.v(t.f("interactions_path",c,p,0)));t.b("\" data-nav=\"connect\">Interactions <i class=\"chev-right\"></i></a></li>\n      <li class=\"");if(t.s(t.f("on_mentions",c,p,1),c,p,0,300,306,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link js-nav\" href=\"");t.b(t.v(t.f("mentions_path",c,p,0)));t.b("\" data-nav=\"mentions\">Mentions <i class=\"chev-right\"></i></a></li>\n    </ul>\n  </div>\n\n");t.b(t.rp("japanese_ad_iframe0",c,p,"  "));t.b("\n" + i);if(t.s(t.f("who_to_follow",c,p,1),c,p,0,509,552,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dashboard_user_recommendations1",c,p,"    "));});c.pop();}t.b(t.rp("footer2",c,p,"  "));t.b("</div>\n");return t.fl(); }, partials: {"japanese_ad_iframe0": {name:"japanese_ad_iframe"},"dashboard_user_recommendations1": {name:"dashboard_user_recommendations"},"footer2": {name:"footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"interactions": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("connect/connect_dashboard0",c,p,""));t.b("<div class=\"content-main\" id=\"timeline\">\n  <div class=\"content-header\">\n    <div class=\"header-inner\">\n      <h2 class=\"js-timeline-title\">Interactions</h2>\n    </div>\n  </div>\n");t.b(t.rp("timeline1",c,p,"  "));t.b("</div>\n");return t.fl(); }, partials: {"connect/connect_dashboard0": {name:"connect/connect_dashboard"},"timeline1": {name:"timeline"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mentions": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("connect/connect_dashboard0",c,p,""));t.b("<div class=\"content-main\" id=\"timeline\">\n  <div class=\"content-header\">\n    <div class=\"header-inner\">\n      <h2 class=\"js-timeline-title\">Mentions</h2>\n    </div>\n  </div>\n");t.b(t.rp("timeline1",c,p,"  "));t.b("</div>\n");t.b(t.rp("dialogs/sensitive_flag_confirmation2",c,p,""));return t.fl(); }, partials: {"connect/connect_dashboard0": {name:"connect/connect_dashboard"},"timeline1": {name:"timeline"},"dialogs/sensitive_flag_confirmation2": {name:"dialogs/sensitive_flag_confirmation"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"contact_import_loading": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-loading\">\n  <div class=\"stream-end-inner\">\n    <span class=\"spinner\" title=\"Loading...\"></span>\n\n    <p>\n      <strong>We're loading your contacts.</strong>\n    </p>\n\n    <p>\n      (This can take a while if you've got a large address book.)\n    </p>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"contact_import_matches": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream\">\n  <div class=\"stream-items find-friends-results clearfix rm-streamitem-clearfix\"></div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"contact_import_matches_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("stream_header0",c,p,""));t.b("<div class=\"js-contact-import-header-placeholder\"></div>");return t.fl(); }, partials: {"stream_header0": {name:"stream_header"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"contact_import_matches_stats": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"header-inner\">\n  <h2>\n    Your ");t.b(t.v(t.f("service_name",c,p,0)));t.b(" contacts\n    <small class=\"view-toggler\">&middot; <a href=\"");t.b(t.v(t.f("retry_service_path",c,p,0)));t.b("\">Try another service</a></small>\n    <a class=\"js-action-follow-all follow-btn btn small\">\n      <i class=\"follow\"></i>");t.b(t.v(t.f("follow_all_text",c,p,0)));t.b("\n" + i);t.b("    </a>\n  </h2>\n  <small class=\"view-toggler\">\n");if(t.s(t.f("following_count",c,p,1),c,p,0,353,513,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <a class=\"js-toggle-following\" href=\"#\">Show <span>");t.b(t.v(t.f("following_count",c,p,0)));t.b("</span> following</a>\n");if(t.s(t.f("others_count",c,p,1),c,p,0,475,491,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("       /\n");});c.pop();}});c.pop();}if(t.s(t.f("others_count",c,p,1),c,p,0,555,646,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <a class=\"invite-contacts\" href=\"#\">Invite ");t.b(t.v(t.f("others_count",c,p,0)));t.b(" to join Twitter</a>\n");});c.pop();}t.b("  </small>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"contact_import_service_icon": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<strong class=\"service-name service-");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-service-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n  ");if(t.s(t.f("html_name",c,p,1),c,p,0,86,214,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<strong class='service hotmail'><span></span></strong> &nbsp;&nbsp; <strong class='service msn-messenger'><span></span></strong>");});c.pop();}t.b("\n" + i);t.b("  ");if(!t.s(t.f("html_name",c,p,1),c,p,1,0,0,"")){t.b("<span></span>");};t.b("\n" + i);t.b("</strong>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"contact_import_service_msn": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<i class=\"service-hotmail\"></i><b>Hotmail</b>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"contact_import_service_name": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-service-name source\" data-service-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n  ");if(t.s(t.f("html_name",c,p,1),c,p,0,78,93,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.t(t.f("html_name",c,p,0)));});c.pop();}t.b("\n" + i);t.b("  ");if(!t.s(t.f("html_name",c,p,1),c,p,1,0,0,"")){t.b("<i class=\"service-");t.b(t.v(t.f("id",c,p,0)));t.b("\"></i><b>");t.b(t.v(t.f("name",c,p,0)));t.b("</b>");};t.b("\n" + i);t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"contact_import_services_icon_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"service-links\">\n");if(t.s(t.f("services",c,p,1),c,p,0,43,316,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a class=\"service-button service-link ");if(t.s(t.f("matched",c,p,1),c,p,0,98,106,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected");});c.pop();}t.b("\" href=\"#\"\n        data-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-popup=\"");t.b(t.v(t.f("popup",c,p,0)));t.b("\" data-width=\"");t.b(t.v(t.f("width",c,p,0)));t.b("\" data-height=\"");t.b(t.v(t.f("height",c,p,0)));t.b("\" data-name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n");t.b(t.rp("contact_import_service_icon0",c,p,"      "));t.b("    </a>\n");});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"contact_import_service_icon0": {name:"contact_import_service_icon"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"contact_import_services_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"service-links\">\n");if(t.s(t.f("services",c,p,1),c,p,0,43,299,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a class=\"service-button service-link ");if(t.s(t.f("matched",c,p,1),c,p,0,98,106,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected");});c.pop();}t.b("\" href=\"#\"\n        data-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-popup=\"");t.b(t.v(t.f("popup",c,p,0)));t.b("\" data-width=\"");t.b(t.v(t.f("width",c,p,0)));t.b("\" data-height=\"");t.b(t.v(t.f("height",c,p,0)));t.b("\" data-name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n");t.b(t.rp("contact_import_service_name0",c,p,"      "));t.b("    </a>\n");});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"contact_import_service_name0": {name:"contact_import_service_name"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"contact_import_services_vertical": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"find-friends-sources stream-item\">\n  <ul class=\"find-friends-list\">\n");if(t.s(t.f("services",c,p,1),c,p,0,97,572,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li class=\"js-service-row ");if(t.s(t.f("matched_email",c,p,1),c,p,0,148,167,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("service-row-matched");});c.pop();}t.b("\" data-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-popup=\"");t.b(t.v(t.f("popup",c,p,0)));t.b("\" data-width=\"");t.b(t.v(t.f("width",c,p,0)));t.b("\" data-height=\"");t.b(t.v(t.f("height",c,p,0)));t.b("\">\n        <a class=\"btn ");if(t.s(t.f("matched_email",c,p,1),c,p,0,318,331,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" primary-btn ");});c.pop();}t.b("\">\n          Search contacts\n        </a>\n");t.b(t.rp("contact_import_service_name0",c,p,"        "));if(t.s(t.f("matched_email",c,p,1),c,p,0,458,537,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <div class=\"metadata matched-email\">");t.b(t.v(t.f("matched_email",c,p,0)));t.b("</div>\n");});c.pop();}t.b("      </li>\n");});c.pop();}t.b("  </ul>\n  <p class=\"fine-print\">\n");t.b(t.rp("import_disclaimer1",c,p,"  "));t.b("  </p>\n</div>\n");return t.fl(); }, partials: {"contact_import_service_name0": {name:"contact_import_service_name"},"import_disclaimer1": {name:"import_disclaimer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"content_home": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-main js-content-main\">\n  <div class=\"content-header\">\n  </div>\n  <div class=\"stream\">\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"conversation": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"conversation\">\n  <div class=\"related-tweets\" ");t.b(t.rp("related_tweets_data_attributes0",c,p,""));t.b(">\n");if(t.s(t.f("all_but_last_ancestor_tweet_views",c,p,1),c,p,0,136,165,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("simple_tweet1",c,p,"      "));});c.pop();}if(t.s(t.f("last_ancestor_tweet_view",c,p,1),c,p,0,237,286,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("conversation_last_ancestor_tweet2",c,p,"      "));});c.pop();}if(t.s(t.f("has_earlier",c,p,1),c,p,0,336,373,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("conversation_earlier3",c,p,"      "));});c.pop();}t.b("  </div>\n");if(t.s(t.f("tweet_view",c,p,1),c,p,0,416,447,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("details_pane_tweet4",c,p,"    "));});c.pop();}t.b("</div>");return t.fl(); }, partials: {"related_tweets_data_attributes0": {name:"related_tweets_data_attributes"},"simple_tweet1": {name:"simple_tweet"},"conversation_last_ancestor_tweet2": {name:"conversation_last_ancestor_tweet"},"conversation_earlier3": {name:"conversation_earlier"},"details_pane_tweet4": {name:"details_pane_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"conversation_earlier": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<fieldset class=\"in-reply-to-border conversation-earlier-border\">\n  <legend class=\"in-reply-to-text\">\n    in reply to&nbsp;&uarr;</a>\n  </legend>\n</fieldset>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"conversation_last_ancestor_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"conversation-last-ancestor-tweet\">\n");t.b(t.rp("simple_tweet0",c,p,"  "));t.b("</div>");return t.fl(); }, partials: {"simple_tweet0": {name:"simple_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"conversation_thread": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"messages-pane\" data-thread-id=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n  <div class=\"messages-pane-header\">\n    <h2>You and ");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</h2>\n  </div>\n");if(t.s(t.f("items",c,p,1),c,p,0,156,307,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("delimiter_text",c,p,1),c,p,0,180,268,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class='message-divider'>\n      <span>");t.b(t.v(t.f("delimiter_text",c,p,0)));t.b("</span>\n    </div>\n");});c.pop();}t.b(t.rp("message0",c,p,"    "));});c.pop();}t.b("</div>");return t.fl(); }, partials: {"message0": {name:"message"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"conversation_thread_preview": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='message-thread-preview stream-item-content' data-screen-name=\"");if(t.s(t.f("other_person",c,p,1),c,p,0,91,106,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("\">\n  <div class=\"more\">»</div>\n  <div class='message-inner'>\n");if(t.s(t.f("other_person",c,p,1),c,p,0,205,402,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <img src='");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("' alt='");t.b(t.v(t.f("name",c,p,0)));t.b("' class='thumb' data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("'/>\n    <span class='user-name'><strong>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</strong> <b class='full-name'>");t.b(t.v(t.f("name",c,p,0)));t.b("</b></span>\n");});c.pop();}t.b("    <div class='message-content'>\n      <span class='created-at'><span class=\"_timestamp\" data-time=\"");t.b(t.v(t.f("last_message_date",c,p,0)));t.b("\" data-long-form=\"true\" data-include-sec=\"true\">");t.b(t.v(t.f("timestamp",c,p,0)));t.b("</span></span>\n      <div class=\"message-count\">");t.b(t.v(t.f("message_count",c,p,0)));t.b("</div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"copied_twimg": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"copied-twimg\">\n  <a class=\"inline-media-image\" data-inline-type=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" target=\"_blank\">\n    <img src=\"");t.b(t.v(t.f("media_url",c,p,0)));t.b("\"/>\n");t.b(t.rp("copied_twimg_attribution0",c,p,"    "));t.b("  </a>\n</div>");return t.fl(); }, partials: {"copied_twimg_attribution0": {name:"copied_twimg_attribution"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"copied_twimg_attribution": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class=\"attribution-wrapper\">\n  <span class=\"attribution\">image by @<em class=\"profile-path user-profile-link\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</em>, <span class=\"unit\">");t.b(t.v(t.f("time_ago",c,p,0)));t.b("</span></span>\n</span>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"country_select": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);if(t.s(t.f("do_not_render_pctd_logged_out",c,p,1),c,p,0,35,427,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"country-select-outer\">\n  <strong class=\"country-select-label\">Country:</strong>\n  <span class=\"country-select-inner\">\n    <a href=\"#\" /><span class=\"country-select-mask\" />\n    <select class=\"country-select\">\n");if(t.s(t.f("countries",c,p,1),c,p,0,277,381,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <option value=\"");t.b(t.v(t.f("code",c,p,0)));t.b("\"");if(t.s(t.f("selected",c,p,1),c,p,0,323,343,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" selected=\"selected\"");});c.pop();}t.b(">");t.b(t.v(t.f("name",c,p,0)));t.b("</option>\n");});c.pop();}t.b("    </select>\n  </span>\n</div>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"create_list_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"");if(!t.s(t.f("link_only",c,p,1),c,p,1,0,0,"")){t.b("btn ");};t.b("js-create-list-button\" href=\"#\" data-modal=\"list-new\" data-element-term=\"create_list_button\">Create list</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"current_text_user_autocomplete_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class='selectable' data-user-screenname='");t.b(t.v(t.f("screenname",c,p,0)));t.b("'>\n  Go to @<strong>");t.b(t.v(t.f("screenname",c,p,0)));t.b("</strong>\n</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"daily_limit_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_dm",c,p,1),c,p,0,10,64,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  You are over the daily limit for sending messages.\n");});c.pop();}if(!t.s(t.f("is_dm",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("is_tweet",c,p,1),c,p,0,101,157,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    You are over the daily limit for sending Tweets.\n");});c.pop();}if(!t.s(t.f("is_tweet",c,p,1),c,p,1,0,0,"")){t.b("    You are over the daily limit for this action.\n");};};t.b("Please wait a few hours and try again.\n<a href=\"");t.b(t.v(t.f("daily_limit_learn_more_path",c,p,0)));t.b("\" target=\"_blank\" class=\"learn-more\">Learn more</a>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_activity_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div data-activity-type='");t.b(t.v(t.f("event",c,p,0)));t.b("'\n     data-activity-min-position='");t.b(t.v(t.f("min_position",c,p,0)));t.b("'\n     data-activity-max-position='");t.b(t.v(t.f("max_position",c,p,0)));t.b("'\n     class='clearfix dashboard-activity-item dashboard-item-");t.b(t.v(t.f("event",c,p,0)));t.b("'>\n\n\n  <div class=\"dashboard-item-activity-line\">\n    <a href='/#!/activity?item=");t.b(t.v(t.f("min_position",c,p,0)));t.b("' class='dashboard-activity-item-link' data-item-id='");t.b(t.v(t.f("min_position",c,p,0)));t.b("'>\n");if(t.s(t.f("should_show_first_actor",c,p,1),c,p,0,410,496,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("first_actor",c,p,1),c,p,0,435,473,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_image_240",c,p,"          "));});c.pop();}});c.pop();}t.b("\n" + i);t.b("      <span class='dashboard-activity-item-sentence'>");t.b(t.t(t.f("activity_line",c,p,0)));t.b("</span>\n    </a>\n  </div>\n</div>");return t.fl(); }, partials: {"user_image_240": {name:"user_image_24"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_activity_teaser": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dashboard-activity-teaser-inner\">\n  <h2>\n    <span class='dashboard-component-title'>Activity</span>\n    <span class=\"dashboard-component-subtitle\">\n      <span class=\"dot\">&middot;</span>\n      <a href=\"");t.b(t.v(t.f("activity_path",c,p,0)));t.b("\">view all</a>\n    </span>\n  </h2>\n  <div class=\"activity-items\">\n");if(t.s(t.f("items",c,p,1),c,p,0,313,353,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dashboard_activity_item0",c,p,"      "));});c.pop();}t.b("  </div>\n</div>");return t.fl(); }, partials: {"dashboard_activity_item0": {name:"dashboard_activity_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_contact_import": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"contact-import-inner\">\n  <h2 class=\"contact-import-component\">Find Friends</h2>\n  <p>Use the services below to find people you know on Twitter</p>\n  <div class=\"contact-import-services ");if(t.s(t.f("compact",c,p,1),c,p,0,209,216,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("compact");});c.pop();}t.b(" promptbird-action-bar\">\n");if(t.s(t.f("compact",c,p,1),c,p,0,269,319,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("contact_import_services_icon_list0",c,p,"      "));});c.pop();}if(!t.s(t.f("compact",c,p,1),c,p,1,0,0,"")){t.b(t.rp("contact_import_services_list1",c,p,"      "));};t.b("  </div>\n</div>");return t.fl(); }, partials: {"contact_import_services_icon_list0": {name:"contact_import_services_icon_list"},"contact_import_services_list1": {name:"contact_import_services_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_contact_import_matches_stats": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"header-inner\">\n  <a class=\"follow-btn btn small js not-following\">\n    <div class=\"js-action-follow-all follow-text\">\n      <i class=\"follow\"></i>");t.b(t.v(t.f("follow_all_text",c,p,0)));t.b("\n" + i);t.b("    </div>\n  </a>\n  <div>\n    <span class=\"dashboard-import-header\">");t.b(t.v(t.f("service_name",c,p,0)));t.b("</span> contacts\n  </div>\n  <small class=\"view-toggler\">\n");if(t.s(t.f("others_count",c,p,1),c,p,0,340,431,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <a href=\"#\" class=\"invite-contacts\">Invite ");t.b(t.v(t.f("others_count",c,p,0)));t.b(" to join Twitter</a>\n");});c.pop();}t.b("  </small>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_discover": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dashboard\">\n  <div class=\"module discover-nav\">\n    <ul class=\"js-nav-links\">\n      <li class=\"");if(t.s(t.f("on_discover",c,p,1),c,p,0,123,129,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("discover_path",c,p,0)));t.b("\" data-nav=\"discover\">Stories <i class=\"chev-right\"></i></a></li>\n      <li class=\"");if(t.s(t.f("on_activity",c,p,1),c,p,0,290,296,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("activity_tab_path",c,p,0)));t.b("\" data-nav=\"network_activity\">Activity<i class=\"chev-right\"></i></a></li>\n      <li class=\"");if(t.s(t.f("on_wtf",c,p,1),c,p,0,464,470,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"list-link\" href=\"");t.b(t.v(t.f("who_to_follow_suggestions_path",c,p,0)));t.b("\" data-nav=\"suggestions\">\n          Who to follow\n          <i class=\"chev-right\"></i>\n");if(t.s(t.f("avatar_row",c,p,1),c,p,0,665,680,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("avatar_row0",c,p,""));});c.pop();}t.b("        </a>\n      </li>\n      <li class=\"");if(t.s(t.f("on_find_friends",c,p,1),c,p,0,758,764,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("who_to_follow_import_path",c,p,0)));t.b("\" data-nav=\"find_friends\">Find friends <i class=\"chev-right\"></i></a></li>\n      <li class=\"");if(t.s(t.f("on_profile",c,p,1),c,p,0,949,955,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("who_to_follow_interests_path",c,p,0)));t.b("\" data-nav=\"interests\">Browse categories <i class=\"chev-right\"></i></a></li>\n    </ul>\n  </div>\n");t.b(t.rp("dashboard_trends1",c,p,"  "));t.b(t.rp("footer2",c,p,"  "));t.b("</div>\n");return t.fl(); }, partials: {"avatar_row0": {name:"avatar_row"},"dashboard_trends1": {name:"dashboard_trends"},"footer2": {name:"footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_follower_request_link": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"flex-module\">\n  <a class=\"btn follower-request-link\" href=\"");t.b(t.v(t.f("follower_requests_path",c,p,0)));t.b("\">\n    ");t.b(t.v(t.f("button_label",c,p,0)));t.b("\n" + i);if(!t.s(t.f("button_label",c,p,1),c,p,1,0,0,"")){t.b("      \n        ");if(t.s(t.f("follower_request_count_one",c,p,1),c,p,0,189,211,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("1 new follower request");});c.pop();}t.b("\n" + i);t.b("        ");if(t.s(t.f("follower_request_count_other",c,p,1),c,p,0,284,332,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("follower_request_count",c,p,0)));t.b(" new follower requests");});c.pop();}t.b("\n" + i);t.b("      \n");};t.b("  </a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_getting_started": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"getting-started\">\n\n  <h2>\n    ");t.b(t.v(t.f("title",c,p,0)));t.b("\n" + i);if(t.s(t.f("is_noob_level_5_6_7",c,p,1),c,p,0,80,181,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"dot\">&middot;</span> <a href=\"#\" class=\"hidenextsteps\">hide next steps</a>\n");});c.pop();}t.b("  </h2>\n\n  <ol>\n\n");if(t.s(t.f("is_noob_level_0",c,p,1),c,p,0,247,388,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("getting_started_follow0",c,p,"      "));t.b(t.rp("getting_started_mobile1",c,p,"      "));t.b(t.rp("getting_started_profile2",c,p,"      "));t.b(t.rp("getting_started_tweet3",c,p,"      "));});c.pop();}t.b("\n" + i);if(t.s(t.f("is_noob_level_1_2_3",c,p,1),c,p,0,438,545,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("getting_started_tweet4",c,p,"      "));t.b(t.rp("getting_started_profile5",c,p,"      "));t.b(t.rp("getting_started_mobile6",c,p,"      "));});c.pop();}t.b("\n" + i);if(t.s(t.f("is_noob_level_4",c,p,1),c,p,0,595,703,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("getting_started_follow7",c,p,"      "));t.b(t.rp("getting_started_mobile8",c,p,"      "));t.b(t.rp("getting_started_profile9",c,p,"      "));});c.pop();}t.b("\n" + i);if(t.s(t.f("is_noob_level_5_6_7",c,p,1),c,p,0,753,827,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("getting_started_mobile10",c,p,"      "));t.b(t.rp("getting_started_profile11",c,p,"      "));});c.pop();}t.b("\n" + i);t.b("  </ol>\n\n</div>\n\n");return t.fl(); }, partials: {"getting_started_follow0": {name:"getting_started_follow"},"getting_started_mobile1": {name:"getting_started_mobile"},"getting_started_profile2": {name:"getting_started_profile"},"getting_started_tweet3": {name:"getting_started_tweet"},"getting_started_tweet4": {name:"getting_started_tweet"},"getting_started_profile5": {name:"getting_started_profile"},"getting_started_mobile6": {name:"getting_started_mobile"},"getting_started_follow7": {name:"getting_started_follow"},"getting_started_mobile8": {name:"getting_started_mobile"},"getting_started_profile9": {name:"getting_started_profile"},"getting_started_mobile10": {name:"getting_started_mobile"},"getting_started_profile11": {name:"getting_started_profile"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_mini_profile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='profile-pane' ");t.b(t.t(t.f("source_impression_id",c,p,0)));t.b(">\n  <div class=\"profile-basics clearfix\">\n    <div class=\"profile-text\">\n      <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">\n        <img src='");t.b(t.v(t.f("right_image_size",c,p,0)));t.b("' alt='");t.b(t.v(t.f("name",c,p,0)));t.b("' width='128' class='thumb' data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("'/>\n      </a>\n");t.b(t.rp("full_name0",c,p,"      "));t.b("      <div class=\"screen-name-and-location\">\n        <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" class=\"screen-name screen-name-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" pill\"><strong>@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</strong></span></a>\n      </div>\n      <div class=\"location\">");if(t.s(t.f("location",c,p,1),c,p,0,528,540,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("location",c,p,0)));});c.pop();}t.b("</div>\n    </div>\n    <div class=\"user-info\">\n      <span class=\"bio\">");t.b(t.t(t.f("linkified_description",c,p,0)));t.b("</span> ");if(t.s(t.f("url",c,p,1),c,p,0,666,746,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<a rel=\"me nofollow\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" target=\"_blank\">");t.b(t.t(t.f("display_url_or_url",c,p,0)));t.b("</a>");});c.pop();}t.b("\n" + i);t.b("    </div>\n\n");t.b(t.rp("user_stats1",c,p,"    "));t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"full_name0": {name:"full_name"},"user_stats1": {name:"user_stats"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_profile_stats": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='dashboard-profile-annotations clearfix'>\n  <h2 class=\"dashboard-profile-title\"><img src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" width=\"24\" class=\"profile-dashboard\"/>");t.b(t.v(t.f("profile_stats_title",c,p,0)));t.b("</h2>\n");if(t.s(t.f("is_translator",c,p,1),c,p,0,226,344,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a class='dashboard-profile-translator' href='");t.b(t.v(t.f("translator_profile_path",c,p,0)));t.b("'>\n      <em>Translator</em>\n    </a>\n");});c.pop();}t.b("</div>\n\n");t.b(t.rp("user_stats0",c,p,""));return t.fl(); }, partials: {"user_stats0": {name:"user_stats"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_promo": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='definition'>\n");if(t.s(t.f("promo",c,p,1),c,p,0,37,86,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <p class=\"promo\">");t.b(t.t(t.f("promo_contents",c,p,0)));t.b("</p>\n");});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_related_services": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"related-services\">\n  <h2>Related Services</h2>\n  <ul>\n");if(t.s(t.f("promos",c,p,1),c,p,0,81,122,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li>");t.b(t.t(t.f("promo_contents",c,p,0)));t.b("</li>\n");});c.pop();}t.b("  </ul>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_settings": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dashboard\">\n");t.b(t.rp("mini_home_profile0",c,p,"  "));t.b("\n" + i);if(t.s(t.f("current_user",c,p,1),c,p,0,69,1924,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"module\">\n    <ul class=\"js-nav-links\">\n      <li class=\"");if(t.s(t.f("on_account",c,p,1),c,p,0,155,161,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("settings_path",c,p,0)));t.b("\" data-nav=\"account\">Account <i class=\"chev-right\"></i></a></li>\n      <li class=\"");if(t.s(t.f("on_password",c,p,1),c,p,0,320,326,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("password_path",c,p,0)));t.b("\" data-nav=\"password\">Password<i class=\"chev-right\"></i></a></li>\n");if(t.s(t.f("device_available",c,p,1),c,p,0,481,671,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li class=\"");if(t.s(t.f("on_devices_main",c,p,1),c,p,0,521,527,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("devices_settings_path",c,p,0)));t.b("\" data-nav=\"devices\">Mobile <i class=\"chev-right\"></i></a></li>\n");});c.pop();}t.b("      <li class=\"");if(t.s(t.f("on_notifications",c,p,1),c,p,0,731,737,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("notifications_path",c,p,0)));t.b("\" data-nav=\"notifications\">Notifications <i class=\"chev-right\"></i></a></li>\n      <li class=\"");if(t.s(t.f("on_profile",c,p,1),c,p,0,918,924,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("settings_profile_path",c,p,0)));t.b("\" data-nav=\"profile\">Profile <i class=\"chev-right\"></i></a></li>\n\n");if(t.s(t.f("enhanced_profile_available",c,p,1),c,p,0,1096,1320,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li class=\"");if(t.s(t.f("on_enhanced_profile",c,p,1),c,p,0,1138,1144,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("enhanced_profile_settings_path",c,p,0)));t.b("\" data-nav=\"enhanced_profile\">Enhanced Profile <i class=\"chev-right\"></i></a></li>\n");});c.pop();}t.b("\n" + i);t.b("      <li class=\"");if(t.s(t.f("on_design",c,p,1),c,p,0,1384,1390,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("design_path",c,p,0)));t.b("\" data-nav=\"design\">Design <i class=\"chev-right\"></i></a></li>\n      <li class=\"");if(t.s(t.f("on_applications",c,p,1),c,p,0,1548,1554,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\"><a class=\"list-link\" href=\"");t.b(t.v(t.f("connections_path",c,p,0)));t.b("\" data-nav=\"connections\">Apps<i class=\"chev-right\"></i></a></li>\n\n");if(t.s(t.f("contributors_available",c,p,1),c,p,0,1722,1875,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li><a class=\"list-link\" href=\"");t.b(t.v(t.f("contributor_permissions_path",c,p,0)));t.b("\" data-nav=\"contributors\">Contributors <i class=\"chev-right\"></i></a></li>\n");});c.pop();}t.b("    </ul>\n  </div>\n");});c.pop();}t.b("\n" + i);t.b(t.rp("footer1",c,p,"  "));t.b("</div>\n");return t.fl(); }, partials: {"mini_home_profile0": {name:"mini_home_profile"},"footer1": {name:"footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_social_context": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"social-context\">\n  <h2>You and @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</h2>\n");if(t.s(t.f("accounts_in_common",c,p,1),c,p,0,132,238,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"you-both-follow clearfix\">\n");t.b(t.rp("dashboard_social_context_subcomponent0",c,p,"      "));t.b("    </div>\n");});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"dashboard_social_context_subcomponent0": {name:"dashboard_social_context_subcomponent"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_social_context_subcomponent": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<p>");t.b(t.t(t.f("caption",c,p,0)));t.b("</p>\n");t.b(t.t(t.f("avatar_list",c,p,0)));t.b("\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_stream_user": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"account-summary ");if(t.s(t.f("promoted_content",c,p,1),c,p,0,49,66,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("promoted-account ");});c.pop();}t.b(" dashboard-account-summary js-actionable-user\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(">\n");t.b(t.rp("combo_follow_button0",c,p,"  "));t.b("  <div class=\"content\">\n    <a class=\"account-group js-account-group js-recommend-link user-thumb\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">\n      <img src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"avatar size48 js-action-profile-avatar\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      <div class=\"account-group-inner\">\n        <b class=\"fullname js-action-profile-name\">");t.b(t.v(t.f("name",c,p,0)));t.b("</b>\n        <span>&rlm;</span>\n        ");if(t.s(t.f("verified",c,p,1),c,p,0,633,657,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified\"></i>");});c.pop();}t.b("\n" + i);t.b("        <div class=\"screenname js-action-profile-name\">\n          <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);t.b("        </div>\n      </div>\n    </a>\n");if(t.s(t.f("is_sponsored",c,p,1),c,p,0,819,1121,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <span class=\"metadata with-icn\">\n        <a class=\"js-promoted-badge js-user-profile-link js-account-group\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" title=\"");if(t.s(t.f("promoted_content",c,p,1),c,p,0,1008,1027,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("disclosure_text",c,p,0)));});c.pop();}t.b("\"><i class=\"");t.b(t.v(t.f("promoted_badge_class",c,p,0)));t.b("\"></i>Promoted</a>\n      </span>\n");});c.pop();}t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"combo_follow_button0": {name:"combo_follow_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_timeline": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dashboard\">\n");if(t.s(t.f("mini_home_profile",c,p,1),c,p,0,48,78,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_home_profile0",c,p,"    "));});c.pop();}t.b("\n" + i);if(t.s(t.f("home_nav_top",c,p,1),c,p,0,121,137,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("nav1",c,p,"    "));});c.pop();}t.b("\n" + i);if(t.s(t.f("wtf",c,p,1),c,p,0,166,209,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dashboard_user_recommendations2",c,p,"    "));});c.pop();}t.b("\n" + i);t.b(t.rp("module_trends3",c,p,"  "));t.b("\n" + i);t.b(t.rp("module_footer4",c,p,"  "));t.b("\n" + i);t.b("</div>\n");return t.fl(); }, partials: {"mini_home_profile0": {name:"mini_home_profile"},"nav1": {name:"nav"},"dashboard_user_recommendations2": {name:"dashboard_user_recommendations"},"module_trends3": {name:"module_trends"},"module_footer4": {name:"module_footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_trends": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module trends ");t.b(t.v(t.f("hide_trends_class",c,p,0)));t.b("\">\n  <div class=\"flex-module trends-inner\">\n");t.b(t.rp("trends_inner0",c,p,"    "));t.b("</div>\n");return t.fl(); }, partials: {"trends_inner0": {name:"trends_inner"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_user_recommendations": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module wtf-module js-wtf-module ");if(t.s(t.f("recommended_followers",c,p,1),c,p,0,70,81,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("has-content");});c.pop();}t.b("\">\n\n  <div class=\"flex-module\">\n\n    <div class=\"flex-module-header\">\n      <h3>Who to follow</h3>\n      <small>&middot; <a class=\"js-refresh-suggestions\" href=\"#\">Refresh</a></small>\n      <small class=\"view-all\">&middot; <a href=\"");t.b(t.v(t.f("who_to_follow_suggestions_path",c,p,0)));t.b("\" data-element-term=\"view_all_link\">View all</a></small>\n    </div>\n\n    <div class=\"js-recommended-followers dashboard-user-recommendations flex-module-inner");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,555,592,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("swift",c,p,1),c,p,1,0,0,"")){t.b("pre-rendered-stub");};});c.pop();}t.b("\" data-section-id=\"wtf\">\n");if(t.s(t.f("recommended_followers",c,p,1),c,p,0,673,709,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_small_list0",c,p,"        "));});c.pop();}t.b("    </div>\n\n");if(t.s(t.f("show_links",c,p,1),c,p,0,767,1030,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"flex-module-footer\">\n        <a href=\"");t.b(t.v(t.f("who_to_follow_interests_path",c,p,0)));t.b("\" data-element-term=\"interests_link\">Browse categories</a> &middot; <a href=\"");t.b(t.v(t.f("who_to_follow_import_path",c,p,0)));t.b("\" data-element-term=\"import_link\">Find friends</a>\n      </div>\n");});c.pop();}t.b("\n" + i);t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"user_small_list0": {name:"user_small_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_user_similarities": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module profile-nav wtf-module js-similar-to-module ");if(t.s(t.f("recommended_followers",c,p,1),c,p,0,89,100,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("has-content");});c.pop();}t.b("\">\n\n  <ul>\n    <li class=\"js-sidenav-link\" data-name=\"similarTo\">\n      <a class=\"list-link\" href=\"");t.b(t.v(t.f("similar_to_path",c,p,0)));t.b("\">\n");if(t.s(t.f("self_sims",c,p,1),c,p,0,269,303,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          Similar to you\n");});c.pop();}if(!t.s(t.f("self_sims",c,p,1),c,p,1,0,0,"")){t.b("          Similar to ");t.b(t.v(t.f("profile_name",c,p,0)));t.b("\n" + i);};t.b("        <i class=\"chev-right\"></i>\n      </a>\n    </li>\n  </ul>\n\n  <div class=\"flex-module\">\n    <div class=\"dashboard-user-recommendations flex-module-inner");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,583,621,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("swift",c,p,1),c,p,1,0,0,"")){t.b(" pre-rendered-stub");};});c.pop();}t.b("\" data-section-id=\"wtf\">\n");if(t.s(t.f("recommended_followers",c,p,1),c,p,0,702,738,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_small_list0",c,p,"        "));});c.pop();}t.b("    </div>\n  </div>\n\n</div>");return t.fl(); }, partials: {"user_small_list0": {name:"user_small_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dashboard_your_profile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet-activity\">\n<h2><a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" class=\"title-link\"><span class='dashboard-component-title'>Your Tweets</span><span class=\"tweet-count user-stat-link\">");t.b(t.v(t.f("statuses_count_commaized",c,p,0)));t.b("</span></a></h2>\n");if(t.s(t.f("status",c,p,1),c,p,0,234,255,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("latest_tweet0",c,p,"  "));});c.pop();}t.b("</div>");return t.fl(); }, partials: {"latest_tweet0": {name:"latest_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"default_dropdown_divider": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<hr class=\"dropdown-divider\"/>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"default_dropdown_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"");t.b(t.v(t.f("class",c,p,0)));t.b("\" ");t.b(t.v(t.f("data",c,p,0)));t.b("><span class=\"");t.b(t.v(t.f("icon",c,p,0)));t.b("\"></span><b class=\"item-name\">");t.b(t.t(t.f("label",c,p,0)));t.b("</b></li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"default_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Sorry! We did something wrong.\n");if(t.s(t.f("is_tweet",c,p,1),c,p,0,44,89,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try sending your Tweet again in a minute.\n");});c.pop();}if(t.s(t.f("is_dm",c,p,1),c,p,0,113,160,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try sending your message again in a minute.\n");});c.pop();}if(t.s(t.f("is_follow",c,p,1),c,p,0,185,231,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try following that user again in a minute.\n");});c.pop();}if(t.s(t.f("is_unfollow",c,p,1),c,p,0,262,310,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try unfollowing that user again in a minute.\n");});c.pop();}if(t.s(t.f("is_block",c,p,1),c,p,0,340,385,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try blocking that user again in a minute.\n");});c.pop();}if(t.s(t.f("is_unblock",c,p,1),c,p,0,414,461,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try unblocking that user again in a minute.\n");});c.pop();}if(t.s(t.f("is_report",c,p,1),c,p,0,491,537,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try reporting that user again in a minute.\n");});c.pop();}if(t.s(t.f("is_retweet",c,p,1),c,p,0,567,601,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try Retweet again in a minute.\n");});c.pop();}if(t.s(t.f("is_delete",c,p,1),c,p,0,631,677,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try deleting your Tweet again in a minute.\n");});c.pop();}if(t.s(t.f("is_favorite",c,p,1),c,p,0,708,756,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try favoriting your Tweet again in a minute.\n");});c.pop();}if(t.s(t.f("is_unfavorite",c,p,1),c,p,0,791,841,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try unfavoriting your Tweet again in a minute.\n");});c.pop();}if(t.s(t.f("is_add_list_member",c,p,1),c,p,0,883,930,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try adding a list member again in a minute.\n");});c.pop();}if(t.s(t.f("is_remove_list_member",c,p,1),c,p,0,980,1029,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Try removing a list member again in a minute.\n");});c.pop();}if(t.s(t.f("is_generic",c,p,1),c,p,0,1071,1147,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Please <a class=\"js-reload\" href=\"#\">refresh the page</a> and try again.\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"delete_list_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"button delete-list-button js-delete-list-action\" title=\"Delete\" data-screen-name=\"");if(t.s(t.f("user",c,p,1),c,p,0,103,118,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("\" data-list-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"><span class=\"trashcan\"></span><b class=\"label\">Delete</b></div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"detached_email_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module module-banner\">\n  <div class=\"flex-module\">\n    <div class=\"first-banner-row\">\n      <span class=\"title\">New email address required.</span>\n      <span>Twitter has removed the email address from your account, by request of the email owner.</span>\n    </div>\n    <div class=\"second-banner-row\">\n      <p>Please <a href=\"");t.b(t.v(t.f("change_email_path",c,p,0)));t.b("\">enter a new email address</a> where you can be reached.&nbsp;<a href=\"");t.b(t.v(t.f("email_help_path",c,p,0)));t.b("\">Learn more&nbsp; &rsaquo;</a></p>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"details_pane_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet js-actionable-tweet details-pane-tweet ");t.b(t.v(t.f("css_classes",c,p,0)));t.b("\" data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("tweet_impression_id",c,p,0)));t.b(" ");if(t.s(t.f("current_user_retweet",c,p,1),c,p,0,148,175,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-my-retweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");});c.pop();}t.b("  data-screen-name=\"");if(t.s(t.f("user",c,p,1),c,p,0,229,244,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("\"  ");if(t.s(t.f("protected",c,p,1),c,p,0,270,291,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-protected=\"true\"");});c.pop();}t.b(" ");if(t.s(t.f("is_sponsored",c,p,1),c,p,0,323,343,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-promoted=\"true\"");});c.pop();}t.b(">\n");t.b(t.rp("tweet_dogear0",c,p,"  "));t.b("  <div class=\"tweet-row\">\n");if(t.s(t.f("user",c,p,1),c,p,0,421,454,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("tweet_user_block1",c,p,"      "));});c.pop();}t.b("  </div>\n  <div class=\"tweet-row\">\n");t.b(t.rp("tweet_text_large2",c,p,"    "));t.b("  </div>\n  <div class=\"js-tweet-media-container tweet-media-container\"></div>\n  <div class=\"tweet-row\">\n");t.b(t.rp("tweet_timestamp3",c,p,"    "));t.b(t.rp("tweet_contributor4",c,p,"    "));t.b(t.rp("tweet_source5",c,p,"    "));t.b(t.rp("tweet_actions6",c,p,"    "));t.b("  </div>\n  <div class=\"tweet-row\">\n");t.b(t.rp("tweet_geo_text7",c,p,"    "));t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"tweet_dogear0": {name:"tweet_dogear"},"tweet_user_block1": {name:"tweet_user_block"},"tweet_text_large2": {name:"tweet_text_large"},"tweet_timestamp3": {name:"tweet_timestamp"},"tweet_contributor4": {name:"tweet_contributor"},"tweet_source5": {name:"tweet_source"},"tweet_actions6": {name:"tweet_actions"},"tweet_geo_text7": {name:"tweet_geo_text"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"scribe_console": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n    <meta charset=\"utf-8\">\n\n    \n    <script>document.domain='twitter.com'</script>\n    <link rel=\"stylesheet\" href=\"/sc/scribe_console.css\" type=\"text/css\" media=\"screen\">\n\n    <title>Client-Side Scribe Console</title>\n\n");t.b(t.rp("frame_busting0",c,p,"    "));t.b("\n" + i);t.b("  </head>\n  <body>\n    <div class=\"stream\">\n      <div class=\"welcome\">\n<pre>Welcome to the Scribe Console!\n\nFrom here you can view all the scribe events triggered by the Twitter web\nclient and filter events by category. As you interact with the web client,\nscribe events will be displayed in this window.\n\nPLEASE NOTE: Not all scribes are logged from the webclient, some are scribed\nfrom the server-side code or from daemons. The data displayed in this\nconsole does not represent all the data that will be included in the scribe\nrecord. Some additional data will be added on the server by the scribe API\nendpoint. For more information on scribing, please visit <a href=\"http://go/scribe\" target=\"_blank\">go/scribe</a>.</pre>\n      </div>\n    </div>\n    <div class=\"toolbar\">\n      <a href=\"#\" class=\"clear\">Clear</a>\n      <a href=\"#\" class=\"toggle-warnings active\">Warnings</a>\n    </div>\n\n    <script type=\"text/javascript\" src=\"/sc/jquery.js\"></script>\n    <script type=\"text/javascript\" src=\"/sc/mustache.js\"></script>\n    <script type=\"text/javascript\">\n      // client_event validation constants\n      var CLIENT_EVENT_FIELDS = ");t.b(t.t(t.f("client_event_fields",c,p,0)));t.b(";\n      var CLIENT_EVENT_PAGES = ");t.b(t.t(t.f("client_event_pages",c,p,0)));t.b(";\n      var CLIENT_EVENT_ACTIONS = ");t.b(t.t(t.f("client_event_actions",c,p,0)));t.b(";\n      var CLIENT_EVENT_ITEM_TYPES = ");t.b(t.t(t.f("client_event_item_types",c,p,0)));t.b(";\n      var CLIENT_EVENT_ASSOCIATION_TYPES = ");t.b(t.t(t.f("client_event_association_types",c,p,0)));t.b(";\n      var CLIENT_EVENT_EVENT_INITIATOR = ");t.b(t.t(t.f("client_event_event_initiator",c,p,0)));t.b(";\n    </script>\n    <script type=\"text/javascript\" src=\"/sc/scribe_console.js\"></script>\n  </body>\n</html>");return t.fl(); }, partials: {"frame_busting0": {name:"frame_busting"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"device_setup_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='twttr-dialog-device-setup'>\n  <div class='loading'></div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"device_setup_dialog_create": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div> \n  <form class='dialog-form'>\n    <p>Twitter does not charge for this service. Standard message and data rates may apply.</p>\n\n    <fieldset class='common-form'>\n      <div class='field'>\n        <label>\n          <span class='label numbered'>Select your country/region</span>\n          <span class='input-wrapper'>\n            <select class='country-or-region'></select>\n          </span>\n        </label>\n      </div>\n\n      <div class='field' style=\"display: none;\">\n        <span class='label'></span>\n        <span class='input-wrapper'>\n          <select class='country-in-region'></select>\n        </span>\n      </div>\n\n      <label class='field'>\n        <span class='label numbered'>Enter your mobile phone number</span>\n        <span class='input-wrapper phone-wrapper'>\n          <span class='country-code'></span><input class='phone' name='device[address]' type='tel' size='15' />\n        </span>\n      </label>\n\n      <label class='field' style='display: none;'>\n        <span class='label numbered'>Choose your carrier</span>\n        <span class='input-wrapper'>\n          <select class='carrier' name='device[carrier]'></select>\n        </span>\n      </label>\n\n      <div class='field'>\n        <span class='label numbered'>Verify your phone</span>\n        <div class='input-wrapper'>\n          <div class='button btn submit'>Start</div>\n        </div>\n      </div>\n    </fieldset>\n\n    <input name='device_type' type='hidden' value='phone' />\n  </form>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"device_setup_dialog_duplicate": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='twttr-dialog-device-setup-duplicate'>\n  <div class=\"error\">\n    <p>\n      The phone number you gave us is currently used by another Twitter account. Only one account can be used with a mobile phone at a time.\n    </p>\n\n");t.b(t.rp("device_setup_dialog_source_address0",c,p,"    "));t.b("  </div>\n\n  <p>\n    <strong>To fix this, you need to reset your phone's link to Twitter</strong><br />\n    Send this message to Twitter:\n  </p>\n\n  <div class=\"phone-instructions\">\n    Text '");t.b(t.v(t.f("stop_command",c,p,0)));t.b("' to ");t.b(t.v(t.f("address_for_sms",c,p,0)));t.b("\n" + i);t.b("  </div>\n\n  <p>\n    Once you've sent the message, try to verify your phone again.\n  </p>\n\n  <div class=\"submit button retry\">Retry verification</div>\n\n  <p class=\"cancel-instructions\">\n    <a href=\"#\">Cancel verification</a> and start over.\n  </p>\n</div>");return t.fl(); }, partials: {"device_setup_dialog_source_address0": {name:"device_setup_dialog_source_address"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"device_setup_dialog_source_address": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"phone-instructions\">\n  +");t.b(t.v(t.f("country_code",c,p,0)));t.b(" ");t.b(t.v(t.f("address_without_country_code",c,p,0)));t.b("\n" + i);t.b("  (");t.b(t.v(t.f("country_name",c,p,0)));if(t.s(t.f("carrier_name",c,p,1),c,p,0,122,147,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" &ndash; ");t.b(t.v(t.f("carrier_name",c,p,0)));});c.pop();}t.b(")\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"device_setup_dialog_verified": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<h2>Successful device verification for +");t.b(t.v(t.f("country_code",c,p,0)));t.b(" ");t.b(t.v(t.f("address_without_country_code",c,p,0)));t.b("!</h2>\n\n<p>\n  <strong>You can now text message your Tweets to ");t.b(t.v(t.f("address_for_sms",c,p,0)));t.b(".</strong>\n  See the complete list of <a href=\"");t.b(t.v(t.f("sms_help_path",c,p,0)));t.b("\" target=\"_blank\">Twitter mobile commands</a>.\n</p>\n\n<p>\n  Set your mobile privacy controls and notification preferences on <a href=\"");t.b(t.v(t.f("devices_path",c,p,0)));t.b("\">your Mobile settings page</a>.</p>\n</p>\n\n<p>Twitter does not charge for this service. Standard message and data rates may apply.</p>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"device_setup_dialog_waiting": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='twttr-dialog-device-setup-waiting'>\n  <p>\n    Using the mobile phone you gave us:\n  </p>\n\n");t.b(t.rp("device_setup_dialog_source_address0",c,p,"  "));t.b("\n" + i);t.b("  <p>\n    Send a text message to Twitter:\n  </p>\n\n  <div class=\"phone-instructions\">\n    Text '");t.b(t.v(t.f("go_command",c,p,0)));t.b("' to ");t.b(t.v(t.f("address_for_sms",c,p,0)));t.b("\n" + i);t.b("  </div>\n\n  <p>\n    Twitter does not charge for this service. Standard message and data rates may apply.\n  </p>\n\n  <div class=\"waiting-instructions\">\n    <p>\n      <strong>Twitter is waiting for you to send your verification code...</strong>\n    </p>\n\n    <p>\n      Already sent the verification code?  Wait a minute or two for Twitter to receive the message from your mobile carrier.\n    </p>\n\n    <p class=\"refresh\">\n      Still nothing? <a href=\"#\">Check again</a>.\n    </p>\n  </div>\n\n  <p class=\"cancel-instructions\">\n    <a href=\"#\">Cancel verification</a> and start over.\n  </p>\n</div>");return t.fl(); }, partials: {"device_setup_dialog_source_address0": {name:"device_setup_dialog_source_address"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div ");if(t.s(t.f("container_id",c,p,1),c,p,0,22,44,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("id=\"");t.b(t.v(t.f("container_id",c,p,0)));t.b("\" ");});c.pop();}t.b("class=\"twttr-dialog-container\" style=\"visibility: hidden;\">\n  <div class=\"twttr-dialog\">\n");if(t.s(t.f("title",c,p,1),c,p,0,164,356,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"twttr-dialog-header js-twttr-dialog-draggable\">\n        <h3>");t.b(t.t(t.f("title",c,p,0)));t.b("</h3> ");if(t.s(t.f("closable",c,p,1),c,p,0,273,325,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"twttr-dialog-close\"><b>&times;</b></div>");});c.pop();}t.b("\n" + i);t.b("      </div>\n");});c.pop();}t.b("    <div class=\"twttr-dialog-inside\">\n      <div class=\"twttr-dialog-error clearfix\"></div>\n      <div class=\"twttr-dialog-body clearfix\">\n        <div class=\"twttr-dialog-content\">\n          ");t.b(t.t(t.f("content",c,p,0)));t.b("\n" + i);t.b("        </div>\n      </div>\n      <div class=\"twttr-dialog-footer clearfix\">\n        ");t.b(t.t(t.f("footer",c,p,0)));t.b("\n" + i);t.b("      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_popup_container": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"activity-popup-dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal draggable\">\n    <div class=\"modal-content clearfix\">\n      <button type=\"button\" class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\"></h3>\n      </div>\n\n      <div class=\"modal-body\">\n        <div class=\"activity-tweet clearfix\"></div>\n        <div class=\"loading\">\n          <img src=\"");t.b(t.v(t.f("bigger_spinner_path",c,p,0)));t.b("\">\n        </div>\n        <div class=\"activity-content clearfix\"></div>\n      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_popup_users": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"activity-popup-users\">\n  ");t.b(t.t(t.f("rendered_users",c,p,0)));t.b("\n" + i);t.b("</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"captcha_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"captcha_dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal modal-small draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Prove you are human</h3>\n      </div>\n      <div class=\"modal-body\">\n");t.b(t.rp("shared/captcha0",c,p,"      "));t.b("      </div>\n      <div class=\"modal-footer\">\n        <button class=\"btn\" id=\"cancel_captcha_button\">Cancel</button>\n        <button id=\"submit_captcha\" class=\"btn primary-btn modal-submit\">Submit</button>\n      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {"shared/captcha0": {name:"shared/captcha"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"confirm_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"confirm_dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\"></h3>\n      </div>\n      <div class=\"modal-body\">\n        <p class=\"modal-body-text\"></p>\n      </div>\n      <div class=\"modal-footer\">\n        <button class=\"btn\" id=\"confirm_dialog_cancel_button\"></button>\n        <button id=\"confirm_dialog_submit_button\" class=\"btn primary-btn modal-submit\"></button>\n      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"deactivation_password_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"deactivation_password_dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal modal-small draggable\">\n    <div class=\"modal-content\">\n      <button class=\"btn modal-close\"><i class=\"close-large\"><span class=\"hidden-elements\">Close</span></i></button>\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Deactivate account</h3>\n      </div>\n      <div class=\"modal-body\">\n        <p>Re-enter your Twitter password to deactivate @");t.b(t.v(t.f("screen_name",c,p,0)));t.b(".</p>\n        <label for=\"auth_password\">Password</label>\n        <div class=\"input-wrapper password-wrapper\">\n          <input id=\"auth_password\" name=\"auth_password\" type=\"password\">\n          <div>\n            <a href=\"");t.b(t.v(t.f("resend_password_link",c,p,0)));t.b("\" id=\"forgot_password\">Forgot your password?</a>\n            <span id=\"reminder_sent\" style=\"visibility: hidden\">Reminder sent!</span>\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button class=\"btn\" id=\"cancel_password_button\">Cancel</button>\n        <button id=\"save_password\" class=\"btn primary-btn modal-submit\">Deactivate account</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"delete_tweet_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"delete-tweet-dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Are you sure you want to delete this Tweet?</h3>\n      </div>\n\n      <div class=\"modal-body modal-tweet\"></div>\n\n      <div class=\"modal-footer\">\n        <button class=\"btn cancel-action\">Cancel</button>\n        <button class=\"btn primary-btn delete-action\">Delete</button>\n      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dm_conversation": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"dm_dialog_conversation\" class=\"modal-content\">\n  \n  <div class=\"twttr-dialog-header modal-header\">\n    <h3><a class=\"js-dm-header-title\" href=\"#\">Direct messages</a> › with <span class=\"dm_dialog_real_name\"></span></h3>\n    <div class=\"twttr-dialog-close\"><b>&times;</b></div>\n  </div>\n\n  \n  <div class=\"twttr-dialog-inside\">\n    <div class=\"twttr-dialog-body clearfix\">\n");t.b(t.rp("direct_message_dialog_error0",c,p,"        "));t.b("      <div class=\"twttr-dialog-content\">\n      </div>\n");t.b(t.rp("swift_dm_box1",c,p,"      "));t.b("    </div>\n\n");t.b(t.rp("dm_footer2",c,p,"    "));t.b("\n" + i);t.b("  </div>\n</div>");return t.fl(); }, partials: {"direct_message_dialog_error0": {name:"direct_message_dialog_error"},"swift_dm_box1": {name:"swift_dm_box"},"dm_footer2": {name:"dm_footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dm_conversation_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"dm_dialog_conversation_list\" class=\"modal-content\">\n  \n  <div class=\"twttr-dialog-header modal-header\">\n    <h3>Direct messages</h3>\n    <a class=\"btn dm-new-button dm-header-new\" href=\"#\">New message</a>\n    <div class=\"twttr-dialog-close\"><b>&times;</b></div>\n  </div>\n\n  \n  <div class=\"twttr-dialog-inside\">\n    <div class=\"twttr-dialog-body clearfix\">\n");t.b(t.rp("direct_message_dialog_error0",c,p,"      "));t.b("      <div class=\"twttr-dialog-content\">\n        <div class=\"dm-threads js-dm-threads js-modal-scrollable js-twttr-dialog-not-draggable\">\n          <ul class=\"dm-thread-list js-dm-thread-list\">\n");t.b(t.rp("direct_message_dialog_empty1",c,p,"            "));t.b("          </ul>\n        </div>\n      </div>\n\n");t.b(t.rp("dm_footer2",c,p,"      "));t.b("\n" + i);t.b("    </div>\n  </div>\n</div>");return t.fl(); }, partials: {"direct_message_dialog_error0": {name:"direct_message_dialog_error"},"direct_message_dialog_empty1": {name:"direct_message_dialog_empty"},"dm_footer2": {name:"dm_footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dm_new_conversation": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"dm_dialog_new\" class=\"modal-content\">\n  \n  <div class=\"twttr-dialog-header modal-header\">\n    <h3><a href=\"#\">Direct messages</a> › New</h3>\n    <div class=\"twttr-dialog-close\"><b>&rsaquo;</b></div>\n  </div>\n\n  \n  <div class=\"twttr-dialog-inside\">\n    <div class=\"twttr-dialog-body clearfix\">\n      <div class=\"dm-dialog-content\">\n        <div class=\"dm-to\">\n          <input class=\"dm-to-input twttr-directmessage-input\" type=\"text\"></input>\n          <img class=\"avatar size24 selected-profile\" src=\"");t.b(t.v(t.f("default_profile_url",c,p,0)));t.b("\" data-default-img=\"");t.b(t.v(t.f("default_profile_url",c,p,0)));t.b("\">\n");t.b(t.rp("swift_autocomplete_dropdown0",c,p,"          "));t.b("        </div>\n\n        <div class=\"dm-convo-placeholder\">\n");t.b(t.rp("direct_message_dialog_error1",c,p,"          "));t.b("        </div>\n\n      </div>\n\n");t.b(t.rp("swift_dm_box2",c,p,"      "));t.b("\n" + i);t.b(t.rp("dm_footer3",c,p,"      "));t.b("\n" + i);t.b("    </div>\n  </div>\n</div>");return t.fl(); }, partials: {"swift_autocomplete_dropdown0": {name:"swift_autocomplete_dropdown"},"direct_message_dialog_error1": {name:"direct_message_dialog_error"},"swift_dm_box2": {name:"swift_dm_box"},"dm_footer3": {name:"dm_footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dm_shell": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"dm_dialog\" class=\"modal-container dm-conversation-list\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal draggable twttr-dialog dm-dialog\">\n");t.b(t.rp("dialogs/dm_conversation_list0",c,p,"    "));t.b(t.rp("dialogs/dm_conversation1",c,p,"    "));t.b(t.rp("dialogs/dm_new_conversation2",c,p,"    "));t.b("  </div>\n</div>");return t.fl(); }, partials: {"dialogs/dm_conversation_list0": {name:"dialogs/dm_conversation_list"},"dialogs/dm_conversation1": {name:"dialogs/dm_conversation"},"dialogs/dm_new_conversation2": {name:"dialogs/dm_new_conversation"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"embed": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"embed-tweet-dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal modal-medium draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Embed this Tweet</h3>\n      </div>\n      <div class=\"modal-body\">\n");t.b(t.rp("embed_dialog0",c,p,"        "));t.b("      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {"embed_dialog0": {name:"embed_dialog"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"favorited_popup_title": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("  ");if(t.s(t.f("favoriters_length_one",c,p,1),c,p,0,29,63,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Favorited ");t.b(t.v(t.f("favorites_count",c,p,0)));t.b(" time");});c.pop();}t.b("\n" + i);t.b("  ");if(t.s(t.f("favoriters_length_other",c,p,1),c,p,0,120,155,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Favorited ");t.b(t.v(t.f("favorites_count",c,p,0)));t.b(" times");});c.pop();}t.b("\n");t.b("\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"goto_user_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"goto-user-dialog\" class=\"modal-container\">\n  <div class=\"modal modal-small draggable\">\n    <div class=\"modal-content\">\n      <button type=\"button\" class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Go to a person's profile</h3>\n      </div>\n\n      <div class=\"modal-body\">\n        <div class=\"modal-inner\">\n          <form class=\"goto-user-form\">\n            <input class=\"username-input\" type=\"text\" placeholder=\"Start typing a name to jump to a profile\">\n");t.b(t.rp("swift_autocomplete_dropdown0",c,p,"            "));t.b("          </form>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {"swift_autocomplete_dropdown0": {name:"swift_autocomplete_dropdown"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"in_product_help_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"in_product_help_dialog\" class=\"modal-container modal-profile-image-help\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal modal-small draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"></i></button>\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Upload a profile image</h3>\n      </div>\n      <div class=\"modal-body\">\n        <p>How to upload or change your profile picture:</p>\n        <ol>\n          <li>Click the <strong>Choose file</strong> button.</li>\n          <li><strong>Select a file</strong> to upload as your picture. It must be smaller than 700k and in JPG, GIF, or PNG format (no animated GIFs).</li>\n          <li>Click <strong>Save changes</strong> at the bottom of the page to see a thumbnail.</li>\n        </ol>\n      </div>\n      <div class=\"modal-footer\">\n        <span class=\"satisfaction-prompt\">\n          <span id=\"satisfaction_question\">Was this helpful?</span>\n          <span id=\"satisfaction_feedback\">Thanks for the feedback!</span>\n        </span>\n        <div id=\"satisfaction_buttons\">\n          <button id=\"helpful_button\" class=\"btn\">Yes</button>\n          <button id=\"not_helpful_button\" class=\"btn\">No</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"keyboard_shortcuts_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div id=\"keyboard-shortcut-dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal modal-large draggable\">\n    <div class=\"modal-content\">\n      <button type=\"button\" class=\"modal-btn modal-close js-dimiss\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n\n      \n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Keyboard shortcuts</h3>\n      </div>\n\n      \n      <div class=\"modal-body\">\n\n        <div class=\"keyboard-shortcuts clearfix\" id=\"keyboard-shortcut-menu\">\n\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,590,6476,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <table class=\"modal-table\">\n            <thead>\n              <tr>\n                <th colspan=\"2\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">F</b>\n                </td>\n                <td class=\"shortcut-label\">Favorite</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">R</b>\n                </td>\n                <td class=\"shortcut-label\">Reply</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">T</b>\n                </td>\n                <td class=\"shortcut-label\">Retweet</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">M</b>\n                </td>\n                <td class=\"shortcut-label\">Direct message</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">N</b>\n                </td>\n                <td class=\"shortcut-label\">New Tweet</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">Enter</b>\n                </td>\n                <td class=\"shortcut-label\">Open Tweet details</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">L</b>\n                </td>\n                <td class=\"shortcut-label\">Close all open Tweets</td>\n              </tr>\n            </tbody>\n          </table>\n          <table class=\"modal-table\">\n            <thead>\n              <tr>\n                <th colspan=\"2\">Navigation</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">?</b>\n                </td>\n                <td class=\"shortcut-label\">This menu</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">J</b>\n                </td>\n                <td class=\"shortcut-label\">Next Tweet</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">K</b>\n                </td>\n                <td class=\"shortcut-label\">Previous Tweet</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">Space</b>\n                </td>\n                <td class=\"shortcut-label\">Page down</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">/</b>\n                </td>\n                <td class=\"shortcut-label\">Search</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">.</b>\n                </td>\n                <td class=\"shortcut-label\">Load new Tweets</td>\n              </tr>\n            </tbody>\n          </table>\n          <table class=\"modal-table\">\n            <thead>\n              <tr>\n                <th colspan=\"2\">Timelines</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">G</b> <b class=\"sc-key\">H</b>\n                </td>\n                <td class=\"shortcut-label\">Home</td>\n              </tr>\n\n");if(t.s(t.f("decider_activity_read",c,p,1),c,p,0,4107,4955,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("decider_activity_dark_read",c,p,1),c,p,0,4155,4909,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                  <tr>\n                    <td class=\"shortcut\">\n                      <b class=\"sc-key\">G</b> <b class=\"sc-key\">C</b>\n                    </td>\n                    <td class=\"shortcut-label\">Connect</td>\n                  </tr>\n                  <tr>\n                    <td class=\"shortcut\">\n                      <b class=\"sc-key\">G</b> <b class=\"sc-key\">A</b>\n                    </td>\n                    <td class=\"shortcut-label\">Activity</td>\n                  </tr>\n                  <tr>\n                    <td class=\"shortcut\">\n                      <b class=\"sc-key\">G</b> <b class=\"sc-key\">R</b>\n                    </td>\n                    <td class=\"shortcut-label\">Mentions</td>\n                  </tr>\n");});c.pop();}});c.pop();}if(!t.s(t.f("decider_activity_read",c,p,1),c,p,1,0,0,"")){t.b("                  <tr>\n                    <td class=\"shortcut\">\n                      <b class=\"sc-key\">G</b> <b class=\"sc-key\">R</b>\n                    </td>\n                    <td class=\"shortcut-label\">Mentions</td>\n                  </tr>\n");};t.b("\n" + i);t.b("              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">G</b> <b class=\"sc-key\">D</b>\n                </td>\n                <td class=\"shortcut-label\">Discover</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">G</b> <b class=\"sc-key\">P</b>\n                </td>\n                <td class=\"shortcut-label\">Profile</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">G</b> <b class=\"sc-key\">F</b>\n                </td>\n                <td class=\"shortcut-label\">Favorites</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">G</b> <b class=\"sc-key\">M</b>\n                </td>\n                <td class=\"shortcut-label\">Messages</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">G</b> <b class=\"sc-key\">U</b>\n                </td>\n                <td class=\"shortcut-label\">Go to user...</td>\n              </tr>\n            </tbody>\n          </table>\n");});c.pop();}if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("          <table class=\"modal-table\">\n            <tbody>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">Enter</b>\n                </td>\n                <td class=\"shortcut-label\">Open Tweet details</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">G</b> <b class=\"sc-key\">F</b>\n                </td>\n                <td class=\"shortcut-label\">Go to user...</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">?</b>\n                </td>\n                <td class=\"shortcut-label\">This menu</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">J</b>\n                </td>\n                <td class=\"shortcut-label\">Next Tweet</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">K</b>\n                </td>\n                <td class=\"shortcut-label\">Previous Tweet</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">Space</b>\n                </td>\n                <td class=\"shortcut-label\">Page down</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">/</b>\n                </td>\n                <td class=\"shortcut-label\">Search</td>\n              </tr>\n              <tr>\n                <td class=\"shortcut\">\n                  <b class=\"sc-key\">.</b>\n                </td>\n                <td class=\"shortcut-label\">Load new Tweets</td>\n              </tr>\n            </tbody>\n          </table>\n");};t.b("        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_create_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"list-create-dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal modal-medium draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Create a new list</h3>\n      </div>\n      <div class=\"modal-body\">\n");t.b(t.rp("list_dialog0",c,p,"        "));t.b("      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {"list_dialog0": {name:"list_dialog"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_membership_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"list-membership-dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal modal-small draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Your lists</h3>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"list-membership-content\"></div>\n        <span class=\"spinner lists-spinner\" title=\"Loading&hellip;\"></span>\n      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mobile_gallery_download_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"mobile_gallery_download_dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal modal-small draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n\n      \n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Download a Twitter app for your phone</h3>\n      </div>\n\n      \n      <div class=\"modal-body\">\n        <p>Give us your email address and we'll send a link to download the Twitter app, or visit twitter.com/download on your mobile device.</p>\n        <form class=\"dialog-form\">\n          <fieldset class=\"common-form\">\n            <label class=\"field\">\n              <span class=\"label\">Enter your email address:</span>\n              <span class=\"input-wrapper\">\n                <input type=\"email\" name=\"email\" required>\n              </span>\n              <span class=\"notification\"></span>\n            </label>\n          </fieldset>\n          <div class=\"modal-footer\">\n            <div class=\"dialog-prompt\">\n              <input type=\"submit\" class=\"btn primary-btn submit js-submit\" value=\"Send link\">\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"password_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"password_dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal modal-small draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Save account changes</h3>\n      </div>\n      <div class=\"modal-body\">\n        <p>Re-enter your Twitter password to save changes to your account.</p>\n        <div class=\"input-wrapper password-wrapper\">\n          <input class=\"input-password-confirm\" id=\"auth_password\" name=\"auth_password\" type=\"password\" placeholder=\"Password\">\n          <small>\n            <a href=\"");t.b(t.v(t.f("resend_password_path",c,p,0)));t.b("\" id=\"forgot_password\">Forgot your password?</a>\n            <span id=\"reminder_sent\" style=\"visibility: hidden\">Reminder sent!</span>\n          </small>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button class=\"btn\" id=\"cancel_password_button\">Cancel</button>\n        <button type=\"submit\" id=\"save_password\" class=\"btn primary-btn modal-submit\">Save changes</button>\n      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_popup_container": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"profile_popup\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal modal-small draggable\">\n    <div class=\"modal-content clearfix\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Profile summary</h3>\n      </div>\n\n      <div class=\"modal-body profile-modal\">\n\n      </div>\n\n      <div class=\"loading\">\n        <img src=\"");t.b(t.v(t.f("bigger_spinner_path",c,p,0)));t.b("\">\n      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"protected_verified_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"protected_verified_dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal modal-small draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\" type=\"button\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">Warning!</h3>\n      </div>\n      <div class=\"modal-body\">\n        <p>We're sorry, Twitter only verifies public accounts. If you protect your account, you will lose your verified badge.</p>\n      </div>\n      <div class=\"modal-footer\">\n        <button id=\"stay_verified_link\" class=\"btn\" type=\"button\">Stay verified</button>\n        <button id=\"protect_my_tweets_link\" class=\"btn primary-btn\" type=\"button\">Protect my Tweets</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"retweet_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div id=\"retweet-tweet-dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n\n      <div class=\"modal-header\">\n        \n        ");if(!t.s(t.f("change_german_verbs",c,p,1),c,p,1,0,0,"")){t.b("<h3 class=\"modal-title\">Retweet this to your followers?</h3>");};t.b("\n" + i);t.b("        ");if(t.s(t.f("change_german_verbs",c,p,1),c,p,0,490,560,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<h3 class=\"modal-title\">Diesen Tweet mit Deinen Followern teilen?</h3>");});c.pop();}t.b("\n" + i);t.b("      </div>\n\n      <div class=\"modal-body modal-tweet\"></div>\n\n      <div class=\"modal-footer\">\n        <button class=\"btn cancel-action\">Cancel</button>\n        \n        ");if(!t.s(t.f("change_german_verbs",c,p,1),c,p,1,0,0,"")){t.b("<button class=\"btn primary-btn retweet-action\">Retweet</button>");};t.b("\n" + i);t.b("        ");if(t.s(t.f("change_german_verbs",c,p,1),c,p,0,901,963,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<button class=\"btn primary-btn retweet-action\">Teilen</button>");});c.pop();}t.b("\n" + i);t.b("      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"retweeted_popup_title": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("  ");if(t.s(t.f("retweeters_length_one",c,p,1),c,p,0,29,62,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Retweeted ");t.b(t.v(t.f("retweets_count",c,p,0)));t.b(" time");});c.pop();}t.b("\n" + i);t.b("  ");if(t.s(t.f("retweeters_length_other",c,p,1),c,p,0,119,153,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Retweeted ");t.b(t.v(t.f("retweets_count",c,p,0)));t.b(" times");});c.pop();}t.b("\n");t.b("\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"sensitive_flag_confirmation": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"sensitive-confirm-form\">\n  <p class=\"sensitive-title\">This has already been marked as containing sensitive content.</p>\n\n  <div class=\"sensitive-field\">\n    <label for=\"sensitive-settings-checkbox\">\n      <input class=\"checkbox\" type=\"checkbox\" id=\"sensitive-settings-checkbox\" value=\"settings\"/>\n      <span class=\"sensitive-label\">Change my settings to warn me before displaying media that may contain sensitive content.</span>\n    </label>\n  </div>\n  <div class=\"sensitive-field\">\n    <label for=\"sensitive-illegal-checkbox\">\n      <input class=\"checkbox\" type=\"checkbox\" id=\"sensitive-illegal-checkbox\" value=\"illegal\"/>\n      <span class=\"sensitive-label\">Flag this as containing illegal content.</span>\n    </label>\n  </div>\n\n  <div class=\"sensitive-confirmation\">\n    <div class=\"sensitive-buttons\">\n      <div class=\"button submit-sensitive-form js-prompt-ok\" data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Submit</div>\n      <div class=\"button cancel-sensitive-form js-prompt-cancel\" data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Cancel</div>\n    </div>\n    <a class=\"sensitive-learn-more\" href=\"");t.b(t.v(t.f("flag_turkey_support_path",c,p,0)));t.b("\">Learn more about flagging media</a>\n  </div>\n\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"signin_or_signup_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("content_view",c,p,1),c,p,0,364,1488,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div id=\"signin-or-signup-dialog\">\n    <div id=\"signin-or-signup\" class=\"modal-container\">\n      <div class=\"close-modal-background-target\"></div>\n      <div class=\"modal modal-medium draggable\">\n        <div class=\"modal-content\">\n          <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n          <div class=\"modal-header\">\n            <h3 class=\"modal-title modal-long-title signup-only\">Sign up for Twitter &amp; follow @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</h3>\n            <h3 class=\"modal-title not-signup-only\">Sign in to Twitter</h3>\n          </div>\n          <div class=\"modal-body signup-only\">\n            <div class=\"signup-call-out\">\n");t.b(t.rp("partial_signup_form0",c,p,"              "));t.b("            </div>\n          </div>\n          <div class=\"modal-body not-signup-only\">\n");t.b(t.rp("signin_form1",c,p,"            "));t.b("            <div class=\"signup\">\n              <h2>Not on Twitter? Sign up, tune into the things you care about, and get updates as they happen.</h2>\n");t.b(t.rp("signup_button2",c,p,"              "));t.b("            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n");});c.pop();}return t.fl(); }, partials: {"partial_signup_form0": {name:"partial_signup_form"},"signin_form1": {name:"signin_form"},"signup_button2": {name:"signup_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"sms_codes": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<table id=\"sms_codes\" cellpadding=\"0\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Country</th>\n      <th>Code</th>\n      <th>For customers of</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>United States</td>\n      <td>40404</td>\n      <td>(any)</td>\n    </tr>\n    <tr>\n      <td>Canada</td>\n      <td>21212</td>\n      <td>(any)</td>\n    </tr>\n    <tr>\n      <td>United Kingdom</td>\n      <td>86444</td>\n      <td>Vodafone, Orange, 3, O2</td>\n    </tr>\n    <tr>\n      <td>Brazil</td>\n      <td>40404</td>\n      <td>Nextel, TIM</td>\n    </tr>\n    <tr>\n      <td>Haiti</td>\n      <td>40404</td>\n      <td>Digicel, Voila</td>\n    </tr>\n    <tr>\n      <td>Ireland</td>\n      <td>51210</td>\n      <td>Vodafone, O2</td>\n    </tr>\n    <tr>\n      <td>India</td>\n      <td>53000</td>\n      <td>Bharti Airtel, Videocon, Reliance</td>\n    </tr>\n    <tr>\n      <td>Indonesia</td>\n      <td>89887</td>\n      <td>AXIS, 3, Telkomsel, Indosat, XL Axiata</td>\n    </tr>\n    <tr>\n      <td rowspan=\"2\">Italy</td>\n      <td>4880804</td>\n      <td>Wind</td>\n    </tr>\n    <tr>\n      <td>3424486444</td>\n      <td>Vodafone</td>\n    </tr>\n  </tbody>\n  <tfoot>\n    <tr>\n      <td colspan=\"3\">\n        &raquo; <a target=\"_blank\" href=\"http://support.twitter.com/articles/14226-how-to-find-your-twitter-short-code-or-long-code\">See SMS short codes for other countries</a>\n      </td>\n    </tr>\n  </tfoot>\n</table>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"trend_dialog_location_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li>\n  <a href=\"#\" class=\"trends-location-item js-trend-link\" data-woeid=\"");t.b(t.v(t.f("woeid",c,p,0)));t.b("\">\n    ");t.b(t.v(t.f("name",c,p,0)));t.b("\n" + i);t.b("    <i class=\"checkmark\"></i>\n  </a>\n</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"trends_dialog_inner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"trends-by-location\">\n\n  <div class=\"trends-breadcrumb\">\n");t.b(t.rp("trends_dialog_breadcrumbs0",c,p,"    "));t.b("  </div>\n\n  <div class=\"trends-locations clearfix\">\n    <ul class=\"trends-locations-list\">\n");if(t.s(t.f("locations0",c,p,1),c,p,0,215,270,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dialogs/trend_dialog_location_item1",c,p,"        "));});c.pop();}t.b("    </ul>\n    <ul class=\"trends-locations-list\">\n");if(t.s(t.f("locations1",c,p,1),c,p,0,356,411,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dialogs/trend_dialog_location_item2",c,p,"        "));});c.pop();}t.b("    </ul>\n    <ul class=\"trends-locations-list\">\n");if(t.s(t.f("locations2",c,p,1),c,p,0,497,552,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dialogs/trend_dialog_location_item3",c,p,"        "));});c.pop();}t.b("    </ul>\n  </div>\n</div>\n");return t.fl(); }, partials: {"trends_dialog_breadcrumbs0": {name:"trends_dialog_breadcrumbs"},"dialogs/trend_dialog_location_item1": {name:"dialogs/trend_dialog_location_item"},"dialogs/trend_dialog_location_item2": {name:"dialogs/trend_dialog_location_item"},"dialogs/trend_dialog_location_item3": {name:"dialogs/trend_dialog_location_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"trends_dialog_shell": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"trends_dialog\" class=\"trends-dialog modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal draggable\">\n    <div class=\"modal-content\">\n      <button class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n      <div class=\"modal-header\">\n          <h3 class=\"modal-title\">\n            ");if(t.s(t.f("decider_personalized_trends",c,p,1),c,p,0,415,421,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Trends");});c.pop();}t.b("\n" + i);t.b("            ");if(!t.s(t.f("decider_personalized_trends",c,p,1),c,p,1,0,0,"")){t.b("Choose a trend location");};t.b("\n" + i);t.b("          </h3>\n      </div>\n\n      <div class=\"modal-body\">\n\n");if(t.s(t.f("decider_personalized_trends",c,p,1),c,p,0,656,707,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("trends_personalized_dialog0",c,p,"          "));});c.pop();}t.b("\n" + i);t.b("        <div class=\"trends-wrapper\" id=\"trends_dialog_content\">\n          \n        </div>\n      </div>\n");if(t.s(t.f("decider_personalized_trends",c,p,1),c,p,0,882,994,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"modal-footer trends-by-location\">\n");t.b(t.rp("trends_dialog_footer1",c,p,"          "));t.b("        </div>\n");});c.pop();}t.b("    </div>\n  </div>\n</div>");return t.fl(); }, partials: {"trends_personalized_dialog0": {name:"trends_personalized_dialog"},"trends_dialog_footer1": {name:"trends_dialog_footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"global-tweet-dialog\" class=\"modal-container\">\n  <div class=\"close-modal-background-target\"></div>\n  <div class=\"modal draggable\">\n    <div class=\"modal-content\">\n      <button type=\"button\" class=\"modal-btn modal-close\"><i class=\"close-medium\"><span class=\"hidden-elements\">Close</span></i></button>\n\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\"></h3>\n      </div>\n\n      <div class=\"modal-body\">\n");t.b(t.rp("swift_tweet_box0",c,p,"        "));t.b("      </div>\n\n      <div class=\"modal-footer modal-tweet\"></div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {"swift_tweet_box0": {name:"swift_tweet_box"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"direct_message_delete_confirm": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<p>Are you sure you want to delete this message?</p>\n<button type=\"button\" class=\"btn caution-btn js-prompt-ok\" data-message-id=\"");t.b(t.v(t.f("messageId",c,p,0)));t.b("\">Delete message</button>\n<button type=\"button\" class=\"btn js-prompt-cancel\">Cancel</button>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"direct_message_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"twttr-dialog-container\" style=\"visibility: hidden;\">\n  <div class=\"twttr-dialog dm-dialog\">\n    <div class=\"twttr-dialog-header\">\n      <h3 class=\"js-dm-header\"></h3>\n      <div class=\"twttr-dialog-close\"><b>&times;</b></div>\n    </div>\n    <div class=\"twttr-dialog-inside\">\n      <div class=\"twttr-dialog-error clearfix\"></div>\n      <div class=\"twttr-dialog-body clearfix\">\n        <div class=\"twttr-dialog-content js-dm-content\"></div>\n      </div>\n      <div class=\"dm-tweetbox js-dm-tweetbox\">\n        <div class=\"dm-delete-confirm js-dm-delete-confirm\"></div>\n      </div>\n      <div class=\"twttr-dialog-footer clearfix\">\n        Tip: you can send a message to anyone who follows you. <a href=\"");t.b(t.v(t.f("direct_message_learn_more_path",c,p,0)));t.b("\" target=\"_blank\" class=\"learn-more\">Learn more</a>\n      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"direct_message_dialog_conversation": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("direct_message_dialog_error0",c,p,""));t.b("<div class=\"dm-convo js-dm-conversation js-modal-scrollable js-twttr-dialog-not-draggable\" data-thread-id=\"");t.b(t.v(t.f("threadId",c,p,0)));t.b("\">\n");if(t.s(t.f("items",c,p,1),c,p,0,167,219,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("direct_message_dialog_conversation_item1",c,p,"    "));});c.pop();}t.b("  \n  <div class=\"dm-ie-fix\">&nbsp;</div>\n</div>\n");return t.fl(); }, partials: {"direct_message_dialog_error0": {name:"direct_message_dialog_error"},"direct_message_dialog_conversation_item1": {name:"direct_message_dialog_conversation_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"direct_message_dialog_conversation_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dm ");t.b(t.v(t.f("sent_or_received",c,p,0)));t.b(" js-dm-item\" data-message-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n");if(t.s(t.f("sender",c,p,1),c,p,0,87,269,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <img class=\"avatar\" src=\"");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,141,171,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_image_absolute_url",c,p,0)));});c.pop();}if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("profile_image_url",c,p,0)));};t.b("\">\n");});c.pop();}t.b("  <div class=\"dm-content clearfix\">\n    <small class=\"time\">\n      \n      <span class=\"_timestamp");if(t.s(t.f("is_relative_timestamp",c,p,1),c,p,0,404,426,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" js-relative-timestamp");});c.pop();}t.b("\" data-time=\"");t.b(t.v(t.f("actual_timestamp",c,p,0)));t.b("\" data-long-form=\"true\" data-include-sec=\"true\">\n        ");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,566,585,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("short_timestamp",c,p,0)));});c.pop();}t.b("\n" + i);t.b("        ");if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("timestamp",c,p,0)));};t.b("\n" + i);t.b("      </span>\n    </small>\n    <div class=\"dm-message\">\n      <p class=\"js-tweet-text\">");t.b(t.t(t.f("linkified_text",c,p,0)));t.b("</p>\n      <div class=\"dm-caret\">\n        <div class=\"dm-caret-outer\"></div>\n        <div class=\"dm-caret-inner\"></div>\n      </div>\n    </div>\n    <a class=\"dm-delete js-dm-delete\" href=\"#\" title=\"Delete this direct message\" data-message-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"><i class=\"trash\"></i></a>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"direct_message_dialog_conversation_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dm-threads js-dm-threads js-modal-scrollable js-twttr-dialog-not-draggable\">\n  <ul class=\"dm-thread-list js-dm-thread-list\">\n");if(t.s(t.f("items",c,p,1),c,p,0,151,212,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("direct_message_dialog_conversation_list_item0",c,p,"      "));});c.pop();}if(!t.s(t.f("items",c,p,1),c,p,1,0,0,"")){t.b(t.rp("direct_message_dialog_empty1",c,p,"      "));};t.b("  </ul>\n</div>");return t.fl(); }, partials: {"direct_message_dialog_conversation_list_item0": {name:"direct_message_dialog_conversation_list_item"},"direct_message_dialog_empty1": {name:"direct_message_dialog_empty"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"direct_message_dialog_conversation_list_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"dm-thread js-dm-thread\" data-thread-id=\"");t.b(t.v(t.f("threadId",c,p,0)));t.b("\" data-last-message-id=\"");t.b(t.v(t.f("last_message_id",c,p,0)));t.b("\">\n  <a class=\"dm-thread-link js-dm-thread-link\" href=\"#\" data-thread-id=\"");t.b(t.v(t.f("threadId",c,p,0)));t.b("\">\n    <i class=\"chev-right\"></i>\n    <div class=\"dm-thread-status js-thread-status\">\n      <i class=\"");if(t.s(t.f("is_unread",c,p,1),c,p,0,308,314,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("unread");});c.pop();}t.b("\"></i>\n    </div>\n    <div class=\"dm-thread-content\">\n");if(t.s(t.f("other_person",c,p,1),c,p,0,405,766,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"account-group\">\n          <img class=\"avatar size32\" src=\"");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,509,539,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_image_absolute_url",c,p,0)));});c.pop();}if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("profile_image_url",c,p,0)));};t.b("\">\n          <b class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</b>\n          <small class=\"username\"><s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</small>\n        </span>\n");});c.pop();}t.b("      <p class=\"dm-thread-snippet js-tweet-text\">\n        ");if(t.s(t.f("is_replied",c,p,1),c,p,0,857,880,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"replied\"></i>");});c.pop();}t.b("\n" + i);t.b("        ");t.b(t.v(t.f("last_message_text",c,p,0)));t.b("\n" + i);t.b("      </p>\n      \n      <small class=\"time\">\n        \n        <span class=\"_timestamp");if(t.s(t.f("is_relative_timestamp",c,p,1),c,p,0,1037,1059,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" js-relative-timestamp");});c.pop();}t.b("\" data-time=\"");t.b(t.v(t.f("last_message_actual_timestamp",c,p,0)));t.b("\" data-long-form=\"true\" data-include-sec=\"true\">");t.b(t.v(t.f("last_message_timestamp",c,p,0)));t.b("</span>\n      </small>\n    </div>\n  </a>\n</li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"direct_message_dialog_empty": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dm-placeholder-empty dm-no-messages\">\n  <p><strong>You don't have any messages yet.</strong></p>\n  <p>Direct messages are 140 characters, private, and can be sent to any user who follows you on Twitter.</p>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"direct_message_dialog_error": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dm-error js-dm-error\">\n  <a href=\"#\" class=\"js-dismiss\">\n    <i class=\"close\"></i>\n  </a>\n  <span class=\"dm-error-text\"></span>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"direct_message_dialog_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);if(t.s(t.f("conversation_list",c,p,1),c,p,0,57,169,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <a class=\"btn js-dismiss dm-header-new js-dm-header-new\" href=\"#\">New message</a>\n  <h2>Direct messages</h2>\n");});c.pop();}if(!t.s(t.f("conversation_list",c,p,1),c,p,1,0,0,"")){t.b("  <h2><a class=\"js-dm-header-title\" href=\"#\">Direct messages</a> ›\n");if(t.s(t.f("new_dm",c,p,1),c,p,0,297,312,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      New\n");});c.pop();}if(t.s(t.f("conversation",c,p,1),c,p,0,345,370,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      with ");t.b(t.v(t.f("name",c,p,0)));t.b("\n" + i);});c.pop();}t.b("  </h2>\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"direct_message_dialog_new": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dm-to js-dm-new\">\n  \n  <img class=\"avatar size24 js-dm-avatar\" src=\"#\">\n\n  \n  <input class=\"dm-to-input twttr-directmessage-input js-dm-user-autocomplete\" type=\"text\">\n</div>\n\n\n<div class=\"js-dm-user-check\"></div>\n\n<div class=\"dm-convo-placeholder\">\n");t.b(t.rp("direct_message_dialog_error0",c,p,"  "));t.b("</div>");return t.fl(); }, partials: {"direct_message_dialog_error0": {name:"direct_message_dialog_error"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"discover": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("dashboard_discover0",c,p,""));t.b(t.rp("dialogs/trends_dialog_shell1",c,p,""));t.b("\n" + i);t.b("<div id=\"discover-stories\" class=\"content-main\">\n  <div class=\"content-header ");if(t.s(t.f("single_expanded_story_bucket",c,p,1),c,p,0,169,192,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("content-header-detached");});c.pop();}t.b("\">\n    <div class=\"header-inner\">\n      <h2>Stories</h2>\n    </div>\n  </div>\n  <div id=\"discover_items\">\n");if(t.s(t.f("discover_items",c,p,1),c,p,0,353,393,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("discover/discover_items2",c,p,"      "));});c.pop();}t.b("  </div>\n</div>");return t.fl(); }, partials: {"dashboard_discover0": {name:"dashboard_discover"},"dialogs/trends_dialog_shell1": {name:"dialogs/trends_dialog_shell"},"discover/discover_items2": {name:"discover/discover_items"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"discover_items": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(" <div class=\"items\">\n");if(t.s(t.f("items",c,p,1),c,p,0,33,60,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("discover/story0",c,p,"    "));});c.pop();}if(t.s(t.f("has_items",c,p,1),c,p,0,87,110,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("stream_end1",c,p,"    "));});c.pop();}if(!t.s(t.f("has_items",c,p,1),c,p,1,0,0,"")){t.b(t.rp("discovery_stream_error2",c,p,"    "));};t.b("</div>");return t.fl(); }, partials: {"discover/story0": {name:"discover/story"},"stream_end1": {name:"stream_end"},"discovery_stream_error2": {name:"discovery_stream_error"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"news_story": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("article_image",c,p,1),c,p,0,18,236,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"discover-item-image-wrapper\">\n    <a class=\"js-action-card-news\" href=\"");t.b(t.v(t.f("article_url",c,p,0)));t.b("\" target=\"_blank\">\n      <img class=\"discover-item-image\" src=\"");t.b(t.v(t.f("article_image",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("title",c,p,0)));t.b("\">\n    </a>\n  </div>\n");});c.pop();}t.b("\n" + i);t.b("<h3 class=\"discover-item-title js-story-title js-news-headline\">\n  <a class=\"js-action-card-news\" href=\"");t.b(t.v(t.f("article_url",c,p,0)));t.b("\" target=\"_blank\">\n    ");t.b(t.v(t.f("title",c,p,0)));t.b("\n" + i);t.b("  </a>\n</h3>\n\n<p class=\"discover-item-summary js-news-snippet\">");t.b(t.v(t.f("description",c,p,0)));t.b("</p>\n<p class=\"metadata discover-item-metadata js-metadata\">\n  <a class=\"js-action-card-news\" href=\"");t.b(t.v(t.f("article_url",c,p,0)));t.b("\" target=\"_blank\">\n    ");t.b(t.v(t.f("article_display_url",c,p,0)));t.b("\n" + i);t.b("  </a>\n</p>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"social_proof": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"expanded-content js-expando-content\">\n\n  <div class=\"expanded-tweets\">\n");if(t.s(t.f("statuses",c,p,1),c,p,0,101,201,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"supplement hidden-supplement sub-stream-item-hidden\">");t.b(t.rp("simple_tweet0",c,p,""));t.b("</div>\n");});c.pop();}if(t.s(t.f("is_trend",c,p,1),c,p,0,232,506,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"social-proof-tweet\">\n        <span class=\"metadata\">\n          <a class=\"js-action-card-search\" href=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\" data-query-source=\"trend_click\">\n            <i class=\"sm-search\"></i>Search this trend\n          </a>\n        </span>\n      </div>\n");});c.pop();}t.b("  </div>\n\n</div>\n");return t.fl(); }, partials: {"simple_tweet0": {name:"simple_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"social_proof_summary": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"social-context\">\n  <span class=\"summary-closed js-expando-control-unexpanded show\">\n    \n    <div class=\"social-context-avatars\">\n");if(t.s(t.f("tweeted_users",c,p,1),c,p,0,166,206,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_avatar_link_240",c,p,"        "));});c.pop();}t.b("    </div>\n  </span> \n\n  <span class=\"metadata\">\n");if(t.s(t.f("is_trend",c,p,1),c,p,0,291,579,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      \n        ");if(t.s(t.f("status_count_one",c,p,1),c,p,0,328,348,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Trending Tweet about");});c.pop();}if(t.s(t.f("status_count_other",c,p,1),c,p,0,392,413,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Trending Tweets about");});c.pop();}t.b("\n" + i);t.b("        <a class=\"social-emphasis js-action-card-search\" href=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\" data-query-source=\"trend_click\">");t.b(t.v(t.f("story_name",c,p,0)));t.b("</a>\n      \n");});c.pop();}if(!t.s(t.f("is_trend",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("first_user",c,p,1),c,p,0,632,1232,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("tweeted_by_count",c,p,1),c,p,1,0,0,"")){t.b("           Tweeted by <a class=\"social-emphasis show-popup-with-id\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n");};t.b("\n" + i);if(t.s(t.f("tweeted_by_count",c,p,1),c,p,0,850,1204,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          \n            Tweeted by <a class=\"social-emphasis show-popup-with-id\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n              ");if(t.s(t.f("tweeted_by_count_one",c,p,1),c,p,0,1029,1059,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("and ");t.b(t.v(t.f("tweeted_by_count",c,p,0)));t.b(" other");});c.pop();}t.b("\n" + i);t.b("              ");if(t.s(t.f("tweeted_by_count_other",c,p,1),c,p,0,1126,1157,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("and ");t.b(t.v(t.f("tweeted_by_count",c,p,0)));t.b(" others");});c.pop();}t.b("\n" + i);t.b("          \n");});c.pop();}});c.pop();}};t.b("\n" + i);t.b("    \n    <span class=\"metadata discover-item-actions\">\n      <span class=\"separator\">&middot;</span>\n      <a class=\"open-close-tweets-link summary-closed show\" href=\"#\">");if(t.s(t.f("status_count_one",c,p,1),c,p,0,1458,1468,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("View Tweet");});c.pop();}if(t.s(t.f("status_count_other",c,p,1),c,p,0,1512,1523,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("View Tweets");});c.pop();}t.b("</a>\n      <a class=\"open-close-tweets-link summary-opened hide\" href=\"#\">");if(t.s(t.f("status_count_one",c,p,1),c,p,0,1641,1651,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Hide Tweet");});c.pop();}if(t.s(t.f("status_count_other",c,p,1),c,p,0,1695,1706,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Hide Tweets");});c.pop();}t.b("</a>\n");if(t.s(t.f("is_news",c,p,1),c,p,0,1752,1879,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"separator\">&middot;</span>\n        <a class=\"story-social-new-tweet\" href=\"#\">Tweet this story</a>\n");});c.pop();}t.b("    </span>\n  </span>\n\n</div>\n");return t.fl(); }, partials: {"user_avatar_link_240": {name:"user_avatar_link_24"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"story": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-item js-stream-item disco-stream-item ");if(t.s(t.f("single_expanded_story_bucket",c,p,1),c,p,0,90,135,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("disco-item-expanded stream-item-expanded open");});c.pop();}t.b("\">\n  <div class=\"discover-item js-hover js-story-item ");if(t.s(t.f("is_hashtag",c,p,1),c,p,0,237,247,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("is-hashtag");});c.pop();}t.b(" ");if(t.s(t.f("is_news",c,p,1),c,p,0,275,288,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("discover-news");});c.pop();}t.b(" ");if(t.s(t.f("is_topic",c,p,1),c,p,0,314,409,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("discover-topic ");t.b(t.v(t.f("media_type",c,p,0)));t.b(" js-loading loading ");if(!t.s(t.f("has_media",c,p,1),c,p,1,0,0,"")){t.b("js-nomedia nomedia");};});c.pop();}t.b("\" data-query=\"");t.b(t.v(t.f("escaped_query",c,p,0)));t.b("\" data-story-type=\"");if(t.s(t.f("is_news",c,p,1),c,p,0,484,488,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("news");});c.pop();}if(t.s(t.f("is_topic",c,p,1),c,p,0,513,518,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("topic");});c.pop();}t.b("\" data-card-media-type=\"");if(t.s(t.f("is_topic",c,p,1),c,p,0,568,582,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("media_type",c,p,0)));});c.pop();}t.b("\" data-url=\"");if(t.s(t.f("is_news",c,p,1),c,p,0,619,643,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("article_expanded_url",c,p,0)));});c.pop();}if(t.s(t.f("is_topic",c,p,1),c,p,0,668,677,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("query",c,p,0)));});c.pop();}t.b("\" data-source=\"");t.b(t.v(t.f("story_source",c,p,0)));t.b("\" data-item-key=\"");t.b(t.v(t.f("story_key",c,p,0)));t.b("\">\n    <div class=\"js-expand-trigger-area expand-trigger-area\">\n      <div class=\"discover-item-content\">\n");if(t.s(t.f("single_expanded_story_bucket",c,p,1),c,p,0,898,1054,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("expanded_tweet",c,p,1),c,p,0,928,1026,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <div class=\"permalink\">\n");t.b(t.rp("single_tweet0",c,p,"              "));t.b("            </div>\n");});c.pop();}});c.pop();}if(!t.s(t.f("single_expanded_story_bucket",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("is_news",c,p,1),c,p,0,1152,1200,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("discover/news_story1",c,p,"            "));});c.pop();}if(t.s(t.f("is_topic",c,p,1),c,p,0,1236,1285,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("discover/topic_story2",c,p,"            "));});c.pop();}};t.b("      </div>\n\n      \n");if(t.s(t.f("social_proof_summary_view",c,p,1),c,p,0,1398,1448,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("discover/social_proof_summary3",c,p,"        "));});c.pop();}t.b("    </div>\n\n    \n");if(t.s(t.f("social_proof_view",c,p,1),c,p,0,1522,1560,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("discover/social_proof4",c,p,"      "));});c.pop();}t.b("  </div>\n</div>");return t.fl(); }, partials: {"single_tweet0": {name:"single_tweet"},"discover/news_story1": {name:"discover/news_story"},"discover/topic_story2": {name:"discover/topic_story"},"discover/social_proof_summary3": {name:"discover/social_proof_summary"},"discover/social_proof4": {name:"discover/social_proof"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"topic_story": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<h3 class=\"discover-item-title js-story-title js-news-headline\">\n  <a class=\"js-action-card-search\" href=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\" data-query-source=\"trend_click\">\n    ");if(t.s(t.f("has_image",c,p,1),c,p,0,174,197,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Photo of ");t.b(t.v(t.f("story_name",c,p,0)));});c.pop();}if(t.s(t.f("has_video",c,p,1),c,p,0,225,248,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Video of ");t.b(t.v(t.f("story_name",c,p,0)));});c.pop();}t.b("\n" + i);t.b("  </a>\n</h3>\n\n");if(t.s(t.f("has_media",c,p,1),c,p,0,291,988,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"discover-item-media-wrapper\">\n     <div class=\"discover-item-loading\">\n      <p>Loading&hellip;</p>\n    </div>\n    <a class=\"discover-item-media js-action-card-media\" href=\"");t.b(t.v(t.f("card_url",c,p,0)));t.b("\">\n      <img class=\"story-");t.b(t.v(t.f("media_type",c,p,0)));t.b(" js-story-media\" data-item-id=\"");t.b(t.v(t.f("escaped_query",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("escaped_query",c,p,0)));t.b("\" data-img-src=\"");t.b(t.v(t.f("data_image_url",c,p,0)));t.b("\">\n");if(t.s(t.f("has_video",c,p,1),c,p,0,661,703,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <i class=\"play-large\"></i>\n");});c.pop();}t.b("    </a>\n");if(t.s(t.f("has_attribution",c,p,1),c,p,0,751,958,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <a class=\"discover-item-attribution js-story-attribution\" href=\"");t.b(t.v(t.f("attribution_url",c,p,0)));t.b("\" target=\"_blank\">\n        <img class=\"favicon\" src=\"");t.b(t.v(t.f("attribution_img",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("attribution_name",c,p,0)));t.b("\">\n      </a>\n");});c.pop();}t.b("  </div>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"discovery_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div ");if(t.s(t.f("container_id",c,p,1),c,p,0,22,44,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("id=\"");t.b(t.v(t.f("container_id",c,p,0)));t.b("\" ");});c.pop();}t.b("class=\"twttr-dialog-container\" style=\"visibility: hidden;\">\n  <div class=\"twttr-dialog twttr-dialog-discovery\">\n    <div class=\"twttr-dialog-inside\">\n      <div class=\"twttr-dialog-body clearfix\">\n        <div class=\"twttr-dialog-content\">\n          <div>\n            <h2 class=\"discoverability-header\">Be found on Twitter</h2>\n            <p>\n              We were hoping you could help us make it easier for people to discover their friends and colleagues on Twitter. Review your settings below to make sure the people you care about can easily find you.\n            </p>\n            <form action=\"#\" class=\"dialog-form\">\n              <fieldset class=\"common-form\">\n                <ul>\n                  <li>\n                    <label for=\"discoverable_name\">Name</label>\n                    <input type=\"text\" name=\"name\" id=\"discoverable_name\" maxlength=\"20\" value=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\"/>\n                  </li>\n                  <li>\n                    <label for=\"discoverable_description\">Bio<br/>\n                      <small>optional</small>\n                    </label>\n                    <textarea name=\"description\" class=\"discovery-description\" id=\"discoverable_description\">");t.b(t.v(t.f("description",c,p,0)));t.b("</textarea>\n                  </li>\n                  <li>\n                    <label for=\"discoverable_location\">Location<br/>\n                      <small>optional</small>\n                    </label>\n                    <input type=\"text\" name=\"location\" id=\"discoverable_location\" maxlength=\"100\" value=\"");t.b(t.v(t.f("location",c,p,0)));t.b("\"/>\n                  </li>\n                </ul>\n                <ul class=\"discoverability-settings\">\n                  <li>\n                    <label for=\"discoverable_by_email\">Email</label>\n                    <span class=\"input-wrapper\">\n                      <strong>");t.b(t.v(t.f("email_address",c,p,0)));t.b("</strong>\n                      <input type=\"checkbox\" name=\"discoverable_by_email\" id=\"discoverable_by_email\" ");if(t.s(t.f("email_checked",c,p,1),c,p,0,2000,2017,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=\"checked\"");});c.pop();}t.b(" value=\"1\" />\n                      <span class=\"discover-label\">Let others find me by my email address</span>\n                      <a href=\"");t.b(t.v(t.f("help_url",c,p,0)));t.b("\" target=\"_blank\" class=\"help-discover\"></a>\n                      <input type=\"hidden\" name=\"email_discoverability_set\" value=\"1\" />\n                    </span>\n                  </li>\n");if(t.s(t.f("device_setup",c,p,1),c,p,0,2410,3149,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                  <li>\n                    <label for=\"discoverable_by_mobile_phone\">Phone</label>\n                    <span class=\"input-wrapper\">\n                      <strong>");t.b(t.v(t.f("device_address",c,p,0)));t.b("</strong>\n                      <input type=\"checkbox\" name=\"discoverable_by_mobile_phone\" id=\"discoverable_by_mobile_phone\" ");if(t.s(t.f("phone_checked",c,p,1),c,p,0,2750,2767,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=\"checked\"");});c.pop();}t.b(" value=\"1\" />\n                      <span class=\"discover-label\">Let others find me by my phone number</span>\n                      <a href=\"");t.b(t.v(t.f("help_url",c,p,0)));t.b("\" target=\"_blank\" class=\"help-discover\"></a>\n                      <input type=\"hidden\" name=\"mobile_phone_discoverability_set\" value=\"1\" />\n                    </span>\n                  </li>\n");});c.pop();}t.b("                  <li>\n                    <span class=\"input-wrapper privacy-statement\">\n");if(t.s(t.f("device_setup",c,p,1),c,p,0,3296,3477,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                        Your email and phone <a href=\"");t.b(t.v(t.f("help_url",c,p,0)));t.b("\" target=\"_blank\">will not be publicly displayed</a>. You can change your settings anytime.\n");});c.pop();}if(!t.s(t.f("device_setup",c,p,1),c,p,1,0,0,"")){t.b("                        Your email <a href=\"");t.b(t.v(t.f("help_url",c,p,0)));t.b("\" target=\"_blank\">will not be publicly displayed</a>. You can change your settings anytime.\n");};t.b("                    </span>\n                  </li>\n                </ul>\n                <div class=\"discover-buttons\">\n                  <div class=\"button submit\">Good to go!</div>\n                  <div class=\"button cancel\">Ask me later</div>\n                </div>\n              </fieldset>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"discovery_stream_error": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-end stream-placeholder js-discovery-error\">\n  <div class=\"stream-end-inner\">\n    <h2>Oops, something went wrong!</h2>\n    <p>Sorry for the inconvenience. Please try refreshing the page in a moment.</p>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dismiss_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"dismiss js-dismiss\" href=\"#\"><i class=\"close\"></i></a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dm_footer": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"twttr-dialog-footer\">\n  Tip: you can send a message to anyone who follows you. <a href=\"http://support.twitter.com/groups/31-twitter-basics/topics/109-tweets-messages/articles/14606-what-is-a-direct-message-dm\" target=\"_blank\" class=\"learn-more\">Learn more</a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dropdown": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"drop-down\" style=\"visibility: hidden\">\n  ");t.b(t.t(t.f("items",c,p,0)));t.b("\n" + i);t.b("</ul>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"duplicate_tweet_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_dm",c,p,1),c,p,0,10,46,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Whoops! You already said that...\n");});c.pop();}if(!t.s(t.f("is_dm",c,p,1),c,p,1,0,0,"")){t.b("  Whoops! You already tweeted that...\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"edit_list_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"button edit-list-button js-edit-list-action\" data-screen-name=\"");if(t.s(t.f("user",c,p,1),c,p,0,84,99,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("\" data-list-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" title=\"Edit\"><span class=\"edit-list\"></span><b class=\"label\">Edit</b></div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"edit_profile_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"btn js-thats-you edit-profile-btn\" href=\"");t.b(t.v(t.f("settings_profile_path",c,p,0)));t.b("\">Edit your profile</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"email_already_verified_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"banner-outer\">\n  <div class=\"banner\">\n    <div class=\"banner-inside email-already-verified-banner\">\n      <a class='pane-close' href='#'>close <span>&times;</span></a>\n      <span class=\"warning\"></span>\n      <h5>");t.b(t.v(t.f("already_verified_message",c,p,0)));t.b("</h5>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"embed_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"embed-code-container\">\n  <p>Add this Tweet to your website by copying the code below. <a href=\"");t.b(t.v(t.f("embed_documentation_path",c,p,0)));t.b("\">Learn more</a></p>\n  <form>\n\n    <ul class=\"embed-target tabs\">\n      <li><a class=\"btn active\" href=\"javascript:;\" data-target=\"HTML\">HTML</a></li>\n      <li><a class=\"btn\" href=\"javascript:;\" data-target=\"shortcode\">Shortcode</a></li>\n      <li><a class=\"btn\" href=\"javascript:;\" data-target=\"link\">Link</a></li>\n    </ul>\n\n    <textarea></textarea>\n\n    <div class=\"clearfix embed-alignment\">\n      <div class=\"legend\">Alignment</div>\n      <div class=\"input\">\n        <label for=\"embed-alignment-none\" class=\"btn btn-first active\"><i class=\"embed-align-none\"></i>None</label>\n        <input type=\"radio\" id=\"embed-alignment-none\" name=\"align\" value=\"none\" checked=\"checked\">\n        <label for=\"embed-alignment-left\" class=\"btn\"><i class=\"embed-align-left\"></i>Left</label>\n        <input type=\"radio\" id=\"embed-alignment-left\" name=\"align\" value=\"left\">\n        <label for=\"embed-alignment-right\" class=\"btn\"><i class=\"embed-align-right\"></i>Right</label>\n        <input type=\"radio\" id=\"embed-alignment-right\" name=\"align\" value=\"right\">\n        <label for=\"embed-alignment-center\" class=\"btn btn-last\"><i class=\"embed-align-center\"></i>Center</label>\n        <input type=\"radio\" id=\"embed-alignment-center\" name=\"align\" value=\"center\">\n      </div>\n      <p class=\"help-block\">Control position and text wrapping on the page.</p>\n    </div>\n\n  </form>\n\n  <div class=\"embed-preview\"></div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"embedded_pic_twitter": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet-media\">\n  <div class=\"media-instance-container\">\n    <div class=\"twimg\">\n      <a target=\"_blank\" href=\"");t.b(t.v(t.f("expanded_url",c,p,0)));t.b("\">\n        <img src=\"");t.b(t.v(t.f("media_url_https",c,p,0)));t.b("\">\n      </a>\n    </div>\n    <span class=\"flag-container\">\n      <button type=\"button\" class=\"flaggable btn-link\">\n        Flag this media\n      </button>\n      <span class=\"flagged hidden\">\n        Flagged\n        <span>\n          <a target=\"_blank\" href=\"//support.twitter.com/articles/20069937\">\n            (learn more)\n          </a>\n        </span>\n      </span>\n    </span>\n    <div class='media-attribution'>\n      <span>powered by</span> <img src=\"/phoenix/img/turkey-icon.png\"/> <a target='_blank' data-media-type='Twimg' class='media-attribution-link' href='http://photobucket.com/twitter'>Photobucket</a>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"embedded_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet embedded-tweet\" data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-item-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-screen-name='");if(t.s(t.f("user",c,p,1),c,p,0,106,121,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("'>\n  <div class=\"tweet-row\">\n");if(t.s(t.f("user",c,p,1),c,p,0,172,205,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("tweet_user_block0",c,p,"      "));});c.pop();}t.b("  </div>\n  <div class=\"tweet-content\">\n    <div class=\"tweet-row\">\n      ");t.b(t.rp("latest_tweet_timestamp1",c,p,""));t.b(":\n");if(t.s(t.f("was_retweeted",c,p,1),c,p,0,341,435,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"retweet-icon\"></span>\n      ");t.b(t.t(t.f("retweet_source_screen_name_link",c,p,0)));t.b("\n" + i);});c.pop();}t.b("      &#32;");t.b(t.rp("tweet_text2",c,p,""));t.b("\n" + i);t.b("    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {"tweet_user_block0": {name:"tweet_user_block"},"latest_tweet_timestamp1": {name:"latest_tweet_timestamp"},"tweet_text2": {name:"tweet_text"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"empty_home": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"empty-home empty-stream\">\n\n  <h2>This is your homepage @<strong>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</strong></h2>\n\n  <p>It's looking mighty bare right now. When you follow people their updates will appear here. So go <a href=\"");t.b(t.v(t.f("who_to_follow_interests_path",c,p,0)));t.b("\">find some interesting people</a> to follow!</p>\n\n  <div class=\"tweeting\">\n    <p>\n      You can tell the world <strong>what's happening</strong> in the box above.\n    </p>\n    <p class=\"protection\">\n");if(t.s(t.f("protected_account",c,p,1),c,p,0,479,679,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span>Your Tweets are protected and only available to your followers.</span>\n        <span>You can make your Tweets public on your  <a href=\"");t.b(t.v(t.f("settings_path",c,p,0)));t.b("\">account page</a>.</span>\n");});c.pop();}if(!t.s(t.f("protected_account",c,p,1),c,p,1,0,0,"")){t.b("        <span>Note that your Tweets will be available publicly.</span>\n        <span>You can make your Tweets private on your <a href=\"");t.b(t.v(t.f("settings_path",c,p,0)));t.b("\">account page</a>.</span>\n");};t.b("    </p>\n  </div>\n\n</div>\n\n\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"empty_timeline_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Your timeline is currently empty. Follow people and topics you find interesting to see their Tweets in your timeline.");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"empty_timeline_recommendations_module_followers": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"clearfix js-recommended-followers\">\n");if(t.s(t.f("recommendations",c,p,1),c,p,0,69,100,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("big_avatar_list_item0",c,p,"  "));});c.pop();}t.b("</ul>");return t.fl(); }, partials: {"big_avatar_list_item0": {name:"big_avatar_list_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"empty_timeline_recommendations_module_short": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module big-avatar-list empty-timeline js-empty-timeline\">\n  <div class=\"empty-timeline-header\">\n    <a href=\"#\" class=\"dismiss js-done disabled\"><i class=\"close\"></i></a>\n    <h2>");t.b(t.rp("empty_timeline_title0",c,p,""));t.b("</h2>\n    <small><a href=\"#\" class=\"js-refresh-suggestions\">Refresh</a> · <a href=\"");t.b(t.v(t.f("who_to_follow_suggestions_path",c,p,0)));t.b("\">View all</a></small>\n  </div>\n  <div data-section-id=\"wtf\" class=\"empty-timeline-footer\">\n");t.b(t.rp("empty_timeline_recommendations_module_followers1",c,p,"    "));t.b("  </div>\n</div>");return t.fl(); }, partials: {"empty_timeline_title0": {name:"empty_timeline_title"},"empty_timeline_recommendations_module_followers1": {name:"empty_timeline_recommendations_module_followers"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"empty_timeline_subtitle": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("following",c,p,1),c,p,0,14,394,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  \n");if(t.s(t.f("follow_event",c,p,1),c,p,0,37,376,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    ");if(t.s(t.f("one",c,p,1),c,p,0,50,97,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Follow more people to make Twitter even better.");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("two",c,p,1),c,p,0,118,162,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("You’re on your way to a great home timeline.");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("several",c,p,1),c,p,0,187,236,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("See what’s happening in the world, as it happens.");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("almost",c,p,1),c,p,0,264,295,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Watch life unfold in real time.");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("done",c,p,1),c,p,0,320,364,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Keep following people everywhere on Twitter.");});c.pop();}t.b("\n" + i);});c.pop();}});c.pop();}if(!t.s(t.f("following",c,p,1),c,p,1,0,0,"")){t.b("  Your timeline is currently empty. Follow people and topics you find interesting to see their Tweets in your timeline.\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"empty_timeline_title": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("following",c,p,1),c,p,0,14,442,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  \n  ");if(!t.s(t.f("follow_event",c,p,1),c,p,1,0,0,"")){t.b("Follow more people to make Twitter even better.");};t.b("\n" + i);t.b("  \n");if(t.s(t.f("follow_event",c,p,1),c,p,0,124,424,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    ");if(t.s(t.f("one",c,p,1),c,p,0,137,155,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Victory! That’s 1.");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("two",c,p,1),c,p,0,176,202,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Congratulations! That’s 2.");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("several",c,p,1),c,p,0,227,261,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Excellent! You’re making progress.");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("almost",c,p,1),c,p,0,289,331,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Good work! You’ve almost reached ");t.b(t.v(t.f("goal",c,p,0)));t.b(".");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("done",c,p,1),c,p,0,356,412,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Yee-haw! That’s ");t.b(t.v(t.f("count",c,p,0)));t.b(" follows. Now you’re on a roll.");});c.pop();}t.b("\n" + i);});c.pop();}});c.pop();}if(!t.s(t.f("following",c,p,1),c,p,1,0,0,"")){t.b("  You don’t have any Tweets to read\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"hashtag": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("events/hashtag_header0",c,p,""));t.b("<div class=\"dashboard\">\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,67,212,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("new_user",c,p,1),c,p,1,0,0,"")){t.b(t.rp("events/hashtag_tweetbox1",c,p,"      "));};if(t.s(t.f("new_user",c,p,1),c,p,0,156,196,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("events/hashtag_new_user2",c,p,"      "));});c.pop();}});c.pop();}t.b(t.rp("events/top_people3",c,p,"  "));t.b(t.rp("footer4",c,p,"  "));t.b("</div>\n<div class=\"content-main\" id=\"timeline\" data-pixel-tracking-id=\"");t.b(t.v(t.f("pixel_tracking_id",c,p,0)));t.b("\">\n  <div class=\"content-header\">\n    <div class=\"header-inner\">\n      <small class=\"view-original-search\">\n        <a href=\"");t.b(t.v(t.f("view_search_url",c,p,0)));t.b("\">View all Tweets</a>\n      </small>\n      <h2 class=\"js-timeline-title\">Tweets</h2>\n    </div>\n  </div>\n");t.b(t.rp("timeline5",c,p,"  "));t.b("</div>");return t.fl(); }, partials: {"events/hashtag_header0": {name:"events/hashtag_header"},"events/hashtag_tweetbox1": {name:"events/hashtag_tweetbox"},"events/hashtag_new_user2": {name:"events/hashtag_new_user"},"events/top_people3": {name:"events/top_people"},"footer4": {name:"footer"},"timeline5": {name:"timeline"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"hashtag_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("user_view",c,p,1),c,p,0,14,686,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div>\n  <div class=\"module header-module hashtag-landing-header minified\" data-component-term=\"search_header\">\n    <div class=\"flex-module\">\n      <div class=\"flex-module-inner\">\n        <h1 class=\"hashtag-landing-title\">");t.b(t.v(t.f("name",c,p,0)));t.b("</h1>\n        <p class=\"hashtag-landing-subline\">");t.b(t.v(t.f("description",c,p,0)));t.b("</p>\n");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("          <a href=\"/signup?event=");t.b(t.v(t.f("key",c,p,0)));t.b("\" class=\"btn signup-btn\">Sign up to get closer to ");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n");};t.b("      </div>\n    </div>\n\n    <img class=\"hero-graphic\" src=\"");if(t.s(t.f("user_view",c,p,1),c,p,0,536,561,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("raw_profile_image_url",c,p,0)));});c.pop();}t.b("\" alt=\"\">\n\n");if(t.s(t.f("photo_strip",c,p,1),c,p,0,606,652,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("media/events_media_thumbnails0",c,p,"      "));});c.pop();}t.b("\n" + i);t.b("  </div>\n</div>\n");});c.pop();}return t.fl(); }, partials: {"media/events_media_thumbnails0": {name:"media/events_media_thumbnails"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"hashtag_new_user": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module component promptbird finish-signup-prompt\" data-component-term=\"find_people\">\n  <h2>Get started on Twitter</h2>\n  <p>Find people to follow to keep up to date with the things you care about.</p>\n  <a href=\"");t.b(t.v(t.f("welcome_path",c,p,0)));t.b("\" class=\"btn primary-btn\">Find people to follow</a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"hashtag_tweetbox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("user_view",c,p,1),c,p,0,14,277,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"module component\" data-component-term=\"profile_tweetbox\">\n  <div class=\"profile-tweet-box flex-module\" data-hashtag=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n    <div class=\"tweet-box-title\">\n      <h2>Tweet about ");t.b(t.v(t.f("name",c,p,0)));t.b("</h2>\n    </div>\n");t.b(t.rp("swift_tweet_box0",c,p,"    "));t.b("  </div>\n</div>\n");});c.pop();}return t.fl(); }, partials: {"swift_tweet_box0": {name:"swift_tweet_box"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"top_people": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module component\" id=\"top-people\">\n  <div class=\"flex-module\">\n    <div class=\"flex-module-header\">\n      <h3>Top people</h3>\n    </div>\n    <div class=\"flex-module-inner\">\n      <ul class=\"avatar-cluster\">\n");if(t.s(t.f("top_people",c,p,1),c,p,0,242,541,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <li>\n            <a href=\"/#!/");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"js-user-tipsy show-popup-with-id\">\n              <img class=\"avatar size48 js-tooltip\" src=\"");t.b(t.v(t.f("profile_image_url_https",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n            </a>\n          </li>\n");});c.pop();}t.b("      </ul>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"geo_with_map": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("show_map",c,p,1),c,p,0,13,645,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"geo-embedded-map\">\n");if(t.s(t.f("js_map",c,p,1),c,p,0,62,175,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div style=\"width:");t.b(t.v(t.f("map_width",c,p,0)));t.b("px; height:");t.b(t.v(t.f("map_height",c,p,0)));t.b("px;\" data-map=\"");t.b(t.v(t.f("js_map_data",c,p,0)));t.b("\">\n      </div>\n");});c.pop();}if(!t.s(t.f("js_map",c,p,1),c,p,1,0,0,"")){t.b("      <a href=\"");t.b(t.t(t.f("full_page_map_url",c,p,0)));t.b("\" target=\"_blank\">\n        <img width=\"");t.b(t.v(t.f("map_width",c,p,0)));t.b("\" height=\"");t.b(t.v(t.f("map_height",c,p,0)));t.b("\" src=\"");t.b(t.t(t.f("static_map_url",c,p,0)));t.b("\">\n      </a>\n");};t.b("  </div>\n");if(t.s(t.f("has_place",c,p,1),c,p,0,399,566,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"geo-place-name\">\n");t.b(t.rp("expanded/link_to_map0",c,p,"      "));t.b("    </div>\n    <div>");t.b(t.v(t.f("street_address",c,p,0)));t.b("</div>\n    <div>");t.b(t.v(t.f("container",c,p,0)));t.b("</div>\n    <div>");t.b(t.v(t.f("phone",c,p,0)));t.b("</div>\n");});c.pop();}if(!t.s(t.f("has_place",c,p,1),c,p,1,0,0,"")){t.b(t.rp("expanded/link_to_map1",c,p,"    "));};});c.pop();}if(!t.s(t.f("show_map",c,p,1),c,p,1,0,0,"")){t.b(t.rp("expanded/link_to_map2",c,p,"  "));};return t.fl(); }, partials: {"expanded/link_to_map0": {name:"expanded/link_to_map"},"expanded/link_to_map1": {name:"expanded/link_to_map"},"expanded/link_to_map2": {name:"expanded/link_to_map"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"link_to_map": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("has_place",c,p,1),c,p,0,14,182,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  ");if(t.s(t.f("full_page_map_url",c,p,1),c,p,0,39,89,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<a href=\"");t.b(t.t(t.f("full_page_map_url",c,p,0)));t.b("\" target=\"_blank\">");});c.pop();}t.b("\n" + i);t.b("     from ");t.b(t.v(t.f("name",c,p,0)));t.b("\n" + i);t.b("  ");if(t.s(t.f("full_page_map_url",c,p,1),c,p,0,155,159,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</a>");});c.pop();}t.b("\n" + i);});c.pop();}if(!t.s(t.f("has_place",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("full_page_map_url",c,p,1),c,p,0,236,333,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a href=\"");t.b(t.t(t.f("full_page_map_url",c,p,0)));t.b("\" target=\"_blank\">\n      View larger map  &rarr;\n    </a>\n");});c.pop();}};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"face_pile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("users",c,p,1),c,p,0,10,38,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_avatar_link_240",c,p,"  "));});c.pop();}return t.fl(); }, partials: {"user_avatar_link_240": {name:"user_avatar_link_24"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"facebook_token_iframe": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<!DOCTYPE html>\n<html lang=\"");t.b(t.v(t.f("twitter_locale",c,p,0)));t.b("\" xmlns=\"http://www.w3.org/1999/html\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta charset=\"utf-8\">\n    <script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\"></script>\n    <script>\n      window.facebookFrameConfig = ");t.b(t.t(t.f("config",c,p,0)));t.b(";\n      $.ajaxSetup(facebookFrameConfig.ajaxSetup);\n    </script>\n    \n    <script src=\"//connect.facebook.net/");t.b(t.v(t.f("language_tag",c,p,0)));t.b("/all.js\"></script>\n  </head>\n  <body>\n    \n    <div id=\"fb-root\"></div>\n    \n    <script>");t.b(t.t(t.f("facebook_token_js",c,p,0)));t.b("</script>\n  </body>\n</html>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"facet_media": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"list-link js-facets\">\n  <a href=\"");t.b(t.v(t.f("view_all_href",c,p,0)));t.b("\" class=\"list-action js-view-all\">\n    ");t.b(t.v(t.f("title",c,p,0)));t.b(" ");if(t.s(t.f("count",c,p,1),c,p,0,120,156,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"count\">");t.b(t.v(t.f("count",c,p,0)));t.b("</span>");});c.pop();}t.b(" <i class=\"chev-right\"></i>\n    <div class=\"media-row media-videos js-media-images\"></div>\n  </a>\n</li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"facets_media_not_displayed": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"facets-media-not-displayed list-link\">\n <div>\n   <a class=\"header\">Popular images &amp; videos</a>\n   <p class=\"not-displayed-text metadata\">These results include media shared by people you don&#8217;t follow.</p>\n   <a class=\"btn small display-this-media\">\n     Display media\n   </a>\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,313,412,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("     &middot;\n     <a href=\"#\" class=\"always-display-media\">Always display media like this</a>\n");});c.pop();}t.b(" </div>\n</li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"firefox_download": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas\">\n<div class=\"firefox-header clearfix\">\n\n");if(t.s(t.f("firefox_download",c,p,1),c,p,0,88,904,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"firefox-intro\">\n      <h1><strong>Firefox</strong> with Twitter</h1>\n      <h2>Mozilla Firefox with Twitter instantly connects you to what’s happening in the world. Search people and topics on Twitter using <span>@</span> and <span>#</span> from the address bar.</h2>\n      <div class=\"firefox-download\">\n        <a class=\"btn signup-btn large\" href=\"");t.b(t.t(t.f("download_url",c,p,0)));t.b("\" target=\"_blank\">");if(t.s(t.f("product_addon",c,p,1),c,p,0,510,540,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Get Twitter Address Bar Search");});c.pop();}if(t.s(t.f("product_bundle",c,p,1),c,p,0,577,601,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Get Firefox with Twitter");});c.pop();}t.b("</a>\n        <div class=\"firefox-actions\">\n          <a href=\"");t.b(t.v(t.f("tweet_button_url",c,p,0)));t.b("\" class=\"firefox-tweet-button\" ></a>\n          <a href=\"");t.b(t.v(t.f("twirefox_support_path",c,p,0)));t.b("\" target=\"_blank\">Learn more &raquo;</a>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"firefox-brand\"></div>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("firefox_welcome",c,p,1),c,p,0,949,1226,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"firefox-intro firefox-installed\">\n      <div class=\"firefox-brand\"></div>\n      <h1>Search Twitter with Firefox. Stay connected.</h1>\n      <h2>Search people and topics on Twitter using <span>@</span> and <span>#</span> from the address bar.</h2>\n    </div>\n");});c.pop();}t.b("\n" + i);t.b("</div>\n\n<table class=\"mobile-footer firefox-footer\" cellpadding=\"0\" cellspacing=\"0\">\n  <tbody>\n    <tr>\n      <td>\n        <div class=\"screenshot\">\n          <div class=\"screenshot-a\"></div>\n          <h4>Instantly connect</h4>\n          <p>Search people and topics on Twitter using @ and # from the address bar.</p>\n        </div>\n      </td>\n      <td>\n        <div class=\"screenshot\">\n          <div class=\"screenshot-b\"></div>\n          <h4>Stay informed and updated</h4>\n          <p>The pinned Twitter app tab lights up when new Tweets arrive.</p>\n        </div>\n      </td>\n      <td class=\"last\">\n        <div class=\"screenshot\">\n          <div class=\"screenshot-c\"></div>\n          <h4>Search Twitter</h4>\n          <p>Switch to Twitter Search by clicking the drop down arrow in the search box.</p>\n        </div>\n      </td>\n    </tr>\n  <tbody>\n</table>\n\n");if(t.s(t.f("firefox_welcome",c,p,1),c,p,0,2133,2363,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"firefox-footer\">\n    <div class=\"firefox-actions\">\n      <a href=\"");t.b(t.v(t.f("tweet_button_url",c,p,0)));t.b("\" class=\"firefox-tweet-button\"></a>\n      <a href=\"");t.b(t.v(t.f("twirefox_support_path",c,p,0)));t.b("\" target=\"_blank\">Need help?</a>\n    </div>\n  </div>\n");});c.pop();}t.b("\n" + i);t.b("</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"first_time_turkey": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div ");if(t.s(t.f("container_id",c,p,1),c,p,0,22,44,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("id=\"");t.b(t.v(t.f("container_id",c,p,0)));t.b("\" ");});c.pop();}t.b("class=\"twttr-dialog-container\" style=\"visibility: hidden;\">\n  <div class=\"twttr-dialog\">\n    <div class=\"twttr-dialog-inside\">\n      <div class=\"twttr-dialog-body clearfix\">\n        <div class=\"twttr-dialog-content twttr-dialog-first-turkey\">\n          <div>\n            <h2 class=\"first-time\">Share an image on Twitter</h2>\n            <p class=\"first-time-text\">\n              Now you can upload and share images, right from Twitter! Just click the camera icon to add an image to your Tweet.\n            </p>\n            <div class=\"turkey-container first-time\">\n              <div class=\"callout1\">1. Click the camera icon to add</div>\n              <div class=\"callout2\">2. Preview before sharing</div>\n              <div class=\"turkey\"><img src=\"/phoenix/img/first_photo_promo.png\"/></div>\n            </div>\n            <div class=\"first-turkey-actions\">\n              <span class=\"button ok-thanks\"><strong>OK, thanks!</strong></span>\n              <a class=\"learn-more\" target=\"_blank\" href=\"");t.b(t.v(t.f("turkey_support_path",c,p,0)));t.b("\">Learn more</a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"flex_module": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module ");t.b(t.v(t.f("class_name",c,p,0)));t.b("\">\n  <div class=\"flex-module js-items-container\"></div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"flex_module_link": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"");t.b(t.v(t.f("route",c,p,0)));t.b("\">");t.b(t.v(t.f("title",c,p,0)));t.b("</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"flex_module_more_links": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<p class=\"more-links js-more-links\">\n");if(t.s(t.f("links",c,p,1),c,p,0,49,113,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    ");t.b(t.rp("flex_module_link0",c,p,""));t.b(" ");if(!t.s(t.f("is_last",c,p,1),c,p,1,0,0,"")){t.b(" &middot; ");};t.b("\n" + i);});c.pop();}t.b("</p>");return t.fl(); }, partials: {"flex_module_link0": {name:"flex_module_link"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"flex_module_title": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<h4 class=\"flex-module-title\">");t.b(t.v(t.f("title",c,p,0)));t.b(" ");if(t.s(t.f("view_all_route",c,p,1),c,p,0,59,124,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<small>&middot; <a href=\"");t.b(t.v(t.f("view_all_route",c,p,0)));t.b("\">View all</a></small>");});c.pop();}t.b("</h4>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"follow_link": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"#\" class=\"user-follow-link js-action-follow js-link follow-action\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");if(t.s(t.f("protected",c,p,1),c,p,0,112,139,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("title=\"Send follow request\"");});c.pop();}t.b(">Follow</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"follow_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<h3>");t.b(t.v(t.f("header",c,p,0)));t.b("</h3>\n");if(t.s(t.f("follow_list",c,p,1),c,p,0,36,57,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  ");t.b(t.t(t.f("follow_list",c,p,0)));t.b("\n" + i);});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"follow_request_sent_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"pending-request js-action-unfollow js-button\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n  <span>pending</span>\n  <a class='follow-request-cancel-button' href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">(cancel)</a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"follow_request_sent_link": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href='#' class=\"cancel-request-link js-action-unfollow js-link\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" title=\"Cancel follow request\">Cancel</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"followers_count": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"followers-count\">\n  \n    ");if(t.s(t.f("followers_count_one",c,p,1),c,p,0,61,99,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("followers_count_commaized",c,p,0)));t.b(" follower");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("followers_count_other",c,p,1),c,p,0,154,193,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("followers_count_commaized",c,p,0)));t.b(" followers");});c.pop();}t.b("\n" + i);t.b("  \n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"followers_list_small": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"your-activity new-followers-activity\">\n  <h2>\n    <a href=\"");t.b(t.v(t.f("user_followers_path",c,p,0)));t.b("\" class=\"title-link\"><span class='dashboard-component-title'>Followers</span> <span class='user-stat-link'>");t.b(t.v(t.f("followers_count_commaized",c,p,0)));t.b("</span></a>\n  </h2>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"followers_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"main-content\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,53,710,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("profile_user",c,p,1),c,p,0,75,666,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"profile-subpage-header\">\n      <div class=\"upper-nav\" >\n        <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">&larr; @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("&rsquo;s profile</a>\n      </div>\n      <div class=\"profile-subpage-title\">\n        <div class=\"profile-subpage-title-copy\">\n            <h1>");t.b(t.t(t.f("followers_header_string",c,p,0)));t.b("</h1>\n            <h2>Here&rsquo;s more about them.</h2>\n        </div>\n      </div>\n\n      <ul class=\"stream-tabs\">\n        <li class=\"stream-tab stream-tab-followers active\">\n          <a class=\"tab-text\" href=\"");t.b(t.v(t.f("user_followers_path",c,p,0)));t.b("\">People</a>\n        </li>\n      </ul>\n   </div>\n\n");});c.pop();}t.b(t.rp("stream_manager0",c,p,"    "));});c.pop();}t.b("</div>\n");t.b(t.rp("profile_subpage_dashboard1",c,p,""));t.b(t.rp("details_pane_container2",c,p,""));return t.fl(); }, partials: {"stream_manager0": {name:"stream_manager"},"profile_subpage_dashboard1": {name:"profile_subpage_dashboard"},"details_pane_container2": {name:"details_pane_container"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"followers_stream_view_toggler": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("stream_view_toggler0",c,p,""));return t.fl(); }, partials: {"stream_view_toggler0": {name:"stream_view_toggler"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"followers_subtabs": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class=\"subtabs\">\n  <a ");if(t.s(t.f("active_subtab_all",c,p,1),c,p,0,50,65,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" class='active'");});c.pop();}t.b(" href='");t.b(t.v(t.f("user_followers_path",c,p,0)));t.b("'>All</a>\n    &middot;\n  <a ");if(t.s(t.f("active_subtab_followers_you_follow",c,p,1),c,p,0,184,199,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" class='active'");});c.pop();}t.b(" href='");t.b(t.v(t.f("followers_you_follow_path",c,p,0)));t.b("'>Followers you follow</a>\n</span>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"following_limit_reached_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("It looks like you've hit a following limit.\n<a href=\"");t.b(t.v(t.f("follow_limit_reached_learn_more_path",c,p,0)));t.b("\" target=\"_blank\" class=\"learn-more\">Learn more</a>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"following_list_full": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"your-activity following-activity-full\">\n  <h2>\n    <span class='dashboard-component-title'>Following</span>\n    <span class=\"dot\">&middot;</span>\n    <a href=\"");t.b(t.v(t.f("user_following_path",c,p,0)));t.b("\" class=\"view-all\">view all</a>\n  </h2>\n");if(t.s(t.f("show_wtf_links",c,p,1),c,p,0,294,380,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("following_nobody",c,p,1),c,p,0,320,356,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("who_to_follow_links0",c,p,"      "));});c.pop();}});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"who_to_follow_links0": {name:"who_to_follow_links"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"following_list_small": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"your-activity following-activity\">\n  <h2>\n    <a href=\"");t.b(t.v(t.f("user_following_path",c,p,0)));t.b("\" class=\"title-link\"><span class='dashboard-component-title'>\n      Following</span> <span class='user-stat-link'>");t.b(t.v(t.f("friends_count_commaized",c,p,0)));t.b("</span></a>\n  </h2>\n");if(t.s(t.f("show_wtf_links",c,p,1),c,p,0,311,397,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("following_nobody",c,p,1),c,p,0,337,373,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("who_to_follow_links0",c,p,"      "));});c.pop();}});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"who_to_follow_links0": {name:"who_to_follow_links"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"following_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"main-content\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,53,972,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("profile_user",c,p,1),c,p,0,75,928,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"profile-subpage-header\">\n      <div class=\"upper-nav\" >\n        <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">&larr; @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("&rsquo;s profile</a>\n      </div>\n      <div class=\"profile-subpage-title\">\n        <div class=\"profile-subpage-title-copy\">\n            <h1>");t.b(t.t(t.f("following_header_string",c,p,0)));t.b("</h1>\n            <h2 id=\"following-page-context\"></h2>\n        </div>\n      </div>\n\n      <ul class=\"stream-tabs\">\n        <li class=\"stream-tab stream-tab-users");if(t.s(t.f("active_tab_users",c,p,1),c,p,0,559,566,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" active");});c.pop();}t.b("\">\n          <a class=\"tab-text\" href=\"");t.b(t.v(t.f("user_following_path",c,p,0)));t.b("\">People: ");t.b(t.v(t.f("following_count_commaized",c,p,0)));t.b("</a>\n        </li>\n        <li class=\"stream-tab stream-tab-tweets");if(t.s(t.f("active_tab_tweets",c,p,1),c,p,0,776,783,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" active");});c.pop();}t.b("\">\n          <a class=\"tab-text\" href=\"");t.b(t.v(t.f("user_following_tweets_path",c,p,0)));t.b("\">Tweets</a>\n        </li>\n      </ul>\n   </div>\n\n");});c.pop();}t.b(t.rp("stream_manager0",c,p,"    "));});c.pop();}t.b("</div>\n");t.b(t.rp("profile_subpage_dashboard1",c,p,""));t.b(t.rp("details_pane_container2",c,p,""));return t.fl(); }, partials: {"stream_manager0": {name:"stream_manager"},"profile_subpage_dashboard1": {name:"profile_subpage_dashboard"},"details_pane_container2": {name:"details_pane_container"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"following_page_signup_call_out": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"signup-call-out\">\n  <h1>\n    Ready to make Twitter your own?\n  </h1>\n  <h2>\n    Follow your interests to instantly connect to what&rsquo;s most meaningful to you.\n  </h2>\n");t.b(t.rp("signup_button0",c,p,"  "));t.b("</div>\n");return t.fl(); }, partials: {"signup_button0": {name:"signup_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"following_subtabs": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class=\"subtabs\">\n  <a ");if(t.s(t.f("active_subtab_all",c,p,1),c,p,0,50,65,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" class='active'");});c.pop();}t.b(" href='");t.b(t.v(t.f("user_following_path",c,p,0)));t.b("'>All</a>\n    &middot;\n  <a ");if(t.s(t.f("active_subtab_you_both_follow",c,p,1),c,p,0,179,194,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" class='active'");});c.pop();}t.b(" href='");t.b(t.v(t.f("you_both_follow_path",c,p,0)));t.b("'>You both follow</a>\n</span>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"following_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("stream_tweet0",c,p,""));return t.fl(); }, partials: {"stream_tweet0": {name:"stream_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"footer": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module site-footer ");if(t.s(t.f("is_slim",c,p,1),c,p,0,43,59,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("slim-site-footer");});c.pop();}t.b("\">\n  <div class=\"flex-module\">\n    <div class=\"flex-module-inner js-items-container\">\n      <ul class=\"clearfix\">\n        <li class=\"copyright\">&copy; ");t.b(t.v(t.f("year",c,p,0)));t.b(" Twitter</li>\n        <li><a href=\"");t.b(t.v(t.f("about_path",c,p,0)));t.b("\">About</a></li>\n        <li><a href=\"");t.b(t.v(t.f("support_path",c,p,0)));t.b("\">Help</a></li>\n");if(!t.s(t.f("is_slim",c,p,1),c,p,1,0,0,"")){t.b("        <li><a href=\"");t.b(t.v(t.f("tos_path",c,p,0)));t.b("\">Terms</a></li>\n        <li><a href=\"");t.b(t.v(t.f("privacy_path",c,p,0)));t.b("\">Privacy</a></li>\n        <li><a href=\"");t.b(t.v(t.f("blog_path",c,p,0)));t.b("\">Blog</a></li>\n        <li><a href=\"");t.b(t.v(t.f("status_path",c,p,0)));t.b("\">Status</a></li>\n        <li><a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("\">Apps</a></li>\n        <li><a href=\"");t.b(t.v(t.f("resources_path",c,p,0)));t.b("\">Resources</a></li>\n        <li><a href=\"");t.b(t.v(t.f("jobs_path",c,p,0)));t.b("\">Jobs</a></li>\n        <li><a href=\"");t.b(t.v(t.f("advertisers_path",c,p,0)));t.b("\">Advertisers</a></li>\n        <li><a href=\"");t.b(t.v(t.f("businesses_path",c,p,0)));t.b("\">Businesses</a></li>\n        <li><a href=\"");t.b(t.v(t.f("partnerships_path",c,p,0)));t.b("\">Media</a></li>\n        <li><a href=\"");t.b(t.v(t.f("developers_path",c,p,0)));t.b("\">Developers</a></li>\n");};t.b("      </ul>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"frame_busting": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<script>\nfunction bust () {\n  document.write = \"\";\n  window.top.location = window.self.location;\n  setTimeout(function() {\n    document.body.innerHTML = '';\n    }, 0);\n  window.self.onload = function(evt) {\n    document.body.innerHTML = '';\n  };\n}\nif (window.top !== window.self) { // are you trying to put self in an iframe?\n  try {\n    if (window.top.location.host) { // this is illegal to access unless you share a non-spoofable document domain\n      // fun times\n    } else {\n      bust(); // chrome executes this\n    }\n  } catch (ex) {\n    bust(); // everyone executes this\n  }\n}\n</script>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"front_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"leftside\">\n  <h1>Twitter</h1>\n  <h2>Follow your interests</h2>\n  <p>Instant updates from your friends, industry experts, favorite celebrities, and what&#8217;s happening around the world.</p>\n</div>\n\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,236,525,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <noscript>\n    <div class=\"warning\">\n      <strong>Twitter.com makes heavy use of JavaScript.</strong>\n      <em>If you cannot enable it in your browser's preferences, you may have a better experience on our <a href=\"http://m.twitter.com\">mobile site</a>.</em>\n    </div>\n  </noscript>\n");});c.pop();}t.b("\n" + i);t.b("<div class=\"rightside\">\n\n  <div class=\"front-signin js-front-signin\">\n    <form action=\"");t.b(t.v(t.f("sessions_path",c,p,0)));t.b("\" class=\"signin\" method=\"post\">\n      <fieldset class=\"textbox\">\n        <div class=\"holding username\">\n          <input type=\"text\" name=\"session[username_or_email]\" title=\"Username or email\" autocomplete=\"on\" />\n          <span class=\"holder\">Username</span>\n        </div>\n        <div class=\"holding password\">\n          <input type=\"password\" name=\"session[password]\" title=\"Password\" />\n          <span class=\"holder\">Password</span>\n        </div>\n      </fieldset>\n");t.b(t.rp("signin_form_subchck0",c,p,"      "));t.b("      <p>\n        <a class=\"forgot\" href=\"");t.b(t.v(t.f("resend_password_path",c,p,0)));t.b("\">Forgot it?</a>\n      </p>\n    </form>\n  </div>\n\n\n  <div class=\"front-signup js-front-signup\">\n    <h3>New to Twitter? <em>Join today!</em></h3>\n");t.b(t.rp("partial_signup_form1",c,p,"    "));t.b("  </div>\n</div>\n\n<div class=\"bottompart\">\n");t.b(t.rp("generic_footer2",c,p,"  "));t.b("</div>\n");return t.fl(); }, partials: {"signin_form_subchck0": {name:"signin_form_subchck"},"partial_signup_form1": {name:"partial_signup_form"},"generic_footer2": {name:"generic_footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"full_name": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"full-name\">\n  <h1>");t.b(t.v(t.f("name",c,p,0)));t.b("</h1>\n");if(t.s(t.f("verified",c,p,1),c,p,0,59,127,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span class=\"verified-icon\" title=\"Verified Account\"></span>\n");});c.pop();}if(t.s(t.f("protected",c,p,1),c,p,0,157,201,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span class=\"protected-icon\"></span>\n");});c.pop();}t.b("</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"full_page_trends": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"full-page-trends\">\n  <div class=\"trends-header\">\n    <div class=\"trends-header-gradient\">\n      <div class=\"trends-header-map\">\n        <h2 class=\"trends-header-label\">\n          Trends:\n          <span class=\"trends-inline-controls\">\n            <span class=\"trend-location js-trend-location\">\n              Worldwide\n              </span>\n            <span class='trend-toggle js-trend-toggle'>\n              <a href='#' class=\"trend-toggle-link\">\n              Change location\n              </a>\n            </span>\n          </span>\n        </h2>\n        <form action=\"");t.b(t.v(t.f("signup_path",c,p,0)));t.b("\" class=\"signup signup-btn trends-description-container\" method=\"get\">\n          <div class=\"trends-description\">\n            Topics and #hashtags people are talking about now.\n          </div>\n");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("            <input class=\"promotional\" type=\"submit\" value=\"Sign up &raquo;\" />\n");};t.b("        </form>\n      </div>\n    </div>\n  </div>\n  <ul class='trends js-trends'></ul>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_image_onebox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"");t.b(t.v(t.f("type",c,p,0)));t.b(" card\">\n  <div class=\"card-body\">\n    <div class=\"onebox-header\">\n      <h3>Top images</h3>\n      <small class=\"view-all\"> &middot; <a href=\"#\">View all</a></small>\n    </div>\n    <a href=\"#\"><img src=\"http://www.placehold.it/154x154\" alt=\"\"></a>\n    <a href=\"#\"><img src=\"http://www.placehold.it/154x154\" alt=\"\"></a>\n    <a href=\"#\"><img src=\"http://www.placehold.it/154x154\" alt=\"\"></a>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"card_video_onebox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"");t.b(t.v(t.f("type",c,p,0)));t.b(" card\">\n  <div class=\"card-body\">\n    <div class=\"onebox-header\">\n      <h3>Top videos</h3>\n      <small class=\"view-all\"> &middot; <a href=\"#\">View all</a></small>\n    </div>\n    <a class=\"onebox-video\" href=\"#\">\n        <img src=\"http://www.placehold.it/154x115\" alt=\"\">\n        <i class=\"play-large\"></i>\n    </a>\n    <a class=\"onebox-video\" href=\"#\">\n        <img src=\"http://www.placehold.it/154x115\" alt=\"\">\n        <i class=\"play-large\"></i>\n    </a>\n    <a class=\"onebox-video\" href=\"#\">\n        <img src=\"http://www.placehold.it/154x115\" alt=\"\">\n        <i class=\"play-large\"></i>\n    </a>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"follow_profile_card_large": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(" <div class=\"module follow-card\">\n  <img src=\"http://placehold.it/300x300\" class=\"size300\" />\n  <div class=\"flex-module\">\n   <div class=\"flex-module-header\">\n      <h1>Full Name</h1>\n      <h2>@username</h2>\n      <p class=\"location\">San Francisco, CA</p>\n    </div>\n    <div class=\"full-bio\">\n      <p class=\"bio\">Nulla vitae elit libero, a pharetra augue. Maecenas faucibus mollis interdum. Cras justo odio, dapibus ac facilisis in, egestas eget quame faucibus mollis int.</p>\n      <p class=\"bio2\">Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justos.</p>\n      <ul class=\"elsewhere\">\n        <li class=\"flickr\"><a href=\"#\">Flickr</a></li>\n        <li class=\"facebook\"><a href=\"#\">Facebook</a></li>\n        <li class=\"formspring\"><a href=\"#\">Formspring</a></li>\n        <li class=\"yelp\"><a href=\"#\">Yelp</a></li>\n        <li class=\"youtube\"><a href=\"#\">Youtube</a></li>\n        <li class=\"nikeplus\"><a href=\"#\">Nike+</a></li>\n        <li class=\"ebay\"><a href=\"#\">eBay</a></li>\n      </ul>\n      <p class=\"url\"><a href=\"#\">something.site.com</a></p>\n    </div>\n  </div>\n  <div class=\"tweet-box\">\n    <input type=\"text\" placeholder=\"Tweet to @username\" />\n  </div>\n  <div class=\"follow-bar\">\n");t.b(t.rp("combo_follow_button0",c,p,"    "));t.b("    <span class=\"user-toggles\">\n      <a href=\"#\" class=\"toggle-retweets active\"><i class=\"toggle-retweets\"></i> Toggle Retweets</a>\n      <a href=\"#\" class=\"toggle-sms\"><i class=\"toggle-sms\"></i> Toggle SMS</a>\n    </span>\n  </div>\n</div>\n");return t.fl(); }, partials: {"combo_follow_button0": {name:"combo_follow_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_account_changes": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay account-changes\">\n  <div class=\"modal modal-small\">\n    <div class=\"modal-header\">\n      <a class=\"dismiss js-dismiss\" href=\"#\"><i class=\"close-large\"></i></a>\n      <h2>Save account settings</h2>\n    </div>\n    <div class=\"modal-body\">\n      <div class=\"modal-inner\">\n        <form clas=\"form-horizontal\">\n          <fieldset class=\"control-group\">\n            <label class=\"control-label\" for=\"password\">Password</label>\n            <div class=\"controls\">\n              <input class=\"input-medium\" type=\"password\" name=\"password\">\n              <p class=\"help-block\"><a href=\"#\">Forgot your password?</a></p>\n            </div>\n          </fieldset>\n        </form>\n      </div>\n    </div>\n    <div class=\"modal-footer\">\n      <a class=\"btn primary-btn\" href=\"#\">Save changes</a>\n      <a class=\"btn\" href=\"#\">Cancel</a>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_contact_import": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_dms": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<style type=\"text/css\">\n  .modal-overlay.dms .modal-header .btn {\n    float: right;\n    margin: -5px -5px 0 0;\n    font-weight: normal;\n  }\n\n  .dm-thread-list {\n\n  }\n  .dm-thread a {\n    display: block;\n    padding: 12px;\n    border-top: 1px solid #eee;\n  }\n  .dm-thread:first-child a {\n    border-top: 0;\n  }\n  .dm-thread:last-child a {\n    -webkit-border-radius: 0 0 6px 6px;\n       -moz-border-radius: 0 0 6px 6px;\n            border-radius: 0 0 6px 6px;\n  }\n  .dm-thread a:hover {\n    text-decoration: none;\n    background-color: #f5f5f5; /* Old browsers */\n    background-repeat: repeat-x; /* Repeat the gradient */\n    background-image: -moz-linear-gradient(top, #f9f9f9 0%, #f5f5f5 100%); /* FF3.6+ */\n    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f9f9f9), color-stop(100%,#f5f5f5)); /* Chrome,Safari4+ */\n    background-image: -webkit-linear-gradient(top, #f9f9f9 0%,#f5f5f5 100%); /* Chrome 10+,Safari 5.1+ */\n    background-image: -ms-linear-gradient(top, #f9f9f9 0%,#f5f5f5 100%); /* IE10+ */\n    background-image: -o-linear-gradient(top, #f9f9f9 0%,#f5f5f5 100%); /* Opera 11.10+ */\n    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f9f9f9', endColorstr='#f5f5f5',GradientType=0 ); /* IE6-9 */\n    background-image: linear-gradient(top, #f9f9f9 0%,#f5f5f5 100%); /* W3C */\n  }\n  .dm-thread .chev-right {\n    float: right;\n    margin-top: 9px;\n  }\n  /* TODO: fix this in the modals css because we have .modal .account-summary elsewhere and that sucks */\n  .modal .dm-thread .account-summary {\n    margin: 0;\n    min-height: 32px;\n    margin-left: 18px;\n  }\n\n  .dm-thread-status {\n    float: left;\n    width: 13px;\n    height: 32px;\n  }\n  .dm-thread-status .unread {\n    margin-top: 9px;\n  }\n  .dm-thread-status .replied {\n    margin-top: 10px;\n  }\n\n  /* DMs\n  -------------------------------------------------- */\n\n  /* The list of threads */\n  .dm-threads .list-link {\n    padding: 12px;\n  }\n  .dm-threads .list-link .chev-right {\n    position: absolute;\n    top: 50%;\n    right: 12px;\n    margin-top: -6px;\n  }\n\n  /* Le DMs */\n  .dms {\n    padding-bottom: 12px;\n    border-bottom: 1px solid #eee;\n  }\n  .dm-item .avatar {\n    position: absolute;\n    top: 12px;\n    left: 12px;\n  }\n  .dm-item .content {\n    margin-left: 58px;\n  }\n  /* Base styles for stream-item types */\n  .dm-item {\n    position: relative;\n    min-height: 48px; /* Never shorter than avatar + padding */\n    padding: 12px;\n  }\n  .dm-item {\n    line-height: 16px;\n  }\n  /* reposition content and avatar to allow for message thread status (unread/replied) */\n  .dm-item .content {\n    margin-left: 58px;\n  }\n  /* unread indicator */\n  .dm-item .unread {\n    float: left;\n    margin: 18px 0 0 -3px;\n  }\n  .dm-item .status {\n    display: none;\n  }\n  .dm-item.new-messages .status {\n    display: block;\n  }\n\n  /* replied-to indicator */\n  .dm-item .status .sm-reply {\n    position: absolute;\n    top: 30px;\n    left: 8px;\n  }\n  /* latest message snippet */\n  .dm-item p {\n    padding: 9px;\n    margin-bottom: 5px;\n    font-size: 12px;\n    color: #999;\n    background-color: #f5f5f5;\n    border: 1px solid #eee;\n    -webkit-border-radius: 4px;\n       -moz-border-radius: 4px;\n            border-radius: 4px;\n  }\n  /* sender gets flipped */\n  .dm-item.sent .avatar {\n    right: 12px;\n    left: auto;\n  }\n  .dm-item.sent .content {\n    margin-left: 0;\n    margin-right: 58px;\n  }\n  /* time stamp */\n  .dm-item time {\n    display: block;\n    text-align: center;\n    font-size: 12px;\n    color: #999;\n  }\n\n\n  .dms .modal-scroll {\n    width: 360px;\n    overflow-x: hidden;\n  }\n  .dm-modal-wrapper {\n    clear: both;\n    width: 720px;\n  }\n  .dm-threads {\n    float: left;\n    width: 345px;\n  }\n  .dm-convos {\n    float: left;\n    width: 345px;\n    display: none;\n  }\n</style>\n\n<script type=\"text/javascript\">\n  $(document).ready(function() {\n\n    $('.dm-thread a').click(function(e) {\n      e.preventDefault();\n      $('.dm-threads').hide();\n      $('.dm-convos').show();\n    });\n\n  });\n</script>\n\n<div class=\"modal-overlay dms\">\n  <div class=\"modal modal-small\">\n    <div class=\"modal-header\">\n      <a class=\"btn js-dismiss\" href=\"#\">Done</a>\n      <h2>Direct messages</h2>\n    </div>\n    <div class=\"modal-body modal-scroll\">\n\n      <div class=\"dm-modal-wrapper\">\n        <div class=\"dm-threads\">\n          <ul class=\"dm-thread-list\">\n            <li class=\"dm-thread\">\n              <a href=\"#\">\n                <i class=\"chev-right\"></i>\n                <div class=\"dm-thread-status\">\n                  <i class=\"unread\"></i>\n                </div>\n                <div class=\"account-summary account-summary-small\">\n                  <div class=\"content\">\n                    <span class=\"account-group\" href=\"#\">\n                      <img src=\"http://placehold.it/32x32\" class=\"avatar size32\">\n                      <b class=\"fullname\">Full Name</b>\n                    </span>\n                    <small class=\"metadata\">@screen_name</small>\n                  </div>\n                </div>\n              </a>\n            </li>\n            <li class=\"dm-thread\">\n              <a href=\"#\">\n                <i class=\"chev-right\"></i>\n                <div class=\"dm-thread-status\">\n                  <i class=\"unread\"></i>\n                </div>\n                <div class=\"account-summary account-summary-small\">\n                  <div class=\"content\">\n                    <span class=\"account-group\" href=\"#\">\n                      <img src=\"http://placehold.it/32x32\" class=\"avatar size32\">\n                      <b class=\"fullname\">Full Name</b>\n                    </span>\n                    <small class=\"metadata\">@screen_name</small>\n                  </div>\n                </div>\n              </a>\n            </li>\n            <li class=\"dm-thread\">\n              <a href=\"#\">\n                <i class=\"chev-right\"></i>\n                <div class=\"dm-thread-status\">\n                  <i class=\"unread\"></i>\n                </div>\n                <div class=\"account-summary account-summary-small\">\n                  <div class=\"content\">\n                    <span class=\"account-group\" href=\"#\">\n                      <img src=\"http://placehold.it/32x32\" class=\"avatar size32\">\n                      <b class=\"fullname\">Full Name</b>\n                    </span>\n                    <small class=\"metadata\">@screen_name</small>\n                  </div>\n                </div>\n              </a>\n            </li>\n            <li class=\"dm-thread\">\n              <a href=\"#\">\n                <i class=\"chev-right\"></i>\n                <div class=\"dm-thread-status\">\n                  <i class=\"replied\"></i>\n                </div>\n                <div class=\"account-summary account-summary-small\">\n                  <div class=\"content\">\n                    <span class=\"account-group\" href=\"#\">\n                      <img src=\"http://placehold.it/32x32\" class=\"avatar size32\">\n                      <b class=\"fullname\">Full Name</b>\n                    </span>\n                    <small class=\"metadata\">@screen_name</small>\n                  </div>\n                </div>\n              </a>\n            </li>\n            <li class=\"dm-thread\">\n              <a href=\"#\">\n                <i class=\"chev-right\"></i>\n                <div class=\"account-summary account-summary-small\">\n                  <div class=\"content\">\n                    <span class=\"account-group\" href=\"#\">\n                      <img src=\"http://placehold.it/32x32\" class=\"avatar size32\">\n                      <b class=\"fullname\">Full Name</b>\n                    </span>\n                    <small class=\"metadata\">@screen_name</small>\n                  </div>\n                </div>\n              </a>\n            </li>\n            <li class=\"dm-thread\">\n              <a href=\"#\">\n                <i class=\"chev-right\"></i>\n                <div class=\"dm-thread-status\">\n                  <i class=\"replied\"></i>\n                </div>\n                <div class=\"account-summary account-summary-small\">\n                  <div class=\"content\">\n                    <span class=\"account-group\" href=\"#\">\n                      <img src=\"http://placehold.it/32x32\" class=\"avatar size32\">\n                      <b class=\"fullname\">Full Name</b>\n                    </span>\n                    <small class=\"metadata\">@screen_name</small>\n                  </div>\n                </div>\n              </a>\n            </li>\n            <li class=\"dm-thread\">\n              <a href=\"#\">\n                <i class=\"chev-right\"></i>\n                <div class=\"dm-thread-status\">\n                  <i class=\"replied\"></i>\n                </div>\n                <div class=\"account-summary account-summary-small\">\n                  <div class=\"content\">\n                    <span class=\"account-group\" href=\"#\">\n                      <img src=\"http://placehold.it/32x32\" class=\"avatar size32\">\n                      <b class=\"fullname\">Full Name</b>\n                    </span>\n                    <small class=\"metadata\">@screen_name</small>\n                  </div>\n                </div>\n              </a>\n            </li>\n            <li class=\"dm-thread\">\n              <a href=\"#\">\n                <i class=\"chev-right\"></i>\n                <div class=\"dm-thread-status\">\n                  <i class=\"replied\"></i>\n                </div>\n                <div class=\"account-summary account-summary-small\">\n                  <div class=\"content\">\n                    <span class=\"account-group\" href=\"#\">\n                      <img src=\"http://placehold.it/32x32\" class=\"avatar size32\">\n                      <b class=\"fullname\">Full Name</b>\n                    </span>\n                    <small class=\"metadata\">@screen_name</small>\n                  </div>\n                </div>\n              </a>\n            </li>\n            <li class=\"dm-thread\">\n              <a href=\"#\">\n                <i class=\"chev-right\"></i>\n                <div class=\"account-summary account-summary-small\">\n                  <div class=\"content\">\n                    <span class=\"account-group\" href=\"#\">\n                      <img src=\"http://placehold.it/32x32\" class=\"avatar size32\">\n                      <b class=\"fullname\">Full Name</b>\n                    </span>\n                    <small class=\"metadata\">@screen_name</small>\n                  </div>\n                </div>\n              </a>\n            </li>\n            <li class=\"dm-thread\">\n              <a href=\"#\">\n                <i class=\"chev-right\"></i>\n                <div class=\"account-summary account-summary-small\">\n                  <div class=\"content\">\n                    <span class=\"account-group\" href=\"#\">\n                      <img src=\"http://placehold.it/32x32\" class=\"avatar size32\">\n                      <b class=\"fullname\">Full Name</b>\n                    </span>\n                    <small class=\"metadata\">@screen_name</small>\n                  </div>\n                </div>\n              </a>\n            </li>\n            <li class=\"dm-thread\">\n              <a href=\"#\">\n                <i class=\"chev-right\"></i>\n                <div class=\"account-summary account-summary-small\">\n                  <div class=\"content\">\n                    <span class=\"account-group\" href=\"#\">\n                      <img src=\"http://placehold.it/32x32\" class=\"avatar size32\">\n                      <b class=\"fullname\">Full Name</b>\n                    </span>\n                    <small class=\"metadata\">@screen_name</small>\n                  </div>\n                </div>\n              </a>\n            </li>\n          </ul>\n        </div>\n\n        <div class=\"dms dm-convos\">\n          <div class=\"dm-item received\">\n            <img class=\"avatar size48\" src=\"http://placehold.it/48x48\">\n            <div class=\"content\">\n              <p>Sed posuere consectetur est at lobortis. Etiam porta sem malesuada magna mollis euismod. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>\n              <small class=\"time\">8/1/11 9:00am</small>\n            </div>\n          </div>\n          <div class=\"dm-item sent\">\n            <img class=\"avatar size48\" src=\"http://placehold.it/48x48\">\n            <div class=\"content\">\n              <p>Sed posuere consectetur est at lobortis.</p>\n              <small class=\"time\">8/1/11 9:00am</small>\n            </div>\n          </div>\n          <div class=\"dm-item received\">\n            <img class=\"avatar size48\" src=\"http://placehold.it/48x48\">\n            <div class=\"content\">\n              <p>Sed posuere consectetur est at lobortis. Etiam porta sem malesuada magna mollis euismod. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>\n              <small class=\"time\">8/1/11 9:00am</small>\n            </div>\n          </div>\n          <div class=\"dm-item sent\">\n            <img class=\"avatar size48\" src=\"http://placehold.it/48x48\">\n            <div class=\"content\">\n              <p>Sed posuere consectetur est at lobortis.</p>\n              <small class=\"time\">8/1/11 9:00am</small>\n            </div>\n          </div>\n          <div class=\"dm-item received\">\n            <img class=\"avatar size48\" src=\"http://placehold.it/48x48\">\n            <div class=\"content\">\n              <p>Sed posuere consectetur est at lobortis. Etiam porta sem malesuada magna mollis euismod. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>\n              <small class=\"time\">8/1/11 9:00am</small>\n            </div>\n          </div>\n          <div class=\"dm-item sent\">\n            <img class=\"avatar size48\" src=\"http://placehold.it/48x48\">\n            <div class=\"content\">\n              <p>Sed posuere consectetur est at lobortis.</p>\n              <small class=\"time\">8/1/11 9:00am</small>\n            </div>\n          </div>\n        </div>\n\n      </div>\n\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_go_to_user": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay go-to-user\">\n  <div class=\"modal modal-small\">\n    <div class=\"modal-header\">\n      <a class=\"dismiss js-dismiss\" href=\"#\"><i class=\"close-large\"></i></a>\n      <h2>Go to a person's profile</h2>\n    </div>\n    <div class=\"modal-body\">\n      <div class=\"modal-inner\">\n        <form action=\"\" class=\"\">\n          <input type=\"text\" placeholder=\"Start typing a name to jump to a profile\">\n        </form>\n      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_list_add_to": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay list-add-to\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a href=\"#\" class=\"dismiss js-action-dismiss\"><i class=\"close-large\"></i></a>\n      <h2>Add [Full Name] to your lists</h2>\n    </div>\n    <div class=\"modal-body modal-scroll\">\n      <div class=\"membership\">\n        <label class=\"item checked\">\n          <input type=\"checkbox\" checked />\n          <span class=\"inner\">\n            <strong>List name</strong>\n            <small>Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</small>\n          </span>\n        </label>\n        <label class=\"item\">\n          <input type=\"checkbox\" />\n          <span class=\"inner\">\n            <strong>Another list name</strong>\n          </span>\n        </label>\n        <label class=\"item\">\n          <input type=\"checkbox\" />\n          <span class=\"inner\">\n            <strong>Look, a list!</strong>\n            <small>Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum.</small>\n          </span>\n        </label>\n        <label class=\"item checked\">\n          <input type=\"checkbox\" checked />\n          <span class=\"inner\">\n            <strong>List name</strong>\n          </span>\n        </label>\n        <label class=\"item\">\n          <input type=\"checkbox\" />\n          <span class=\"inner\">\n            <strong>Another list name</strong>\n            <small>Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</small>\n          </span>\n        </label>\n        <label class=\"item\">\n          <input type=\"checkbox\" />\n          <span class=\"inner\">\n            <strong>Look, a list!</strong>\n            <small>Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum.</small>\n          </span>\n        </label>\n      </div>\n    </div>\n    <div class=\"modal-footer\">\n      <a class=\"btn primary-btn\" href=\"#\">Save changes</a>\n      <a class=\"btn\" href=\"#\">Cancel</a>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_list_edit": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay list-edit\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a href=\"#\" class=\"dismiss js-action-dismiss\"><i class=\"close-large\"></i></a>\n      <h2>\n        Edit list\n        <small class=\"view-toggler\"><a class=\"active\" href=\"#\">List details</a> / <a href=\"#\">Members</a></small>\n      </h2>\n    </div>\n    <div class=\"modal-body\">\n      <div class=\"modal-inner\">\n        <form class=\"form-horizontal edit-list\">\n          <fieldset class=\"control-group\">\n            <label class=\"control-label\" for=\"listName\">Name</label>\n            <div class=\"controls\">\n              <input class=\"input-large\" id=\"listName\" type=\"text\" value=\"SF Food Cards\">\n            </div>\n          </fieldset>\n          <fieldset class=\"control-group\">\n            <label class=\"control-label\" for=\"listDescription\">Description</label>\n            <div class=\"controls\">\n              <textarea class=\"input-large\" id=\"listDescription\">San Francisco food carts I love.</textarea>\n              <p class=\"help-text\">Optional. Maximum 100 characters.</p>\n            </div>\n          </fieldset>\n          <fieldset class=\"control-group\">\n            <label class=\"control-label\" for=\"listPrivacy\">Privacy</label>\n            <div class=\"controls\">\n              <div class=\"control-list\">\n                <label class=\"checkbox\">\n                  <input name=\"listPrivacy\" id=\"listPublic\" type=\"checkbox\" checked>\n                  Public <small>anyone can follow this list</small>\n                </label>\n                <label class=\"checkbox\">\n                  <input name=\"listPrivacy\" id=\"listPrivate\" type=\"checkbox\">\n                  Private <small>Only you can access this list</small>\n                </label>\n              </div>\n            </div>\n          </fieldset>\n        </form>\n     </div>\n    </div>\n    <div class=\"modal-footer\">\n      <a class=\"btn primary-btn\" href=\"#\">Save changes</a>\n      <a class=\"btn\" href=\"#\">Cancel</a>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_list_edit_members": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay list-edit-members\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a href=\"#\" class=\"dismiss js-action-dismiss\"><i class=\"close-large\"></i></a>\n      <h2>\n        Edit members\n        <small class=\"view-toggler\"><a href=\"#\">List details</a> / <a class=\"active\" href=\"#\">Members</a></small>\n      </h2>\n      <form class=\"modal-search\">\n        <!-- NOTE: fallback to jquery for placeholder? -->\n        <input type=\"text\" class=\"search\" id=\"\" placeholder=\"Search for people to add to this list\" />\n      </form>\n    </div>\n    <div class=\"modal-body modal-scroll\">\n      <div class=\"stream\">\n        <div class=\"stream-item\">\n");t.b(t.rp("stream_user0",c,p,"           "));t.b(t.rp("stream_user1",c,p,"           "));t.b(t.rp("stream_user2",c,p,"           "));t.b(t.rp("stream_user3",c,p,"           "));t.b(t.rp("stream_user4",c,p,"           "));t.b("        </div>\n      </div>\n    </div>\n    <div class=\"modal-footer\">\n      <a class=\"btn primary-btn\" href=\"#\">Save changes</a>\n      <a class=\"btn\" href=\"#\">Cancel</a>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {"stream_user0": {name:"stream_user"},"stream_user1": {name:"stream_user"},"stream_user2": {name:"stream_user"},"stream_user3": {name:"stream_user"},"stream_user4": {name:"stream_user"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_list_new": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay list-new\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a href=\"#\" class=\"dismiss js-action-dismiss\"><i class=\"close-large\"></i></a>\n      <h2>Create list</h2>\n    </div>\n    <div class=\"modal-body\">\n      <div class=\"modal-inner\">\n        <form class=\"form-horizontal edit-list\">\n          <fieldset class=\"control-group\">\n            <label class=\"control-label\" for=\"listName\">Name</label>\n            <div class=\"controls\">\n              <input class=\"input-large\" id=\"listName\" type=\"text\">\n            </div>\n          </fieldset>\n          <fieldset class=\"control-group\">\n            <label class=\"control-label\" for=\"listDescription\">Description</label>\n            <div class=\"controls\">\n              <textarea class=\"input-large\" id=\"listDescription\"></textarea>\n              <p class=\"help-text\">Optional. Maximum 100 characters.</p>\n            </div>\n          </fieldset>\n          <fieldset class=\"control-group\">\n            <label class=\"control-label\" for=\"listPrivacy\">Privacy</label>\n            <div class=\"controls\">\n              <div class=\"control-list\">\n                <label class=\"checkbox\">\n                  <input name=\"listPrivacy\" id=\"listPublic\" type=\"checkbox\">\n                  Public <small>anyone can follow this list</small>\n                </label>\n                <label class=\"checkbox\">\n                  <input name=\"listPrivacy\" id=\"listPrivate\" type=\"checkbox\">\n                  Private <small>Only you can access this list</small>\n                </label>\n              </div>\n            </div>\n          </fieldset>\n        </form>\n      </div>\n    </div>\n    <div class=\"modal-footer\">\n      <a class=\"btn primary-btn\" href=\"#\" data-modal=\"list-new-add-members\">Next</a>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_list_new_add_members": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay list-new-add-members\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a href=\"#\" class=\"dismiss js-action-dismiss\"><i class=\"close-large\"></i></a>\n      <h2>Add members to list</h2>\n      <form class=\"modal-search\">\n        <!-- NOTE: fallback to jquery for placeholder? -->\n        <input type=\"text\" class=\"search\" id=\"\" placeholder=\"Search for people to add to this list\" />\n      </form>\n    </div>\n    <div class=\"modal-body modal-scroll\">\n      <div class=\"placeholder\">\n        <p>\n          <strong>You don't have members in your list yet!</strong><br />\n          Search for a username, first or last name, business, or brand to add as members of this list.\n        </p>\n      </div>\n    </div>\n    <div class=\"modal-footer\">\n      <a class=\"btn primary-btn js-action-dismiss\" href=\"#\">Create list</a>\n      <a class=\"btn\" href=\"#\">Back</a>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_message_new": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"modal-overlay message-new\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a href=\"#\" class=\"dismiss js-action-dismiss\"><i class=\"close-large\"></i></a>\n      <h2>New message</h2>\n    </div>\n    <form class=\"tweet-form\">\n      <div class=\"message-to\">\n        <img src=\"http://placehold.it/24x24\" alt=\"\">\n        <input type=\"text\" placeholder=\"Message anyone who follows you\">\n      </div>\n      <textarea class=\"tweetbox\"></textarea>\n      <button class=\"btn primary-btn\" type=\"submit\">Send</button>\n      <span class=\"tweet-count\">140</span>\n    </form>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_message_thread": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay message-thread\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a href=\"#\" class=\"dismiss js-action-dismiss\"><i class=\"close-large\"></i></a>\n      <h2>Message Full name <small>@username</small></h2>\n    </div>\n    <div class=\"modal-body modal-scroll\">\n\n     \n      <div class=\"messages\">\n        <div class=\"message-item received\">\n          <img class=\"avatar size48\">\n          <div class=\"content\">\n            <p>Sed posuere consectetur est at lobortis. Etiam porta sem malesuada magna mollis euismod. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>\n            <small class=\"time\">8/1/11 9:00am</small>\n          </div>\n        </div>\n        <div class=\"message-item sent\">\n          <img class=\"avatar size48\">\n          <div class=\"content\">\n            <p>Sed posuere consectetur est at lobortis.</p>\n            <small class=\"time\">8/1/11 9:00am</small>\n          </div>\n        </div>\n        <div class=\"message-item received\">\n          <img class=\"avatar size48\">\n          <div class=\"content\">\n            <p>Sed posuere consectetur est at lobortis. Etiam porta sem malesuada magna mollis euismod. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>\n            <small class=\"time\">8/1/11 9:00am</small>\n          </div>\n        </div>\n        <div class=\"message-item sent\">\n          <img class=\"avatar size48\">\n          <div class=\"content\">\n            <p>Sed posuere consectetur est at lobortis.</p>\n            <small class=\"time\">8/1/11 9:00am</small>\n          </div>\n        </div>\n        <div class=\"message-item received\">\n          <img class=\"avatar size48\">\n          <div class=\"content\">\n            <p>Sed posuere consectetur est at lobortis. Etiam porta sem malesuada magna mollis euismod. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>\n            <small class=\"time\">8/1/11 9:00am</small>\n          </div>\n        </div>\n        <div class=\"message-item sent\">\n          <img class=\"avatar size48\">\n          <div class=\"content\">\n            <p>Sed posuere consectetur est at lobortis.</p>\n            <small class=\"time\">8/1/11 9:00am</small>\n          </div>\n        </div>\n      </div>\n\n    </div>\n    <div class=\"modal-footer\">\n      <form class=\"tweet-form\">\n        <textarea class=\"tweetbox\"></textarea>\n        <button class=\"btn primary-btn\" type=\"submit\">Send message</button>\n        <span class=\"tweet-count\">140</span>\n      </form>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_profile_card": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay profile-modal\">\n  <div class=\"modal\">\n    <a href=\"#\" class=\"dismiss js-action-dismiss\"><i class=\"close-large\"></i></a>\n");t.b(t.rp("profile_pane0",c,p,"    "));t.b("  </div>\n</div>");return t.fl(); }, partials: {"profile_pane0": {name:"profile_pane"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_reply": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay tweet-reply\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a class=\"dismiss js-action-dismiss\" href=\"#\"><i class=\"close-large\"></i></a>\n    </div>\n\n");t.b(t.rp("stream_tweet0",c,p,"    "));t.b("\n" + i);t.b("    <div class=\"in-reply-to\">\n      <h4>In reply to</h4>\n    </div>\n\n    <form class=\"tweet-form\">\n      <textarea class=\"tweetbox\"></textarea>\n      <div class=\"tweet-buttons\">\n        <a class=\"btn\" href=\"#\"><i class=\"tweet-hash\"></i></a>\n        <a class=\"btn\" href=\"#\"><i class=\"tweet-at\"></i></a>\n        <a class=\"btn\" href=\"#\"><i class=\"tweet-camera\"></i></a>\n        <a class=\"btn\" href=\"#\"><i class=\"tweet-geo\"></i></a>\n      </div>\n      <button class=\"btn primary-btn\" type=\"submit\">Tweet</button>\n      <span class=\"tweet-count\">140</span>\n    </form>\n  </div>\n</div>");return t.fl(); }, partials: {"stream_tweet0": {name:"stream_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_retweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay tweet-retweet\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a class=\"dismiss js-action-dismiss\" href=\"#\"><i class=\"close-large\"></i></a>\n      <h2>Retweet this to your followers?</h2>\n    </div>\n    <div class=\"modal-body\">\n      <div class=\"modal-inner\">\n        <div class=\"modal-tweet-wrapper\">\n          Tweet here, please!\n        </div>\n        <div class=\"modal-inner-footer clearfix\">\n          <a class=\"btn primary-btn\" href=\"#\">Retweet</a>\n          <p class=\"learn-more\"><a class=\"muted\" href=\"#\">Learn more about Retweets</a></p>\n        </div>\n      </div>\n    </div>\n    <div class=\"modal-footer\">\n      <a class=\"btn primary-btn\" href=\"#\">Retweet</a>\n      <a class=\"btn js-action-dismiss\" href=\"#\">Cancel</a>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_shortcuts": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay shortcuts\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a class=\"dismiss js-action-dismiss\" href=\"#\"><i class=\"close-large\"></i></a>\n      <h2>Keyboard shortcuts</h2>\n    </div>\n    <div class=\"modal-body\">\n      <div class=\"keyboard-shortcuts clearfix\">\n        <dl>\n          <dt>Actions</dt>\n          <dd><strong>f</strong> <span>: favorite</span></dd>\n          <dd><strong>r</strong> <span>: reply</span></dd>\n          <dd><strong>t</strong> <span>: retweet</span></dd>\n          <dd><strong>m</strong> <span>: direct message</span></dd>\n          <dd><strong>n</strong> <span>: new Tweet</span></dd>\n          <dd><strong>enter</strong> <span>: toggle details pane</span></dd>\n        </dl>\n        <dl>\n          <dt>Navigation</dt>\n          <dd><strong>?</strong> <span>: this menu</span></dd>\n          <dd><strong>j</strong> <span>: next Tweet</span></dd>\n          <dd><strong>k</strong> <span>: previous Tweet</span></dd>\n          <dd><strong>space</strong> <span>: page down</span></dd>\n          <dd><strong>/</strong> <span>: search</span></dd>\n          <dd><strong>.</strong> <span>: load new Tweets</span></dd>\n        </dl>\n        <dl>\n          <dt>Timelines</dt>\n          <dd><strong>g h</strong> <span>: <u>h</u>ome</span></dd>\n          <dd><strong>g r</strong> <span>: @me</span></dd>\n          <dd><strong>g a</strong> <span>: <u>a</u>ctivity</span></dd>\n          <dd><strong>g p</strong> <span>: <u>p</u>rofile</span></dd>\n          <dd><strong>g f</strong> <span>: <u>f</u>avorites</span></dd>\n          <dd><strong>g m</strong> <span>: <u>m</u>essages</span></dd>\n          <dd><strong>g u</strong> <span>: go to <u>u</u>ser</span></dd>\n        </dl>\n      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_switch_accounts": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay switch-accounts\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a href=\"#\" class=\"dismiss js-action-dismiss\"><i class=\"close-large\"></i></a>\n      <h2>Switch accounts</h2>\n    </div>\n    <div class=\"modal-body\">\n      <div class=\"modal-inner\">\n        <div class=\"account-switcher clearfix\">\n          <a class=\"active\" href=\"#\">\n            <img class=\"avatar size73\" src=\"http://placehold.it/73x73\" alt=\"\" />\n            <strong>@longusername</strong>\n          </a>\n          <a href=\"#\">\n            <img class=\"avatar size73\" src=\"http://placehold.it/73x73\" alt=\"\" />\n            <strong>@user</strong>\n          </a>\n          <a href=\"#\">\n            <img class=\"avatar size73\" src=\"http://placehold.it/73x73\" alt=\"\" />\n            <strong>@leUser</strong>\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_trends_change": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay change-trends\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a class=\"dismiss js-action-dismiss\" href=\"#\"><i class=\"close-large\"></i></a>\n      <h2>Change trends location</h2>\n    </div>\n    <div class=\"modal-body\">\n      <div class=\"modal-inner\">\n        <div class=\"local-trends\">\n          <div class=\"local-trends-breadcrumb\">\n            <ul>\n              <li><a class=\"trend-breadcrumb-location\" data-woeid=\"1\" href=\"#\">Worldwide</a></li>\n              <li class=\"divider\">/</li>\n              <li><a class=\"trend-breadcrumb-location selected\" data-woeid=\"23424977\" href=\"#\">United States <i class=\"checkmark\"></i></a></li>\n            </ul>\n          </div>\n          <div class=\"clearfix\">\n            <ul class=\"local-trends-list\">\n              <li><a data-woeid=\"23424747\" href=\"#\">Argentina</a></li>\n              <li><a data-woeid=\"23424748\" href=\"#\">Australia</a></li>\n              <li><a data-woeid=\"23424768\" href=\"#\">Brazil</a></li>\n              <li><a data-woeid=\"23424775\" href=\"#\">Canada</a></li>\n              <li><a data-woeid=\"23424782\" href=\"#\">Chile</a></li>\n              <li><a data-woeid=\"23424787\" href=\"#\">Colombia</a></li>\n              <li><a data-woeid=\"23424800\" href=\"#\">Dominican Republic</a></li>\n              <li><a data-woeid=\"23424801\" href=\"#\">Ecuador</a></li>\n              <li><a data-woeid=\"23424819\" href=\"#\">France</a></li>\n              <li><a data-woeid=\"23424829\" href=\"#\">Germany</a></li>\n              <li><a data-woeid=\"23424848\" href=\"#\">India</a></li>\n            </ul>\n            <ul class=\"local-trends-list\">\n              <li><a data-woeid=\"23424846\" href=\"#\">Indonesia</a></li>\n              <li><a data-woeid=\"23424803\" href=\"#\">Ireland</a></li>\n              <li><a data-woeid=\"23424853\" href=\"#\">Italy</a></li>\n              <li><a data-woeid=\"23424856\" href=\"#\">Japan</a></li>\n              <li><a data-woeid=\"23424901\" href=\"#\">Malaysia</a></li>\n              <li><a data-woeid=\"23424900\" href=\"#\">Mexico</a></li>\n              <li><a data-woeid=\"23424909\" href=\"#\">Netherlands</a></li>\n              <li><a data-woeid=\"23424916\" href=\"#\">New Zealand</a></li>\n              <li><a data-woeid=\"23424908\" href=\"#\">Nigeria</a></li>\n              <li><a data-woeid=\"23424919\" href=\"#\">Peru</a></li>\n              <li><a data-woeid=\"23424934\" href=\"#\">Philippines</a></li>\n            </ul>\n            <ul class=\"local-trends-list\">\n              <li><a data-woeid=\"23424948\" href=\"#\">Singapore</a></li>\n              <li><a data-woeid=\"23424942\" href=\"#\">South Africa</a></li>\n              <li><a data-woeid=\"23424950\" href=\"#\">Spain</a></li>\n              <li><a data-woeid=\"23424954\" href=\"#\">Sweden</a></li>\n              <li><a data-woeid=\"23424969\" href=\"#\">Turkey</a></li>\n              <li><a data-woeid=\"23424738\" href=\"#\">United Arab Emirates</a></li>\n              <li><a data-woeid=\"23424975\" href=\"#\">United Kingdom</a></li>\n              <li><a class=\"selected\" data-woeid=\"23424977\" href=\"#\">United States <i class=\"checkmark\"></i></a></li>\n              <li><a data-woeid=\"23424982\" href=\"#\">Venezuela</a></li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modal_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"modal-overlay new-tweet\">\n  <div class=\"modal\">\n    <div class=\"modal-header\">\n      <a class=\"dismiss js-action-dismiss\" href=\"#\"><i class=\"close-large\"></i></a>\n      <h2>What's happening?</h2>\n    </div>\n    <form class=\"tweet-form\">\n      <textarea class=\"tweetbox\"></textarea>\n      <div class=\"tweet-buttons\">\n        <a class=\"btn\" href=\"#\"><i class=\"tweet-hash\"></i></a>\n        <a class=\"btn\" href=\"#\"><i class=\"tweet-at\"></i></a>\n        <a class=\"btn\" href=\"#\"><i class=\"tweet-camera\"></i></a>\n        <a class=\"btn\" href=\"#\"><i class=\"tweet-geo\"></i></a>\n      </div>\n      <button class=\"btn primary-btn\" type=\"submit\">Tweet</button>\n      <span class=\"tweet-count\">140</span>\n    </form>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"modals": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n");t.b("\n" + i);t.b(t.rp("modal_tweet0",c,p,""));t.b("\n");t.b("\n" + i);t.b(t.rp("modal_reply1",c,p,""));t.b(t.rp("modal_retweet2",c,p,""));t.b("\n");t.b("\n" + i);t.b(t.rp("modal_list_new3",c,p,""));t.b(t.rp("modal_list_new_add_members4",c,p,""));t.b(t.rp("modal_list_edit5",c,p,""));t.b(t.rp("modal_list_edit_members6",c,p,""));t.b(t.rp("modal_list_add_to7",c,p,""));t.b("\n");t.b("\n" + i);t.b(t.rp("modal_trends_change8",c,p,""));t.b("\n");t.b("\n" + i);t.b(t.rp("modal_switch_accounts9",c,p,""));t.b("\n");t.b("\n" + i);t.b(t.rp("modal_shortcuts10",c,p,""));t.b("\n");t.b("\n" + i);t.b(t.rp("modal_message_new11",c,p,""));t.b(t.rp("modal_message_thread12",c,p,""));t.b(t.rp("modal_dms13",c,p,""));t.b("\n");t.b("\n" + i);t.b(t.rp("modal_profile_card14",c,p,""));t.b("\n");t.b("\n" + i);t.b(t.rp("modal_go_to_user15",c,p,""));t.b("\n");t.b("\n" + i);t.b(t.rp("modal_account_changes16",c,p,""));return t.fl(); }, partials: {"modal_tweet0": {name:"modal_tweet"},"modal_reply1": {name:"modal_reply"},"modal_retweet2": {name:"modal_retweet"},"modal_list_new3": {name:"modal_list_new"},"modal_list_new_add_members4": {name:"modal_list_new_add_members"},"modal_list_edit5": {name:"modal_list_edit"},"modal_list_edit_members6": {name:"modal_list_edit_members"},"modal_list_add_to7": {name:"modal_list_add_to"},"modal_trends_change8": {name:"modal_trends_change"},"modal_switch_accounts9": {name:"modal_switch_accounts"},"modal_shortcuts10": {name:"modal_shortcuts"},"modal_message_new11": {name:"modal_message_new"},"modal_message_thread12": {name:"modal_message_thread"},"modal_dms13": {name:"modal_dms"},"modal_profile_card14": {name:"modal_profile_card"},"modal_go_to_user15": {name:"modal_go_to_user"},"modal_account_changes16": {name:"modal_account_changes"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"generic_footer": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"footer inline-list\">\n  <ul>\n    <li><a href=\"");t.b(t.v(t.f("about_path",c,p,0)));t.b("\">About</a><span class=\"dot divider\"> &middot;</span></li>\n    <li><a href=\"");t.b(t.v(t.f("support_path",c,p,0)));t.b("\">Help</a><span class=\"dot divider\"> &middot;</span></li>\n    <li><a href=\"");t.b(t.v(t.f("blog_path",c,p,0)));t.b("\">Blog</a><span class=\"dot divider\"> &middot;</span></li>\n");if(!t.s(t.f("is_slim",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("decider_mobile_download_gallery",c,p,1),c,p,0,362,469,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li><a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("\">Mobile</a><span class=\"dot divider\"> &middot;</span></li>\n");});c.pop();}};t.b("    <li><a href=\"");t.b(t.v(t.f("status_path",c,p,0)));t.b("\">Status</a><span class=\"dot divider\"> &middot;</span></li>\n");if(t.s(t.f("decider_trends_page",c,p,1),c,p,0,635,728,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li><a href=\"");t.b(t.v(t.f("trends_path",c,p,0)));t.b("\">Trends</a><span class=\"dot divider\"> &middot;</span></li>\n");});c.pop();}t.b("    <li><a href=\"");t.b(t.v(t.f("jobs_path",c,p,0)));t.b("\">Jobs</a><span class=\"dot divider\"> &middot;</span></li>\n    <li><a href=\"");t.b(t.v(t.f("tos_path",c,p,0)));t.b("\">Terms</a><span class=\"dot divider\"> &middot;</span></li>\n    <li><a href=\"");t.b(t.v(t.f("privacy_path",c,p,0)));t.b("\">Privacy</a><span class=\"dot divider\"> &middot;</span></li>\n");if(!t.s(t.f("is_slim",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("logged_in",c,p,1),c,p,0,1054,1175,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li><a href=\"#\" id=\"keyboard-shortcut-trigger\">Shortcuts</a><span class=\"dot divider\"> &middot;</span></li>\n");});c.pop();}};t.b("    <li><a href=\"");t.b(t.v(t.f("advertisers_path",c,p,0)));t.b("\">Advertisers</a><span class=\"dot divider\"> &middot;</span></li>\n    <li><a href=\"");t.b(t.v(t.f("businesses_path",c,p,0)));t.b("\">Businesses</a><span class=\"dot divider\"> &middot;</span></li>\n    <li><a href=\"");t.b(t.v(t.f("partnerships_path",c,p,0)));t.b("\">Media</a><span class=\"dot divider\"> &middot;</span></li>\n    <li><a href=\"");t.b(t.v(t.f("developers_path",c,p,0)));t.b("\">Developers</a><span class=\"dot divider\"> &middot;</span></li>\n    <li><a href=\"");t.b(t.v(t.f("resources_path",c,p,0)));t.b("\">Resources</a><span class=\"dot divider\"> &middot;</span></li>\n    <li><span class=\"copyright\">&copy; ");t.b(t.v(t.f("year",c,p,0)));t.b(" Twitter</span></li>\n  </ul>\n");if(t.s(t.f("is_mobile",c,p,1),c,p,0,1792,1915,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <p class=\"mobile-option\">\n      View Twitter in:&nbsp;Standard&nbsp;- <a href=\"");t.b(t.v(t.f("mobile_path",c,p,0)));t.b("\">Mobile</a>\n    </p>\n");});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"disabled_dropdown": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"dropdown-menu\" tabindex=\"-1\">\n  <li class=\"dropdown-caret\">\n    <span class=\"caret-outer\"></span>\n    <span class=\"caret-inner\"></span>\n  </li>\n  <li class=\"geo-not-enabled-yet\">\n    <h2>Add a location to your Tweets</h2>\n    <p>\n      When you tweet with a location, Twitter stores that location.&#32;\n      You can switch location on/off before each Tweet and always have the option to delete your location history.\n      <a href=\"http://support.twitter.com/forums/26810/entries/78525\" target=\"_blank\">Learn more</a>\n    </p>\n    <div>\n      <button type=\"button\" class=\"geo-turn-on btn primary-btn\">Turn location on</button>\n      <button type=\"button\" class=\"geo-not-now btn-link\">Not now</button>\n    </div>\n  </li>\n</ul>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dropdown_places": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("places",c,p,1),c,p,0,11,176,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"dropdown-link geo-place-result geo-focusable\" data-place-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");if(t.s(t.f("is_first_place",c,p,1),c,p,0,113,138,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"checkmark\"></i>");});c.pop();}t.b(t.v(t.f("full_name",c,p,0)));t.b("</li>\n");});c.pop();}t.b("<li class=\"geo-place-result dropdown-divider\"></li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"dropdown_search_results": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("places",c,p,1),c,p,0,11,114,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"dropdown-link geo-search-result geo-focusable\" data-place-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b(t.v(t.f("full_name",c,p,0)));t.b("</li>\n");});c.pop();}if(!t.s(t.f("places",c,p,1),c,p,1,0,0,"")){t.b("  <li class=\"dropdown-link geo-search-result geo-no-search-results\">No search results</li>\n");};t.b("<li class=\"geo-search-result dropdown-divider\"></li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"enabled_dropdown": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"dropdown-menu\" tabindex=\"-1\">\n  <li class=\"dropdown-caret\">\n    <span class=\"caret-outer\"></span>\n    <span class=\"caret-inner\"></span>\n  </li>\n  <li class=\"geo-query-location\">\n    <input type=\"text\" autocomplete=\"off\" placeholder=\"Search for a neighborhood or city\">\n    <i class=\"generic-search\"></i>\n  </li>\n  <li class=\"geo-dropdown-status\"></li>\n  <li class=\"dropdown-link geo-turn-off-item geo-focusable\">\n    <i class=\"close\"></i>Turn off location\n  </li>\n</ul>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"geo_picker": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"geo-picker\">\n  <button class=\"btn geo-picker-btn\" type=\"button\" tabindex=\"-1\">\n    <i class=\"tweet-geo\"><span class=\"hidden-elements\">Add location</span></i> <span class=\"caret\"></span>\n  </button>\n  <span class=\"dropdown-container\"></span>\n  <span class=\"geo-status\"></span>\n  <input type=\"hidden\" name=\"place_id\">\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"geo_control": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class=\"geo-control\">\n  <a href=\"#\" class=\"geo-location\">\n    <span class=\"geo-icon\">&nbsp;</span>\n    ");if(!t.s(t.f("suppress_geo_text",c,p,1),c,p,1,0,0,"")){t.b("<span class=\"geo-text\"></span>");};t.b("<span class=\"geo-dropdown-icon\">&nbsp;</span>\n  </a>\n</span>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"geo_location_dropdown": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"geo-location-dropdown\">\n  <div class=\"geo-location-dropdown-divot\">&nbsp;</div>\n  <ul class=\"geo\">\n    <li class=\"query-location\">\n      <div class=\"query-location-container\">\n        <input class=\"query-location-input\" type=\"text\" autocomplete=\"off\" />\n        <span class=\"glass\">&nbsp;</span>\n        <span class=\"help-text\">Search for a neighborhood or city</span>\n      </div>\n      <div class=\"location-error\"></div>\n    </li>\n    <li class=\"geo-turn-off-item focusable\"><a class=\"geo\" href=\"#\">\n      <span class=\"geo-turn-off-icon\">&nbsp;</span>\n      Turn off location\n    </a></li>\n  </ul>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"geo_location_dropdown_items": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("places",c,p,1),c,p,0,11,262,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"override-location focusable");if(t.s(t.f("for_search_results",c,p,1),c,p,0,75,98,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" location-search-result");});c.pop();}t.b("\">\n    <a class=\"geo\" href=\"#\" data-place-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      <span class=\"menu-item-icon\">&nbsp;</span>\n      ");t.b(t.v(t.f("full_name",c,p,0)));t.b("\n" + i);t.b("    </a>\n  </li>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"geo_map_big": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet_geo_big\">\n");if(t.s(t.f("place",c,p,1),c,p,0,38,372,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"geo_map_place_details\">\n    <div class=\"geo_map_place_name\">");t.b(t.v(t.f("name",c,p,0)));t.b("</div>\n    <div>");t.b(t.v(t.f("full_address",c,p,0)));t.b("</div>\n    <div>");t.b(t.v(t.f("phone",c,p,0)));t.b("</div>\n");if(t.s(t.f("place_path",c,p,1),c,p,0,204,347,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div>\n      <a class=\"geo_map_place_page_link\" href=\"");t.b(t.v(t.f("place_path",c,p,0)));t.b("\">\n        View more about this place &rarr;\n      </a>\n    </div>\n");});c.pop();}t.b("  </div>\n");});c.pop();}if(!t.s(t.f("place",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("user",c,p,1),c,p,0,405,531,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"geo_map_place_details\">\n    <div class=\"geo_map_place_name\">@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("'s Tweet location</div>\n  </div>\n");});c.pop();}};if(t.s(t.f("show_map",c,p,1),c,p,0,565,599,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"map_canvas\"></div>\n");});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"geo_map_small": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet_geo_small\">\n");if(t.s(t.f("place",c,p,1),c,p,0,40,572,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("show_map",c,p,1),c,p,0,56,205,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"map_canvas\"\n         data-tweet-id=\"");t.b(t.v(t.f("tweet_id",c,p,0)));t.b("\"\n         data-place-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"\n         data-place-name=\"");t.b(t.v(t.f("full_name",c,p,0)));t.b("\"></div>\n");});c.pop();}t.b("  <div class=\"geo_map_place_details\">\n    <a href=\"");t.b(t.v(t.f("place_map_url",c,p,0)));t.b("\" target=\"_blank\">\n      <div class=\"geo_map_place_name\">\n");if(t.s(t.f("is_from",c,p,1),c,p,0,363,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        from ");t.b(t.v(t.f("name",c,p,0)));t.b("\n" + i);});c.pop();}if(!t.s(t.f("is_from",c,p,1),c,p,1,0,0,"")){t.b("        ");t.b(t.v(t.f("name",c,p,0)));t.b("\n" + i);};t.b("      </div>\n    </a>\n    <div>");t.b(t.v(t.f("address",c,p,0)));t.b("</div>\n    <div>");t.b(t.v(t.f("container",c,p,0)));t.b("</div>\n    <div>");t.b(t.v(t.f("phone",c,p,0)));t.b("</div>\n  </div>\n");});c.pop();}if(!t.s(t.f("place",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("show_map",c,p,1),c,p,0,609,685,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"map_canvas\"\n         data-tweet-id=\"");t.b(t.v(t.f("tweet_id",c,p,0)));t.b("\"></div>\n");});c.pop();}};t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"geo_promo_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"geo_promo_dialog_content\">\n  <div class=\"tiny-map\">&nbsp;</div>\n  <div id=\"geo_dialog_descr\">\n    Ever had something you wanted to share (\"fireworks!\", \"party!\", \"ice cream truck!\", or \"quicksand...\") that would be better with a location?&#32;\n    By turning on this feature, you can include location information like neighborhood, town, or exact point when you tweet.<br><br>\n    When you tweet with a location, Twitter stores that location.&#32;\n    You can switch location on/off before each Tweet and always have the option to delete your location history.&#32;\n    <a id=\"geo_learn_more\" href=\"http://support.twitter.com/forums/26810/entries/78525\" target=\"_blank\">Learn more</a>\n  </div>\n  <div>\n    <button id=\"geo_turn_location_on\" class=\"btn btn-default\">Turn location on</button>\n    <a href=\"#\" id=\"geo_not_now\" class=\"geo_dialog_close\">Not now</a>\n    <span class=\"geo-progress\">&nbsp;</span>\n  </div>\n  <div class=\"geo-unable-to-turn-location-on\">\n    Unable to turn location on at this time. Please try again later.\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"getting_started_follow": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"follow\">\n  <span>Follow your first 10 accounts</span>\n  <ul>\n    <li><a href=\"");t.b(t.v(t.f("who_to_follow_interests_path",c,p,0)));t.b("\">Browse popular accounts by interest</a></li>\n    <li><a href=\"");t.b(t.v(t.f("who_to_follow_import_path",c,p,0)));t.b("\">Look for your friends</a></li>\n    <li class=\"search\"><form class=\"who-to-follow-search\" action=\"");t.b(t.v(t.f("who_to_follow_search_form_path",c,p,0)));t.b("\" method=\"GET\"><input type=\"text\" value=\"\" name=\"q\" placeholder=\"find users by name\" />&nbsp;<div class=\"submit button\">Search</div></form></li>\n  </ul>\n</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"getting_started_mobile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"mobile\">\n  <span>Get Twitter on your phone</span>\n  <ul>\n    <li><a href=\"");t.b(t.v(t.f("devices_path",c,p,0)));t.b("\">Set up mobile notifications</a></li>\n");if(t.s(t.f("decider_mobile_download_gallery",c,p,1),c,p,0,180,281,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li><a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("\">Download a Twitter application to your phone</a></li>\n");});c.pop();}t.b("  </ul>\n</li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"getting_started_profile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"profile\">\n  <span>Set up your profile</span>\n  <ul>\n    <li><a href=\"");t.b(t.v(t.f("settings_profile_path",c,p,0)));t.b("\">Upload a profile picture</a></li>\n    <li><a href=\"");t.b(t.v(t.f("settings_profile_path",c,p,0)));t.b("\">Write a short bio</a></li>\n  </ul>\n</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"getting_started_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"tweet\">\n  <span>Write your first Tweet!</span>\n  <ul>\n    <li><a href=\"#\" class=\"new-tweet\">Tell the world what's happening in 140 characters or less</a></li>\n  </ul>\n</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"global_nav_saved_search": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li><a href=\"");t.b(t.v(t.f("saved_search_path",c,p,0)));t.b("\" data-search-query=\"");t.b(t.v(t.f("query",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a></li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"government_account_search": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"government-account-search-outer\">\n  <div class=\"header-inner\">\n    <h2>\n      <span class=\"js-stream-title\">");t.b(t.v(t.f("stream_title",c,p,0)));t.b("</span>\n\n      <small class=\"view-toggler js-view-toggler\"></small>\n    </h2>\n  </div>\n\n  <div class=\"government-account-search-inner\">\n    <h3>Find your elected government representatives</h3>\n    <form class=\"js-government-account-search\" action=\"#\">\n      <input type=\"text\" placeholder=\"Enter your zip code\" name=\"zip\" ");if(t.s(t.f("zip_code",c,p,1),c,p,0,472,492,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("value=\"");t.b(t.v(t.f("zip_code",c,p,0)));t.b("\"");});c.pop();}t.b(">\n      <input type=\"submit\" class=\"btn js-zip-code-btn\" value=\"Search\">\n    </form>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"guest_modal_signup": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div id=\"guest-modal-signup\">\n  <h2>Don't miss any updates on what matters to you. Sign up today and follow these accounts:</h2>\n\n  <ul class=\"users\">\n");if(t.s(t.f("user_data_list",c,p,1),c,p,0,172,202,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_small_list_item0",c,p,"		"));});c.pop();}t.b("  </ul>\n\n  <div class=\"guest-modal-signup-box front-signup\">\n	  <h3>New to Twitter? <em>Join today!</em></h3>\n");t.b(t.rp("partial_signup_form1",c,p,"	  "));t.b("  </div>\n\n</div>\n");return t.fl(); }, partials: {"user_small_list_item0": {name:"user_small_list_item"},"partial_signup_form1": {name:"partial_signup_form"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"home": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dashboard\">\n");if(t.s(t.f("mini_home_profile",c,p,1),c,p,0,48,78,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_home_profile0",c,p,"    "));});c.pop();}t.b(t.rp("japanese_ad_iframe1",c,p,"  "));if(t.s(t.f("follower_request_link",c,p,1),c,p,0,155,237,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"module\">\n");t.b(t.rp("dashboard_follower_request_link2",c,p,"      "));t.b("    </div>\n");});c.pop();}if(t.s(t.f("who_to_follow",c,p,1),c,p,0,284,327,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dashboard_user_recommendations3",c,p,"    "));});c.pop();}t.b(t.rp("dashboard_trends4",c,p,"  "));t.b(t.rp("footer5",c,p,"  "));t.b("</div>\n<div class=\"content-main\" id=\"timeline\">\n  <div class=\"content-header\">\n    <div class=\"header-inner\">\n      <h2 class=\"js-timeline-title\">Tweets</h2>\n    </div>\n  </div>\n");if(t.s(t.f("timeline",c,p,1),c,p,0,577,598,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("timeline6",c,p,"    "));});c.pop();}t.b("</div>\n");t.b(t.rp("dialogs/sensitive_flag_confirmation7",c,p,""));t.b(t.rp("dialogs/trends_dialog_shell8",c,p,""));return t.fl(); }, partials: {"mini_home_profile0": {name:"mini_home_profile"},"japanese_ad_iframe1": {name:"japanese_ad_iframe"},"dashboard_follower_request_link2": {name:"dashboard_follower_request_link"},"dashboard_user_recommendations3": {name:"dashboard_user_recommendations"},"dashboard_trends4": {name:"dashboard_trends"},"footer5": {name:"footer"},"timeline6": {name:"timeline"},"dialogs/sensitive_flag_confirmation7": {name:"dialogs/sensitive_flag_confirmation"},"dialogs/trends_dialog_shell8": {name:"dialogs/trends_dialog_shell"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"home_dashboard": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b("  <div class=\"component\">\n");t.b(t.rp("dashboard_your_profile0",c,p,"  "));t.b("  <hr/>\n  </div>\n\n  <div class=\"component\">\n");t.b(t.rp("generic_footer1",c,p,"  "));t.b("  </div>\n");};return t.fl(); }, partials: {"dashboard_your_profile0": {name:"dashboard_your_profile"},"generic_footer1": {name:"generic_footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"import_disclaimer": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(!t.s(t.f("in_welcome_flow",c,p,1),c,p,1,0,0,"")){t.b("Choosing a service will open a window for you to log in securely and import your contacts to Twitter. You'll only find users who have allowed their accounts to be found by email address.  We won't email anyone without your consent, but we may use contact information to make Who To Follow suggestions.  You can <a href=\"#\" class=\"js-wipe-addressbook\">remove</a> your contacts from Twitter at any time.\n");};if(t.s(t.f("in_welcome_flow",c,p,1),c,p,0,464,823,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Choosing a service will open a window for you to log in securely and import your contacts to Twitter. You'll only find users who have allowed their accounts to be found by email address.  We won't email anyone without your consent, but we may use contact information to make Who To Follow suggestions.  You can remove your contacts from Twitter at any time.\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"in_reply_to": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"permalink-inner in-reply-to\" data-replied-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n  <div class=\"tweets-wrapper\">\n");t.b(t.rp("simple_tweet0",c,p,"    "));t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"simple_tweet0": {name:"simple_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"inline_media_icon": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<i class=\"js-sm-icon ");if(t.s(t.f("is_image",c,p,1),c,p,0,34,43,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" sm-image");});c.pop();}t.b(" ");if(t.s(t.f("is_video",c,p,1),c,p,0,70,79,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" sm-video");});c.pop();}t.b(" ");if(t.s(t.f("is_summary",c,p,1),c,p,0,108,119,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" sm-summary");});c.pop();}t.b(" ");if(t.s(t.f("is_audio",c,p,1),c,p,0,148,157,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" sm-audio");});c.pop();}t.b(" ");if(t.s(t.f("is_geo",c,p,1),c,p,0,182,189,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" sm-geo");});c.pop();}t.b(" ");if(t.s(t.f("is_convo",c,p,1),c,p,0,214,223,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" sm-convo");});c.pop();}t.b(" ");if(t.s(t.f("is_embed",c,p,1),c,p,0,250,259,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" sm-embed");});c.pop();}t.b("\"\n");if(t.s(t.f("icon",c,p,1),c,p,0,283,311,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" data-media-class=\"");t.b(t.v(t.f("icon",c,p,0)));t.b("\"");});c.pop();}t.b(" ");if(t.s(t.f("media_name",c,p,1),c,p,0,336,369,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" data-media-type=\"");t.b(t.v(t.f("media_name",c,p,0)));t.b("\"");});c.pop();}t.b("></i>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"inline_reply_box": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"inline-reply-tweetbox\">\n  <img class=\"inline-reply-user-image avatar size");t.b(t.v(t.f("profile_image_size",c,p,0)));t.b("\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\">\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"invite_contacts": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"invite-contacts-component\">\n  <div class=\"people-chooser-list\">\n    <div class=\"select-all-people\">\n      <div class=\"checkbox\">\n        <span><input type=\"checkbox\" name=\"select_all\" id=\"select-all-contacts\"/></span>\n      </div>\n      <div>\n        <span><label for=\"select-all-contacts\">");t.b(t.v(t.f("select_all_text",c,p,0)));t.b("</label></span>\n      </div>\n    </div>\n    <ul class=\"contacts\">\n");if(t.s(t.f("contacts",c,p,1),c,p,0,406,869,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li>\n          <div class=\"checkbox\">\n            <span><input type=\"checkbox\" name=\"emails[]\" value=\"");t.b(t.v(t.f("email",c,p,0)));t.b("\" id=\"contact-box-");t.b(t.v(t.f("index",c,p,0)));t.b("\"/></span>\n          </div>\n          <div class=\"name\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n            <span><label for=\"contact-box-");t.b(t.v(t.f("index",c,p,0)));t.b("\">");t.b(t.v(t.f("truncated_name",c,p,0)));t.b("</label></span>\n          </div>\n          <div class=\"about\" title=\"");t.b(t.v(t.f("email",c,p,0)));t.b("\">\n            <span>&lt;");t.b(t.v(t.f("truncated_email",c,p,0)));t.b("&gt;</span>\n          </div>\n        </li>\n");});c.pop();}t.b("    </ul>\n  </div>\n\n  <div class=\"list-editor\">\n    <div class=\"save\">\n      <div class=\"invite-preview-link\"><a href=\"");t.b(t.v(t.f("preview_link_url",c,p,0)));t.b("\" class=\"js-popup\" name=\"invitation_email_preview\" data-popup=\"height=450,width=670\">See what you'll send them</a>.</div>\n      <div class=\"btn button invite-contacts-button\">Invite these friends</div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"invite_contacts_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"contact-import-invite-header\">\n  <p>\n    <span>");t.b(t.v(t.f("count",c,p,0)));t.b(" of your contacts aren’t on Twitter yet. We’ll invite the ones you select here.</span>\n  </p>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"invite_friends": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form class=\"invite-friends\">\n  <table class=\"flex-table\">\n    <tbody>\n      <tr>\n        <td class=\"flex-table-primary\">\n          <div class=\"flex-table-form\">\n            \n            \n            <textarea class=\"flex-table-input\" name=\"addresses\" rows=\"1\" placeholder=\"Invite friends to Twitter via email\"></textarea>\n          </div>\n        </td>\n        <td class=\"flex-table-secondary\">\n          <button class=\"btn flex-table-btn js-submit\" type=\"submit\">Invite friends</button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <p class=\"fine-print\">\n    Lots of people to invite? Separate multiple email addresses with commas.<br>\n    <a href=\"");t.b(t.v(t.f("invitation_email_preview_path",c,p,0)));t.b("\" class=\"js-popup\" name=\"invitation_email_preview\" data-popup=\"height=550,width=750\">See what you'll send them.</a>\n  </p>\n</form>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"japanese_ad": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"custom_49\" class=\"eTologyToken\"></div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"japanese_ad_iframe": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("show_japanese_ad",c,p,1),c,p,0,21,231,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <iframe id=\"j_ad\" src=\"//web-jp.ad-v.jp/adam/detect?tag=htm&cat=twitter.all&format=side_banner\" width=\"300\" height=\"185\" frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"javascript_includes": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("\n" + i);t.b("<script type=\"text/javascript\">WATCH('loadrunner', function() {\n    ");t.b(t.t(t.f("loadrunner_script",c,p,0)));t.b("\n" + i);t.b("    ");t.b(t.t(t.f("loadrunner_plugin_json",c,p,0)));t.b("\n" + i);t.b("    ");t.b(t.t(t.f("loadrunner_plugin_css",c,p,0)));t.b("\n" + i);t.b("    ");t.b(t.t(t.f("loadrunner_plugin_signal",c,p,0)));t.b("\n" + i);t.b("});</script><script>WATCH.end('loadrunner');</script>\n\n");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("home_page",c,p,1),c,p,0,443,708,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <script type=\"text/javascript\">WATCH('javascript_logged_out', function() {\n");t.b(t.rp("mini_scribe0",c,p,"      "));t.b("      ");t.b(t.t(t.f("cookie_disabler_selenium",c,p,0)));t.b("\n" + i);t.b("      ");t.b(t.t(t.f("logged_out_js",c,p,0)));t.b("\n" + i);t.b("    });</script>\n    <script type=\"text/javascript\">WATCH.end('javascript_logged_out');</script>\n");});c.pop();}};t.b("\n" + i);if(t.s(t.f("logged_in",c,p,1),c,p,0,753,935,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("render_page_content",c,p,1),c,p,0,780,910,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <script>WATCH('actionQueue', function() {\n    ");t.b(t.t(t.f("action_queue_js",c,p,0)));t.b("\n" + i);t.b("  });</script><script>WATCH.end('actionQueue');</script>\n");});c.pop();}});c.pop();}t.b("\n" + i);t.b("<script>WATCH('boot', function() {\n  using.cssPath = '");t.b(t.t(t.f("loadrunner_csspath",c,p,0)));t.b("';\n  using.path = '");t.b(t.t(t.f("loadrunner_modpath",c,p,0)));t.b("';\n  using.autoLoad = ");t.b(t.t(t.f("loadrunner_autoload",c,p,0)));t.b(";\n\n");if(t.s(t.f("inline_bootstrap_data",c,p,1),c,p,0,1150,1258,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    provide('boot/bootstrap_data', function(exports) {\n      exports(");t.b(t.t(t.f("bootstrap_data_json",c,p,0)));t.b(");\n    });\n");});c.pop();}t.b("\n" + i);t.b("  ");t.b(t.t(t.f("boot_js",c,p,0)));t.b("\n" + i);t.b("  ");t.b(t.t(t.f("inline_request_log_selenium",c,p,0)));t.b("\n" + i);t.b("  using('boot/init', function(boot) {\n    var data = ");t.b(t.t(t.f("boot_data_json",c,p,0)));t.b(";\n    boot.init(data);\n  });\n\n");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("home_page",c,p,1),c,p,0,1476,1628,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("front_page_full_signup_256_old_signup_form",c,p,1),c,p,1,0,0,"")){t.b("        using('bundle/signup').load();\n");};});c.pop();}};t.b("\n" + i);t.b("});</script><script>WATCH.end('boot');</script>\n\n");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("home_page",c,p,1),c,p,0,1741,1876,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("front_page_full_signup_256_old_signup_form",c,p,1),c,p,1,0,0,"")){t.b(t.rp("banned_passwords1",c,p,"      "));};});c.pop();}};t.b("\n");t.b("\n" + i);t.b(t.t(t.f("admin_js",c,p,0)));t.b("\n");t.b("\n" + i);t.b("<!--[if lte IE 6]>\n  <script>using('bundle/ie6').load();</script>\n<![endif]-->\n");return t.fl(); }, partials: {"mini_scribe0": {name:"mini_scribe"},"banned_passwords1": {name:"banned_passwords"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"keyboard_shortcuts": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"keyboard-shortcuts\" id=\"keyboard-shortcut-menu\">\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,78,5299,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <table class=\"modal-table\">\n      <thead>\n        <tr>\n          <th colspan=\"2\">Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">F</b>\n          </td>\n          <td class=\"shortcut-label\">Favorite</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">R</b>\n          </td>\n          <td class=\"shortcut-label\">Reply</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">T</b>\n          </td>\n          <td class=\"shortcut-label\">Retweet</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">M</b>\n          </td>\n          <td class=\"shortcut-label\">Direct message</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">N</b>\n          </td>\n          <td class=\"shortcut-label\">New Tweet</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">Enter</b>\n          </td>\n          <td class=\"shortcut-label\">Open Tweet details</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">L</b>\n          </td>\n          <td class=\"shortcut-label\">Close all open Tweets</td>\n        </tr>\n      </tbody>\n    </table>\n    <table class=\"modal-table\">\n      <thead>\n        <tr>\n          <th colspan=\"2\">Navigation</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">?</b>\n          </td>\n          <td class=\"shortcut-label\">This menu</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">J</b>\n          </td>\n          <td class=\"shortcut-label\">Next Tweet</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">K</b>\n          </td>\n          <td class=\"shortcut-label\">Previous Tweet</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">Space</b>\n          </td>\n          <td class=\"shortcut-label\">Page down</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">/</b>\n          </td>\n          <td class=\"shortcut-label\">Search</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">.</b>\n          </td>\n          <td class=\"shortcut-label\">Load new Tweets</td>\n        </tr>\n      </tbody>\n    </table>\n    <table class=\"modal-table\">\n      <thead>\n        <tr>\n          <th colspan=\"2\">Timelines</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">G</b> <b class=\"sc-key\">H</b>\n          </td>\n          <td class=\"shortcut-label\">Home</td>\n        </tr>\n\n");if(t.s(t.f("decider_activity_read",c,p,1),c,p,0,2935,3657,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("decider_activity_dark_read",c,p,1),c,p,0,2977,3617,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <tr>\n              <td class=\"shortcut\">\n                <b class=\"sc-key\">G</b> <b class=\"sc-key\">C</b>\n              </td>\n              <td class=\"shortcut-label\">Connect</td>\n            </tr>\n            <tr>\n              <td class=\"shortcut\">\n                <b class=\"sc-key\">G</b> <b class=\"sc-key\">A</b>\n              </td>\n              <td class=\"shortcut-label\">Activity</td>\n            </tr>\n            <tr>\n              <td class=\"shortcut\">\n                <b class=\"sc-key\">G</b> <b class=\"sc-key\">R</b>\n              </td>\n              <td class=\"shortcut-label\">Mentions</td>\n            </tr>\n");});c.pop();}});c.pop();}if(!t.s(t.f("decider_activity_read",c,p,1),c,p,1,0,0,"")){t.b("            <tr>\n              <td class=\"shortcut\">\n                <b class=\"sc-key\">G</b> <b class=\"sc-key\">R</b>\n              </td>\n              <td class=\"shortcut-label\">Mentions</td>\n            </tr>\n");};t.b("\n" + i);t.b("        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">G</b> <b class=\"sc-key\">D</b>\n          </td>\n          <td class=\"shortcut-label\">Discover</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">G</b> <b class=\"sc-key\">P</b>\n          </td>\n          <td class=\"shortcut-label\">Profile</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">G</b> <b class=\"sc-key\">F</b>\n          </td>\n          <td class=\"shortcut-label\">Favorites</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">G</b> <b class=\"sc-key\">L</b>\n          </td>\n          <td class=\"shortcut-label\">Lists</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">G</b> <b class=\"sc-key\">M</b>\n          </td>\n          <td class=\"shortcut-label\">Messages</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">G</b> <b class=\"sc-key\">S</b>\n          </td>\n          <td class=\"shortcut-label\">Settings</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">G</b> <b class=\"sc-key\">U</b>\n          </td>\n          <td class=\"shortcut-label\">Go to user...</td>\n        </tr>\n      </tbody>\n    </table>\n");});c.pop();}if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("    <table class=\"modal-table\">\n      <tbody>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">Enter</b>\n          </td>\n          <td class=\"shortcut-label\">Open Tweet details</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">G</b> <b class=\"sc-key\">F</b>\n          </td>\n          <td class=\"shortcut-label\">Go to user...</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">?</b>\n          </td>\n          <td class=\"shortcut-label\">This menu</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">J</b>\n          </td>\n          <td class=\"shortcut-label\">Next Tweet</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">K</b>\n          </td>\n          <td class=\"shortcut-label\">Previous Tweet</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">Space</b>\n          </td>\n          <td class=\"shortcut-label\">Page down</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">/</b>\n          </td>\n          <td class=\"shortcut-label\">Search</td>\n        </tr>\n        <tr>\n          <td class=\"shortcut\">\n            <b class=\"sc-key\">.</b>\n          </td>\n          <td class=\"shortcut-label\">Load new Tweets</td>\n        </tr>\n      </tbody>\n    </table>\n");};t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"language_links": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module language-list\">\n  <div class=\"flex-module\">\n    <div class=\"flex-module-inner js-items-container\">\n      <div class=\"language inline-list\">\n        <form action=\"");t.b(t.v(t.f("change_locale_path",c,p,0)));t.b("\" method=\"POST\">\n          <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n          <input type=\"hidden\" name=\"lang\" value=\"\">\n");if(t.s(t.f("redirect",c,p,1),c,p,0,390,470,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <input type=\"hidden\" name=\"redirect\" value=\"");t.b(t.v(t.f("redirect",c,p,0)));t.b("\">\n");});c.pop();}t.b("          <strong>Languages</strong>\n");if(t.s(t.f("languages_by_own",c,p,1),c,p,0,552,821,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span class=\"dot\">&middot;</span>\n");if(t.s(t.f("current",c,p,1),c,p,0,619,684,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <em class=\"current\">");t.b(t.v(t.f("localized_name",c,p,0)));t.b("</em>\n");});c.pop();}if(!t.s(t.f("current",c,p,1),c,p,1,0,0,"")){t.b("          <a href=\"?lang=");t.b(t.v(t.f("code",c,p,0)));t.b("\" hreflang=\"");t.b(t.v(t.f("code",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n");};});c.pop();}t.b("        </form>\n      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"latest_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet latest-tweet js-actionable-tweet");if(t.s(t.f("hidden_by_activity",c,p,1),c,p,0,73,96,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" sub-stream-item-hidden");});c.pop();}t.b("\" data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-item-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-screen-name='");if(t.s(t.f("user",c,p,1),c,p,0,193,208,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("'>\n  <div class=\"tweet-content\">\n    <div class=\"tweet-row\">\n      ");t.b(t.rp("latest_tweet_timestamp0",c,p,""));t.b(":\n");if(t.s(t.f("was_retweeted",c,p,1),c,p,0,337,431,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"retweet-icon\"></span>\n      ");t.b(t.t(t.f("retweet_source_screen_name_link",c,p,0)));t.b("\n" + i);});c.pop();}t.b("      &#32;");t.b(t.rp("tweet_text1",c,p,""));t.b("\n" + i);t.b("    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {"latest_tweet_timestamp0": {name:"latest_tweet_timestamp"},"tweet_text1": {name:"tweet_text"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"latest_tweet_timestamp": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"");t.b(t.v(t.f("permalink_path",c,p,0)));t.b("\" class=\"latest-tweet-timestamp js-permalink\" title=\"");t.b(t.v(t.f("explicit_timestamp",c,p,0)));t.b("\"><span class=\"_timestamp\" data-time=\"");t.b(t.v(t.f("actual_timestamp",c,p,0)));t.b("\" data-long-form=\"true\">");t.b(t.v(t.f("full_timestamp",c,p,0)));t.b("</span></a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"link_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul>\n");if(t.s(t.f("links",c,p,1),c,p,0,17,231,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li>\n      ");if(t.s(t.f("href",c,p,1),c,p,0,42,73,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<a href=\"");t.b(t.v(t.f("href",c,p,0)));t.b("\">");t.b(t.v(t.f("text",c,p,0)));t.b("</a>");});c.pop();}t.b("\n" + i);t.b("      ");if(!t.s(t.f("href",c,p,1),c,p,1,0,0,"")){t.b("<span>");t.b(t.v(t.f("text",c,p,0)));t.b("</span>");};t.b("\n" + i);t.b("    </li>\n");if(t.s(t.f("separator",c,p,1),c,p,0,157,214,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li class=\"link-separator\">");t.b(t.t(t.f("separator",c,p,0)));t.b("</li>\n");});c.pop();}});c.pop();}t.b("</ul>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"link_simple_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.v(t.f("%IMPLICIT-ITERATOR iterator=link",c,p,0)));t.b("\n" + i);t.b("<ul class=\"thumbs\">\n");if(t.s(t.f("links",c,p,1),c,p,0,69,133,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li><a href=\"");t.b(t.v(t.f("link",c,p,0)));t.b("\" target=\"_blank\">");t.b(t.v(t.f("link",c,p,0)));t.b("</a></li>\n");});c.pop();}t.b("</ul>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_actions": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"list-actions js-list-actions list-actions-");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n");if(t.s(t.f("is_own_list",c,p,1),c,p,0,81,179,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"buttons\">\n");t.b(t.rp("edit_list_button0",c,p,"      "));t.b(t.rp("delete_list_button1",c,p,"      "));t.b("    </div>\n");});c.pop();}if(!t.s(t.f("is_own_list",c,p,1),c,p,1,0,0,"")){t.b("    <div class=\"follow-state\">\n");if(t.s(t.f("following",c,p,1),c,p,0,266,516,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"you-follow\">Following <span class=\"dot\">&middot;</span></span>\n        <a href='#' class=\"unfollow-list-link js-unfollow-list-action\" data-screen-name=\"");if(t.s(t.f("user",c,p,1),c,p,0,449,464,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("\" data-list-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Unfollow</a>\n");});c.pop();}if(!t.s(t.f("following",c,p,1),c,p,1,0,0,"")){t.b("        <div class=\"button follow-list-button js-follow-list-action\" data-screen-name=\"");if(t.s(t.f("user",c,p,1),c,p,0,648,663,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("\" data-list-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n          <span class=\"plus\"></span> <strong>Follow this list</strong>\n        </div>\n");};t.b("    </div>\n");};t.b("</div>");return t.fl(); }, partials: {"edit_list_button0": {name:"edit_list_button"},"delete_list_button1": {name:"delete_list_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"list-editor\">\n  <div class=\"field\">\n    <label for=\"list-name\">List name</label>\n    <input type=\"text\" class=\"text\" name=\"name\" value=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" />\n  </div>\n  <div class=\"field\" style=\"display:none\">\n    <label for=\"list-link\">List link</label>\n    <span>");t.b(t.v(t.f("full_name",c,p,0)));t.b("</span>\n  </div>\n  <hr/>\n\n  <div class=\"field\">\n    <label for=\"description\">Description</label>\n    <textarea name=\"description\">");t.b(t.v(t.f("description",c,p,0)));t.b("</textarea>\n    <span class=\"help-text\">Under 100 characters, optional</span>\n  </div>\n  <hr/>\n\n  <div class=\"field\">\n    <label for=\"mode\">Privacy</label>\n    <div class=\"options\">\n      <label for=\"list-public-radio\">\n        <input class=\"radio\" type=\"radio\" name=\"mode\" id=\"list-public-radio\" value=\"public\" ");if(t.s(t.f("swift",c,p,1),c,p,0,781,798,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=\"checked\"");});c.pop();}t.b(" ");if(!t.s(t.f("swift",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("is_public",c,p,1),c,p,0,833,850,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=\"checked\"");});c.pop();}};t.b(" />\n        <b>Public</b> &middot; Anyone can follow this list\n      </label>\n      <label for=\"list-private-radio\">\n        <input class=\"radio\" type=\"radio\" name=\"mode\" id=\"list-private-radio\" value=\"private\" ");if(!t.s(t.f("swift",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("is_public",c,p,1),c,p,1,0,0,"")){t.b("checked=\"checked\"");};};t.b(" />\n        <b>Private</b> &middot; Only you can access this list\n      </label>\n    </div>\n  </div>\n  <hr/>\n\n  <div class=\"list-editor-save\">\n    <div class=\"button btn btn-primary update-list-button\" data-list-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Save list</div>\n  </div>\n\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_follow_actions": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_own_list",c,p,1),c,p,0,16,308,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <a class=\"btn js-edit-list-action\" data-screen-name=\"");if(t.s(t.f("user",c,p,1),c,p,0,81,96,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("\" data-list-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" title=\"Edit\">\n    Edit\n  </a>\n\n  <a class=\"btn js-delete-list-action\" data-screen-name=\"");if(t.s(t.f("user",c,p,1),c,p,0,226,241,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("\" data-list-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" title=\"Delete\">\n    Delete\n  </a>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("is_own_list",c,p,1),c,p,1,0,0,"")){t.b("  <a class=\"btn subscribe-btn ");if(!t.s(t.f("following",c,p,1),c,p,1,0,0,"")){t.b("not-");};t.b("subscribed ");if(!t.s(t.f("following",c,p,1),c,p,1,0,0,"")){t.b("js-follow-list-action");};t.b(" ");if(t.s(t.f("following",c,p,1),c,p,0,480,503,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("js-unfollow-list-action");});c.pop();}t.b("\" data-screen-name=\"");if(t.s(t.f("user",c,p,1),c,p,0,546,561,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("\" data-list-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n    <div class=\"subscribe-text\">\n      <i class=\"subscribe-text\"></i>\n      Subscribe\n    </div>\n    <div class=\"remove-text\">\n      Unsubscribe from list\n    </div>\n  </a>\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_follow_card": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"flex-module\">\n  <div class=\"flex-module-header\">\n    <h1 class=\"js-list-name\">");t.b(t.v(t.f("name",c,p,0)));t.b("</h1>\n    <p class=\"metadata\">\n");if(t.s(t.f("is_public",c,p,1),c,p,0,147,175,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      A public list by\n");});c.pop();}if(!t.s(t.f("is_public",c,p,1),c,p,1,0,0,"")){t.b("      A private list by\n");};t.b("    ");if(t.s(t.f("user",c,p,1),c,p,0,265,440,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a></p>\n    <a class=\"list-author\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\"><img class=\"avatar size32 \" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\"></a>\n");});c.pop();}t.b("  </div>\n  <div class=\"flex-module-inner description\">\n    <p class=\"bio ");if(t.s(t.f("description_is_rtl",c,p,1),c,p,0,546,565,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("bio-description-rtl");});c.pop();}t.b("\">");t.b(t.v(t.f("description",c,p,0)));t.b("</p>\n  </div>\n</div>\n\n");t.b(t.rp("list_follow_card_stats0",c,p,""));t.b("\n" + i);if(t.s(t.f("logged_in",c,p,1),c,p,0,670,802,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"follow-card-footer\">\n    <div class=\"follow-bar js-list-actions\">\n");t.b(t.rp("list_follow_actions1",c,p,"      "));t.b("    </div>\n  </div>\n");});c.pop();}return t.fl(); }, partials: {"list_follow_card_stats0": {name:"list_follow_card_stats"},"list_follow_actions1": {name:"list_follow_actions"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_follow_card_stats": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"stats\">\n  <li><a href=\"");t.b(t.v(t.f("list_members_path",c,p,0)));t.b("\"><strong>");t.b(t.v(t.f("member_count",c,p,0)));t.b("</strong> Members</a></li>\n  <li><a href=\"");t.b(t.v(t.f("list_subscribers_path",c,p,0)));t.b("\"><strong>");t.b(t.v(t.f("subscriber_count",c,p,0)));t.b("</strong> Subscribers</a></li>\n</ul>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"list-info\">\n  <h2 class=\"full-name\">");t.b(t.v(t.f("name",c,p,0)));t.b("</h2>\n  <p class=\"description\">");t.b(t.v(t.f("description",c,p,0)));t.b("</p>\n  <hr/>\n  <div class=\"things-below-the-hr\">\n    <div class='list-creator clearfix'>\n");if(t.s(t.f("user",c,p,1),c,p,0,206,292,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <img id='profile-picture' src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\"/>\n");});c.pop();}t.b("      <p>\n");if(t.s(t.f("is_public",c,p,1),c,p,0,334,384,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          A <strong>public</strong> list\n");});c.pop();}if(!t.s(t.f("is_public",c,p,1),c,p,1,0,0,"")){t.b("          A <strong>private</strong> list\n");};t.b("        <br />\n");if(t.s(t.f("user",c,p,1),c,p,0,519,602,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span>Curated by <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</span></a>\n");});c.pop();}t.b("      </p>\n    </div>\n\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,653,740,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"list-actions-component\">\n");t.b(t.rp("list_actions0",c,p,"        "));t.b("      </div>\n");});c.pop();}t.b("  </div>\n</div>\n<!-- todo: put the list actions here with display:none rather than appending them in js ( twttr.components.pages.List.renderListInfo() ) -->");return t.fl(); }, partials: {"list_actions0": {name:"list_actions"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_link": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class=\"list\"><a class=\"pretty-link twitter-timeline-link list-link\" data-list-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" href=\"");t.b(t.v(t.f("user_list_path",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("full_name",c,p,0)));t.b("\"\n  ><s>@</s><b>");t.b(t.v(t.f("full_name_sans_at",c,p,0)));t.b("</b></a></span>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_membership_content": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"add-to-list-prompt ");if(t.s(t.f("has_lists",c,p,1),c,p,0,45,54,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("has-lists");});c.pop();}t.b("\">\n  <p>Include <span class=\"pretty-link\"><s>@</s><b>");if(t.s(t.f("user",c,p,1),c,p,0,130,145,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("</b></span> in:</p>\n</div>\n<ul class=\"list-membership-container\" data-user-id=\"");if(t.s(t.f("user",c,p,1),c,p,0,242,248,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("id",c,p,0)));});c.pop();}t.b("\">\n");if(t.s(t.f("items",c,p,1),c,p,0,272,303,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("checkbox_list_item0",c,p,"    "));});c.pop();}t.b("  <li class=\"btn create-a-list\">Create a list</li>\n</ul>");return t.fl(); }, partials: {"checkbox_list_item0": {name:"checkbox_list_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"main-content\">\n  ");t.b(t.t(t.f("noscript",c,p,0)));t.b("\n" + i);if(t.s(t.f("list",c,p,1),c,p,0,57,320,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"list-header user-sidebar-color\">\n        <div class=\"js-list-header-container\">\n");t.b(t.rp("list_header0",c,p,"          "));t.b("        </div>\n        <ul class=\"stream-tabs\">\n");t.b(t.rp("list_stream_tabs1",c,p,"          "));t.b("        </ul>\n      </div>\n");t.b(t.rp("stream_manager2",c,p,"      "));});c.pop();}t.b("  ");t.b(t.t(t.f("end_noscript",c,p,0)));t.b("\n" + i);t.b("</div>\n<div class=\"dashboard\"></div>\n");t.b(t.rp("details_pane_container3",c,p,""));return t.fl(); }, partials: {"list_header0": {name:"list_header"},"list_stream_tabs1": {name:"list_stream_tabs"},"stream_manager2": {name:"stream_manager"},"details_pane_container3": {name:"details_pane_container"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_stream_tabs": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"stream-tab stream-tab-tweets ");if(t.s(t.f("active_tab_tweets",c,p,1),c,p,0,62,68,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n  <a class=\"tab-text\" href=\"");t.b(t.v(t.f("user_list_path",c,p,0)));t.b("\">Tweets</a>\n</li>\n<li class=\"stream-tab stream-tab-members ");if(t.s(t.f("active_tab_members",c,p,1),c,p,0,222,228,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n  <a class=\"tab-text\" href=\"");t.b(t.v(t.f("list_members_path",c,p,0)));t.b("\">Following: <strong>");t.b(t.v(t.f("member_count",c,p,0)));t.b("</strong></a>\n</li>\n<li class=\"stream-tab stream-tab-followers ");if(t.s(t.f("active_tab_followers",c,p,1),c,p,0,428,434,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n  <a class=\"tab-text\" href=\"");t.b(t.v(t.f("list_subscribers_path",c,p,0)));t.b("\">Followers: <strong>");t.b(t.v(t.f("subscriber_count",c,p,0)));t.b("</strong></a>\n</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"list_stream_title": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span>\n  ");t.b(t.v(t.f("full_name",c,p,0)));t.b("\n" + i);t.b("</span>\n");if(t.s(t.f("showTitleLink",c,p,1),c,p,0,49,139,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <a class='go-to-list-page' href='");t.b(t.v(t.f("user_list_path",c,p,0)));t.b("'>\n    View list page &rarr;\n  </a>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"lists_stream_view_toggler": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("stream_view_toggler0",c,p,""));return t.fl(); }, partials: {"stream_view_toggler0": {name:"stream_view_toggler"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"local_trend_location": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<dd><a href='#' data-woeid=\"");t.b(t.v(t.f("woeid",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("<span></span></a></dd>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"local_trend_location_new": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li>\n  <a href=\"#\" class=\"trends-location-item js-trend-link\" data-woeid=\"");t.b(t.v(t.f("woeid",c,p,0)));t.b("\">\n    ");t.b(t.v(t.f("name",c,p,0)));t.b("\n" + i);t.b("    <i class=\"checkmark\"></i>\n  </a>\n</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"local_trends": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<dl class=\"local-trends-list\">\n  <dt>Countries</dt>\n");if(t.s(t.f("country_locations",c,p,1),c,p,0,76,109,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("local_trend_location0",c,p,"    "));});c.pop();}t.b("</dl>\n<dl class=\"local-trends-list\">\n  <dt>Cities</dt>\n");if(t.s(t.f("city_locations",c,p,1),c,p,0,208,241,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("local_trend_location1",c,p,"    "));});c.pop();}t.b("</dl>\n");return t.fl(); }, partials: {"local_trend_location0": {name:"local_trend_location"},"local_trend_location1": {name:"local_trend_location"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"local_trends_new": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("show_personalized",c,p,1),c,p,0,22,57,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("trends_personalized_dialog0",c,p,"  "));});c.pop();}if(!t.s(t.f("show_personalized",c,p,1),c,p,1,0,0,"")){t.b("  <div class=\"trends-breadcrumb\">\n");t.b(t.rp("trends_dialog_breadcrumbs1",c,p,"    "));t.b("  </div>\n  <div class=\"trends-locations clearfix\">\n    <ul class=\"trends-locations-list\">\n");if(t.s(t.f("locations0",c,p,1),c,p,0,283,328,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("local_trend_location_new2",c,p,"        "));});c.pop();}t.b("    </ul>\n    <ul class=\"trends-locations-list\">\n");if(t.s(t.f("locations1",c,p,1),c,p,0,414,459,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("local_trend_location_new3",c,p,"        "));});c.pop();}t.b("    </ul>\n    <ul class=\"trends-locations-list\">\n");if(t.s(t.f("locations2",c,p,1),c,p,0,545,590,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("local_trend_location_new4",c,p,"        "));});c.pop();}t.b("    </ul>\n  </div>\n");};return t.fl(); }, partials: {"trends_personalized_dialog0": {name:"trends_personalized_dialog"},"trends_dialog_breadcrumbs1": {name:"trends_dialog_breadcrumbs"},"local_trend_location_new2": {name:"local_trend_location_new"},"local_trend_location_new3": {name:"local_trend_location_new"},"local_trend_location_new4": {name:"local_trend_location_new"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"login_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas\">\n\n  <div class=\"signin-wrapper\" data-login-message=\"");t.b(t.v(t.f("show_must_login_message",c,p,0)));t.b("\">\n    <h1>Sign in to Twitter</h1>\n    <form action=\"");t.b(t.v(t.f("sessions_path",c,p,0)));t.b("\" class=\"clearfix signin js-signin\" method=\"post\">\n");t.b(t.rp("signin_form_textbox0",c,p,"      "));t.b("      <div class=\"captcha js-captcha\">\n");if(t.s(t.f("should_render_captcha",c,p,1),c,p,0,329,368,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("shared/captcha1",c,p,"          "));});c.pop();}t.b("      </div>\n");t.b(t.rp("signin_form_subchck2",c,p,"      "));t.b("    </form>\n  </div>\n\n  <div class=\"clearfix mobile has-sms\">\n    Already using Twitter via text message?\n    <a href=\"");t.b(t.v(t.f("mobile_complete_path",c,p,0)));t.b("\">Activate your account&#32;&raquo;</a>\n  </div>\n\n</div>\n");return t.fl(); }, partials: {"signin_form_textbox0": {name:"signin_form_textbox"},"shared/captcha1": {name:"shared/captcha"},"signin_form_subchck2": {name:"signin_form_subchck"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"logout_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas signout-page\">\n  <div class=\"signout-wrapper\">\n    <form action=\"");t.b(t.v(t.f("logout_action_path",c,p,0)));t.b("\" class=\"signout\" method=\"post\">\n      <input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\"/>\n      <h1><strong>Sign out</strong> of Twitter?</h1>\n      <div class=\"buttons-arrow\"></div>\n      <div class=\"buttons\">\n        <div class=\"btn cancel\">Cancel</div>\n        <div class=\"btn primary-btn js-submit\">Sign out</div>\n      </div>\n      <div class=\"aside\">\n        <p>\n          You can always sign back in at any time.\n        </p>\n      </div>\n    </form>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"machine_translated_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"machine-translated-tweet js-machine-translated-tweet\">\n  <div class=\"machine-translated-text\">");t.b(t.t(t.f("translated_text",c,p,0)));t.b("</div>\n  <div class=\"machine-translated-meta\">");t.b(t.t(t.f("attribution",c,p,0)));t.b("</div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"malware_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_dm",c,p,1),c,p,0,10,102,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Oops! A URL in your message appears to link to a page that has spammy or unsafe content.\n");});c.pop();}if(!t.s(t.f("is_dm",c,p,1),c,p,1,0,0,"")){t.b("  Oops! A URL in your Tweet appears to link to a page that has spammy or unsafe content.\n");};t.b("<a href=\"");t.b(t.v(t.f("malware_learn_more_path",c,p,0)));t.b("\" target=\"_blank\" class=\"learn-more\">Learn more</a>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"matched_contact_user": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-item-content find-friends-result js-actionable-user\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(">\n  <a class=\"account-group js-account-group\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">\n    <img class=\"avatar size128\" src=\"");t.b(t.v(t.f("reasonably_small_profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n    <strong class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n    <small class=\"username\"><s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);if(t.s(t.f("verified",c,p,1),c,p,0,453,493,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <i class=\"verified\"></i>\n");});c.pop();}if(t.s(t.f("protected",c,p,1),c,p,0,527,566,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <i class=\"sm-lock\"></i>\n");});c.pop();}t.b("    </small>\n  </a>\n\n  <span class=\"small-follow-all-wrapper\">\n");t.b(t.rp("combo_follow_button0",c,p,"    "));t.b("  </span>\n\n</div>\n");return t.fl(); }, partials: {"combo_follow_button0": {name:"combo_follow_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"events_media_photo": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" target=\"_blank\" data-href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-url=\"");t.b(t.v(t.f("media_url",c,p,0)));t.b("\" ");if(t.s(t.f("resolved_url",c,p,1),c,p,0,96,132,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-resolved-url=\"");t.b(t.v(t.f("resolved_url",c,p,0)));t.b("\"");});c.pop();}t.b(" class=\"media-thumbnail\"></a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"events_media_thumbnails": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"photo-strip\">\n  <div class=\"inner-shadow\"></div>\n  <ul class=\"photo-list\">\n");if(t.s(t.f("items",c,p,1),c,p,0,101,142,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("media/events_media_photo0",c,p,"      "));});c.pop();}t.b("  </ul>\n</div>");return t.fl(); }, partials: {"media/events_media_photo0": {name:"media/events_media_photo"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"media_photo": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span data-href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-url=\"");t.b(t.v(t.f("media_url",c,p,0)));t.b("\" ");if(t.s(t.f("resolved_url",c,p,1),c,p,0,68,104,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-resolved-url=\"");t.b(t.v(t.f("resolved_url",c,p,0)));t.b("\"");});c.pop();}t.b(" class=\"media-thumbnail\"></span>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"media_thumbnails": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"media-thumbnails ");if(t.s(t.f("class_name",c,p,1),c,p,0,43,57,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("class_name",c,p,0)));});c.pop();}t.b(" ");if(t.s(t.f("is_video",c,p,1),c,p,0,86,98,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("media-videos");});c.pop();}t.b("\">\n  <a href=\"");t.b(t.v(t.f("view_all_path",c,p,0)));t.b("\" class=\"list-link\">\n    <div class=\"media-header\">\n      ");t.b(t.v(t.f("title",c,p,0)));t.b("\n" + i);t.b("      <i class=\"chev-right\"></i>\n    </div>\n    <div class=\"media-row\">\n      <div class=\"media-row-content\">\n");if(t.s(t.f("items",c,p,1),c,p,0,338,513,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_video",c,p,1),c,p,0,362,408,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("media/media_video0",c,p,"            "));});c.pop();}if(!t.s(t.f("is_video",c,p,1),c,p,1,0,0,"")){t.b(t.rp("media/media_photo1",c,p,"            "));};});c.pop();}t.b("      </div>\n    </div>\n  </a>\n</li>");return t.fl(); }, partials: {"media/media_video0": {name:"media/media_video"},"media/media_photo1": {name:"media/media_photo"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"media_video": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span data-url=\"");t.b(t.v(t.f("media_url",c,p,0)));t.b("\" ");if(t.s(t.f("resolved_url",c,p,1),c,p,0,48,84,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-resolved-url=\"");t.b(t.v(t.f("resolved_url",c,p,0)));t.b("\"");});c.pop();}t.b(" class=\"media-thumbnail video\">\n  <i class=\"play\"></i>\n</span>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"media_attribution": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='media-attribution'>\n  <img src='");t.b(t.v(t.f("icon_url",c,p,0)));t.b("'/>\n  <a target='_blank' data-media-type='");t.b(t.v(t.f("media_type",c,p,0)));t.b("' class='media-attribution-link' href='");t.b(t.v(t.f("url",c,p,0)));t.b("'>\n    ");t.b(t.v(t.f("title",c,p,0)));t.b("\n" + i);t.b("  </a>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"media_gallery_controls": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"media-gallery-controls\">\n  <div class=\"media-gallery-back-nav\">&larr; <span>");t.b(t.v(t.f("back_text",c,p,0)));t.b("</span></div>\n");if(t.s(t.f("is_search",c,p,1),c,p,0,129,472,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"media-gallery-title\">\n    <span class=\"media-gallery-bird\"></span>\n");if(t.s(t.f("mode_photos",c,p,1),c,p,0,231,297,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <span>Top images for <strong>");t.b(t.v(t.f("query",c,p,0)));t.b("</strong></span>\n");});c.pop();}if(t.s(t.f("mode_videos",c,p,1),c,p,0,334,400,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <span>Top videos for <strong>");t.b(t.v(t.f("query",c,p,0)));t.b("</strong></span>\n");});c.pop();}t.b("    <div class=\"media-gallery-loading\"></div>\n  </div>\n");});c.pop();}if(t.s(t.f("is_usermedia",c,p,1),c,p,0,504,773,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"media-gallery-title\">\n    <span class=\"media-gallery-bird\"></span>\n    <span>Recent images by <a class=\"controls-profile-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\"><em class=\"at\">@</em>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a></span>\n    <div class=\"media-gallery-loading\"></div>\n  </div>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("disable_grid",c,p,1),c,p,1,0,0,"")){t.b("  <div class=\"media-gallery-buttons ");if(t.s(t.f("disable_thumbs",c,p,1),c,p,0,867,876,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("no-thumbs");});c.pop();}t.b("\">\n    <div class=\"toggle-set\">\n      <div title=\"View detail\" class=\"toggle-button detailview ");if(t.s(t.f("is_detail_view",c,p,1),c,p,0,1009,1017,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected");});c.pop();}t.b("\">\n        <span></span>\n      </div>\n      <div class=\"divider\"></div>\n      <div title=\"View all\" class=\"toggle-button gridview ");if(t.s(t.f("is_grid_view",c,p,1),c,p,0,1183,1191,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected");});c.pop();}t.b("\">\n        <span></span>\n      </div>\n    </div>\n  </div>\n");};t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"media_gallery_no_results": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"media-gallery-no-results\">\n");if(t.s(t.f("is_search",c,p,1),c,p,0,55,280,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("mode_photos",c,p,1),c,p,0,76,150,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      Sorry, there are no top images for <strong>");t.b(t.v(t.f("query",c,p,0)));t.b("</strong>.\n");});c.pop();}if(t.s(t.f("mode_videos",c,p,1),c,p,0,187,261,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      Sorry, there are no top videos for <strong>");t.b(t.v(t.f("query",c,p,0)));t.b("</strong>.\n");});c.pop();}});c.pop();}if(t.s(t.f("is_usermedia",c,p,1),c,p,0,314,386,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    Sorry, there are no recent images for <em>@</em>");t.b(t.v(t.f("screen_name",c,p,0)));t.b(".\n");});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"media_gallery_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='media-gallery-overlay'>\n  <div class='media-gallery-content'></div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"media_not_displayed": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b("<div class='media-not-displayed'>\n  <h2>We can't show you everything!</h2>\n\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,117,701,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("possibly_sensitive",c,p,1),c,p,0,145,314,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <p>Your <a href=\"");t.b(t.v(t.f("settings_path",c,p,0)));t.b("\" target=\"_blank\">media display settings</a> are set up to hide photos and videos that might contain sensitive content.</p>\n");});c.pop();}if(!t.s(t.f("possibly_sensitive",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("not_following",c,p,1),c,p,0,390,555,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <p>Your <a href=\"");t.b(t.v(t.f("settings_path",c,p,0)));t.b("\" target=\"_blank\">media display settings</a> are set up to hide photos and videos from people you don't follow.</p>\n");});c.pop();}};t.b("    <p>Lucky for you, that's easy to <a href=\"");t.b(t.v(t.f("settings_path",c,p,0)));t.b("\" target=\"_blank\">change</a>.</p>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("possibly_sensitive",c,p,1),c,p,0,761,857,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <p>We automatically hide photos and videos that might contain sensitive content.</p>\n");});c.pop();}t.b("   <p>Sign in to apply your media display settings. Don't have an account? <a href=\"");t.b(t.v(t.f("signup_path",c,p,0)));t.b("\" target=\"_blank\">Sign up!</a></p>\n");};t.b("\n" + i);t.b("  <div class=\"btn button display-this-media\">\n    Display this\n  </div>\n\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,1122,1219,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    &middot;\n    <a href=\"#\" class=\"always-display-media\">Always display media like this.</a>\n");});c.pop();}t.b("</div>\n");};if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,1290,2157,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"media-not-displayed\">\n  <h2>We can't show you everything!</h2>\n\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,1383,1645,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <p>Your <a href=\"/settings/account\" target=\"_blank\">media display settings</a> are set up to hide photos and videos that might contain sensitive content.</p>\n    <p>Lucky for you, that's easy to <a href=\"/settings/account\" target=\"_blank\">change</a>.</p>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("    <p>We automatically hide photos and videos that might contain sensitive content.</p>\n    <p>Sign in to apply your media display settings. Don't have an account? <a href=\"/signup\" target=\"_blank\">Sign up!</a></p>\n");};t.b("\n" + i);t.b("  <button type=\"button\" class=\"btn display-this-media\">\n    Display this\n  </button>\n\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,2014,2135,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    &middot;\n    <button type=\"button\" class=\"btn-link always-display-media\">Always display media like this.</button>\n");});c.pop();}t.b("</div>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"media_slideshow": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"media-slideshow-wrapper\">\n  <div class=\"media-slideshow-thumbnails\"></div>\n  <div class=\"media-slideshow-content\">\n    <div class=\"media-slideshow-pictures\">\n      <div class=\"media-slideshow-picture\">\n        <div class=\"media-slideshow-media-container\"></div>\n      </div>\n      <div class=\"media-control-button prev\">\n        <div class=\"media-control-button-arrow\"></div>\n      </div>\n      <div class=\"media-control-button next\">\n        <div class=\"media-control-button-arrow\"></div>\n      </div>\n    </div>\n    <div class=\"media-slideshow-tweet\"></div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"media_slideshow_not_found": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"media-slideshow-not-found\">\n  Sorry, we couldn't find that!\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"media_type_container": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"media-instance-container ");t.b(t.v(t.f("media_type_class",c,p,0)));t.b("-container\" data-url-id=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-media-type=\"");t.b(t.v(t.f("media_type",c,p,0)));t.b("\"></div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mentioned_in_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"mentioned-in-tweet\">\n  <h3>Mentioned in this Tweet</h3>\n  <ul class=\"clearfix\">\n");if(t.s(t.f("mentioned_users",c,p,1),c,p,0,114,145,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_detailed_list0",c,p,"    "));});c.pop();}t.b("  </ul>\n</div>\n");return t.fl(); }, partials: {"user_detailed_list0": {name:"user_detailed_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mentions_stream_view_toggler": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("stream_view_toggler0",c,p,""));return t.fl(); }, partials: {"stream_view_toggler0": {name:"stream_view_toggler"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-message message-item message-temp\" data-message-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-thread-id=\"");t.b(t.v(t.f("thread_id",c,p,0)));t.b("\">\n  <div class=\"message-inner\">\n");if(t.s(t.f("sender",c,p,1),c,p,0,152,334,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <img src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"thumb user-profile-link\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n    <span class=\"user-name\">\n");t.b(t.rp("message_user_name0",c,p,"      "));t.b("    </span>\n");});c.pop();}t.b("    <div class=\"message-content\">\n      <div class=\"linked-text\">");t.b(t.t(t.f("linkified_text",c,p,0)));t.b("</div>\n      <div class=\"message-footer\">\n        <span class=\"created-at\"><span class=\"_timestamp\" data-time=\"");t.b(t.v(t.f("actual_timestamp",c,p,0)));t.b("\" data-long-form=\"true\" data-include-sec=\"true\">");t.b(t.v(t.f("timestamp",c,p,0)));t.b("</span></span>\n        <a class=\"js-delete-message delete-action\" href=\"#\"><span class=\"icon delete-icon\"></span> <b>Delete</b></a>\n      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {"message_user_name0": {name:"message_user_name"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"message_thread": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"messages-pane js-modal-scrollable js-twttr-dialog-not-draggable\" data-thread-id=\"");t.b(t.v(t.f("thread_id",c,p,0)));t.b("\">\n");if(t.s(t.f("items",c,p,1),c,p,0,121,141,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("message0",c,p,"    "));});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"message0": {name:"message"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"message_thread_preview": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-message message-item message-temp ");if(t.s(t.f("has_new_message",c,p,1),c,p,0,69,82,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" new-messages");});c.pop();}t.b("\" data-modal=\"message-thread\">\n  <div class=\"status\">\n    <i class=\"unread private\"></i>\n  </div>\n  <div class=\"content\">\n    <div class=\"stream-item-header\">\n      <small class=\"time\">\n        ");if(t.s(t.f("last_message",c,p,1),c,p,0,313,342,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<a href=\"#\">");t.b(t.v(t.f("timestamp",c,p,0)));t.b("</a>");});c.pop();}t.b("\n" + i);t.b("      </small>\n      <div>\n");if(t.s(t.f("other_person",c,p,1),c,p,0,412,606,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <img class=\"avatar\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\"/>\n          <strong class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n          <span class=\"username\">@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span>\n");});c.pop();}t.b("      </div>\n    </div>\n    <p class=\"js-last-message-text\">");if(t.s(t.f("last_message",c,p,1),c,p,0,701,709,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("text",c,p,0)));});c.pop();}t.b("</p>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"message_user_name": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class=\"user-profile-name\" title='");t.b(t.v(t.f("name",c,p,0)));t.b("'>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"messages_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"main-content messages-main-content\">\n  ");t.b(t.t(t.f("noscript",c,p,0)));t.b("\n" + i);t.b("    <div class=\"messages-header header\">\n      <h1>Messages</h1><div class=\"new-message-button js-new-message-button button\">New Message</div>\n    </div>\n");t.b(t.rp("stream_manager0",c,p,"    "));t.b("  ");t.b(t.t(t.f("end_noscript",c,p,0)));t.b("\n" + i);t.b("</div>\n");t.b(t.rp("details_pane_container1",c,p,""));return t.fl(); }, partials: {"stream_manager0": {name:"stream_manager"},"details_pane_container1": {name:"details_pane_container"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mini_current_user": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" class=\"account-summary account-summary-small\" data-nav=\"profile\">\n	<div class=\"content\">\n	  <div class=\"account-group js-mini-current-user\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n	    <img class=\"avatar size32\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n	    <b class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</b>\n	    <small class=\"metadata\">View my profile page</small>\n	  </div>\n	</div>\n</a>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mini_home_profile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module mini-profile\">\n\n  <div class=\"flex-module profile-summary js-profile-summary\">\n");if(t.s(t.f("user",c,p,1),c,p,0,111,145,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_current_user0",c,p,"      "));});c.pop();}t.b("  </div>\n\n");if(!t.s(t.f("short_profile",c,p,1),c,p,1,0,0,"")){t.b("    <div class=\"js-mini-profile-stats-container\">\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,266,345,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("stats",c,p,1),c,p,0,285,328,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_profile_stats1",c,p,"          "));});c.pop();}});c.pop();}t.b("    </div>\n\n");if(t.s(t.f("swift",c,p,1),c,p,0,396,509,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"home-tweet-box tweet-box component tweet-user\">\n");t.b(t.rp("swift_tweet_box2",c,p,"        "));t.b("      </div>\n");});c.pop();}if(!t.s(t.f("swift",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,565,642,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"component tweet-user tweetbox-placeholder\"></div>\n");});c.pop();}};};t.b("</div>\n");return t.fl(); }, partials: {"mini_current_user0": {name:"mini_current_user"},"mini_profile_stats1": {name:"mini_profile_stats"},"swift_tweet_box2": {name:"swift_tweet_box"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mini_profile_stats": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"stats js-mini-profile-stats\">\n   <li><a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-element-term=\"tweet_stats\" data-nav='profile'>\n      \n        ");if(t.s(t.f("statuses_count_one",c,p,1),c,p,0,165,216,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<strong>");t.b(t.v(t.f("statuses_count_commaized",c,p,0)));t.b("</strong> Tweet");});c.pop();}t.b("\n" + i);t.b("        ");if(t.s(t.f("statuses_count_other",c,p,1),c,p,0,273,325,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<strong>");t.b(t.v(t.f("statuses_count_commaized",c,p,0)));t.b("</strong> Tweets");});c.pop();}t.b("\n" + i);t.b("      \n    </a></li>\n");if(t.s(t.f("swift",c,p,1),c,p,0,384,704,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li><a href=\"");t.b(t.v(t.f("following_path",c,p,0)));t.b("\" data-element-term=\"following_stats\" data-nav='following'><strong>");t.b(t.v(t.f("friends_count_commaized",c,p,0)));t.b("</strong> Following</a></li>\n    <li><a href=\"");t.b(t.v(t.f("followers_path",c,p,0)));t.b("\" data-element-term=\"follower_stats\" data-nav='followers'><strong>");t.b(t.v(t.f("followers_count_commaized",c,p,0)));t.b("</strong> Followers</a></li>\n");});c.pop();}if(!t.s(t.f("swift",c,p,1),c,p,1,0,0,"")){t.b("    <li><a href=\"");if(t.s(t.f("is_current_user",c,p,1),c,p,0,765,783,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("following_path",c,p,0)));});c.pop();}if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("user_following_path",c,p,0)));};t.b("\" data-element-term=\"following_stats\" data-nav='following'><strong>");t.b(t.v(t.f("friends_count_commaized",c,p,0)));t.b("</strong> Following</a></li>\n    <li><a href=\"");if(t.s(t.f("is_current_user",c,p,1),c,p,0,1026,1044,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("followers_path",c,p,0)));});c.pop();}if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("user_followers_path",c,p,0)));};t.b("\" data-element-term=\"follower_stats\" data-nav='followers'><strong>");t.b(t.v(t.f("followers_count_commaized",c,p,0)));t.b("</strong> Followers</a></li>\n");};t.b("</ul>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mini_profile_user": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"account-summary\">\n  <div class=\"content\">\n    <a class=\"account-group js-account-group js-bubble-event\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-element-term=\"view_profile_link\">\n      <img class=\"avatar\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      <b class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</b>\n    </a>\n    ");if(t.s(t.f("verified",c,p,1),c,p,0,336,360,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified\"></i>");});c.pop();}t.b("\n" + i);t.b("    <small class=\"metadata\">\n      <a class=\"js-screen-name\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\"><s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a>\n");if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b("        <span class=\"js-follows-you maybe-follows-you\">follows you</span>\n");};t.b("      ");if(t.s(t.f("protected",c,p,1),c,p,0,635,658,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"sm-lock\"></i>");});c.pop();}t.b("\n" + i);t.b("    </small>\n    ");if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("location",c,p,1),c,p,0,727,791,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<small class=\"location js-profile-location\">");t.b(t.v(t.f("location",c,p,0)));t.b("</small>");});c.pop();}};t.b("\n" + i);t.b("    <small><a class=\"view-profile js-mini-profile-user\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-element-term=\"view_profile_link\">\n");if(t.s(t.f("is_current_user",c,p,1),c,p,0,974,1012,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        View your profile page\n");});c.pop();}if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b("        View @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("'s profile page\n");};t.b("    </a></small>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mini_scribe": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("function miniScribe(eName,more,cat){\nvar log=[],cat=cat||'client_event',more=more||{};more.event_name=eName;for(var k in more){log.push('\"'+k+'\":\"'+more[k]+'\"');};\n(new Image()).src='");t.b(t.v(t.f("scribe_path",c,p,0)));t.b("?category='+encodeURIComponent(cat)+'&log='+encodeURIComponent('{'+log.join(',')+'}')+'&ts='+(+new Date);\n}");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mini_social_proof": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<p class=\"social-proof\">\n");if(t.s(t.f("mini_social_proof_context",c,p,1),c,p,0,57,1336,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("shared_count_1",c,p,1),c,p,0,81,163,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      Followed by ");if(t.s(t.f("follower_0",c,p,1),c,p,0,115,142,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link0",c,p,""));});c.pop();}t.b(".\n");});c.pop();}if(t.s(t.f("shared_count_2",c,p,1),c,p,0,206,356,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      Followed by ");if(t.s(t.f("follower_0",c,p,1),c,p,0,240,267,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link1",c,p,""));});c.pop();}t.b(" and\n      ");if(t.s(t.f("follower_1",c,p,1),c,p,0,308,335,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link2",c,p,""));});c.pop();}t.b(".\n");});c.pop();}if(t.s(t.f("shared_count_3",c,p,1),c,p,0,399,614,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      Followed by ");if(t.s(t.f("follower_0",c,p,1),c,p,0,433,460,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link3",c,p,""));});c.pop();}t.b(",\n      ");if(t.s(t.f("follower_1",c,p,1),c,p,0,498,525,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link4",c,p,""));});c.pop();}t.b(" and\n      ");if(t.s(t.f("follower_2",c,p,1),c,p,0,566,593,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link5",c,p,""));});c.pop();}t.b(".\n");});c.pop();}if(t.s(t.f("shared_count_4",c,p,1),c,p,0,657,937,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      Followed by ");if(t.s(t.f("follower_0",c,p,1),c,p,0,691,718,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link6",c,p,""));});c.pop();}t.b(",\n      ");if(t.s(t.f("follower_1",c,p,1),c,p,0,756,783,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link7",c,p,""));});c.pop();}t.b(",\n      ");if(t.s(t.f("follower_2",c,p,1),c,p,0,821,848,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link8",c,p,""));});c.pop();}t.b(" and\n      ");if(t.s(t.f("follower_3",c,p,1),c,p,0,889,916,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link9",c,p,""));});c.pop();}t.b(".\n");});c.pop();}if(t.s(t.f("shared_count_more",c,p,1),c,p,0,983,1311,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      Followed by ");if(t.s(t.f("follower_0",c,p,1),c,p,0,1017,1044,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link10",c,p,""));});c.pop();}t.b(",\n      ");if(t.s(t.f("follower_1",c,p,1),c,p,0,1082,1109,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link11",c,p,""));});c.pop();}t.b(",\n      ");if(t.s(t.f("follower_2",c,p,1),c,p,0,1147,1174,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_social_proof_link12",c,p,""));});c.pop();}t.b(" and\n      <a href=\"");t.b(t.v(t.f("followers_you_follow_url",c,p,0)));t.b("\" class=\"pretty-link\"><b>");t.b(t.v(t.f("remaining_follower_count",c,p,0)));t.b(" others</b></a>.\n");});c.pop();}});c.pop();}t.b("</p>\n");return t.fl(); }, partials: {"mini_social_proof_link0": {name:"mini_social_proof_link"},"mini_social_proof_link1": {name:"mini_social_proof_link"},"mini_social_proof_link2": {name:"mini_social_proof_link"},"mini_social_proof_link3": {name:"mini_social_proof_link"},"mini_social_proof_link4": {name:"mini_social_proof_link"},"mini_social_proof_link5": {name:"mini_social_proof_link"},"mini_social_proof_link6": {name:"mini_social_proof_link"},"mini_social_proof_link7": {name:"mini_social_proof_link"},"mini_social_proof_link8": {name:"mini_social_proof_link"},"mini_social_proof_link9": {name:"mini_social_proof_link"},"mini_social_proof_link10": {name:"mini_social_proof_link"},"mini_social_proof_link11": {name:"mini_social_proof_link"},"mini_social_proof_link12": {name:"mini_social_proof_link"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mini_social_proof_link": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"show-popup-with-id\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"apps": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas\">\n\n  <div class=\"gallery-link\">\n    <a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b(t.v(t.f("lang_param",c,p,0)));t.b("\">&larr; Back to Mobile</a>\n  </div>\n\n  <div class=\"mobile-gallery-app mobile-gallery-");t.b(t.v(t.f("app_id",c,p,0)));t.b("\">\n    <div class=\"mobile-gallery-app-wrapper\">\n      <div class=\"app-header\">\n        <h2>");t.b(t.v(t.f("app_short_name",c,p,0)));t.b("</h2>\n        <p class=\"compatibility\">");t.b(t.v(t.f("compatibility",c,p,0)));t.b("</p>\n      </div>\n      <div class=\"actions actions-single yes-script ");if(!t.s(t.f("no_camera",c,p,1),c,p,1,0,0,"")){t.b(" qr-code-actions ");};t.b("\">\n");if(t.s(t.f("app_link",c,p,1),c,p,0,498,637,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"app-link\">\n          <p>URL:</p>\n          <a href=\"");t.b(t.v(t.f("app_link",c,p,0)));t.b("\" class=\"js-app-link\">");t.b(t.v(t.f("app_link",c,p,0)));t.b("</a>\n        </div>\n");});c.pop();}if(!t.s(t.f("no_download",c,p,1),c,p,1,0,0,"")){t.b("        <div class=\"app-download\">\n          <a class=\"btn signup-btn promotional\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" target=\"_blank\">Download now</a>\n        </div>\n        <form class=\"app-download-form dialog-form\" method=\"post\" action=\"send_link\">\n          <p>Or email a link to your ");t.b(t.v(t.f("device_noun",c,p,0)));t.b(" to download: ");t.b(t.v(t.f("download_notice",c,p,0)));t.b("</p>\n          <fieldset>\n            <div class=\"field\">\n              <input type=\"hidden\" name=\"appId\" value=\"");t.b(t.v(t.f("app_id",c,p,0)));t.b("\">\n              <input type=\"email\" autocomplete=\"off\" class=\"email\" name=\"email\" placeholder=\"Email address\">\n              <input type='submit' class=\"btn primary-btn submit js-submit\" value=\"Send link\">\n	          <span class=\"notification\"></span>\n            </div>\n          </fieldset>\n        </form>\n");};if(t.s(t.f("qr_code_url",c,p,1),c,p,0,1451,1615,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"qr-code\">\n          <p>QR Code:</p>\n          <img width=\"");t.b(t.v(t.f("qr_code_width",c,p,0)));t.b("\" height=\"");t.b(t.v(t.f("qr_code_height",c,p,0)));t.b("\" src=\"");t.b(t.v(t.f("qr_code_url",c,p,0)));t.b("\">\n        </div>\n");});c.pop();}t.b("      </div>\n    </div>\n  </div>\n\n  <div class=\"mobile-download clearfix\">\n\n    <table class=\"mobile-footer mobile-footer-app\" cellpadding=\"0\">\n      <tbody>\n        <tr>\n          <td>\n            <h4>What’s happening?</h4>\n            <p>\n              Discover what’s happening right now, anywhere in the world, with the official ");t.b(t.v(t.f("app_long_name",c,p,0)));t.b(" app.\n            </p>\n          </td>\n          <td>\n            <h4>What matters to you</h4>\n            <p>\n              Search, Top Tweets, trending topics, and maps show what’s happening everywhere and nearby.\n            </p>\n          </td>\n          <td>\n            <h4>Communicate easily</h4>\n            <p>\n");if(!t.s(t.f("no_video",c,p,1),c,p,1,0,0,"")){t.b("              Tweet, send messages, share photos, videos, and links with your friends and the world.\n");};if(t.s(t.f("no_video",c,p,1),c,p,0,2486,2593,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              Tweet, send messages, share photos and links with your friends and the world.\n");});c.pop();}t.b("            </p>\n          </td>\n          <td>\n            <h4>It’s free!</h4>\n            <p>\n              Don't have an account? Just sign up from the app! Questions? See <a href=\"");t.b(t.v(t.f("support_url",c,p,0)));t.b("\">Twitter Support: ");t.b(t.v(t.f("app_long_name",c,p,0)));t.b("</a>\n            </p>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n\n");t.b(t.rp("footer0",c,p,""));return t.fl(); }, partials: {"footer0": {name:"footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"firefox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("firefox_download0",c,p,""));t.b(t.rp("footer1",c,p,""));return t.fl(); }, partials: {"firefox_download0": {name:"firefox_download"},"footer1": {name:"footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"gallery": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("mobile_gallery_all0",c,p,""));t.b(t.rp("dialogs/mobile_gallery_download_dialog1",c,p,""));t.b(t.rp("footer2",c,p,""));return t.fl(); }, partials: {"mobile_gallery_all0": {name:"mobile_gallery_all"},"dialogs/mobile_gallery_download_dialog1": {name:"dialogs/mobile_gallery_download_dialog"},"footer2": {name:"footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mobile_gallery_all": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas\">\n\n  <h1>");if(!t.s(t.f("logged_out_justnow",c,p,1),c,p,1,0,0,"")){t.b("Take Twitter with you. Get the app.");};if(t.s(t.f("logged_out_justnow",c,p,1),c,p,0,137,188,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<b>You’ve signed out of Twitter.</b> Now go mobile.");});c.pop();}t.b("</h1>\n\n  <ul class=\"gallery\">\n    <li><a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("/iphone");t.b(t.v(t.f("lang_param",c,p,0)));t.b("\" class=\"mobile-app iphone\"><i></i><br/><span>iPhone</span></a></li>\n    <li><a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("/android");t.b(t.v(t.f("lang_param",c,p,0)));t.b("\" class=\"mobile-app android\"><i></i><br/><span>Android</span></a></li>\n    <li><a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("/ipad");t.b(t.v(t.f("lang_param",c,p,0)));t.b("\" class=\"mobile-app ipad\"><i></i><br/><span>iPad</span></a></li>\n");if(t.s(t.f("lang_ja",c,p,1),c,p,0,640,901,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li><a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("/iappli");t.b(t.v(t.f("lang_param",c,p,0)));t.b("\" class=\"mobile-app iappli\"><i></i><br/><span>iAppli</span></a></li>\n    <li><a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("/twtrjp");t.b(t.v(t.f("lang_param",c,p,0)));t.b("\" class=\"mobile-app twtrjp\"><i></i><br/><span>Keitai</span></a></li>\n");});c.pop();}if(!t.s(t.f("lang_ja",c,p,1),c,p,1,0,0,"")){t.b("    <li><a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("/blackberry");t.b(t.v(t.f("lang_param",c,p,0)));t.b("\" class=\"mobile-app blackberry\"><i></i><br/><span>BlackBerry</span></a></li>\n");};t.b("    <li><a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("/wp7");t.b(t.v(t.f("lang_param",c,p,0)));t.b("\" class=\"mobile-app wp7\"><i></i><br/><span>Windows Phone 7</span></a></li>\n  </ul>\n\n  <div class=\"mobile-download clearfix\">\n    <div class=\"actions yes-script\">\n      <div class=\"download-info\">\n        <a class=\"promotional download-now btn signup-btn\">Download now</a>&nbsp;<a class=\"btn primary-btn activate-sms has-sms\" href=\"");t.b(t.v(t.f("devices_settings_path",c,p,0)));t.b("\">Use via text message</a>\n      </div>\n    </div>\n\n    <table class=\"mobile-footer mobile-footer-home\" cellpadding=\"0\">\n      <tbody>\n        <tr>\n          <td>\n            <p>Have your device with you?<br/><a href=\"http://m.twitter.com\">Visit m.twitter.com on your device &raquo;</a></p>\n          </td>\n          <td>\n            <p>Questions about using Twitter mobile?<br/><a href=\"");t.b(t.v(t.f("mobile_help_path",c,p,0)));t.b("\">Visit our Mobile Help Center &raquo;</a></p>\n          </td>\n          <td>\n");if(t.s(t.f("logged_out_totally",c,p,1),c,p,0,2017,2156,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <p>Already using Twitter via text message?<br/><a href=\"");t.b(t.v(t.f("mobile_complete_path",c,p,0)));t.b("\">Complete signup &raquo;</a></p>\n");});c.pop();}if(!t.s(t.f("logged_out_totally",c,p,1),c,p,1,0,0,"")){t.b("            <p>Privacy controls &amp; notification settings?<br/><a href=\"");t.b(t.v(t.f("devices_path",c,p,0)));t.b("\">Visit our Mobile Settings page &raquo;</a></p>\n");};t.b("          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mobile_gallery_app": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"page-canvas\">\n\n  <div class=\"gallery-link\">\n    <a href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("\">&larr; Back to Mobile</a>\n  </div>\n\n  <div class=\"mobile-gallery-app mobile-gallery-");t.b(t.v(t.f("app_id",c,p,0)));t.b("\">\n    <div class=\"mobile-gallery-app-wrapper\">\n      <div class=\"app-header\">\n        <h2>");t.b(t.v(t.f("app_short_name",c,p,0)));t.b("</h2>\n        <p class=\"compatibility\">");t.b(t.v(t.f("compatibility",c,p,0)));t.b("</p>\n      </div>\n      <div class=\"actions actions-single yes-script ");if(!t.s(t.f("no_camera",c,p,1),c,p,1,0,0,"")){t.b(" qr-code-actions ");};t.b("\">\n");if(t.s(t.f("app_link",c,p,1),c,p,0,484,623,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"app-link\">\n          <p>URL:</p>\n          <a href=\"");t.b(t.v(t.f("app_link",c,p,0)));t.b("\" class=\"js-app-link\">");t.b(t.v(t.f("app_link",c,p,0)));t.b("</a>\n        </div>\n");});c.pop();}if(!t.s(t.f("no_download",c,p,1),c,p,1,0,0,"")){t.b("        <div class=\"app-download\">\n          <a class=\"btn signup-btn promotional\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" target=\"_blank\">Download now</a>\n        </div>\n        <form class=\"app-download-form dialog-form\">\n          <p>Or email a link to your ");t.b(t.v(t.f("device_noun",c,p,0)));t.b(" to download: ");t.b(t.v(t.f("download_notice",c,p,0)));t.b("</p>\n          <fieldset>\n            <div class=\"field\">\n              <input type=\"hidden\" name=\"appId\" value=\"");t.b(t.v(t.f("app_id",c,p,0)));t.b("\" />\n              <input type=\"email\" autocomplete=\"off\" class=\"email\" name=\"email\" placeholder=\"Email address\"><div class=\"btn submit js-submit\">Send link</div>\n              \n              <div class='label'></div>\n            </div>\n          </fieldset>\n        </form>\n");};if(t.s(t.f("qr_code_url",c,p,1),c,p,0,1369,1533,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"qr-code\">\n          <p>QR Code:</p>\n          <img width=\"");t.b(t.v(t.f("qr_code_width",c,p,0)));t.b("\" height=\"");t.b(t.v(t.f("qr_code_height",c,p,0)));t.b("\" src=\"");t.b(t.v(t.f("qr_code_url",c,p,0)));t.b("\">\n        </div>\n");});c.pop();}t.b("      </div>\n    </div>\n  </div>\n\n  <div class=\"mobile-download clearfix\">\n\n    <table class=\"mobile-footer mobile-footer-app\" cellpadding=\"0\">\n      <tbody>\n        <tr>\n          <td>\n            <h4>What’s happening?</h4>\n            <p>\n              Discover what’s happening right now, anywhere in the world, with the official ");t.b(t.v(t.f("app_long_name",c,p,0)));t.b(" app.\n            </p>\n          </td>\n          <td>\n            <h4>What matters to you</h4>\n            <p>\n              Search, Top Tweets, trending topics, and maps show what’s happening everywhere and nearby.\n            </p>\n          </td>\n          <td>\n            <h4>Communicate easily</h4>\n            <p>\n");if(!t.s(t.f("no_video",c,p,1),c,p,1,0,0,"")){t.b("              Tweet, send messages, share photos, videos, and links with your friends and the world.\n");};if(t.s(t.f("no_video",c,p,1),c,p,0,2404,2511,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              Tweet, send messages, share photos and links with your friends and the world.\n");});c.pop();}t.b("            </p>\n          </td>\n          <td>\n            <h4>It’s free!</h4>\n            <p>\n              Don't have an account? Just sign up from the app! Questions? See <a href=\"");t.b(t.v(t.f("support_url",c,p,0)));t.b("\">Twitter Support: ");t.b(t.v(t.f("app_long_name",c,p,0)));t.b("</a>\n            </p>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mobile_gallery_logged_out_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"mobile-gallery-logged-out-header\">\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mobile_gallery_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("render_page_content",c,p,1),c,p,0,24,307,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("firefox",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("app_id",c,p,1),c,p,0,55,90,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mobile_gallery_app0",c,p,"      "));});c.pop();}if(!t.s(t.f("app_id",c,p,1),c,p,1,0,0,"")){t.b(t.rp("mobile_gallery_all1",c,p,"      "));};};if(t.s(t.f("firefox",c,p,1),c,p,0,193,222,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("firefox_download2",c,p,"    "));});c.pop();}t.b("\n" + i);t.b("  <div class=\"logged-out\">\n    <div class=\"bottompart\"></div>\n  </div>\n");});c.pop();}return t.fl(); }, partials: {"mobile_gallery_app0": {name:"mobile_gallery_app"},"mobile_gallery_all1": {name:"mobile_gallery_all"},"firefox_download2": {name:"firefox_download"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"module": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module ");t.b(t.v(t.f("class_name",c,p,0)));t.b("\"></div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"module_section": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<");t.b(t.v(t.f("tag",c,p,0)));t.b(" data-section-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"></");t.b(t.v(t.f("tag",c,p,0)));t.b(">");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"more_css": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_t1",c,p,1),c,p,0,10,100,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("t1_more_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\" />\n");});c.pop();}if(!t.s(t.f("is_t1",c,p,1),c,p,1,0,0,"")){t.b("  <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("phoenix_more_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\" />\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"more_lists": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module\">\n  <div class=\"flex-module\">\n");if(t.s(t.f("user",c,p,1),c,p,0,62,290,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"flex-module-header\">\n        <h3>More lists by <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a></h3>\n        <small class=\"view-all\">&middot; <a href=\"");t.b(t.v(t.f("user_lists_path",c,p,0)));t.b("\">View all</a></small>\n      </div>\n");});c.pop();}if(t.s(t.f("lists",c,p,1),c,p,0,314,524,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"flex-module-inner\">\n        <ul class=\"list-of-lists\">\n");if(t.s(t.f("items",c,p,1),c,p,0,408,482,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <li><a href=\"");t.b(t.v(t.f("user_list_path",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a></li>\n");});c.pop();}t.b("        </ul>\n      </div>\n");});c.pop();}if(t.s(t.f("show_new_list_link",c,p,1),c,p,0,562,597,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("create_list_button0",c,p,"      "));});c.pop();}t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"create_list_button0": {name:"create_list_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"mute_users": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"muted-users\">\n  <div class=\"input-autocomplete\">\n    <input type=\"text\" size=\"20\" class=\"mute-input\"/> <a href=\"#\" class=\"button\">Add</a>\n  </div>\n  <ul class=\"muted-user-list\"></ul>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"nav": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module ");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n  <ul class=\"js-items-container\">\n");if(t.s(t.f("items",c,p,1),c,p,0,78,143,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("visible",c,p,1),c,p,0,97,126,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("nav_item0",c,p,"        "));});c.pop();}});c.pop();}t.b("  </ul>\n</div>");return t.fl(); }, partials: {"nav_item0": {name:"nav_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"nav_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"js-sidenav-link");if(t.s(t.f("active",c,p,1),c,p,0,37,44,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" active");});c.pop();}t.b("\" data-name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-element-term=\"");t.b(t.v(t.f("element_term",c,p,0)));t.b("\">\n  <a class=\"list-link\" href=\"");t.b(t.v(t.f("route",c,p,0)));t.b("\">\n    ");t.b(t.v(t.f("title",c,p,0)));t.b("\n" + i);t.b("    ");if(t.s(t.f("count",c,p,1),c,p,0,185,219,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<small>");t.b(t.v(t.f("count_commaized",c,p,0)));t.b("</small>");});c.pop();}t.b("\n" + i);t.b("    <i class=\"chev-right\"></i>\n    ");if(t.s(t.f("show_metadata_container",c,p,1),c,p,0,293,349,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"js-metadata metadata\">");t.b(t.t(t.f("metadata",c,p,0)));t.b("</span>");});c.pop();}t.b("\n" + i);t.b("  </a>\n</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"new_message_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"btn js-new-message-button\" href=\"#\" data-modal=\"dm-new\">New message</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"new_signup_call_out": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module signup-call-out search-signup-call-out\">\n  <div class=\"flex-module\">\n    <div class=\"flex-module-header profile-signup\">\n      <h2>");if(t.s(t.f("query",c,p,1),c,p,0,160,192,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Get instant updates on ");t.b(t.v(t.f("query",c,p,0)));});c.pop();}if(!t.s(t.f("query",c,p,1),c,p,1,0,0,"")){t.b("New to Twitter?");};t.b(" <small>Join Twitter today</small></h2>\n    </div>\n");t.b(t.rp("partial_signup_form0",c,p,"    "));t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"partial_signup_form0": {name:"partial_signup_form"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"newest_list_members": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module\">\n  <div class=\"flex-module\">\n");if(t.s(t.f("list",c,p,1),c,p,0,60,241,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"flex-module-header\">\n      <h3>Recently added members</h3>\n      <small class=\"view-all\">&middot; <a href=\"");t.b(t.v(t.f("list_members_path",c,p,0)));t.b("\">View all</a></small>\n    </div>\n");});c.pop();}t.b("    <div class=\"flex-module-inner js-recent-members\">\n");if(t.s(t.f("members",c,p,1),c,p,0,321,353,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_small_list0",c,p,"      "));});c.pop();}t.b("    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {"user_small_list0": {name:"user_small_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"no_letter_start_list_name_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Oops! List names can't start with a number.\n<a href=\"");t.b(t.v(t.f("list_name_error_learn_more_path",c,p,0)));t.b("\" target=\"_blank\" class=\"learn-more\">Learn more</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"no_list_members": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-placeholder centered-placeholder\">\n  <div class=\"stream-end-inner\">\n    <p>This list doesn’t follow any users yet. It probably will soon, though.</p>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"no_lists": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"empty-drop-down\">\n  <div class=\"no-lists title\">You don't have any lists yet.</div>\n  <p class=\"no-lists info\">\n    Create a custom timeline of Tweets by adding users to a list (<a href=\"");t.b(t.v(t.f("lists_help_path",c,p,0)));t.b("\" target=\"_blank\">see how</a>). You can also follow lists curated by others.\n  </p>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"no_saved_searches": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"empty-drop-down\">\n  <div class=\"no-saved-searches title\">You haven't saved any searches yet.</div>\n  <p class=\"no-saved-searches info\">\n    Click on \"Save this search\" from the results page to quickly access the latest Tweets about a topic or query, right from here. <a href=\"");t.b(t.v(t.f("saved_searches_help_path",c,p,0)));t.b("\" target=\"_blank\">Learn More</a>\n  </p>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"noscript_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"banner-outer\">\n  <div class=\"banner\">\n    <div class=\"banner-inside noscript-warning\">\n      <h5>Twitter.com makes heavy use of JavaScript.</h5>\n      <span class=\"warning\">If you cannot enable it in your browser's preferences, you may have a better experience on our <a href=\"http://m.twitter.com\">mobile site</a>.</span>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"not_following_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("You cannot send messages to users who are not following you.");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"not_found_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_user_not_found",c,p,1),c,p,0,22,60,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Sorry, we couldn't find that user.\n");});c.pop();}if(t.s(t.f("is_generic",c,p,1),c,p,0,98,130,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Sorry, something went wrong.\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"nothing": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<!-- nothing! -->");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"onebox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"onebox ");if(t.s(t.f("is_new_search_header_available",c,p,1),c,p,0,54,72,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("ddg-192-new-header");});c.pop();}t.b("\">\n  <div class=\"js-onebox-container onebox-inner ");if(t.s(t.f("is_new_search_header_available",c,p,1),c,p,0,192,210,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("ddg-192-new-header");});c.pop();}t.b("\"></div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"other_user_suspended_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_follow",c,p,1),c,p,0,14,67,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Sorry, the user you tried to follow is suspended.\n");});c.pop();}if(!t.s(t.f("is_follow",c,p,1),c,p,1,0,0,"")){t.b("  Sorry, that user is suspended.\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"page_profile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(!t.s(t.f("render_withheld",c,p,1),c,p,1,0,0,"")){t.b(t.rp("top_content0",c,p,""));t.b(t.rp("dashboard1",c,p,""));t.b(t.rp("content2",c,p,""));};if(t.s(t.f("render_withheld",c,p,1),c,p,0,107,881,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"permalink-header\"></div>\n<div class=\"permalink\">\n  <div class=\"components-above\"></div>\n  <div class=\"components-middle\">\n    <div class=\"tweet js-actionable-tweet permalink-tweet permalink-tweet-withheld\">\n");if(t.s(t.f("profile_user",c,p,1),c,p,0,350,760,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"tweet-row\">\n        <div class=\"tweet-user-withheld\">\n          @");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" withheld\n        </div>\n      </div>\n      <div class=\"tweet-row\">\n        ");t.b(t.v(t.f("description",c,p,0)));t.b(" <a href=");if(t.s(t.f("is_withheld_copyright",c,p,1),c,p,0,575,609,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\"");t.b(t.v(t.f("withheld_copyright_help_path",c,p,0)));t.b("\"");});c.pop();}if(!t.s(t.f("is_withheld_copyright",c,p,1),c,p,1,0,0,"")){t.b("\"");t.b(t.v(t.f("withheld_help_path",c,p,0)));t.b("\"");};t.b(" target=\"_blank\">Learn more</a>\n      </div>\n");});c.pop();}t.b("    </div>\n  </div>\n  <div class=\"components-below\"></div>\n</div>\n<div class=\"permalink-footer\"></div>\n");});c.pop();}return t.fl(); }, partials: {"top_content0": {name:"top_content"},"dashboard1": {name:"dashboard"},"content2": {name:"content"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"partial": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("t1 partial\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"partial_signup_form": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form action=\"");t.b(t.v(t.f("signup_path",c,p,0)));t.b("\" class=\"clearfix signup\" method=\"post\">\n  <div class=\"holding name\">\n    <input type=\"text\" autocomplete=\"off\" name=\"user[name]\" maxlength=\"20\">\n    <span class=\"holder\">Full name</span>\n  </div>\n  <div class=\"holding email\">\n    <input class=\"email-input\" type=\"text\" autocomplete=\"off\" name=\"user[email]\">\n    <span class=\"holder\">Email</span>\n  </div>\n  <div class=\"holding password\">\n    <input type=\"password\" name=\"user[user_password]\">\n    <span class=\"holder\">Password</span>\n  </div>\n");if(t.s(t.f("screen_name",c,p,1),c,p,0,541,608,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <input name=\"follow\" type=\"hidden\" value=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n");});c.pop();}t.b("  <input type=\"hidden\" value=\"");t.b(t.v(t.f("signup_source",c,p,0)));t.b("\" name=\"context\">\n  <input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\"/>\n  <input name=\"follows\" type=\"hidden\" value=\"");t.b(t.v(t.f("screen_names",c,p,0)));t.b("\">\n  <input type=\"submit\" class=\"btn signup-btn js-submit js-signup-btn\" value=\"");if(t.s(t.f("in_profile_page",c,p,1),c,p,0,938,1333,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("abtest_japanese_signup_text_profile_232_any_bucket",c,p,1),c,p,1,0,0,"")){t.b("Sign up");};if(t.s(t.f("abtest_japanese_signup_text_profile_232_signup_text1",c,p,1),c,p,0,1112,1142,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Sign up (Registration is free)");});c.pop();}if(t.s(t.f("abtest_japanese_signup_text_profile_232_signup_text2",c,p,1),c,p,0,1256,1276,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Registration is free");});c.pop();}});c.pop();}if(!t.s(t.f("in_profile_page",c,p,1),c,p,1,0,0,"")){t.b("Sign up");};t.b("\">\n</form>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"people_results": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<h2>People results for&nbsp;<strong>");t.b(t.v(t.f("query",c,p,0)));t.b("</strong> &middot;\n	<a class=\"view-all\" href=\"");if(t.s(t.f("logged_in",c,p,1),c,p,0,105,134,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("who_to_follow_search_path",c,p,0)));});c.pop();}if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("user_search_path",c,p,0)));};t.b("\">view all</a>\n</h2>\n<ul class='people-results clearfix'>\n");if(t.s(t.f("found_people",c,p,1),c,p,0,273,301,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_small_list0",c,p,"    "));});c.pop();}t.b("</ul>\n");return t.fl(); }, partials: {"user_small_list0": {name:"user_small_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"people_search": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form class=\"js-search-form content-searchbar\">\n  <table class=\"flex-table\">\n    <tbody>\n      <tr>\n        <td class=\"flex-table-primary\">\n          <div class=\"flex-table-form\">\n            <input class=\"flex-table-input search-query\" type=\"text\" name=\"q\" ");if(t.s(t.f("query",c,p,1),c,p,0,268,285,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("value=\"");t.b(t.v(t.f("query",c,p,0)));t.b("\"");});c.pop();}t.b(" placeholder=\"");t.b(t.v(t.f("placeholder",c,p,0)));t.b("\">\n          </div>\n        </td>\n        <td class=\"flex-table-secondary\">\n          <button class=\"btn flex-table-btn js-submit\" type=\"submit\">");t.b(t.v(t.f("button_text",c,p,0)));t.b("</button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</form>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"permalink_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"permalink-header\"></div>\n<div class=\"permalink\">\n\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,88,172,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("include_embed_link",c,p,1),c,p,0,116,146,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dialogs/embed0",c,p,"      "));});c.pop();}});c.pop();}t.b("\n" + i);t.b("  <div class=\"components-above\">\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,259,418,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("in_reply_to",c,p,1),c,p,0,282,397,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"component\" data-component-term=\"in_reply_to\">\n");t.b(t.rp("in_reply_to1",c,p,"          "));t.b("        </div>\n");});c.pop();}});c.pop();}t.b("  </div>\n  <div class=\"components-middle\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,514,579,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("tweet",c,p,1),c,p,0,531,564,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("single_tweet2",c,p,"        "));});c.pop();}});c.pop();}t.b("  </div>\n  <div class=\"components-below\">\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,674,754,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("render_withheld",c,p,1),c,p,1,0,0,"")){t.b(t.rp("replies3",c,p,"        "));};});c.pop();}t.b("  </div>\n</div>\n<div class=\"permalink-footer\">\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,852,1022,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("status",c,p,1),c,p,0,889,973,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("user",c,p,1),c,p,0,907,957,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("permalink_signup_call_out4",c,p,"          "));});c.pop();}});c.pop();}};t.b(t.rp("footer5",c,p,"    "));});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"dialogs/embed0": {name:"dialogs/embed"},"in_reply_to1": {name:"in_reply_to"},"single_tweet2": {name:"single_tweet"},"replies3": {name:"replies"},"permalink_signup_call_out4": {name:"permalink_signup_call_out"},"footer5": {name:"footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"permalink_photo_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"media-gallery-overlay swift\">\n  <div class=\"media-gallery-content big-photo-permalink media-slideshow-tweet\">\n");if(t.s(t.f("tweet",c,p,1),c,p,0,136,168,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("slideshow_tweet0",c,p,"      "));});c.pop();}if(t.s(t.f("photo",c,p,1),c,p,0,193,399,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("large",c,p,1),c,p,0,210,384,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"media-gallery-image-wrapper\">\n          <img class=\"large media-slideshow-image\" alt=\"\" src=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" height=\"");t.b(t.v(t.f("h",c,p,0)));t.b("\" width=\"");t.b(t.v(t.f("w",c,p,0)));t.b("\">\n        </div>\n");});c.pop();}});c.pop();}t.b("  </div>\n</div>");return t.fl(); }, partials: {"slideshow_tweet0": {name:"slideshow_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"permalink_signup_call_out": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module signup-call-out\">\n  <div class=\"flex-module\">\n    <div class=\"flex-module-header\">\n      <h2>Don’t miss any updates from ");t.b(t.v(t.f("name",c,p,0)));t.b(" <small>Join Twitter today and follow what interests you!</small></h2>\n    </div>\n");t.b(t.rp("partial_signup_form0",c,p,"    "));if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,287,321,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("sms_follow_prompt1",c,p,"      "));});c.pop();}if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b(t.rp("sms_follow2",c,p,"      "));};t.b("  </div>\n</div>");return t.fl(); }, partials: {"partial_signup_form0": {name:"partial_signup_form"},"sms_follow_prompt1": {name:"sms_follow_prompt"},"sms_follow2": {name:"sms_follow"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"permission_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Your account may not be allowed to perform this action. Please <a class=\"js-reload\" href=\"#\">refresh the page</a> and try again.");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phoenix": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<!DOCTYPE html>\n<html");if(t.s(t.f("nav_highlight_class_name",c,p,1),c,p,0,50,111,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" data-nav-highlight-class-name=\"");t.b(t.v(t.f("nav_highlight_class_name",c,p,0)));t.b("\"");});c.pop();}t.b(">\n  <head>\n    \n");t.b(t.rp("phoenix_head0",c,p,"    "));t.b("\n" + i);if(t.s(t.f("is_t1",c,p,1),c,p,0,193,687,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("escaped_js_redirect_path",c,p,1),c,p,0,229,366,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <script type=\"text/javascript\">\n        \n          window.location.replace('");t.b(t.v(t.f("escaped_js_redirect_path",c,p,0)));t.b("');\n      </script>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("logged_in",c,p,1),c,p,0,417,519,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("t1_core_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\" />\n");});c.pop();}if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("        <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("t1_core_logged_out_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\" />\n");};t.b("\n" + i);});c.pop();}if(!t.s(t.f("is_t1",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("logged_in",c,p,1),c,p,0,733,1045,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("inline_core_css",c,p,1),c,p,0,762,858,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <style type=\"text/css\" media=\"screen\">");t.b(t.t(t.f("phoenix_core_css_content",c,p,0)));t.b("</style>\n");});c.pop();}if(!t.s(t.f("inline_core_css",c,p,1),c,p,1,0,0,"")){t.b("          <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("phoenix_core_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\" />\n");};});c.pop();}if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("        <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("phoenix_core_logged_out_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\" />\n");};t.b("\n" + i);if(t.s(t.f("render_page_content",c,p,1),c,p,0,1244,1397,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("no_script",c,p,1),c,p,0,1267,1376,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <link rel=\"stylesheet\" href=\"/phoenix/css/noscript.css\" type=\"text/css\" media=\"screen\" />\n");});c.pop();}});c.pop();}};t.b("\n" + i);if(t.s(t.f("render_page_content",c,p,1),c,p,0,1466,1527,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <link rel=\"canonical\" href=\"");t.b(t.v(t.f("canonical_url",c,p,0)));t.b("\" />\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("noscript_detection",c,p,1),c,p,0,1580,1744,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <noscript>\n");if(t.s(t.f("noscript_url",c,p,1),c,p,0,1623,1704,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <meta http-equiv=refresh content=\"0; URL=");t.b(t.v(t.f("noscript_url",c,p,0)));t.b("\" />\n");});c.pop();}t.b("      </noscript>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("theme_user",c,p,1),c,p,0,1788,1933,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_t1",c,p,1),c,p,0,1805,1837,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_css_t11",c,p,"        "));});c.pop();}if(!t.s(t.f("is_t1",c,p,1),c,p,1,0,0,"")){t.b(t.rp("user_css_p12",c,p,"        "));};t.b(t.rp("bg_img_css3",c,p,"      "));});c.pop();}t.b("\n" + i);if(t.s(t.f("render_page_content",c,p,1),c,p,0,1978,2029,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <script>");t.b(t.t(t.f("swift_preboot_js",c,p,0)));t.b("</script>\n");});c.pop();}t.b("\n");t.b("\n" + i);if(t.s(t.f("include_more_css_early",c,p,1),c,p,0,2087,2100,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("more_css4",c,p,""));});c.pop();}t.b("\n");t.b("\n" + i);t.b("    <script>");t.b(t.t(t.f("google_analytics_js",c,p,0)));t.b("</script>\n\n  </head>\n");if(t.s(t.f("is_t1",c,p,1),c,p,0,2198,2214,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("t1_body5",c,p,"  "));});c.pop();}if(!t.s(t.f("is_t1",c,p,1),c,p,1,0,0,"")){t.b("  <body class=\"");if(!t.s(t.f("theme",c,p,1),c,p,1,0,0,"")){t.b("user-style-twttr");};t.b(" ");t.b(t.v(t.f("theme",c,p,0)));t.b(" ");t.b(t.v(t.f("locale_css",c,p,0)));t.b(" ");if(!t.s(t.f("render_page_content",c,p,1),c,p,1,0,0,"")){t.b("loading-body");};t.b(" ");if(t.s(t.f("logged_in",c,p,1),c,p,0,2388,2399,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" logged-in ");});c.pop();}t.b(" ");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b(" logged-out ");};t.b("\">\n    <div id=\"doc\">\n      <div id=\"top-stuff\" class=\"js-topbar\">\n        <div id=\"banners\" class=\"js-banners\" style=\"clear:both;\">\n");if(t.s(t.f("became_user",c,p,1),c,p,0,2613,2636,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("became_user_banner6",c,p,""));});c.pop();}t.b("          ");if(t.s(t.f("noscript_banner",c,p,1),c,p,0,2683,2724,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<noscript>");t.b(t.rp("noscript_banner7",c,p,""));t.b("</noscript>");});c.pop();}t.b("\n" + i);if(t.s(t.f("logged_in",c,p,1),c,p,0,2769,2790,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("slow_load_banner8",c,p,""));});c.pop();}t.b("        </div>\n        <div id=\"top-bar-outer\">\n          <div id=\"top-bar-bg\"></div>\n          <div id=\"top-bar\">\n            <div class=\"top-bar-inside\">\n");t.b(t.rp("phoenix_top_bar9",c,p,"              "));t.b("            </div>\n          </div>\n          <div id=\"message-drawer\"></div>\n        </div>\n      </div>\n\n      \n      <div id=\"page-outer\" ");if(t.s(t.f("expando",c,p,1),c,p,0,3149,3169,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("class=\"flush-to-top\"");});c.pop();}t.b(">\n");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("home_page",c,p,1),c,p,0,3230,3356,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <div id=\"front-container\" class=\"js-front-container\">\n");t.b(t.rp("front_page10",c,p,"              "));t.b("            </div>\n");});c.pop();}};t.b("\n" + i);t.b("        <div id=\"page-container\" class=\"page-container ");if(t.s(t.f("container_class",c,p,1),c,p,0,3470,3489,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("container_class",c,p,0)));});c.pop();}t.b("\">\n          <div");if(t.s(t.f("page_node_id",c,p,1),c,p,0,3543,3565,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" id=\"");t.b(t.v(t.f("page_node_id",c,p,0)));t.b("\"");});c.pop();}t.b(">\n");if(t.s(t.f("home_page",c,p,1),c,p,0,3610,3718,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("current_user",c,p,1),c,p,0,3642,3688,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("home_page11",c,p,"                "));});c.pop();}});c.pop();}t.b("\n" + i);if(t.s(t.f("four_oh_four_page",c,p,1),c,p,0,3768,3809,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("404_page12",c,p,"              "));});c.pop();}t.b("\n" + i);if(t.s(t.f("profile_page",c,p,1),c,p,0,3862,3907,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("profile_page13",c,p,"              "));});c.pop();}t.b("\n" + i);if(t.s(t.f("mobile_gallery_page",c,p,1),c,p,0,3962,4014,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mobile_gallery_page14",c,p,"              "));});c.pop();}t.b("          </div>\n        </div>\n      </div>\n\n      \n");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("home_page",c,p,1),c,p,0,4135,4240,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <div class=\"homepage-gradient\"></div>\n          <div class=\"homepage-gold-bar\"></div>\n");});c.pop();}};t.b("\n" + i);t.b("      <div id=\"message-notifications\"></div>\n    </div>\n\n    <div id=\"flash-message-storage\" style=\"display:none\"></div>\n    <div id=\"flash-object-container\"></div>\n\n    <div id=\"off-screen-preload\">\n      <div class=\"content-fe-sprites\"></div>\n    </div>\n\n");if(t.s(t.f("escaped_js_redirect_path",c,p,1),c,p,0,4567,4694,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <script type=\"text/javascript\">\n      \n        window.location.replace('");t.b(t.v(t.f("escaped_js_redirect_path",c,p,0)));t.b("');\n    </script>\n");});c.pop();}t.b("\n" + i);t.b(t.rp("javascript_includes15",c,p,"    "));t.b("\n" + i);if(t.s(t.f("include_more_css",c,p,1),c,p,0,4780,4859,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("include_more_css_early",c,p,1),c,p,1,0,0,"")){t.b(t.rp("more_css16",c,p,""));};});c.pop();}t.b("  </body>\n");};t.b("\n" + i);t.b("</html>\n");return t.fl(); }, partials: {"phoenix_head0": {name:"phoenix_head"},"user_css_t11": {name:"user_css_t1"},"user_css_p12": {name:"user_css_p1"},"bg_img_css3": {name:"bg_img_css"},"more_css4": {name:"more_css"},"t1_body5": {name:"t1_body"},"became_user_banner6": {name:"became_user_banner"},"noscript_banner7": {name:"noscript_banner"},"slow_load_banner8": {name:"slow_load_banner"},"phoenix_top_bar9": {name:"phoenix_top_bar"},"front_page10": {name:"front_page"},"home_page11": {name:"home_page"},"404_page12": {name:"404_page"},"profile_page13": {name:"profile_page"},"mobile_gallery_page14": {name:"mobile_gallery_page"},"javascript_includes15": {name:"javascript_includes"},"more_css16": {name:"more_css"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phoenix_head": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<title>");t.b(t.v(t.f("page_title",c,p,0)));t.b("</title>\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n<meta charset=\"utf-8\" />\n\n");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("meta_description",c,p,1),c,p,0,148,214,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <meta name=\"description\" content=\"");t.b(t.v(t.f("meta_description",c,p,0)));t.b("\" />\n");});c.pop();}};t.b("\n" + i);if(t.s(t.f("dns_prefetch",c,p,1),c,p,0,269,311,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <link rel=\"dns-prefetch\" href=\"");t.b(t.v(t.d(".",c,p,0)));t.b("\">\n");});c.pop();}t.b("\n" + i);t.b("<script type=\"text/javascript\" charset=\"utf-8\">\n  \n  \n  document.domain = 'twitter.com';\n\n  // this will be copied to twttr.appStartTime once our JS has started up\n  document.startTime = new Date().getTime();\n  var twttr = {};\n  twttr.versionName = 'phoenix';\n  ");if(t.s(t.f("is_t1",c,p,1),c,p,0,602,620,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("twttr.isT1 = true;");});c.pop();}t.b("\n" + i);t.b("  twttr.didPingKeynote = false;\n  twttr.keynoteTTFTPing = function() {\n    if (!twttr.didPingKeynote && window.location.href.indexOf('keynoteTest') > 0) {\n      var image = document.createElement('img');\n      image.src = '/images/keynote.gif';\n      twttr.didPingKeynote = true;\n    }\n  }\n\n  ");t.b(t.t(t.f("fake_console_js",c,p,0)));t.b("\n");t.b("\n" + i);if(t.s(t.f("include_events_reroute",c,p,1),c,p,0,976,1196,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    twttr.griffin = {\n      current: ");t.b(t.t(t.f("active_events",c,p,0)));t.b("\n" + i);t.b("    };\n\n");if(t.s(t.f("euro2012_search_terms",c,p,1),c,p,0,1072,1137,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      twttr.griffin.euroTerms = ");t.b(t.t(t.f("euro2012_search_terms",c,p,0)));t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("    \n    ");t.b(t.t(t.f("swift_reroute",c,p,0)));t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("</script>\n\n");if(t.s(t.f("ttft_data",c,p,1),c,p,0,1250,1339,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<script type=\"text/javascript\">\nwindow.ttftData=");t.b(t.t(t.f("ttft_data",c,p,0)));t.b(";");t.b(t.t(t.f("ttft_js",c,p,0)));t.b("\n" + i);t.b("</script>\n");});c.pop();}t.b("\n" + i);t.b("<script type=\"text/javascript\">");t.b(t.t(t.f("watch_script",c,p,0)));t.b("</script>\n<script type=\"text/javascript\">\n");if(t.s(t.f("js_watch_enabled",c,p,1),c,p,0,1469,1515,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    WATCH.activate();\n    WATCH.natives();\n");});c.pop();}t.b("</script>\n\n\n");if(!t.s(t.f("is_admin",c,p,1),c,p,1,0,0,"")){t.b(t.rp("frame_busting0",c,p,"  "));};t.b("\n" + i);if(t.s(t.f("include_ie9_meta",c,p,1),c,p,0,1620,1704,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <link href=\"/favicons/favicon32x32.ico\" rel=\"shortcut icon\" type=\"image/x-icon\">\n");});c.pop();}if(!t.s(t.f("include_ie9_meta",c,p,1),c,p,1,0,0,"")){t.b("  <link href=\"/favicons/favicon.ico\" rel=\"shortcut icon\" type=\"image/x-icon\">\n");};t.b("\n" + i);if(t.s(t.f("base_url",c,p,1),c,p,0,1862,1890,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<base href=\"");t.b(t.v(t.f("base_url",c,p,0)));t.b("\" />");});c.pop();}t.b("\n");return t.fl(); }, partials: {"frame_busting0": {name:"frame_busting"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phoenix_signup": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<!DOCTYPE html>\n<html lang=\"");t.b(t.v(t.f("locale",c,p,0)));t.b("\">\n  <head>\n");t.b(t.rp("phoenix_head0",c,p,"    "));t.b("\n" + i);t.b("    <script>\n      twttr.versionName = \"phoenix-signup\";\n");if(!t.s(t.f("abtest_recaptcha_in_your_language_154_not_translated",c,p,1),c,p,1,0,0,"")){t.b("        twttr.pageLocale = \"");t.b(t.v(t.f("locale",c,p,0)));t.b("\";\n");};if(t.s(t.f("is_selenium",c,p,1),c,p,0,321,422,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      // loadrunner target that we know exists\n      twttr.recaptchaUrlForTest = 'constants';\n");});c.pop();}t.b("    </script>\n\n");if(!t.s(t.f("assets_from_cdn",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("is_t1",c,p,1),c,p,0,495,596,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("signup_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\" />\n");});c.pop();}if(!t.s(t.f("is_t1",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("css_files",c,p,1),c,p,0,646,743,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("file_name",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\" />\n");});c.pop();}};};t.b("\n" + i);if(t.s(t.f("assets_from_cdn",c,p,1),c,p,0,825,922,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("signup_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\" />\n");});c.pop();}t.b("\n" + i);t.b("    <script>");t.b(t.t(t.f("google_analytics_js",c,p,0)));t.b("</script>\n  </head>\n");t.b(t.rp("t1_signup1",c,p,"  "));t.b("</html>\n");return t.fl(); }, partials: {"phoenix_head0": {name:"phoenix_head"},"t1_signup1": {name:"t1_signup"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phoenix_top_bar": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"static-links\">\n  <div id=\"logo\">\n    <a href=\"");t.b(t.v(t.f("index_path",c,p,0)));t.b("\">Twitter</a>\n  </div>\n  <form id=\"search-form\" class=\"js-search-form\" action=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\" method=\"GET\">\n    <span class=\"glass js-search-action\"><i></i></span>\n    <input value=\"\" placeholder=\"Search\" name=\"q\" id=\"search-query\" type=\"text\" />\n  </form>\n  <div id=\"global-nav\">\n    <ul id=\"global-actions\">\n");if(t.s(t.f("current_user",c,p,1),c,p,0,407,867,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li id=\"global-nav-home\" data-global-action=\"home\"><a href=\"");t.b(t.v(t.f("index_path",c,p,0)));t.b("\">Home</a></li>\n        <li id=\"global-nav-profile\" data-global-action=\"profile\"><a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">Profile</a></li>\n        <li id=\"global-nav-messages\" data-global-action=\"messages\"><a href=\"");t.b(t.v(t.f("messages_path",c,p,0)));t.b("\">Messages</a></li>\n        <li id=\"global-nav-who_to_follow\" data-global-action=\"who_to_follow\"><a href=\"");t.b(t.v(t.f("who_to_follow_path",c,p,0)));t.b("\">Who To Follow</a></li>\n");});c.pop();}t.b("    </ul>\n  </div>\n  <div id=\"sections\"></div>\n</div>\n<div class=\"active-links\">\n");if(t.s(t.f("current_user",c,p,1),c,p,0,985,1479,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a id=\"new-tweet\" class=\"js-global-new-tweet\" title=\"New Tweet\">\n      <span>New Tweet</span>\n    </a><span class=\"vr\">\n    </span><span id=\"session\" class=\"loggedin js-session\">\n      <a class=\"profile-links\" href=\"#\">\n        <img src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" />\n      </a>\n      <span id=\"screen-name\">\n        ");t.b(t.v(t.f("screen_name_from_server",c,p,0)));t.b("\n" + i);t.b("      </span>&nbsp;<span id=\"screen-name-dropdown\">&nbsp;</span>\n      <div class=\"dropdown\">\n");t.b(t.rp("user_dropdown0",c,p,"        "));t.b("      </div>\n    </span>\n");});c.pop();}if(!t.s(t.f("current_user",c,p,1),c,p,1,0,0,"")){t.b("    <div id=\"session\" class=\"js-session\">\n      <a id=\"signin-link\" href=\"");t.b(t.v(t.f("login_path",c,p,0)));t.b("\">\n        <em>Have an account?</em>\n        <strong>Sign in</strong><i></i>\n      </a>\n      <a id=\"signup-link\" href=\"");t.b(t.v(t.f("signup_path",c,p,0)));t.b("?context=login\">\n        <em>New to Twitter?</em>\n        <strong>Join Today&#32;&raquo;</strong>\n      </a>\n      <div id=\"signin-dropdown\" class=\"dropdown dark\">\n");t.b(t.rp("signin_form1",c,p,"        "));t.b("      </div>\n    </div>\n");};t.b("</div>\n");return t.fl(); }, partials: {"user_dropdown0": {name:"user_dropdown"},"signin_form1": {name:"signin_form"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phone_setup_prompt": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div>Before you can receive mobile notifications for @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("'s Tweets, you need to set up your phone.<div>\n");t.b(t.rp("prompt0",c,p,""));return t.fl(); }, partials: {"prompt0": {name:"prompt"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phone_tweets_off_prompt": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div>Before you can receive mobile notifications for @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("'s Tweets, you need to enable the Tweet notification setting.<div>\n");t.b(t.rp("prompt0",c,p,""));return t.fl(); }, partials: {"prompt0": {name:"prompt"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"photo_control": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"turkey-control\">\n  <div class=\"turkey-add-action\">\n    <div class=\"turkey\"></div>\n    <div class=\"swf\"></div>\n  </div>\n  <form method=\"post\" action=\"");t.b(t.v(t.f("api_url",c,p,0)));t.b("/1/statuses/update_with_media.iframe\" enctype=\"multipart/form-data\" class=\"turkey-selected-files\" target=\"");t.b(t.v(t.f("tweet_box_id",c,p,0)));t.b("\"></form>\n  <iframe class=\"turkey-post-target\" name=\"");t.b(t.v(t.f("tweet_box_id",c,p,0)));t.b("\"></iframe>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"photo_timeout_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Tweeting a photo timed out. Try sending your Tweet again in a minute.");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"photobucket_attribution": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='media-attribution'>\n  <span>powered by</span> <img src=\"/phoenix/img/turkey-icon.png\"/> <a target='_blank' data-media-type='");t.b(t.v(t.f("media_type",c,p,0)));t.b("' class='media-attribution-link' href='http://photobucket.com/twitter'>Photobucket</a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"place_mention_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"#\" class=\"button geo-insert-place-button\"\n  title=\"Mention a place in your Tweet\">\n  <span></span></a>\n<span class=\"geo-separator\">&nbsp;</span>\n<span class=\"geo-status\">");t.b(t.t(t.f("status_html",c,p,0)));t.b("</span>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"place_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"main-content\">\n  ");t.b(t.t(t.f("noscript",c,p,0)));t.b("\n" + i);t.b("    <div class=\"search-header\">\n      <div class=\"back-to-home\">\n        <a href=\"");t.b(t.v(t.f("index_path",c,p,0)));t.b("\">&larr; Back to Home</a>\n      </div>\n    </div>\n    <div class=\"geo-place-page-title\">\n      <h2>\n      <strong>");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n      </h2>\n      <div class=\"geo-place-page-details\">\n");if(t.s(t.f("full_address",c,p,1),c,p,0,352,433,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          ");t.b(t.v(t.f("full_address",c,p,0)));t.b("<span class=\"geo_map_link_separator\">|</span>\n");});c.pop();}if(t.s(t.f("map_link",c,p,1),c,p,0,472,543,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <a target=\"_blank\" href=\"");t.b(t.v(t.f("map_link",c,p,0)));t.b("\">full map</a>\n");});c.pop();}t.b("        <div>");t.b(t.v(t.f("phone",c,p,0)));t.b("</div>\n");if(t.s(t.f("location_service_down",c,p,1),c,p,0,620,681,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        Location service is temporarily unavailable\n");});c.pop();}t.b("      </div>\n    </div>\n");if(t.s(t.f("show_map",c,p,1),c,p,0,749,861,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"geo-place-page-map-container\">\n      <div id=\"geo_place_page_map_canvas\"></div>\n    </div>\n");});c.pop();}t.b("    <ul class=\"stream-tabs\">\n      <li class=\"stream-tab stream-tab-tweets ");if(t.s(t.f("active_tab_tweets",c,p,1),c,p,0,972,978,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"tab-text\" href=\"");t.b(t.v(t.f("place_path",c,p,0)));t.b("\">All Tweets</a>\n      </li>\n      <li class=\"stream-tab stream-tab-links ");if(t.s(t.f("active_tab_links",c,p,1),c,p,0,1146,1152,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"tab-text\" href=\"");t.b(t.v(t.f("place_links_path",c,p,0)));t.b("\">Tweets with links</a>\n      </li>\n    </ul>\n");t.b(t.rp("stream_manager0",c,p,"    "));t.b("  ");t.b(t.t(t.f("end_noscript",c,p,0)));t.b("\n" + i);t.b("</div>\n<div class=\"geo-map-place-bubble\">\n  <span/>\n  <div class=\"round\">\n    <div class=\"geo-place-title\" />\n    <div class=\"geo-place-details\" />\n  </div>\n</div>\n<div class=\"dashboard place-dashboard\"></div>\n");t.b(t.rp("details_pane_container1",c,p,""));return t.fl(); }, partials: {"stream_manager0": {name:"stream_manager"},"details_pane_container1": {name:"details_pane_container"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"place_page_links_title": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("poi",c,p,1),c,p,0,8,58,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Twitter / Tweets with links at ");t.b(t.t(t.f("placeName",c,p,0)));t.b("\n" + i);});c.pop();}if(!t.s(t.f("poi",c,p,1),c,p,1,0,0,"")){t.b("  Twitter / Tweets with links in ");t.b(t.t(t.f("placeName",c,p,0)));t.b("\n" + i);};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"place_page_tweets_title": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Twitter / Tweets about ");t.b(t.t(t.f("placeName",c,p,0)));t.b("\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"place_page_users_following_title": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Twitter / Recent people you are following who mentioned ");t.b(t.t(t.f("placeName",c,p,0)));t.b("\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"place_page_users_title": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Twitter / Recent people for ");t.b(t.t(t.f("placeName",c,p,0)));t.b("\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"place_people": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<h2 class=\"place-component\">\n  Recent people\n  <span class=\"dot\">&middot;</span>\n  <a class=\"view-all\" href=\"");t.b(t.v(t.f("place_users_path",c,p,0)));t.b("\">view all</a>\n</h2>\n");if(t.s(t.f("user_thumbs",c,p,1),c,p,0,166,190,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_thumb_list0",c,p,"  "));});c.pop();}t.b("<div style=\"clear:both;\"></div>");return t.fl(); }, partials: {"user_thumb_list0": {name:"user_thumb_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"place_tweets": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"related-tweets\">\n  <h3>Tweets about ");t.b(t.v(t.f("place_name",c,p,0)));t.b("</h3>\n");if(t.s(t.f("tweets",c,p,1),c,p,0,81,106,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("simple_tweet0",c,p,"    "));});c.pop();}if(t.s(t.f("place_path",c,p,1),c,p,0,135,253,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <a class=\"place-tweets-footer-link more-link\" href=\"");t.b(t.v(t.f("place_path",c,p,0)));t.b("\">\n    View all Tweets about this place &rarr;\n");});c.pop();}t.b("  </a>\n</div>\n");return t.fl(); }, partials: {"simple_tweet0": {name:"simple_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"place_users_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"main-content\">\n  ");t.b(t.t(t.f("noscript",c,p,0)));t.b("\n" + i);t.b("    <div class=\"search-header\">\n      <div class=\"back-to-home\">\n        <a href=\"");t.b(t.v(t.f("place_path",c,p,0)));t.b("\">&larr; Back to ");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n      </div>\n    </div>\n    <div class=\"geo-place-page-title\">\n      <h2>\n      Recent people for <strong>");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n      </h2>\n      <div class=\"geo-place-page-details\">\n");if(t.s(t.f("location_service_down",c,p,1),c,p,0,383,446,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          Location service is temporarily unavailable\n");});c.pop();}t.b("      </div>\n    </div>\n    <ul class=\"stream-tabs\">\n      <li class=\"stream-tab stream-tab-all ");if(t.s(t.f("active_tab_all",c,p,1),c,p,0,588,594,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"tab-text\" href=\"");t.b(t.v(t.f("place_users_path",c,p,0)));t.b("\">All</a>\n      </li>\n      <li class=\"stream-tab stream-tab-following ");if(t.s(t.f("active_tab_following",c,p,1),c,p,0,766,772,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"tab-text\" href=\"");t.b(t.v(t.f("place_users_following_path",c,p,0)));t.b("\">Following</a>\n      </li>\n    </ul>\n");t.b(t.rp("stream_manager0",c,p,"    "));t.b("  ");t.b(t.t(t.f("end_noscript",c,p,0)));t.b("\n" + i);t.b("</div>\n<div class=\"dashboard place-dashboard\"></div>\n");t.b(t.rp("details_pane_container1",c,p,""));return t.fl(); }, partials: {"stream_manager0": {name:"stream_manager"},"details_pane_container1": {name:"details_pane_container"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_actions": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,24,343,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  \n");if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("no_follow_bar",c,p,1),c,p,0,73,103,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_actions0",c,p,"       "));});c.pop();}if(!t.s(t.f("no_follow_bar",c,p,1),c,p,1,0,0,"")){t.b("      \n      <div class=\"follow-bar\">\n");t.b(t.rp("user_actions1",c,p,"        "));t.b("      </div>\n");};};if(t.s(t.f("is_current_user",c,p,1),c,p,0,290,322,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("edit_profile_button2",c,p,"    "));});c.pop();}});c.pop();}t.b("\n" + i);if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b("  \n");if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b(t.rp("combo_follow_button3",c,p,"    "));};if(t.s(t.f("is_current_user",c,p,1),c,p,0,494,526,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("edit_profile_button4",c,p,"    "));});c.pop();}};return t.fl(); }, partials: {"user_actions0": {name:"user_actions"},"user_actions1": {name:"user_actions"},"edit_profile_button2": {name:"edit_profile_button"},"combo_follow_button3": {name:"combo_follow_button"},"edit_profile_button4": {name:"edit_profile_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"profile-banner\">\n  <div class=\"banner-shadow\"></div>\n  <img src=\"");t.b(t.v(t.f("banner_url",c,p,0)));t.b("\">\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_dashboard": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dashboard profile-dashboard\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,68,342,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,97,315,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("profile_user",c,p,1),c,p,0,121,293,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"component\">\n");t.b(t.rp("dashboard_profile_stats0",c,p,"        "));t.b("        <hr/>\n      </div>\n      <div class=\"component\">\n");t.b(t.rp("generic_footer1",c,p,"        "));t.b("      </div>\n");});c.pop();}});c.pop();}});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"dashboard_profile_stats0": {name:"dashboard_profile_stats"},"generic_footer1": {name:"generic_footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_follow_card": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"flex-module clearfix ");if(t.s(t.f("is_current_user_withheld",c,p,1),c,p,0,62,75,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("withheld-user");});c.pop();}t.b("\">\n");if(t.s(t.f("is_current_user_withheld",c,p,1),c,p,0,138,400,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"withheld-message\">");t.b(t.v(t.f("description",c,p,0)));t.b("  <a href=");if(t.s(t.f("is_withheld_copyright",c,p,1),c,p,0,224,258,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\"");t.b(t.v(t.f("withheld_copyright_help_path",c,p,0)));t.b("\"");});c.pop();}if(!t.s(t.f("is_withheld_copyright",c,p,1),c,p,1,0,0,"")){t.b("\"");t.b(t.v(t.f("withheld_help_path",c,p,0)));t.b("\"");};t.b(" target=\"_blank\">Learn more</a></div>\n");});c.pop();}t.b("\n" + i);t.b("  <a href=\"");t.b(t.v(t.f("raw_profile_image_url",c,p,0)));t.b("\" class=\"profile-picture\" target=\"_blank\">\n    <img src=\"");t.b(t.v(t.f("reasonably_small_profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"avatar size128\">\n  </a>\n  <div class=\"profile-card-inner js-actionable-user\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n    <h1 class=\"fullname\">\n      ");t.b(t.v(t.f("name",c,p,0)));t.b("\n" + i);t.b("      ");if(t.s(t.f("verified",c,p,1),c,p,0,781,836,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified-large\" title=\"Verified profile\"></i>");});c.pop();}t.b("\n" + i);if(t.s(t.f("is_translator",c,p,1),c,p,0,874,1028,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <a class=\"translator-badge\" href=\"");t.b(t.v(t.f("translator_profile_path",c,p,0)));t.b("\">\n          <i class=\"translator-large\" title=\"Translator\"></i>\n        </a>\n");});c.pop();}t.b("    </h1>\n    <h2 class=\"username\">\n      <span class=\"js-username\"></span>\n      ");if(t.s(t.f("protected",c,p,1),c,p,0,1143,1166,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"sm-lock\"></i>");});c.pop();}t.b("\n" + i);t.b("    </h2>\n    <p class=\"bio ");if(t.s(t.f("description_is_rtl",c,p,1),c,p,0,1232,1251,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("bio-description-rtl");});c.pop();}t.b("\">");t.b(t.t(t.f("linkified_description",c,p,0)));t.b("</p>\n    <p class=\"location-and-url\">\n      <span class=\"location\">\n        ");t.b(t.v(t.f("location",c,p,0)));t.b("\n" + i);t.b("      </span>\n");if(t.s(t.f("location",c,p,1),c,p,0,1425,1544,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("display_url_or_url",c,p,1),c,p,0,1457,1514,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span class=\"divider\">&middot;</span>\n");});c.pop();}});c.pop();}t.b("      <span class=\"url\">\n        <a target=\"_blank\" rel=\"me nofollow\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">\n          ");t.b(t.t(t.f("display_url_or_url",c,p,0)));t.b("\n" + i);t.b("        </a>\n      </span>\n    </p>\n");if(t.s(t.f("is_only_admin_accessible",c,p,1),c,p,0,1748,1777,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("admin_banner0",c,p,"      "));});c.pop();}t.b("  </div>\n  <div class=\"profile-card-actions js-profile-card-actions\">\n    <div class=\"follow-btn-container\">\n");t.b(t.rp("profile_actions1",c,p,"      "));t.b("    </div>\n");t.b(t.rp("mini_profile_stats2",c,p,"    "));t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"admin_banner0": {name:"admin_banner"},"profile_actions1": {name:"profile_actions"},"mini_profile_stats2": {name:"mini_profile_stats"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<div class=\"profile-header\" ");if(t.s(t.f("user_data",c,p,1),c,p,0,83,108,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-user=\"");t.b(t.v(t.f("user_data",c,p,0)));t.b("\"");});c.pop();}t.b(" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n");if(t.s(t.f("is_only_admin_accessible",c,p,1),c,p,0,190,215,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("admin_banner0",c,p,"    "));});c.pop();}t.b("  <div class=\"profile-info clearfix\">\n\n");if(t.s(t.f("is_withheld",c,p,1),c,p,0,304,569,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"withheld-message\">");t.b(t.v(t.f("description",c,p,0)));t.b(" <a href=");if(t.s(t.f("is_withheld_copyright",c,p,1),c,p,0,391,425,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\"");t.b(t.v(t.f("withheld_copyright_help_path",c,p,0)));t.b("\"");});c.pop();}if(!t.s(t.f("is_withheld_copyright",c,p,1),c,p,1,0,0,"")){t.b("\"");t.b(t.v(t.f("withheld_help_path",c,p,0)));t.b("\"");};t.b(" target=\"_blank\">Learn more</a></div>\n");});c.pop();}t.b("\n" + i);t.b("    <div class=\"profile-image-container\">\n      <a href=\"");t.b(t.v(t.f("raw_profile_image_url",c,p,0)));t.b("\" class='profile-picture' target=\"_blank\"><img src=\"");t.b(t.v(t.f("reasonably_small_profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" /></a>\n    </div>\n    <div class=\"profile-details\">\n");t.b(t.rp("full_name1",c,p,"      "));t.b("      <div class=\"screen-name-and-location\"><span class=\"screen-name screen-name-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" pill\">@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span> ");t.b(t.v(t.f("location",c,p,0)));t.b("</div>\n      <div class=\"bio\">");t.b(t.t(t.f("linkified_description",c,p,0)));t.b("</div>\n      <div class=\"url\"><a target=\"_blank\" rel=\"me nofollow\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b(t.t(t.f("display_url_or_url",c,p,0)));t.b("</a></div>\n    </div>\n  </div>\n  <div class=\"profile-actions-container ");if(t.s(t.f("should_show_tweet_box",c,p,1),c,p,0,1248,1276,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("preceeding-profile-tweet-box");});c.pop();}t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,1355,1458,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"component profile-actions-component\">\n");t.b(t.rp("profile_actions2",c,p,"        "));t.b("      </div>\n");});c.pop();}t.b("  </div>\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,1518,1671,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("should_show_tweet_box",c,p,1),c,p,0,1549,1642,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"profile-actions profile-tweet-box profile-tweet-box-placeholder\"></div>\n");});c.pop();}});c.pop();}t.b("\n" + i);t.b("    <ul class=\"stream-tabs\">\n      <li class=\"stream-tab stream-tab-tweets ");if(t.s(t.f("active_tab_tweets",c,p,1),c,p,0,1794,1800,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"tab-text\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">Tweets</a>\n      </li>\n");if(t.s(t.f("can_view",c,p,1),c,p,0,1919,2125,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li class=\"stream-tab stream-tab-favorites ");if(t.s(t.f("active_tab_favorites",c,p,1),c,p,0,1996,2002,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n          <a class=\"tab-text\" href=\"");t.b(t.v(t.f("user_favorites_path",c,p,0)));t.b("\">Favorites</a>\n        </li>\n");});c.pop();}if(t.s(t.f("social_context",c,p,1),c,p,0,2164,2360,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li class=\"stream-tab stream-tab-following dropdown-link ");if(t.s(t.f("active_tab_following",c,p,1),c,p,0,2255,2261,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n          <p class=\"tab-text\">Following<i></i></p>\n        </li>\n");});c.pop();}if(!t.s(t.f("social_context",c,p,1),c,p,1,0,0,"")){t.b("      <li class=\"stream-tab stream-tab-following ");if(t.s(t.f("active_tab_following",c,p,1),c,p,0,2480,2486,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"tab-text\" href=\"");t.b(t.v(t.f("user_following_path",c,p,0)));t.b("\">Following</a>\n      </li>\n");};if(t.s(t.f("social_context",c,p,1),c,p,0,2650,2840,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li class=\"stream-tab stream-tab-followers dropdown-link ");if(t.s(t.f("active_tab_followers",c,p,1),c,p,0,2739,2745,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <p class=\"tab-text\">Followers<i></i></p>\n      </li>\n");});c.pop();}if(!t.s(t.f("social_context",c,p,1),c,p,1,0,0,"")){t.b("      <li class=\"stream-tab stream-tab-followers ");if(t.s(t.f("active_tab_followers",c,p,1),c,p,0,2960,2966,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"tab-text\" href=\"");t.b(t.v(t.f("user_followers_path",c,p,0)));t.b("\">Followers</a>\n      </li>\n");};if(t.s(t.f("has_pending_requests",c,p,1),c,p,0,3136,3379,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li class=\"stream-tab stream-tab-pending ");if(t.s(t.f("active_tab_pending",c,p,1),c,p,0,3209,3215,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n          <a class=\"tab-text pending-follow\" title='Follower requests' href=\"");t.b(t.v(t.f("follower_requests_path",c,p,0)));t.b("\">Requests</a>\n        </li>\n");});c.pop();}t.b("      <li class=\"stream-tab stream-tab-lists dropdown-link ");if(t.s(t.f("active_tab_lists",c,p,1),c,p,0,3485,3491,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <p class=\"tab-text\">Lists<i></i></p>\n      </li>\n    </ul>\n</div>\n");return t.fl(); }, partials: {"admin_banner0": {name:"admin_banner"},"full_name1": {name:"full_name"},"profile_actions2": {name:"profile_actions"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_lists_stream_view_toggler": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("stream_view_toggler0",c,p,""));return t.fl(); }, partials: {"stream_view_toggler0": {name:"stream_view_toggler"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(!t.s(t.f("render_withheld",c,p,1),c,p,1,0,0,"")){t.b("  <div class=\"main-content\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,78,312,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("profile_user",c,p,1),c,p,0,102,137,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("profile_header0",c,p,"        "));});c.pop();}t.b(t.rp("stream_manager1",c,p,"      "));t.b("      ");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,211,283,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<script>if (window.ttft) window.ttft.serverRendered('profile');</script>");});c.pop();}t.b("\n" + i);});c.pop();}t.b("  </div>\n");t.b(t.rp("profile_dashboard2",c,p,"  "));t.b(t.rp("details_pane_container3",c,p,"  "));};if(t.s(t.f("render_withheld",c,p,1),c,p,0,442,472,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("profile_page_withheld4",c,p,"  "));});c.pop();}return t.fl(); }, partials: {"profile_header0": {name:"profile_header"},"stream_manager1": {name:"stream_manager"},"profile_dashboard2": {name:"profile_dashboard"},"details_pane_container3": {name:"details_pane_container"},"profile_page_withheld4": {name:"profile_page_withheld"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_page_withheld": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"withheld-content\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,57,407,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"withheld-user\">\n");if(t.s(t.f("profile_user",c,p,1),c,p,0,109,378,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <h2>@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</h2>\n      <p>");t.b(t.v(t.f("description",c,p,0)));t.b("  <a href=");if(t.s(t.f("is_withheld_copyright",c,p,1),c,p,0,202,236,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\"");t.b(t.v(t.f("withheld_copyright_help_path",c,p,0)));t.b("\"");});c.pop();}if(!t.s(t.f("is_withheld_copyright",c,p,1),c,p,1,0,0,"")){t.b("\"");t.b(t.v(t.f("withheld_help_path",c,p,0)));t.b("\"");};t.b(" target=\"_blank\">Learn more</a></p>\n");});c.pop();}t.b("  </div>\n");});c.pop();}t.b("  <div class=\"profile-actions-container\"/>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_pane": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"profile-modal\" ");t.b(t.t(t.f("source_impression_id",c,p,0)));t.b(" ");if(t.s(t.f("impression_cookie",c,p,1),c,p,0,76,122,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-impression-cookie=\"");t.b(t.v(t.f("impression_cookie",c,p,0)));t.b("\"");});c.pop();}t.b(">\n\n  <div class=\"profile-modal-header js-twttr-dialog-draggable\">\n    <div class=\"twttr-dialog-close\"/>\n    <a class=\"account-group js-account-group js-bubble-event\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-element-term=\"view_profile_link\" ");if(t.s(t.f("impression_cookie",c,p,1),c,p,0,394,428,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-send-impression-cookie=\"true\"");});c.pop();}t.b(">\n      <img class=\"avatar\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n    </a>\n    <div class=\"profile-modal-header-inner\">\n      <h2 class=\"fullname\">\n        <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" ");if(t.s(t.f("impression_cookie",c,p,1),c,p,0,683,717,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-send-impression-cookie=\"true\"");});c.pop();}t.b(">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n        ");if(t.s(t.f("verified",c,p,1),c,p,0,774,798,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified\"></i>");});c.pop();}t.b("\n" + i);if(t.s(t.f("is_translator",c,p,1),c,p,0,838,994,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <a class=\"translator-badge\" href=\"");t.b(t.v(t.f("translator_profile_path",c,p,0)));t.b("\">\n            <i class=\"translator\" title=\"Translator\"></i>\n          </a>\n");});c.pop();}t.b("      </h2>\n      <h3 class=\"username\">\n        <a class=\"pretty-link js-screen-name\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" ");if(t.s(t.f("impression_cookie",c,p,1),c,p,0,1145,1179,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-send-impression-cookie=\"true\"");});c.pop();}t.b("><s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a>\n");if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b("          <span class=\"follow-status js-follows-you\">follows you</span>\n");};t.b("        ");if(t.s(t.f("protected",c,p,1),c,p,0,1382,1405,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"sm-lock\"></i>");});c.pop();}t.b("\n" + i);t.b("      </h3>\n    </div>\n  </div>\n\n  <div class=\"profile-modal-extended\">\n    <p class=\"bio ");if(t.s(t.f("description_is_rtl",c,p,1),c,p,0,1533,1552,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("bio-description-rtl");});c.pop();}t.b("\">");t.b(t.t(t.f("linkified_description",c,p,0)));t.b("</p>\n    <p class=\"location-and-url\">\n      <span class=\"location\">\n        ");t.b(t.v(t.f("location",c,p,0)));t.b("\n" + i);t.b("      </span>\n");if(t.s(t.f("location",c,p,1),c,p,0,1726,1845,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("display_url_or_url",c,p,1),c,p,0,1758,1815,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span class=\"divider\">&middot;</span>\n");});c.pop();}});c.pop();}t.b("      <span class=\"url\">\n        <a target=\"_blank\" rel=\"me nofollow\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">\n          ");t.b(t.t(t.f("display_url_or_url",c,p,0)));t.b("\n" + i);t.b("        </a>\n      </span>\n    </p>\n    <p class=\"social-proof js-mini-social-proof-container\"></p>\n  </div>\n\n");t.b(t.rp("mini_profile_stats0",c,p,"  "));t.b("\n" + i);t.b("  <div class=\"mini-profile-footer ");if(t.s(t.f("protected",c,p,1),c,p,0,2165,2194,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("protected-mini-profile-footer");});c.pop();}t.b("\">\n    <div class=\"follow-bar\">\n      <small><a class=\"view-profile js-mini-profile-user\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" ");if(t.s(t.f("impression_cookie",c,p,1),c,p,0,2344,2378,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-send-impression-cookie=\"true\"");});c.pop();}t.b(">Go to full profile &rarr;</a></small>\n");t.b(t.rp("profile_actions1",c,p,"      "));t.b("    </div>\n  </div>\n\n</div>\n");return t.fl(); }, partials: {"mini_profile_stats0": {name:"mini_profile_stats"},"profile_actions1": {name:"profile_actions"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_popup": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("user_view",c,p,1),c,p,0,14,2608,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"profile-modal-header\"  data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n      <a class=\"account-group\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-send-impression-cookie=\"true\">\n        <img class=\"avatar\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n      </a>\n      <div class=\"profile-modal-header-inner\">\n        <h2 class=\"fullname\">\n          <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-send-impression-cookie=\"true\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n          ");if(t.s(t.f("verified",c,p,1),c,p,0,471,495,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified\"></i>");});c.pop();}t.b("\n" + i);if(t.s(t.f("is_translator",c,p,1),c,p,0,537,701,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <a class=\"translator-badge\" href=\"");t.b(t.v(t.f("translator_profile_path",c,p,0)));t.b("\">\n              <i class=\"translator\" title=\"Translator\"></i>\n            </a>\n");});c.pop();}t.b("        </h2>\n        <h3 class=\"username\">\n          <a class=\"pretty-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-send-impression-cookie=\"true\"><s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a>\n");if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("follows_you",c,p,1),c,p,0,943,1017,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <span class=\"follow-status\">follows you</span>\n");});c.pop();}};t.b("          ");if(t.s(t.f("protected",c,p,1),c,p,0,1089,1112,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"sm-lock\"></i>");});c.pop();}t.b("\n" + i);t.b("        </h3>\n      </div>\n    </div>\n\n    <div class=\"profile-modal-extended\">\n      <p class=\"bio ");if(t.s(t.f("description_is_rtl",c,p,1),c,p,0,1250,1269,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("bio-description-rtl");});c.pop();}t.b("\">");t.b(t.t(t.f("linkified_description",c,p,0)));t.b("</p>\n      <p class=\"location-and-url\">\n        <span class=\"location\">\n          ");t.b(t.v(t.f("location",c,p,0)));t.b("\n" + i);t.b("        </span>\n");if(t.s(t.f("location",c,p,1),c,p,0,1453,1550,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("url",c,p,1),c,p,0,1472,1533,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <span class=\"divider\">&middot;</span>\n");});c.pop();}});c.pop();}t.b("        <span class=\"url\">\n          <a target=\"_blank\" rel=\"me nofollow\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">\n            ");t.b(t.v(t.f("url",c,p,0)));t.b("\n" + i);t.b("          </a>\n        </span>\n      </p>\n");if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b(t.rp("mini_social_proof0",c,p,"        "));};t.b("    </div>\n\n");if(t.s(t.f("page_links",c,p,1),c,p,0,1832,1867,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_profile_stats1",c,p,"      "));});c.pop();}t.b("\n" + i);t.b("    <div class=\"mini-profile-footer ");if(t.s(t.f("protected",c,p,1),c,p,0,1934,1962,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("profile-popup-rounded-bottom");});c.pop();}if(!t.s(t.f("last_three_tweets",c,p,1),c,p,1,0,0,"")){t.b("profile-popup-rounded-bottom");};t.b("\">\n      <div class=\"follow-bar\">\n        <small><a class=\"view-profile\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-send-impression-cookie=\"true\">Go to full profile &rarr;</a></small>\n");if(t.s(t.f("is_current_user",c,p,1),c,p,0,2246,2344,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <a class=\"btn edit-profile-btn\" href=\"/settings/profile\">Edit your profile</a>\n");});c.pop();}if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b(t.rp("user_actions2",c,p,"          "));};t.b("      </div>\n    </div>\n\n");if(t.s(t.f("can_view_tweets",c,p,1),c,p,0,2500,2587,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"recent-tweets clearfix\">\n      ");t.b(t.t(t.f("last_three_tweets",c,p,0)));t.b("\n" + i);t.b("    </div>\n");});c.pop();}});c.pop();}return t.fl(); }, partials: {"mini_social_proof0": {name:"mini_social_proof"},"mini_profile_stats1": {name:"mini_profile_stats"},"user_actions2": {name:"user_actions"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_signup_call_out": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module signup-call-out profile-signup-call-out\">\n  <div class=\"flex-module\">\n    <div class=\"flex-module-header\">\n      <h2>Follow ");t.b(t.v(t.f("name",c,p,0)));t.b("</h2>\n    </div>\n");t.b(t.rp("partial_signup_form0",c,p,"    "));t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"partial_signup_form0": {name:"partial_signup_form"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_similar_to_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"profile-similar-to-header clearfix\">\n  <a class=\"profile-back-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">&larr;&nbsp;Back to&nbsp;@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a>\n  <div class=\"profile-similar-to-image-container component\">\n    <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" class=\"user-profile-link user-thumb\" target=\"_blank\"><img src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" /></a>\n    <h2 >Similar to @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</h2>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_subpage_dashboard": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a id=\"user-shuffle\" title=\"");if(t.s(t.f("logged_in",c,p,1),c,p,0,42,68,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Jump to someone you follow");});c.pop();}if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("Jump to a featured account");};t.b("\" />\n<div class=\"dashboard profile-subpage-dashboard\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,217,397,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,246,370,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("profile_user",c,p,1),c,p,0,270,348,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"component\">\n");t.b(t.rp("generic_footer0",c,p,"        "));t.b("      </div>\n");});c.pop();}});c.pop();}});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"generic_footer0": {name:"generic_footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_tweet_to_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"js-tweet-btn module btn tweet-btn large-tweet-btn\" href=\"#\"><i class=\"tweet-new\"></i><span class=\"tweet-to-text\">Tweet to ");t.b(t.v(t.f("name",c,p,0)));t.b("</span></a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_tweetbox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<h3>Tweet to ");t.b(t.v(t.f("name",c,p,0)));t.b("</h3>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_profile_dashboard": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dashboard\">\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,40,136,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b(t.rp("profiles/swift_profile_tweet_to0",c,p,"      "));};});c.pop();}if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b(t.rp("profile_signup_call_out1",c,p,"    "));};t.b("\n" + i);if(!t.s(t.f("enhanced_navigation",c,p,1),c,p,1,0,0,"")){t.b(t.rp("profiles/swift_profile_nav2",c,p,"    "));};t.b("\n" + i);t.b(t.rp("japanese_ad_iframe3",c,p,"  "));t.b("\n" + i);if(t.s(t.f("logged_in",c,p,1),c,p,0,353,531,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("similar_to",c,p,1),c,p,0,373,513,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"component\" data-component-term=\"similar_user_recommendations\">\n");t.b(t.rp("dashboard_user_similarities4",c,p,"        "));t.b("      </div>\n");});c.pop();}});c.pop();}t.b(t.rp("footer5",c,p,"  "));t.b("</div>\n");return t.fl(); }, partials: {"profiles/swift_profile_tweet_to0": {name:"profiles/swift_profile_tweet_to"},"profile_signup_call_out1": {name:"profile_signup_call_out"},"profiles/swift_profile_nav2": {name:"profiles/swift_profile_nav"},"japanese_ad_iframe3": {name:"japanese_ad_iframe"},"dashboard_user_similarities4": {name:"dashboard_user_similarities"},"footer5": {name:"footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_profile_enhanced_nav": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"timelines-navigation\">\n  <li class=\"profile-nav-btn ");if(t.s(t.f("on_tweets",c,p,1),c,p,0,77,83,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n    <a href=\"");t.b(t.v(t.f("tweets_path",c,p,0)));t.b("\" class=\"profile-nav-link js-tooltip\" data-placement=\"bottom\" title=\"Tweets\" original-title=\"Tweets\" data-original-title=\"Tweets\"><i class=\"profile-nav-icon icon-nav-tweets\"></i></a>\n  </li>\n  <li class=\"profile-nav-btn ");if(t.s(t.f("on_following",c,p,1),c,p,0,365,371,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n    <a href=\"");t.b(t.v(t.f("following_path",c,p,0)));t.b("\" class=\"profile-nav-link js-tooltip\" data-placement=\"bottom\" title=\"People\" original-title=\"People\" data-original-title=\"People\"><i class=\"profile-nav-icon icon-nav-people\"></i></a>\n  </li>\n  <li class=\"profile-nav-btn ");if(t.s(t.f("on_lists",c,p,1),c,p,0,655,661,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n    <a href=\"");t.b(t.v(t.f("lists_path",c,p,0)));t.b("\" class=\"profile-nav-link js-tooltip\" data-placement=\"bottom\" title=\"Lists\" original-title=\"Lists\" data-original-title=\"Lists\"><i class=\"profile-nav-icon icon-nav-lists\"></i></a>\n  </li>\n  <li class=\"profile-nav-btn ");if(t.s(t.f("on_favorites",c,p,1),c,p,0,937,943,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n    <a href=\"");t.b(t.v(t.f("favorites_path",c,p,0)));t.b("\" class=\"profile-nav-link js-tooltip\" data-placement=\"bottom\" title=\"Favorites\" original-title=\"Favorites\" data-original-title=\"Favorites\"><i class=\"profile-nav-icon icon-nav-favorites\"></i></a>\n  </li>\n</ul>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_profile_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module profile-card component\" data-component-term=\"profile_follow_card\" ");if(t.s(t.f("user_view",c,p,1),c,p,0,99,173,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("impression_id",c,p,1),c,p,0,117,155,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-impression-id=\"");t.b(t.v(t.f("impression_id",c,p,0)));t.b("\"");});c.pop();}});c.pop();}t.b(">\n  <div class=\"flex-module clearfix ");if(t.s(t.f("is_current_user_withheld",c,p,1),c,p,0,253,266,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("withheld-user");});c.pop();}t.b("\">\n\n");if(t.s(t.f("is_current_user_withheld",c,p,1),c,p,0,332,598,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"withheld-message\">");t.b(t.v(t.f("description",c,p,0)));t.b("  <a href=");if(t.s(t.f("is_withheld_copyright",c,p,1),c,p,0,420,454,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\"");t.b(t.v(t.f("withheld_copyright_help_path",c,p,0)));t.b("\"");});c.pop();}if(!t.s(t.f("is_withheld_copyright",c,p,1),c,p,1,0,0,"")){t.b("\"");t.b(t.v(t.f("withheld_help_path",c,p,0)));t.b("\"");};t.b(" target=\"_blank\">Learn more</a></div>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("should_show_add_photo_image",c,p,1),c,p,0,665,838,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a href=\"/settings/profile\" class=\"profile-picture\" target=\"_blank\">\n      <img src=\"");t.b(t.v(t.f("default_profile_add_photo",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"avatar size128\">\n    </a>\n");});c.pop();}if(!t.s(t.f("should_show_add_photo_image",c,p,1),c,p,1,0,0,"")){t.b("    <a href=\"");t.b(t.v(t.f("raw_profile_image_url",c,p,0)));t.b("\" class=\"profile-picture\" target=\"_blank\">\n      <img src=\"");t.b(t.v(t.f("reasonably_small_profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"avatar size128\">\n    </a>\n");};t.b("\n" + i);t.b("    <div class=\"profile-card-inner\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      <h1 class=\"fullname\">\n        ");t.b(t.v(t.f("name",c,p,0)));t.b("\n" + i);t.b("        ");if(t.s(t.f("verified",c,p,1),c,p,0,1291,1346,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified-large\" title=\"Verified profile\"></i>");});c.pop();}t.b("\n" + i);if(t.s(t.f("is_translator",c,p,1),c,p,0,1386,1548,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <a class=\"translator-badge\" href=\"");t.b(t.v(t.f("translator_profile_path",c,p,0)));t.b("\">\n            <i class=\"translator-large\" title=\"Translator\"></i>\n          </a>\n");});c.pop();}t.b("      </h1>\n      <h2 class=\"username\">\n        <span class=\"screen-name\"><s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span>\n");if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("follows_you",c,p,1),c,p,0,1727,1797,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <span class=\"follow-status\">follows you</span>\n");});c.pop();}};t.b("        ");if(t.s(t.f("protected",c,p,1),c,p,0,1865,1888,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"sm-lock\"></i>");});c.pop();}t.b("\n" + i);t.b("      </h2>\n      <p class=\"bio ");if(t.s(t.f("description_is_rtl",c,p,1),c,p,0,1958,1977,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("bio-description-rtl");});c.pop();}t.b("\">");t.b(t.t(t.f("linkified_description",c,p,0)));t.b("</p>\n      <p class=\"location-and-url\">\n        <span class=\"location\">\n          ");t.b(t.v(t.f("location",c,p,0)));t.b("\n" + i);t.b("        </span>\n");if(t.s(t.f("location",c,p,1),c,p,0,2161,2258,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("url",c,p,1),c,p,0,2180,2241,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <span class=\"divider\">&middot;</span>\n");});c.pop();}});c.pop();}t.b("        <span class=\"url\">\n          <a target=\"_blank\" rel=\"me nofollow\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">\n            ");t.b(t.v(t.f("url",c,p,0)));t.b("\n" + i);t.b("          </a>\n        </span>\n      </p>\n");if(t.s(t.f("is_only_admin_accessible",c,p,1),c,p,0,2459,2492,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("admin_banner0",c,p,"        "));});c.pop();}t.b("    </div>\n    <div class=\"profile-card-actions\">\n");if(t.s(t.f("is_current_user",c,p,1),c,p,0,2598,2692,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <a class=\"btn edit-profile-btn\" href=\"/settings/profile\">Edit your profile</a>\n");});c.pop();}if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b(t.rp("user_actions1",c,p,"        "));};t.b("\n" + i);if(t.s(t.f("page_links",c,p,1),c,p,0,2815,2854,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("mini_profile_stats2",c,p,"        "));});c.pop();}t.b("    </div>\n  </div>\n");if(t.s(t.f("banner_url",c,p,1),c,p,0,2907,2934,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("profile_banner3",c,p,"    "));});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"admin_banner0": {name:"admin_banner"},"user_actions1": {name:"user_actions"},"mini_profile_stats2": {name:"mini_profile_stats"},"profile_banner3": {name:"profile_banner"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_profile_nav": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"component\">\n  <div class=\"module profile-nav\">\n");if(t.s(t.f("page_links",c,p,1),c,p,0,78,1187,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <ul class=\"js-nav-links\">\n      <li class=\"");if(t.s(t.f("on_tweets",c,p,1),c,p,0,140,146,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"list-link\" href=\"");t.b(t.v(t.f("tweets_path",c,p,0)));t.b("\" data-nav=\"profile\">Tweets<i class=\"chev-right\"></i></a>\n      </li>\n      <li class=\"");if(t.s(t.f("on_following",c,p,1),c,p,0,317,323,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"list-link\" href=\"");t.b(t.v(t.f("following_path",c,p,0)));t.b("\" data-nav=\"following\">Following<i class=\"chev-right\"></i></a>\n      </li>\n      <li class=\"");if(t.s(t.f("on_followers",c,p,1),c,p,0,505,511,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}if(t.s(t.f("on_followers_you_follow",c,p,1),c,p,0,556,562,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"list-link\" href=\"");t.b(t.v(t.f("followers_path",c,p,0)));t.b("\" data-nav=\"followers\">Followers<i class=\"chev-right\"></i></a>\n      </li>\n      <li class=\"");if(t.s(t.f("on_favorites",c,p,1),c,p,0,755,761,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"list-link\" href=\"");t.b(t.v(t.f("favorites_path",c,p,0)));t.b("\" data-nav=\"favorites\">Favorites<i class=\"chev-right\"></i></a>\n      </li>\n      <li class=\"");if(t.s(t.f("on_lists",c,p,1),c,p,0,939,945,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n        <a class=\"list-link\" href=\"");t.b(t.v(t.f("lists_path",c,p,0)));t.b("\" data-nav=\"all_lists\">Lists<i class=\"chev-right\"></i></a>\n      </li>\n");if(t.s(t.f("photo_thumbnails",c,p,1),c,p,0,1108,1151,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("media/media_thumbnails0",c,p,"        "));});c.pop();}t.b("    </ul>\n");});c.pop();}t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"media/media_thumbnails0": {name:"media/media_thumbnails"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_profile_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("user_view",c,p,1),c,p,0,14,183,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("profiles/swift_profile_header0",c,p,"  "));t.b(t.rp("profiles/swift_profile_dashboard1",c,p,"  "));t.b(t.rp("profiles/swift_profile_suggested_users_shell2",c,p,"  "));t.b(t.rp("profiles/swift_profile_timeline3",c,p,"  "));});c.pop();}return t.fl(); }, partials: {"profiles/swift_profile_header0": {name:"profiles/swift_profile_header"},"profiles/swift_profile_dashboard1": {name:"profiles/swift_profile_dashboard"},"profiles/swift_profile_suggested_users_shell2": {name:"profiles/swift_profile_suggested_users_shell"},"profiles/swift_profile_timeline3": {name:"profiles/swift_profile_timeline"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_profile_suggested_users_shell": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"component\" id=\"suggested-users\"></div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_profile_timeline": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-main\" id=\"timeline\">\n  <div class=\"content-header\">\n    <div class=\"header-inner\">\n");if(t.s(t.f("enhanced_navigation",c,p,1),c,p,0,133,189,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("profiles/swift_profile_enhanced_nav0",c,p,"        "));});c.pop();}t.b("      <h2 class=\"js-timeline-title\">");t.b(t.v(t.f("timeline_title",c,p,0)));t.b("\n" + i);if(t.s(t.f("toggle",c,p,1),c,p,0,288,368,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <small class=\"view-toggler\">");t.b(t.rp("stream_view_toggler1",c,p,""));t.b("</small>\n");});c.pop();}t.b("      </h2>\n    </div>\n  </div>\n");if(t.s(t.f("can_view_tweets",c,p,1),c,p,0,434,455,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("timeline2",c,p,"    "));});c.pop();}if(!t.s(t.f("can_view_tweets",c,p,1),c,p,1,0,0,"")){t.b(t.rp("protected_user3",c,p,"    "));};t.b("</div>");return t.fl(); }, partials: {"profiles/swift_profile_enhanced_nav0": {name:"profiles/swift_profile_enhanced_nav"},"stream_view_toggler1": {name:"stream_view_toggler"},"timeline2": {name:"timeline"},"protected_user3": {name:"protected_user"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_profile_tweet_to": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module component\" data-component-term=\"profile_tweetbox\">\n  <div class=\"profile-tweet-box flex-module\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n    <div class=\"tweet-box-title\">\n      <h2>Tweet to ");t.b(t.v(t.f("name",c,p,0)));t.b("</h2>\n    </div>\n");t.b(t.rp("swift_tweet_box0",c,p,"    "));t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"swift_tweet_box0": {name:"swift_tweet_box"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"promoted_icon": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("promoted_content",c,p,1),c,p,0,21,95,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"badge-tweet badge-tweet-");t.b(t.v(t.f("disclosure_type",c,p,0)));t.b("\"></i><b>Promoted</b>");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"twttr-prompt\">\n  <div class=\"btn js-prompt-ok\">");t.b(t.v(t.f("ok",c,p,0)));t.b("</div>\n  <div class=\"btn js-prompt-cancel\">");t.b(t.v(t.f("cancel",c,p,0)));t.b("</div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_facebook_de": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"facebook-de\">\n  <h2>Sende Tweets zu Facebook</h2>\n  <p>Teile Deine Tweets mit Deinen Freunden auf Facebook.</p>\n</div>\n<div class=\"promptbird-action-bar\">\n  <a class=\"btn call-to-action\" href=\"");t.b(t.v(t.f("settings_profile_path",c,p,0)));t.b("#fb-button\">Probiere es aus</a>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_import": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"import\">\n  <h2>Find your friends on Twitter</h2>\n  <p class=\"wide\">Import your contacts from <strong>");t.b(t.v(t.f("email",c,p,0)));t.b("</strong> or</p>\n  <p class=\"narrow\">Import your contacts from <strong>");t.b(t.v(t.f("email",c,p,0)));t.b("</strong></p>\n  <p class=\"narrow\">Select another service:</p>\n  <a class=\"services call-to-action\" href=\"");t.b(t.v(t.f("who_to_follow_import_path",c,p,0)));t.b("\">\n    <span class=\"gmail\"></span>\n    <span class=\"yahoo\"></span>\n    <span class=\"msn\"></span>\n    <span class=\"aol\"></span>\n    <span class=\"linkedin\"></span>\n  </a>\n</div>\n<div class=\"promptbird-action-bar\">\n  <a href=\"");t.b(t.v(t.f("who_to_follow_import_path",c,p,0)));t.b("\" class=\"btn call-to-action\">Find friends</a>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_import_inline": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"import import-inline\">\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_invite": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"invite\">\n  <h2>Invite friends via email</h2>\n  <p class=\"fine-print\">Lots of people to invite? Separate multiple email addresses with commas.</p>\n  <p class=\"fine-print\">\n    <a href=\"/invitations/email_preview\" class=\"js-popup\" name=\"invitation_email_preview\" data-popup=\"height=450,width=670\">See what you'll send them.</a>\n  </p>\n  <div class=\"promptbird-action-bar\">\n    <form>\n      <table class=\"flex-table\">\n        <tbody>\n          <tr>\n            <td class=\"flex-table-primary\">\n              <div class=\"flex-table-form\">\n                <textarea class=\"flex-table-input\" name=\"addresses\" placeholder=\"Your friend's email address\"></textarea>\n              </div>\n            </td>\n            <td class=\"flex-table-secondary\">\n              <button class=\"btn flex-table-btn js-submit call-to-action\" type=\"submit\" tabindex=\"0\">Send</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </form>\n  </div>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_de": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n  \n  <h2>Sprichst du deutsch?</h2>\n  <p>\n    \n    Twitter ist auf deutsch verfügbar. Klicke, um deine Spracheinstellung zu ändern.\n  </p>\n</div>\n<div class=\"promptbird-action-bar\">\n  \n  <span class=\"btn call-to-action\">Verwende Twitter auf deutsch</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_es": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n  \n  <h2>¿Hablas español?</h2>\n  <p>\n    \n    Twitter esta disponible en español. Haz clic para cambiar tu configuración de idioma.\n  </p>\n</div>\n<div class=\"promptbird-action-bar\">\n  \n  <span class=\"btn call-to-action\">Usa Twitter en español</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_fil": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n  \n  <h2>Nagsasalita ka ba ng Filipino?</h2>\n  <p>\n    \n    Ang Twitter ay magagamit na sa Filipino. I-click upang baguhin ang iyong mga setting ng wika.\n  </p>\n</div>\n<div class=\"promptbird-action-bar\">\n  \n  <span class=\"btn call-to-action\">Gamitin ang Twitter sa Filipino.</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_fr": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n  \n  <h2>Parlez-vous français?</h2>\n  <p>\n    \n    Twitter est disponible en français. Cliquez pour changer de langue.\n  </p>\n</div>\n<div class=\"promptbird-action-bar\">\n  \n  <span class=\"btn call-to-action\">Utiliser Twitter en français</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_hi": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n  \n  <h2>क्या आप हिंदी बोलते हैं?</h2>\n  <p>\n    \n    ट्विट्टर हिन्दी में उपलब्ध है. अपनी भाषा सेटिंग बदलने के लिए क्लिक करें.\n  </p>\n</div>\n<div class=\"promptbird-action-bar\">\n  \n  <span class=\"btn call-to-action\">हिंदी में ट्विट्टर का प्रयोग करें</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_id": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n  \n  <h2>Bisa berbahasa Indonesia?</h2>\n  <p>\n    \n    Twitter tersedia dalam Bahasa Indonesia. Klik untuk mengubah bahasa.\n  </p>\n</div>\n<div class=\"promptbird-action-bar\">\n  \n  <span class=\"btn call-to-action\">Pakai Twitter dalam Bahasa Indonesia</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_it": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n    \n    <h2>Parli italiano?</h2>\n    \n    <p>Twitter è disponibile in italiano. Clicca per modificare le impostazioni sulla lingua</p>\n</div>\n<div class=\"promptbird-action-bar\">\n    \n    <span class=\"btn call-to-action\">Usa Twitter in italiano</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_ja": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n    \n    <h2>日本語を使いますか？</h2>\n    <p>\n      \n      日本語で Twitter を利用できます。言語設定を変更するにはクリックしてください。\n    </p>\n</div>\n<div class=\"promptbird-action-bar\">\n  \n  <span class=\"btn call-to-action\">日本語で Twitter を利用する </span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_ko": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n      \n      <h2>한국어를 사용하세요?</h2>\n      \n      <p>\n        트위터를 한국어로 즐기실 수 있습니다. 클릭하면 언어설정으로 이동합니다.\n      </p>\n</div>\n<div class=\"promptbird-action-bar\">\n      \n      <span class=\"btn call-to-action\">한국어로 트위터 이용하기</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_msa": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n  \n  <h2>Anda cakap Malaysia?</h2>\n  <p>\n    \n    Twitter tersedia dalam Bahasa Malaysia. Klik untuk mengubah tetapan bahasa anda.\n  </p>\n</div>\n<div class=\"promptbird-action-bar\">\n    \n    <span class=\"btn call-to-action\">Pakai Twitter dalam Bahasa Malaysia.</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_nl": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n  \n  <h2>Spreek je Nederlands?</h2>\n  <p>\n    \n    Twitter is beschikbaar in het Nederlands. Klik om je taalinstelling te wijzigen.\n  </p>\n</div>\n<div class=\"promptbird-action-bar\">\n    \n    <span class=\"btn call-to-action\">Twitter gebruiken in het Nederlands.</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_pt": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n    \n    <h2>Você fala Português?</h2>\n    <p>\n      \n      Twitter está disponível em Português. Clique para alterar a configuração de idioma.\n    </p>\n</div>\n<div class=\"promptbird-action-bar\">\n    \n    <span class=\"btn call-to-action\">Use o Twitter em Português</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_ru": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n    \n    <h2>Вы говорите по-русски?</h2>\n    \n    <p>\n      Твиттер доступен на русском языке. Нажмите ниже, чтобы сменить язык.\n    </p>\n</div>\n<div class=\"promptbird-action-bar\">\n    \n    <span class=\"btn call-to-action\">Перейти на русский язык</span>\n</div>\n");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_tr": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n    \n    <h2>Türkçe biliyor musun?</h2>\n    <p>\n      \n      Twitter, Türkçe kullanılabilir. Dil ayarını değiştirmek için tıkla.\n    </p>\n</div>\n<div class=\"promptbird-action-bar\">\n    \n    <span class=\"btn call-to-action\">Twitter'ı Türkçe kullan</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_zh_cn": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n    \n    <h2>你用简体中文吗? </h2>\n    <p>\n      \n       Twitter 有简体中文版本可用。 点击以更改语言设置。\n    </p>\n</div>\n<div class=\"promptbird-action-bar\">\n    \n    <span class=\"btn call-to-action\">使用简体中文版 Twitter。</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_language_zh_tw": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"language\">\n    \n    <h2>你使用繁體中文嗎？</h2>\n    <p>\n      \n      Twitter終於有繁體中文了。按這裡改變你的語言設定。\n    </p>\n</div>\n<div class=\"promptbird-action-bar\">\n    \n    <span class=\"btn call-to-action\">使用繁體中文的Twitter。</span>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_mobile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"mobile\">\n  <h2>Take Twitter with you</h2>\n  <div class=\"mobile-devices\"></div>\n  <p>\n    \n    \n    \n    Get the Twitter app for your <a href=\"");t.b(t.v(t.f("android_path",c,p,0)));t.b("\" class=\"call-to-action\">Android</a>, <a href=\"");t.b(t.v(t.f("blackberry_path",c,p,0)));t.b("\" class=\"call-to-action\">Blackberry</a>, <a href=\"");t.b(t.v(t.f("iphone_path",c,p,0)));t.b("\" class=\"call-to-action\">iPhone</a>, <a href=\"");t.b(t.v(t.f("ipad_path",c,p,0)));t.b("\" class=\"call-to-action\">iPad</a>, or <a href=\"");t.b(t.v(t.f("wp7_path",c,p,0)));t.b("\" class=\"call-to-action\">Windows Phone 7</a>.\n  </p>\n</div>\n<div class=\"promptbird-action-bar\">\n  <a class=\"btn call-to-action\" href=\"");t.b(t.v(t.f("mobile_gallery_path",c,p,0)));t.b("\">Download the app</a>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_one_click_import": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class='one-click-import'>\n  <h2 class='one-click-import-header'>Find your friends on Twitter</h2>\n</div>\n<div class=\"promptbird-action-bar\">\n  <span href=\"#\" class=\"one-click-import-button btn call-to-action\" data-email=\"");t.b(t.v(t.f("email",c,p,0)));t.b("\">Import your contacts from ");t.b(t.v(t.f("email",c,p,0)));t.b("</span>\n</div>\n");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_profile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"profile\">\n  <h2>\n    Complete your profile\n  </h2>\n  <p>\n    It helps instantly identify you to those following you, and tells those who aren't more about you.\n  </p>\n</div>\n<div class=\"promptbird-action-bar\">\n  <a class=\"btn call-to-action\" href=\"");t.b(t.v(t.f("settings_profile_path",c,p,0)));t.b("\">Complete your profile</a>\n</div>");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"prompt_vit_de": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b(t.rp("dismiss_button0",c,p,""));t.b("<div class=\"vit-de\">\n  <div class=\"text\">\n    <h2>@tape_tv ist jetzt auf Twitter (<a href=\"/tape_tv\">@tape_tv</a>)</h2>\n    <img class=\"vit_de_img\" src=\"//si0.twimg.com/profile_images/1104820344/Untitled-1_normal.jpg\"></img>\n    <h3>\n      tape.tv ist Dein Musikfernsehen.  Hier gibt es Empfehlungen zu neuen, guten und alten Musikvideos.\n    </h3>\n  </div>\n  <div class=\"buttons promptbird-action-bar\">\n");t.b(t.rp("combo_follow_button1",c,p,"    "));t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"dismiss_button0": {name:"dismiss_button"},"combo_follow_button1": {name:"combo_follow_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"protected_ancestor_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"simple-tweet tweet js-stream-tweet js-actionable-tweet js-profile-popup-actionable\">\n  <i class=\"dogear\"></i>\n  <div class=\"content\">\n    <div class=\"stream-item-header\">\n");t.b(t.rp("tweet_user_block0",c,p,"      "));t.b("    </div>\n    ");if(t.s(t.f("user",c,p,1),c,p,0,235,313,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<p class=\"js-tweet-text\"><em>@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("'s account is protected.</em></p>");});c.pop();}t.b("\n" + i);t.b("    <div class=\"stream-item-footer\"></div>\n  </div>\n</div>");return t.fl(); }, partials: {"tweet_user_block0": {name:"tweet_user_block"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"protected_user": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-protected stream-placeholder\">\n  <div class=\"stream-end-inner\">\n    <h2>@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("'s account is protected.</h2>\n    <p>Only confirmed followers have access to @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("'s Tweets and complete profile. Click the \"Follow\" button to send a follow request.</p>\n    <i class=\"watermark-lock\"></i>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"proxy_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,24,378,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"proxy-tweet-container\">\n");t.b(t.rp("stream_tweet0",c,p,"    "));t.b("  </div>\n");});c.pop();}return t.fl(); }, partials: {"stream_tweet0": {name:"stream_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"qunit_tests": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\"/>\n  <title>");if(t.s(t.f("is_t1",c,p,1),c,p,0,86,94,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("T1 Tests");});c.pop();}if(!t.s(t.f("is_t1",c,p,1),c,p,1,0,0,"")){t.b("Phoenix Tests");};t.b("</title>\n\n  <style type=\"text/css\" media=\"screen\">\n    iframe {\n      position: absolute;\n      left: -9999em;\n      top: -9999em;\n    }\n  </style>\n\n  <script type=\"text/javascript\" src=\"/phoenix/external_resources/loadrunner.js\"></script>\n  <script type=\"text/javascript\" src=\"/phoenix/external_resources/loadrunner_plugin_signal.js\"></script>\n  <script type=\"text/javascript\" src=\"/phoenix/external_resources/loadrunner_plugin_json.js\"></script>\n  <script type=\"text/javascript\" src=\"/phoenix/external_resources/loadrunner_plugin_css.js\"></script>\n  <script type=\"text/javascript\" src=\"/phoenix/js/tests/test_setup.js\"></script>\n\n");if(t.s(t.f("qunit_css",c,p,1),c,p,0,785,837,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <link rel=stylesheet href=\"");t.b(t.v(t.f("file_name",c,p,0)));t.b("\" />\n");});c.pop();}t.b("\n" + i);t.b("  <script type=\"text/javascript\">\n    /* Degrade gracefully if the browser doesn't support console.log */\n    ");t.b(t.t(t.f("fake_console_js",c,p,0)));t.b("\n");t.b("\n" + i);t.b("    // Make these globally overrideable in IE\n    window.setTimeout = window.setTimeout;\n    window.setInterval = window.setInterval;\n    window.clearTimeout = window.clearTimeout;\n    window.clearInterval = window.clearInterval;\n  </script>\n\n  <!-- QUnit and other libraries -->\n  <script src=\"/phoenix/external_resources/watch.js\" type=\"text/javascript\"></script>\n  <script src=\"/phoenix/js/lib/qunit.js\" type=\"text/javascript\"></script>\n  <script>\n    testSetup.loadrunnerOptions('");t.b(t.t(t.f("loadrunner_modpath",c,p,0)));t.b("');\n\n  // We always line bootstrap data in qunit since caching for logged out is not a concern here\n  provide('boot/bootstrap_data', function(exports) {\n    signal('>deciderFeaturesFromBootstrap');\n    exports(");t.b(t.t(t.f("bootstrap_data_json",c,p,0)));t.b(");\n  });\n\n  ");t.b(t.t(t.f("inline_request_log",c,p,0)));t.b("\n");t.b("\n" + i);if(t.s(t.f("assets_from_cdn",c,p,1),c,p,0,1789,1884,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    var bootData = ");t.b(t.t(t.f("boot_data_json",c,p,0)));t.b(";\n    using.bundles.push(bootData.loadrunnerAssets);\n");});c.pop();}t.b("\n" + i);t.b("  // QUnit logging extensions\n  var _qunitErrorLog = \"\",\n      _qunitDone = false,\n      _qunitFailures,\n      _qunitTotal;\n\n  var twttr = {};\n\n  </script>\n\n  <script src=\"/phoenix/external_resources/swift_reroute.js\" type=\"text/javascript\"></script>\n  <script>\n\n  // used by bluejs\n  window.isTestMode = true;\n\n  // Make sure to use precompiled scripts for Hogan testing\n  function compileTemplates() {\n     var func;\n     for (var t in twttr.templates) {\n       eval('func = ' + Mustache.twitterHogan.compile(twttr.templates[t], {asString: true, sectionTags:[{o: '_i', c: 'i'}]}));\n       twttr.templates[t] = new Mustache.TwitterTemplate(func, \"\", Mustache.twitterHogan, {sectionTags:[{o: \"_i\", c: \"i\"}], disableLambda:true});\n       var view = twttr.util.camelize(t);\n       view = view.charAt(0).toUpperCase() + view.slice(1);\n       twttr.views[view]._template = twttr.templates[t];\n     }\n  }\n\n  var useHogan = ~window.location.search.indexOf('hogan=force');\n\n  using(\n      '/phoenix/js/run/qunitExtensions.js',\n      '/phoenix/js/bluejs/test/helpers/shadow.js',\n      '/phoenix/js/tests/test_helpers.js',\n      'boot/bootstrap_data',\n      function(data) {\n\n      testSetup.qunitOptions();\n      localStorage && localStorage.clear();\n      sessionStorage && sessionStorage.clear();\n      testSetup.twttrGlobals(data, ");t.b(t.v(t.f("is_t1",c,p,0)));t.b(", ");t.b(t.v(t.f("expando",c,p,0)));t.b(");\n\n      using(\n        twttr.bundleCore,\n        'requestLog', // only required for selenium and qunit tests\n            function() {\n              using(\n                twttr.bundleMore,\n                'phoenix/external_resources/admin.js',\n                function() {\n                  window.getFixtureData = function(fixture_name) {\n                    var allFixtures = ");t.b(t.t(t.f("json_fixtures",c,p,0)));t.b(";\n                    return allFixtures[fixture_name] || {};\n                  };\n\n                  testSetup.overwriteScribeAndDecider();\n\n                  using(\n                    '/phoenix/js/bluejs/test/helpers/api_harness.js',\n                    '/phoenix/js/bluejs/test/fixtures/fixtures.js',\n                    '/phoenix/js/tests/fixtures/autocomplete_fixtures.js',\n                    function() {\n                    mockAPI();\n                    signal('>payload');\n                    signal('>api_ready');\n\n                    var bundleFetchEndTime = new Date();\n\n                    testSetup.overwriteScribeAndDecider();\n                    twttr.$win = $(window);\n                    twttr.$doc = $(document);\n                    var scripts = [];\n\n                    if (useHogan) {\n                      scripts.push('/phoenix/js/lib/hogan.js');\n                    }\n\n");if(t.s(t.f("phoenix_js_tests",c,p,1),c,p,0,4590,4802,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                      scripts.push('");t.b(t.v(t.f("file_name",c,p,0)));t.b("');\n                      using(scripts, function() {\n                        sanityCheckTestFile(\"");t.b(t.v(t.f("file_name",c,p,0)));t.b("\");\n                      });\n");});c.pop();}t.b("\n" + i);t.b("                    using(scripts, function() {\n                      if (useHogan) {\n                        compileTemplates();\n                      }\n                      start();\n                    });\n                  });\n                }\n          );\n        }\n      );\n    });\n  </script>\n\n</head>\n<body>\n  <h1 id=\"qunit-header\">");if(t.s(t.f("is_t1",c,p,1),c,p,0,5176,5184,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("T1 Tests");});c.pop();}if(!t.s(t.f("is_t1",c,p,1),c,p,1,0,0,"")){t.b("Phoenix Tests");};t.b("</h1>\n  <h2 id=\"qunit-banner\"></h2>\n  <h2 id=\"qunit-userAgent\"></h2>\n  <ol id=\"qunit-tests\"></ol>\n  <div id='test-content'></div>\n  <!-- This is (our version of) QUnit's default HTML fixture area -->\n  <div id='main'></div>\n  <div class=\"twttr-dialog-wrapper\"></div>\n</body>\n</html>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"rate_limit_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"four-twenty\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,52,564,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <h2>Uh-oh! You're being rate-limited!</h2>\n\n    <p class='rate-limit-message'>\n      While we appreciate your enthusiasm, in order to control abuse, we limit how often you can search.\n    </p>\n\n    <p class='rate-limit-message'>\n      For locations where many people share the same IP address (e.g., corporations and conferences), our rate limits may be too strict. If you believe you are using Twitter normally, please <a href=\"");t.b(t.v(t.f("support_path",c,p,0)));t.b("\">let us know</a>.\n    </p>\n\n    <p>");t.b(t.rp("generic_footer0",c,p,""));t.b("</p>\n");});c.pop();}t.b("</div>");return t.fl(); }, partials: {"generic_footer0": {name:"generic_footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"reactivated_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"banner-outer banner-border\">\n  <div class=\"banner\">\n    <div class=\"banner-inside\">\n      <div id=\"account-reactivated\" class=\"first-banner-row\">\n        <a class='pane-close' href='#'>Close <span>&times;</span></a>\n        <span class=\"title\">Welcome back!</span>\n        <span>If you didn't mean to reactivate your account, you can deactivate it again from the <a class=\"reactivate-settings-link\" href=\"");t.b(t.v(t.f("settings_path",c,p,0)));t.b("\">settings page</a>.</span>\n      </div>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"recent_profile_activity": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("show_following",c,p,1),c,p,0,19,48,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("following_list_small0",c,p,"  "));});c.pop();}t.b("\n" + i);if(t.s(t.f("show_following_full",c,p,1),c,p,0,93,121,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("following_list_full1",c,p,"  "));});c.pop();}t.b("\n" + i);if(t.s(t.f("show_followers",c,p,1),c,p,0,166,195,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("followers_list_small2",c,p,"  "));});c.pop();}t.b("\n" + i);if(t.s(t.f("show_wtf_links",c,p,1),c,p,0,235,371,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("following_nobody",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("positive_nooblevel",c,p,1),c,p,0,287,323,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("who_to_follow_links3",c,p,"      "));});c.pop();}};});c.pop();}return t.fl(); }, partials: {"following_list_small0": {name:"following_list_small"},"following_list_full1": {name:"following_list_full"},"followers_list_small2": {name:"followers_list_small"},"who_to_follow_links3": {name:"who_to_follow_links"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"recent_tweets": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"recent-tweets\">\n");if(t.s(t.f("items",c,p,1),c,p,0,40,65,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("simple_tweet0",c,p,"    "));});c.pop();}t.b("</div>");return t.fl(); }, partials: {"simple_tweet0": {name:"simple_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"recently_followed": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"recently-followed-users\">\n\n  <div class=\"followed clearfix ");if(t.s(t.f("following_10",c,p,1),c,p,0,88,100,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("following-10");});c.pop();}t.b("\">\n");if(t.s(t.f("welcome_flow",c,p,1),c,p,0,141,738,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("screen_name",c,p,1),c,p,0,164,225,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <h2>Welcome To Twitter @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("!</h2>\n");});c.pop();}if(!t.s(t.f("screen_name",c,p,1),c,p,1,0,0,"")){t.b("        <h2>Who do you want to follow?</h2>\n");};t.b("\n" + i);t.b("      <p class=\"welcome-few-followers\">To get the most out of Twitter follow your first <strong>10 accounts</strong> that are of interest to you.</p>\n      <p class=\"welcome-many-followers\">Awesome, you've followed your first 10! As you follow more users, your timeline of updates will get better and better.</p>\n      <h2 class=\"welcome-follow-count\">You follow <span>");t.b(t.v(t.f("following_count",c,p,0)));t.b("</span></h2>\n");});c.pop();}if(!t.s(t.f("welcome_flow",c,p,1),c,p,1,0,0,"")){t.b("        <h2>\n          You recently followed\n");if(t.s(t.f("user",c,p,1),c,p,0,842,975,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <span class=\"dot\">&middot;</span>\n            <a class='view-all' href=\"");t.b(t.v(t.f("user_following_path",c,p,0)));t.b("\">view all</a>\n");});c.pop();}t.b("        </h2>\n");};t.b("\n" + i);if(t.s(t.f("latest_friends",c,p,1),c,p,0,1045,1077,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_thumb_list0",c,p,"      "));});c.pop();}t.b("\n" + i);t.b("  </div>\n\n");if(t.s(t.f("latest_friend",c,p,1),c,p,0,1128,1268,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"suggestions clearfix\">\n        <hr />\n        <p>Similar to <span>");t.b(t.v(t.f("latest_friend",c,p,0)));t.b("</span></p>\n        <ul />\n    </div>\n");});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"user_thumb_list0": {name:"user_thumb_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"recently_viewed": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"recently-viewed-users clearfix\">\n\n  <h2>\n    You recently viewed\n    <span class=\"dot\">&middot;</span>\n    <a class='clear-all' href=\"#\">clear</a>\n  </h2>\n\n  <ul>\n");t.b(t.rp("user_small_list0",c,p,"    "));t.b("  </ul>\n\n</div>\n");return t.fl(); }, partials: {"user_small_list0": {name:"user_small_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"related_queries": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-related-queries search-assist-related-queries\" data-component-term=\"related_queries\">\n  Related:\n");if(t.s(t.f("related_queries",c,p,1),c,p,0,134,330,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("related_query",c,p,0)));t.b("\" data-query=\"");t.b(t.v(t.f("query",c,p,0)));t.b("\" data-search-assistance=\"");t.b(t.v(t.f("related_query",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\">");t.b(t.v(t.f("related_query",c,p,0)));t.b("</a>");t.b(t.v(t.f("delimiter",c,p,0)));t.b("\n" + i);});c.pop();}t.b("</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"related_tweets_data_attributes": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("data-related-impression-id=\"");t.b(t.v(t.f("related_impression_id",c,p,0)));t.b("\" data-related-group-name=\"");t.b(t.v(t.f("related_group_name",c,p,0)));t.b("\" data-related-annotations=\"");t.b(t.v(t.f("related_annotations",c,p,0)));t.b("\"\n");if(t.s(t.f("ab_data_bucket",c,p,1),c,p,0,174,318,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  data-ab-data-bucket=\"");t.b(t.v(t.f("ab_data_bucket",c,p,0)));t.b("\" data-ab-data-experiment-key=\"");t.b(t.v(t.f("ab_data_experiment_key",c,p,0)));t.b("\" data-ab-data-version=\"");t.b(t.v(t.f("ab_data_version",c,p,0)));t.b("\"\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"replies": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,24,448,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("on_permalink",c,p,1),c,p,1,0,0,"")){t.b("    <div class=\"replies js-conversation-replies\">\n");};t.b("\n" + i);if(t.s(t.f("current_user",c,p,1),c,p,0,137,235,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <img class=\"inline-reply-user-image avatar size32\" src=\"");t.b(t.v(t.f("profile_image_absolute_url",c,p,0)));t.b("\">\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("reply_tweet_box",c,p,1),c,p,0,278,427,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"inline-reply-tweetbox swift\">\n");if(t.s(t.f("on_permalink",c,p,1),c,p,0,352,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("swift_tweet_box0",c,p,"          "));});c.pop();}t.b("      </div>\n");});c.pop();}});c.pop();}t.b("\n" + i);if(t.s(t.f("has_replies",c,p,1),c,p,0,490,509,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("replies_to1",c,p,"  "));});c.pop();}t.b("\n" + i);if(!t.s(t.f("has_replies",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("swift",c,p,1),c,p,0,556,579,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("replies_to2",c,p,"    "));});c.pop();}};t.b("\n" + i);if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,632,682,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("on_permalink",c,p,1),c,p,1,0,0,"")){t.b("  </div>\n");};});c.pop();}return t.fl(); }, partials: {"swift_tweet_box0": {name:"swift_tweet_box"},"replies_to1": {name:"replies_to"},"replies_to2": {name:"replies_to"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"replies_to": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"");if(!t.s(t.f("has_replies",c,p,1),c,p,1,0,0,"")){t.b("hidden ");};t.b("replies-to");if(t.s(t.f("on_permalink",c,p,1),c,p,0,78,94,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" permalink-inner");});c.pop();}if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,135,141,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" swift");});c.pop();}t.b("\" ");t.b(t.rp("related_tweets_data_attributes0",c,p,""));t.b(">\n  <div class=\"tweets-wrapper\">\n");if(t.s(t.f("has_replies",c,p,1),c,p,0,255,571,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("replies_html",c,p,1),c,p,0,279,313,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        ");t.b(t.t(t.f("replies_html",c,p,0)));t.b("\n" + i);});c.pop();}if(!t.s(t.f("replies_html",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("descendant_tweet_views",c,p,1),c,p,0,390,427,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("simple_tweet1",c,p,"          "));});c.pop();}if(t.s(t.f("fork_tweet_views",c,p,1),c,p,0,484,521,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("simple_tweet2",c,p,"          "));});c.pop();}};});c.pop();}t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"related_tweets_data_attributes0": {name:"related_tweets_data_attributes"},"simple_tweet1": {name:"simple_tweet"},"simple_tweet2": {name:"simple_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"reply_dialog_footer": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet twttr-dialog-reply-footer colored-links\">\n  <img src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\"/>\n  <p>\n    <span class=\"twttr-reply-screenname\">");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span>\n    <p class=\"js-tweet-text\">\n    ");t.b(t.t(t.f("text",c,p,0)));t.b("\n" + i);t.b("    </p>\n  </p>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"retweeters": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<h3 class='retweets_count'>");t.b(t.t(t.f("retweeted_by_count",c,p,0)));t.b("</h3>\n<div class=\"meta-links clearfix\">\n  <ul class='retweeters'>\n");if(t.s(t.f("retweeters",c,p,1),c,p,0,136,173,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_thumb_list_item0",c,p,"      "));});c.pop();}t.b("  </ul>\n</div>\n");return t.fl(); }, partials: {"user_thumb_list_item0": {name:"user_thumb_list_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"saved_search_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"saved-search-container\">\n");if(t.s(t.f("show_trashcan",c,p,1),c,p,0,57,245,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"delete-search\">\n      <div class=\"button delete-search-button\">\n        <span class=\"trashcan\"></span> <strong>Delete this saved search</strong>\n      </div>\n    </div>\n");});c.pop();}if(!t.s(t.f("show_trashcan",c,p,1),c,p,1,0,0,"")){t.b("    <div class=\"save-search\">\n      <div class=\"button save-search-button\">\n        <span class=\"plus\"></span> <strong>Save this search</strong>\n      </div>\n    </div>\n");};t.b("<div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"screen_name_followed_by": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("followed_by",c,p,1),c,p,0,16,120,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"screen-name\"><s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span><small class=\"follow-status\">follows you</small>");});c.pop();}t.b("\n" + i);if(!t.s(t.f("followed_by",c,p,1),c,p,1,0,0,"")){t.b("<span class=\"screen-name\"><s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span>");};t.b("\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_typeahead": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<input type=\"text\">");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"search_advanced": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"search advanced-search\">\n  <h1>Advanced <strong>Search</strong></h1>\n\n  <form class=\"twitter-form\">\n\n    <fieldset>\n      <legend><span>Words</span></legend>\n      <div class=\"txt\">\n        <label>\n          <span class=\"td\">All of these words</span>\n          <input type=\"text\" name=\"ands\" />\n        </label>\n      </div>\n      <div class=\"txt\">\n        <label>\n          <span class=\"td\">This exact phrase</span>\n          <input type=\"text\" name=\"phrase\" />\n        </label>\n      </div>\n      <div class=\"txt\">\n        <label>\n          <span class=\"td\">Any of these words</span>\n          <input type=\"text\" name=\"ors\" />\n        </label>\n      </div>\n      <div class=\"txt\">\n        <label>\n          <span class=\"td\">None of these words</span>\n          <input type=\"text\" name=\"nots\" />\n        </label>\n      </div>\n      <div class=\"txt\">\n        <label>\n          <span class=\"td\">These hashtags</span>\n          <input type=\"text\" name=\"tag\" />\n        </label>\n      </div>\n      <div class=\"txt\">\n        <label>\n          <span class=\"td\">Written in</span>\n          <select id=\"lang\" name=\"lang\">\n            <option value=\"all\" selected=\"selected\">Any Language</option>\n");if(t.s(t.f("languages",c,p,1),c,p,0,1227,1318,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <option value=\"");t.b(t.v(t.f("code",c,p,0)));t.b("\">");t.b(t.v(t.f("localized_name",c,p,0)));t.b(" (");t.b(t.v(t.f("name",c,p,0)));t.b(")</option>\n");});c.pop();}t.b("          </select>\n        </label>\n      </div>\n    </fieldset>\n\n    <fieldset>\n      <legend><span>People</span></legend>\n      <div class=\"txt\">\n        <label>\n          <span class=\"td\">From these accounts</span>\n          <input type=\"text\" name=\"from\" />\n        </label>\n      </div>\n      <div class=\"txt\">\n        <label>\n          <span class=\"td\">To these accounts</span>\n          <input type=\"text\" name=\"to\" />\n        </label>\n      </div>\n      <div class=\"txt\">\n        <label>\n          <span class=\"td\">Mentioning these accounts</span>\n          <input type=\"text\" name=\"ref\" />\n        </label>\n      </div>\n    </fieldset>\n\n    <fieldset class=\"geo\">\n      <legend><span>Places</span></legend>\n      <div class=\"txt\">\n        <label>\n          <span class=\"td\">Near this place</span>\n          <input type=\"text\" name=\"near\" />\n        </label>\n      </div>\n      <div class=\"sel\">\n        <label>\n          <span class=\"td\">Within this distance</span>\n          <select name=\"within\">\n            <option value=\"1\">1</option>\n            <option value=\"5\">5</option>\n            <option value=\"10\">10</option>\n            <option value=\"15\" selected=\"selected\">15</option>\n            <option value=\"25\">25</option>\n            <option value=\"50\">50</option>\n            <option value=\"100\">100</option>\n            <option value=\"500\">500</option>\n            <option value=\"1000\">1000</option>\n          </select>\n        </label>\n        <span class=\"rad\">\n          <label><input name=\"units\" type=\"radio\" value=\"mi\" checked=\"checked\" /><span>miles</span></label>\n          <label><input name=\"units\" type=\"radio\" value=\"km\" /><span>kilometers</span></label>\n        </span>\n      </div>\n    </fieldset>\n\n    <fieldset>\n      <legend><span>Other</span></legend>\n      <div class=\"chk\">\n        <span class=\"td\">Select:</span>\n        <span class=\"chk-inner\">\n          <label><input name=\"attd\" type=\"checkbox\" value=\":)\" /><span>Positive :)</span></label>\n          <label><input name=\"attd\" type=\"checkbox\" value=\":(\" /><span>Negative :(</span></label>\n          <label><input name=\"attd\" type=\"checkbox\" value=\"?\" /><span>Question ?</span></label>\n          <label><input name=\"include\" type=\"checkbox\" value=\"retweets\" /><span>Include retweets</span></label>\n        </span>\n      </div>\n    </fieldset>\n\n    \n    <div class=\"button btn primary-btn submit selected\">Search</div>\n\n  </form>\n\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"search_basic": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"search basic-search\">\n  <h1>See what’s happening <strong>right now</strong></h1>\n  <form action=\"");t.b(t.v(t.f("form_search_results_path",c,p,0)));t.b("\" method=\"GET\">\n    <input value=\"\" name=\"q\" type=\"text\" placeholder=\"\" />\n    <div>\n      \n      <div class=\"button btn primary-btn submit selected\">Search</div>\n");t.b(t.rp("search_help_operators0",c,p,"      "));t.b("    </div>\n  </form>\n  <div class=\"trends-container\"></div>\n</div>");return t.fl(); }, partials: {"search_help_operators0": {name:"search_help_operators"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"search_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"combo-btn\">\n  <a class=\"combo-btn-action\" href=\"#\">\n    Search\n  </a>\n  <span class=\"combo-btn-toggle\">\n    <span class=\"combo-btn-carrot\"></span>\n  </span>\n  <ul class=\"combo-btn-dropdown\">\n    <li><a href=\"#\">Refine results</a></li>\n  </ul>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"search_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module header-module js-search-header\">\n  <div class=\"flex-module\">\n    <form class=\"search-header js-search-form\" action=\"/search\" method=\"GET\">\n      <table class=\"flex-table\">\n        <tbody>\n          <tr>\n            <td class=\"flex-table-primary\">\n              <div class=\"flex-table-form\">\n                <input class=\"flex-table-input search-query js-search-header-query\" name=\"q\" type=\"text\" placeholder=\"Search Twitter\">\n              </div>\n            </td>\n            <td class=\"flex-table-secondary\">\n              <div class=\"btn-group flex-table-btn js-search-dropdown\">\n                <button type=\"submit\" class=\"btn search-btn js-submit\">\n                  Search\n                </button>\n                <button type=\"button\" class=\"dropdown btn btn-search-actions js-search-dropdown-button\">\n                  <i class=\"search-toggle\"></i>\n                </button>\n                <ul class=\"dropdown-menu btn-group-dropdown js-combo-btn-dropdown-options\">\n                  <li><a class=\"js-toggle-saved-search-link\" href=\"#\">Save search</a></li>\n                  <li><a href=\"");t.b(t.v(t.f("search_advanced_path",c,p,0)));t.b("\">Advanced search</a></li>\n                  \n                  <li class=\"dropdown-caret right\">\n                    <span class=\"caret-outer\"></span>\n                    <span class=\"caret-inner\"></span>\n                  </li>\n                </ul>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </form>\n    <h2 class=\"js-search-title\">Search results</h2>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"search_help_operators": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<p class=\"operators\">\n");if(!t.s(t.f("decider_advanced_search",c,p,1),c,p,1,0,0,"")){t.b("    <strong>Tip:</strong> use <a href=\"#\">operators</a> for advanced search.\n");};if(t.s(t.f("decider_advanced_search",c,p,1),c,p,0,191,334,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <strong>Tip:</strong> use <a href=\"#\">operators</a> for <a class=\"advanced-search\" href=\"");t.b(t.v(t.f("search_advanced_path",c,p,0)));t.b("\">advanced search</a>.\n");});c.pop();}t.b("</p>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"search_home": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"main\">\n\n");if(t.s(t.f("is_advanced",c,p,1),c,p,0,38,66,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("search_advanced0",c,p,"    "));});c.pop();}if(!t.s(t.f("is_advanced",c,p,1),c,p,1,0,0,"")){t.b(t.rp("search_basic1",c,p,"    "));};t.b("\n" + i);t.b("  <div class=\"logged-out\">\n    <div class=\"bottompart\"></div>\n  </div>\n\n</div>");return t.fl(); }, partials: {"search_advanced0": {name:"search_advanced"},"search_basic1": {name:"search_basic"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"search_operators": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<table class=\"modal-table modal-table-bordered\">\n  <thead>\n    <tr>\n      <th>Operator</th>\n      <th>Finds tweets...</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr><td>twitter search</td><td>containing both \"twitter\" and \"search\". This is the default operator.</td></tr>\n    <tr><td><b>\"</b>happy hour<b>\"</b></td><td>containing the exact phrase \"happy hour\".</td></tr>\n    <tr><td>love <b>OR</b> hate</td><td>containing either \"love\" or \"hate\" (or both).</td></tr>\n    <tr><td>beer <b>-</b>root</td><td>containing \"beer\" but not \"root\".</td></tr>\n    <tr><td><b>#</b>haiku</td><td>containing the hashtag \"haiku\".</td></tr>\n    <tr><td><b>from:</b>alexiskold</td><td>sent from person \"alexiskold\".</td></tr>\n    <tr><td><b>to:</b>techcrunch</td><td>sent to person \"techcrunch\".</td></tr>\n    <tr><td><b>@</b>mashable</td><td>referencing person \"mashable\".</td></tr>\n    <tr><td>\"happy hour\" <b>near:</b>\"san francisco\"</td><td>containing the exact phrase \"happy hour\" and sent near \"san francisco\".</td></tr>\n    <tr><td><b>near:</b>NYC <b>within:</b>15mi</td><td>sent within 15 miles of \"NYC\".</td></tr>\n    <tr><td>superhero <b>since:</b>2010-12-27</td><td>containing \"superhero\" and sent since date \"2010-12-27\" (year-month-day).</td></tr>\n    <tr><td>ftw <b>until:</b>2010-12-27</td><td>containing \"ftw\" and sent up to date \"2010-12-27\".</td></tr>\n    <tr><td>movie -scary <b>:)</b></td><td>containing \"movie\", but not \"scary\", and with a positive attitude.</td></tr>\n    <tr><td>flight <b>:(</b></td><td>containing \"flight\" and with a negative attitude.</td></tr>\n    <tr><td>traffic <b>?</b></td><td>containing \"traffic\" and asking a question.</td></tr>\n    <tr><td>hilarious <b>filter:links</b></td><td>containing \"hilarious\" and linking to URLs.</td></tr>\n    <tr><td>news <b>source:twitterfeed</b></td><td>containing \"news\" and entered via TwitterFeed</td></tr>\n  </tbody>\n</table>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"search_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("dashboard0",c,p,""));t.b(t.rp("content1",c,p,""));return t.fl(); }, partials: {"dashboard0": {name:"dashboard"},"content1": {name:"content"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"search_page_tabs": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"stream-tab stream-tab-title\">\n  <h2 class=\"stream-tab-title-inner\">Tweets <span class=\"dot\">&middot;</span></h2>\n</li>\n<li class=\"stream-tab stream-tab-dropdown\">\n  <a class=\"tab-text\" href=\"#\">\n");if(t.s(t.f("top_mode",c,p,1),c,p,0,223,238,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      Top\n");});c.pop();}if(t.s(t.f("all_mode",c,p,1),c,p,0,269,284,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      All\n");});c.pop();}if(t.s(t.f("with_links_mode",c,p,1),c,p,0,322,344,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      With links\n");});c.pop();}t.b("    <i></i>\n  </a>\n</li>\n<li class=\"stream-tab refine-search\">\n  <a href=\"");t.b(t.v(t.f("search_advanced_path",c,p,0)));t.b("\">Refine results&#32;&raquo;</a>\n</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"search_stream_title": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"stream-tabs\">\n  <div class='delete-saved-search'>\n    <a href='#' class='delete-saved-search-x'></a>\n    <a href='#'>Remove saved search</a>\n  </div>\n  <li class=\"stream-tab stream-tab-title\">\n    <span class=\"stream-tab-title-inner\">\n    Search results for <strong>");t.b(t.v(t.f("query",c,p,0)));t.b("</strong> <span class=\"dot\">&middot;</span>\n    </span>\n  </li>\n  <li class=\"stream-tab stream-tab-dropdown\">\n    <a class=\"tab-text\" href=\"#\">\n");if(t.s(t.f("top_mode",c,p,1),c,p,0,449,468,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        Top\n");});c.pop();}if(t.s(t.f("all_mode",c,p,1),c,p,0,501,520,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        All\n");});c.pop();}if(t.s(t.f("with_links_mode",c,p,1),c,p,0,560,586,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        With links\n");});c.pop();}t.b("      <i></i>\n    </a>\n  </li>\n</ul>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"search_stream_view_toggler": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"toggle-item-1 ");if(t.s(t.f("active1",c,p,1),c,p,0,36,42,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\" href=\"");t.b(t.v(t.f("route1",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("tip1",c,p,0)));t.b("\">");t.b(t.v(t.f("title1",c,p,0)));t.b("</a> / <a class=\"toggle-item-2 ");if(t.s(t.f("active2",c,p,1),c,p,0,144,150,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\" href=\"");t.b(t.v(t.f("route2",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("tip2",c,p,0)));t.b("\">");t.b(t.v(t.f("title2",c,p,0)));t.b("</a>");if(t.s(t.f("decider_blender_search_timeline",c,p,1),c,p,0,249,357,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" / <a class=\"toggle-item-3 ");if(t.s(t.f("active3",c,p,1),c,p,0,288,294,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\" href=\"");t.b(t.v(t.f("route3",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("tip3",c,p,0)));t.b("\">");t.b(t.v(t.f("title3",c,p,0)));t.b("</a>");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"send_message_box": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet-box condensed\">\n  <h2>Send&nbsp;");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" a message</h2>\n  <div class=\"send-message-box\"></div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"account": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("dashboard_settings0",c,p,""));t.b("\n" + i);if(t.s(t.f("user",c,p,1),c,p,0,34,13855,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\n" + i);t.b("<div class=\"content-main\">\n  <div class=\"content-header\">\n    <div class=\"header-inner\">\n      <h2>Account</h2>\n      <p class=\"subheader\">Change your basic account, language, Tweet privacy, and location settings.</p>\n    </div>\n  </div>\n  <div class=\"content-inner no-stream-end\">\n");if(t.s(t.f("accounts_page_disabled",c,p,1),c,p,0,349,389,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("settings/alert_partial1",c,p,"      "));});c.pop();}if(!t.s(t.f("accounts_page_disabled",c,p,1),c,p,1,0,0,"")){t.b("    <form id=\"account-form\" class=\"form-horizontal requires-password\" method=\"POST\" action=\"");t.b(t.v(t.f("form_url",c,p,0)));t.b("\">\n");t.b(t.rp("settings/alert_partial2",c,p,"      "));t.b("      <input type=\"hidden\" value=\"PUT\" name=\"_method\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n      <fieldset id=\"username_fieldset\" class=\"control-group\">\n        <label for=\"user_screen_name\" class=\"control-label\">Username</label>\n        <div class=\"controls\">\n          <p id=\"username_notification\" class=\"notification\"></p>\n          <input id=\"user_screen_name\" maxlength=\"15\" name=\"user[screen_name]\" type=\"text\" value=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n          <p class=\"notification\">");t.b(t.v(t.f("username_url_base",c,p,0)));t.b("<span id=\"username_path\">");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span></p>\n        </div>\n      </fieldset>\n\n");if(t.s(t.f("email_pending",c,p,1),c,p,0,1253,2065,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div id=\"email-pending-group\" class=\"control-group\">\n        <div class=\"controls\">\n          <p>");t.b(t.t(t.f("settings_email_message",c,p,0)));t.b("</p>\n          <div id=\"email-confirmation\" class=\"resend-message\">\n            <p>\n              <a href=\"");t.b(t.v(t.f("resend_confirmation_email_path",c,p,0)));t.b("\" class=\"resend-confirmation-email\">Resend confirmation</a>\n");if(t.s(t.f("email",c,p,1),c,p,0,1610,1783,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <span class=\"bullet\">&middot; </span>\n              <a href=\"");t.b(t.v(t.f("cancel_pending_email_path",c,p,0)));t.b("\" class=\"cancel-pending-email\">Cancel this change</a>\n");});c.pop();}t.b("            </p>\n            <span class=\"activation resending-email\" style=\"display: none\">\n              Resending confirmation\n              <img src=\"/images/spinner.gif\"  height=\"14\" width=\"14\">\n            </span>\n          </div>\n        </div>\n      </div>\n");});c.pop();}t.b("\n" + i);t.b("      <fieldset id=\"email_fieldset\" class=\"control-group\">\n        <label for=\"user_email\" class=\"control-label\">Email</label>\n        <div class=\"controls\">\n          <p id=\"email_notification\" class=\"notification\"></p>\n          <input id=\"user_email\" class=\"email-input\" name=\"user[email]\" type=\"text\" value=\"");t.b(t.v(t.f("email",c,p,0)));t.b("\">\n          <p>Email will not be publicly displayed. <a href=\"https://support.twitter.com/articles/15356\" target=\"_blank\">Learn more</a>.</p>\n          <label class=\"checkbox\">\n            <input id=\"user_discoverable_by_email\" name=\"user[discoverable_by_email]\" type=\"checkbox\" value=\"1\" ");if(t.s(t.f("discoverable_by_email",c,p,1),c,p,0,2722,2729,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b(">\n            Let others find me by my email address\n          </label>\n          <input type=\"hidden\" value=\"0\" name=\"user[discoverable_by_email]\">\n");if(!t.s(t.f("email_discoverability_set",c,p,1),c,p,1,0,0,"")){t.b("            <p>Review and confirm your email setting by pressing 'Save'.\n            <a href=\"https://support.twitter.com/articles/14022\" target=\"_blank\" class=\"help-discover\"></a>\n            </p>\n");};t.b("        </div>\n      </fieldset>\n\n      <hr>\n\n      <fieldset class=\"control-group\">\n        <label for=\"user_lang\" class=\"control-label\">Language</label>\n        <div class=\"controls\">\n          <select id=\"user_lang\" name=\"user[lang]\">\n");t.b(t.rp("shared/lang_select_options3",c,p,"             "));t.b("          </select>\n");if(t.s(t.f("new_translation_center_available",c,p,1),c,p,0,3535,3679,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <p>Interested in helping translate Twitter? Check out the <a href=\"http://translate.twttr.com\">Translation Center</a>.</p>\n");});c.pop();}t.b("        </div>\n      </fieldset>\n      <fieldset class=\"control-group\">\n        <label for=\"user_time_zone\"  class=\"control-label\">Time zone</label>\n        <div class=\"controls\">\n          <select id=\"user_time_zone\" name=\"user[time_zone]\">\n");if(t.s(t.f("time_zone_options",c,p,1),c,p,0,3993,4131,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <option data-offset=\"");t.b(t.v(t.f("offset",c,p,0)));t.b("\" value=\"");t.b(t.v(t.f("zone_name",c,p,0)));t.b("\" ");if(t.s(t.f("selected",c,p,1),c,p,0,4076,4084,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected");});c.pop();}t.b(">");t.b(t.v(t.f("display",c,p,0)));t.b("</option>\n");});c.pop();}t.b("          </select>\n        </div>\n      </fieldset>\n\n      <hr>\n\n      <fieldset class=\"control-group\">\n        <label for=\"user_geo_enabled\" class=\"control-label\">Tweet location</label>\n        <div class=\"controls\">\n          <label class=\"checkbox\">\n            <input ");if(t.s(t.f("geo_enabled",c,p,1),c,p,0,4443,4450,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b(" id=\"user_geo_enabled\" name=\"user[geo_enabled]\" type=\"checkbox\" value=\"1\">Add a location to my Tweets\n          </label>\n          <input type=\"hidden\" value=\"0\" name=\"user[geo_enabled]\">\n          <p>When you tweet with a location, Twitter stores that location. You can switch location on/off before each Tweet. <a href=\"https://support.twitter.com/articles/78525\" target=\"_blank\">Learn more</a></p>\n          <div id=\"delete_geo_data\">\n            <p><a class=\"delete-info btn\" id=\"geo_button\" href=\"#\">Delete all location information</a></p>\n            <p id=\"delete_geo_info\">This will delete all location information from past Tweets. This may take up to 30 minutes.</p>\n            <p id=\"deleting_geo_data\" style=\"display: none;\">Deleting all location information from your past Tweets... This may take up to 30 minutes. You may leave this page.</p>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset class=\"control-group\">\n        <label for=\"user_nsfw_view\" class=\"control-label\">Tweet media</label>\n        <div class=\"controls\">\n          <label class=\"checkbox\">\n            <input ");if(t.s(t.f("nsfw_view",c,p,1),c,p,0,5590,5597,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b(" id=\"user_nsfw_view\" name=\"user[nsfw_view]\" type=\"checkbox\" value=\"1\"> Display media that may contain sensitive content\n          </label>\n          <input type=\"hidden\" value=\"0\" name=\"user[nsfw_view]\">\n");if(t.s(t.f("sensitive_editable",c,p,1),c,p,0,5848,6157,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <label class=\"checkbox\">\n              <input ");if(t.s(t.f("nsfw_user",c,p,1),c,p,0,5921,5928,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b(" id=\"user_nsfw_user\" name=\"user[nsfw_user]\" type=\"checkbox\" value=\"1\"> Mark my media as containing sensitive content\n            </label>\n            <input type=\"hidden\" value=\"0\" name=\"user[nsfw_user]\">\n");});c.pop();}if(!t.s(t.f("sensitive_editable",c,p,1),c,p,1,0,0,"")){t.b("            <label class=\"checkbox\">\n              <input ");if(t.s(t.f("nsfw_user",c,p,1),c,p,0,6287,6294,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b(" id=\"user_nsfw_admin\" name=\"user[nsfw_admin]\" type=\"checkbox\" disabled> Mark my media as containing sensitive content\n            </label>\n            <input type=\"hidden\" value=\"0\" name=\"user[nsfw_admin]\">\n");};t.b("          <p>If you tweet images or videos that may contain sensitive content, please check this box so that people can be warned before they see it. <a href=\"https://support.twitter.com/articles/20169200\" target=\"_blank\">Learn more</a>.</p>\n        </div>\n      </fieldset>\n\n      <fieldset id=\"user_protected_fieldset\" class=\"control-group\">\n");t.b(t.rp("dialogs/protected_verified_dialog4",c,p,"        "));t.b("        <label for=\"user_protected\" class=\"control-label\">Tweet privacy</label>\n        <div class=\"controls\">\n          <label class=\"checkbox\">\n            <input ");if(t.s(t.f("user_protected",c,p,1),c,p,0,7124,7131,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b(" id=\"user_protected\" name=\"user[protected]\" type=\"checkbox\" value=\"1\"> Protect my Tweets\n          </label>\n          <input type=\"hidden\" value=\"0\" name=\"user[protected]\">\n");if(t.s(t.f("user_protected",c,p,1),c,p,0,7352,7675,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <p>Your Tweets are currently protected; only those you approve will receive your Tweets. Your future Tweets will not be available publicly. Tweets posted previously may still be publicly visible in some places. <a href=\"https://support.twitter.com/articles/14016\" target=\"_blank\">Learn more</a>.</p>\n");});c.pop();}if(!t.s(t.f("user_protected",c,p,1),c,p,1,0,0,"")){t.b("            <p>If selected, only those you approve will receive your Tweets. Your future Tweets will not be available publicly. Tweets posted previously may still be publicly visible in some places. <a href=\"https://support.twitter.com/articles/14016\" target=\"_blank\">Learn more</a>.</p>\n");};t.b("        </div>\n      </fieldset>\n\n");if(t.s(t.f("personalization_settings_available",c,p,1),c,p,0,8122,10017,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <fieldset class=\"control-group\">\n          <label class=\"control-label ");if(t.s(t.f("personalization_settings_disabled",c,p,1),c,p,0,8240,8273,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("personalization-settings-disabled");});c.pop();}t.b("\">Personalization</label>\n          <div class=\"controls\">\n\n");if(!t.s(t.f("personalization_settings_disabled",c,p,1),c,p,1,0,0,"")){t.b("              <label class=\"checkbox\">\n                <input ");if(t.s(t.f("use_cookie_personalization",c,p,1),c,p,0,8515,8522,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b(" id=\"use_cookie_personalization\" name=\"user[use_cookie_personalization]\" type=\"checkbox\" value=\"1\">\n                Tailor Twitter based on my recent website visits\n                <input type=\"hidden\" value=\"0\" name=\"user[use_cookie_personalization]\">\n                <input type=\"hidden\" name=\"asked_cookie_personalization_setting\" value=\"1\">\n              </label>\n              <p><a class=\"personalization-preview-link\" href=\"");t.b(t.v(t.f("web_personalization_preview_path",c,p,0)));t.b("\" target=\"_blank\">Preview</a> suggestions tailored for you (not currently available to all users). <a class=\"personalization-support-link\" href=\"https://support.twitter.com/articles/20169421\" target=\"_blank\">Learn more</a> about how this works and your additional privacy controls.</p>\n");};t.b("\n" + i);if(t.s(t.f("personalization_settings_disabled",c,p,1),c,p,0,9408,9597,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <div class=\"control-list\">\n                <p>The feature to tailor Twitter based on your recent website visits is not available to you.</p>\n              </div>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("has_do_not_track_header",c,p,1),c,p,0,9677,9945,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <label>Do Not Track <img src=\"/images/accept_small.gif\" id=\"do-not-track-check\"></label>\n              <p>While you have Do Not Track turned on, your visits to sites that feature Twitter are not available to personalize your experience.</p>\n");});c.pop();}t.b("          </div>\n        </fieldset>\n");});c.pop();}t.b("\n" + i);t.b("      <fieldset class=\"control-group\">\n        <label for=\"user_ssl_only\" class=\"control-label\">HTTPS only</label>\n        <div class=\"controls\">\n          <label class=\"checkbox\">\n            <input id=\"user_ssl_only\" name=\"user[ssl_only]\" type=\"checkbox\" value=\"1\" ");if(t.s(t.f("ssl_only_enabled",c,p,1),c,p,0,10346,10353,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b(" ");if(t.s(t.f("disable_change_ssl_setting",c,p,1),c,p,0,10406,10414,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("disabled");});c.pop();}t.b(">Always use HTTPS\n          </label>\n          <input name=\"user[ssl_only]\" type=\"hidden\" value=\"0\">\n          <p>Use a secure connection where possible.</p>\n        </div>\n      </fieldset>\n\n");if(t.s(t.f("no_username_only_password_reset_enabled",c,p,1),c,p,0,10687,11578,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <fieldset class=\"control-group\">\n        <label for=\"user_no_username_only_password_reset\" class=\"control-label\">Password reset</label>\n        <div class=\"controls\">\n          <div class=\"control-list\">\n            <label class=\"checkbox\">\n              <input id=\"user_no_username_only_password_reset\" name=\"user[no_username_only_password_reset]\" type=\"checkbox\" value=\"1\" ");if(t.s(t.f("no_username_only_password_reset",c,p,1),c,p,0,11105,11112,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b(">Require personal information to reset my password\n            </label>\n            <input name=\"user[no_username_only_password_reset]\" type=\"hidden\" value=\"0\">\n          </div>\n          <p>By default, you can initiate a password reset by entering only your @username. If you check this box, you will be prompted to enter your email address or phone number if you forget your password.</p>\n        </div>\n      </fieldset>\n");});c.pop();}t.b("      <hr>\n\n");if(t.s(t.f("commercial_account_enabled",c,p,1),c,p,0,11672,12675,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <fieldset class=\"control-group\">\n          <label for=\"user_can_receive_direct_messages_from_all_followers\" class=\"control-label\">Messages</label>\n          <div class=\"controls\">\n            <label class=\"checkbox\">\n              <input id=\"user_can_receive_direct_messages_from_all_followers\" name=\"user[can_receive_direct_messages_from_all_followers]\" type=\"checkbox\" value=\"1\"\n              ");if(t.s(t.f("can_receive_direct_messages_from_all_followers",c,p,1),c,p,0,12127,12134,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("\n" + i);t.b("              >Receive direct messages from any follower\n            </label>\n            <input name=\"user[can_receive_direct_messages_from_all_followers]\" type=\"hidden\" value=\"0\">\n            <p>Generally, you must follow someone before they have the ability to direct message you. If you check this option, any Twitter user that follows you will be able to send you a DM, regardless of whether you decide to follow them back.</p>\n          </div>\n        </fieldset>\n        <hr>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("per_country_takedown",c,p,1),c,p,0,12739,13155,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <fieldset class=\"control-group\">\n          <label for=\"user_country\" class=\"control-label\">Country</label>\n          <div class=\"controls\">\n            <select id=\"user_country\" name=\"user[country]\">\n");t.b(t.rp("shared/country_select_options5",c,p,"              "));t.b("            </select>\n            <p>Select your country. This setting is saved to this browser.</p>\n          </div>\n        </fieldset>\n        <hr>\n");});c.pop();}t.b("\n" + i);t.b(t.rp("settings/save_button6",c,p,"      "));t.b(t.rp("dialogs/password_dialog7",c,p,"      "));t.b("\n" + i);t.b("      <hr>\n\n      <fieldset class=\"control-group\">\n        <div class=\"controls\">\n");if(!t.s(t.f("deactivation_available",c,p,1),c,p,1,0,0,"")){t.b("          <p><a id=\"account_deactivate_link\" class=\"deactivated\" href=\"#\">Deactivate my account</a></p>\n");};if(t.s(t.f("deactivation_available",c,p,1),c,p,0,13549,13734,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("suspended?",c,p,1),c,p,1,0,0,"")){t.b("          <p><a id=\"account_deactivate_link\" href=\"/settings/accounts/confirm_deactivation\">Deactivate my account</a></p>\n");};});c.pop();}t.b("        </div>\n      </fieldset>\n    </form>\n");};t.b("  </div>\n</div>\n");});c.pop();}return t.fl(); }, partials: {"dashboard_settings0": {name:"dashboard_settings"},"settings/alert_partial1": {name:"settings/alert_partial"},"settings/alert_partial2": {name:"settings/alert_partial"},"shared/lang_select_options3": {name:"shared/lang_select_options"},"dialogs/protected_verified_dialog4": {name:"dialogs/protected_verified_dialog"},"shared/country_select_options5": {name:"shared/country_select_options"},"settings/save_button6": {name:"settings/save_button"},"dialogs/password_dialog7": {name:"dialogs/password_dialog"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"alert_partial": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"settings-alert-box\" class=\"alert\" ");if(!t.s(t.f("alerts",c,p,1),c,p,1,0,0,"")){t.b("style=\"display: none;\"");};t.b(">\n  <i id=\"settings-alert-close\" class=\"close\"></i>\n");if(t.s(t.f("alerts",c,p,1),c,p,0,152,269,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <h4>");t.b(t.v(t.f("first",c,p,0)));t.b("</h4>\n    <div id=\"settings-alert-message\">\n      ");if(t.s(t.f("rest",c,p,1),c,p,0,229,246,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<p>");t.b(t.t(t.f("to_s",c,p,0)));t.b("</p>");});c.pop();}t.b("\n" + i);t.b("    </div>\n");});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"applications": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("dashboard_settings0",c,p,""));t.b("\n" + i);if(t.s(t.f("user",c,p,1),c,p,0,34,1969,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"content-main\">\n    <div class=\"content-header\">\n      <div class=\"header-inner\">\n        <h2>Applications</h2>\n        <p class=\"subheader\">These are the apps that can access your Twitter account. <a href=\"https://support.twitter.com/articles/76052\" target=\"_blank\">Learn more</a>.</p>\n      </div>\n    </div>\n\n");if(!t.s(t.f("has_apps",c,p,1),c,p,1,0,0,"")){t.b("      <div class=\"content-inner no-stream-end\">\n        <fieldset class=\"control-group\">\n          <h3 class=\"settings-header\">No applications have been approved to use your account.</h3>\n        </fieldset>\n      </div>\n");};if(t.s(t.f("has_apps",c,p,1),c,p,0,634,1946,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"stream\" id=\"apps-stream\">\n");if(t.s(t.f("apps",c,p,1),c,p,0,694,1896,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div id=\"");t.b(t.v(t.f("id_attr",c,p,0)));t.b("\" class=\"stream-item oauth-application ");if(t.s(t.f("suspended",c,p,1),c,p,0,776,785,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("suspended");});c.pop();}t.b("\">\n          <div class=\"app\">\n");if(t.s(t.f("ios_revoke",c,p,1),c,p,0,857,1040,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <a href=\"https://support.twitter.com/articles/20169494#remove-account\" target=\"_blank\" class=\"revoke ios-revoke-access\">Learn how to revoke an iOS app.</a>\n");});c.pop();}if(!t.s(t.f("ios_revoke",c,p,1),c,p,1,0,0,"")){t.b("              <a class=\"revoke btn\" id=\"btn_");t.b(t.v(t.f("id_attr",c,p,0)));t.b("\" type=\"button\" href=\"#\">Revoke access</a>\n");};t.b("            <div class=\"content\">\n              <div>\n                <img class=\"app-img\" src=\"");t.b(t.v(t.f("img_url",c,p,0)));t.b("\" width=\"48\" height=\"48\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n                <strong>");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>");if(t.s(t.f("organization",c,p,1),c,p,0,1416,1527,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"creator\"> by <a href=\"");t.b(t.v(t.f("organization_url",c,p,0)));t.b("\" class=\"oauth-organization\">");t.b(t.v(t.f("organization",c,p,0)));t.b("</a></span>");});c.pop();}t.b("\n" + i);t.b("              </div>\n");if(t.s(t.f("description",c,p,1),c,p,0,1596,1670,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                <p class=\"description\">");t.b(t.v(t.f("description",c,p,0)));t.b("</p>\n");});c.pop();}t.b("              <p><small class=\"metadata\">");t.b(t.v(t.f("access_type",c,p,0)));t.b(" access</small></p>\n              <p><small class=\"metadata\">Approved: ");t.b(t.v(t.f("approved",c,p,0)));t.b("</small></p>\n            </div>\n          </div>\n        </div>\n");});c.pop();}t.b("      </div>\n");t.b(t.rp("stream_end1",c,p,"      "));});c.pop();}t.b("  </div>\n");});c.pop();}return t.fl(); }, partials: {"dashboard_settings0": {name:"dashboard_settings"},"stream_end1": {name:"stream_end"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"confirm_deactivation": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("user",c,p,1),c,p,0,9,2280,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div id=\"confirm_deactivation_section\">\n  <div class=\"content-header\">\n    <div class=\"header-inner\">\n      <h2>Is this goodbye?</h2>\n      <p class=\"subheader\">\n        Are you sure you don't want to reconsider?\n        Was it something we said? <a href=\"http://support.twitter.com/forms/general\" id=\"support_feedback\">Tell us.</a>\n      </p>\n    </div>\n  </div>\n  <div class=\"content-inner no-stream-end\">\n    <div class=\"deactivation-info\">\n      <h3 class=\"deactivation-info-header\">Before you deactivate @");t.b(t.v(t.f("screen_name",c,p,0)));t.b(", know this:</h3>\n      <ul>\n        <li><strong>We will only retain your user data for 30 days</strong> and then it will be permanently deleted. You can reactivate your account at any point within 30 days of deactivation by logging back in.</li>\n        <li>You don't need to deactivate your account to <a href=\"");t.b(t.v(t.f("settings_link",c,p,0)));t.b("\">change your username or Twitter URL</a>. You can change it on the <a href=\"");t.b(t.v(t.f("settings_link",c,p,0)));t.b("\">settings</a> page. All @replies and followers will remain unchanged.</li>\n        <li>If you want to use this account's username or email address on another Twitter account, <a href=\"http://support.twitter.com/articles/14609\">change it</a> before you deactivate. Until the user data is permanently deleted, that information won't be available for use.</li>\n        <li>Your account should be removed from Twitter within a few minutes, but some content may be viewable on twitter.com for a few days after deactivation.</li>\n        <li>We have no control over <a href=\"http://support.twitter.com/articles/15349\">content indexed by search engines</a> like Google.</li>\n      </ul>\n    </div>\n    <hr>\n    <form id=\"confirm-deactivate-account-form\" class=\"form-horizontal requires-password\" name=\"f\" method=\"post\" action=\"");t.b(t.v(t.f("deactivate_account_link",c,p,0)));t.b("\">\n      <input name=\"_method\" type=\"hidden\" value=\"delete\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n      <div class=\"form-actions\">\n        <button id=\"settings_save\" class=\"btn primary-btn\" type=\"submit\">Deactivate @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</button>\n        <a href=\"");t.b(t.v(t.f("settings_link",c,p,0)));t.b("\" id=\"deactivate_account_cancel\" class=\"btn\">Cancel</a>\n      </div>\n");t.b(t.rp("dialogs/deactivation_password_dialog0",c,p,"      "));t.b("    </form>\n  </div>\n</div>\n");});c.pop();}return t.fl(); }, partials: {"dialogs/deactivation_password_dialog0": {name:"dialogs/deactivation_password_dialog"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"confirmation_modal": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<!-- Confirmation modal -->\n<h2 id=\"password_dialog_header\" style=\"display:none\">Save account changes</h2>\n<div id=\"password_dialog\" style=\"display: none\">\n  <div class=\"dialog-form\">\n    <p>Re-enter your Twitter password to save changes to your account.</p>\n    <fieldset class=\"common-form\">\n      <ul>\n        <li>\n          <label for=\"auth_password\">Password</label>\n          <div class=\"input-wrapper password-wrapper\">\n            <input id=\"auth_password\" name=\"auth_password\" type=\"password\">\n            <div>\n              <a href=\"");t.b(t.v(t.f("resend_password_path",c,p,0)));t.b("\" id=\"forgot_password\">Forgot your password?</a>\n              <span id=\"reminder_sent\" style=\"visibility: hidden\">Reminder sent!</span>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </fieldset>\n  </div>\n</div>\n<div id=\"password_dialog_footer\" style=\"display:none;\">\n  <a class=\"btn modal-submit\" id=\"save_password\">Save changes</a>\n  <a href=\"");t.b(t.v(t.f("settings_path",c,p,0)));t.b("\" id=\"cancel_link\">Cancel</a>\n</div>\n<h2 id=\"protected_dialog_header\" style=\"display:none;\">Warning!</h2>\n<div id=\"protected_dialog\" style=\"display: none;\">\n  <div class=\"dialog-form\">\n    <p>We're sorry, Twitter only verifies public accounts. If you protect your account, you will lose your verified badge.</p>\n  </div>\n</div>\n<div id=\"protected_dialog_footer\" style=\"display:none\">\n  <a id=\"stay_verified_link\" class=\"btn\" href=\"#\">Stay verified</a>\n  <a id=\"protect_my_tweets_link\" class=\"btn\" href=\"#\">Protect my Tweets</a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"design": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("dashboard_settings0",c,p,""));t.b("\n" + i);if(t.s(t.f("current_user",c,p,1),c,p,0,42,4411,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"content-main\">\n  <div class=\"content-header\">\n    <div class=\"header-inner\">\n      <h2>Design</h2>\n      <p class=\"subheader\">Customize the way Twitter looks for you and how your profile looks to others.</p>\n    </div>\n  </div>\n  <div class=\"content-inner no-stream-end\">\n    <form id=\"design-form\" class=\"form-horizontal\" method=\"post\" enctype=\"multipart/form-data\" action=\"");t.b(t.v(t.f("form_url",c,p,0)));t.b("\">\n      <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n");t.b(t.rp("settings/alert_partial1",c,p,"      "));t.b("      <h3 class=\"settings-header\">Pick a premade theme</h3>\n      <input id=\"user_profile_theme\" name=\"profile_theme\" type=\"hidden\" value=\"");t.b(t.v(t.f("profile_theme",c,p,0)));t.b("\">\n      <input id=\"user_profile_default\" name=\"user[profile_default]\" type=\"hidden\" value=\"");t.b(t.v(t.f("profile_default",c,p,0)));t.b("\">\n      <fieldset class=\"control-group\">\n        <ul class=\"theme-list clearfix\">\n");if(t.s(t.f("themes",c,p,1),c,p,0,941,1323,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <li class=\"theme-item\">\n            <label class=\"theme");if(t.s(t.f("active",c,p,1),c,p,0,1018,1027,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" selected");});c.pop();}t.b("\" data-image=\"");t.b(t.v(t.f("image",c,p,0)));t.b("\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-background_color=\"");t.b(t.v(t.f("background_color",c,p,0)));t.b("\" data-link_color=\"");t.b(t.v(t.f("link_color",c,p,0)));t.b("\" data-tiled=\"");t.b(t.v(t.f("tiled",c,p,0)));t.b("\">\n              <span class=\"selected-border\"></span><img class=\"theme-image\" src=\"");t.b(t.v(t.f("swatch",c,p,0)));t.b("\">\n            </label>\n          </li>\n");});c.pop();}t.b("        </ul>\n        <div class=\"themeleon-callout\">\n          <strong>\n            <a href=\"http://www.colourlovers.com/themeleon/twitter\" target=\"_blank\" id=\"themeleon_link\">Check out Themeleon &raquo;</a>\n          </strong>\n          Thousands of background patterns &amp; color palettes available to customize your Twitter profile.\n        </div>\n      </fieldset>\n      <hr>\n      <h3 class=\"settings-header\">Customize your own</h3>\n      <fieldset class=\"control-group\">\n        <p>See your changes instantly; they're not saved until you click \"Save changes.\" <a href=\"https://support.twitter.com/articles/15357\" target=\"_blank\">Learn more</a>.</p>\n      </fieldset>\n      <fieldset class=\"control-group\">\n        <label class=\"control-label\">Upload image</label>\n        <div class=\"controls background-settings\">\n          <div class=\"uploader-image uploader-background clearfix\">\n            <span id=\"image_preview\" class=\"image-preview bg-preview\" ");if(t.s(t.f("profile_use_background_image",c,p,1),c,p,0,2329,2392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("style=\"background-image: url(");t.b(t.v(t.f("profile_background_image_url",c,p,0)));t.b(")\"");});c.pop();}t.b("></span>\n            <div class=\"uploader-tools\">\n              <input id=\"user_profile_use_background_image\" type=\"hidden\" name=\"user[profile_use_background_image]\" value=\"");t.b(t.v(t.f("profile_use_background_image",c,p,0)));t.b("\">\n");t.b(t.rp("swift_photo_selector2",c,p,"              "));t.b("              <p>Maximum size of 800k. GIF, JPG, PNG.</p>\n              <label class=\"checkbox\">\n                <input id=\"user_profile_background_tile\" name=\"user[profile_background_tile]\" type=\"checkbox\" value=\"1\" ");if(t.s(t.f("profile_background_tile",c,p,1),c,p,0,2918,2925,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b(">\n                <input name=\"user[profile_background_tile]\" type=\"hidden\" value=\"0\"> Tile background</label>\n              </label>\n              <button class=\"btn-link\" id=\"remove_background\" type=\"button\" ");if(!t.s(t.f("profile_use_background_image",c,p,1),c,p,1,0,0,"")){t.b("style=\"display:none\"");};t.b(" >Remove background</button>\n            </div>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset class=\"control-group\">\n        <label class=\"control-label\">Background</label>\n        <div class=\"controls\">\n          <div id=\"background_color\" class=\"color-preview\" style=\"background-color: #");t.b(t.v(t.f("profile_background_color",c,p,0)));t.b(";\"></div>\n          <input id=\"background_color_hex\" class=\"input-small input-color\" type=\"text\" data-type=\"background_color\" data-color=\"#");t.b(t.v(t.f("profile_background_color",c,p,0)));t.b("\" value=\"#");t.b(t.v(t.f("profile_background_color",c,p,0)));t.b("\" name=\"user[profile_background_color]\">\n        </div>\n      </fieldset>\n      <fieldset class=\"control-group\">\n        <label class=\"control-label\">Links</label>\n        <div class=\"controls\">\n          <div id=\"links_color\" class=\"color-preview\" style=\"background-color: #");t.b(t.v(t.f("profile_link_color",c,p,0)));t.b(";\"></div>\n          <input id=\"links_color_hex\" class=\"input-small input-color\" data-type=\"links_color\" data-color=\"#");t.b(t.v(t.f("profile_link_color",c,p,0)));t.b("\" type=\"text\" value=\"#");t.b(t.v(t.f("profile_link_color",c,p,0)));t.b("\" name=\"user[profile_link_color]\">\n        </div>\n      </fieldset>\n      <hr>\n");t.b(t.rp("settings/save_button3",c,p,"      "));t.b("    </form>\n  </div>\n</div>\n");});c.pop();}return t.fl(); }, partials: {"dashboard_settings0": {name:"dashboard_settings"},"settings/alert_partial1": {name:"settings/alert_partial"},"swift_photo_selector2": {name:"swift_photo_selector"},"settings/save_button3": {name:"settings/save_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"email": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-header\">\n  <div class=\"header-inner\">\n    <h2>Mobile</h2>\n    <p class=\"subheader\">Set up your mobile phone with Twitter to receive notifications.</p>\n  </div>\n</div>\n<div class=\"content-inner no-stream-end\">\n");t.b(t.rp("settings/alert_partial0",c,p,"  "));t.b("\n" + i);t.b("  <form id=\"sms-email-form\" class=\"form-horizontal sms-form form-flush-actions\" method=\"post\" action=\"/settings/devices/enable/");t.b(t.v(t.f("device_id",c,p,0)));t.b("\">\n    <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n\n    <fieldset class=\"control-group\">\n      <label for=\"\" class=\"control-label\">Email Notification</label>\n      <div class=\"controls\">\n        <p id=\"device-country-carrier\">\n          ");t.b(t.v(t.f("device_address",c,p,0)));t.b("\n" + i);t.b("        </p>\n      </div>\n    </fieldset>\n\n");t.b(t.rp("settings/devices/notifications1",c,p,"    "));t.b(t.rp("settings/devices/sleep_settings2",c,p,"    "));t.b("\n" + i);t.b("    <hr>\n\n");t.b(t.rp("settings/save_button3",c,p,"    "));t.b(t.rp("dialogs/password_dialog4",c,p,"    "));t.b("  </form>\n\n  <form id=\"sms-email-delete-form\" class=\"form-horizontal sms-form\" method=\"post\" action=\"/settings/devices/destroy/");t.b(t.v(t.f("device_id",c,p,0)));t.b("\">\n    <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n    <input type=\"hidden\" name=\"_method\" value=\"delete\">\n    <div class=\"form-actions\" id=\"delete_device_link\">\n      <button type=\"submit\" class=\"btn-link\" id=\"delete_device\">Delete my email address</button>\n    </div>\n  </form>\n</div>");return t.fl(); }, partials: {"settings/alert_partial0": {name:"settings/alert_partial"},"settings/devices/notifications1": {name:"settings/devices/notifications"},"settings/devices/sleep_settings2": {name:"settings/devices/sleep_settings"},"settings/save_button3": {name:"settings/save_button"},"dialogs/password_dialog4": {name:"dialogs/password_dialog"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"email_create": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-header\">\n  <div class=\"header-inner\">\n    <h2>Mobile</h2>\n    <p class=\"subheader\">Set up your mobile phone with Twitter to receive notifications.</p>\n  </div>\n</div>\n<div class=\"content-inner no-stream-end\">\n");t.b(t.rp("settings/alert_partial0",c,p,"  "));t.b("\n" + i);t.b("  <div class=\"email-create sms-form\">\n    <h3 class=\"settings-header\">Email Notification</h3>\n    <p>\n      Twitter is more fun when used through your Keitai email. Set yours up! It's easy! Twitter does not charge for this service. Standard data rates may apply.\n    </p>\n\n    <div class=\"email-create-list\">\n      <div class=\"email-create-list-item\">\n        <div class=\"email-create-list-header\">1.</div>\n        <div class=\"email-create-list-body\">\n          From your Keitai, Send a blank email to<br>\n          <code>");t.b(t.v(t.f("email_create_verify_address",c,p,0)));t.b("</code><br>\n          to verify your email address.\n          <p>You can send a blank email from this QR code.</p>\n\n          <div class=\"email-create-verify-qr-code\">\n            <img src=\"");t.b(t.v(t.f("verify_qr_code_image_url",c,p,0)));t.b("\" width=\"136\" height=\"136\" alt=\"");t.b(t.v(t.f("email_create_verify_address",c,p,0)));t.b("\">\n          </div>\n        </div>\n      </div>\n\n      <div class=\"email-create-list-item\">\n        <div class=\"email-create-list-header\">2.</div>\n        <div class=\"email-create-list-body\">\n          Twitter send a verification email to your Keitai.\n        </div>\n      </div>\n\n      <div class=\"email-create-list-item\">\n        <div class=\"email-create-list-header\">3.</div>\n        <div class=\"email-create-list-body\">\n          Open a link on the verification email to complete your verification.\n        </div>\n      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {"settings/alert_partial0": {name:"settings/alert_partial"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"notifications": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("dashboard_settings0",c,p,""));t.b("\n" + i);if(t.s(t.f("user",c,p,1),c,p,0,34,5202,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"content-main\">\n    <div class=\"content-header\">\n      <div class=\"header-inner\">\n        <h2>Notifications</h2>\n        <p class=\"subheader\">Control when and how often Twitter sends emails to you. (You can change your mobile notifications on <a href=\"");t.b(t.v(t.f("devices_settings_path",c,p,0)));t.b("\">your mobile settings page</a>.)</p>\n      </div>\n    </div>\n    <div class=\"content-inner no-stream-end\" id=\"notifications-content\">\n      <form id=\"notifications-form\" class=\"form-horizontal\" method=\"POST\" action=\"");t.b(t.v(t.f("form_url",c,p,0)));t.b("\">\n");t.b(t.rp("settings/alert_partial1",c,p,"        "));t.b("        <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n        <fieldset class=\"control-group\">\n          <h3 class=\"settings-header\">Messages</h3>\n        </fieldset>\n        <fieldset class=\"control-group\">\n          <label class=\"control-label\">Email me when</label>\n          <div class=\"controls\">\n            <label class=\"checkbox\">\n              <input type=\"checkbox\" value=\"1\" id=\"send_new_direct_text_email\" name=\"user[send_new_direct_text_email]\" ");if(t.s(t.f("send_new_direct_text_email",c,p,1),c,p,0,1121,1128,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("> I'm sent a direct message\n            </label>\n            <input type=\"hidden\" value=\"0\" name=\"user[send_new_direct_text_email]\">\n");if(t.s(t.f("mention_emails_available",c,p,1),c,p,0,1333,1670,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <label class=\"checkbox\">\n              <input type=\"checkbox\" value=\"2\" id=\"send_mention_email\" name=\"user[send_mention_email]\" ");if(t.s(t.f("send_mention_email",c,p,1),c,p,0,1497,1504,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("> I'm sent a reply or @ mentioned\n            </label>\n            <input type=\"hidden\" value=\"0\" name=\"user[send_mention_email]\">\n");});c.pop();}t.b("          </div>\n        </fieldset>\n        <hr>\n\n        <fieldset class=\"control-group\">\n          <h3 class=\"settings-header\">Activity</h3>\n        </fieldset>\n        <fieldset class=\"control-group\">\n          <label class=\"control-label\">Email me when</label>\n          <div class=\"controls\">\n            <label class=\"checkbox\">\n              <input type=\"checkbox\" value=\"1\" id=\"send_new_friend_email\" name=\"user[send_new_friend_email]\" ");if(t.s(t.f("send_new_friend_email",c,p,1),c,p,0,2171,2178,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("> I'm followed by someone new\n            </label>\n            <input type=\"hidden\" value=\"0\" name=\"user[send_new_friend_email]\">\n");if(t.s(t.f("listed_emails_available",c,p,1),c,p,0,2374,2702,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <label class=\"checkbox\">\n                <input type=\"checkbox\" value=\"2\" id=\"send_listed_email\" name=\"user[send_listed_email]\" ");if(t.s(t.f("send_listed_email",c,p,1),c,p,0,2539,2546,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("> I'm added to a list\n              </label>\n              <input type=\"hidden\" value=\"0\" name=\"user[send_listed_email]\">\n");});c.pop();}if(t.s(t.f("favorite_emails_available",c,p,1),c,p,0,2773,3122,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <label class=\"checkbox\">\n              <input type=\"checkbox\" value=\"2\" id=\"send_favorited_email\" name=\"user[send_favorited_email]\" ");if(t.s(t.f("send_favorited_email",c,p,1),c,p,0,2943,2950,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("> My Tweets are marked as favorites\n            </label>\n            <input type=\"hidden\" value=\"0\" name=\"user[send_favorited_email]\">\n");});c.pop();}if(t.s(t.f("retweet_emails_available",c,p,1),c,p,0,3194,3533,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <label class=\"checkbox\">\n              <input type=\"checkbox\" value=\"2\" id=\"send_retweeted_email\" name=\"user[send_retweeted_email]\" ");if(t.s(t.f("send_retweeted_email",c,p,1),c,p,0,3364,3371,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("> My Tweets are retweeted\n            </label>\n            <input type=\"hidden\" value=\"0\" name=\"user[send_retweeted_email]\">\n");});c.pop();}t.b("          </div>\n        </fieldset>\n        <hr>\n\n        <fieldset class=\"control-group\">\n          <h3 class=\"settings-header\">Updates</h3>\n        </fieldset>\n        <fieldset class=\"control-group\">\n          <label class=\"control-label\">Email me with</label>\n          <div class=\"controls\">\n            <label class=\"checkbox\">\n              <input type=\"checkbox\" value=\"1\" id=\"send_email_newsletter\" name=\"user[send_email_newsletter]\" ");if(t.s(t.f("send_email_newsletter",c,p,1),c,p,0,4033,4040,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("> Updates about new Twitter products, features, and tips\n            </label>\n            <input type=\"hidden\" value=\"0\" name=\"user[send_email_newsletter]\">\n            <label class=\"checkbox\">\n              <input type=\"checkbox\" value=\"1\" id=\"send_account_updates_email\" name=\"user[send_account_updates_email]\" ");if(t.s(t.f("send_account_updates_email",c,p,1),c,p,0,4410,4417,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("> Product or service updates related to my Twitter account\n            </label>\n            <input type=\"hidden\" value=\"0\" name=\"user[send_account_updates_email]\">\n");if(t.s(t.f("network_digest_schedule_available",c,p,1),c,p,0,4662,5044,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <label class=\"checkbox\">\n              <input type=\"checkbox\" value=\"2\" id=\"network_digest_schedule\" name=\"user[network_digest_schedule]\" ");if(t.s(t.f("network_digest_schedule",c,p,1),c,p,0,4841,4848,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("> A weekly digest of Stories & Tweets from my network\n            </label>\n            <input type=\"hidden\" value=\"0\" name=\"user[network_digest_schedule]\">\n");});c.pop();}t.b("          </div>\n        </fieldset>\n        <hr>\n");t.b(t.rp("settings/save_button2",c,p,"        "));t.b("      </form>\n    </div>\n  </div>\n");});c.pop();}return t.fl(); }, partials: {"dashboard_settings0": {name:"dashboard_settings"},"settings/alert_partial1": {name:"settings/alert_partial"},"settings/save_button2": {name:"settings/save_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phone_create": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-header\">\n  <div class=\"header-inner\">\n    <h2>Add your mobile phone to your account</h2>\n    <p class=\"subheader\">Expand your experience, get closer, and stay current.</p>\n  </div>\n</div>\n<div class=\"content-inner no-stream-end\">\n");t.b(t.rp("settings/alert_partial0",c,p,"  "));t.b("\n" + i);t.b("  <form id=\"sms-phone-create-form\" class=\"form-horizontal sms-form\" method=\"post\" action=\"/settings/devices/create\">\n    <input type=\"hidden\" name=\"device_type\" value=\"phone\">\n    <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n    ");if(t.s(t.f("password_reset_highlight",c,p,1),c,p,0,579,640,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<input type=\"hidden\" name=\"highlight\" value=\"password-reset\">");});c.pop();}t.b("\n" + i);t.b("    <fieldset>\n      <h3 class=\"app-promo\"><a href=\"https://www.twitter.com/download\" target=\"_blank\">Download Twitter mobile app</a></h3>\n      <p>Available for iPhone, iPad, Android, BlackBerry, and Windows Phone 7.</p>\n    </fieldset>\n    <hr class=\"app-promo-spacing\">\n    <fieldset class=\"control-group\" id=\"choose-country\">\n      <h3 class=\"settings-header\">Activate Twitter text messaging</h3>\n      <p>It’s fast and easy. Get new features and help protect your account.</p>\n      <br>\n      <label class=\"control-label\">Country/region</label>\n      <div class=\"controls\">\n        <select id=\"device_country_code\" name=\"device[country_code]\">\n");if(t.s(t.f("regions_and_country_codes",c,p,1),c,p,0,1360,1938,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_region",c,p,1),c,p,0,1387,1713,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <optgroup label=\"");t.b(t.v(t.f("country_name",c,p,0)));t.b("\">\n");if(t.s(t.f("countries",c,p,1),c,p,0,1468,1660,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                  <option value=\"");t.b(t.v(t.f("country_code",c,p,0)));t.b("\" data-region=\"");t.b(t.v(t.f("region",c,p,0)));t.b("\" ");if(t.s(t.f("is_country_for_phone_device",c,p,1),c,p,0,1577,1585,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected");});c.pop();}t.b(">");t.b(t.v(t.f("country_name",c,p,0)));t.b("</option>\n");});c.pop();}t.b("              </optgroup>\n");});c.pop();}if(!t.s(t.f("is_region",c,p,1),c,p,1,0,0,"")){t.b("              <option value=\"");t.b(t.v(t.f("country_code",c,p,0)));t.b("\" ");if(t.s(t.f("is_country_for_phone_device",c,p,1),c,p,0,1834,1842,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected");});c.pop();}t.b(">");t.b(t.v(t.f("country_name",c,p,0)));t.b("</option>\n");};});c.pop();}t.b("        </select>\n        <input type=\"hidden\" name=\"device_country_intl_prefix\" id=\"device_country_intl_prefix\" value=\"+");if(t.s(t.f("device_country_code",c,p,1),c,p,0,2114,2137,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("device_country_code",c,p,0)));});c.pop();}if(!t.s(t.f("device_country_code",c,p,1),c,p,1,0,0,"")){t.b("1");};t.b("\">\n        <input type=\"hidden\" name=\"device[region_country_code]\" id=\"region_country_code\">\n      </div>\n    </fieldset>\n    <fieldset class=\"control-group\">\n      <label class=\"control-label\">Phone number</label>\n      <div class=\"controls\">\n        <div class=\"input-prepend\">\n          <label class=\"add-on\" id=\"country_code_display\">");if(t.s(t.f("device_country_code",c,p,1),c,p,0,2572,2596,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("+");t.b(t.v(t.f("device_country_code",c,p,0)));});c.pop();}if(!t.s(t.f("device_country_code",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("default_country_code",c,p,0)));};t.b("</label>\n          <input class=\"input-medium\" type=\"text\" value=\"");t.b(t.v(t.f("device_address",c,p,0)));t.b("\" name=\"device[address]\" id=\"device_address\">\n        </div>\n        <p class=\"carrier-help-note\" id=\"carrier-message-jawwal-ps\">Users with either a +972 or +970 dialing code are able to subscribe to Twitter on this carrier. Example: if your mobile number is +97259XXXYYYY, please enter 59XXXYYYY as your phone number above.</p>\n        <p class=\"carrier-help-note\" id=\"carrier-message-wataniya-ps\">Users with either a +972 or +970 dialing code are able to subscribe to Twitter on this carrier. Example: if your mobile number is +97256XXXYYYY, please enter 56XXXYYYY as your phone number above.</p>\n      </div>\n    </fieldset>\n    <fieldset class=\"control-group\" id=\"choose-carrier\">\n      <label class=\"control-label\">Carrier</label>\n      <div class=\"controls\">\n        <input type=\"hidden\" name=\"carrier_name\" id=\"device_carrier_name\">\n        <select id=\"device_carrier\" name=\"device[carrier]\"></select>\n        <p class=\"carrier-help-note\" id=\"carrier-message-no-mt\">Note: This carrier only allows you to send messages to Twitter. Twitter will not be able to send you text message notifications.</p>\n      </div>\n    </fieldset>\n    <hr>\n    <div class=\"form-actions\">\n      <button id=\"start\" class=\"btn primary-btn\" type=\"submit\">Activate phone</button>\n    </div>\n  </form>\n</div>");return t.fl(); }, partials: {"settings/alert_partial0": {name:"settings/alert_partial"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phone_deactivated": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-header\">\n  <div class=\"header-inner\">\n    <h2>Add your mobile phone to your account</h2>\n    <p class=\"subheader\">Expand your experience, get closer, and stay current.</p>\n  </div>\n</div>\n<div class=\"stream-placeholder content-placeholder\">\n");t.b(t.rp("settings/alert_partial0",c,p,"  "));t.b("\n" + i);if(t.s(t.f("phone_device",c,p,1),c,p,0,312,1432,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"stream-end-inner\">\n    <h2 class=\"title\">Update your mobile settings</h2>\n    <p>\n      We're unable to connect to your mobile phone at <strong>+");t.b(t.v(t.f("device_country_code",c,p,0)));t.b(" ");t.b(t.v(t.f("device_address",c,p,0)));t.b("</strong>.\n      Please reactivate or delete your current phone.\n    </p>\n    <p class=\"placeholder-actions\">\n      <form id=\"sms-phone-deactivated-form\" method=\"post\" action=\"/settings/devices/destroy/");t.b(t.v(t.f("device_id",c,p,0)));t.b("\">\n        <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n        <input type=\"hidden\" name=\"_method\" value=\"delete\">\n        <input type=\"hidden\" name=\"reactivation\" value=\"1\">\n        <button type=\"submit\" class=\"btn primary-btn\" id=\"reactivate_device\">Reactivate phone</button>\n      </form>\n      <form id=\"sms-phone-deactivated-form\" method=\"post\" action=\"/settings/devices/destroy/");t.b(t.v(t.f("device_id",c,p,0)));t.b("\">\n        <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n        <input type=\"hidden\" name=\"_method\" value=\"delete\">\n        <button type=\"submit\" class=\"btn\" id=\"delete_device\">Delete</button>\n      </form>\n    </p>\n  </div>\n");});c.pop();}t.b("</div>");return t.fl(); }, partials: {"settings/alert_partial0": {name:"settings/alert_partial"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phone_duplicate": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-no-header\">\n  <div class=\"no-header-inner\">\n    <div class=\"content-placeholder\">\n      <h3 class=\"title\">\n        Sorry, we can't activate your phone.\n        Text <strong>");t.b(t.v(t.f("stop_command",c,p,0)));t.b("</strong> to <strong>");t.b(t.v(t.f("device_short_code",c,p,0)));t.b("</strong> to retry.\n      </h3>\n      <p>The phone number you gave us, +");t.b(t.v(t.f("device_country_code",c,p,0)));t.b(" ");t.b(t.v(t.f("device_address",c,p,0)));t.b(", is currently used by another Twitter account. Only one account can be used with a mobile phone at a time.</p>\n\n      <form id=\"sms-phone-duplicate-form\" class=\"form-inline sms-form\" method=\"post\" action=\"");t.b(t.v(t.f("retry_url",c,p,0)));t.b("\">\n        <input type=\"hidden\" name=\"device_type\" value=\"phone\" />\n        <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n        <input id=\"device_country_intl_prefix\" name=\"device_country_intl_prefix\" type=\"hidden\" value=\"+");t.b(t.v(t.f("device_country_code",c,p,0)));t.b("\">\n        <button id=\"retry_verification\" class=\"btn primary-btn\" type=\"submit\">Retry activation</button>\n      </form>\n      <form id=\"sms-phone-duplicate-destroy-form\" class=\"form-inline sms-form\" method=\"post\" action=\"");t.b(t.v(t.f("cancel_url",c,p,0)));t.b("\">\n        <input type=\"hidden\" value=\"DELETE\" name=\"_method\">\n        <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n        <button type=\"submit\" class=\"btn\" id=\"cancel_verification\">Cancel</button>\n      </form>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phone_unsupported": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-header\">\n  <div class=\"header-inner\">\n    <h2>Add your mobile phone to your account</h2>\n    <p class=\"subheader\">Expand your experience, get closer, and stay current.</p>\n  </div>\n</div>\n<div class=\"content-inner no-stream-end\" id=\"sms-unsupported-carrier\">\n");t.b(t.rp("settings/alert_partial0",c,p,"  "));t.b("\n" + i);t.b("  <form id=\"sms-phone-unsupported-form\" class=\"form-horizontal sms-form\" method=\"post\" action=\"/settings/devices/destroy/");t.b(t.v(t.f("device_id",c,p,0)));t.b("\">\n    <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n    <input type=\"hidden\" name=\"_method\" value=\"delete\">\n\n    <div class=\"content-placeholder\">\n      <div class=\"stream-end-inner\">\n");if(t.s(t.f("device_carrier_disabled",c,p,1),c,p,0,704,1270,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <h3 class=\"title\">Sorry, we don't have a connection to your carrier yet!</h3>\n          <p>\n            Don't worry, we're on it and will let you know once things are set up. In the meantime, use one of our long codes.\n            <a href=\"https://support.twitter.com/articles/14226-how-to-find-your-twitter-short-code-or-long-code\" target=\"_blank\" id=\"sms_info\">Learn more</a>.\n          </p>\n          <p class=\"placeholder-actions\">\n            <button type=\"submit\" class=\"btn primary-btn\" id=\"delete_device\">Try again</button>\n          </p>\n");});c.pop();}if(!t.s(t.f("device_carrier_disabled",c,p,1),c,p,1,0,0,"")){t.b("          <h3 class=\"title\">Thanks for waiting! We now have a connection to your carrier!</h3>\n          <p>\n            Activate your phone to use Twitter on the go.\n          </p>\n          <p class=\"placeholder-actions\">\n            <button type=\"submit\" class=\"btn primary-btn\" id=\"delete_device\">Activate phone</button>\n          </p>\n");};t.b("      </div>\n    </div>\n  </form>\n</div>");return t.fl(); }, partials: {"settings/alert_partial0": {name:"settings/alert_partial"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phone_verified": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-header\">\n  <div class=\"header-inner\">\n    <h2>Mobile</h2>\n    <p class=\"subheader\">Customize Twitter for your mobile phone.</p>\n  </div>\n</div>\n<div class=\"content-inner no-stream-end\">\n");t.b(t.rp("settings/alert_partial0",c,p,"  "));t.b("\n" + i);t.b("  <form id=\"sms-phone-verified-form\" class=\"form-horizontal sms-form form-flush-actions\" method=\"post\" action=\"/settings/devices/enable/");t.b(t.v(t.f("device_id",c,p,0)));t.b("\">\n    <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n\n    <fieldset class=\"app-promo-group\">\n      <label class=\"control-label\">Mobile apps</label>\n      <div class=\"controls\">\n        <div class=\"app-promo-link\">\n          <a href=\"https://www.twitter.com/download\" target=\"_blank\">Download Twitter mobile app</a>\n        </div>\n        <p>Available for iPhone, iPad, Android, BlackBerry, and Windows Phone 7.</p>\n      </div>\n    </fieldset>\n\n    <hr>\n\n    <fieldset class=\"control-group\">\n      <label class=\"control-label\">My phone</label>\n      <div class=\"controls\">\n        <p id=\"device-country-carrier\">\n          +");t.b(t.v(t.f("device_country_code",c,p,0)));t.b(" ");t.b(t.v(t.f("device_address",c,p,0)));t.b(" (");t.b(t.v(t.f("device_country_name",c,p,0)));t.b(")\n        </p>\n        <label class=\"checkbox\">\n          <input type=\"checkbox\" id=\"user_mobile_discoverable\" name=\"user[discoverable_by_mobile_phone]\" value=\"1\" ");if(t.s(t.f("discoverable_by_mobile_phone",c,p,1),c,p,0,1312,1319,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("> Let others find me by my phone number.\n          <input type=\"hidden\" id=\"user_mobile_discoverable_set\" name=\"user[discoverable_by_mobile_phone]\" value=\"0\">\n        </label>\n      </div>\n    </fieldset>\n\n");if(t.s(t.f("device_can_have_pin",c,p,1),c,p,0,1586,2063,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <fieldset class=\"control-group\">\n      <label class=\"control-label\">PIN</label>\n      <div class=\"controls\">\n        <input type=\"input\" id=\"device_pin\" name=\"device[pin]\" maxlength=\"4\" value=\"");if(t.s(t.f("device_pin",c,p,1),c,p,0,1799,1813,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("device_pin",c,p,0)));});c.pop();}t.b("\">\n        <p>\n          Help protect against someone spoofing your account.\n          <a href=\"https://support.twitter.com/articles/20169928\" target=\"_blank\" id=\"sms_info\">Learn more</a>.\n        </p>\n      </div>\n    </fieldset>\n");});c.pop();}t.b("\n" + i);t.b("    \n");if(t.s(t.f("device_notifications_enabled",c,p,1),c,p,0,2131,3561,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("device_delivers",c,p,1),c,p,0,2158,2256,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("settings/devices/notifications1",c,p,"        "));t.b(t.rp("settings/devices/sleep_settings2",c,p,"        "));});c.pop();}t.b("\n" + i);if(t.s(t.f("device_address_for_sms_is_international_longcode",c,p,1),c,p,0,2337,3053,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <label class=\"control-label\">How to Tweet</label>\n        <div class=\"controls\">\n          <p>\n            To Tweet via text message, send a message to one of our \n            <a href=\"https://support.twitter.com/articles/14226-how-to-find-your-twitter-short-code-or-long-code\" target=\"_blank\" id=\"sms_info\">long codes</a>.\n            If you'd like to view Tweets, try using <a href=\"http://m.twitter.com\">m.twitter.com</a> on your phone.\n          </p>\n          <p>\n            Note: Your carrier may charge you an international text messaging tariff to send a Tweet.\n            Twitter doesn’t charge for this service, but standard message and data rates may apply.\n          </p>\n        </div>\n");});c.pop();}if(!t.s(t.f("device_address_for_sms_is_international_longcode",c,p,1),c,p,1,0,0,"")){t.b("        <p class=\"education-promo\">\n          Want to know about all the things you can do with Twitter text messaging?\n          <a href=\"https://support.twitter.com/groups/34-apps-sms-and-mobile/topics/153-twitter-via-sms/articles/14020-twitter-for-sms-basic-features\" target=\"_blank\" id=\"sms_info\">Learn more</a>.\n        </p>\n");};});c.pop();}if(!t.s(t.f("device_notifications_enabled",c,p,1),c,p,1,0,0,"")){t.b("      <p>Note: This carrier only allows you to send messages to Twitter. Twitter will not be able to send you text message notifications. Try using <a href=\"http://m.twitter.com\">m.twitter.com</a> on your phone to view your Tweets.</p>\n");};t.b("\n" + i);t.b("    <hr>\n\n");t.b(t.rp("settings/save_button3",c,p,"    "));t.b("\n" + i);t.b("  </form>\n\n  <form id=\"sms-phone-delete-form\" class=\"form-horizontal sms-form\" method=\"post\" action=\"/settings/devices/destroy/");t.b(t.v(t.f("device_id",c,p,0)));t.b("\">\n    <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n    <input type=\"hidden\" name=\"_method\" value=\"delete\">\n    <div class=\"form-actions\" id=\"delete_device_link\">\n      <button type=\"submit\" class=\"btn-link\" id=\"delete_device\">Delete my phone</button>\n    </div>\n  </form>\n</div>\n");return t.fl(); }, partials: {"settings/alert_partial0": {name:"settings/alert_partial"},"settings/devices/notifications1": {name:"settings/devices/notifications"},"settings/devices/sleep_settings2": {name:"settings/devices/sleep_settings"},"settings/save_button3": {name:"settings/save_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phone_verify": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form id=\"sms-phone-verify-form\" class=\"form-horizontal sms-form form-flush-actions\" method=\"post\" action=\"/settings/devices/destroy/");t.b(t.v(t.f("device_id",c,p,0)));t.b("\">\n  <input type=\"hidden\" name=\"device_type\" value=\"phone\">\n  <input type=\"hidden\" name=\"device_id\" value=\"");t.b(t.v(t.f("device_id",c,p,0)));t.b("\">\n  <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n\n  <div class=\"content-no-header\">\n    <div class=\"no-header-inner\">\n      <div class=\"content-placeholder\">\n        <h3 class=\"title\">\n          Text <strong>");t.b(t.v(t.f("device_go_command",c,p,0)));t.b("</strong> to <strong>");t.b(t.v(t.f("device_short_code",c,p,0)));t.b("</strong>.\n        </h3>\n\n        <div id=\"settings-alert-box\" class=\"alert content-placeholder-alert\">\n          <p>\n            <span class=\"spinner-small\"></span>\n            Waiting for your activation text from +");t.b(t.v(t.f("device_country_code",c,p,0)));t.b(t.v(t.f("device_address",c,p,0)));t.b("...\n          </p>\n        </div>\n\n        <p>\n          If you have texted ");t.b(t.v(t.f("device_go_command",c,p,0)));t.b(" to ");t.b(t.v(t.f("device_short_code",c,p,0)));t.b(" and this page hasn't updated, try <a href=\"\" id=\"reload\">refreshing</a> this page or texting again.\n          Twitter doesn’t charge for this service, but standard message and data rates may apply.\n        </p>\n        <p class=\"placeholder-actions\">\n          <button id=\"cancel_verification\" class=\"btn\" type=\"submit\">Cancel activation</button>\n        </p>\n      </div>\n    </div>\n  </div>\n</form>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"sleep_settings": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<fieldset class=\"control-group sleep-settings\">\n  <label class=\"control-label\">Sleep settings</label>\n  <div class=\"controls\">\n    <label class=\"checkbox sleep-settings-toggle\">\n      <input type=\"checkbox\" class=\"toggler user_scheduled_sleeping\" name=\"user[scheduled_sleeping]\" id=\"user_scheduled_sleeping\" value=\"1\" ");if(t.s(t.f("user_scheduled_sleeping",c,p,1),c,p,0,346,353,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("> Turn off updates during these hours\n    </label>\n    <select class=\"toggleable\" ");if(!t.s(t.f("user_scheduled_sleeping",c,p,1),c,p,1,0,0,"")){t.b("disabled");};t.b(" name=\"user[scheduled_sleep_start_hour]\" id=\"user_scheduled_sleep_start_hour\">\n");if(t.s(t.f("hours",c,p,1),c,p,0,622,762,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <option value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\" ");if(t.s(t.f("user_scheduled_sleep_start_hour",c,p,1),c,p,0,693,701,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected");});c.pop();}t.b(">");t.b(t.v(t.f("hour",c,p,0)));t.b("</option>\n");});c.pop();}t.b("    </select>\n    to\n    <select class=\"toggleable\" ");if(!t.s(t.f("user_scheduled_sleeping",c,p,1),c,p,1,0,0,"")){t.b("disabled");};t.b(" name=\"user[scheduled_sleep_end_hour]\" id=\"user_scheduled_sleep_end_hour\">\n");if(t.s(t.f("hours",c,p,1),c,p,0,980,1116,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <option value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\" ");if(t.s(t.f("user_scheduled_sleep_end_hour",c,p,1),c,p,0,1049,1057,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected");});c.pop();}t.b(">");t.b(t.v(t.f("hour",c,p,0)));t.b("</option>\n");});c.pop();}t.b("    </select>\n  </div>\n</fieldset>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"devices_main": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("dashboard_settings0",c,p,""));t.b("\n" + i);if(t.s(t.f("user",c,p,1),c,p,0,34,1429,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"content-main\">\n");if(t.s(t.f("phone_device_deactivated",c,p,1),c,p,0,93,141,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("settings/devices/phone_deactivated1",c,p,"    "));});c.pop();}if(!t.s(t.f("phone_device_deactivated",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("phone_device",c,p,1),c,p,0,224,801,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("device_dupe",c,p,1),c,p,0,247,301,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("settings/devices/phone_duplicate2",c,p,"        "));});c.pop();}if(!t.s(t.f("device_dupe",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("device_verified",c,p,1),c,p,0,369,426,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("settings/devices/phone_verified3",c,p,"          "));});c.pop();}if(!t.s(t.f("device_verified",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("device_carrier_unsupported",c,p,1),c,p,0,517,581,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("settings/devices/phone_unsupported4",c,p,"            "));});c.pop();}if(!t.s(t.f("device_carrier_unsupported",c,p,1),c,p,1,0,0,"")){t.b(t.rp("settings/devices/phone_verify5",c,p,"            "));};};};});c.pop();}t.b("\n" + i);if(!t.s(t.f("phone_device",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("phone_device_available",c,p,1),c,p,0,875,926,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("settings/devices/phone_create6",c,p,"        "));});c.pop();}};t.b("\n" + i);if(!t.s(t.f("phone_device_verification_in_progress",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("email_device",c,p,1),c,p,0,1047,1158,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("phone_device",c,p,1),c,p,0,1073,1097,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <hr>\n");});c.pop();}t.b(t.rp("settings/devices/email7",c,p,"        "));});c.pop();}t.b("\n" + i);if(!t.s(t.f("email_device",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("email_device_available",c,p,1),c,p,0,1236,1291,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("settings/devices/email_create8",c,p,"          "));});c.pop();}};};};t.b("</div>\n");});c.pop();}return t.fl(); }, partials: {"dashboard_settings0": {name:"dashboard_settings"},"settings/devices/phone_deactivated1": {name:"settings/devices/phone_deactivated"},"settings/devices/phone_duplicate2": {name:"settings/devices/phone_duplicate"},"settings/devices/phone_verified3": {name:"settings/devices/phone_verified"},"settings/devices/phone_unsupported4": {name:"settings/devices/phone_unsupported"},"settings/devices/phone_verify5": {name:"settings/devices/phone_verify"},"settings/devices/phone_create6": {name:"settings/devices/phone_create"},"settings/devices/email7": {name:"settings/devices/email"},"settings/devices/email_create8": {name:"settings/devices/email_create"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"enhanced_profile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("dashboard_settings0",c,p,""));t.b("\n" + i);if(t.s(t.f("current_user",c,p,1),c,p,0,42,2445,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"content-main\">\n    <div class=\"content-header\">\n      <div class=\"header-inner\">\n        <h2>Enhanced Profile</h2>\n      </div>\n    </div>\n    <div class=\"content-inner no-stream-end\">\n      <form action=\"");t.b(t.v(t.f("upload_banner_preview_path",c,p,0)));t.b("\" class=\"twitter-form ");t.b(t.v(t.f("form_class",c,p,0)));t.b("\" target=\"banner_upload_frame\" enctype=\"multipart/form-data\" method=\"POST\" id=\"profile_banner\">\n");t.b(t.rp("settings/alert_partial1",c,p,"        "));t.b("        <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n        <h3 class=\"settings-header\">Banner Image</h3>\n        <fieldset id=\"profile-banner-controls\" class=\"control-group\">\n          <div class=\"controls\">\n            <div class=\"clearfix\">\n              <div class=\"banner-preview-box  ");t.b(t.v(t.f("proxy_uploader_class",c,p,0)));t.b("\">\n                <div class=\"banner-shadow\"></div>\n                <div class=\"banner-preview-image\">\n                  ");t.b(t.t(t.f("sample_banner",c,p,0)));t.b("\n" + i);t.b("                </div>\n                <div class=\"preview-loading-overlay\">\n                  <img id=\"preview_spinner\" src=\"");t.b(t.v(t.f("bigger_spinner_path",c,p,0)));t.b("\" />\n                </div>\n              </div>\n\n              <div class=\"avatar-upload banner-upload-input\">\n                <input id=\"brand_banner_uploaded_data\" name=\"brand_banner[image_data]\" size=\"15\" type=\"file\">\n                <p class=\"help-block\">Upload a JPG or PNG that is 835 pixels wide by 90 pixels tall.</p>\n\n                <input class=\"btn primary-btn publish-banner-btn action-btn ");t.b(t.v(t.f("preview_class",c,p,0)));t.b("\" name=\"commit\" type=\"submit\" value=\"Publish Banner\"/>\n                <input class=\"btn btn-gray delete-preview-btn action-btn ");t.b(t.v(t.f("preview_class",c,p,0)));t.b("\" name=\"commit\" type=\"submit\" value=\"Remove Preview\"/>\n                <input class=\"btn btn-gray delete-banner-btn action-btn ");t.b(t.v(t.f("live_class",c,p,0)));t.b("\" name=\"commit\" type=\"submit\" value=\"Remove Banner\"/>\n                <img alt=\"Spinner\" class=\"action-spinner\" src=\"");t.b(t.v(t.f("spinner_path",c,p,0)));t.b("\" />\n              </div>\n            </div>\n            <iframe id=\"banner_upload_frame\" name=\"banner_upload_frame\" style=\"width:1px;height:1px;border:0px;visibility:hidden\"></iframe>\n          </div>\n        </fieldset>\n      </form>\n\n");if(t.s(t.f("show_promoted_tweets_section",c,p,1),c,p,0,2222,2391,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <hr>\n        <h3 class=\"settings-header\">");t.b(t.v(t.f("promoted_tweets_label",c,p,0)));t.b("</h3>\n        <a href=\"");t.b(t.v(t.f("promoted_tweets_link_href",c,p,0)));t.b("\">");t.b(t.v(t.f("promoted_tweets_link_text",c,p,0)));t.b("</a>\n");});c.pop();}t.b("    </div>\n  </div>\n");});c.pop();}return t.fl(); }, partials: {"dashboard_settings0": {name:"dashboard_settings"},"settings/alert_partial1": {name:"settings/alert_partial"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"password": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"password-match-pair\">\n  <fieldset class=\"control-group\">\n    <label for=\"user_password\" class=\"control-label\">New password</label>\n    <div id=\"password_strength\" class=\"controls\">\n      <input id=\"user_password\" type=\"password\" name=\"user_password\">\n      <small id=\"password_strength_feedback\" class=\"help-inline help-error\" style=\"display: none;\"></small>\n    </div>\n  </fieldset>\n  <fieldset class=\"control-group\">\n    <label for=\"user_password_confirmation\" class=\"control-label\">Verify password</label>\n    <div class=\"controls\">\n      <input id=\"user_password_confirmation\" type=\"password\" name=\"user_password_confirmation\">\n      <small id=\"password_match\" class=\"help-inline help-error\" style=\"display: none;\">Passwords don't match</small>\n    </div>\n  </fieldset>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"password_confirmation": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-narrow\">\n  <div class=\"error-page error-403 clearfix\">\n    <h1 class=\"heading\">Woo hoo! Your password has been changed!</h1>\n");if(t.s(t.f("show_app_review",c,p,1),c,p,0,169,683,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <p class=\"lead\">\n");if(t.s(t.f("multiple_apps",c,p,1),c,p,0,215,361,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        As a reminder, you have <strong>");t.b(t.v(t.f("number_of_apps",c,p,0)));t.b("</strong> applications that can access your account. Do you want to review them?\n");});c.pop();}if(!t.s(t.f("multiple_apps",c,p,1),c,p,1,0,0,"")){t.b("        As a reminder, you have an application that can access your account. Do you want to review it?\n");};t.b("    </p>\n    <a class=\"primary-btn btn\" href=\"");t.b(t.v(t.f("connections_path",c,p,0)));t.b("\">Review applications</a>\n    <a class=\"btn\" href=\"");t.b(t.v(t.f("home_path",c,p,0)));t.b("\">No thanks</a>\n");});c.pop();}if(!t.s(t.f("show_app_review",c,p,1),c,p,1,0,0,"")){t.b("      <p><a href=\"");t.b(t.v(t.f("home_path",c,p,0)));t.b("\">&larr; Go to the homepage</a></p>\n");};t.b("  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("dashboard_settings0",c,p,""));t.b("\n" + i);if(t.s(t.f("user",c,p,1),c,p,0,34,1861,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"content-main\">\n          <div class=\"content-header\">\n            <div class=\"header-inner\">\n              <h2>Profile</h2>\n              <p class=\"subheader\">This information appears on your public profile, search results, and beyond.</p>\n            </div>\n          </div>\n          <div class=\"content-inner no-stream-end\">\n            <form id=\"profile-form\" class=\"form-horizontal\"  enctype=\"multipart/form-data\" method=\"POST\" action=\"");t.b(t.v(t.f("form_url",c,p,0)));t.b("\">\n");t.b(t.rp("settings/alert_partial1",c,p,"              "));if(t.s(t.f("user_verified?",c,p,1),c,p,0,587,947,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("alerts",c,p,1),c,p,1,0,0,"")){t.b("                  <div class=\"alert\">\n                    <p>The personal data in your account has been verified. Changing your web address will invalidate your verified status. We will review your change and re-issue your verified status as soon as possible.</p>\n                  </div>\n");};});c.pop();}t.b("              <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n              <input type=\"hidden\" value=\"PUT\" name=\"_method\">\n");if(t.s(t.f("image_upload_available",c,p,1),c,p,0,1169,1227,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("settings/profile_image2",c,p,"              "));});c.pop();}t.b("              <hr>\n");t.b(t.rp("settings/profile_user3",c,p,"              "));t.b("              <hr>\n");t.b(t.rp("settings/save_button4",c,p,"              "));t.b("            </form>\n\n");t.b(t.rp("dialogs/in_product_help_dialog5",c,p,"            "));t.b("\n" + i);if(t.s(t.f("show_delete_image_link",c,p,1),c,p,0,1486,1801,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <form id=\"profile_image_delete_form\" class=\"form-horizontal\" method=\"POST\" action=\"");t.b(t.v(t.f("form_url",c,p,0)));t.b("\">\n                <input type=\"hidden\" value=\"Delete\" name=\"_method\">\n                <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n              </form>\n");});c.pop();}t.b("          </div>\n        </div>\n");});c.pop();}return t.fl(); }, partials: {"dashboard_settings0": {name:"dashboard_settings"},"settings/alert_partial1": {name:"settings/alert_partial"},"settings/profile_image2": {name:"settings/profile_image"},"settings/profile_user3": {name:"settings/profile_user"},"settings/save_button4": {name:"settings/save_button"},"dialogs/in_product_help_dialog5": {name:"dialogs/in_product_help_dialog"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_image": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<fieldset id=\"profile-image-controls\" class=\"control-group\">\n  <label class=\"control-label\" for=\"profile_image_uploaded_data\">Picture</label>\n  <div class=\"controls\">\n    <div class=\"uploader-avatar clearfix\">\n      <img class=\"avatar size73\" id=\"avatar_preview\" src=\"");t.b(t.v(t.f("avatar",c,p,0)));t.b("\">\n      <div class=\"uploader-tools\">\n");t.b(t.rp("swift_photo_selector0",c,p,"        "));t.b("        <p>\n          Maximum size of 700k. JPG, GIF, PNG.<br>\n          Need help uploading a profile image? <a ");t.b(t.t(t.f("profile_learn_more_attrs",c,p,0)));t.b(" id=\"profile_image_help\">Learn more</a>.<br>\n");if(t.s(t.f("show_delete_image_link",c,p,1),c,p,0,575,680,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <a href=\"#\" id=\"delete-image\" class=\"delete-image btn-link\">Delete this image</a>\n");});c.pop();}t.b("        </p>\n      </div>\n    </div>\n  </div>\n</fieldset>");return t.fl(); }, partials: {"swift_photo_selector0": {name:"swift_photo_selector"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"profile_user": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<fieldset class=\"control-group\">\n  <label class=\"control-label\" for=\"user_name\">Name</label>\n  <div class=\"controls\">\n    <input id=\"user_name\" maxlength=\"20\" type=\"text\" name=\"user[name]\" value=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n    <p>Enter your real name, so people you know can recognize you.</p>\n  </div>\n</fieldset>\n<fieldset class=\"control-group\">\n  <label class=\"control-label\" for=\"user_location\">Location</label>\n  <div class=\"controls\">\n    <input id=\"user_location\" name=\"user[location]\" type=\"text\" value=\"");t.b(t.v(t.f("location",c,p,0)));t.b("\">\n    <p>Where in the world are you?</p>\n  </div>\n</fieldset>\n<fieldset id=\"user_web_fieldset\" class=\"control-group\">\n  <label class=\"control-label\" for=\"user_url\">Website</label>\n  <div class=\"controls\">\n    <input id=\"user_url\" name=\"user[url]\" rel=\"");t.b(t.v(t.f("url_display",c,p,0)));t.b("\" size=\"30\" type=\"text\" value=\"");t.b(t.v(t.f("url_display",c,p,0)));t.b("\">\n    <p>Have a homepage or a blog? Put the address here.</p>\n    <p> <a href=\"/goodies\" title=\"Put Twitter on your site!\" id=\"tfw_link\">You can also add Twitter to your site here.</a></p>\n  </div>\n  <div class=\"controls\">\n");if(t.s(t.f("user_verified?",c,p,1),c,p,0,1069,1308,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"alert warning\" style=\"display: none;\">\n        <p>WARNING: Changing this field will cause you to lose your badge until you are re-verified.</p>\n        <p><a href=\"#\" id=\"undo\">Undo your changes</a></p>\n      </div>\n");});c.pop();}t.b("  </div>\n</fieldset>\n<fieldset class=\"control-group\">\n  <label class=\"control-label\" for=\"user_description\">Bio</label>\n  <div class=\"controls\">\n    <textarea class=\"input-xlarge\" id=\"user_description\" maxlength=\"160\" name=\"user[description]\">");t.b(t.v(t.f("description",c,p,0)));t.b("</textarea>\n    <p>");t.b(t.t(t.f("bio_description",c,p,0)));t.b("</p>\n  </div>\n</fieldset>\n\n<hr>\n\n");if(t.s(t.f("facebook_available",c,p,1),c,p,0,1682,2150,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div id=\"fb-button\" class=\"fb-button-or-iframe\">\n  <label class=\"control-label\" for=\"\">Facebook</label>\n  <div class=\"controls\">\n    <iframe id=\"fb-iframe\" scrolling=\"no\" frameborder=\"0\" style=\"display: none;\"></iframe>\n    <p><a href=\"#\" id=\"fb-anchor\" class=\"btn\" style=\"display: none;\"><span>Post your Tweets to Facebook</span></a></p>\n    <p>Having trouble? <a href=\"https://support.twitter.com/articles/31113\" target=\"_blank\">Learn more</a>.</p>\n  </div>\n</div>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"save_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"form-actions\">\n  <button id=\"settings_save\" class=\"btn primary-btn\" type=\"submit\">Save changes</button>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"captcha": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<script>\n  var RecaptchaOptions = {\n    theme: 'white',\n    lang: '");t.b(t.v(t.f("lang",c,p,0)));t.b("'\n  };\n</script>\n<script type=\"text/javascript\" src=\"https://www.google.com/recaptcha/api/challenge?k=6LfbTAAAAAAAAE0hk8Vnfd1THHnn9lJuow6fgulO&lang=");t.b(t.v(t.f("lang",c,p,0)));t.b("\"></script>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"country_select_options": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("takedown_country_options",c,p,1),c,p,0,29,110,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <option value=\"");t.b(t.v(t.f("code",c,p,0)));t.b("\" ");if(t.s(t.f("selected",c,p,1),c,p,0,70,78,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected");});c.pop();}t.b(">");t.b(t.v(t.f("name",c,p,0)));t.b("</option>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"lang_select_options": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<option>Select Language...</option>\n");if(t.s(t.f("available_language_options",c,p,1),c,p,0,67,166,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <option value=\"");t.b(t.v(t.f("code",c,p,0)));t.b("\" ");if(t.s(t.f("selected_lang",c,p,1),c,p,0,113,121,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected");});c.pop();}t.b(">");t.b(t.v(t.f("display_name",c,p,0)));t.b("</option>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"signin_form": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form action=\"");t.b(t.v(t.f("sessions_path",c,p,0)));t.b("\" class=\"signin\" method=\"post\">\n");t.b(t.rp("signin_form_textbox0",c,p,"  "));t.b(t.rp("signin_form_subchck1",c,p,"  "));t.b("  <div class=\"divider\"></div>\n  <p>\n    <a class=\"forgot\" href=\"");t.b(t.v(t.f("resend_password_path",c,p,0)));t.b("\">Forgot password?</a><br />\n    <a class=\"mobile has-sms\" href=\"");t.b(t.v(t.f("mobile_complete_path",c,p,0)));t.b("\">Already using Twitter via text message?</a>\n  </p>\n</form>\n");return t.fl(); }, partials: {"signin_form_textbox0": {name:"signin_form_textbox"},"signin_form_subchck1": {name:"signin_form_subchck"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"signin_form_subchck": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"clearfix\">\n\n  <input type=\"hidden\" name=\"scribe_log\">\n  <input type=\"hidden\" name=\"redirect_after_login\" value=\"");t.b(t.v(t.f("redirect_after_login",c,p,0)));t.b("\">\n  <input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\"/>\n  <button type=\"submit\" class=\"submit btn primary-btn\">Sign in</button>\n\n  <fieldset class=\"subchck\">\n    <label class=\"remember\">\n      <input type=\"checkbox\" value=\"1\" name=\"remember_me\" ");if(t.s(t.f("remember_checked",c,p,1),c,p,0,448,465,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=\"checked\"");});c.pop();}t.b(">\n      Remember me\n    </label>\n  </fieldset>\n\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"signin_form_textbox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<fieldset>\n\n  <div class=\"clearfix holding");if(t.s(t.f("username_or_email",c,p,1),c,p,0,64,71,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" hasome");});c.pop();}t.b("\">\n    <span class=\"username js-username holder\">Username or email</span>\n    <input class=\"js-username-field email-input\" type=\"text\" name=\"session[username_or_email]\" autocomplete=\"on\" value=\"");t.b(t.v(t.f("username_or_email",c,p,0)));t.b("\">\n    <p class=\"help-text-inline\">Forgot your <a href=\"");t.b(t.v(t.f("resend_password_path",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("password_reset_title",c,p,0)));t.b("\" tabindex=\"-1\">username</a>?</p>\n  </div>\n\n  <div class=\"clearfix holding\">\n    <span class=\"password holder\">Password</span>\n    <input class=\"js-password-field\" type=\"password\" name=\"session[password]\">\n    <p class=\"help-text-inline\">Forgot your <a href=\"");t.b(t.v(t.f("resend_password_path",c,p,0)));t.b("\" tabindex=\"-1\">password</a>?</p>\n  </div>\n\n  <input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\"/>\n\n</fieldset>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"signin_or_signup": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"signin-or-signup\">\n\n");if(t.s(t.f("is_signup_only",c,p,1),c,p,0,50,129,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"signup-call-out\">\n");t.b(t.rp("partial_signup_form0",c,p,"      "));t.b("    </div>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("is_signup_only",c,p,1),c,p,1,0,0,"")){t.b(t.rp("signin_form1",c,p,"    "));t.b("    <div class=\"signup\">\n      <h2>Not on Twitter? Sign up, tune into the things you care about, and get updates as they happen.</h2>\n");t.b(t.rp("signup_button2",c,p,"      "));t.b("    </div>\n");};t.b("\n" + i);t.b("</div>");return t.fl(); }, partials: {"partial_signup_form0": {name:"partial_signup_form"},"signin_form1": {name:"signin_form"},"signup_button2": {name:"signup_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"signup": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<link href=\"");t.b(t.v(t.f("signup_css_bundle",c,p,0)));t.b("\" rel=\"stylesheet\">\n<div class=\"page-canvas\">\n  <div class=\"signup-wrapper\">\n\n");if(t.s(t.f("event",c,p,1),c,p,0,125,526,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <h1>Join Twitter today.</h1>\n      <p>Complete signup now to follow top accounts for <strong>");t.b(t.v(t.f("event_hashtag",c,p,0)));t.b("</strong>.</p>\n      <div class=\"ambassador event-signup clearfix\">\n        ");if(t.s(t.f("top_people",c,p,1),c,p,0,333,492,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<img src=\"");if(t.s(t.f("is_ssl",c,p,1),c,p,0,354,381,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_image_url_https",c,p,0)));});c.pop();}if(!t.s(t.f("is_ssl",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("profile_image_url",c,p,0)));};t.b("\" class=\"avatar size48\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n");});c.pop();}t.b("      </div>\n\n");});c.pop();}if(!t.s(t.f("event",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("ambassadors_exist",c,p,1),c,p,0,580,1392,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("follow_many",c,p,1),c,p,0,605,663,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <h1>It's your turn. Join Twitter.</h1>\n");});c.pop();}if(!t.s(t.f("follow_many",c,p,1),c,p,1,0,0,"")){t.b("          <h1>Join Twitter today.</h1>\n");};t.b("\n" + i);t.b("        <div class=\"ambassador clearfix\">\n");if(t.s(t.f("ambassadors",c,p,1),c,p,0,838,1020,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <img src=\"");if(t.s(t.f("is_ssl",c,p,1),c,p,0,872,899,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_image_url_https",c,p,0)));});c.pop();}if(!t.s(t.f("is_ssl",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("profile_image_url",c,p,0)));};t.b("\" class=\"avatar size48\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n");});c.pop();}if(t.s(t.f("follow_many",c,p,1),c,p,0,1063,1193,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <p>Complete signup now to receive updates from <strong>");t.b(t.v(t.f("first_ambassador_name",c,p,0)));t.b("</strong> and others. </p>\n");});c.pop();}if(!t.s(t.f("follow_many",c,p,1),c,p,1,0,0,"")){t.b("            <p>Complete signup now to receive updates from <strong>");t.b(t.v(t.f("first_ambassador_name",c,p,0)));t.b("</strong>.</p>\n");};t.b("        </div>\n");});c.pop();}if(!t.s(t.f("ambassadors_exist",c,p,1),c,p,1,0,0,"")){t.b("        <h1>\n");if(t.s(t.f("user_found_by_device",c,p,1),c,p,0,1492,1536,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          Complete your account.\n");});c.pop();}if(!t.s(t.f("user_found_by_device",c,p,1),c,p,1,0,0,"")){t.b("          Join Twitter today.\n");};t.b("        </h1>\n");};};t.b("\n" + i);t.b(t.rp("signup/signup_form0",c,p,"    "));t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"signup/signup_form0": {name:"signup/signup_form"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"signup_form": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form id=\"phx-signup-form\" method=\"POST\" action=\"");t.b(t.v(t.f("account_create_path",c,p,0)));t.b("\" class=\"");if(t.s(t.f("captcha_tryagain",c,p,1),c,p,0,102,128,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("validated captcha-tryagain");});c.pop();}if(t.s(t.f("user_found_by_device",c,p,1),c,p,0,174,190,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" device-complete");});c.pop();}t.b(" ");if(t.s(t.f("show_captcha",c,p,1),c,p,0,233,255,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("validated captcha-show");});c.pop();}t.b("\">\n<input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\" />\n\n");if(t.s(t.f("event",c,p,1),c,p,0,372,430,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <input type=\"hidden\" value=\"");t.b(t.v(t.f("event",c,p,0)));t.b("\" name=\"event\" />\n");});c.pop();}if(t.s(t.f("follow_field",c,p,1),c,p,0,458,527,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <input type=\"hidden\" value=\"");t.b(t.v(t.f("follow_handles",c,p,0)));t.b("\" name=\"follows\" />\n");});c.pop();}if(t.s(t.f("oauth_token",c,p,1),c,p,0,561,631,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <input type=\"hidden\" value=\"");t.b(t.v(t.f("oauth_token",c,p,0)));t.b("\" name=\"oauth_token\" />\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("signup_user",c,p,1),c,p,0,665,8723,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\n" + i);t.b("  <fieldset class=\"textbox\">\n\n    <div class=\"prompt name\">\n      <div class=\"holding ");if(t.s(t.f("name",c,p,1),c,p,0,762,768,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("hasome");});c.pop();}t.b("\" data-fieldname=\"name\">\n        <div class=\"sidetip\">\n");if(t.s(t.f("name_error",c,p,1),c,p,0,857,923,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <p class=\"active error\">");t.b(t.v(t.f("name_error",c,p,0)));t.b("</p>\n");});c.pop();}t.b("          <p class=\"ok isaok\">Name looks great.</p>\n          <p class=\"tip\">Enter your first and last name.</p>\n          <p class=\"blank invalid error\" role=\"alert\">A name is required!</p>\n        </div>\n        <input type=\"text\" autocomplete=\"off\" value=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" name=\"user[name]\" maxlength=\"20\" aria-required=\"true\" />\n        <span class=\"holder\">Full name</span>\n      </div>\n    </div>\n\n    <div class=\"prompt email\">\n      <div class=\"holding ");if(t.s(t.f("email",c,p,1),c,p,0,1403,1409,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("hasome");});c.pop();}t.b("\" data-fieldname=\"email\">\n        <div class=\"sidetip\">\n");if(t.s(t.f("email_error",c,p,1),c,p,0,1501,1568,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <p class=\"active error\">");t.b(t.v(t.f("email_error",c,p,0)));t.b("</p>\n");});c.pop();}t.b("          <p class=\"tip\">What’s your email address?</p>\n          <p class=\"ok isaok\">We will email you a confirmation.</p>\n          <p class=\"checking\">Validating...</p>\n          <p class=\"invalid error\" role=\"alert\">Doesn't look like a valid email.</p>\n          <p class=\"blank error\" role=\"alert\">An email is required!</p>\n          <p class=\"taken error\" role=\"alert\">This email is already registered. Want to <a href=\"");t.b(t.v(t.f("login_path",c,p,0)));t.b("\">login</a> or <a href=\"");t.b(t.v(t.f("resend_password_path",c,p,0)));t.b("\">recover your password</a>?</p>\n          <p class=\"domain tip ");if(t.s(t.f("abtest_autocorrect_email_domain_266_enabled",c,p,1),c,p,0,2185,2225,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("ddg-autocorrect_email_domain_266_enabled");});c.pop();}t.b("\">Did you mean <em><a class=\"js-email-correction\" href=\"#\"></a></em>?</p>\n        </div>\n        <input class=\"email-input\" type=\"text\" autocomplete=\"off\" value=\"");t.b(t.v(t.f("email",c,p,0)));t.b("\" name=\"user[email]\" aria-required=\"true\" />\n        <span class=\"holder\">Email</span>\n      </div>\n    </div>\n\n    <div class=\"prompt password\">\n      <div class=\"holding ");if(t.s(t.f("password",c,p,1),c,p,0,2629,2635,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("hasome");});c.pop();}t.b("\" data-fieldname=\"password\">\n        <div class=\"sidetip\">\n");if(t.s(t.f("password_error",c,p,1),c,p,0,2736,2806,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <p class=\"active error\">");t.b(t.v(t.f("password_error",c,p,0)));t.b("</p>\n");});c.pop();}t.b("          <p class=\"tip\">6 characters or more! Be tricky.</p>\n          <p class=\"perfect isaok\">Password is perfect!</p>\n          <p class=\"ok isaok\">Password is okay.</p>\n          <p class=\"weak isaok\">Password could be more secure.</p>\n          <p class=\"weak error\" role=\"alert\">Password is not secure enough.</p>\n          <p class=\"obvious error\" role=\"alert\">Password is too obvious.</p>\n          <p class=\"invalid error\" role=\"alert\">Password must be at least 6 characters.</p>\n          <p class=\"blank error\" role=\"alert\">Password cannot be blank!</p>\n        </div>\n        <input type=\"password\" value=\"");t.b(t.v(t.f("password",c,p,0)));t.b("\" name=\"user[user_password]\" aria-required=\"true\" />\n        <span class=\"holder\">Password</span>\n      </div>\n");if(t.s(t.f("decider_phoenix_signup_show_password_score",c,p,1),c,p,0,3621,3680,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"score\"><span><b></b></span></div>\n");});c.pop();}t.b("    </div>\n\n    <div class=\"prompt username\">\n      <div class=\"holding ");if(t.s(t.f("screen_name",c,p,1),c,p,0,3816,3822,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("hasome");});c.pop();}t.b("\" data-fieldname=\"username\">\n        <div class=\"sidetip\">\n");if(t.s(t.f("screen_name_error",c,p,1),c,p,0,3929,4002,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <p class=\"active error\">");t.b(t.v(t.f("screen_name_error",c,p,0)));t.b("</p>\n");});c.pop();}t.b("          <p class=\"ok isaok\">Username is available.<br>You can change it later.</p>\n          <p class=\"tip\">Don't worry, you can change it later.</p>\n          <p class=\"checking\">Validating...</p>\n          <p class=\"taken error\" role=\"alert\">This username is already taken!</p>\n          <p class=\"invalid error\" role=\"alert\">Invalid username! Alphanumerics only.</p>\n          <p class=\"blank error\" role=\"alert\">A username is required!<br>You can change it later.</p>\n        </div>\n        <input type=\"text\" autocomplete=\"off\" value=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" data-pre-input-value=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" name=\"user[screen_name]\" maxlength=\"15\" aria-required=\"true\" />\n        <span class=\"holder\">Username</span>\n      </div>\n      <div class=\"suggestions\">Suggestions:&#32;<ul></ul></div>\n    </div>\n\n    <div class=\"prompt rememberme\">\n      <label class=\"checkbox\">\n        <input type=\"checkbox\" ");if(t.s(t.f("remember_me_on_signup",c,p,1),c,p,0,4945,4962,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=\"checked\"");});c.pop();}t.b(" name=\"user[remember_me_on_signup]\" value=\"1\" />\n        <span>Keep me signed-in on this computer.</span>\n      </label>\n      <input type=\"hidden\" name=\"user[remember_me_on_signup]\" value=\"\" />\n    </div>\n\n");if(t.s(t.f("ask_cookie_personalization",c,p,1),c,p,0,5230,5745,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"prompt optin\">\n      <label class=\"checkbox\">\n        <input type=\"checkbox\" ");if(!t.s(t.f("do_not_track",c,p,1),c,p,1,0,0,"")){t.b("checked=\"checked\"");};t.b(" name=\"user[use_cookie_personalization]\" value=\"1\" />\n        <input type=\"hidden\" name=\"asked_cookie_personalization_setting\" value=\"1\" />\n        <span>Tailor Twitter based on my recent website visits. <a class=\"cookie-personalization-support\" href=\"https://support.twitter.com/articles/20169421\" target=\\\"_blank\\\">Learn more</a>.</span>\n      </label>\n    </div>\n");});c.pop();}t.b("\n" + i);t.b("    <input type=\"hidden\" name=\"context\" value=\"");t.b(t.v(t.f("signup_context",c,p,0)));t.b("\" />\n    <input type=\"hidden\" name=\"ad_ref\" value=\"");t.b(t.v(t.f("ad_ref",c,p,0)));t.b("\" />\n\n  </fieldset>\n\n  <div class=\"tos\">\n    <div class=\"sidetip\">\n      <p class=\"active tip\">Printable versions:<br/><a href=\"");t.b(t.v(t.f("tos_path",c,p,0)));t.b("\" target=\"_blank\">Terms of Service</a> &middot; <a href=\"");t.b(t.v(t.f("privacy_path",c,p,0)));t.b("\" target=\"_blank\">Privacy Policy</a></p>\n    </div>\n");t.b(t.rp("tos_scroller0",c,p,"    "));t.b("  </div>\n\n");if(t.s(t.f("captcha_available",c,p,1),c,p,0,6225,6634,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"captcha-container\">\n");if(!t.s(t.f("captcha_tryagain",c,p,1),c,p,1,0,0,"")){t.b("        <h6>Are you human?</h6>\n");};if(t.s(t.f("captcha_tryagain",c,p,1),c,p,0,6377,6426,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <h6>Please try again&hellip;</h6>\n");});c.pop();}t.b("      <div class=\"embed\">\n        <noscript>\n          <p>You will need to enable JavaScript to answer the CAPTCHA and complete signup.</p>\n        </noscript>\n      </div>\n    </div>\n");});c.pop();}t.b("\n" + i);t.b("  <div class=\"standby\">\n    <p>Creating your account&hellip;</p>\n  </div>\n\n  <fieldset class=\"doit\">\n\n    <div class=\"sign-up-box\"><input class=\"submit button promotional\" type=\"submit\" value=\"");if(!t.s(t.f("user_found_by_device",c,p,1),c,p,1,0,0,"")){t.b("Create my account");};if(t.s(t.f("user_found_by_device",c,p,1),c,p,0,6943,6962,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Complete my account");});c.pop();}t.b("\" /></div>\n\n    <div class=\"befound\">\n");if(t.s(t.f("decider_phoenix_signup_show_befound",c,p,1),c,p,0,7071,7667,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <p>\n        Let friends find you by email address?<br />\n        <em>Your name will always be publicly searchable.</em>\n      </p>\n      <div class=\"radios\">\n        <label>\n          <input type=\"radio\" name=\"user[discoverable_by_email]\" value=\"1\" ");if(t.s(t.f("discoverable_by_email",c,p,1),c,p,0,7353,7370,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=\"checked\"");});c.pop();}t.b(" />\n          <span>Yes</span>\n        </label>\n        <label>\n          <input type=\"radio\" name=\"user[discoverable_by_email]\" value=\"\" ");if(!t.s(t.f("discoverable_by_email",c,p,1),c,p,1,0,0,"")){t.b("checked=\"checked\"");};t.b(" />\n          <span>No</span>\n        </label>\n      </div>\n");});c.pop();}if(!t.s(t.f("decider_phoenix_signup_show_befound",c,p,1),c,p,1,0,0,"")){t.b("      <p>\n        Note: Others will be able to find you by name, username or email. Your email will not be shown publicly. You can change your privacy settings at any time.\n      </p>\n      <input type=\"hidden\" name=\"user[discoverable_by_email]\" value=\"1\" />\n");};t.b("    </div>\n\n");if(t.s(t.f("decider_phoenix_signup_show_newsletter",c,p,1),c,p,0,8116,8389,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <p class=\"newsletter\">\n      <label>\n        <input type=\"checkbox\" name=\"user[send_email_newsletter]\" value=\"1\" ");if(t.s(t.f("send_email_newsletter",c,p,1),c,p,0,8260,8277,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=\"checked\"");});c.pop();}t.b(" />\n        <span>Sign up for our email newsletter</span>\n      </label>\n    </p>\n");});c.pop();}if(!t.s(t.f("decider_phoenix_signup_show_newsletter",c,p,1),c,p,1,0,0,"")){t.b("      <input type=\"hidden\" name=\"user[send_email_newsletter]\" value=\"1\" />\n");};t.b("\n" + i);if(t.s(t.f("show_captcha",c,p,1),c,p,0,8626,8690,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <input type=\"hidden\" name=\"captcha_shown\" value=\"1\">\n");});c.pop();}t.b("  </fieldset>\n\n");});c.pop();}t.b("</form>\n");return t.fl(); }, partials: {"tos_scroller0": {name:"tos_scroller"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"signup_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form action=\"");t.b(t.v(t.f("signup_path",c,p,0)));t.b("\" class=\"signup\" method=\"get\">\n");if(t.s(t.f("screen_name",c,p,1),c,p,0,78,145,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <input name=\"follow\" type=\"hidden\" value=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n");});c.pop();}if(t.s(t.f("signup_source",c,p,1),c,p,0,182,341,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <input type=\"hidden\" name=\"context\" value=\"");t.b(t.v(t.f("signup_source",c,p,0)));t.b("\">\n    <input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\"/>\n");});c.pop();}t.b("  <button class=\"btn promotional signup-btn\" type=\"submit\">Sign up &raquo;</button>\n</form>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"similar_to_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"main-content\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,53,277,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("profile_user",c,p,1),c,p,0,96,133,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("sign_up_call_out0",c,p,"        "));});c.pop();}};if(t.s(t.f("profile_user",c,p,1),c,p,0,191,233,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("profile_similar_to_header1",c,p,"      "));});c.pop();}t.b(t.rp("stream_manager2",c,p,"    "));});c.pop();}t.b("</div>\n");t.b(t.rp("profile_dashboard3",c,p,""));t.b(t.rp("details_pane_container4",c,p,""));return t.fl(); }, partials: {"sign_up_call_out0": {name:"sign_up_call_out"},"profile_similar_to_header1": {name:"profile_similar_to_header"},"stream_manager2": {name:"stream_manager"},"profile_dashboard3": {name:"profile_dashboard"},"details_pane_container4": {name:"details_pane_container"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"simple_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(!t.s(t.f("render_withheld",c,p,1),c,p,1,0,0,"")){t.b("\n" + i);t.b("  \n");if(t.s(t.f("is_current_user_withheld",c,p,1),c,p,0,56,85,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("withheld_message0",c,p,"    "));});c.pop();}t.b("\n" + i);t.b("  <div class=\"simple-tweet tweet js-stream-tweet js-hover js-actionable-tweet js-profile-popup-actionable ");if(t.s(t.f("is_slideshow",c,p,1),c,p,0,239,254,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("slideshow-tweet");});c.pop();}t.b(" ");t.b(t.rp("common_tweet_classes1",c,p,""));t.b("\" ");t.b(t.rp("tweet_data2",c,p,""));t.b(">\n\n    \n    <i class=\"dogear\"></i>\n\n    \n    <div class=\"content\">\n\n      \n      <div class=\"stream-item-header\">\n");t.b(t.rp("tweet_timestamp3",c,p,"        "));t.b(t.rp("tweet_user_block4",c,p,"        "));t.b("      </div>\n\n      \n      <p class=\"js-tweet-text\">");t.b(t.t(t.f("linkified_text",c,p,0)));t.b("</p>\n\n      \n      <div class=\"stream-item-footer\">\n        \n        \n\n        \n        <a class=\"details with-icn js-details\" href=\"");t.b(t.v(t.f("permalink_path",c,p,0)));t.b("\">\n          <span class=\"details-icon js-icon-container\"");if(t.s(t.f("place_name",c,p,1),c,p,0,782,814,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" data-placename=\"");t.b(t.v(t.f("place_name",c,p,0)));t.b("\"");});c.pop();}t.b(">\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,867,1320,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("has_embedded_photo",c,p,1),c,p,0,903,955,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <i class=\"sm-image\"></i>\n");});c.pop();}if(t.s(t.f("has_embedded_summary",c,p,1),c,p,0,1016,1068,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <i class=\"sm-embed\"></i>\n");});c.pop();}if(t.s(t.f("has_embedded_player",c,p,1),c,p,0,1130,1182,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <i class=\"sm-video\"></i>\n");});c.pop();}if(t.s(t.f("has_strong_geo",c,p,1),c,p,0,1238,1288,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <i class=\"sm-geo\"></i>\n");});c.pop();}});c.pop();}t.b("          </span>\n          <b>\n            <span class=\"simple-details-link\">Details</span>\n            <span class=\"expand-stream-item js-view-details\">\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,1538,1783,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                ");t.b(t.v(t.f("expand_callout_text",c,p,0)));t.b("\n" + i);if(!t.s(t.f("expand_callout_text",c,p,1),c,p,1,0,0,"")){t.b("                  <span class=\"expand-action-wrapper\">\n                    Expand\n                  </span>\n");};});c.pop();}if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b("                <span class=\"expand-action-wrapper\">\n                  Expand\n                </span>\n");};t.b("            </span>\n            <span class=\"collapse-stream-item js-hide-details\">\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,2110,2167,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                ");t.b(t.v(t.f("collapse_callout_text",c,p,0)));t.b("\n" + i);});c.pop();}if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b("                Collapse\n");};t.b("            </span>\n          </b>\n        </a>\n\n        \n");t.b(t.rp("tweet_actions5",c,p,"        "));t.b("      </div>\n\n      \n");t.b(t.rp("stream_tweet_expansion6",c,p,"      "));t.b("\n" + i);t.b("    </div>\n  </div>\n\n");};return t.fl(); }, partials: {"withheld_message0": {name:"withheld_message"},"common_tweet_classes1": {name:"common_tweet_classes"},"tweet_data2": {name:"tweet_data"},"tweet_timestamp3": {name:"tweet_timestamp"},"tweet_user_block4": {name:"tweet_user_block"},"tweet_actions5": {name:"tweet_actions"},"stream_tweet_expansion6": {name:"stream_tweet_expansion"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"simple_tweet_large": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-item-content tweet js-actionable-tweet stream-tweet simple-tweet\"\n  data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("tweet_impression_id",c,p,0)));t.b(" ");if(t.s(t.f("current_user_retweet",c,p,1),c,p,0,161,188,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-my-retweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");});c.pop();}t.b(" data-item-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");if(t.s(t.f("was_retweeted",c,p,1),c,p,0,254,322,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("retweeting_status",c,p,1),c,p,0,276,300,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-retweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");});c.pop();}});c.pop();}t.b(" ");if(t.s(t.f("user",c,p,1),c,p,0,350,406,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");});c.pop();}t.b(" ");if(t.s(t.f("protected",c,p,1),c,p,0,430,451,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-protected=\"true\"");});c.pop();}t.b(" ");if(t.s(t.f("is_sponsored",c,p,1),c,p,0,483,503,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-promoted=\"true\"");});c.pop();}t.b(">\n");t.b(t.rp("tweet_dogear0",c,p,"  "));t.b("  <div class=\"tweet-image\">\n");t.b(t.rp("tweet_user_image_481",c,p,"      "));t.b("  </div>\n  <div class=\"tweet-content\">\n    <div class=\"tweet-row\">\n");t.b(t.rp("tweet_user_name2",c,p,"      "));t.b("      <div class=\"tweet-corner\">\n");t.b(t.rp("tweet_meta3",c,p,"        "));t.b("      </div>\n    </div>\n    <div class=\"tweet-row\">\n");t.b(t.rp("tweet_text4",c,p,"      "));t.b("    </div>\n  </div>\n</div>");return t.fl(); }, partials: {"tweet_dogear0": {name:"tweet_dogear"},"tweet_user_image_481": {name:"tweet_user_image_48"},"tweet_user_name2": {name:"tweet_user_name"},"tweet_meta3": {name:"tweet_meta"},"tweet_text4": {name:"tweet_text"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"single_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(!t.s(t.f("render_withheld",c,p,1),c,p,1,0,0,"")){t.b("  \n  <div class=\"permalink-inner permalink-tweet-container\">\n\n");if(t.s(t.f("is_current_user_withheld",c,p,1),c,p,0,116,149,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("withheld_message0",c,p,"      "));});c.pop();}t.b("\n" + i);t.b("    <div class=\"tweet permalink-tweet js-actionable-user js-hover js-actionable-tweet ");t.b(t.rp("common_tweet_classes1",c,p,""));t.b(" ");if(t.s(t.f("logged_in",c,p,1),c,p,0,306,315,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("logged-in");});c.pop();}t.b(" preexpanded\" ");t.b(t.rp("tweet_data2",c,p,""));t.b(">\n\n      \n      <i class=\"dogear\"></i>\n      \n      <div class=\"content clearfix\">\n        <div class=\"permalink-header\">\n");t.b(t.rp("tweet_user_block3",c,p,"          "));t.b("          \n");t.b(t.rp("tweet_timestamp4",c,p,"          "));t.b("        </div>\n");if(t.s(t.f("user",c,p,1),c,p,0,586,626,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("profile_actions5",c,p,"          "));});c.pop();}t.b("      </div>\n\n      \n      <p class=\"js-tweet-text tweet-text ");if(t.s(t.f("is_rtl_tweet",c,p,1),c,p,0,715,730,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" tweet-text-rtl");});c.pop();}t.b("\">");t.b(t.t(t.f("linkified_text",c,p,0)));t.b("</p>\n\n      \n      <div class=\"stream-item-footer\">\n        \n");t.b(t.rp("tweet_context6",c,p,"        "));t.b("\n" + i);t.b("        \n");t.b(t.rp("tweet_actions7",c,p,"        "));t.b("      </div>\n\n      <div class=\"permalink-footer\">\n");t.b(t.rp("stream_tweet_expansion8",c,p,"        "));t.b(t.rp("tweet_details9",c,p,"        "));t.b(t.rp("proxy_tweet10",c,p,"        "));t.b("      </div>\n    </div>\n\n  </div>\n");};if(t.s(t.f("render_withheld",c,p,1),c,p,0,1108,1138,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("single_tweet_withheld11",c,p,"  "));});c.pop();}return t.fl(); }, partials: {"withheld_message0": {name:"withheld_message"},"common_tweet_classes1": {name:"common_tweet_classes"},"tweet_data2": {name:"tweet_data"},"tweet_user_block3": {name:"tweet_user_block"},"tweet_timestamp4": {name:"tweet_timestamp"},"profile_actions5": {name:"profile_actions"},"tweet_context6": {name:"tweet_context"},"tweet_actions7": {name:"tweet_actions"},"stream_tweet_expansion8": {name:"stream_tweet_expansion"},"tweet_details9": {name:"tweet_details"},"proxy_tweet10": {name:"proxy_tweet"},"single_tweet_withheld11": {name:"single_tweet_withheld"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"single_tweet_withheld": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet js-actionable-tweet permalink-tweet permalink-tweet-withheld ");t.b(t.v(t.f("css_classes",c,p,0)));t.b("\" data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-item-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");if(t.s(t.f("current_user_retweet",c,p,1),c,p,0,166,193,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-my-retweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");});c.pop();}t.b(" data-screen-name='");if(t.s(t.f("user",c,p,1),c,p,0,246,261,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("screen_name",c,p,0)));});c.pop();}t.b("'>\n  <div class=\"tweet-row\">\n    <div class=\"tweet-user-withheld\">\n        Tweet withheld\n    </div>\n  </div>\n  <div class=\"tweet-row\">\n");t.b(t.rp("tweet_text_large0",c,p,"    "));t.b("  </div>\n</div>");return t.fl(); }, partials: {"tweet_text_large0": {name:"tweet_text_large"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"slideshow_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet slideshow-tweet js-actionable-tweet\" data-tweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-item-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");if(t.s(t.f("current_user_retweet",c,p,1),c,p,0,125,152,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-my-retweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");});c.pop();}t.b(" ");if(t.s(t.f("was_retweeted",c,p,1),c,p,0,196,264,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("retweeting_status",c,p,1),c,p,0,218,242,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-retweet-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");});c.pop();}});c.pop();}t.b(" ");if(t.s(t.f("user",c,p,1),c,p,0,292,348,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");});c.pop();}t.b(" ");if(t.s(t.f("protected",c,p,1),c,p,0,372,393,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-protected=\"true\"");});c.pop();}t.b(" ");if(t.s(t.f("is_sponsored",c,p,1),c,p,0,425,445,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-promoted=\"true\"");});c.pop();}t.b(">\n  <div class=\"tweet-image\">\n");t.b(t.rp("tweet_user_image_480",c,p,"      "));t.b("  </div>\n  <div class=\"tweet-content\">\n    <div class=\"tweet-row\">\n");t.b(t.rp("tweet_user_name1",c,p,"      "));t.b(t.rp("tweet_timestamp2",c,p,"      "));t.b("    </div>\n    <div class=\"tweet-row\">\n");t.b(t.rp("tweet_text3",c,p,"      "));t.b("    </div>\n    <div class=\"tweet-row stream-item-footer\">\n      <a class=\"details with-icn js-details\" href=\"");t.b(t.v(t.f("permalink_path",c,p,0)));t.b("\">\n        <b><span class=\"simple-details-link\">Details</span></b>\n      </a>\n");t.b(t.rp("tweet_actions4",c,p,"      "));t.b("    </div>\n    <div class=\"tweet-row\">\n");t.b(t.rp("tweet_labels5",c,p,"      "));t.b("    </div>\n  </div>\n");t.b(t.rp("proxy_tweet6",c,p,"  "));t.b("</div>\n");return t.fl(); }, partials: {"tweet_user_image_480": {name:"tweet_user_image_48"},"tweet_user_name1": {name:"tweet_user_name"},"tweet_timestamp2": {name:"tweet_timestamp"},"tweet_text3": {name:"tweet_text"},"tweet_actions4": {name:"tweet_actions"},"tweet_labels5": {name:"tweet_labels"},"proxy_tweet6": {name:"proxy_tweet"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"slow_load_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"banner-outer\" id=\"slow-load-banner\" style=\"display:none;\">\n  <div class=\"banner\">\n    <div class=\"banner-inside slow-warning\">\n      <h5>Twitter.com is loading slowly.</h5>\n      <span class=\"warning\">Hmm, this seems to be taking a while. If problems persist, <a href=\"javascript:window.location.reload(true);\">please reload</a> to try again.</span>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"small_follow_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"follow-combo btn-group js-actionable-user ");if(t.s(t.f("blocking",c,p,1),c,p,0,102,109,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("blocked");});c.pop();}if(!t.s(t.f("blocking",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("following",c,p,1),c,p,1,0,0,"")){t.b("not-following");};if(t.s(t.f("following",c,p,1),c,p,0,190,199,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("following");});c.pop();}if(t.s(t.f("follow_request_sent",c,p,1),c,p,0,237,257,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" follow-request-sent");});c.pop();}if(t.s(t.f("protected",c,p,1),c,p,0,295,305,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" protected");});c.pop();}if(t.s(t.f("following",c,p,1),c,p,0,333,425,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("want_retweets",c,p,1),c,p,0,351,361,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" including");});c.pop();}if(t.s(t.f("notifications",c,p,1),c,p,0,397,407,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" notifying");});c.pop();}});c.pop();}if(t.s(t.f("can_dm",c,p,1),c,p,0,450,457,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" can-dm");});c.pop();}};t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n  <a class=\"small follow-btn btn js-combo-btn js-recommended-item\">\n    <div class=\"js-action-follow follow-text\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      <i class=\"follow\"></i>\n      Follow\n    </div>\n    <div class=\"following-text\">\n      Following\n    </div>\n    <div class=\"js-action-unfollow unfollow-text\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Unfollow\n    </div>\n    <div class=\"block-text\">\n      Blocked\n    </div>\n    <div class=\"js-action-unblock unblock-text\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Unblock\n    </div>\n    <div class=\"pending-text\">\n      Pending\n    </div>\n    <div class=\"js-action-unfollow cancel-req-text\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      Cancel\n    </div>\n  </a>\n  <span href=\"#\" class=\"small btn btn-user-actions\">\n    <i class=\"account-arrow\"></i>\n    <ul class=\"js-combo-btn-dropdown-options dropdown-menu btn-group-dropdown\">\n      <li><a class=\"js-action-mention is-not-blocked\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Mention ");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a></li>\n      <li><a class=\"js-direct-message-action can-send-dm\" href=\"#\">Send a direct message</a></li>\n      <li><a class=\"js-action-add-to-list is-not-blocked\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Add/Remove from lists</a></li>\n      <li><a class=\"js-action-block is-not-blocked\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Block ");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a></li>\n      <li><a class=\"js-action-unblock is-blocked\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Unblock ");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a></li>\n      <li><a class=\"js-action-spam is-not-blocked\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Report ");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" for spam</a></li>\n      <li class=\"is-following divider\"></li>\n      <li><a class=\"js-retweet-setting is-not-including\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Turn on Retweets</a></li>\n      <li><a class=\"js-retweet-setting is-including\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Turn off Retweets</a></li>\n      <li><a class=\"js-device-notifications is-not-notifying\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Turn on mobile notifications</a></li>\n      <li><a class=\"js-device-notifications is-notifying\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Turn off mobile notifications</a></li>\n    </ul>\n  </span>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"sms_follow": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("show_sms_prompt",c,p,1),c,p,0,20,110,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"sms-follow\">\n    <span class=\"icon\"></span> ");t.b(t.t(t.f("sms_follow_text",c,p,0)));t.b("\n" + i);t.b("  </div>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"sms_follow_prompt": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("show_sms_prompt",c,p,1),c,p,0,20,498,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"sms-follow\">\n    <span class=\"icon\"></span>\n");if(t.s(t.f("show_detailed_command",c,p,1),c,p,0,109,265,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      Text <strong>follow ");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</strong> to <strong>");t.b(t.v(t.f("number",c,p,0)));t.b("</strong> in <a href=\"");t.b(t.v(t.f("sms_codes_link",c,p,0)));t.b("\" class=\"sms-codes-link\">");t.b(t.v(t.f("where",c,p,0)));t.b("</a>\n");});c.pop();}if(!t.s(t.f("show_detailed_command",c,p,1),c,p,1,0,0,"")){t.b("      Text <strong>follow ");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</strong> to <a href=\"");t.b(t.v(t.f("sms_codes_link",c,p,0)));t.b("\" class=\"sms-codes-link\">your carrier's shortcode</a>\n");};t.b("  </div>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"soccer_matched_event": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("home_team",c,p,1),c,p,0,14,496,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"home-team\">\n  <a class=\"account-group js-user-profile-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");if(t.s(t.f("user",c,p,1),c,p,0,135,141,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("id",c,p,0)));});c.pop();}t.b("\">\n  <div class=\"team\">\n    <div class=\"fullname\">");t.b(t.v(t.f("team_name",c,p,0)));t.b(" </div>\n");if(t.s(t.f("user",c,p,1),c,p,0,234,412,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"follow-team\">\n");if(t.s(t.f("show_follow",c,p,1),c,p,0,287,309,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        Follow\n");});c.pop();}if(!t.s(t.f("show_follow",c,p,1),c,p,1,0,0,"")){t.b("        @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);};t.b("    </div>\n");});c.pop();}t.b("  </div>\n  <img class=\"team-logo\" src=\"");t.b(t.v(t.f("team_logo_url",c,p,0)));t.b("\">\n  </a>\n</span>\n");});c.pop();}t.b("\n" + i);t.b("<span class=\"score\">\n");if(t.s(t.f("score",c,p,1),c,p,0,545,763,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <a class=\"matched-score live\" href=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\">\n    <span class=\"home-score\">");t.b(t.v(t.f("home",c,p,0)));t.b("</span><span class=\"divider\"><i class=\"dot\"></i><i class=\"dot\"></i></span><span class=\"away-score\">");t.b(t.v(t.f("away",c,p,0)));t.b("</span>\n  </a>\n");});c.pop();}if(t.s(t.f("preview",c,p,1),c,p,0,788,1017,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <span class=\"preview\">\n    <div class=\"scheduled-time\">\n      <span>");t.b(t.v(t.f("time",c,p,0)));t.b("</span>\n    </div>\n");if(t.s(t.f("url",c,p,1),c,p,0,898,996,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"detail\">\n      <a target=\"_blank\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">View details</a>\n    </div>\n");});c.pop();}t.b("  </span>\n");});c.pop();}t.b("  <div class=\"time-status\">\n    <a href=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\" class=\"hashtag\" data-hashtag=\"");t.b(t.v(t.f("hashtag",c,p,0)));t.b("\">");t.b(t.v(t.f("hashtag",c,p,0)));t.b("</a>\n");if(t.s(t.f("match_state",c,p,1),c,p,0,1167,1470,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span class=\"bullet\">&sdot;</span>\n");if(t.s(t.f("current_period_string",c,p,1),c,p,0,1237,1298,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span class=\"half\">");t.b(t.v(t.f("current_period_string",c,p,0)));t.b("</span>\n");});c.pop();}if(t.s(t.f("show_time_elapsed_time",c,p,1),c,p,0,1356,1438,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span class=\"elapsed_time\">");t.b(t.v(t.f("current_period_elapsed_time_string",c,p,0)));t.b("</span>\n");});c.pop();}});c.pop();}if(t.s(t.f("recap",c,p,1),c,p,0,1501,1632,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("url",c,p,1),c,p,0,1509,1624,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span class=\"bullet\">&sdot;</span> <a class=\"recap\" target=\"_blank\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">View recap &raquo;</a>\n");});c.pop();}});c.pop();}t.b("  </div>\n</span>\n\n");if(t.s(t.f("away_team",c,p,1),c,p,0,1675,2157,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"away-team\">\n  <a class=\"account-group js-user-profile-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");if(t.s(t.f("user",c,p,1),c,p,0,1796,1802,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("id",c,p,0)));});c.pop();}t.b("\">\n  <div class=\"team\">\n    <div class=\"fullname\"> ");t.b(t.v(t.f("team_name",c,p,0)));t.b("</div>\n");if(t.s(t.f("user",c,p,1),c,p,0,1895,2073,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"follow-team\">\n");if(t.s(t.f("show_follow",c,p,1),c,p,0,1948,1970,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        Follow\n");});c.pop();}if(!t.s(t.f("show_follow",c,p,1),c,p,1,0,0,"")){t.b("        @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);};t.b("    </div>\n");});c.pop();}t.b("  </div>\n  <img class=\"team-logo\" src=\"");t.b(t.v(t.f("team_logo_url",c,p,0)));t.b("\">\n  </a>\n</span>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"soccer_ticker": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("preview",c,p,1),c,p,0,12,361,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("user",c,p,1),c,p,0,24,351,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Follow <a class=\"follow-news js-follow-news js-user-profile-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a> <span class=\"username\"><s>@</s><b>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</b></span> for game updates.\n  <a class=\"follow-news js-follow-news js-user-profile-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Follow</a>\n");});c.pop();}});c.pop();}if(!t.s(t.f("preview",c,p,1),c,p,1,0,0,"")){t.b("  <ul class=\"ticker\">\n");if(t.s(t.f("ticker_list",c,p,1),c,p,0,429,815,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li class='event-item' event_id=");t.b(t.v(t.f("event_id",c,p,0)));t.b(">\n        <a class=\"ticker-event\" href=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\" data-hashtag=\"");t.b(t.v(t.f("hashtag",c,p,0)));t.b("\">\n        <span class=\"ticker-team\">");t.b(t.v(t.f("home_name",c,p,0)));t.b("</span>\n          <span class=\"ticker-score ");if(t.s(t.f("live",c,p,1),c,p,0,665,669,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("live");});c.pop();}t.b("\"> ");if(t.s(t.f("score",c,p,1),c,p,0,691,712,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.f("home",c,p,0)));t.b(" : ");t.b(t.v(t.f("away",c,p,0)));t.b(" ");});c.pop();}t.b(" </span>\n        <span class=\"ticker-team\">");t.b(t.v(t.f("away_name",c,p,0)));t.b("</span>\n        </a>\n      </li>\n");});c.pop();}t.b("  </ul>\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"social_context_narrow": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("following_followers_of",c,p,1),c,p,0,27,205,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("is_plural",c,p,1),c,p,1,0,0,"")){t.b("    You follow an account that follows @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);};if(t.s(t.f("is_plural",c,p,1),c,p,0,134,190,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    You follow accounts that follow @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);});c.pop();}});c.pop();}if(!t.s(t.f("following_followers_of",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("is_plural",c,p,1),c,p,1,0,0,"")){t.b("    You both follow this account\n");};if(t.s(t.f("is_plural",c,p,1),c,p,0,344,382,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    You both follow these accounts\n");});c.pop();}};t.b("<span class=\"dot\">&middot;</span> <a href=\"");t.b(t.t(t.f("view_all",c,p,0)));t.b("\" class=\"view-all\">view</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"spelling_corrections": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module js-spelling-corrections search-assist-spelling\" data-component-term=\"spelling_corrections\">\n  <div class=\"flex-module\">\n    <div class=\"flex-module-inner\">\n      <div class=\"dismiss js-action-dismiss\" data-query=\"");t.b(t.v(t.f("query",c,p,0)));t.b("\" data-search-assistance=\"");t.b(t.v(t.f("correction",c,p,0)));t.b("\">\n        <i class=\"close\"></i>\n      </div>\n      <span class=\"search-spelling-suggestions\">\n        <span class=\"label\">Did you mean:</span>\n        <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"corrected-query\" data-query=\"");t.b(t.v(t.f("query",c,p,0)));t.b("\" data-search-assistance=\"");t.b(t.v(t.f("correction",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\">\n          \n");if(t.s(t.f("partitions",c,p,1),c,p,0,619,717,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            ");t.b(t.v(t.f("nonhighlighted",c,p,0)));if(t.s(t.f("highlighted",c,p,1),c,p,0,666,690,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<em>");t.b(t.v(t.f("highlighted",c,p,0)));t.b("</em>");});c.pop();}t.b("\n" + i);});c.pop();}t.b("        </a>\n      </span>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stork_pip_icon": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-pip stork-pip stork-pip-right\">\n  <div class=\"stork-pulse\"></div>\n  <i class=\"stork-icon ");t.b(t.v(t.f("icon",c,p,0)));t.b("\"></i>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stork_pip_text": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-pip module stork stork-open\">\n\n  <div class=\"contrast-flex-module\">\n\n    <div class=\"contrast-module-header\">\n      ");t.b(t.t(t.f("contents",c,p,0)));t.b("\n" + i);if(t.s(t.f("dismiss",c,p,1),c,p,0,164,261,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div>\n        <a href=\"#\" class=\"stork-dismiss js-dismiss\">Dismiss</a>\n      </div>\n");});c.pop();}t.b("    </div>\n\n    <div class=\"pointer\"></div>\n\n    <div class=\"contrast-module-footer\">\n    </div>\n\n  </div>\n</div>\n\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"story_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.t(t.f("card_view_html",c,p,0)));return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_end": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-end\">\n  <div class=\"stream-end-inner\">\n");if(t.s(t.f("show_stream_end_bird",c,p,1),c,p,0,87,126,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <i class=\"bird-etched\"></i>\n");});c.pop();}if(t.s(t.f("swift",c,p,1),c,p,0,166,241,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <p class=\"empty-text\">");t.b(t.v(t.f("empty_text",c,p,0)));t.b("</p>\n");t.b(t.rp("back_to_top0",c,p,"      "));});c.pop();}if(t.s(t.f("end_text",c,p,1),c,p,0,269,302,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <p>");t.b(t.t(t.f("end_text",c,p,0)));t.b("</p>\n");});c.pop();}t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"back_to_top0": {name:"back_to_top"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_end_bird": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_follower_request": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-actionable-user account ");if(t.s(t.f("promoted_content",c,p,1),c,p,0,60,76,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("promoted-account");});c.pop();}t.b("\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(">\n  <div class=\"btn-group\">\n    <a class=\"btn js-action-accept\">Accept</a>\n    <a class=\"btn js-action-deny\">Decline</a>\n  </div>\n  <div class=\"content\">\n    <div class=\"stream-item-header\">\n      <a class=\"account-group\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">\n        <img class=\"avatar\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"/>\n        <strong class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n        <span class=\"username\">@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span>\n      </a>\n    </div>\n    <p class=\"bio ");if(t.s(t.f("description_is_rtl",c,p,1),c,p,0,715,734,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("bio-description-rtl");});c.pop();}t.b("\">");t.b(t.v(t.f("description",c,p,0)));t.b("</p>\n    \n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_header_people_search": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("stream_header0",c,p,""));t.b(t.rp("people_search1",c,p,""));return t.fl(); }, partials: {"stream_header0": {name:"stream_header"},"people_search1": {name:"people_search"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_interest_category": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"interest-category\">\n  <div class=\"content\">\n    <div class=\"stream-item-header\">\n      <a href=\"#\"><strong>");t.b(t.v(t.f("interest_name",c,p,0)));t.b("</strong></a>\n      <span class=\"metadata\">");t.b(t.v(t.f("size",c,p,0)));t.b(" suggestions</span>\n    </div>\n\n");if(t.s(t.f("user_sample",c,p,1),c,p,0,239,324,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"large avatar-row\">\n");t.b(t.rp("user_static_list0",c,p,"        "));t.b("      </div>\n");});c.pop();}t.b("  </div>\n</div>");return t.fl(); }, partials: {"user_static_list0": {name:"user_static_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_link": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"stream-link\" data-item-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n  <a title='");t.b(t.v(t.f("name",c,p,0)));t.b("' href=\"");t.b(t.t(t.f("href",c,p,0)));t.b("\">\n");if(t.s(t.f("icon_class",c,p,1),c,p,0,107,155,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <span class=\"");t.b(t.v(t.f("icon_class",c,p,0)));t.b("\"></span>\n");});c.pop();}t.b("    <b class=\"item-name\">\n      ");t.b(t.v(t.f("name",c,p,0)));t.b("\n" + i);t.b("    </b>\n");if(t.s(t.f("show_delete",c,p,1),c,p,0,241,311,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <span title=\"");t.b(t.v(t.f("delete_title",c,p,0)));t.b("\" class=\"delete-icon\"></span>\n");});c.pop();}if(t.s(t.f("is_private",c,p,1),c,p,0,347,411,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <span title=\"Private List\" class=\"lock-icon\"></span>\n");});c.pop();}t.b("  </a>\n</li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"list js-list js-profile-popup-actionable\" data-user-id=\"");if(t.s(t.f("user",c,p,1),c,p,0,77,83,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("id",c,p,0)));});c.pop();}t.b("\" data-list-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n  <div class=\"content\">\n    <div class=\"stream-item-header\">\n      <a class=\"js-list-link\" href=\"");t.b(t.v(t.f("user_list_path",c,p,0)));t.b("\">\n        <strong>");t.b(t.v(t.f("name",c,p,0)));t.b("</strong></a>\n      \n");if(t.s(t.f("user",c,p,1),c,p,0,295,571,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <a class=\"js-user-profile-link\">\n          <img class=\"avatar size32\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n        </a>");if(!t.s(t.f("is_own_list",c,p,1),c,p,1,0,0,"")){t.b("<span class=\"username\"> by <a class=\"js-user-profile-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a></span>");};t.b("\n" + i);});c.pop();}t.b("      ");if(!t.s(t.f("is_public",c,p,1),c,p,1,0,0,"")){t.b("<i title=\"Private List\" class=\"sm-lock\"></i>");};t.b("\n" + i);t.b("    </div>\n    <p class=\"bio ");if(t.s(t.f("description_is_rtl",c,p,1),c,p,0,712,731,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("bio-description-rtl");});c.pop();}t.b("\">");t.b(t.v(t.f("description",c,p,0)));t.b("</p>\n  \n    <p class=\"metadata\">");t.b(t.v(t.f("member_count",c,p,0)));t.b(" members</p>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_saved_search": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"saved-search\">\n  <div class=\"stream-item-header\">\n    <a href=\"");t.b(t.v(t.f("saved_search_path",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\">\n      <strong>");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n    </a>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_suggestion_category": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-suggestion-category\">\n\n  <h3 class=\"category-title\">\n    ");t.b(t.v(t.f("category_name",c,p,0)));t.b("\n" + i);t.b("    <a class=\"category-count\" href=\"");t.b(t.v(t.f("category_link",c,p,0)));t.b("\"><strong>");t.b(t.v(t.f("size",c,p,0)));t.b("</strong> suggestions</a>\n    <a class=\"view-all\" href=\"");t.b(t.v(t.f("category_link",c,p,0)));t.b("\">View all &rarr;</a>\n  </h3>\n");if(t.s(t.f("user_sample",c,p,1),c,p,0,286,330,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <ul>\n");t.b(t.rp("user_static_list0",c,p,"    "));t.b("  </ul>\n");});c.pop();}t.b("\n" + i);t.b("</div>");return t.fl(); }, partials: {"user_static_list0": {name:"user_static_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_tweet_hidden": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"hidden-tweet-template\">\n  <div class=\"hidden-tweet\">\n    <a href=\"#\" class=\"undo-hide-action\">Undo</a>\n    <div class=\"spam-message\">\n      <strong><span class=\"hidden-name\"></span></strong>\n      <small class=\"username\"><s>@</s><span class=\"hidden-screen-name\"></span> was reported spam</small>\n    </div>\n    <div class=\"block-message\">\n      <strong><span class=\"hidden-name\"></span></strong>\n      <small class=\"username\"><s>@</s><span class=\"hidden-screen-name\"></span> was blocked</small>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_user": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_withheld",c,p,1),c,p,0,16,45,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("stream_user_withheld0",c,p,"  "));});c.pop();}if(!t.s(t.f("is_withheld",c,p,1),c,p,1,0,0,"")){t.b("\n" + i);t.b("<div class=\"account ");if(t.s(t.f("promoted_content",c,p,1),c,p,0,121,138,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("promoted-account ");});c.pop();}t.b(" js-actionable-user js-profile-popup-actionable ");if(t.s(t.f("hidden_by_activity",c,p,1),c,p,0,230,253,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" sub-stream-item-hidden");});c.pop();}t.b("\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(">\n");if(!t.s(t.f("for_activity",c,p,1),c,p,1,0,0,"")){t.b(t.rp("profile_actions1",c,p,"    "));};t.b("  <div class=\"content\">\n    <div class=\"stream-item-header\">\n      <a class=\"account-group js-user-profile-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">\n        <img class=\"avatar js-action-profile-avatar ");t.b(t.v(t.f("avatar_size_class",c,p,0)));t.b("\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");if(t.s(t.f("embedded_by_activity",c,p,1),c,p,0,752,769,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\"");});c.pop();}t.b("/>\n        <strong class=\"fullname js-action-profile-name\">");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n        <span>&rlm;</span>\n        ");if(t.s(t.f("verified",c,p,1),c,p,0,919,943,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified\"></i>");});c.pop();}t.b("\n" + i);t.b("        <span class=\"username js-action-profile-name\">@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span>\n");if(t.s(t.f("protected",c,p,1),c,p,0,1057,1100,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <i class=\"sm-lock\"></i>\n");});c.pop();}t.b("      </a>\n    </div>\n");if(!t.s(t.f("with_followers_count",c,p,1),c,p,1,0,0,"")){t.b("      <p class=\"bio ");if(t.s(t.f("description_is_rtl",c,p,1),c,p,0,1210,1229,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("bio-description-rtl");});c.pop();}t.b("\">");t.b(t.t(t.f("linkified_description",c,p,0)));t.b("</p>\n");};if(t.s(t.f("with_followers_count",c,p,1),c,p,0,1345,1377,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("followers_count2",c,p,"      "));});c.pop();}if(t.s(t.f("for_activity",c,p,1),c,p,0,1424,1456,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("profile_actions3",c,p,"      "));});c.pop();}if(t.s(t.f("socialcontext",c,p,1),c,p,0,1496,1551,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <p class=\"metadata\">");t.b(t.t(t.f("socialcontext",c,p,0)));t.b("</p>\n");});c.pop();}if(t.s(t.f("is_sponsored",c,p,1),c,p,0,1591,1876,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <span class=\"metadata with-icn\">\n        <a class=\"js-promoted-badge js-user-profile-link\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" title=\"");if(t.s(t.f("promoted_content",c,p,1),c,p,0,1763,1782,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("disclosure_text",c,p,0)));});c.pop();}t.b("\"><i class=\"");t.b(t.v(t.f("promoted_badge_class",c,p,0)));t.b("\"></i>Promoted</a>\n      </span>\n");});c.pop();}t.b("\n" + i);t.b("  </div>\n</div>\n\n");};return t.fl(); }, partials: {"stream_user_withheld0": {name:"stream_user_withheld"},"profile_actions1": {name:"profile_actions"},"followers_count2": {name:"followers_count"},"profile_actions3": {name:"profile_actions"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_user_buttons": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"stream-user-buttons\">\n");if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("following",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("follow_request_sent",c,p,1),c,p,0,141,188,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("follow_request_sent_button0",c,p,"        "));});c.pop();}if(!t.s(t.f("follow_request_sent",c,p,1),c,p,1,0,0,"")){t.b(t.rp("follow_button1",c,p,"        "));};};if(t.s(t.f("following",c,p,1),c,p,0,339,371,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("unfollow_button2",c,p,"      "));});c.pop();}};t.b("\n" + i);if(t.s(t.f("logged_in",c,p,1),c,p,0,426,965,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("in_home_page",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("is_onebox",c,p,1),c,p,1,0,0,"")){t.b("          <div class=\"button user-profile-actions-button js-action-profilemenu\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n            <span class=\"user-actions\"></span><span class=\"down-arrow\"></span>\n          </div>\n");};};if(t.s(t.f("dismissable",c,p,1),c,p,0,770,924,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"dismiss\">\n          <a class=\"dismiss js-action-dismiss\" href=\"#\" title=\"Hide this suggestion\">&times; Hide</a>\n        </div>\n");});c.pop();}};});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {"follow_request_sent_button0": {name:"follow_request_sent_button"},"follow_button1": {name:"follow_button"},"unfollow_button2": {name:"unfollow_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_user_withheld": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"account ");if(t.s(t.f("promoted_content",c,p,1),c,p,0,41,58,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("promoted-account ");});c.pop();}t.b(" js-actionable-user js-profile-popup-actionable ");if(t.s(t.f("hidden_by_activity",c,p,1),c,p,0,150,173,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" sub-stream-item-hidden");});c.pop();}t.b(" withheld-user\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(">\n  <div class=\"content\">\n    <div class=\"stream-item-header\">\n      <span class=\"account-group\">\n        <strong class=\"fullname js-action-profile-name\">@");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" withheld</strong>\n        ");if(t.s(t.f("verified",c,p,1),c,p,0,527,551,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified\"></i>");});c.pop();}t.b("\n" + i);if(t.s(t.f("protected",c,p,1),c,p,0,587,630,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <i class=\"sm-lock\"></i>\n");});c.pop();}t.b("      </span>\n    </div>\n    <p class=\"bio ");if(t.s(t.f("description_is_rtl",c,p,1),c,p,0,711,730,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("bio-description-rtl");});c.pop();}t.b("\">");t.b(t.t(t.f("linkified_description",c,p,0)));t.b("  <a href=");if(t.s(t.f("is_withheld_copyright",c,p,1),c,p,0,818,852,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\"");t.b(t.v(t.f("withheld_copyright_help_path",c,p,0)));t.b("\"");});c.pop();}if(!t.s(t.f("is_withheld_copyright",c,p,1),c,p,1,0,0,"")){t.b("\"");t.b(t.v(t.f("withheld_help_path",c,p,0)));t.b("\"");};t.b(" target=\"_blank\">Learn more</a>\n    ");if(t.s(t.f("following",c,p,1),c,p,0,1004,1163,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"js-follow-state follow-action\"> &middot; <a href=\"#\" class=\"js-action-unfollow js-link\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Unfollow @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a></span>");});c.pop();}t.b("</p>\n");if(t.s(t.f("socialcontext",c,p,1),c,p,0,1204,1259,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <p class=\"metadata\">");t.b(t.t(t.f("socialcontext",c,p,0)));t.b("</p>\n");});c.pop();}t.b("  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_view_toggler": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"toggle-item-1 ");if(t.s(t.f("active1",c,p,1),c,p,0,36,42,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\" href=\"");t.b(t.v(t.f("route1",c,p,0)));t.b("\">");t.b(t.v(t.f("title1",c,p,0)));t.b("</a> / <a class=\"toggle-item-2 ");if(t.s(t.f("active2",c,p,1),c,p,0,127,133,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\" href=\"");t.b(t.v(t.f("route2",c,p,0)));t.b("\">");t.b(t.v(t.f("title2",c,p,0)));t.b("</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_whale_end": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-stream-whale-end stream-whale-end stream-placeholder centered-placeholder\">\n  <div class=\"stream-end-inner\">\n    <h2 class=\"title\">");t.b(t.t(t.f("stream_fail_header",c,p,0)));t.b("</h2>\n    <p>\n      Twitter may be over capacity or experiencing a momentary hiccup. <a href=\"#\" class=\"try-again-after-whale\">Try again</a> or visit <a target=\"_blank\" href=\"");t.b(t.v(t.f("status_path",c,p,0)));t.b("\">Twitter Status</a> for more information.\n    </p>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"subscribe_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"btn subscribe-btn not-subscribed\" href=\"#\">\n  <div class=\"subscribe-text\">\n    <i class=\"subscribe\"></i>\n    Subscribe\n  </div>\n  <div class=\"remove-text\">\n    Unsubscribe from list\n  </div>\n</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"suspended_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module module-banner\">\n  <div class=\"flex-module\">\n    <div id=\"account-suspended\" class=\"first-banner-row\">\n      <span class=\"title\">Your account (@");t.b(t.v(t.f("screen_name",c,p,0)));t.b(") is currently suspended.</span>\n      <span>For more information, please visit <a href=\"");t.b(t.v(t.f("suspended_help_path",c,p,0)));t.b("\">Suspended Accounts</a>.</span>\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"suspended_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_dm",c,p,1),c,p,0,10,78,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Your account is suspended and is not permitted to send messages.\n");});c.pop();}if(!t.s(t.f("is_dm",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("is_tweet",c,p,1),c,p,0,115,185,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    Your account is suspended and is not permitted to send Tweets.\n");});c.pop();}if(!t.s(t.f("is_tweet",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("is_follow",c,p,1),c,p,0,233,308,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      Your account is suspended and is not permitted to follow users.\n");});c.pop();}if(!t.s(t.f("is_follow",c,p,1),c,p,1,0,0,"")){t.b("      Your account is suspended and is not permitted to perform this action.\n");};};};t.b("<a href=\"");t.b(t.v(t.f("suspended_learn_more_path",c,p,0)));t.b("\" target=\"_blank\" class=\"learn-more\">Learn more</a>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"suspended_user_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"content-narrow\">\n  <div class=\"error-page error-403 clearfix\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,103,305,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <h1 class=\"heading\">Account suspended</h1>\n      <p class=\"lead\">The profile you are trying to view has been suspended.</p>\n      <p><a href=\"");t.b(t.v(t.f("home_path",c,p,0)));t.b("\">&larr; Go to the homepage</a></p>\n");});c.pop();}t.b("  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_autocomplete_dropdown": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"dropdown-menu autocomplete-results\">\n  <li class=\"dropdown-link dropdown-account template-row autocomplete-item\">\n    <img width=\"24\" height=\"24\" class=\"avatar size24\">\n    <strong class=\"fullname\"></strong>\n    <span class=\"pretty-link\"><s>@</s><b class=\"username\"></b></span>\n  </li>\n</ul>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_dm_box": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form class=\"dm-tweetbox tweet-form\">\n  <div class=\"tweet-content\">\n");if(t.s(t.f("with_unique_id",c,p,1),c,p,0,91,257,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <label class=\"hidden-elements\" for=\"tweet-box-");t.b(t.v(t.f("unique_id",c,p,0)));t.b("\">Tweet text</label>\n      <textarea id=\"tweet-box-");t.b(t.v(t.f("unique_id",c,p,0)));t.b("\" class=\"tweet-box\"></textarea>\n");});c.pop();}t.b("  </div>\n  <div class=\"tweet-button\">\n    <span class=\"spinner\"></span>\n    <span class=\"tweet-counter\">140</span>\n    <button class=\"btn tweet-action primary-btn disabled\" type=\"submit\">Send message</button>\n  </div>\n  <div class=\"dm-delete-confirm js-dm-delete-confirm\">\n");t.b(t.rp("direct_message_delete_confirm0",c,p,"    "));t.b("  </div>\n</form>");return t.fl(); }, partials: {"direct_message_delete_confirm0": {name:"direct_message_delete_confirm"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_layout": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<!DOCTYPE html>\n<html lang=\"");t.b(t.v(t.f("lang",c,p,0)));t.b("\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n    <meta charset=\"utf-8\">\n\n    \n    <script>document.domain='twitter.com'</script>\n\n");if(t.s(t.f("content_view",c,p,1),c,p,0,221,442,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("resolve_inline_redirects",c,p,1),c,p,0,257,408,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <script>\n      (function() {\n        var events = ");t.b(t.t(t.f("active_events",c,p,0)));t.b(";\n        ");t.b(t.t(t.f("resolve_inline_redirects",c,p,0)));t.b("\n" + i);t.b("      }());\n      </script>\n");});c.pop();}});c.pop();}t.b("\n" + i);if(t.s(t.f("current_user",c,p,1),c,p,0,482,575,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("core_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\">\n");});c.pop();}if(!t.s(t.f("current_user",c,p,1),c,p,1,0,0,"")){t.b("      <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("core_logged_out_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\">\n");};t.b("\n" + i);if(t.s(t.f("content_view",c,p,1),c,p,0,758,921,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("include_more_css_early",c,p,1),c,p,0,792,889,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("more_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\">\n");});c.pop();}});c.pop();}t.b("\n" + i);if(t.s(t.f("content_view",c,p,1),c,p,0,961,1111,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("theme_user",c,p,1),c,p,0,983,1039,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_css_t10",c,p,"        "));t.b(t.rp("bg_img_css1",c,p,"        "));});c.pop();}t.b("\n" + i);t.b("      <title>");t.b(t.v(t.f("env_warning",c,p,0)));t.b(t.v(t.f("page_title",c,p,0)));t.b("</title>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("current_user",c,p,1),c,p,1,0,0,"")){t.b("      <meta name=\"description\" content=\"Instantly connect to what's most important to you. Follow your friends, experts, favorite celebrities, and breaking news.\">\n");};t.b("\n" + i);if(t.s(t.f("dns_prefetch",c,p,1),c,p,0,1360,1410,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <link rel=\"dns-prefetch\" href=\"");t.b(t.v(t.d(".",c,p,0)));t.b("\">\n");});c.pop();}t.b("\n" + i);t.b("    <script>\n      ");t.b(t.t(t.f("ttft_boot_data",c,p,0)));t.b("\n" + i);t.b("      ");t.b(t.t(t.f("frame_busting_source",c,p,0)));t.b("\n" + i);t.b("    </script>\n\n");if(t.s(t.f("include_ie9_meta",c,p,1),c,p,0,1542,1634,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <link href=\"/favicons/favicon32x32.ico\" rel=\"shortcut icon\" type=\"image/x-icon\">\n");});c.pop();}if(!t.s(t.f("include_ie9_meta",c,p,1),c,p,1,0,0,"")){t.b("      <link href=\"/favicons/favicon.ico\" rel=\"shortcut icon\" type=\"image/x-icon\">\n");};t.b("\n" + i);t.b("    ");if(t.s(t.f("swift_action_queue",c,p,1),c,p,0,1818,1859,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<script>");t.b(t.t(t.f("swift_action_queue",c,p,0)));t.b("</script>");});c.pop();}t.b("\n");t.b("\n" + i);if(t.s(t.f("is_vit_layout",c,p,1),c,p,0,1906,2082,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_mobile",c,p,1),c,p,0,1927,2063,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <meta name=\"viewport\" id=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\">\n");});c.pop();}});c.pop();}t.b("\n" + i);t.b("  </head>\n  <body class=\"");if(t.s(t.f("content_view",c,p,1),c,p,0,2144,2164,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("body_class_names",c,p,0)));});c.pop();}t.b("\"\n");if(t.s(t.f("locale_is_rtl",c,p,1),c,p,0,2205,2224,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    dir=\"rtl\"\n");});c.pop();}t.b("    >\n    <div id=\"doc\" class=\"");if(t.s(t.f("content_view",c,p,1),c,p,0,2291,2341,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("route_name",c,p,1),c,p,0,2306,2326,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("route-");t.b(t.v(t.f("route_name",c,p,0)));});c.pop();}});c.pop();}t.b("\">\n");if(t.s(t.f("include_standard_chrome",c,p,1),c,p,0,2395,3094,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("t1_global_nav2",c,p,"        "));t.b("        <div id=\"page-outer\">\n          <div id=\"page-container\" class=\"");t.b(t.v(t.f("page_container_class",c,p,0)));t.b(" ");if(t.s(t.f("content_view",c,p,1),c,p,0,2537,2586,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("page_name",c,p,1),c,p,0,2551,2572,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("wrapper-");t.b(t.v(t.f("page_name",c,p,0)));});c.pop();}});c.pop();}t.b("\">\n");if(t.s(t.f("current_user",c,p,1),c,p,0,2635,3001,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("suspended",c,p,1),c,p,0,2664,2685,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("suspended_banner3",c,p,""));});c.pop();}if(!t.s(t.f("suspended",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("pending_email",c,p,1),c,p,0,2763,2787,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("verify_email_banner4",c,p,""));});c.pop();}if(t.s(t.f("current_bouncing",c,p,1),c,p,0,2843,2869,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("bouncing_email_banner5",c,p,""));});c.pop();}if(t.s(t.f("detached",c,p,1),c,p,0,2920,2946,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("detached_email_banner6",c,p,""));});c.pop();}};});c.pop();}t.b("            ");t.b(t.t(t.f("content_for_layout",c,p,0)));t.b("\n" + i);t.b("          </div>\n        </div>\n");});c.pop();}if(!t.s(t.f("include_standard_chrome",c,p,1),c,p,1,0,0,"")){t.b("        ");t.b(t.t(t.f("content_for_layout",c,p,0)));t.b("\n" + i);};if(t.s(t.f("track_ttft",c,p,1),c,p,0,3247,3476,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("content_view",c,p,1),c,p,0,3264,3459,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <script>\n        if(window.ttft){window.ttft.recordMilestone('page','");t.b(t.v(t.f("page_name",c,p,0)));t.b("');\n        window.ttft.recordMilestone('client_record_time',new Date().getTime())}\n      </script>\n");});c.pop();}});c.pop();}t.b("    </div>\n\n    <div class=\"modal-overlay\"></div>\n\n    <div class=\"hidden-elements\">\n      <div id=\"flash-preload\"></div>\n      <iframe class=\"tweet-post-iframe\" name=\"tweet-post-iframe\"></iframe>\n\n");if(t.s(t.f("include_tweet_dialog",c,p,1),c,p,0,3721,3816,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      \n      <div id=\"inline-reply-tweetbox\">\n");t.b(t.rp("swift_tweet_box7",c,p,"        "));t.b("      </div>\n");});c.pop();}t.b("    </div>\n\n");if(t.s(t.f("include_direct_message_dialog",c,p,1),c,p,0,3892,3925,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dialogs/dm_shell8",c,p,"      "));});c.pop();}t.b("\n" + i);if(t.s(t.f("include_tweet_dialog",c,p,1),c,p,0,3990,4028,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dialogs/tweet_dialog9",c,p,"      "));t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b(t.rp("dialogs/goto_user_dialog10",c,p,"    "));t.b("\n" + i);if(t.s(t.f("include_tweet_action_dialogs",c,p,1),c,p,0,4127,4205,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dialogs/retweet_dialog11",c,p,"      "));t.b(t.rp("dialogs/delete_tweet_dialog12",c,p,"      "));});c.pop();}t.b("\n" + i);t.b(t.rp("dialogs/keyboard_shortcuts_dialog13",c,p,"    "));t.b("\n" + i);if(t.s(t.f("include_geo_picker",c,p,1),c,p,0,4311,4559,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\n" + i);t.b("      \n      \n\n");if(!t.s(t.f("geo_enabled",c,p,1),c,p,1,0,0,"")){t.b("        <div id=\"geo-disabled-dropdown\">\n");t.b(t.rp("geo/disabled_dropdown14",c,p,"          "));t.b("        </div>\n");};t.b("\n" + i);t.b("      <div id=\"geo-enabled-dropdown\">\n");t.b(t.rp("geo/enabled_dropdown15",c,p,"        "));t.b("      </div>\n\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("include_profile_popup",c,p,1),c,p,0,4614,4742,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dialogs/profile_popup_container16",c,p,"      "));t.b(t.rp("dialogs/list_membership_dialog17",c,p,"      "));t.b(t.rp("dialogs/list_create_dialog18",c,p,"      "));});c.pop();}t.b("\n" + i);if(t.s(t.f("include_activity_popup",c,p,1),c,p,0,4801,4850,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dialogs/activity_popup_container19",c,p,"      "));});c.pop();}t.b("\n" + i);t.b(t.rp("dialogs/confirm_dialog20",c,p,"    "));t.b("\n" + i);if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b(t.rp("dialogs/signin_or_signup_dialog21",c,p,"      "));t.b(t.rp("dialogs/sms_codes22",c,p,"      "));};t.b("\n" + i);if(t.s(t.f("content_view",c,p,1),c,p,0,5044,6110,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("javascript_module",c,p,1),c,p,0,5073,6083,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        ");t.b(t.t(t.f("prerequisites",c,p,0)));t.b("\n" + i);t.b("        <script>\n          using.path = '");t.b(t.v(t.f("javascript_module_path",c,p,0)));t.b("';\n\n          ");t.b(t.t(t.f("loadrunner_aliases",c,p,0)));t.b("\n" + i);t.b("          ");t.b(t.t(t.f("setup_debug",c,p,0)));t.b("\n");t.b("\n" + i);t.b("          using(\n            '");t.b(t.v(t.f("javascript_module",c,p,0)));t.b("',\n            'core/jquery',\n            ");if(t.s(t.f("selenium",c,p,1),c,p,0,5343,5370,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("'app/utils/request_logger',");});c.pop();}t.b("\n" + i);t.b("          function(page, $");if(t.s(t.f("selenium",c,p,1),c,p,0,5423,5438,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(", requestLogger");});c.pop();}t.b(") {\n");if(t.s(t.f("selenium",c,p,1),c,p,0,5480,5587,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              window.requestLogger = requestLogger;\n              requestLogger.initialize();\n");});c.pop();}t.b("\n" + i);t.b("            page(");t.b(t.t(t.f("javascript_init_data",c,p,0)));t.b(");\n            window.__swift_loaded = true;\n            window.swiftActionQueue && window.swiftActionQueue.flush($);\n            $(document).trigger('uiSwiftLoaded');\n");if(t.s(t.f("track_ttft",c,p,1),c,p,0,5840,6029,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              window.ttft && window.ttft.recordMilestone('aq_empty_time',new Date().getTime());\n              using('app/utils/ttft',function(ttft){ttft.startAjaxTracking()});\n");});c.pop();}t.b("          });\n        </script>\n");});c.pop();}});c.pop();}t.b("    <script>");t.b(t.t(t.f("google_analytics_js",c,p,0)));t.b("</script>\n  </body>\n</html>\n");return t.fl(); }, partials: {"user_css_t10": {name:"user_css_t1"},"bg_img_css1": {name:"bg_img_css"},"t1_global_nav2": {name:"t1_global_nav"},"suspended_banner3": {name:"suspended_banner"},"verify_email_banner4": {name:"verify_email_banner"},"bouncing_email_banner5": {name:"bouncing_email_banner"},"detached_email_banner6": {name:"detached_email_banner"},"swift_tweet_box7": {name:"swift_tweet_box"},"dialogs/dm_shell8": {name:"dialogs/dm_shell"},"dialogs/tweet_dialog9": {name:"dialogs/tweet_dialog"},"dialogs/goto_user_dialog10": {name:"dialogs/goto_user_dialog"},"dialogs/retweet_dialog11": {name:"dialogs/retweet_dialog"},"dialogs/delete_tweet_dialog12": {name:"dialogs/delete_tweet_dialog"},"dialogs/keyboard_shortcuts_dialog13": {name:"dialogs/keyboard_shortcuts_dialog"},"geo/disabled_dropdown14": {name:"geo/disabled_dropdown"},"geo/enabled_dropdown15": {name:"geo/enabled_dropdown"},"dialogs/profile_popup_container16": {name:"dialogs/profile_popup_container"},"dialogs/list_membership_dialog17": {name:"dialogs/list_membership_dialog"},"dialogs/list_create_dialog18": {name:"dialogs/list_create_dialog"},"dialogs/activity_popup_container19": {name:"dialogs/activity_popup_container"},"dialogs/confirm_dialog20": {name:"dialogs/confirm_dialog"},"dialogs/signin_or_signup_dialog21": {name:"dialogs/signin_or_signup_dialog"},"dialogs/sms_codes22": {name:"dialogs/sms_codes"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_photo_selector": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"photo-selector\">\n  <button class=\"btn\" type=\"button\" disabled=\"true\">Choose file</button>\n  <span class=\"photo-file-name\">No file selected</span>\n  <div class=\"image-selector\">\n    <input type=\"hidden\" name=\"media_file_name\" class=\"file-name\">\n    <input type=\"hidden\" name=\"media_data_empty\" class=\"file-data\">\n    <input type=\"file\" name=\"media_empty\" class=\"file-input\">\n    <div class=\"swf-container\"></div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_saved_searches": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"typeahead-items saved-searches-list\">\n  \n  <li class=\"saved-search-item search-item\"><a href=\"\" data-search-query=\"\" data-query-source=\"\" data-ds=\"saved_search\"><i class=\"generic-search\"></i></a></li>\n</ul>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_tweet_box": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form class=\"tweet-form ");if(!t.s(t.f("preexpand_tweetbox",c,p,1),c,p,1,0,0,"")){t.b("condensed");};t.b("\" method=\"post\" target=\"tweet-post-iframe\" action=\"//");t.b(t.v(t.f("upload_domain",c,p,0)));t.b("/i/tweet/create_with_media.iframe\" enctype=\"multipart/form-data\">\n  <input type=\"hidden\" name=\"post_authenticity_token\" class=\"auth-token\">\n  <input type=\"hidden\" name=\"iframe_callback\" class=\"iframe-callback\">\n  <input type=\"hidden\" name=\"in_reply_to_status_id\" class=\"in-reply-to-status-id\">\n  <input type=\"hidden\" name=\"impression_id\" class=\"impression-id\">\n\n  <div class=\"tweet-content\">\n\n");if(t.s(t.f("with_unique_id",c,p,1),c,p,0,565,745,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <label class=\"hidden-elements\" for=\"tweet-box-");t.b(t.v(t.f("unique_id",c,p,0)));t.b("\">Tweet text</label>\n      <textarea class=\"tweet-box\" name=\"status\" id=\"tweet-box-");t.b(t.v(t.f("unique_id",c,p,0)));t.b("\"></textarea>\n");});c.pop();}t.b("\n" + i);t.b(t.rp("swift_autocomplete_dropdown0",c,p,"    "));t.b("\n" + i);t.b("    \n    <div class=\"thumbnail-container\">\n      <div class=\"preview\">\n        <div class=\"dismiss\">\n          <i class=\"close\"></i>\n        </div>\n        <span class=\"filename\"></span>\n      </div>\n      <div class=\"preview-message\">Image will appear as a link</div>\n    </div>\n\n  </div>\n\n  <div class=\"tweet-box-extras\">\n\n");if(t.s(t.f("include_image_picker",c,p,1),c,p,0,1158,1557,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"photo-selector\">\n      <button class=\"btn\" type=\"button\" tabindex=\"-1\">\n        <i class=\"tweet-camera\"></i>\n      </button>\n      <div class=\"image-selector\">\n        <input type=\"hidden\" name=\"media_data_empty\" class=\"file-data\">\n        <input type=\"file\" name=\"media_empty\" class=\"file-input\" tabindex=\"-1\">\n        <div class=\"swf-container\"></div>\n      </div>\n    </div>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("include_geo_picker",c,p,1),c,p,0,1611,1642,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("geo/geo_picker1",c,p,"      "));});c.pop();}t.b("\n" + i);t.b("  </div>\n  <div class=\"tweet-button\">\n    <span class=\"link-message single\">Link will appear shortened</span>\n    <span class=\"link-message plural\">Links will appear shortened</span>\n    <span class=\"spinner\"></span>\n    <span class=\"tweet-counter\">140</span>\n    <button class=\"btn primary-btn tweet-action disabled\" type=\"button\">Tweet</button>\n  </div>\n</form>\n");return t.fl(); }, partials: {"swift_autocomplete_dropdown0": {name:"swift_autocomplete_dropdown"},"geo/geo_picker1": {name:"geo/geo_picker"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_typeahead_accounts": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"typeahead-accounts js-typeahead-accounts\">\n  <ul class=\"typeahead-items\">\n    \n    <li data-user-id=\"\" data-user-screenname=\"\" data-remote=\"true\" data-score=\"\" class=\"typeahead-item typeahead-account-item js-selectable\">\n      \n      <a data-query-source=\"typeahead_click\" data-search-query=\"\" data-ds=\"account\">\n        <img src=\"\" width=\"24\" height=\"24\" class=\"avatar size24\">\n        <span class=\"fullname\"></span>\n        <i class=\"verified hidden\"></i>\n        <span class=\"username\"><s>@</s><b></b></span>\n      </a>\n    </li>\n    <li class=\"js-selectable typeahead-accounts-shortcut js-shortcut\"><a href=\"\" data-search-query=\"\" data-query-source=\"typeahead_click\" data-shortcut=\"true\" data-ds=\"account_search\"></a></li>\n  </ul>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_typeahead_dropdown": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dropdown-menu typeahead\">\n  <div class=\"dropdown-caret\">\n    <div class=\"caret-outer\"></div>\n    <div class=\"caret-inner\"></div>\n  </div>\n  <div class=\"dropdown-inner js-typeahead-results\">\n");t.b(t.rp("swift_saved_searches0",c,p,"    "));t.b(t.rp("swift_typeahead_topics1",c,p,"    "));t.b(t.rp("swift_typeahead_accounts2",c,p,"    "));t.b("  </div>\n</div>");return t.fl(); }, partials: {"swift_saved_searches0": {name:"swift_saved_searches"},"swift_typeahead_topics1": {name:"swift_typeahead_topics"},"swift_typeahead_accounts2": {name:"swift_typeahead_accounts"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_anatomy_experiment": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"swift_typeahead_topics": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"typeahead-items topics-list\">\n  \n  <li class=\"topics-item search-item\"><a href=\"\" data-search-query=\"\" data-query-source=\"typeahead_click\" data-ds=\"topics\"><i class=\"generic-search\"></i></a></li>\n</ul>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_body": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<body class=\"t1 ");if(t.s(t.f("logged_in",c,p,1),c,p,0,30,71,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" logged-in user-style-");t.b(t.v(t.f("style_namespace",c,p,0)));});c.pop();}if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b(" logged-out ");if(t.s(t.f("no_script",c,p,1),c,p,0,125,137,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" front-page ");});c.pop();}t.b(" ");};t.b(" ");if(!t.s(t.f("abtest_lohp_video_experiment_258_any_bucket",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("t1_front_page_image_class",c,p,0)));};t.b(" ");if(t.s(t.f("abtest_lohp_video_experiment_258_video",c,p,1),c,p,0,336,359,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("front-image-intro-video");});c.pop();}t.b(" ");t.b(t.v(t.f("locale_css",c,p,0)));t.b(" ");t.b(t.v(t.f("ms_windows_class",c,p,0)));t.b("\"\n");if(t.s(t.f("locale_is_rtl",c,p,1),c,p,0,460,477,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    dir=\"rtl\"\n");});c.pop();}t.b(">\n  <div id=\"doc\">\n");t.b(t.rp("t1_global_nav0",c,p,"    "));t.b("    <div id=\"page-outer\">\n");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("home_page",c,p,1),c,p,0,607,645,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("t1_front_page1",c,p,"          "));});c.pop();}};t.b("      <div id=\"page-container\" class=\"wrapper\">\n        <div class=\"new-js-banners\"></div>\n");if(t.s(t.f("tweets",c,p,1),c,p,0,791,895,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <div id=\"page-node-");t.b(t.v(t.f("page_name_underscore",c,p,0)));t.b("\">\n");t.b(t.rp("page2",c,p,"            "));t.b("          </div>\n");});c.pop();}t.b("      </div>\n    </div>\n  </div>\n  <div class=\"twttr-dialog-wrapper\"></div>\n\n");if(t.s(t.f("include_more_css",c,p,1),c,p,0,1007,1082,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("include_more_css_early",c,p,1),c,p,1,0,0,"")){t.b(t.rp("more_css3",c,p,""));};});c.pop();}t.b("\n" + i);t.b(t.rp("javascript_includes4",c,p,"  "));t.b("</body>\n");return t.fl(); }, partials: {"t1_global_nav0": {name:"t1_global_nav"},"t1_front_page1": {name:"t1_front_page"},"page2": {name:"page"},"more_css3": {name:"more_css"},"javascript_includes4": {name:"javascript_includes"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_for_mockview_unit_test": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.v(t.f("happy_feet",c,p,0)));t.b("!");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_front_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"front-container ");if(t.s(t.f("front_page_full_signup_256",c,p,1),c,p,0,59,86,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("front-container-full-signup");});c.pop();}t.b("\" id=\"front-container\">\n  <noscript>\n    <div class=\"front-warning\">\n      <h3>Twitter.com makes heavy use of JavaScript</h3>\n      <p>If you cannot enable it in your browser's preferences, you may have a better experience on our <a href=\"http://m.twitter.com\">mobile site</a>.</p>\n    </div>\n  </noscript>\n\n  <div class=\"front-warning\" id=\"front-no-cookies-warn\">\n    <h3>Twitter.com makes heavy use of browser cookies</h3>\n    <p>Please enable cookies in your browser preferences before signing in.</p>\n  </div>\n\n");if(t.s(t.f("front_page_full_signup_256",c,p,1),c,p,0,665,779,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"front-bg\">\n    <img class=\"front-image\" src=\"");t.b(t.v(t.f("front_page_full_signup_256_image_url",c,p,0)));t.b("\">\n  </div>\n");});c.pop();}t.b("\n" + i);t.b("  <div class=\"front-card\">\n");if(!t.s(t.f("swift_events",c,p,1),c,p,1,0,0,"")){t.b("      <div class=\"front-welcome\">\n");if(!t.s(t.f("abtest_lohp_video_experiment_258_any_bucket",c,p,1),c,p,1,0,0,"")){t.b("          <div class=\"front-welcome-text\">\n            <h1>Welcome to Twitter.</h1>\n            <p>");if(!t.s(t.f("abtest_localized_tagline_loggedout_front_page_244_any_bucket",c,p,1),c,p,1,0,0,"")){t.b("Find out what&#8217;s happening, right now, with the people and organizations you care about.");};if(t.s(t.f("abtest_localized_tagline_loggedout_front_page_244_japan_localized",c,p,1),c,p,0,1344,1470,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Let's find out what is happening to your families and friends, things around you, and companies and brands you are interested.");});c.pop();}t.b("</p>\n          </div>\n");};t.b("      </div>\n");};t.b("\n" + i);if(t.s(t.f("swift_events",c,p,1),c,p,0,1676,1994,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("nascar_homepage",c,p,1),c,p,0,1703,1969,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <a href=\"/hashtag/nascar\">\n          <div class=\"front-welcome\">\n            <div class=\"front-welcome-text\">\n              <h1>Happening now: #NASCAR</h1>\n              <p>Every turn. Every Angle.</p>\n            </div>\n          </div>\n        </a>\n");});c.pop();}});c.pop();}t.b("\n" + i);if(t.s(t.f("front_page_full_signup_256_old_signup_form",c,p,1),c,p,0,2064,5238,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"front-signin js-front-signin\">\n      <form action=\"");t.b(t.v(t.f("sessions_path",c,p,0)));t.b("\" class=\"signin\" method=\"post\">\n        <div class=\"placeholding-input username\">\n          <input type=\"text\" class=\"text-input email-input\" name=\"session[username_or_email]\" title=\"Username or email\" autocomplete=\"on\">\n            <span class=\"placeholder\">Username or email</span>\n        </div>\n\n        <table class=\"flex-table password-signin\">\n          <tbody>\n            <tr>\n              <td class=\"flex-table-primary\">\n                <div class=\"placeholding-input password flex-table-form\">\n                  <input type=\"password\" class=\"text-input flex-table-input\" name=\"session[password]\" title=\"Password\">\n                  <span class=\"placeholder\">Password</span>\n                </div>\n              </td>\n              <td class=\"flex-table-secondary\">\n                <button type=\"submit\" class=\"submit btn primary-btn flex-table-btn js-submit\">Sign in</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n\n        <div class=\"remember-forgot\">\n          <label class=\"remember\">\n            <input type=\"checkbox\" value=\"1\" name=\"remember_me\">\n            <span>Remember me</span>\n          </label>\n          <span class=\"separator\">&middot;</span>\n          <a class=\"forgot\" href=\"");t.b(t.v(t.f("resend_password_path",c,p,0)));t.b("\">Forgot password?</a>\n        </div>\n\n");if(t.s(t.f("is_ssl",c,p,1),c,p,0,3472,3547,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <input type=\"hidden\" name=\"return_to_ssl\" value=\"true\">\n");});c.pop();}t.b("\n" + i);t.b("        <input type=\"hidden\" name=\"scribe_log\">\n        <input type=\"hidden\" name=\"redirect_after_login\" value=\"");t.b(t.v(t.f("redirect_after_login",c,p,0)));t.b("\">\n        <input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\"/>\n      </form>\n    </div>\n\n    <div class=\"front-signup js-front-signup\">\n      <h2><strong>New to Twitter?</strong> Sign up</h2>\n\n      <form action=\"");t.b(t.v(t.f("signup_path",c,p,0)));t.b("\" class=\"signup\" method=\"post\">\n        <div class=\"placeholding-input\">\n          <input type=\"text\" class=\"text-input\" autocomplete=\"off\" name=\"user[name]\" maxlength=\"20\">\n          <span class=\"placeholder\">Full name</span>\n        </div>\n        <div class=\"placeholding-input\">\n          <input type=\"text\" class=\"text-input email-input\" autocomplete=\"off\" name=\"user[email]\">\n          <span class=\"placeholder\">Email</span>\n        </div>\n        <div class=\"placeholding-input\">\n          <input type=\"password\" class=\"text-input\" name=\"user[user_password]\">\n          <span class=\"placeholder\">Password</span>\n        </div>\n\n        <input type=\"hidden\" value=\"");t.b(t.v(t.f("signup_source",c,p,0)));t.b("\" name=\"context\">\n        <input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\">\n        <button type=\"submit\" class=\"btn signup-btn\">\n          ");if(!t.s(t.f("abtest_japanese_signup_text_214_any_bucket",c,p,1),c,p,1,0,0,"")){t.b("Sign up for Twitter");};if(t.s(t.f("abtest_japanese_signup_text_214_registration_is_free1",c,p,1),c,p,0,4990,5006,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Twitterに登録する(無料)");});c.pop();}if(t.s(t.f("abtest_japanese_signup_text_214_registration_is_free2",c,p,1),c,p,0,5122,5132,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("ユーザー登録(無料)");});c.pop();}t.b("\n" + i);t.b("        </button>\n      </form>\n    </div>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("front_page_full_signup_256_old_signup_form",c,p,1),c,p,1,0,0,"")){t.b("    <div class=\"front-signup js-front-signup front_page_full_signup_256\">\n      <h2><strong>New to Twitter?</strong> Sign up</h2>\n      \n      <form id=\"phx-signup-form\" class=\"signup\" method=\"post\" action=\"");t.b(t.v(t.f("account_create_path",c,p,0)));t.b("\" data-front_page_full_signup_256=\"true\">\n        <fieldset class=\"textbox\">\n          <div class=\"name\">\n            <div class=\"placeholding-input holding\" data-fieldname=\"name\">\n              <input type=\"text\" class=\"text-input\" autocomplete=\"off\" name=\"user[name]\" maxlength=\"20\">\n              <span class=\"placeholder\">Full name</span>\n              <div class=\"sidetip\">\n                <p class=\"ok isaok\"></p>\n                <p class=\"blank invalid error js-user-tipsy\" title=\"A name is required!\" role=\"alert\"></p>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"email\">\n            <div class=\"placeholding-input holding js-user-tipsy\" data-fieldname=\"email\">\n              <input type=\"text\" class=\"text-input email-input\" autocomplete=\"off\" name=\"user[email]\">\n              <span class=\"placeholder\">Email</span>\n              <div class=\"sidetip\">\n                <p class=\"ok isaok\"></p>\n                <p class=\"checking\"></p>\n                <p class=\"invalid error js-user-tipsy\" title=\"Doesn't look like a valid email.\" role=\"alert\"></p>\n                <p class=\"blank error js-user-tipsy\" title=\"An email is required!\" role=\"alert\"></p>\n                <p class=\"taken error js-user-tipsy\" title=\"This email is already registered.\" role=\"alert\"></p>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"password\">\n            <div class=\"placeholding-input holding js-user-tipsy\" data-fieldname=\"password\">\n              <input type=\"password\" class=\"text-input\" name=\"user[user_password]\">\n              <span class=\"placeholder\">Password</span>\n              <div class=\"sidetip\">\n");if(t.s(t.f("password_error",c,p,1),c,p,0,7271,7374,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                <p class=\"active error js-user-tipsy\" title=\"");t.b(t.v(t.f("password_error",c,p,0)));t.b("\"></p>\n");});c.pop();}t.b("                <p class=\"perfect isaok\"></p>\n                <p class=\"ok isaok\"></p>\n                <p class=\"weak isaok\"></p>\n                <p class=\"weak error js-user-tipsy\" title=\"Password is not secure enough.\" role=\"alert\"></p>\n                <p class=\"obvious error js-user-tipsy\" title=\"Password is too obvious.\" role=\"alert\"></p>\n                <p class=\"invalid error js-user-tipsy\" title=\"Password must be at least 6 characters.\" role=\"alert\"></p>\n                <p class=\"blank error js-user-tipsy\" title=\"Password cannot be blank!\" role=\"alert\"></p>\n              </div>\n            </div>\n            <div class=\"score\"><span><b class=\"fill\"></b></span></div>\n          </div>\n\n          <div class=\"username\">\n            <div class=\"placeholding-input holding js-user-tipsy\" data-fieldname=\"username\">\n              <input type=\"text\" class=\"text-input\" name=\"user[screen_name]\">\n              <span class=\"placeholder\">Username</span>\n              <div class=\"sidetip\">\n");if(t.s(t.f("screen_name_error",c,p,1),c,p,0,8428,8534,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                <p class=\"active error js-user-tipsy\" title=\"");t.b(t.v(t.f("screen_name_error",c,p,0)));t.b("\"></p>\n");});c.pop();}t.b("                <p class=\"ok isaok js-user-tipsy\" title=\"Username is available. You can change it later.\"></p>\n                <p class=\"checking\"></p>\n                <p class=\"taken error js-user-tipsy\" title=\"This username is already taken!\" role=\"alert\"></p>\n                <p class=\"invalid error js-user-tipsy\" title=\"Invalid username! Alphanumerics only.\" role=\"alert\"></p>\n                <p class=\"blank error js-user-tipsy\" title=\"A username is required! You can change it later.\" role=\"alert\"></p>\n              </div>\n            </div>\n            <div class=\"suggestions\">Suggestions:&#32;<ul></ul></div>\n          </div>\n        </fieldset>\n\n        <div class=\"details\">\n          <div class=\"prompt rememberme\">\n            <label class=\"checkbox\">\n              <input type=\"checkbox\" checked=\"checked\" name=\"user[remember_me_on_signup]\" value=\"1\">\n              Keep me logged in\n            </label>\n          </div>\n\n");if(t.s(t.f("ask_cookie_personalization",c,p,1),c,p,0,9537,10083,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <div class=\"prompt optin\">\n            <label class=\"checkbox\">\n              <input type=\"checkbox\" ");if(!t.s(t.f("do_not_track",c,p,1),c,p,1,0,0,"")){t.b("checked=\"checked\"");};t.b(" name=\"user[use_cookie_personalization]\" value=\"1\">\n              <input type=\"hidden\" name=\"asked_cookie_personalization_setting\" value=\"1\">\n              Tailor Twitter based on my recent website visits. <a class=\"cookie-personalization-support\" href=\"https://support.twitter.com/articles/20169421\" target=\\\"_blank\\\">Learn more</a>.\n            </label>\n          </div>\n");});c.pop();}t.b("\n" + i);t.b("          <div class=\"terms\">\n            <p>By creating an account, you are agreeing to the <a href=\"/tos\" target=\"_blank\">Terms of Service</a> and <a href=\"/privacy\" target=\"_blank\">Privacy Policy</a>. Others will be able to find you by name, username or email. Your email will not be shown publicly. You can change your privacy settings at any time.</p>\n          </div>\n        </div>\n\n        <input type=\"submit\" class=\"button submit btn signup-btn\" value=\"Create my account\">\n\n        <input type=\"hidden\" name=\"scribe_log\">\n        <input type=\"hidden\" value=\"");t.b(t.v(t.f("signup_source",c,p,0)));t.b("\" name=\"context\">\n        <input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\">\n      </form>\n    </div>\n");};t.b("\n" + i);t.b("  </div>\n\n");t.b(t.rp("generic_footer0",c,p,"  "));t.b("\n" + i);if(t.s(t.f("remember_default",c,p,1),c,p,0,10945,11016,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div id=\"remember_default_checked\" style=\"display:none;\"></div>\n");});c.pop();}t.b("\n" + i);t.b("</div>\n");return t.fl(); }, partials: {"generic_footer0": {name:"generic_footer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_global_nav": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"push-loader\" id=\"pushStateSpinner\"></div>\n\n<div class=\"topbar js-topbar\">\n  <div id=\"banners\" class=\"js-banners\">\n    ");if(t.s(t.f("noscript_banner",c,p,1),c,p,0,150,191,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<noscript>");t.b(t.rp("noscript_banner0",c,p,""));t.b("</noscript>");});c.pop();}t.b("\n" + i);if(t.s(t.f("logged_in",c,p,1),c,p,0,230,251,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("slow_load_banner1",c,p,""));});c.pop();}if(t.s(t.f("became_user",c,p,1),c,p,0,286,309,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("became_user_banner2",c,p,""));});c.pop();}t.b("  </div>\n  <div class=\"global-nav\" data-section-term=\"top_nav\">\n    <div class=\"global-nav-inner\">\n      <div class=\"container\">\n");if(!t.s(t.f("current_user",c,p,1),c,p,1,0,0,"")){t.b("        \n");};if(t.s(t.f("current_user",c,p,1),c,p,0,535,3582,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <ul class=\"nav js-global-actions\" id=\"global-actions\">\n          <li id=\"global-nav-home\" class=\"home");if(t.s(t.f("content_view",c,p,1),c,p,0,662,745,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("home_page",c,p,1),c,p,0,676,731,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,700,707,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" active");});c.pop();}});c.pop();}});c.pop();}t.b("\" data-global-action=\"home\">\n          <a class=\"js-hover\" href=\"");t.b(t.v(t.f("home_path",c,p,0)));t.b("\" data-component-term=\"home_nav\" data-nav=\"home\">\n            <span class=\"new-wrapper\"><i class=\"nav-home\"></i><i class=\"nav-new\"></i></span> Home\n          </a>\n          </li>\n          <li class=\"people");if(t.s(t.f("content_view",c,p,1),c,p,0,1063,1152,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("connect_page",c,p,1),c,p,0,1080,1135,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,1104,1111,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" active");});c.pop();}});c.pop();}});c.pop();}t.b("\" data-global-action=\"connect\">\n          <a class=\"js-hover\" href=\"");if(t.s(t.f("enable_activity",c,p,1),c,p,0,1257,1278,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("interactions_path",c,p,0)));});c.pop();}if(!t.s(t.f("enable_activity",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("mentions_path",c,p,0)));};t.b("\" data-component-term=\"connect_nav\" data-nav=\"connect\">\n            <span class=\"new-wrapper\"><i class=\"nav-people\"></i><i class=\"nav-new\"></i></span> Connect\n          </a>\n          </li>\n          <li class=\"topics");if(t.s(t.f("content_view",c,p,1),c,p,0,1589,1680,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("discover_page",c,p,1),c,p,0,1607,1662,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,1631,1638,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" active");});c.pop();}});c.pop();}});c.pop();}t.b("\" data-global-action=\"discover\">\n          <a class=\"js-hover\" href=\"");t.b(t.v(t.f("discover_path",c,p,0)));t.b("\" data-component-term=\"discover_nav\" data-nav=\"discover\">\n            <span class=\"new-wrapper\"><i class=\"nav-topics\"></i><i class=\"nav-new\"></i></span> Discover\n          </a>\n          </li>\n        </ul>\n        <i class=\"bird-topbar-etched\"></i>\n\n        <div class=\"pull-right\">\n");if(!t.s(t.f("tweet_button_disabled",c,p,1),c,p,1,0,0,"")){t.b("          <div class=\"well topbar-tweet-btn\">\n            <button id=\"global-new-tweet-button\" type=\"button\" class=\"btn btn-tweet js-global-new-tweet js-hover js-tooltip\" data-placement=\"bottom\" data-component-term=\"new_tweet_button\" title=\"Compose new Tweet\">\n              <i class=\"nav-tweet\"></i>\n            </button>\n          </div>\n          <i class=\"topbar-divider\"></i>\n");};t.b("\n" + i);t.b("          <ul class=\"nav\">\n            <li class=\"me dropdown session js-session\" data-global-action=\"t1me\" id=\"user-dropdown\">\n            <a class=\"dropdown-toggle js-dropdown-toggle js-hover\" href=\"#\" id=\"user-dropdown-toggle\">\n              <span class=\"new-wrapper\"><i class=\"nav-me\"><span class=\"hidden-elements\">Settings and help</span></i><i class=\"nav-new\"></i></span> <span class=\"caret\"></span>\n            </a>\n");t.b(t.rp("t1_user_dropdown3",c,p,"            "));t.b("            </li>\n          </ul>\n\n          <i class=\"topbar-divider\"></i>\n");t.b(t.rp("t1_global_nav_search4",c,p,"          "));t.b("\n" + i);t.b("        </div>\n");if(t.s(t.f("is_vit_layout",c,p,1),c,p,0,3134,3557,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_mobile",c,p,1),c,p,0,3159,3534,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <div class=\"vit-onboarding-title\">\n            <span><i class=\"nav-home-vit\"></i></span>\n            Verification\n          </div>\n          <div class=\"vit-onboarding-nav\">\n            <button class=\"btn cancel skip hidden\" type=\"cancel\">Skip</button>\n            <button class=\"btn next primary-btn hidden\" type=\"submit\">Next</button>\n          </div>\n");});c.pop();}});c.pop();}});c.pop();}t.b("\n" + i);if(!t.s(t.f("current_user",c,p,1),c,p,1,0,0,"")){t.b("        <ul class=\"nav js-global-actions\">\n          <li class=\"home\" data-global-action=\"t1home\">\n");if(!t.s(t.f("custom_nav_title",c,p,1),c,p,1,0,0,"")){t.b("              <a class=\"nav-logo-link\" href=\"/\" data-nav=\"front\">\n                <i class=\"bird-topbar-blue\"></i>\n              </a>\n");};if(t.s(t.f("custom_nav_title",c,p,1),c,p,0,3959,4245,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <a href=\"/\" class=\"event-nav-link\" data-nav=\"front\">\n                <span><i class=\"bird-blue-topbar\"></i></span>\n                <span class=\"event-nav-title\">Twitter.com/</span><span class=\"event-nav-hashtag\">");t.b(t.v(t.f("custom_nav_title",c,p,0)));t.b("</span>\n              </a>\n");});c.pop();}t.b("          </li>\n        </ul>\n        <ul class=\"nav secondary-nav session-dropdown ");if(t.s(t.f("front_page_full_signup_256_dropdown_signin",c,p,1),c,p,0,4398,4440,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("front_page_full_signup_256_dropdown_signin");});c.pop();}t.b("\" id=\"session\">\n          <li class=\"dropdown js-session\">\n            <a class=\"dropdown-toggle dropdown-signin\" id=\"signin-link\" href=\"#\" data-nav=\"login\">\n              <small>Have an account?</small> Sign in <span class=\"caret\"></span>\n            </a>\n            <a class=\"dropdown-signup\" id=\"signup-link\" href=\"");t.b(t.v(t.f("signup_path",c,p,0)));t.b("?context=login\" data-nav=\"signup\">\n              <small>New to Twitter?</small><span class=\"emphasize\"> Join Today &raquo;</span>\n            </a>\n            <ul class=\"dropdown-menu dropdown-form\" id=\"signin-dropdown\">\n              <li class=\"dropdown-caret right\">\n                <span class=\"caret-outer\"></span>\n                <span class=\"caret-inner\"></span>\n              </li>\n              <li>\n");t.b(t.rp("t1_signin_form5",c,p,"                "));t.b("              </li>\n            </ul>\n          </li>\n        </ul>\n\n        \n");if(t.s(t.f("front_page_full_signup_256_inline_signin",c,p,1),c,p,0,5396,6596,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <div class=\"js-front-signin nav-signin\">\n            <form action=\"");t.b(t.v(t.f("sessions_path",c,p,0)));t.b("\" method=\"post\">\n              <ul class=\"nav secondary-nav\">\n                <li>\n                  <div class=\"placeholding-input\">\n                    <input type=\"text\" class=\"text-input email-input js-username-field\" name=\"session[username_or_email]\" autocomplete=\"on\">\n                    <span class=\"placeholder\">Username or email</span>\n                  </div>\n                </li>\n                <li>\n                  <div class=\"placeholding-input\">\n                    <input type=\"password\" class=\"text-input js-password-field\" name=\"session[password]\">\n                    <span class=\"placeholder\">Password</span>\n                  </div>\n                </li>\n                <li><button type=\"submit\" class=\"btn primary-btn submit\">Sign in</button></li>\n                <input type=\"hidden\" name=\"scribe_log\">\n                <input type=\"hidden\" name=\"redirect_after_login\" value=\"");t.b(t.v(t.f("redirect_after_login",c,p,0)));t.b("\">\n                <input type=\"hidden\" name=\"remember_me\" value=\"0\">\n              </ul>\n            </form>\n            <i class=\"topbar-divider\"></i>\n          </div>\n");});c.pop();}t.b("\n" + i);t.b("        <ul class=\"nav secondary-nav language-dropdown\">\n          <li class=\"dropdown js-language-dropdown\">\n            <a class=\"dropdown-toggle\" href=\"javascript:;\">\n              <small>Language:</small>\n              <span class=\"js-current-language\">");t.b(t.v(t.f("current_language_name",c,p,0)));t.b("</span>\n              <b class=\"caret\"></b>\n            </a>\n            <ul class=\"dropdown-menu\">\n              <li class=\"dropdown-caret right\">\n                <span class=\"caret-outer\"></span>\n                <span class=\"caret-inner\"></span>\n              </li>\n");if(t.s(t.f("dropdown_languages",c,p,1),c,p,0,7230,7386,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                <li><a href=\"?lang=");t.b(t.v(t.f("code",c,p,0)));t.b("\" data-lang-code=\"");t.b(t.v(t.f("code",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("localized_name",c,p,0)));t.b("\" class=\"js-language-link\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a></li>\n");});c.pop();}t.b("            </ul>\n            <div class=\"js-front-language\">\n              <form action=\"");t.b(t.v(t.f("change_locale_path",c,p,0)));t.b("\" class=\"language\" method=\"POST\">\n                <input type=\"hidden\" name=\"lang\">\n                <input type=\"hidden\" name=\"redirect\">\n                <input type=\"hidden\" name=\"authenticity_token\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\">\n              </form>\n            </div>\n          </li>\n        </ul>\n        \n");if(t.s(t.f("do_not_render_pctd_logged_out",c,p,1),c,p,0,7882,8785,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("phoenix_pctd",c,p,1),c,p,0,7908,8759,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <ul class=\"nav secondary-nav country-dropdown\">\n            <li class=\"dropdown js-country-dropdown\">\n              <a class=\"dropdown-toggle\" href=\"javascript:;\">\n                <small>Country:</small>\n                <span class=\"js-current-country\">");t.b(t.v(t.f("current_country_name",c,p,0)));t.b("</span>\n                <span class=\"caret\"></span>\n              </a>\n              <ul class=\"dropdown-menu\">\n                <li class=\"dropdown-caret right\">\n                  <span class=\"caret-outer\"></span>\n                  <span class=\"caret-inner\"></span>\n                </li>\n");if(t.s(t.f("dropdown_countries",c,p,1),c,p,0,8523,8673,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                  <li><a href=\"javascript:;\" data-country-code=\"");t.b(t.v(t.f("code",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"js-country-link\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a></li>\n");});c.pop();}t.b("              </ul>\n            </li>\n          </ul>\n");});c.pop();}});c.pop();}t.b("        <div class=\"pull-right\">\n");t.b(t.rp("t1_global_nav_search6",c,p,"          "));t.b("        </div>\n");};t.b("\n" + i);t.b("        \n        <a id=\"close-all-button\" class=\"close-all-tweets js-close-all-tweets\" href=\"#\" title=\"Close all open Tweets\">\n          <i class=\"nav-breaker\"></i>\n        </a>\n      </div>\n    </div>\n  </div>\n  <div class=\"alert-messages ");if(t.s(t.f("content_view",c,p,1),c,p,0,9186,9240,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("hide_message_drawer",c,p,1),c,p,0,9210,9216,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("hidden");});c.pop();}});c.pop();}t.b("\" id=\"message-drawer\">\n");if(t.s(t.f("content_view",c,p,1),c,p,0,9301,9332,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("message_drawer7",c,p,"      "));});c.pop();}t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"noscript_banner0": {name:"noscript_banner"},"slow_load_banner1": {name:"slow_load_banner"},"became_user_banner2": {name:"became_user_banner"},"t1_user_dropdown3": {name:"t1_user_dropdown"},"t1_global_nav_search4": {name:"t1_global_nav_search"},"t1_signin_form5": {name:"t1_signin_form"},"t1_global_nav_search6": {name:"t1_global_nav_search"},"message_drawer7": {name:"message_drawer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_global_nav_search": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form class=\"form-search js-search-form ");t.b(t.v(t.f("search_page_global_search_box_255_class",c,p,0)));t.b("\" action=\"");t.b(t.v(t.f("search_path",c,p,0)));t.b("\" id=\"global-nav-search\">\n  <span class=\"search-icon js-search-action\">\n    <i class=\"nav-search\" tabindex=\"0\"></i>\n  </span>\n  <label class=\"hidden-elements\" for=\"search-query\">Search</label>\n  <input class=\"search-input\" type=\"text\" id=\"search-query\" placeholder=\"");if(t.s(t.f("content_view",c,p,1),c,p,0,391,406,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("search_text",c,p,0)));});c.pop();}if(!t.s(t.f("content_view",c,p,1),c,p,1,0,0,"")){t.b("Search");};t.b("\" name=\"q\" autocomplete=\"off\" spellcheck=\"false\" tabindex=\"-1\">\n  <input disabled=\"disabled\" class=\"search-input search-hinting-input\" type=\"text\" id=\"search-query-hint\" autocomplete=\"off\" spellcheck=\"false\">\n");if(t.s(t.f("swift_typeahead",c,p,1),c,p,0,694,731,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("swift_typeahead_dropdown0",c,p,"    "));});c.pop();}t.b("</form>\n");return t.fl(); }, partials: {"swift_typeahead_dropdown0": {name:"swift_typeahead_dropdown"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_mock_js": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<script>\n\n$(document).ready(function() {\n\n  // Global nav\n  $('.global-nav .home a').attr('href', '/mockview?html=home.ss');\n  $('.global-nav .topics a').attr('href', '/mockview?html=discover.ss');\n  $('.global-nav .people a').attr('href', '/mockview?html=connect.ss');\n\n  // Make the global nav search bar do it's thing\n  $('.global-nav input').focus(function() {\n    $(this).addClass('focus'); // For IE7\n    $(this).parent().addClass('focus'); // For targeting the search icon on focus of input field\n  });\n  $('.global-nav input').blur(function() {\n    $(this).removeClass('focus'); // For IE7\n    $(this).parent().removeClass('focus'); // For targeting the search icon on focus of input field\n  });\n\n  var expandedTweet,\n  prevExpandedTweet,\n  nextExpandedTweet\n\n  // Hacky display of inline expansion\n  $('.stream-item .tweet').click(function(e) {\n    e.preventDefault();\n    expandedTweet = $(this).closest('.stream-item');\n    expandedTweet.toggleClass('open');\n    expandedTweet.find('.replies').slideToggle(300);\n    expandedTweet.find('.in-reply-to').slideToggle(300);\n    var expando = expandedTweet.find('.expanded-content');\n\n    if(!expandedTweet.hasClass('open')) {\n      expando.animate({ height: 0 })\n    } else {\n      expando.animate({ height: expando.children().height()+20 })\n    }\n\n    if(expandedTweet.hasClass('open')) {\n      expandedTweet.animate({\n        \"margin-top\" : \"10px\",\n        \"margin-bottom\" : \"10px\"\n      }, 150)\n    } else {\n      expandedTweet.animate({\n        \"margin-top\" : \"0px\",\n        \"margin-bottom\" : \"0px\"\n      }, 150)\n    }\n    prevExpandedTweet = expandedTweet\n      .prev()\n    nextExpandedTweet = expandedTweet\n      .next()\n    if(prevExpandedTweet.not('open') || prevExpandedTweet.not('before-expanded')) {\n      prevExpandedTweet.toggleClass('before-expanded')\n    }\n    if(nextExpandedTweet.not('open') || nextExpandedTweet.not('after-expanded')) {\n      nextExpandedTweet.toggleClass('after-expanded')\n    }\n  });\n\n  // Dropdowns\n  $('body').bind('click', function (e) {\n    $('.js-dropdown-toggle').parent().removeClass('open');\n    $('.combo-btn-toggle').parent().removeClass('open');\n  });\n  $('.dropdown-toggle').click(function (e) {\n    $(this).parent().toggleClass('open');\n    return false;\n  });\n\n  // Throwaway Extensible modal\n  $('[data-modal]').live('click', function(e) {\n    e.preventDefault();\n    var modalClass = $(this).attr('data-modal');\n    $('.'+modalClass).show();\n  });\n\n  // Use the js- class for this one\n  $('.js-new-tweet').live('click', function(e) {\n    e.preventDefault();\n    $('.new-tweet').show();\n  });\n\n  // Close modal\n  $('.modal .js-dismiss').click(function(e) {\n    e.preventDefault();\n    $(this).parents('.modal-overlay').hide();\n  });\n  // Ghetto esc key close for modals\n  document.onkeydown = function(evt) {\n    evt = evt || window.event;\n    if (evt.keyCode == 27) {\n      $('.modal-overlay').hide();\n    }\n  };\n\n  // Modal: adding/removing prople from lists\n  $('.membership label').click(function(e) {\n    e.preventDefault();\n    if ($(this).children('input').attr('checked')) {\n      $(this).children('input').attr('checked',false);\n      $(this).removeClass('checked');\n    } else {\n      $(this).children('input').attr('checked',true);\n      $(this).addClass('checked');\n    }\n  });\n\n  // Follow button dropdown\n  $('.follow-btn').live(\"click\", function(e) {\n    e.preventDefault();\n    $(this).toggleClass('following');\n    $(this).toggleClass('not-following');\n  });\n\n  // Follow button dropdown\n  $('.btn-user-actions').live(\"click\", function(e) {\n    e.preventDefault();\n    $(this).find('.btn-group-dropdown').toggleClass('open')\n  });\n\n  // Search button dropdown\n  $('.btn-search-actions').live(\"click\", function(e) {\n    e.preventDefault();\n    $(this).find('.btn-group-dropdown').toggleClass('open')\n  });\n\n  // Save button 'saved' state\n  $('.save-btn').click(function(e) {\n    e.preventDefault();\n    $(this).toggleClass('saved');\n    $(this).toggleClass('not-saved');\n  });\n\n});\n</script>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_mockview": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\"/>\n  <title>Mustache Template Viewer</title>\n\n  <link rel=\"stylesheet\" href=\"");t.b(t.v(t.f("t1_core_css_bundle",c,p,0)));t.b("\" type=\"text/css\" media=\"screen\" />\n\n  <script type=\"text/javascript\" src=\"/phoenix/external_resources/loadrunner.js\"></script>\n  <script type=\"text/javascript\" src=\"/phoenix/external_resources/loadrunner_plugin_signal.js\"></script>\n  <script type=\"text/javascript\" src=\"/phoenix/external_resources/loadrunner_plugin_json.js\"></script>\n\n  <script>\n    using.path = '/phoenix/js';\n\n    var twttr = {};\n\n    twttr.proto = window.location.protocol.match(/s\\:$/) ? 'https' : 'http';\n\n    twttr.domains = {\n      local: 'localhost.twitter.com:3000',\n      remote: 'api.localhost.twitter.com:3000'\n    };\n\n    twttr.hosts = {\n      local: twttr.proto + \"://\" + twttr.domains.local,\n      remote: twttr.proto + \"://\" + twttr.domains.remote\n    };\n\n    twttr.isSSL = function () {\n      return twttr.proto === 'https';\n    };\n\n    twttr.API = {\n      _requestCache: {\n        get: function(path) {\n          return {};\n        }\n      }\n    };\n\n    twttr.templates = {};\n\n    // Prevent overloading templates from bundles (they have #mockview stripped out of them)\n    twttr.isMockview = true;\n\n    twttr.development = true;\n\n    twttr.isT1 = true;\n\n    ");t.b(t.t(t.f("fake_console_js",c,p,0)));t.b("\n");t.b("\n" + i);t.b("    using('>decider', function() {\n      twttr.decider._updateFeatures({\n      });\n      signal('>deciderFeaturesFromBootstrap');\n    });\n\n    using('bundle/t1-core', function() {\n      // Overwrite the templates with all of them (even those excluded from the bundles)\n      // This has to be done after core has been loaded and 'run/defaultViews' has\n      // built the views for the core templates.  'multiGlobals/more_views' will build\n      // any remaining missing default views at the very end.\n      twttr.templates = ");t.b(t.t(t.f("json_all_server_side_templates",c,p,0)));t.b(";\n      using([\n        '/account/templates_t1_more.js',\n        'multiGlobals/more_views',\n        'multiGlobals/more_views_t1'],\n      function() {\n        var mockHtmls = ");t.b(t.t(t.f("json_all_mockview_htmls",c,p,0)));t.b(";\n        var mockFixtures = ");t.b(t.t(t.f("json_all_mockview_fixtures",c,p,0)));t.b(";\n        var mockJsons = ");t.b(t.t(t.f("json_all_mockview_jsons",c,p,0)));t.b(";\n        var $body = $(\"body\");\n\n        //sub in fixture data in mock JSONs\n        for (var name in mockJsons) {\n          var matches = mockJsons[name].match(/\\{\\{>.*?\\}\\}/g);\n          if (matches && matches.length) {\n            for (var i = 0; i < matches.length; i++) {\n              var fixtureName = matches[i].substr(3, matches[i].length - 5);\n              mockJsons[name] = mockJsons[name].split(matches[i]).join(mockFixtures[fixtureName]);\n            }\n          }\n        }\n\n        renderMustache(twttr.util.params().mustache) || renderHtml(twttr.util.params().html) || renderIndex();\n\n        twttr.themes.loadCurrentUserStyle();\n\n        function renderIndex() {\n          var $node = $(\"<div style='background-color: rgba(255,255,255,.9); width: 30%; padding: 30px; text-shadow: 0 1px 0 rgba(255,255,255,.5);' />\").appendTo($body);\n          appendList($node, \"HTML Simulations\", mockHtmls, 'html');\n          appendList($node, \"T1 Templates\", twttr.templates, 'mustache');\n        }\n\n        function appendList($node, title, items, paramName) {\n          var $list = $(\"<ul style='list-style-type:none; margin: 0 10px;'/>\");\n          var keys = [];\n          $.each(items, function(key, value) { keys.push(key); });\n          $.each(keys.sort(), function(i, key) {\n            var params = {};\n            params[paramName] = key;\n            var $a = $(\"<a />\").text(key).attr('href', '?' + $.param(params)).attr('target', '_blank');\n            $list.append($(\"<li />\").html($a));\n          });\n          $node.append($(\"<h2 style='margin: 10px 10px 0 10px;'/>\").text(title));\n          $node.append($list);\n        }\n\n        function renderMustache(mockViewMustache) {\n          var html = mustacheToHtmlOrNull(mockViewMustache);\n          if (html === null) {\n            return false;\n          } else {\n            replaceBody($(\"<div/>\").html(html));\n            return true;\n          }\n        }\n\n        function mustacheToHtmlOrNull(mustacheName, contextJson) {\n          if (mustacheName) {\n            var context = $.parseJSON(contextJson || mockJsons[mustacheName] || mockFixtures[mustacheName] || '{}');\n            // TODO: Remove this when nobody is making json wrapped in obj wrapped in an enigma\n            if (context.obj) {\n              context = context.obj;\n            }\n            // twttr.views.BaseAPI.attach will use either the attributes sub-object or\n            // the outer object as the context\n            if (context.attributes) {\n              context.attributes.is_mockview = true;\n            } else {\n              context.is_mockview = true;\n            }\n            var ViewClass = twttr.views[twttr.util.capitalize(twttr.util.camelize(mustacheName))];\n            if (ViewClass) {\n              return (new ViewClass(context)).html();\n            } else if (twttr.templates[mustacheName]) {\n              return Mustache.to_html(twttr.templates[mustacheName], context, twttr.templates);\n            }\n          }\n          return null;\n        }\n\n        function renderHtml(mockViewHtml) {\n          var html = mockHtmls[mockViewHtml];\n          if (!html) {\n            return false;\n          }\n          var $container = $(\"<div/>\").html(html);\n          $container.find(\"mustache\").each(function() {\n            var $mustache = $(this);\n            var src = $mustache.attr('src');\n            var json = $mustache.attr('json');\n            var context = $mustache.html() || mockJsons[json] || mockFixtures[json];\n\n            var content = mustacheToHtmlOrNull(src, context);\n            if (content === null) {\n              content = \"<div>Invalid &lt;mustache&gt; src attribute</div>\";\n            }\n            $mustache.replaceWith(content);\n          });\n          replaceBody($container);\n          return true;\n        }\n\n        function replaceBody($container) {\n          var $mockviewBody = $container.find(\"body\");\n          if ($mockviewBody.length === 1) {\n            $body.replaceWith($mockviewBody);\n          } else {\n            $body.empty().append($container.contents());\n          }\n        }\n      });\n    });\n  </script>\n\n</head>\n<body>\n</body>\n</html>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_signin_form": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form action=\"");t.b(t.v(t.f("sessions_path",c,p,0)));t.b("\" class=\"js-signin signin\" method=\"post\">\n");t.b(t.rp("t1_signin_form_textbox0",c,p,"  "));t.b(t.rp("t1_signin_form_subchck1",c,p,"  "));t.b("  <div class=\"divider\"></div>\n  <p>\n    <a class=\"forgot\" href=\"");t.b(t.v(t.f("resend_password_path",c,p,0)));t.b("\">Forgot password?</a><br />\n    <a class=\"mobile has-sms\" href=\"");t.b(t.v(t.f("mobile_complete_path",c,p,0)));t.b("\">Already using Twitter via text message?</a>\n  </p>\n</form>\n");return t.fl(); }, partials: {"t1_signin_form_textbox0": {name:"t1_signin_form_textbox"},"t1_signin_form_subchck1": {name:"t1_signin_form_subchck"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_signin_form_subchck": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<fieldset class=\"subchck\">\n  <label class=\"remember\">\n    <input type=\"checkbox\" value=\"1\" name=\"remember_me\" ");if(t.s(t.f("remember_checked",c,p,1),c,p,0,131,148,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=\"checked\"");});c.pop();}t.b(">\n    <span>Remember me</span>\n  </label>\n  <button type=\"submit\" class=\"btn submit\">Sign in</button>\n</fieldset>\n\n<input type=\"hidden\" name=\"scribe_log\">\n<input type=\"hidden\" name=\"redirect_after_login\" value=\"");t.b(t.v(t.f("redirect_after_login",c,p,0)));t.b("\">\n<input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\"/>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_signin_form_textbox": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<fieldset class=\"textbox\">\n  <label class=\"username js-username\">\n    <span>Username or email</span>\n    <input class=\"js-username-field email-input\" type=\"text\" name=\"session[username_or_email]\" autocomplete=\"on\">\n  </label>\n  <label class=\"password js-password\">\n    <span>Password</span>\n    <input class=\"js-password-field\" type=\"password\" value=\"\" name=\"session[password]\">\n  </label>\n</fieldset>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_signup": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<body class=\"t1 ");t.b(t.v(t.f("locale_css",c,p,0)));t.b(" logged-out ");t.b(t.v(t.f("ms_windows_class",c,p,0)));t.b("\"\n");if(t.s(t.f("locale_is_rtl",c,p,1),c,p,0,82,95,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  dir=\"rtl\"\n");});c.pop();}t.b(">\n  <div id=\"doc\" class=\"phx-signup\">\n");t.b(t.rp("t1_global_nav0",c,p,"    "));t.b("    <div id=\"page-outer\">\n      <div id=\"page-container\" class=\"wrapper\">\n        <div class=\"page-canvas\">\n          <div class=\"signup-wrapper\">\n");if(t.s(t.f("event",c,p,1),c,p,0,344,1382,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\n" + i);t.b("              <script type='text/javascript'>\n              var ebRand = Math.random()+'';\n              ebRand = ebRand * 1000000;\n              //<![CDATA[\n              document.write('<scr'+'ipt src=\"HTTPS://bs.serving-sys.com/BurstingPipe/ActivityServer.bs?cn=as&amp;ActivityID=200090&amp;rnd=' + ebRand + '\"></scr' + 'ipt>');\n              //]]>\n              </script>\n              <noscript>\n              <img width=\"1\" height=\"1\" style=\"border:0\" src=\"HTTPS://bs.serving-sys.com/BurstingPipe/ActivityServer.bs?cn=as&amp;ActivityID=200090&amp;ns=1\"/>\n              </noscript>\n\n              <h1>Join Twitter today.</h1>\n              <p>Complete signup now to follow top accounts for <strong>");t.b(t.v(t.f("event_hashtag",c,p,0)));t.b("</strong>.</p>\n              <div class=\"ambassador event-signup clearfix\">\n                ");if(t.s(t.f("top_people",c,p,1),c,p,0,1173,1332,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<img src=\"");if(t.s(t.f("is_ssl",c,p,1),c,p,0,1194,1221,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_image_url_https",c,p,0)));});c.pop();}if(!t.s(t.f("is_ssl",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("profile_image_url",c,p,0)));};t.b("\" class=\"avatar size48\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n");});c.pop();}t.b("              </div>\n\n");});c.pop();}if(!t.s(t.f("event",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("ambassadors_exist",c,p,1),c,p,0,1452,2408,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("follow_many",c,p,1),c,p,0,1485,1559,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                  <h1>It's your turn. Join Twitter.</h1>\n");});c.pop();}if(!t.s(t.f("follow_many",c,p,1),c,p,1,0,0,"")){t.b("                  <h1>Join Twitter today.</h1>\n");};t.b("\n" + i);t.b("                <div class=\"ambassador clearfix\">\n");if(t.s(t.f("ambassadors",c,p,1),c,p,0,1774,1972,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                    <img src=\"");if(t.s(t.f("is_ssl",c,p,1),c,p,0,1816,1843,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_image_url_https",c,p,0)));});c.pop();}if(!t.s(t.f("is_ssl",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("profile_image_url",c,p,0)));};t.b("\" class=\"avatar size48\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n");});c.pop();}if(t.s(t.f("follow_many",c,p,1),c,p,0,2023,2169,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                    <p>Complete signup now to receive updates from <strong>");t.b(t.v(t.f("first_ambassador_name",c,p,0)));t.b("</strong> and others. </p>\n");});c.pop();}if(!t.s(t.f("follow_many",c,p,1),c,p,1,0,0,"")){t.b("                    <p>Complete signup now to receive updates from <strong>");t.b(t.v(t.f("first_ambassador_name",c,p,0)));t.b("</strong>.</p>\n");};t.b("                </div>\n");});c.pop();}if(!t.s(t.f("ambassadors_exist",c,p,1),c,p,1,0,0,"")){t.b("                <h1>\n");if(t.s(t.f("user_found_by_device",c,p,1),c,p,0,2532,2592,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                  Complete your account.\n");});c.pop();}if(!t.s(t.f("user_found_by_device",c,p,1),c,p,1,0,0,"")){t.b("                  Join Twitter today.\n");};t.b("                </h1>\n");};};t.b("\n" + i);t.b(t.rp("signup_form1",c,p,"            "));t.b("          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n");t.b(t.rp("banned_passwords2",c,p,"  "));t.b("\n" + i);t.b("  <script type=\"text/javascript\">\n  twttr.loggedIn = false;\n");t.b(t.rp("mini_scribe3",c,p,"  "));t.b("  ");t.b(t.t(t.f("loadrunner_script",c,p,0)));t.b("\n" + i);t.b("  ");t.b(t.t(t.f("loadrunner_plugin_json",c,p,0)));t.b("\n" + i);t.b("  ");t.b(t.t(t.f("loadrunner_plugin_css",c,p,0)));t.b("\n" + i);t.b("  ");t.b(t.t(t.f("loadrunner_plugin_signal",c,p,0)));t.b("\n");t.b("\n" + i);t.b("  using.path = '");t.b(t.t(t.f("loadrunner_modpath",c,p,0)));t.b("';\n  using.autoLoad = ");t.b(t.t(t.f("loadrunner_autoload",c,p,0)));t.b(";\n");if(t.s(t.f("assets_from_cdn",c,p,1),c,p,0,3258,3310,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  using.bundles.push(");t.b(t.t(t.f("loadrunner_versions",c,p,0)));t.b(");\n");});c.pop();}t.b("  using('bundle/signup').load();\n  twttr.insertGAScriptElement();\n  </script>\n\n  <!--[if lte IE 6]>\n  <script>using('bundle/ie6').load();</script>\n  <![endif]-->\n\n</body>\n");return t.fl(); }, partials: {"t1_global_nav0": {name:"t1_global_nav"},"signup_form1": {name:"signup_form"},"banned_passwords2": {name:"banned_passwords"},"mini_scribe3": {name:"mini_scribe"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"t1_user_dropdown": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"dropdown-menu\">\n  <li class=\"dropdown-caret\">\n    <span class=\"caret-outer\"></span>\n    <span class=\"caret-inner\"></span>\n  </li>\n  \n  <li class=\"current-user\" data-name=\"profile\">\n");t.b(t.rp("mini_current_user0",c,p,"    "));t.b("  </li>\n\n  \n");if(t.s(t.f("contributor_account_info",c,p,1),c,p,0,262,924,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li class=\"dropdown-divider\"></li>\n");if(t.s(t.f("include_direct_message_dialog",c,p,1),c,p,0,340,560,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li class=\"messages\" data-name=\"messages\">\n      <a class=\"js-dm-dialog\" href=\"/#!/\" data-nav=\"messages\">\n        <span class=\"js-direct-message-count count\"></span>\n        Direct messages\n      </a>\n    </li>\n");});c.pop();}if(!t.s(t.f("include_direct_message_dialog",c,p,1),c,p,1,0,0,"")){t.b("    <li class=\"messages\" data-name=\"messages\">\n      <a href=\"/#!/inbox\" data-nav=\"messages\">Direct messages</a>\n    </li>\n");};t.b("    <li data-name=\"lists\"><a href=\"");t.b(t.v(t.f("lists_path",c,p,0)));t.b("\" data-nav=\"all_lists\">Lists</a></li>\n    <li class=\"dropdown-divider\"></li>\n");});c.pop();}t.b("\n" + i);t.b("  \n  <li><a href=\"");t.b(t.v(t.f("support_path",c,p,0)));t.b("\" data-nav=\"help_center\">Help</a></li>\n\n");if(!t.s(t.f("hide_keyboard_shortcuts_link",c,p,1),c,p,1,0,0,"")){t.b("    \n    <li>\n      <a href=\"#\" class=\"js-keyboard-shortcut-trigger\" data-nav=\"shortcuts\">\n        Keyboard shortcuts\n      </a>\n    </li>\n");};t.b("\n" + i);t.b("  \n");if(t.s(t.f("twitter_ads_link_url",c,p,1),c,p,0,1271,1405,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li><a href=\"");t.b(t.v(t.f("twitter_ads_link_url",c,p,0)));t.b("\" target=\"");t.b(t.v(t.f("twitter_ads_link_target",c,p,0)));t.b("\" data-nav=\"ads\">");t.b(t.v(t.f("twitter_ads_link_title",c,p,0)));t.b("</a></li>\n");});c.pop();}t.b("\n" + i);t.b("  \n");if(t.s(t.f("is_translator",c,p,1),c,p,0,1455,1542,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li><a href=\"");t.b(t.v(t.f("translation_tool_path",c,p,0)));t.b("\" data-nav=\"translate\">Translate</a></li>\n");});c.pop();}t.b("\n" + i);t.b("  \n");if(t.s(t.f("contributor_account_info",c,p,1),c,p,0,1596,1741,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_admin",c,p,1),c,p,0,1614,1725,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li class=\"admin-panel-link\"><a href=\"");t.b(t.v(t.f("admin_home_path",c,p,0)));t.b("\" title=\"Admin panel\">Admin panel</a></li>\n");});c.pop();}});c.pop();}t.b("\n" + i);t.b("  \n");if(t.s(t.f("contributor_account_info",c,p,1),c,p,0,1806,3045,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("can_contribute",c,p,1),c,p,0,1830,3023,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li class=\"dropdown-divider\"></li>\n      <li class=\"label\">Switch accounts</li>\n      \n      <li class=\"contributors\">\n        <div class=\"contributors-inner\">\n");if(t.s(t.f("is_contributing",c,p,1),c,p,0,2027,2488,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("real_identity",c,p,1),c,p,0,2058,2459,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <span class=\"contributor-account-link\">\n                <a class=\"dropdown-link contributor-link\" href=\"/account_switch/destroy\">\n                  <img class=\"avatar size20\" src=\"");if(t.s(t.f("is_ssl",c,p,1),c,p,0,2264,2291,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_image_url_https",c,p,0)));});c.pop();}if(!t.s(t.f("is_ssl",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("profile_image_url",c,p,0)));};t.b("\" alt=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n                  ");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);t.b("                </a>\n              </span>\n");});c.pop();}});c.pop();}if(t.s(t.f("contributable_accounts",c,p,1),c,p,0,2546,2964,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <span class=\"contributor-account-link\">\n              <a class=\"dropdown-link contributor-link\" class=\"contributor-link\" href=\"/account_switch/create/");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n                <img class=\"avatar size20\" src=\"");if(t.s(t.f("is_ssl",c,p,1),c,p,0,2777,2804,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_image_url_https",c,p,0)));});c.pop();}if(!t.s(t.f("is_ssl",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("profile_image_url",c,p,0)));};t.b("\" alt=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n                ");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);t.b("              </a>\n            </span>\n");});c.pop();}t.b("        </div>\n      </li>\n");});c.pop();}});c.pop();}t.b("  <li class=\"dropdown-divider\"></li>\n\n");if(t.s(t.f("can_access_oldtwitter",c,p,1),c,p,0,3141,3610,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("is_contributing",c,p,1),c,p,1,0,0,"")){t.b("    <li>\n      <form method=\"post\" action=\"");t.b(t.v(t.f("turn_phx_off_path",c,p,0)));t.b("\" class=\"turn-phx-off-form\">\n        <input type=\"hidden\" name=\"setting\" value=\"false\">\n        <input type=\"hidden\" name=\"format\" value=\"html\">\n        <input type=\"hidden\" value=\"\" name=\"authenticity_token\" class=\"authenticity_token\">\n        <button type=\"submit\" class=\"dropdown-link disable-phx\">Switch to Old Twitter</button>\n      </form>\n    </li>\n");};});c.pop();}t.b("\n" + i);t.b("  \n");if(t.s(t.f("contributor_account_info",c,p,1),c,p,0,3672,3990,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("is_contributing",c,p,1),c,p,1,0,0,"")){t.b("      <li><a href=\"");t.b(t.v(t.f("settings_path",c,p,0)));t.b("\" data-nav=\"settings\">Settings</a></li>\n");};if(t.s(t.f("is_contributing",c,p,1),c,p,0,3823,3967,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li class=\"label\">\n        <span class=\"settings-disabled\" title=\"Settings disabled while contributing.\">Settings</span>\n      </li>\n");});c.pop();}});c.pop();}t.b("\n");t.b("\n" + i);t.b("  \n  <li>\n    <a class=\"js-signout-button\" id=\"signout-button\" href=\"#\" data-nav=\"logout\">Sign out</a>\n    <form class=\"dropdown-link-form signout-form\" id=\"signout-form\" action=\"");t.b(t.v(t.f("logout_action_path",c,p,0)));t.b("\" method=\"POST\">\n      <input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\" class=\"authenticity_token\">\n      <input type=\"hidden\" name=\"reliability_event\" class=\"js-reliability-event\">\n      <input type=\"hidden\" name=\"scribe_log\">\n    </form>\n  </li>\n\n</ul>\n");return t.fl(); }, partials: {"mini_current_user0": {name:"mini_current_user"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"the_grid": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"the-grid\">\n<div class=\"grid-bottom\"></div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"thumbnail": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"media-thumbnail\" style=\"width:");t.b(t.v(t.f("width",c,p,0)));t.b("px; height:");t.b(t.v(t.f("height",c,p,0)));t.b("px; line-height:");t.b(t.v(t.f("lineHeight",c,p,0)));t.b("px;\">\n  <div class='thumbnail-wrapper' data-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">\n  </div>\n</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"thumbnail_facet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"media-thumbnail\" style=\"width:");t.b(t.v(t.f("width",c,p,0)));t.b("px; height:");t.b(t.v(t.f("height",c,p,0)));t.b("px; line-height:");t.b(t.v(t.f("lineHeight",c,p,0)));t.b("px;\">\n  <div class='thumbnail-wrapper' data-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">\n  </div>\n  <i class=\"play\"></i>\n</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"thumbnail_viewer": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"thumbnail-viewer\">\n  <a href=\"#\">\n    <div class=\"thumbnail-viewer-nav thumbnail-viewer-prev\"><span class=\"thumbnail-viewer-button thumbnail-viewer-back-button\"></span></div>\n  </a>\n  <div class=\"thumbnail-viewer-container js-thumbnail-viewer-container\">\n    <div class=\"thumbnail-viewer-images js-thumbnail-viewer-images\"></div>\n  </div>\n  <a href=\"#\">\n    <div class=\"thumbnail-viewer-nav thumbnail-viewer-next\"><span class=\"thumbnail-viewer-button thumbnail-viewer-next-button\"></span></div>\n  </a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"thumbnail_viewer_facet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-thumbnail-viewer-container media-row media-videos\">\n  <div class=\"js-thumbnail-viewer-images\"></div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"timeline": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("timeline",c,p,1),c,p,0,13,793,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"stream-container\"\n    ");if(t.s(t.f("tweet_pagination",c,p,1),c,p,0,71,124,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-max-id=\"");t.b(t.v(t.f("max_id",c,p,0)));t.b("\" data-since-id=\"");t.b(t.v(t.f("since_id",c,p,0)));t.b("\"");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("cursor_pagination",c,p,1),c,p,0,172,196,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-cursor=\"");t.b(t.v(t.f("cursor",c,p,0)));t.b("\"");});c.pop();}t.b(">\n    <div class=\"stream ");if(t.s(t.f("page_name_underscore",c,p,1),c,p,0,268,299,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("page_name_underscore",c,p,0)));t.b("-stream");});c.pop();}t.b("\">\n      <div class=\"stream-items\" id=\"stream-items-id\">");t.b(t.t(t.f("items_html",c,p,0)));t.b("</div>\n      <div class=\"stream-footer\">");t.b(t.rp("timeline_end0",c,p,""));t.b("</div>\n      <div class=\"stream-fail-container\">\n");t.b(t.rp("stream_whale_end1",c,p,"        "));t.b("      </div>\n    </div>\n  </div>\n");if(t.s(t.f("tweet_spam_experiment_enabled",c,p,1),c,p,0,601,633,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("stream_tweet_hidden2",c,p,"    "));});c.pop();}if(t.s(t.f("include_flag_confirmation_dialog",c,p,1),c,p,0,707,755,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("dialogs/sensitive_flag_confirmation3",c,p,"    "));});c.pop();}});c.pop();}return t.fl(); }, partials: {"timeline_end0": {name:"timeline_end"},"stream_whale_end1": {name:"stream_whale_end"},"stream_tweet_hidden2": {name:"stream_tweet_hidden"},"dialogs/sensitive_flag_confirmation3": {name:"dialogs/sensitive_flag_confirmation"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"timeline_account_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<h2><span class=\"dashboard-component-title\">Follow the people in @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("&rsquo;s timeline</span></h2>\n<ul></ul>\n\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"timeline_end": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='timeline-end ");if(t.s(t.f("has_items",c,p,1),c,p,0,39,48,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("has-items");});c.pop();}t.b(" ");if(t.s(t.f("has_more_items",c,p,1),c,p,0,82,96,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("has-more-items");});c.pop();}t.b("'>\n");t.b(t.rp("stream_end0",c,p,"  "));t.b(t.rp("stream_loading1",c,p,"  "));t.b("</div>");return t.fl(); }, partials: {"stream_end0": {name:"stream_end"},"stream_loading1": {name:"stream_loading"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tipsy": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tooltip\">\n  <b>\n    ");t.b(t.v(t.f("title",c,p,0)));t.b("\n" + i);t.b("  </b>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"too_long_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_dm",c,p,1),c,p,0,10,82,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Your message was over 140 characters. You'll have to be more clever.\n");});c.pop();}if(!t.s(t.f("is_dm",c,p,1),c,p,1,0,0,"")){t.b("  Your Tweet was over 140 characters. You'll have to be more clever.\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"too_long_list_description_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Oops! List descriptions cannot exceed 100 characters.\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"too_long_list_name_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Oops! List names cannot exceed 25 characters.\n<a href=\"");t.b(t.v(t.f("list_name_error_learn_more_path",c,p,0)));t.b("\" target=\"_blank\" class=\"learn-more\">Learn more</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"too_many_lists_for_user_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Oops! You cannot have more than ");t.b(t.v(t.f("max_lists",c,p,0)));t.b(" lists.");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"top_content": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-content-top\"></div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"top_people_stream_end": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"stream-end\">\n  <a class=\"js-full-results-link full-results-link\" href=\"#\" data-query=\"");t.b(t.v(t.f("query",c,p,0)));t.b("\">Show all results</a>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tos_scroller": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"scroller\">\n  <p class=\"header\">By clicking the button, you agree to the terms below:</p>\n  <div class=\"import\"> ");t.b(t.t(t.f("tos_html",c,p,0)));t.b(" </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"trend_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"js-trend-item ");if(t.s(t.f("is_event",c,p,1),c,p,0,38,49,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("event-trend");});c.pop();}t.b(" ");if(t.s(t.f("promoted_content",c,p,1),c,p,0,84,98,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("promoted-trend");});c.pop();}t.b("\" data-trend-name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" ");if(t.s(t.f("promoted_content",c,p,1),c,p,0,169,215,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-promoted-trend-id=\"");t.b(t.v(t.f("promoted_trend_id",c,p,0)));t.b("\"");});c.pop();}t.b(">\n");if(t.s(t.f("is_sponsored",c,p,1),c,p,0,257,592,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a class=\"promoted pretty-link\" href=\"");t.b(t.v(t.f("trend_search_path",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\"><b>");t.b(t.v(t.f("name",c,p,0)));t.b("</b> <span class=\"with-icn js-disclosure js-tooltip\" title=\"");if(t.s(t.f("promoted_content",c,p,1),c,p,0,459,478,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("disclosure_text",c,p,0)));});c.pop();}t.b("\"><i class=\"");t.b(t.v(t.f("promoted_badge_class",c,p,0)));t.b("\"></i><b class=\"promoted-text\">Promoted</b></span></a>\n");});c.pop();}if(t.s(t.f("is_event",c,p,1),c,p,0,625,879,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a class=\"pretty-link\" href=\"");t.b(t.v(t.f("trend_search_path",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\"><b>");t.b(t.v(t.f("name",c,p,0)));t.b("</b> <span class=\"with-icn js-disclosure js-tooltip\"><i class=\"");t.b(t.v(t.f("event_class",c,p,0)));t.b("\"></i><b class=\"promoted-text\">");t.b(t.v(t.f("event_title",c,p,0)));t.b("</b></span></a>\n");});c.pop();}if(!t.s(t.f("is_sponsored",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("is_event",c,p,1),c,p,1,0,0,"")){t.b("      <a href=\"");t.b(t.v(t.f("trend_search_path",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n");};};t.b("</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"trends_dialog_breadcrumbs": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("decider_personalized_trends",c,p,1),c,p,0,32,219,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_personalized",c,p,1),c,p,0,55,133,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    If you want to stop seeing tailored Trends, choose a new location now.\n");});c.pop();}if(!t.s(t.f("is_personalized",c,p,1),c,p,1,0,0,"")){t.b("    Trends set to:\n");};});c.pop();}if(t.s(t.f("breadcrumbs",c,p,1),c,p,0,268,892,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("decider_personalized_trends",c,p,1),c,p,0,303,616,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_last",c,p,1),c,p,0,320,426,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <strong class=\"trend-breadcrumb-location selected\">");t.b(t.v(t.f("name",c,p,0)));t.b(" <i class=\"checkmark\"></i></strong>\n");});c.pop();}if(!t.s(t.f("is_last",c,p,1),c,p,1,0,0,"")){t.b("      <a href=\"#\" class=\"trend-breadcrumb-location js-trend-link\" data-woeid=\"");t.b(t.v(t.f("woeid",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n      <span class=\"separator\">/</span>\n");};});c.pop();}if(!t.s(t.f("decider_personalized_trends",c,p,1),c,p,1,0,0,"")){t.b("    <a href=\"#\" class=\"trend-breadcrumb-location js-trend-link\" data-woeid=\"");t.b(t.v(t.f("woeid",c,p,0)));t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n");if(!t.s(t.f("is_last",c,p,1),c,p,1,0,0,"")){t.b("      <span class=\"separator\">/</span>\n");};};});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"trends_dialog_footer": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<button type=\"button\" class=\"btn select-personalized\">Get tailored Trends</button>\n<button type=\"button\" class=\"btn primary-btn done\">Done</button>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"trends_inner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"flex-module-header\">\n  \n  <h3>\n    <span class=\"js-trend-location\">\n");if(t.s(t.f("location",c,p,1),c,p,0,99,127,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        ");t.b(t.v(t.f("location",c,p,0)));t.b("\n" + i);});c.pop();}if(!t.s(t.f("location",c,p,1),c,p,1,0,0,"")){t.b("        Worldwide trends\n");};t.b("    </span>\n  </h3>\n  <small>&middot; <a href=\"#\" data-modal=\"change-trends\" class=\"change-trends js-trend-toggle\">Change</a></small>\n</div>\n<div class=\"flex-module-inner");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,400,418,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" pre-rendered-stub");});c.pop();}t.b("\">\n  <ul class=\"trend-items js-trends\">\n");if(t.s(t.f("trends",c,p,1),c,p,0,497,524,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("trend_item0",c,p,"      "));});c.pop();}t.b("  </ul>\n</div>\n</div>");return t.fl(); }, partials: {"trend_item0": {name:"trend_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"trends_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"trends-page");if(t.s(t.f("decider_local_trends",c,p,1),c,p,0,48,68,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" trends-page-loading");});c.pop();}t.b("\">\n");if(!t.s(t.f("decider_local_trends",c,p,1),c,p,1,0,0,"")){t.b("    <div class=\"trends-disabled\">\n      Sorry, local trends are temporarily unavailable.\n    </div>\n");};t.b("  <div class=\"logged-out\">\n    <div class=\"bottompart\" />\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"trends_personalized_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"trends-personalized content-placeholder\">\n  <h2 class=\"title\">Trends tailored just for you.</h2>\n  <p>Trends offer a unique way to get closer to what you care about. Trends are tailored for you based on your location and who you follow.</p>\n  <p class=\"placeholder-actions\">\n    <button type=\"button\" class=\"btn customize-by-location\">Change</button>\n    <button type=\"button\" class=\"btn primary-btn done\">Keep tailored Trends</button>\n  </p>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_activity": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(!t.s(t.f("is_activity_empty",c,p,1),c,p,1,0,0,"")){t.b("<div class='tweet-activity-lists clearfix'>\n\n");if(!t.s(t.f("is_favorites_empty",c,p,1),c,p,1,0,0,"")){t.b("  <div class='activity-list-container favorites'>\n    <b class=\"type\" title=\"Who favorited this Tweet\"><i></i></b>\n    ");t.b(t.t(t.f("favorites_list",c,p,0)));t.b("\n" + i);t.b("    ");if(t.s(t.f("show_favorites_count",c,p,1),c,p,0,263,284,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.t(t.f("favorites_count",c,p,0)));});c.pop();}t.b("\n" + i);t.b("  </div>\n");};t.b("\n" + i);if(!t.s(t.f("is_retweets_empty",c,p,1),c,p,1,0,0,"")){t.b("  <div class='activity-list-container retweets'>\n    <b class=\"type\" title=\"Who retweeted this Tweet\"><i></i></b>\n    ");t.b(t.t(t.f("retweets_list",c,p,0)));t.b("\n" + i);t.b("    ");if(t.s(t.f("show_retweets_count",c,p,1),c,p,0,537,557,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.t(t.f("retweets_count",c,p,0)));});c.pop();}t.b("\n" + i);t.b("  </div>\n");};t.b("\n" + i);if(!t.s(t.f("is_replies_empty",c,p,1),c,p,1,0,0,"")){t.b("  <div class='activity-list-container replies'>\n    <b class=\"type\" title=\"Who replied to this Tweet\"><i></i></b>\n    ");t.b(t.t(t.f("replies_list",c,p,0)));t.b("\n" + i);t.b("    ");if(t.s(t.f("show_replies_count",c,p,1),c,p,0,805,824,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.t(t.f("replies_count",c,p,0)));});c.pop();}t.b("\n" + i);t.b("  </div>\n");};t.b("\n" + i);t.b("</div>\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_activity_count": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='tweet-activity-count-container'>\n  <span class='tweet-activity-count'>\n    ");if(t.s(t.f("is_retweets",c,p,1),c,p,0,103,122,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("length",c,p,0)));t.b(" retweets");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("is_favorites",c,p,1),c,p,0,160,180,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("length",c,p,0)));t.b(" favorites");});c.pop();}t.b("\n" + i);t.b("  </span> &middot; <a href='#' class='tweet-activity-view-all'>View more &raquo;</a>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_box": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet-box condensed\">\n");if(t.s(t.f("show_title",c,p,1),c,p,0,51,193,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"tweet-box-title\">\n      ");if(t.s(t.f("name",c,p,1),c,p,0,101,127,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<h2>Tweet to ");t.b(t.v(t.f("name",c,p,0)));t.b("</h2>");});c.pop();}t.b("\n" + i);t.b("      ");if(!t.s(t.f("name",c,p,1),c,p,1,0,0,"")){t.b("<h2>");t.b(t.v(t.f("title",c,p,0)));t.b("</h2>");};t.b("\n" + i);t.b("    </div>\n");});c.pop();}t.b("  <div class=\"text-area\">\n    <div class=\"text-area-editor\"></div>\n  </div>\n  <div class=\"tweet-button-container\">\n");if(t.s(t.f("show_geo",c,p,1),c,p,0,341,369,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("geo_control0",c,p,"      "));});c.pop();}t.b("    <div class=\"tweet-button-sub-container\">\n      <img src=\"/images/spinner.gif\" class=\"tweet-spinner\" style=\"display: none;\" />\n      <input class=\"tweet-counter\" value=\"140\" disabled=\"disabled\"/>\n");t.b(t.rp("tweet_button1",c,p,"      "));t.b("    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {"geo_control0": {name:"geo_control"},"tweet_button1": {name:"tweet_button"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"#\" class=\"tweet-button btn\">");t.b(t.v(t.f("button_text",c,p,0)));t.b("</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_details": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-tweet-details-fixer tweet-details-fixer\">\n");if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b("    <div class=\"js-tweet-media-container\"></div>\n");};if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,186,806,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("possibly_sensitive",c,p,1),c,p,0,214,250,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("media_not_displayed0",c,p,"      "));});c.pop();}if(t.s(t.f("cards",c,p,1),c,p,0,288,410,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"cards-media-container ");if(t.s(t.f("possibly_sensitive",c,p,1),c,p,0,352,359,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" hidden");});c.pop();}t.b("\">");t.b(t.rp("cards_base1",c,p,""));t.b("</div>\n");});c.pop();}t.b("    <div class=\"js-tweet-media-container ");if(t.s(t.f("possibly_sensitive",c,p,1),c,p,0,485,492,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" hidden");});c.pop();}t.b("\"></div>\n");if(!t.s(t.f("cards",c,p,1),c,p,1,0,0,"")){t.b("      <div class=\"entities-media-container ");if(t.s(t.f("possibly_sensitive",c,p,1),c,p,0,605,612,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" hidden");});c.pop();}t.b("\" style=\"min-height:");t.b(t.v(t.f("embedded_photos_min_height",c,p,0)));t.b("px\">\n");if(t.s(t.f("embedded_photos",c,p,1),c,p,0,716,757,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("embedded_pic_twitter2",c,p,"        "));});c.pop();}t.b("    </div>\n");};});c.pop();}t.b("  <div class=\"js-machine-translated-tweet-container\"></div>\n  <div class=\"js-tweet-stats-container tweet-stats-container ");if(t.s(t.f("has_retweet_count",c,p,1),c,p,0,974,1018,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("preexpanded",c,p,1),c,p,1,0,0,"")){t.b("already-open");};});c.pop();}t.b("\">\n");if(t.s(t.f("tweet_stats",c,p,1),c,p,0,1063,1091,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("tweet_stats3",c,p,"      "));});c.pop();}t.b("  </div>\n  ");if(t.s(t.f("show_geo_icon",c,p,1),c,p,0,1137,1172,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"geo js-tiny-geo\"></div>");});c.pop();}t.b("\n" + i);if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,1217,1453,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"geo-container tweet-geo-text");if(t.s(t.f("has_strong_geo",c,p,1),c,p,0,1281,1292,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" geo-strong");});c.pop();}if(t.s(t.f("has_weak_geo",c,p,1),c,p,0,1328,1337,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" geo-weak");});c.pop();}t.b("\">\n");if(t.s(t.f("geo_with_map",c,p,1),c,p,0,1380,1422,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("expanded/geo_with_map4",c,p,"        "));});c.pop();}t.b("    </div>\n");});c.pop();}t.b("  <div class=\"client-and-actions\">\n");if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b(t.rp("tweet_geo_text5",c,p,""));};t.b("    <span class=\"metadata\">\n      <span title=\"");t.b(t.v(t.f("explicit_timestamp",c,p,0)));t.b("\">");t.b(t.v(t.f("explicit_timestamp",c,p,0)));t.b("</span>\n\n");t.b(t.rp("tweet_contributor6",c,p,"      "));t.b(t.rp("tweet_source7",c,p," "));t.b("\n" + i);if(t.s(t.f("include_embed_link",c,p,1),c,p,0,1764,1870,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        &middot; <a class=\"embed-link\" href=\"");t.b(t.v(t.f("embed_dialog_permalink_path",c,p,0)));t.b("\">Embed this Tweet</a>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("include_embed_link",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("is_permalink",c,p,1),c,p,1,0,0,"")){t.b("          &middot; <a class=\"permalink-link js-permalink\" href=\"");t.b(t.v(t.f("permalink_path",c,p,0)));t.b("\" ");if(t.s(t.f("impression_cookie",c,p,1),c,p,0,2058,2092,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-send-impression-cookie=\"true\"");});c.pop();}t.b(">Details</a>\n");};};t.b("\n" + i);if(t.s(t.f("media_cards_enabled",c,p,1),c,p,0,2214,2569,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("cards",c,p,1),c,p,0,2233,2412,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("photos",c,p,1),c,p,0,2255,2276,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("cards_flag_media8",c,p,""));});c.pop();}if(t.s(t.f("summaries",c,p,1),c,p,0,2312,2333,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("cards_flag_media9",c,p,""));});c.pop();}if(t.s(t.f("players",c,p,1),c,p,0,2370,2391,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("cards_flag_media10",c,p,""));});c.pop();}});c.pop();}if(!t.s(t.f("cards",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("entities",c,p,1),c,p,0,2465,2530,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("media",c,p,1),c,p,0,2475,2520,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("cards_flag_media11",c,p,"            "));});c.pop();}});c.pop();}};});c.pop();}t.b("\n" + i);t.b("    </span>\n  </div>\n</div>\n");return t.fl(); }, partials: {"media_not_displayed0": {name:"media_not_displayed"},"cards_base1": {name:"cards_base"},"embedded_pic_twitter2": {name:"embedded_pic_twitter"},"tweet_stats3": {name:"tweet_stats"},"expanded/geo_with_map4": {name:"expanded/geo_with_map"},"tweet_geo_text5": {name:"tweet_geo_text"},"tweet_contributor6": {name:"tweet_contributor"},"tweet_source7": {name:"tweet_source"},"cards_flag_media8": {name:"cards_flag_media"},"cards_flag_media9": {name:"cards_flag_media"},"cards_flag_media10": {name:"cards_flag_media"},"cards_flag_media11": {name:"cards_flag_media"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_geo": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_not_found_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Tweet does not exist.\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_posted": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("in_reply_to_screen_name",c,p,1),c,p,0,28,89,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  Your Tweet to @");t.b(t.v(t.f("in_reply_to_screen_name",c,p,0)));t.b(" has been sent!\n");});c.pop();}if(!t.s(t.f("in_reply_to_screen_name",c,p,1),c,p,1,0,0,"")){t.b("  Your Tweet was posted!\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_related_results_forbidden_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("You are not authorized to look up related results for that Tweet.\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_search_stream_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"header-inner\">\n");if(t.s(t.f("is_new_search_header_available",c,p,1),c,p,0,64,748,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"search-header ddg-192-new-header js-search-header\">\n      <div class=\"btn-group pull-right js-search-dropdown\">\n        <button type=\"button\" class=\"dropdown btn btn-search-actions js-search-dropdown-button\">\n          <i class=\"search-toggle\"></i>\n        </button>\n        <ul class=\"dropdown-menu btn-group-dropdown js-combo-btn-dropdown-options\">\n          <li><a class=\"js-toggle-saved-search-link\" href=\"#\">Save search</a></li>\n          <li><a href=\"");t.b(t.v(t.f("search_advanced_path",c,p,0)));t.b("\">Advanced search</a></li>\n        </ul>\n      </div>\n      <h2 class=\"search-title js-search-title\">Results for <strong class=\"search-query\">");t.b(t.v(t.f("pretty_query",c,p,0)));t.b("</strong></h2>\n    </div>\n");});c.pop();}t.b("\n" + i);t.b(t.rp("onebox0",c,p,"  "));t.b("\n" + i);t.b("  <h2>\n    <span class=\"content-header-buttons js-header-button-container\"></span>\n    \n    \n    <span class=\"js-stream-title\"></span>&nbsp;<small class=\"view-toggler js-view-toggler\"></small>\n  </h2>\n</div>\n");return t.fl(); }, partials: {"onebox0": {name:"onebox"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_spam_menu": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(!t.s(t.f("is_my_tweet",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("user",c,p,1),c,p,0,28,209,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    \n    \n    <div class=\"tweet-spam-experiment ");t.b(t.v(t.f("tweet_experiment_spam_threat_class",c,p,0)));t.b("\">\n      <div class=\"tweet-user-actions\">\n");t.b(t.rp("user_actions0",c,p,"        "));t.b("      </div>\n    </div>\n");});c.pop();}};return t.fl(); }, partials: {"user_actions0": {name:"user_actions"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_stats": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n");t.b("\n" + i);t.b("<ul class=\"stats");if(!t.s(t.f("include_activity_popup",c,p,1),c,p,1,0,0,"")){t.b(" no-activity-popup");};t.b("\">\n");if(t.s(t.f("has_retweets",c,p,1),c,p,0,149,671,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li class=\"js-stat-count js-stat-retweets stat-count\">\n      <a\n");if(t.s(t.f("include_activity_popup",c,p,1),c,p,0,253,377,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          class=\"request-retweeted-popup\"\n          data-activity-popup-title=\"");t.b(t.rp("dialogs/retweeted_popup_title0",c,p,""));t.b("\"\n");});c.pop();}t.b("      >\n        \n          ");if(t.s(t.f("retweeters_length_one",c,p,1),c,p,0,458,501,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<strong>");t.b(t.v(t.f("retweets_count",c,p,0)));t.b("</strong> Retweet");});c.pop();}t.b("\n" + i);t.b("          ");if(t.s(t.f("retweeters_length_other",c,p,1),c,p,0,566,610,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<strong>");t.b(t.v(t.f("retweets_count",c,p,0)));t.b("</strong> Retweets");});c.pop();}t.b("\n" + i);t.b("        \n      </a>\n    </li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("has_favorites",c,p,1),c,p,0,710,1237,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li class=\"js-stat-count js-stat-favorites stat-count\">\n      <a\n");if(t.s(t.f("include_activity_popup",c,p,1),c,p,0,815,939,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          class=\"request-favorited-popup\"\n          data-activity-popup-title=\"");t.b(t.rp("dialogs/favorited_popup_title1",c,p,""));t.b("\"\n");});c.pop();}t.b("      >\n        \n          ");if(t.s(t.f("favoriters_length_one",c,p,1),c,p,0,1020,1065,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<strong>");t.b(t.v(t.f("favorites_count",c,p,0)));t.b("</strong> Favorite");});c.pop();}t.b("\n" + i);t.b("          ");if(t.s(t.f("favoriters_length_other",c,p,1),c,p,0,1130,1176,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<strong>");t.b(t.v(t.f("favorites_count",c,p,0)));t.b("</strong> Favorites");});c.pop();}t.b("\n" + i);t.b("        \n      </a>\n    </li>\n");});c.pop();}t.b("\n" + i);t.b("  <li class=\"avatar-row js-face-pile-container\">\n");if(t.s(t.f("face_pile",c,p,1),c,p,0,1324,1351,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      ");t.b(t.t(t.f("face_pile",c,p,0)));t.b("\n" + i);});c.pop();}t.b("  </li>\n</ul>\n");return t.fl(); }, partials: {"dialogs/retweeted_popup_title0": {name:"dialogs/retweeted_popup_title"},"dialogs/favorited_popup_title1": {name:"dialogs/favorited_popup_title"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_text_large": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='tweet-text tweet-text-large'>");t.b(t.t(t.f("linkified_text",c,p,0)));t.b("</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"typeahead": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dropdown-menu typeahead\">\n  <div class=\"dropdown-caret\">\n    <div class=\"caret-outer\"></div>\n    <div class=\"caret-inner\"></div>\n  </div>\n  <div class=\"dropdown-inner js-typeahead-results\">\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"typeahead_account_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-user-screenname=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" data-remote=\"true\" data-score=\"");t.b(t.v(t.f("score",c,p,0)));t.b("\" class=\"typeahead-item js-selectable\">\n  <a href=\"#\"");t.b(t.t(t.f("debug_info",c,p,0)));t.b(">\n    <img src=\"");t.b(t.v(t.f("avatar",c,p,0)));t.b("\" width=\"24\" height=\"24\" class=\"avatar size24\">\n    <span class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</span>\n    ");t.b(t.t(t.f("verified",c,p,0)));t.b("\n" + i);t.b("    <span class=\"username\"><s>@</s><b>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</b></span>\n  </a>\n</li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"typeahead_accounts": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"typeahead-accounts js-typeahead-accounts\">\n  <ul class=\"typeahead-items\">\n  </ul>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"typeahead_accounts_shortcut": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"js-selectable js-shortcut\"><a href=\"");t.b(t.v(t.f("user_search_path",c,p,0)));t.b("\" data-search-query=\"");t.b(t.v(t.f("query",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\" data-shortcut=\"true\">Search all people for <strong>");t.b(t.v(t.f("query",c,p,0)));t.b("</strong></a></li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"typeahead_saved_searches": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-typeahead-saved-searches\">\n  <ul class=\"typeahead-items typeahead-searches\">\n");if(t.s(t.f("searches",c,p,1),c,p,0,107,147,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("typeahead_saved_search_item0",c,p,"    "));});c.pop();}t.b("  </ul>\n</div>");return t.fl(); }, partials: {"typeahead_saved_search_item0": {name:"typeahead_saved_search_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"typeahead_search_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"js-selectable search-item\" data-hint=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n  <a href=\"");t.b(t.v(t.f("search_results_path",c,p,0)));t.b("\" data-search-query=\"");t.b(t.v(t.f("query",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\"");t.b(t.t(t.f("debug_info",c,p,0)));t.b("><i class=\"generic-search\"></i>");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n</li>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"typeahead_search_shortcut_items": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("query",c,p,1),c,p,0,10,264,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"js-selectable ");if(!t.s(t.f("jump_to_profile",c,p,1),c,p,1,0,0,"")){t.b("selected");};t.b("\"><a href=\"");t.b(t.v(t.f("search_results_path",c,p,0)));t.b("\" data-search-query=\"");t.b(t.v(t.f("query",c,p,0)));t.b("\" data-query-source=\"");t.b(t.v(t.f("search_query_source",c,p,0)));t.b("\" data-shortcut=\"true\">Search for <strong>");t.b(t.v(t.f("query",c,p,0)));t.b("</strong></a></li>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"typeahead_search_shortcuts": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"typeahead-shortcuts js-typeahead-shortcuts\">\n  <ul class=\"typeahead-items\"></ul>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"unclickable_tweet": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"unfocusable-stream-item stream-item\">\n  <div class=\"tweet js-unclickable-tweet unclickable-tweet ");t.b(t.rp("common_tweet_classes0",c,p,""));t.b("\"\n    ");t.b(t.rp("tweet_data1",c,p,""));t.b(">\n    <i class=\"dogear\"></i>\n    <div class=\"content\">\n      <div class=\"stream-item-header\">\n");if(t.s(t.f("user",c,p,1),c,p,0,266,650,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span class=\"account-group\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n            <img class=\"avatar\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n            <strong class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n            <span class=\"username\"><s>@</s><b>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</b></span>\n");if(t.s(t.f("protected",c,p,1),c,p,0,558,609,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <i class=\"sm-lock\"></i>\n");});c.pop();}t.b("          </span>\n");});c.pop();}t.b("        <small class=\"time\">\n          ");t.b(t.v(t.f("short_timestamp",c,p,0)));t.b("\n" + i);t.b("        </small>\n      </div>\n      <p>");t.b(t.t(t.f("linkified_text",c,p,0)));t.b("</p>\n      <div class=\"stream-item-footer\">\n");t.b(t.rp("tweet_context2",c,p,"        "));t.b("      </div>\n    </div>\n  \n  </div>\n</div>\n");return t.fl(); }, partials: {"common_tweet_classes0": {name:"common_tweet_classes"},"tweet_data1": {name:"tweet_data"},"tweet_context2": {name:"tweet_context"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"unfollow_button": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"button js-action-unfollow js-button unfollow-button\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(">\n  <span class=\"you-follow\" />\n  <em class=\"wrapper\">\n    <b class=\"unfollow\">Unfollow</b>\n    <b>Following</b>\n  </em>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"unfollow_link": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"#\" class=\"user-unfollow-link js-action-unfollow js-link unfollow-action\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Unfollow</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<img src='");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("' alt='");t.b(t.v(t.f("name",c,p,0)));t.b("' class='thumb user-profile-link' data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("'/>\n<span class='user-name'>\n  <a class='user-profile-link' data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("' href='#' title='");t.b(t.v(t.f("name",c,p,0)));t.b("'><strong>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</strong></a>\n  <span class='full-name'>");t.b(t.v(t.f("name",c,p,0)));t.b("</span>\n</span>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_actions": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"user-actions btn-group ");t.b(t.v(t.f("follow_state",c,p,0)));t.b(" ");if(t.s(t.f("dismissable",c,p,1),c,p,0,103,114,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dismissable");});c.pop();}t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"\n    data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" data-name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-protected=\"");t.b(t.v(t.f("protected_string",c,p,0)));t.b("\">\n\n");if(!t.s(t.f("menu_follow_actions",c,p,1),c,p,1,0,0,"")){t.b("    <button class=\"js-follow-btn follow-button btn\" type=\"button\">\n      <span class=\"button-text follow-text\"><i class=\"follow\"></i> Follow</span>\n      <span class=\"button-text following-text\">Following</span>\n      <span class=\"button-text unfollow-text\">Unfollow</span>\n      <span class=\"button-text blocked-text\">Blocked</span>\n      <span class=\"button-text unblock-text\">Unblock</span>\n      <span class=\"button-text pending-text\">Pending</span>\n      <span class=\"button-text cancel-text\">Cancel</span>\n    </button>\n");};t.b("\n" + i);if(t.s(t.f("logged_in",c,p,1),c,p,0,851,3210,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span class=\"user-dropdown js-link");if(!t.s(t.f("user_dropdown_icon_only",c,p,1),c,p,1,0,0,"")){t.b(" btn");};t.b("\">\n      <i class=\"account-arrow\"></i>\n      <i class=\"mark-as-spam-silhouette\"></i>\n      <i class=\"mark-as-spam-flag\"></i>\n      <small class=\"mark-as-spam-text\">Spam?</small>\n      <ul class=\"dropdown-menu\">\n        <li class=\"dropdown-caret\">\n          <span class=\"caret-outer\"></span>\n          <span class=\"caret-inner\"></span>\n        </li>\n");if(t.s(t.f("menu_follow_actions",c,p,1),c,p,0,1331,1588,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <li class=\"unfollow-text pretty-link dropdown-link\">Unfollow <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</li>\n          <li class=\"cancel-text pretty-link dropdown-link\">Cancel Follow Request</li>\n          <li class=\"dropdown-divider pending is-following\">\n");});c.pop();}t.b("        <li class=\"mention-text pretty-link dropdown-link not-blocked\">Tweet to <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</li>\n        ");if(t.s(t.f("include_direct_message_dialog",c,p,1),c,p,0,1764,1824,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<li class=\"dm-text dropdown-link\">Send a Direct Message</li>");});c.pop();}t.b("\n" + i);t.b("        <li class=\"list-text pretty-link dropdown-link not-blocked\">Add or remove from lists&hellip;</li>\n        <li class=\"dropdown-divider not-blocked\"></li>\n        <li class=\"block-text pretty-link dropdown-link not-blocked\">Block <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</li>\n        <li class=\"unblock-text pretty-link dropdown-link\">Unblock <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</li>\n        <li class=\"report-spam-text pretty-link dropdown-link\">Report <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" for spam</li>\n        <li class=\"hide-suggestion-text dropdown-link\">Hide this suggestion</li>\n        <li class=\"dropdown-divider is-following\"></li>\n        <li class=\"retweet-on-text dropdown-link\">Turn on Retweets</li>\n        <li class=\"retweet-off-text dropdown-link\">Turn off Retweets</li>\n        <li class=\"device-notifications-on-text dropdown-link\">Turn on mobile notifications</li>\n        <li class=\"device-notifications-off-text dropdown-link\">Turn off mobile notifications</li>\n");if(t.s(t.f("spam_threat",c,p,1),c,p,0,2831,3005,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <li class=\"dropdown-divider not-spam-divider\"></li>\n          <li class=\"not-spam-text pretty-link dropdown-link\"><s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" is not spam</li>\n");});c.pop();}if(t.s(t.f("menu_follow_actions",c,p,1),c,p,0,3054,3159,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <li class=\"follow-text pretty-link dropdown-link\">Follow <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</li>\n");});c.pop();}t.b("      </ul>\n    </span>\n");});c.pop();}t.b("</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_admin_tools": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);if(t.s(t.f("become_users",c,p,1),c,p,0,18,223,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"user-admin-tools\"><form class=\"dropdown-link-form become-user-form\" action=\"");t.b(t.v(t.f("become_user_path",c,p,0)));t.b("\" method=\"POST\"><a class=\"become-user-button\" href=\"#\">Become @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a></form></li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("can_investigate",c,p,1),c,p,0,262,399,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"user-admin-tools\"><a href=\"");t.b(t.v(t.f("admin_find_path",c,p,0)));t.b("\" title=\"Investigate!\" target=\"_blank\">Investigate @");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a></li>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_avatar_link_24": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"js-profile-popup-actionable js-user-tipsy\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" original-title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n  <img class=\"avatar size24 js-user-profile-link js-tooltip\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n</a>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_detailed_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("items",c,p,1),c,p,0,10,42,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_detailed_list_item0",c,p,"  "));});c.pop();}return t.fl(); }, partials: {"user_detailed_list_item0": {name:"user_detailed_list_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_detailed_list_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"user-detailed-list-item js-actionable-user\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(">\n  <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"user-profile-link user-thumb\"><img src='");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("' alt=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" /></a>\n  <div class=\"user-details ");t.b(t.v(t.f("lang",c,p,0)));t.b("\">\n    <div class=\"user-name-info\">\n      <a class=\"js-recommend-link user-profile-link user-screen-name\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" href='");t.b(t.v(t.f("profile_path",c,p,0)));t.b("'>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a>\n      <span class=\"user-full-name-and-action\">\n        <span class=\"user-full-name\">");t.b(t.v(t.f("name",c,p,0)));t.b("</span>\n");if(t.s(t.f("verified",c,p,1),c,p,0,605,691,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span class=\"verified-icon-small\" title=\"Verified Account\"></span>\n");});c.pop();}if(t.s(t.f("protected",c,p,1),c,p,0,727,793,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <img src=\"/phoenix/img/protected_small.gif\" />\n");});c.pop();}t.b(t.rp("user_item_action0",c,p,"        "));t.b("      </span>\n    </div>\n");if(t.s(t.f("location",c,p,1),c,p,0,880,993,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"location\">\n        Location:&nbsp;<span class=\"location\">");t.b(t.v(t.f("location",c,p,0)));t.b("</span>\n      </div>\n");});c.pop();}if(t.s(t.f("linkified_description",c,p,1),c,p,0,1037,1140,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"bio\">\n        <span class=\"bio\">");t.b(t.t(t.f("linkified_description",c,p,0)));t.b("</span>\n      </div>\n");});c.pop();}t.b("  </div>\n</li>\n");return t.fl(); }, partials: {"user_item_action0": {name:"user_item_action"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_dropdown": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"user-dropdown\">\n");if(t.s(t.f("twitter_ads_link_url",c,p,1),c,p,0,54,173,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li><a href=\"");t.b(t.v(t.f("twitter_ads_link_url",c,p,0)));t.b("\" target=\"");t.b(t.v(t.f("twitter_ads_link_target",c,p,0)));t.b("\">");t.b(t.v(t.f("twitter_ads_link_title",c,p,0)));t.b("</a></li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("is_translator",c,p,1),c,p,0,220,287,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("     <li><a href=\"");t.b(t.v(t.f("translation_tool_path",c,p,0)));t.b("\">Translate</a></li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("contributor_account_info",c,p,1),c,p,0,338,2672,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("is_contributing",c,p,1),c,p,1,0,0,"")){t.b("      <li><a href=\"");t.b(t.v(t.f("settings_path",c,p,0)));t.b("\">Settings</a></li>\n");};t.b("\n" + i);if(t.s(t.f("is_contributing",c,p,1),c,p,0,470,584,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li><span class=\"settings-disabled\" title=\"Settings disabled while contributing.\">Settings</span></li>\n");});c.pop();}t.b("\n" + i);t.b("    <li><a href=\"");t.b(t.v(t.f("support_path",c,p,0)));t.b("\">Help</a></li>\n\n");if(t.s(t.f("can_access_oldtwitter",c,p,1),c,p,0,686,1171,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("is_contributing",c,p,1),c,p,1,0,0,"")){t.b("      <li>\n        <form method=\"post\" action=\"");t.b(t.v(t.f("turn_phx_off_path",c,p,0)));t.b("\" class=\"turn-phx-off-form\">\n          <input type=\"hidden\" name=\"setting\" value=\"false\">\n          <input type=\"hidden\" name=\"format\" value=\"html\">\n          <input type='hidden' value='' name='authenticity_token' class='authenticity_token'>\n          <button type=\"submit\" class=\"turn-phx-off-button\">Switch to Old Twitter</button>\n        </form>\n      </li>\n");};});c.pop();}t.b("\n" + i);t.b("    <li>\n      <form id=\"signout-form\" action=\"");t.b(t.v(t.f("logout_action_path",c,p,0)));t.b("\" method=\"POST\">\n        <a class=\"signout-button js-signout-button\" href=\"#\">Sign out</a>\n        <input type='hidden' value='' name='authenticity_token' class='authenticity_token' />\n        <input type='hidden' name='reliability_event' class='js-reliability-event'>\n        <input type='hidden' name='scribe_log' />\n      </form>\n    </li>\n\n");if(t.s(t.f("is_admin",c,p,1),c,p,0,1629,1780,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li><span>Admin Tools</span></li>\n      <li class=\"admin-panel-link\"><a href=\"");t.b(t.v(t.f("admin_home_path",c,p,0)));t.b("\" title=\"Admin panel\">Admin panel</a></li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("can_contribute",c,p,1),c,p,0,1818,2650,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li><span>Switch Account</span></li>\n");if(t.s(t.f("is_contributing",c,p,1),c,p,0,1888,2255,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("real_identity",c,p,1),c,p,0,1915,2230,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <li class=\"contributor-account-link\" data-profile-image-url=\"");if(t.s(t.f("is_ssl",c,p,1),c,p,0,1998,2025,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_image_url_https",c,p,0)));});c.pop();}if(!t.s(t.f("is_ssl",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("profile_image_url",c,p,0)));};t.b("\">\n            <a href=\"/account_switch/destroy\">\n              <img width=\"20\" height=\"20\" />");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);t.b("            </a>\n          </li>\n");});c.pop();}});c.pop();}if(t.s(t.f("contributable_accounts",c,p,1),c,p,0,2309,2618,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li class=\"contributor-account-link\" data-profile-image-url=\"");if(t.s(t.f("is_ssl",c,p,1),c,p,0,2390,2417,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_image_url_https",c,p,0)));});c.pop();}if(!t.s(t.f("is_ssl",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("profile_image_url",c,p,0)));};t.b("\">\n          <a href=\"/account_switch/create/");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n            <img width=\"20\" height=\"20\" />");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);t.b("          </a>\n        </li>\n");});c.pop();}});c.pop();}});c.pop();}t.b("</ul>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_dropdown_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"");t.b(t.v(t.f("className",c,p,0)));t.b(" profactions\">\n");if(t.s(t.f("checkbox",c,p,1),c,p,0,54,153,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <input id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" type=\"checkbox\" style=\"float:left\" ");if(t.s(t.f("isChecked",c,p,1),c,p,0,127,134,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b("/>\n");});c.pop();}if(t.s(t.f("icon",c,p,1),c,p,0,178,221,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span class=\"list ");t.b(t.v(t.f("icon",c,p,0)));t.b("\"></span>\n");});c.pop();}t.b("  <b class=\"item-name\">");t.b(t.t(t.f("label",c,p,0)));t.b("</b>\n</li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_full_name": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class=\"user\" data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("'>");t.b(t.v(t.f("name",c,p,0)));t.b("</span>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_image_128": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<img height=\"128\" width=\"128\" src=\"");t.b(t.v(t.f("reasonably_small_profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"avatar size128 js-action-profile-avatar\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_image_16": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<img height=\"16\" width=\"16\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" class=\"avatar size16 user-profile-link\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_image_24": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<img height=\"24\" width=\"24\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" class=\"avatar size24\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_image_32": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<img height=\"32\" width=\"32\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" class=\"avatar size32\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_item_action": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("swift",c,p,1),c,p,0,10,358,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <span class=\"user-actions ");t.b(t.v(t.f("follow_state",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");if(t.s(t.f("protected",c,p,1),c,p,0,93,114,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-protected=\"true\"");});c.pop();}t.b(">\n    <a href=\"#\" class=\"follow-link\">\n      <span class=\"link-text follow-text\">Follow</span>\n      <span class=\"link-text unfollow-text\">Unfollow</span>\n      <span class=\"link-text cancel-text\">Cancel</span>\n    </a>\n  </span>\n");});c.pop();}if(!t.s(t.f("swift",c,p,1),c,p,1,0,0,"")){t.b("  <span class=\"js-follow-state follow-state\">\n");if(!t.s(t.f("following",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b("        <a href=\"#\" class=\"js-action-follow js-link\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Follow</a>\n");};if(t.s(t.f("is_current_user",c,p,1),c,p,0,611,730,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <a href=\"");t.b(t.v(t.f("settings_profile_path",c,p,0)));t.b("\" class=\"js-thats-you js-link\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Edit profile</a>\n");});c.pop();}};t.b("    ");if(t.s(t.f("following",c,p,1),c,p,0,788,810,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span>Following</span>");});c.pop();}t.b("\n" + i);t.b("  </span>\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_media_not_displayed": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"user-media-not-displayed facets-media-not-displayed list-link\">\n <div>\n   <a class=\"header\">Recent images</a>\n   <p class=\"not-displayed-text metadata\">");t.b(t.t(t.f("reason",c,p,0)));t.b("</p>\n   <a class=\"btn small display-this-media\">\n     Display media\n   </a> &middot;\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,277,350,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("   <a href=\"#\" class=\"always-display-media\">Always display media</a>\n");});c.pop();}t.b(" </div>\n</li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_not_found_error_message": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("This user does not exist.");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_recommendations_dropdown": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-user-dropdown user-rec-dropdown profile-actions\">\n  <a href=\"#\" class=\"js-user-dropdown-dismiss dismiss\">&times;</a>\n  <h2>\n    You might also want to follow:\n  </h2>\n  <ul class=\"recommended-followers user-rec-component\">\n");if(t.s(t.f("recommended_followers",c,p,1),c,p,0,268,300,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_small_list0",c,p,"      "));});c.pop();}t.b("  </ul>\n</div>");return t.fl(); }, partials: {"user_small_list0": {name:"user_small_list"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_similarities_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<div class=\"content-main user-similarities-list breakable\">\n  <div class=\"content-header\">\n    <div class=\"header-inner\">\n      <small class=\"pull-right\"><a href=\"#\" class=\"js-close\">Close</a></small>\n      <h2>\n        You might also want to follow:\n      </h2>\n    </div>\n  </div>\n\n  <div class=\"stream\">\n    <div class=\"js-users-list stream-items\">\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,383,554,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("items",c,p,1),c,p,0,402,537,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <div class=\"stream-item");if(t.s(t.f("last_item",c,p,1),c,p,0,450,466,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" stream-end-item");});c.pop();}t.b("\">\n");t.b(t.rp("stream_user0",c,p,"            "));t.b("          </div>\n");});c.pop();}});c.pop();}t.b("    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {"stream_user0": {name:"stream_user"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_small_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("items",c,p,1),c,p,0,10,39,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_small_list_item0",c,p,"  "));});c.pop();}return t.fl(); }, partials: {"user_small_list_item0": {name:"user_small_list_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_small_list_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_withheld",c,p,1),c,p,0,16,54,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_small_list_item_withheld0",c,p,"  "));});c.pop();}if(!t.s(t.f("is_withheld",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"js-account-summary account-summary js-actionable-user");if(t.s(t.f("promoted_content",c,p,1),c,p,0,174,219,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" promoted-account js-profile-popup-actionable");});c.pop();}if(t.s(t.f("small_avatar",c,p,1),c,p,0,257,279,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" account-summary-small");});c.pop();}if(t.s(t.f("protected",c,p,1),c,p,0,310,323,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" js-protected");});c.pop();}t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(" ");if(t.s(t.f("impression_cookie",c,p,1),c,p,0,432,478,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-impression-cookie=\"");t.b(t.v(t.f("impression_cookie",c,p,0)));t.b("\"");});c.pop();}t.b(">\n");if(t.s(t.f("dismissable",c,p,1),c,p,0,520,592,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"dismiss js-action-dismiss\"><i class=\"close\"></i></div>\n");});c.pop();}t.b("  <div class=\"content\">\n    <a class=\"account-group js-recommend-link js-user-profile-link user-thumb\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      \n      <img class=\"avatar js-action-profile-avatar ");if(t.s(t.f("small_avatar",c,p,1),c,p,0,833,839,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("size32");});c.pop();}t.b("\" src=\"");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n      <span class=\"account-group-inner js-action-profile-name\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n        <b class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</b>\n        <span>&rlm;</span>\n        ");if(t.s(t.f("verified",c,p,1),c,p,0,1077,1101,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified\"></i>");});c.pop();}t.b("\n" + i);t.b("        <span class=\"username\"><s>@</s><span class=\"js-username\">");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span></span>\n      </span>\n    </a>\n\n    <small class=\"metadata social-context\">\n");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,1308,1967,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("first_connection",c,p,1),c,p,0,1338,1939,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          \n");if(t.s(t.f("connections_count_one",c,p,1),c,p,0,1388,1565,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              Followed by <a class='pretty-link user-profile-link js-user-profile-link' data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("' href='");t.b(t.v(t.f("profile_path",c,p,0)));t.b("' title='");t.b(t.v(t.f("name",c,p,0)));t.b("'>");t.b(t.v(t.f("name",c,p,0)));t.b("</a>\n");});c.pop();}if(t.s(t.f("connections_count_other",c,p,1),c,p,0,1632,1891,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              Followed by <a class='pretty-link user-profile-link js-user-profile-link' data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("' href='");t.b(t.v(t.f("profile_path",c,p,0)));t.b("' title='");t.b(t.v(t.f("name",c,p,0)));t.b("'>");t.b(t.v(t.f("name",c,p,0)));t.b("</a> and <a href=\"");t.b(t.v(t.f("followers_you_follow_path",c,p,0)));t.b("\" class=\"pretty-link\"><b>others</b></a>\n");});c.pop();}t.b("          \n");});c.pop();}});c.pop();}if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b("        ");t.b(t.t(t.f("socialcontext",c,p,0)));t.b("\n" + i);};t.b("    </small>\n\n");if(t.s(t.f("is_sponsored",c,p,1),c,p,0,2117,2436,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <small class=\"metadata with-icn js-disclosure js-tooltip\" title=\"");if(t.s(t.f("promoted_content",c,p,1),c,p,0,2210,2229,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("disclosure_text",c,p,0)));});c.pop();}t.b("\">\n        <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" class=\"js-promoted-badge js-user-profile-link\">\n          <i class=\"");t.b(t.v(t.f("promoted_badge_class",c,p,0)));t.b("\"></i>Promoted\n        </a>\n      </small> &middot;\n");});c.pop();}t.b(t.rp("user_item_action1",c,p,"    "));t.b("  </div>\n</div>\n\n");};return t.fl(); }, partials: {"user_small_list_item_withheld0": {name:"user_small_list_item_withheld"},"user_item_action1": {name:"user_item_action"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_small_list_item_sponsored": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("  <a class=\"icon-link tweet-context promoted-arrow js-promoted-badge js-user-profile-link ");if(t.s(t.f("socialcontext",c,p,1),c,p,0,108,121,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("socialcontext");});c.pop();}t.b("\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" title=\"");if(t.s(t.f("promoted_content",c,p,1),c,p,0,193,212,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("disclosure_text",c,p,0)));});c.pop();}t.b("\">\n");t.b(t.rp("promoted_icon0",c,p,"    "));t.b("  </a>\n");if(t.s(t.f("socialcontext",c,p,1),c,p,0,286,327,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("     &middot;\n    ");t.b(t.t(t.f("socialcontext",c,p,0)));t.b("\n" + i);});c.pop();}return t.fl(); }, partials: {"promoted_icon0": {name:"promoted_icon"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_small_list_item_withheld": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-account-summary account-summary js-actionable-user");if(t.s(t.f("promoted_content",c,p,1),c,p,0,86,131,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" promoted-account js-profile-popup-actionable");});c.pop();}if(t.s(t.f("small_avatar",c,p,1),c,p,0,169,191,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" account-summary-small");});c.pop();}if(t.s(t.f("protected",c,p,1),c,p,0,222,235,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" js-protected");});c.pop();}t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");t.b(t.t(t.f("feedback_token",c,p,0)));t.b(" ");t.b(t.t(t.f("account_impression_id",c,p,0)));t.b(">\n");if(t.s(t.f("dismissable",c,p,1),c,p,0,341,413,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"dismiss js-action-dismiss\"><i class=\"close\"></i></div>\n");});c.pop();}t.b("  <div class=\"content\">\n    <a class=\"account-group js-recommend-link js-user-profile-link user-thumb\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n      \n      <span class=\"account-group-inner js-action-profile-name\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n        <b class=\"fullname\">");t.b(t.v(t.f("name",c,p,0)));t.b("</b>\n        ");if(t.s(t.f("verified",c,p,1),c,p,0,735,759,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"verified\"></i>");});c.pop();}t.b("\n" + i);t.b("        <s>@</s>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\n" + i);t.b("      </span>\n    </a>\n\n    <small class=\"metadata social-context\">");t.b(t.t(t.f("socialcontext",c,p,0)));t.b("</small>\n\n");if(t.s(t.f("is_sponsored",c,p,1),c,p,0,922,1241,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <small class=\"metadata with-icn js-disclosure js-tooltip\" title=\"");if(t.s(t.f("promoted_content",c,p,1),c,p,0,1015,1034,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("disclosure_text",c,p,0)));});c.pop();}t.b("\">\n        <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" class=\"js-promoted-badge js-user-profile-link\">\n          <i class=\"");t.b(t.v(t.f("promoted_badge_class",c,p,0)));t.b("\"></i>Promoted\n        </a>\n      </small> &middot;\n");});c.pop();}t.b(t.rp("user_item_action0",c,p,"    "));t.b("  </div>\n</div>\n");return t.fl(); }, partials: {"user_item_action0": {name:"user_item_action"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_static_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("items",c,p,1),c,p,0,10,40,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_static_list_item0",c,p,"  "));});c.pop();}return t.fl(); }, partials: {"user_static_list_item0": {name:"user_static_list_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_static_list_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a class=\"user-static-list-item\" href=\"#\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n  <span class=\"user-thumb\">\n    <img class=\"avatar size64 js-user-tipsy\" src=\"");t.b(t.v(t.f("bigger_profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" original-title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">\n  </span>\n</a>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_stats": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class='user-stats clearfix'>\n");if(t.s(t.f("can_view",c,p,1),c,p,0,50,216,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li><a class='user-stats-count user-stats-tweets' href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">");t.b(t.v(t.f("statuses_count_commaized",c,p,0)));t.b("<span class='user-stats-stat'>Tweets</span></a></li>\n");});c.pop();}t.b("    <li><a class='user-stats-count user-stats-following' href=\"");t.b(t.v(t.f("user_following_path",c,p,0)));t.b("\">");t.b(t.v(t.f("friends_count_commaized",c,p,0)));t.b("<span class='user-stats-stat'>Following</span></a></li>\n    <li><a class='user-stats-count user-stats-followers' href=\"");t.b(t.v(t.f("user_followers_path",c,p,0)));t.b("\">");t.b(t.v(t.f("followers_count_commaized",c,p,0)));t.b("<span class='user-stats-stat'>Followers</span></a></li>\n    <li><a class='user-stats-count user-stats-listed' href=\"");t.b(t.v(t.f("memberships_path",c,p,0)));t.b("\">");t.b(t.v(t.f("listed_count_commaized",c,p,0)));t.b("<span class='user-stats-stat'>Listed</span></a></li>\n</ul>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_thumb_list": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class='inline-list'>\n");if(t.s(t.f("items",c,p,1),c,p,0,37,70,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("user_thumb_list_item0",c,p,"    "));});c.pop();}t.b("</ul>\n");return t.fl(); }, partials: {"user_thumb_list_item0": {name:"user_thumb_list_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_thumb_list_item": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"user-thumb-list-member ");if(t.s(t.f("is_hidden",c,p,1),c,p,0,48,54,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("hidden");});c.pop();}t.b("\">\n  <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" class=\"user-profile-link\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"><img src=\"");t.b(t.v(t.f("mini_profile_image_url",c,p,0)));t.b("\" height=\"24\" width=\"24\" title=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\" /></a>\n</li>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"verify_email_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module module-banner\">\n  <div class=\"flex-module\">\n");if(t.s(t.f("pending_new",c,p,1),c,p,0,83,594,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"first-banner-row\">\n        <span class=\"title\">Confirm your email address to access all of Twitter's features.</span>\n        <span>A confirmation message was sent to <strong>");t.b(t.v(t.f("pending_email",c,p,0)));t.b("</strong>.</span>\n      </div>\n      <div class=\"second-banner-row\">\n        <a class=\"btn resend-confirmation-email-link\" href=\"#\">Resend confirmation</a>\n        <a href=\"");t.b(t.v(t.f("change_email_path",c,p,0)));t.b("\">Update email address</a> &middot;\n        <a href=\"");t.b(t.v(t.f("email_help_path",c,p,0)));t.b("\">Learn more</a>\n      </div>\n");});c.pop();}if(t.s(t.f("pending_changed",c,p,1),c,p,0,635,1139,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"first-banner-row\">\n        <span class=\"title\">You still need to confirm your email change.</span>\n        <span>A confirmation email was sent to <strong>");t.b(t.v(t.f("pending_email",c,p,0)));t.b("</strong>. Your email will not be changed until you complete this step!</span>\n      </div>\n      <div class=\"second-banner-row\">\n        <a class=\"btn resend-confirmation-email-link\" href=\"#\">Resend confirmation</a>\n        <a href=\"");t.b(t.v(t.f("change_email_path",c,p,0)));t.b("\">Cancel or update this email address</a>\n      </div>\n");});c.pop();}if(t.s(t.f("pending_bouncing",c,p,1),c,p,0,1185,1683,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"first-banner-row\">\n        <span class=\"title\">Whoops, we haven't been able to send email to your new address!</span>\n        <span>We've tried sending confirmation emails to <strong>");t.b(t.v(t.f("pending_email",c,p,0)));t.b("</strong> but they are not getting delivered.</span>\n      </div>\n      <div class=\"second-banner-row\">\n        You can <a href=\"");t.b(t.v(t.f("change_email_path",c,p,0)));t.b("\">change to a different address</a> or we can <a href=\"#\" class=\"resend-confirmation-email-link\">try again</a>.\n      </div>\n");});c.pop();}t.b("  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"verify_email_dialog": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div ");if(t.s(t.f("container_id",c,p,1),c,p,0,22,44,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("id=\"");t.b(t.v(t.f("container_id",c,p,0)));t.b("\" ");});c.pop();}t.b("class=\"twttr-dialog-container\" style=\"visibility: hidden;\">\n  <div class=\"twttr-dialog\" style=\"top: 142px\">\n    <div class=\"twttr-dialog-inside\">\n      <div class=\"twttr-dialog-body clearfix\">\n        <div class=\"twttr-dialog-content twttr-dialog-verify-email\">\n");if(t.s(t.f("abtest_email_verification_18_modal_dialog",c,p,1),c,p,0,379,465,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <h2 class=\"verify-email\">Please verify your email address</h2>\n");});c.pop();}if(t.s(t.f("abtest_email_verification_18_overlay",c,p,1),c,p,0,563,630,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <h2 class=\"verify-email\">Almost there!</h2>\n");});c.pop();}t.b("          <p class=\"verify-email-text\">\n            Twitter has sent an email to <strong>");t.b(t.v(t.f("email",c,p,0)));t.b("</strong> to verify your email address. You must <strong>click the link in the email</strong> in order to verify your address and finish signing up on Twitter.\n          </p>\n          <p>\n            If you do not receive this message in the next hour, you can <a href=\"#\" class=\"send-verify-email\">request another verification email</a> or <a href=\"");t.b(t.v(t.f("change_email_path",c,p,0)));t.b("\" class=\"change-email\">change your email address</a>.\n          </p>\n          <div class=\"button ok-thanks\"><strong>OK, thanks!</strong></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"answer1": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Live-tweeting a relevant event can increase your daily follower rate by 260%.\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"answer2": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Your audience loves to interact with you. Invite questions for a Twitter Q&A to increase your followers and engagement!\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"answer3": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("Your followers will love your photos. Take pictures and share them via Twitter to help boost your engagement.\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"blackberry": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ul class=\"page-canvas verification-list ");if(t.s(t.f("is_mobile",c,p,1),c,p,0,55,61,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("mobile");});c.pop();}t.b("\">\n  <li class=\"verification-item active\" data-step=\"0\">\n  <div class=\"callout\">\n    <div class=\"vit-onboarding-section-header\">\n      <h2 class=\"step-title\">\n        <span class=\"welcome\">\n          Sorry, this page is not yet supported on your device.  Please open the link on a different mobile device or desktop web browser.\n        </span>\n      </h2>\n    </div>\n  </div>\n  </li>\n</ul>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"callout": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"callout\">\n  <div class=\"vit-onboarding-section-header\">\n    <h2 class=\"step-title\">\n      <span class=\"");if(!t.s(t.f("is_badged",c,p,1),c,p,1,0,0,"")){t.b("vit-step-not-verified");};if(t.s(t.f("is_badged",c,p,1),c,p,0,178,195,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("vit-step-verified");});c.pop();}t.b("\">0</span>\n");if(t.s(t.f("user_view",c,p,1),c,p,0,240,507,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("is_badged",c,p,1),c,p,1,0,0,"")){t.b("          Hi ");t.b(t.v(t.f("name",c,p,0)));t.b("! You are three quick steps away from earning your verified badge.\n");};if(t.s(t.f("is_badged",c,p,1),c,p,0,397,486,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          Hi ");t.b(t.v(t.f("name",c,p,0)));t.b(". Now that your account is verified, check out these tips:\n");});c.pop();}});c.pop();}t.b("      <span class=\"help\">\n        Let us know if you need <a href=\"");t.b(t.t(t.f("vit_help_link",c,p,0)));t.b("\">help</a>.\n      </span>\n    </h2>\n  </div>\n  <span class=\"");if(!t.s(t.f("is_badged",c,p,1),c,p,1,0,0,"")){t.b("vit-step-not-verified");};if(t.s(t.f("is_badged",c,p,1),c,p,0,731,748,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("vit-step-verified");});c.pop();}t.b("\">0</span>\n  <div class=\"vit-onboarding-section-content movable\">\n    <p>Twitter's verified badge is our way of making sure that this is you.\n    <span class=\"verification-reason\">\n      Verified badges appear on your profile and here is why you may want one:\n    </span>\n    </p>\n    <ul class=\"vit-onboarding-benefits-list clearfix\">\n      <li>\n      <h2 class=\"benefits-heading\">Verified accounts appear on top of search results</h2>\n      <p>Make sure when people search for you, they find you.</p>\n      </li>\n      <li>\n      <h2 class=\"benefits-heading\">Verified accounts are exclusive</h2>\n      <p>Only a select few people get the badge.</p>\n      </li>\n      <li>\n      <h2 class=\"benefits-heading\">Your followers know to follow the right you</h2>\n      <p>Don't let fake accounts take away from your message.</p>\n      </li>\n    </ul>\n  </div>\n</div>\n<div class=\"vit-onboarding-section-footer movable\">\n  <button class=\"btn primary-btn next start next-step\" type=\"submit\">Get started</button>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"learn_step": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"vit-onboarding-section-header\">\n  <h2 class=\"step-title\">\n    <span class=\"vit-step-number\" id=\"step-1\">1</span>\n    Learn how to tweet effectively\n  </h2>\n</div>\n<div id=\"learn-step\" class=\"vit-onboarding-section-content movable\">\n  <ul class=\"questions ");if(t.s(t.f("is_badged",c,p,1),c,p,0,281,294,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("step1-landing");});c.pop();}t.b("\">\n    <li class=\"question current\" id=\"1\">\n      <p class=\"question-text\">Which Tweet will help double your rate of new followers for the day?</p>\n      <form name=\"question-1\" class=\"vit-onboarding-answer-options\">\n        <label class=\"vit-onboarding-sample-tweet option1\" for=\"ques1-opt1\">\n          <input type=\"radio\" name=\"answers\" value=\"option-1\" id=\"ques1-opt1\">\n");t.b(t.rp("vit/vit_example_10",c,p,"          "));t.b("          <p class=\"tweet-text\">Watching the <a href=\"\" onclick=\"return false;\">#Oscars</a> right now and I’m loving the fashion on the red carpet.</p>\n        </label>\n        <div class=\"vit-onboarding-answer\" id=\"answer-1\">\n          <p class=\"answer-text\">");t.b(t.rp("vit/answer11",c,p,""));t.b("</p>\n        </div>\n        <label class=\"vit-onboarding-sample-tweet option2\" for=\"ques1-opt2\">\n          <input type=\"radio\" name=\"answers\" value=\"option-2\" id=\"ques1-opt2\">\n");t.b(t.rp("vit/vit_example_22",c,p,"          "));t.b("          <p class=\"tweet-text\">I watched the <a href=\"\" onclick=\"return false;\">#Oscars</a> last night.</p>\n        </label>\n      </form>\n      <div class=\"vit-onboarding-answer\" id=\"answer-1\">\n        <p class=\"answer-text\">");t.b(t.rp("vit/answer13",c,p,""));t.b("</p>\n      </div>\n    </li>\n\n    <li class=\"question\" id=\"2\">\n      <p class=\"question-text\">Which Tweet will more of your followers engage with?</p>\n      <form name=\"question-2\" class=\"vit-onboarding-answer-options\">\n        <label class=\"vit-onboarding-sample-tweet option1\" for=\"ques2-opt1\">\n          <input type=\"radio\" name=\"answers\" value=\"option-1\" id=\"ques2-opt1\">\n");t.b(t.rp("vit/vit_example_14",c,p,"          "));t.b("          <p class=\"tweet-text\">Hi everybody, I have a few spare minutes to answer some questions. Who has one? <a href=\"\" onclick=\"return false;\">");t.b(t.v(t.f("vit_example_hashtag",c,p,0)));t.b("</a></p>\n        </label>\n        <div class=\"vit-onboarding-answer\" id=\"answer-2\">\n          <p class=\"answer-text\">");t.b(t.rp("vit/answer25",c,p,""));t.b("</p>\n        </div>\n        <label class=\"vit-onboarding-sample-tweet option2\" for=\"ques2-opt2\">\n          <input type=\"radio\" name=\"answers\" value=\"option-2\" id=\"ques2-opt2\">\n");t.b(t.rp("vit/vit_example_26",c,p,"          "));t.b("          <p class=\"tweet-text\">I want to hear from you. What do you have to say?</p>\n        </label>\n      </form>\n      <div class=\"vit-onboarding-answer\" id=\"answer-2\">\n        <p class=\"answer-text\">");t.b(t.rp("vit/answer27",c,p,""));t.b("</p>\n      </div>\n    </li>\n\n    <li class=\"question last\" id=\"3\">\n      <p class=\"question-text\">Which Tweet will get more clicks, favorites and retweets from your followers?</p>\n      <form name=\"question-1\" class=\"vit-onboarding-answer-options\">\n        <label class=\"vit-onboarding-sample-tweet option1\" for=\"ques3-opt1\">\n          <input type=\"radio\" name=\"answers\" value=\"option-1\" id=\"ques3-opt1\">\n");t.b(t.rp("vit/vit_example_18",c,p,"          "));t.b("          <p class=\"tweet-text\">I’m backstage at the Grammys. See? It’s <a href=\"\" onclick=\"return false;\">@taylorswift13</a>: <a href=\"\" onclick=\"return false;\">pic.twitter.com/...</a></p>\n        </label>\n        <div class=\"vit-onboarding-answer\" id=\"answer-3\">\n          <p class=\"answer-text\">");t.b(t.rp("vit/answer39",c,p,""));t.b("</p>\n        </div>\n        <label class=\"vit-onboarding-sample-tweet option2\" for=\"ques3-opt2\">\n          <input type=\"radio\" name=\"answers\" value=\"option-2\" id=\"ques3-opt2\">\n");t.b(t.rp("vit/vit_example_210",c,p,"          "));t.b("          <p class=\"tweet-text\">Backstage at the Grammys, standing next to Taylor Swift.</p>\n        </label>\n      </form>\n      <div class=\"vit-onboarding-answer\" id=\"answer-3\">\n        <p class=\"answer-text\">");t.b(t.rp("vit/answer311",c,p,""));t.b("</p>\n      </div>\n    </li>\n  </ul>\n</div>\n<div class=\"vit-onboarding-section-footer movable\">\n  <button class=\"btn answer\" type=\"submit\">See answer</button>\n  <button class=\"btn cancel skip\" type=\"cancel\">Skip</button>\n  <button class=\"btn next hidden next-step\" type=\"submit\">\n    <span class=\"next-step\">Next step</span>\n    <span class=\"continue\">Continue</span>\n  </button>\n</div>\n");return t.fl(); }, partials: {"vit/vit_example_10": {name:"vit/vit_example_1"},"vit/answer11": {name:"vit/answer1"},"vit/vit_example_22": {name:"vit/vit_example_2"},"vit/answer13": {name:"vit/answer1"},"vit/vit_example_14": {name:"vit/vit_example_1"},"vit/answer25": {name:"vit/answer2"},"vit/vit_example_26": {name:"vit/vit_example_2"},"vit/answer27": {name:"vit/answer2"},"vit/vit_example_18": {name:"vit/vit_example_1"},"vit/answer39": {name:"vit/answer3"},"vit/vit_example_210": {name:"vit/vit_example_2"},"vit/answer311": {name:"vit/answer3"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"onboarding": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"vit-onboarding\">\n");if(t.s(t.f("is_blackberry",c,p,1),c,p,0,46,73,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("vit/blackberry0",c,p,"    "));});c.pop();}if(!t.s(t.f("is_blackberry",c,p,1),c,p,1,0,0,"")){t.b("  <ul class=\"page-canvas verification-list ");if(t.s(t.f("is_mobile",c,p,1),c,p,0,170,176,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("mobile");});c.pop();}t.b("\">\n\n    <li class=\"verification-item ");if(!t.s(t.f("is_badged",c,p,1),c,p,1,0,0,"")){t.b("active");};if(t.s(t.f("is_badged",c,p,1),c,p,0,275,282,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("visited");});c.pop();}t.b("\" data-step=\"0\">\n");t.b(t.rp("vit/callout1",c,p,"    "));t.b("    </li>\n\n    <li class=\"verification-item ");if(t.s(t.f("is_badged",c,p,1),c,p,0,392,406,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active visited");});c.pop();}t.b("\" data-step=\"1\">\n");t.b(t.rp("vit/learn_step2",c,p,"    "));t.b("    </li>\n\n    <li class=\"verification-item ");if(t.s(t.f("is_badged",c,p,1),c,p,0,519,526,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("visited");});c.pop();}t.b("\" data-step=\"2\">\n");t.b(t.rp("vit/vits_to_follow3",c,p,"    "));t.b("    </li>\n\n    <li class=\"verification-item last-verification-item ");if(t.s(t.f("is_badged",c,p,1),c,p,0,666,673,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("visited");});c.pop();}t.b("\" data-step=\"3\">\n");t.b(t.rp("vit/phone_verification_step4",c,p,"    "));t.b("    </li>\n\n  </ul>\n");};t.b("</div>\n");return t.fl(); }, partials: {"vit/blackberry0": {name:"vit/blackberry"},"vit/callout1": {name:"vit/callout"},"vit/learn_step2": {name:"vit/learn_step"},"vit/vits_to_follow3": {name:"vit/vits_to_follow"},"vit/phone_verification_step4": {name:"vit/phone_verification_step"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"phone_verification_step": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"vit-onboarding-section-header\">\n  <h2 class=\"step-title\">\n    <span class=\"vit-step-number\" id=\"step-3\">3</span>\n    Protect your account\n  </h2>\n</div>\n<div class=\"vit-onboarding-section-content movable\">\n  <p class=\"phone-merit\">Phone numbers allow us to contact you in case there is security issue with your account:</p>\n  <form id=\"phone-verify-form\" method=\"post\" action=\"/vit_onboard/verification_done\">\n    <input type=\"hidden\" value=\"");t.b(t.v(t.f("form_authenticity_token",c,p,0)));t.b("\" name=\"authenticity_token\"/>\n    <div class=\"vit-onboarding-control-group\">\n");if(t.s(t.f("phone_device",c,p,1),c,p,0,581,649,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <input type=\"hidden\" name=\"device[id]\" value=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">\n");});c.pop();}t.b("      <div class=\"phone-number-field\">\n      <label class=\"phone-label\"><strong>Phone</strong></label>\n      <input class=\"input-large vit-onboarding-tel-input\" type=\"tel\" value=\"");if(t.s(t.f("phone_device",c,p,1),c,p,0,863,874,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("address",c,p,0)));});c.pop();}t.b("\" name=\"device[address]\" id=\"device_address\" placeholder=\"Phone number\">\n      <label class=\"control-label muted\">Including country code</label>\n      </div>\n      <p class=\"muted privacy-terms\">We will never distribute your personal information, nor use it for any other reason than to contact you in case of a security breach.</p>\n    </div>\n  </form>\n</div>\n<div class=\"vit-onboarding-section-footer movable\">\n  <button id=\"save-phone-number\" class=\"btn primary-btn\" type=\"submit\">Save phone number to profile</button>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"verification_done": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"vit-onboarding\" class=\"verification-done\">\n  <ul class=\"page-canvas verification-list\">\n    <li class=\"verification-item active last-verification-item\">\n");if(t.s(t.f("user_view",c,p,1),c,p,0,180,715,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"vit-onboarding-section-header\">\n        <h2 class=\"step-title\">\n          <span class=\"vit-step-verified\">&#10003;</span>\n          Congratulations ");t.b(t.v(t.f("name",c,p,0)));t.b("! Your Twitter account is now verified.\n        </h2>\n      </div>\n      <div class=\"vit-onboarding-section-content\">\n");t.b(t.rp("profiles/swift_profile_header0",c,p,"        "));t.b("      </div>\n      <div class=\"vit-onboarding-section-footer\">\n        <a class=\"btn next primary-btn\" href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\">\n          View your Twitter profile page\n        </a>\n      </div>\n");});c.pop();}t.b("    </li>\n  </ul>\n</div>\n");return t.fl(); }, partials: {"profiles/swift_profile_header0": {name:"profiles/swift_profile_header"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"vit_example_1": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet-header\">\n  <div class=\"avatar\"></div>\n");if(t.s(t.f("vit_example_1",c,p,1),c,p,0,76,192,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <strong class=\"fullname\">");t.b(t.v(t.f("fullname",c,p,0)));t.b("</strong>\n    <span class=\"username\"><s>@</s><b>");t.b(t.v(t.f("username",c,p,0)));t.b("</b></span>\n");});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"vit_example_2": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet-header\">\n  <div class=\"avatar\"></div>\n");if(t.s(t.f("vit_example_2",c,p,1),c,p,0,76,192,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <strong class=\"fullname\">");t.b(t.v(t.f("fullname",c,p,0)));t.b("</strong>\n    <span class=\"username\"><s>@</s><b>");t.b(t.v(t.f("username",c,p,0)));t.b("</b></span>\n");});c.pop();}t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"vits_to_follow": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"vit-onboarding-section-header\">\n  <h2 class=\"step-title\">\n    <span class=\"vit-step-number\" id=\"step-2\">2</span>\n    Connect with other interesting Twitter users\n  </h2>\n</div>\n<div class=\"vit-onboarding-section-content movable\">\n  <p class=\"follow-merit\">Increase your trustworthiness by following other verified users:<p>\n  <ul class=\"vit-onboarding-stream-item-list stream-items\">\n");if(t.s(t.f("vits_to_follow",c,p,1),c,p,0,419,511,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li class=\"vit-onboarding-stream-item stream-item\">\n");t.b(t.rp("stream_user0",c,p,"    "));t.b("    </li>\n");});c.pop();}t.b("  </ul>\n</div>\n<div class=\"vit-onboarding-section-footer movable\">\n  <button class=\"btn primary-btn next\" type=\"submit\">Next step</button>\n</div>\n");return t.fl(); }, partials: {"stream_user0": {name:"stream_user"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"web_personalization_preview": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"web_personalization_results": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("has_recs",c,p,1),c,p,0,13,344,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"flex-module web-personalization-inner js-results\">\n    <p>Here are some tailored suggestions. ");if(t.s(t.f("logged_in",c,p,1),c,p,0,136,196,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("In this preview, you may see some people you already follow.");});c.pop();}t.b("</p>\n    <ul class=\"clearfix big-avatar-list\">\n");if(t.s(t.f("items",c,p,1),c,p,0,273,314,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("big_avatar_list_item0",c,p,"        "));});c.pop();}t.b("    </ul>\n  </div>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("has_recs",c,p,1),c,p,1,0,0,"")){t.b("  <div class=\"flex-module web-personalization-inner web-personalization-empty js-results\">\n    <p>If you don&#8217;t see any suggestions here yet, that&#8217;s okay. It may take a little time. Check back in a few days.</p>\n    <a href=\"");t.b(t.v(t.f("home_path",c,p,0)));t.b("\" class=\"btn primary-btn\">\n      ");if(t.s(t.f("logged_in",c,p,1),c,p,0,669,685,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Back to timeline");});c.pop();}t.b("\n" + i);t.b("      ");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("Twitter home");};t.b("\n" + i);t.b("    </a>\n  </div>\n");};return t.fl(); }, partials: {"big_avatar_list_item0": {name:"big_avatar_list_item"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"web_personalization_settings": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"module\">\n  <div class=\"flex-module web-personalization-header\">\n");if(!t.s(t.f("do_not_track",c,p,1),c,p,1,0,0,"")){t.b("\n" + i);if(t.s(t.f("logged_in",c,p,1),c,p,0,119,176,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <h1>Tailor Twitter to your interests</h1>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("        <h1>Welcome to Twitter</h1>\n");};t.b("\n" + i);};t.b("\n" + i);if(t.s(t.f("do_not_track",c,p,1),c,p,0,315,379,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <h1>Twitter cannot provide tailored suggestions</h1>\n");});c.pop();}t.b("  </div>\n\n");if(!t.s(t.f("loading",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("show_results",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("do_not_track",c,p,1),c,p,1,0,0,"")){t.b("        <div class=\"flex-module web-personalization-inner\">\n\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,553,800,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <p>People on Twitter are talking about things you care about. Now we’ve made it easier for you to find them. We’ve tailored our suggestions based on websites you’ve recently visited that have Twitter buttons or widgets.</p>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("            <p>Twitter connects people with the things they care about, and now we’ve made them even easier to find. Check out our suggestions for you based on websites you’ve recently visited that have Twitter buttons or widgets.</p>\n");};t.b("\n" + i);t.b("          <p>For example, if you visit sports websites, we might suggest teams and players that are popular and widely followed by other Twitter users that visit those sports websites.</p>\n          <p><a href=\"");t.b(t.v(t.f("cookie_personalization_learn_more_path",c,p,0)));t.b("\">Learn more</a> about how this works and your additional privacy controls.</p>\n\n        </div>\n");};t.b("\n" + i);if(t.s(t.f("do_not_track",c,p,1),c,p,0,1499,2318,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"flex-module web-personalization-inner\">\n          <p>\n            ");if(t.s(t.f("in_eu",c,p,1),c,p,0,1596,1762,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Tailored suggestions are not currently available to you, and your visits to websites that have Twitter buttons or widgets are not collected to tailor your experience.");});c.pop();}t.b("\n" + i);t.b("            ");if(!t.s(t.f("in_eu",c,p,1),c,p,1,0,0,"")){t.b("Your browser has Do Not Track turned on. While Do Not Track is on, Twitter cannot provide tailored suggestions.");};t.b("\n" + i);t.b("          </p>\n          <p><a href=\"");t.b(t.v(t.f("cookie_personalization_learn_more_path",c,p,0)));t.b("\">Learn more</a> about how this works and your additional privacy controls.</p>\n          <p>\n            <a href=\"");t.b(t.v(t.f("home_path",c,p,0)));t.b("\" class=\"btn primary-btn\">\n              ");if(t.s(t.f("logged_in",c,p,1),c,p,0,2179,2195,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Back to timeline");});c.pop();}t.b("\n" + i);t.b("              ");if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("Twitter home");};t.b("\n" + i);t.b("            </a>\n          </p>\n        </div>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("do_not_track",c,p,1),c,p,1,0,0,"")){t.b("        <div class=\"flex-module web-personalization-footer\">\n          <p>\n            <button class=\"js-web-personalization-allow btn primary-btn\">OK</button>\n            <button class=\"js-web-personalization-disallow btn\">Turn off</button>\n          </p>\n          <p>If you don’t want tailored suggestions, you can turn off this feature. Then your visits to websites that have Twitter buttons or widgets will no longer be collected to tailor your experience.</p>\n        </div>\n");};};t.b("\n" + i);if(t.s(t.f("show_results",c,p,1),c,p,0,2910,3713,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("results_loading",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("results",c,p,1),c,p,0,2958,3010,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("web_personalization_results0",c,p,"          "));});c.pop();}};if(t.s(t.f("results_loading",c,p,1),c,p,0,3076,3235,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"flex-module web-personalization-inner js-results\">\n          <p><span class=\"spinner\" title=\"Loading...\"></span></p>\n        </div>\n");});c.pop();}t.b("\n" + i);t.b("      <div class=\"flex-module web-personalization-footer\">\n        <p>\n          <button class=\"js-web-personalization-turnoff btn\">Turn off</button>\n        </p>\n        <p>If you don’t want tailored suggestions, you can turn off this feature. Then your visits to websites that have Twitter buttons or widgets will no longer be collected to tailor your experience. <a href=\"");t.b(t.v(t.f("cookie_personalization_learn_more_path",c,p,0)));t.b("\">Learn more</a>.</p>\n      </div>\n");});c.pop();}};t.b("\n" + i);if(t.s(t.f("loading",c,p,1),c,p,0,3761,3893,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"flex-module web-personalization-inner\">\n      <p><span class=\"spinner\" title=\"Loading...\"></span></p>\n    </div>\n");});c.pop();}t.b("</div>\n\n");if(!t.s(t.f("loading",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("show_results",c,p,1),c,p,0,3946,4206,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("      <div class=\"module\">\n        <div class=\"flex-module web-personalization-signup js-web-personalization-signup\">\n          <h2>Join Twitter today</h2>\n");t.b(t.rp("partial_signup_form1",c,p,"          "));t.b("        </div>\n      </div>\n");};});c.pop();}};return t.fl(); }, partials: {"web_personalization_results0": {name:"web_personalization_results"},"partial_signup_form1": {name:"partial_signup_form"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"welcome_ambassador": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"user-details clearfix ");t.b(t.v(t.f("lang",c,p,0)));t.b("\">\n  <img src=\"");t.b(t.v(t.f("reasonably_small_profile_image_url",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-user-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"/>\n  <h4>\n    You are now following <strong>");t.b(t.v(t.f("name",c,p,0)));t.b("</strong>\n");if(t.s(t.f("verified",c,p,1),c,p,0,212,259,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <span class=\"verified-icon\"></span>\n");});c.pop();}t.b("  </h4>\n  <div>\n    <span class=\"user-screen-name\">@");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</span>\n    <span class=\"location\">");t.b(t.v(t.f("location",c,p,0)));t.b("</span>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"welcome_five_flow": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"welcome-five-content welcome-follow-five\">\n\n  <div class=\"welcome-five-sidebar\">\n    <div class=\"welcome-five-sidebar-inner\">\n      <div class=\"js-flow-step welcome-five-header-module\"/>\n\n      <div class=\"js-welcome-search content-searchbar\" style=\"display: none;\">\n        <form class=\"js-who-to-follow-search welcome-five-flow-search\" action=\"");t.b(t.v(t.f("welcome_search_form_path",c,p,0)));t.b("\" method=\"GET\">\n          <input type=\"text\" value=\"\" name=\"q\" placeholder='Find Lady Gaga, football, news...' />\n          <span class=\"glass\">\n            <i class=\"submit input-search js-submit\" />\n          </span>\n        </form>\n      </div>\n    </div>\n\n    <div class=\"welcome-five-sidebar-button\">\n      <div class=\"js-welcome-dashboard-footer\">\n        <a class=\"js-skip-link skip-link\" href=\"");t.b(t.v(t.f("welcome_recommendations_path",c,p,0)));t.b("\">Skip this step &raquo;</a>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"welcome-five-main clearfix\">\n    \n    <div class=\"welcome-five-main-inner\">\n      <div class=\"js-back-to-stream back-to-stream\">\n        <span class=\"js-button btn\">Back </span>\n      </div>\n\n      <div class=\"js-welcome-five-main-content\"/>\n\n");t.b(t.rp("stream_manager0",c,p,"      "));t.b("    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {"stream_manager0": {name:"stream_manager"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"welcome_five_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"flex-module header-half\">\n  <h2>");t.b(t.v(t.f("title",c,p,0)));t.b("</h2>\n  <div class=\"subheading\">");t.b(t.t(t.f("subtitle",c,p,0)));t.b("</div>\n</div>\n\n<div class=\"flex-module progress-half\">\n  \n  <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\n    <tr>\n      <td width=\"99%\">\n");if(t.s(t.f("show_progress",c,p,1),c,p,0,268,462,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <div class=\"progressbar-well\">\n            <div class=\"ui-progressbar js-progressbar\"></div>\n            <div class=\"progress-label js-progress-label\"></div>\n          </div>\n");});c.pop();}t.b("      </td>\n\n      <td width=\"1%\">\n");if(t.s(t.f("next_enabled",c,p,1),c,p,0,541,675,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <a href=\"");t.b(t.v(t.f("continue_route",c,p,0)));t.b("\" class=\"button js-next-btn ");if(t.s(t.f("last_step",c,p,1),c,p,0,621,631,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" last-step");});c.pop();}t.b("\">");t.b(t.v(t.f("button_text",c,p,0)));t.b("</a>\n");});c.pop();}if(!t.s(t.f("next_enabled",c,p,1),c,p,1,0,0,"")){t.b("          <a class=\"button disabled js-next-btn\">");t.b(t.v(t.f("button_text",c,p,0)));t.b("</a>\n");};t.b("      </td>\n    </tr>\n  </table>\n</div>\n\n<div class=\"left-arrow\"></div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"welcome_five_services_buttons": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"welcome-five-services-container clearfix\">\n");if(t.s(t.f("services",c,p,1),c,p,0,70,334,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"button js-service-row\" data-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-popup=\"");t.b(t.v(t.f("popup",c,p,0)));t.b("\" data-service-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-width=\"");t.b(t.v(t.f("width",c,p,0)));t.b("\" data-height=\"");t.b(t.v(t.f("height",c,p,0)));t.b("\">\n      <span class=\"service-button-inner service-button-inner-");t.b(t.v(t.f("class",c,p,0)));t.b("\"><b>");t.b(t.v(t.f("name",c,p,0)));t.b("</b></span>\n    </div>\n");});c.pop();}t.b("\n" + i);t.b("  <p class=\"import-help\">\n");t.b(t.rp("import_disclaimer0",c,p,"    "));t.b("  </p>\n</div>\n");return t.fl(); }, partials: {"import_disclaimer0": {name:"import_disclaimer"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"welcome_footer_steps": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"outerin\" style=\" ");if(t.s(t.f("fade_in",c,p,1),c,p,0,41,55,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("display: none;");});c.pop();}t.b(" \"><ul>\n\n");if(t.s(t.f("step_nextto_recommendations",c,p,1),c,p,0,108,271,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"right next-step\">\n    <a href=\"");t.b(t.v(t.f("welcome_recommendations_path",c,p,0)));t.b("\" class=\"button selected\">\n      Next Step: <em>Recommendations</em>\n    </a>\n  </li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("step_nextto_interests",c,p,1),c,p,0,331,482,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"right next-step\">\n    <a href=\"");t.b(t.v(t.f("welcome_interests_path",c,p,0)));t.b("\" class=\"button selected\">\n      Next Step: <em>Interests</em>\n    </a>\n  </li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("step_backto_starter",c,p,1),c,p,0,534,673,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"left prev-step\">\n    <a href=\"");t.b(t.v(t.f("welcome_starter_path",c,p,0)));t.b("\" class=\"button\">\n      Back to: <em>Suggestions</em>\n    </a>\n  </li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("step_backto_recommendations",c,p,1),c,p,0,731,878,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"left prev-step\">\n    <a href=\"");t.b(t.v(t.f("welcome_recommendations_path",c,p,0)));t.b("\" class=\"button\">\n      Back to: <em>Suggestions</em>\n    </a>\n  </li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("step_nextto_import",c,p,1),c,p,0,935,1081,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"right next-step\">\n    <a href=\"");t.b(t.v(t.f("welcome_import_path",c,p,0)));t.b("\" class=\"button selected\">\n      Next Step: <em>Friends</em>\n    </a>\n  </li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("step_backto_interests",c,p,1),c,p,0,1132,1271,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"left prev-step\">\n    <a href=\"");t.b(t.v(t.f("welcome_interests_path",c,p,0)));t.b("\" class=\"button\">\n      Back to: <em>Interests</em>\n    </a>\n  </li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("step_backto_import",c,p,1),c,p,0,1322,1456,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"left prev-step\">\n    <a href=\"");t.b(t.v(t.f("welcome_import_path",c,p,0)));t.b("\" class=\"button\">\n      Back to: <em>Friends</em>\n    </a>\n  </li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("step_nextto_finish",c,p,1),c,p,0,1504,1597,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<li class=\"right next-step\">\n  <a href=\"#\" class=\"button selected\">\n    Finish\n  </a>\n</li>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("step_nextto_skip",c,p,1),c,p,0,1643,1742,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <li class=\"right next-step\">\n    <a href=\"#\" class=\"button\">\n      Skip import\n    </a>\n  </li>\n");});c.pop();}t.b("</ul></div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"welcome_header_steps": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<ol style=\"");if(t.s(t.f("fade_in",c,p,1),c,p,0,187,201,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("display: none;");});c.pop();}t.b("\">\n");if(t.s(t.f("steps",c,p,1),c,p,0,228,456,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li class=\"");t.b(t.v(t.f("id",c,p,0)));t.b(" step");t.b(t.v(t.f("i",c,p,0)));t.b(" ");if(t.s(t.f("last",c,p,1),c,p,0,270,274,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("last");});c.pop();}t.b("\">\n      <div class=\"");if(t.s(t.f("first",c,p,1),c,p,0,314,323,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("prev-step");});c.pop();}if(!t.s(t.f("first",c,p,1),c,p,1,0,0,"")){t.b("next-step");};t.b("\">\n        <a href=\"");t.b(t.v(t.f("route",c,p,0)));t.b("\"><span /><strong>");t.b(t.v(t.f("name",c,p,0)));t.b("</strong></a>\n      </div>\n    </li>\n");});c.pop();}t.b("</ol>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"welcome_learn_flow": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"dashboard\">\n  <div class=\"module welcome-header-module js-flow-step\"></div>\n\n  <div class=\"module welcome-dashboard js-welcome-dashboard\">\n    <div class=\"js-welcome-stream-header\">\n      <div class=\"js-welcome-search content-searchbar\" style=\"display: none;\">\n        <form class=\"js-who-to-follow-search\" action=\"");t.b(t.v(t.f("welcome_search_form_path",c,p,0)));t.b("\" method=\"GET\">\n          <span class=\"input-search js-submit\"><i class=\"nav-search\"></i></span>\n          <input type=\"text\" value=\"\" name=\"q\" placeholder=\"Search for...\">\n        </form>\n      </div>\n      <div class=\"js-back-to-stream back-to-stream\">\n        <span class=\"js-button btn\">Back </span>\n\n        <h3 class=\"js-dashboard-stream-title dashboard-stream-title\"></h3>\n      </div>\n      <div class=\"js-stream-header dashboard-stream-header\"></div>\n    </div>\n    <div class=\"stream js-stream-manager-container stream-manager-container\"></div>\n    <div class=\"js-content-container\"></div>\n    <div class=\"js-back-to-import back-to-import\"><a href=\"");t.b(t.v(t.f("welcome_import_path",c,p,0)));t.b("\">Try another service</a></div>\n    <div class=\"js-welcome-dashboard-footer welcome-dashboard-footer\">\n      <a class=\"js-skip-link skip-link\" href=\"");t.b(t.v(t.f("welcome_recommendations_path",c,p,0)));t.b("\">Skip this step &raquo;</a>\n    </div>\n  </div>\n\n</div>\n<div class=\"content-main js-content-main breakable\">\n\n  <div class=\"content-header js-content-header\">\n    <div class=\"header-inner\">\n      <h2>\n        Preview\n      </h2>\n      <div class=\"example-tweet-info subheader\">\n        Examples of Tweets from people you choose to follow appear here. You&#8217;ll see your full timeline once you&#8217;re all set up.\n      </div>\n    </div>\n  </div>\n\n  <div class=\"js-tweet-preview-container\"></div>\n\n  <div class=\"welcome-faux-tweet-stream js-welcome-faux-tweet-stream\">\n    <div class=\"unfocusable-stream-item stream-item js-intro-tweet\">\n      <div class=\"tweet js-unclickable-tweet unclickable-tweet\">\n        <div class=\"content\">\n          <div class=\"stream-item-header\">\n            <span class=\"account-group js-account-group js-action-profile\">\n              <span class=\"avatar-group\" >\n                <span class=\"avatar ");if(!t.s(t.f("abtest_localized_image_welcome_flow_235_any_bucket",c,p,1),c,p,1,0,0,"")){t.b("welcome-teacher");};if(t.s(t.f("abtest_localized_image_welcome_flow_235_japan_photo",c,p,1),c,p,0,2334,2358,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("welcome-teacher-ab-photo");});c.pop();}if(t.s(t.f("abtest_localized_image_welcome_flow_235_japan_drawing",c,p,1),c,p,0,2472,2498,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("welcome-teacher-ab-drawing");});c.pop();}t.b("\"/>\n                <span class=\"avatar-well size48\"></span>\n              </span>\n              <strong class=\"fullname\">The Twitter Teacher</strong>\n            </span>\n            <small class=\"time\">\n              1 min\n            </small>\n          </div>\n          <p>This is a Tweet. Tweets are short messages that have up to 140 characters and can contain links like <a>http://twitter.com</a>.</p>\n        </div>\n        \n      </div>\n    </div>\n    \n\n    <div class=\"unfocusable-stream-item\">\n      <div class=\"faux-tweet\">\n        <div class=\"content\"></div>\n      </div>\n    </div>\n    <div class=\"unfocusable-stream-item\">\n      <div class=\"faux-tweet\">\n        <div class=\"content\"></div>\n      </div>\n    </div>\n    <div class=\"unfocusable-stream-item\">\n      <div class=\"faux-tweet\">\n        <div class=\"content\"></div>\n      </div>\n    </div>\n    <div class=\"unfocusable-stream-item\">\n      <div class=\"faux-tweet\">\n        <div class=\"content\"></div>\n      </div>\n    </div>\n    <div class=\"unfocusable-stream-item\">\n      <div class=\"faux-tweet\">\n        <div class=\"content\"></div>\n      </div>\n    </div>\n    <div class=\"unfocusable-stream-item\">\n      <div class=\"faux-tweet\">\n        <div class=\"content\"></div>\n      </div>\n    </div>\n  </div>\n  <div class=\"component\">\n    <div class=\"stream-end\">\n      <div class=\"stream-end-inner\">\n        <i class=\"bird-etched\"></i>\n      </div>\n    </div>\n  </div>\n\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"welcome_learn_header": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"flex-module header-half\">\n  <h2>");t.b(t.v(t.f("title",c,p,0)));t.b("</h2>\n  <div class=\"subheading\">");t.b(t.t(t.f("subtitle",c,p,0)));t.b("</div>\n");if(t.s(t.f("ad_referal",c,p,1),c,p,0,123,272,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("ad_parlor",c,p,1),c,p,0,142,255,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <img src='https://fbads.adparlor.com/conversion.php?adid=1193' alt='AP_pixel' height='1' width='1' />\n");});c.pop();}});c.pop();}t.b("</div>\n\n<div class=\"flex-module progress-half\">\n  \n  <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n    <tr>\n      <td width=\"99%\">\n");if(t.s(t.f("show_progress",c,p,1),c,p,0,463,657,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <div class=\"progressbar-well\">\n            <div class=\"ui-progressbar js-progressbar\"></div>\n            <div class=\"progress-label js-progress-label\"></div>\n          </div>\n");});c.pop();}t.b("      </td>\n\n      <td width=\"1%\">\n");if(t.s(t.f("next_enabled",c,p,1),c,p,0,736,867,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <a href=\"");t.b(t.v(t.f("continue_route",c,p,0)));t.b("\" class=\"btn js-next-btn ");if(t.s(t.f("last_step",c,p,1),c,p,0,813,823,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" last-step");});c.pop();}t.b("\">");t.b(t.v(t.f("button_text",c,p,0)));t.b("</a>\n");});c.pop();}if(!t.s(t.f("next_enabled",c,p,1),c,p,1,0,0,"")){t.b("          <a class=\"btn disabled js-next-btn\">");t.b(t.v(t.f("button_text",c,p,0)));t.b("</a>\n");};t.b("      </td>\n    </tr>\n  </table>\n</div>\n\n");if(t.s(t.f("stream_arrow",c,p,1),c,p,0,1061,1095,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"down-arrow\"></div>\n");});c.pop();}t.b("\n" + i);if(!t.s(t.f("stream_arrow",c,p,1),c,p,1,0,0,"")){t.b("  <div class=\"left-arrow\"></div>\n");};return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"welcome_learn_profile": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"form-vertical js-profile-form\">\n  <div class=\"image-error clearfix js-image-error\">\n    <a class=\"dismiss js-dismiss\" href=\"#\"><i class=\"close\"></i></a>\n    <span class=\"js-image-error-text\"></span>\n  </div>\n\n  <div class=\"control-group\">\n\n    <div class=\"js-current-profile-picture-wrapper profile-form-image-wrapper avatar size96\">\n      <img class=\"js-current-profile-picture profile-form-image avatar size96\" src=\"");t.b(t.v(t.f("reasonably_small_profile_image_url",c,p,0)));t.b("\" alt=\"Profile photo thumbnail\">\n      <div class=\"spinner\"></div>\n    </div>\n\n    <form method=\"post\" action=\"");t.b(t.v(t.f("api_url",c,p,0)));t.b("/1/account/update_profile_image.iframe\" enctype=\"multipart/form-data\" class=\"js-upload-form profile-image-upload-form\" target=\"welcomeProfilePhotoUpload\">\n      <div class=\"file-input-wrapper\">\n        <button class=\"js-upload-btn btn\" href=\"#\">\n          Upload image\n        </button>\n        <input class=\"js-profile-image-input\" type=\"file\" name=\"image\">\n      </div>\n\n      <p>Maximum size of 700K. JPG, GIF, PNG.</p>\n\n      <input type=\"hidden\" name=\"iframe_callback\" value=\"window.top.twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback\">\n      <input type=\"hidden\" name=\"post_authenticity_token\" value=\"");t.b(t.v(t.f("post_authenticity_token",c,p,0)));t.b("\">\n    </form>\n    <iframe class=\"turkey-post-target\" name=\"welcomeProfilePhotoUpload\"></iframe>\n  </div>\n\n  <div class=\"control-group\">\n    <label class=\"control-label\" for=\"welcomeProfileBio\">Bio</label>\n    <div class=\"bio-count\"><span class=\"js-bio-count\">0</span> / 160</div>\n    <div class=\"controls\">\n      <textarea id=\"welcomeProfileBio\" class=\"welcome-profile-bio\" name=\"description\" placeholder=\"Rocket ship builder, pizza expert, loves the Giants, parent.\">");t.b(t.v(t.f("description",c,p,0)));t.b("</textarea>\n    </div>\n  </div\n</div>\n\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"welcome_to_phoenix_banner": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"welcome-banner-outer banner-outer\">\n  <div class=\"welcome-banner banner\">\n    <div class=\"welcome-banner-inside banner-inside\">\n      <a class='pane-close' href='#'>Close&nbsp;<span>&times;</span></a>\n      <span>\n        Welcome to <a href=\"");t.b(t.v(t.f("welcome_search_results_path",c,p,0)));t.b("\">#NewTwitter</a>! Read up on <a target=\"_blank\" href=\"");t.b(t.v(t.f("whats_new_path",c,p,0)));t.b("\">what’s new</a>.\n      </span>\n    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"who_to_follow": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"main-content\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,53,1354,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"page-header who-to-follow-header\">\n\n      <form class=\"who-to-follow-search\" action=\"");t.b(t.v(t.f("who_to_follow_search_form_path",c,p,0)));t.b("\" method=\"GET\">\n        <input type=\"text\" value=\"\" name=\"q\" placeholder=\"Search by name or topic\" />\n        <div class=\"submit button\">Search</div>\n      </form>\n\n      <h1>Who to follow</h1>\n\n      <ul class=\"stream-tabs\">\n");if(t.s(t.f("logged_in",c,p,1),c,p,0,431,682,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li class=\"stream-tab stream-tab-suggestions ");if(t.s(t.f("active_tab_suggestions",c,p,1),c,p,0,512,518,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n          <a class=\"tab-text\" title='View Suggestions' href=\"");t.b(t.v(t.f("who_to_follow_suggestions_path",c,p,0)));t.b("\">View Suggestions</a>\n        </li>\n");});c.pop();}t.b("        <li class=\"stream-tab stream-tab-interests ");if(t.s(t.f("active_tab_interests",c,p,1),c,p,0,773,779,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n          <a class=\"tab-text\" title='Browse Interests' href=\"");t.b(t.v(t.f("who_to_follow_interests_path",c,p,0)));t.b("\">Browse Interests</a>\n        </li>\n");if(t.s(t.f("decider_contact_import",c,p,1),c,p,0,966,1223,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("logged_in",c,p,1),c,p,0,983,1206,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li class=\"stream-tab stream-tab-import ");if(t.s(t.f("active_tab_import",c,p,1),c,p,0,1054,1060,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n          <a class=\"tab-text\" title='Find Friends' href=\"");t.b(t.v(t.f("who_to_follow_import_path",c,p,0)));t.b("\">Find Friends</a>\n        </li>\n");});c.pop();}});c.pop();}t.b("      </ul>\n    </div>\n\n    <div class=\"who-to-follow-stream\">\n");t.b(t.rp("stream_manager0",c,p,"      "));t.b("    </div>\n\n");});c.pop();}t.b("</div>\n\n<div class=\"dashboard\">\n</div>\n\n");t.b(t.rp("details_pane_container1",c,p,""));return t.fl(); }, partials: {"stream_manager0": {name:"stream_manager"},"details_pane_container1": {name:"details_pane_container"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"who_to_follow_links": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<p class=\"wtf-links\">\n  <span>Find accounts to follow:</span>\n  <a href=\"");t.b(t.v(t.f("who_to_follow_interests_path",c,p,0)));t.b("\">Browse interests</a>\n");if(t.s(t.f("decider_contact_import",c,p,1),c,p,0,157,255,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <span class=\"dot\">&middot;</span>\n  <a href=\"");t.b(t.v(t.f("who_to_follow_import_path",c,p,0)));t.b("\">Find friends</a>\n");});c.pop();}t.b("</p>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"activity_modal": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id='activity-modal' style='display: none'>\n  <div class='left-pointer'></div>\n  <a class='dismiss' title=\"Hide\">&times;</a>\n  <p class='header'><span class='new'>New!</span> Activity and @");t.b(t.v(t.f("current_user_screen_name",c,p,0)));t.b("</p>\n  <p class='desc'>\n      View favorites, follows, retweets and more by people you follow in <strong>Activity</strong>.\n  </p>\n  <p class='extra-blurb desc'>\n    View your mentions, tweets that were retweeted and more in <strong>@");t.b(t.v(t.f("current_user_screen_name",c,p,0)));t.b("</strong>.\n  </p>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"details_pane": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"inner-pane\">\n  <div class='pane-toolbar pane-built-in'>\n");if(t.s(t.f("popable",c,p,1),c,p,0,84,180,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <a class='pane-back toolbar-control' href='#'><span>&larr;</span> ");t.b(t.v(t.f("back_label",c,p,0)));t.b("</a>\n");});c.pop();}if(t.s(t.f("closable",c,p,1),c,p,0,210,299,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <a class='pane-close toolbar-control' href='#'>close <span>&times;</span></a>\n");});c.pop();}t.b("    <br style='clear: both' />\n  </div>\n  <div class=\"pane-components\">\n    <div class=\"pane-components-inner\">\n    </div>\n  </div>\n</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"details_pane_container": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"details-pane-outer\">\n  <div class=\"details-pane-shell\">\n    <div class=\"details-pane\">\n      ");t.b(t.t(t.f("pane",c,p,0)));t.b("\n" + i);t.b("    </div>\n  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"home_page": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"main-content\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,53,3328,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"page-header home-header\">\n      <div id=\"main-tweet-box\">\n");t.b(t.rp("posting_tweet_box0",c,p,"        "));t.b("      </div>\n      <ul class=\"stream-tabs\">\n        <li class=\"stream-tab stream-tab-home ");if(t.s(t.f("active_tab_home",c,p,1),c,p,0,269,275,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n          <a class=\"tab-text\" title='All you follow' href=\"");t.b(t.v(t.f("index_path",c,p,0)));t.b("\">Timeline</a>\n        </li>\n\n");if(t.s(t.f("decider_activity_read",c,p,1),c,p,0,435,1026,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("decider_activity_dark_read",c,p,1),c,p,0,477,986,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <li class=\"stream-tab stream-tab-your_activity ");if(t.s(t.f("active_tab_your_activity",c,p,1),c,p,0,566,572,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n              <a class=\"tab-text\" title='@");t.b(t.v(t.f("current_user_screen_name",c,p,0)));t.b("' href=\"");t.b(t.v(t.f("your_activity_path",c,p,0)));t.b("\">@");t.b(t.v(t.f("current_user_screen_name",c,p,0)));t.b("</a>\n            </li>\n            <li class=\"stream-tab stream-tab-activity ");if(t.s(t.f("active_tab_activity",c,p,1),c,p,0,836,842,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n              <a class=\"tab-text\" title='Activity' href=\"");t.b(t.v(t.f("activity_path",c,p,0)));t.b("\">Activity</a>\n            </li>\n");});c.pop();}});c.pop();}t.b("\n" + i);if(!t.s(t.f("decider_activity_read",c,p,1),c,p,1,0,0,"")){t.b("          <li class=\"stream-tab stream-tab-mentions ");if(t.s(t.f("active_tab_mentions",c,p,1),c,p,0,1165,1171,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n            <a class=\"tab-text\" title='Mentions' href=\"");t.b(t.v(t.f("mentions_path",c,p,0)));t.b("\">@Mentions</a>\n          </li>\n          <li class=\"stream-tab stream-tab-retweets dropdown-link ");if(t.s(t.f("active_tab_retweets",c,p,1),c,p,0,1392,1398,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n            <a class=\"tab-text\" href=\"#\">Retweets<i></i></a>\n          </li>\n");};t.b("\n" + i);t.b("        <li class=\"stream-tab stream-tab-searches dropdown-link ");if(t.s(t.f("active_tab_searches",c,p,1),c,p,0,1626,1632,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n          <a class=\"tab-text\" href=\"#\">Searches<i></i></a>\n        </li>\n\n        <li class=\"stream-tab stream-tab-lists dropdown-link ");if(t.s(t.f("active_tab_lists",c,p,1),c,p,0,1815,1821,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n          <a class=\"tab-text\" href=\"#\">Lists<i></i></a>\n        </li>\n");if(t.s(t.f("decider_network_discovery",c,p,1),c,p,0,1953,2211,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <li class=\"stream-tab stream-tab-discovery activity-subtabs ");if(t.s(t.f("active_tab_network_discovery",c,p,1),c,p,0,2057,2063,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n            <a class=\"tab-text\" title='Discover' href=\"");t.b(t.v(t.f("discovery_path",c,p,0)));t.b("\">Discover</a>\n          </li>\n");});c.pop();}t.b("      </ul>\n    </div>\n");if(t.s(t.f("decider_activity_read",c,p,1),c,p,0,2295,3092,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("decider_activity_dark_read",c,p,1),c,p,0,2333,3056,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("activity_subtabs",c,p,1),c,p,0,2363,3028,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <ul class=\"stream-subtabs stream-subtabs-activity ");if(t.s(t.f("active_tab_activity",c,p,1),c,p,0,2448,2454,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n            <li class=\"stream-tab stream-subtab-your_activity ");if(t.s(t.f("active_subtab_your_activity",c,p,1),c,p,0,2575,2581,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n              <a class=\"tab-text\" href=\"");t.b(t.v(t.f("your_activity_path",c,p,0)));t.b("\">about you</a>\n            </li>\n            <li class=\"stream-tab stream-tab-separator\">&middot;</li>\n            <li class=\"stream-tab stream-subtab-activity ");if(t.s(t.f("active_subtab_activity",c,p,1),c,p,0,2866,2872,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">\n              <a class=\"tab-text\" href=\"");t.b(t.v(t.f("activity_path",c,p,0)));t.b("\">by people you follow</a>\n            </li>\n          </ul>\n");});c.pop();}});c.pop();}});c.pop();}t.b(t.rp("stream_manager1",c,p,"    "));t.b("    ");if(t.s(t.f("rendering_on_server",c,p,1),c,p,0,3171,3301,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<script>twttr.tweetsVisibleTime = new Date();if (window.ttft) window.ttft.serverRendered('home');twttr.keynoteTTFTPing();</script>");});c.pop();}t.b("\n" + i);});c.pop();}t.b("</div>\n<div class=\"dashboard\">\n");if(t.s(t.f("render_page_content",c,p,1),c,p,0,3410,3483,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("current_user",c,p,1),c,p,0,3432,3463,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("home_dashboard2",c,p,"      "));});c.pop();}});c.pop();}t.b("</div>\n\n");t.b(t.rp("details_pane_container3",c,p,""));return t.fl(); }, partials: {"posting_tweet_box0": {name:"posting_tweet_box"},"stream_manager1": {name:"stream_manager"},"home_dashboard2": {name:"home_dashboard"},"details_pane_container3": {name:"details_pane_container"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"message_drawer": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"message ");if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("type",c,p,0)));};t.b("\">\n  <div class=\"message-inside\">\n    <span class=\"message-text\">");t.b(t.t(t.f("text",c,p,0)));t.b("</span\n    >");if(t.s(t.f("close_button",c,p,1),c,p,0,180,219,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<a class=\"dismiss\" href=\"#\">&times;</a>");});c.pop();}t.b("\n" + i);t.b("  </div>\n</div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"message_notification": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("message",c,p,1),c,p,0,12,435,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div data-sender-id='");t.b(t.v(t.f("sender_screen_name",c,p,0)));t.b("' data-message-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" class='notification'>\n  <a class='dismiss' href='#'>&times;</a>\n  <h1>New Message from ");t.b(t.t(t.f("sender_screen_name",c,p,0)));t.b("</h1>\n  <div class='message-text'>");t.b(t.t(t.f("text",c,p,0)));t.b("</div>\n  <div class=\"message-notification-reply-box\">\n    <div class=\"message-notification-reply-editor\"></div>\n    <div class=\"message-notification-reply-button button\">Send</div>\n  </div>\n</div>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"pill_css": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b(".profile-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" a {\n");if(t.s(t.f("profile_link_color",c,p,1),c,p,0,61,111,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    color: #");t.b(t.v(t.f("profile_link_color",c,p,0)));t.b(" !important;\n");});c.pop();}t.b("}\n\na:hover .geo-pin, body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .stream-item:hover .geo-pin {\n  background-color: #");t.b(t.v(t.f("profile_link_color",c,p,0)));t.b(";\n}");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"posting_tweet_box": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form method=\"post\" action=\"/status/update\">\n  <div class=\"tweet-box condensed\">\n    <div class=\"tweet-box-title\">\n      <h2>What’s happening?</h2>\n    </div>\n    <div class=\"text-area\">\n      <div class=\"text-area-editor twttr-editor\">\n        <textarea class=\"twitter-anywhere-tweet-box-editor\" name=\"status\" style=\"width: 482px; height: 36px;\"></textarea>\n      </div>\n    </div>\n  </div>\n</form>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"stream_activity": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class='stream-activity-line'><i></i>");t.b(t.t(t.f("sentence",c,p,0)));t.b("</span>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_contributor": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("contributor",c,p,1),c,p,0,16,170,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <span class=\"tweet-contributors\">by <a href=\"");t.b(t.v(t.f("profile_path",c,p,0)));t.b("\" class=\"user-profile-link\" data-screen-name=\"");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a></span>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_dogear": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet-dogear\"></div>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_labels": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("is_top_tweet",c,p,1),c,p,0,17,225,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span class=\"tweet-context icon-link\"><i class=\"badge-tweet badge-tweet-top\"></i>");if(t.s(t.f("retweet_count",c,p,1),c,p,0,121,154,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Retweeted ");t.b(t.v(t.f("retweet_count",c,p,0)));t.b(" times");});c.pop();}if(!t.s(t.f("retweet_count",c,p,1),c,p,1,0,0,"")){t.b("Top Tweet");};t.b("</span>\n");});c.pop();}t.b("\n" + i);if(t.s(t.f("is_sponsored",c,p,1),c,p,0,261,931,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <a href=\"");if(t.s(t.f("retweeting_status",c,p,1),c,p,0,295,329,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("user",c,p,1),c,p,0,304,320,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_path",c,p,0)));});c.pop();}});c.pop();}if(!t.s(t.f("retweeting_status",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("user",c,p,1),c,p,0,382,398,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("profile_path",c,p,0)));});c.pop();}};t.b("\" class=\"icon-link promoted-arrow tweet-context user-profile-link js-action-profile-promoted\" data-user-id=\"");if(t.s(t.f("user",c,p,1),c,p,0,546,552,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("id",c,p,0)));});c.pop();}t.b("\" title=\"");t.b(t.v(t.f("disclosure_text",c,p,0)));t.b("\"><span><i class=\"badge-tweet badge-tweet-");t.b(t.v(t.f("disclosure_type",c,p,0)));t.b("\"></i><b>Promoted by ");t.b(t.v(t.f("advertiser_name",c,p,0)));t.b("</b></span></a>\n\n");if(t.s(t.f("in_home_page",c,p,1),c,p,0,726,913,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("rendering_on_server",c,p,1),c,p,1,0,0,"")){t.b("      <a class=\"icon-link tweet-feedback dismiss-action js-action-dismiss\"><i></i><b>Dismiss</b></a>\n");};t.b("    ");t.b(t.t(t.f("social_context",c,p,0)));t.b("\n" + i);});c.pop();}});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_meta": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class='tweet-meta'>\n  <span class='icons'>\n");if(t.s(t.f("is_sponsored",c,p,1),c,p,0,69,199,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("retweet_count",c,p,1),c,p,0,94,176,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class='retweet-icon'></span> <em>");t.b(t.v(t.f("retweet_count_text",c,p,0)));t.b("</em>\n");});c.pop();}});c.pop();}t.b("\n" + i);if(!t.s(t.f("decider_activity_read",c,p,1),c,p,1,0,0,"")){if(!t.s(t.f("is_sponsored",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("was_retweeted",c,p,1),c,p,0,299,467,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("retweeting_status",c,p,1),c,p,0,332,436,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <span class='retweet-icon'></span> ");if(t.s(t.f("user",c,p,1),c,p,0,389,416,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<em>by ");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</em>");});c.pop();}t.b("\n" + i);});c.pop();}});c.pop();}};};t.b("\n" + i);t.b("    <div class=\"extra-icons\">\n");if(!t.s(t.f("can_expand",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("is_reply",c,p,1),c,p,0,615,689,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span class='reply-icon icon js-reply-notice'>@</span>\n");});c.pop();}t.b("        <span class=\"inlinemedia-icons js-icon-container\"></span>\n        ");if(t.s(t.f("show_geo_icon",c,p,1),c,p,0,795,824,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"geo-pin\"></span>");});c.pop();}t.b("\n" + i);};if(t.s(t.f("can_expand",c,p,1),c,p,0,886,922,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("tweet_timestamp0",c,p,"        "));});c.pop();}t.b("    </div>\n  </span>\n</div>\n\n");if(t.s(t.f("can_expand",c,p,1),c,p,0,982,1004,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("tweet_actions1",c,p,"  "));});c.pop();}return t.fl(); }, partials: {"tweet_timestamp0": {name:"tweet_timestamp"},"tweet_actions1": {name:"tweet_actions"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_source": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class=\"tweet-source\">via ");t.b(t.t(t.f("source",c,p,0)));t.b("</span>");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_text": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"tweet-text js-tweet-text\">");t.b(t.t(t.f("linkified_text",c,p,0)));t.b("</div>\n");return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_user_image_48": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("user",c,p,1),c,p,0,9,156,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<img height=\"48\" width=\"48\" src='");t.b(t.v(t.f("profile_image_url",c,p,0)));t.b("' alt='");t.b(t.v(t.f("name",c,p,0)));t.b("' class='user-profile-link js-action-profile-avatar' data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("'/>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"tweet_user_name": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("user",c,p,1),c,p,0,9,403,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class='tweet-user-name'>\n  <a class='tweet-screen-name user-profile-link js-action-profile-name' data-user-id='");t.b(t.v(t.f("id",c,p,0)));t.b("' href='");t.b(t.v(t.f("profile_path",c,p,0)));t.b("' title='");t.b(t.v(t.f("name",c,p,0)));t.b("'>");t.b(t.v(t.f("screen_name",c,p,0)));t.b("</a>\n  <span class='tweet-full-name'>");t.b(t.v(t.f("name",c,p,0)));t.b("</span>\n");if(t.s(t.f("show_follow_action",c,p,1),c,p,0,269,371,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("is_current_user",c,p,1),c,p,1,0,0,"")){t.b("    <span class=\"tweet-user-follow\">\n    </span>\n");};});c.pop();}t.b("</span>\n");});c.pop();}return t.fl(); }, partials: {}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts),"user_css_p1": new Mustache.TwitterTemplate({main: function (c,p,i) { var t=this;t.b(i=i||"");t.b("\n" + i);t.b("<style id=\"user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b("\">\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" {\n");if(t.s(t.f("profile_use_background_image",c,p,1),c,p,0,114,301,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      background-position: left 40px;\n      background-attachment: fixed;\n");if(!t.s(t.f("profile_background_tile",c,p,1),c,p,1,0,0,"")){t.b("        background-repeat: no-repeat;\n");};});c.pop();}if(t.s(t.f("profile_background_color",c,p,1),c,p,0,368,428,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      background-color: #");t.b(t.v(t.f("profile_background_color",c,p,0)));t.b(";\n");});c.pop();}if(t.s(t.f("profile_text_color",c,p,1),c,p,0,485,528,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      color: #");t.b(t.v(t.f("profile_text_color",c,p,0)));t.b(";\n");});c.pop();}t.b("  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" a,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" ul.stream-tabs li,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .component .promo strong,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .message-thread-preview:hover .message-count,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .list-membership-container li.create-a-list {\n");if(t.s(t.f("profile_link_color",c,p,1),c,p,0,894,937,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      color: #");t.b(t.v(t.f("profile_link_color",c,p,0)));t.b(";\n");});c.pop();}t.b("  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .stream-item:hover .tweet-screen-name,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .stream-item:hover .tweet-timestamp,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .stream-item:hover .tweet-geo-text,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .stream-item:hover .user-profile-link,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" span.user-stat-link,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" a.title-link:hover,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" a.user-stats-count:hover span.user-stats-stat,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-small-list-item:hover a.user-screen-name,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-small-list-item:hover .user-meta a,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .user-detailed-list-item:hover a.user-screen-name,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .tweet-activity:hover a.latest-tweet-timestamp,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .stream-item:hover a.icon-link,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .stream-item:hover a.icon-link b,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .stream-item:hover .tweet-feedback,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .promoted-tweet:hover .social-context a,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard ul.trends li a:hover span.icon-link,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard-activity-item-sentence .dashboard-activity-item-entity,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard-activity-item-sentence .dashboard-activity-item-entity .user,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard-activity-item-sentence .dashboard-activity-item-count,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard-activity-item-link:hover .dashboard-activity-item-sentence,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard-activity-item-link:hover .dashboard-activity-item-sentence span.user,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .onebox-user-screen-name:hover {\n");if(t.s(t.f("profile_link_color",c,p,1),c,p,0,2773,2827,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      color: #");t.b(t.v(t.f("profile_link_color",c,p,0)));t.b(" !important;\n");});c.pop();}t.b("  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item:hover .tweet-screen-name {\n    color: #333 !important;\n  }\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item:hover .tweet-timestamp {\n    color: #999 !important;\n  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .hovered-stream-item,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .stream-item:hover,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" #new-tweets-bar,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" #new-tweets-bar:active {\n");if(t.s(t.f("rgba_tweet_background_color",c,p,1),c,p,0,3343,3405,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      background-color: ");t.b(t.v(t.f("rgba_tweet_background_color",c,p,0)));t.b(";\n");});c.pop();}if(t.s(t.f("rgba_tweet_border_color",c,p,1),c,p,0,3470,3524,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      border-color: ");t.b(t.v(t.f("rgba_tweet_border_color",c,p,0)));t.b(";\n");});c.pop();}t.b("  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item:hover {\n    border-top-color: transparent;\n    border-bottom-color: #EBEBEB;\n  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" #new-tweets-bar:hover {\n");if(t.s(t.f("rgba_newtweets_background_color",c,p,1),c,p,0,3795,3861,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      background-color: ");t.b(t.v(t.f("rgba_newtweets_background_color",c,p,0)));t.b(";\n");});c.pop();}if(t.s(t.f("rgba_newtweets_border_color",c,p,1),c,p,0,3934,3992,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      border-color: ");t.b(t.v(t.f("rgba_newtweets_border_color",c,p,0)));t.b(";\n");});c.pop();}t.b("  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-small-list-item .user-screen-name,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .profile-screenname,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .title-link,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" div.latest-tweet .latest-tweet-timestamp,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" div.truncated-tweet .latest-tweet-timestamp,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" a.user-stats-count span.user-stats-stat,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .welcome-steps li .active a strong,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard-activity-item-sentence span.user {\n");if(t.s(t.f("profile_text_color",c,p,1),c,p,0,4625,4668,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      color: #");t.b(t.v(t.f("profile_text_color",c,p,0)));t.b(";\n");});c.pop();}t.b("  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-small-list-item .user-full-name,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" span.trend-location,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .your-activity h3,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .trends-inner h3,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-rec-inner h3,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .latest-tweet,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .truncated-tweet,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .latest-tweet a.latest-tweet-timestamp,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .truncated-tweet a.latest-tweet-timestamp,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-small-list-item .user-meta,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-small-list-item .user-meta a,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-small-list-item .user-meta a s,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .social-context div,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .dot,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .component .promo,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .component .promo a.definition,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-small-list-item .dismiss,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-small-list-item .ellip,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .facets-media-not-displayed .not-displayed-text,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .copyright,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-small-list-item a.icon-link,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard ul.trends li a span.icon-link,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard-activity-item-link,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard-activity-item-sentence {\n");if(t.s(t.f("rgba_text_color",c,p,1),c,p,0,6333,6372,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      color: ");t.b(t.v(t.f("rgba_text_color",c,p,0)));t.b(";\n");});c.pop();}t.b("  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" #page-container,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .user-sidebar-color,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expando-container .dashboard {\n");if(t.s(t.f("profile_sidebar_fill_color",c,p,1),c,p,0,6605,6668,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      \n      background: #");t.b(t.v(t.f("profile_sidebar_fill_color",c,p,0)));t.b(";\n");});c.pop();}if(t.s(t.f("rgba_sidebar_color",c,p,1),c,p,0,6727,6781,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      \n      background: ");t.b(t.v(t.f("rgba_sidebar_color",c,p,0)));t.b(";\n");});c.pop();}t.b("  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .activity:hover .stream-item-activity-network .activity-supplement .activity-item-tweet .activity-item-tweet-content,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .hovered-stream-item .stream-item-activity-network .activity-supplement .activity-item-tweet .activity-item-tweet-content,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .stream-item-activity-network .activity-supplement .activity-item-tweet .activity-item-tweet-content  {\n");if(t.s(t.f("rgba_tweet_border_color",c,p,1),c,p,0,7300,7365,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      border-color: ");t.b(t.v(t.f("rgba_tweet_border_color",c,p,0)));t.b(" !important;\n");});c.pop();}t.b("  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item:hover a.twitter-atreply:hover,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item.open a.twitter-atreply,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item.colorful-links a.twitter-atreply,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item:hover a.twitter-hashtag:hover,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item.open a.twitter-hashtag,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item.colorful-links a.twitter-hashtag,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item:hover a.twitter-timeline-link:hover,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item.open a.twitter-timeline-link,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .expanding-stream-item.colorful-links a.twitter-timeline-link {\n");if(t.s(t.f("profile_link_color",c,p,1),c,p,0,8225,8279,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      color: #");t.b(t.v(t.f("profile_link_color",c,p,0)));t.b(" !important;\n");});c.pop();}t.b("  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" s,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .pretty-link s {\n");if(t.s(t.f("profile_pretty_link_color",c,p,1),c,p,0,8430,8480,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      color: #");t.b(t.v(t.f("profile_pretty_link_color",c,p,0)));t.b(";\n");});c.pop();}t.b("  }\n\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard s,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .pretty-link s,\n  body.user-style-");t.b(t.v(t.f("screen_name",c,p,0)));t.b(" .dashboard .user-small-list-item:hover .user-meta a s {\n");if(t.s(t.f("profile_pretty_link_sidebar_color",c,p,1),c,p,0,8757,8815,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      color: #");t.b(t.v(t.f("profile_pretty_link_sidebar_color",c,p,0)));t.b(";\n");});c.pop();}t.b("  }\n\n");t.b(t.rp("pill_css0",c,p,"  "));t.b("</style>");return t.fl(); }, partials: {"pill_css0": {name:"pill_css"}}, subs: {  } }, "", Mustache.twitterHogan, __hogan_opts) })}exports();});provide("mixins/ActivityViewHelpers",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.ActivityViewHelpers",function(){var a=3,b="sources",c="targets",d="target_objects",e="StreamTweet",f="ActivityItemTweet",g="StreamUser",i="StreamList",j="ActivityItemUser",k="ActivityItemTruncatedTweet",l="User",m="List",n="Status",o={User:{Status:["user"],List:["user"],User:[]},Status:{Status:[],User:["status"],List:[]},List:{Status:[],User:["user"],List:[]}},p={User:twttr.isT1?"ActivityUserLink":"UserLink",List:"ListLink"},q={your_activity:p,profile_activity:p,activity:p,dashboard:{User:"UserFullName",List:"ListLink"}},r={User:"screen_name",List:"list_title"};twttr.isT1&&(f="StreamTweet",j="UserAvatarLink24",k="LatestTweet");var s={your_activity:{favorite:{sources:{view:j,objectType:l,object:b,max:15,useTruncated:!0},targets:{view:k,objectType:n,object:c,max:1,useTruncated:!1}},mention:{view:e,objectType:n,object:d,max:1},reply:{view:e,objectType:n,object:c,max:1},retweet:{sources:{view:j,objectType:l,object:b,max:15,useTruncated:!0},targets:{view:k,objectType:n,object:d,max:1,useTruncated:!1}},follow:{view:j,objectType:l,object:b,max:15},list_member_added:{view:j,objectType:l,object:c,max:15},list_created:{view:i,objectType:m,object:c,max:1}},profile_activity:{favorite:{view:f,objectType:n,object:c,max:1},mention:{view:f,objectType:n,object:d,max:1},reply:{view:f,objectType:n,object:c,max:1},retweet:{view:f,objectType:n,object:d,max:1},follow:{view:g,objectType:l,object:c,max:12},list_member_added:{view:g,objectType:l,object:c,max:12},list_created:{view:i,objectType:m,object:c,max:1}},activity:{favorite:{primary:{view:f,objectType:n,object:c,max:1},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},mention:{view:f,objectType:n,object:d,max:1},reply:{view:f,objectType:n,object:c,max:1},retweet:{primary:{view:f,objectType:n,object:d,max:1},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},follow:{primary:{view:twttr.isT1?"StreamUser":"ActivityItemUser",objectType:l,object:c,max:twttr.isT1?10:12},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},list_member_added:{view:twttr.isT1?"StreamUser":"ActivityItemUser",objectType:l,object:c,max:10},list_created:{view:i,objectType:m,object:c,max:1}},dashboard:{favorite:{max:0},mention:{max:0},reply:{max:0},retweet:{max:0},follow:{max:0},list_member_added:{max:12},list_created:{max:1}}},t={sources:b,targets:c,target_objects:d},u={favorite:t,mention:t,reply:t,retweet:t,follow:t,list_member_added:t,list_created:t},v=[[[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]]],w=[[_("{{{sources_screen_name_0}}} created list {{{targets_list_title_0}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}} and {{{targets_list_title_1}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}}, {{{targets_list_title_1}}} and {{{targets_list_title_2}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others.</span>{{#link_targets_count}}</a>{{/link_targets_count}}")]],x={favorite:{your_activity:[[_("{{{sources_screen_name_0}}} favorited your Tweet"),_("{{{sources_screen_name_0}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited your Tweet"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited your Tweet"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited your Tweet"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited your Tweets")]],profile_activity:[_("{{{sources_screen_name_0}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:")],activity:[_("{{{sources_screen_name_0}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>favorited</span> <span class='dashboard-activity-item-entity'>{{full_targets_count}} Tweets</span>")],_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} <span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>")]},mention:{your_activity:[_("{{{sources_screen_name_0}}} mentioned you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} mentioned you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} mentioned you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;mentioned you")],profile_activity:null,activity:null},reply:{your_activity:[_("{{{sources_screen_name_0}}} replied to you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} replied to you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} replied to you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;replied to you")],profile_activity:null,activity:null},retweet:{your_activity:[_("{{{sources_screen_name_0}}} retweeted you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} retweeted you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} retweeted you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;retweeted you")],profile_activity:[_("{{{sources_screen_name_0}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:")],activity:[_("{{{sources_screen_name_0}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{target_objects_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{full_target_objects_count}} people</span>")],_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{target_objects_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{full_target_objects_count}}} people</span>")]},follow:{your_activity:[_("{{{sources_screen_name_0}}} followed you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} followed you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} followed you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;followed you")],profile_activity:[_("{{{sources_screen_name_0}}} followed:")],activity:[_("{{{sources_screen_name_0}}} followed:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} followed:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} followed:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;followed:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{full_targets_count}} people</span>")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} other</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} other</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{targets_count}} people</span>")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{targets_count}} people</span>")]]},list_member_added:{your_activity:[[[_("{{{sources_screen_name_0}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]]],profile_activity:v,activity:v,dashboard:[[[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to a list"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to {{#link_target_objects_count}}<span class='dashboard-activity-item-count'>{{/link_target_objects_count}}<span class='count-wrap'>{{full_target_objects_count}}</span>{{#link_target_objects_count}}</span>{{/link_target_objects_count}}&#32;lists")],[_("{{{sources_screen_name_0}}} added {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;to a list"),_("{{{sources_screen_name_0}}} added {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;to {{#link_target_objects_count}}<span class='dashboard-activity-item-count'>{{/link_target_objects_count}}<span class='count-wrap'>{{full_target_objects_count}}</span>{{#link_target_objects_count}}</span>{{/link_target_objects_count}}&#32;lists")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to a list"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists")]]]},list_created:{your_activity:null,profile_activity:w,activity:w,dashboard:[_("{{{sources_screen_name_0}}} made a list"),_("{{{sources_screen_name_0}}} made {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;lists")]}},y={your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:null},activity:{sourceClass:l,targetClass:l,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:null}},z={favorite:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:null},activity:{sourceClass:l,targetClass:l,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:null}},mention:y,reply:y,retweet:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:l},activity:{sourceClass:l,targetClass:l,targetObjectClass:l},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:l}},follow:y,list_member_added:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:m},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:m},activity:{sourceClass:l,targetClass:l,targetObjectClass:m},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:m}},list_created:{your_activity:null,profile_activity:{sourceClass:l,targetClass:m,targetObjectClass:null},activity:{sourceClass:l,targetClass:m,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:m,targetObjectClass:null}}},A={favorite:"activity-fav",mention:"activity-reply",reply:"activity-reply",retweet:"activity-rt",follow:"activity-follow",list_member_added:"activity-list",list_created:"activity-list"},B;twttr.isT1?B={favorite:[_("<span class='show-text'>{{hidden_count}} other favorite</span><span class='hide-text'>Hide other favorite</span>"),_("<span class='show-text'>{{hidden_count}} other favorites</span><span class='hide-text'>Hide other favorites</span>")],mention:null,reply:[_("<span class='show-text'>{{hidden_count}} other reply</span><span class='hide-text'>Hide other reply</span>"),_("<span class='show-text'>{{hidden_count}} other replies</span><span class='hide-text'>Hide other reply</span>")],retweet:[_("<span class='show-text'>{{hidden_count}} other retweet</span><span class='hide-text'>Hide other retweet</span>"),_("<span class='show-text'>{{hidden_count}} other retweets</span><span class='hide-text'>Hide other retweets</span>")],follow:null,list_member_added:null,list_created:null}:B={favorite:_("<span class='show-text'>View other favorited Tweets by {{screen_name}}</span><span class='hide-text'>Hide other favorited Tweets by {{screen_name}}</span>"),mention:null,reply:_("<span class='show-text'>View other replies by {{screen_name}}</span><span class='hide-text'>Hide other replies by {{screen_name}}</span>"),retweet:_("<span class='show-text'>View other retweets by {{screen_name}}</span><span class='hide-text'>Hide other retweets by {{screen_name}}</span>"),follow:null,list_member_added:null,list_created:null},this.statics({objectClasses:z,objectStrings:x,supplements:s,iconClasses:A,supplementViewAllSentences:B,lineItemObjects:u,maxQualifiedEntities:a,viewForObjectType:q,substitutionKeyForObjectType:r,translateToObjectType:o})}),a(twttr.mixins.ActivityViewHelpers)})}),provide("multiGlobals/more_views",function(a){using("_","util","constants").as(function(b,_){twttr.view("twttr.views.BaseAPIList",function(){var a=this;twttr.views.Base.apply(this,arguments),this.items=[];if(!this.obj)return;this.obj.each(function(b){a.items.push(new a.ItemView(b))})}).methods({ItemView:twttr.views.BaseAPI}),twttr.view("twttr.views.UserImage24").template(twttr.templates.user_image_24),twttr.view("twttr.views.UserAvatarLink24").template(twttr.templates.user_avatar_link_24),twttr.view("twttr.views.LinkSimpleList",function(a){this.links=a}),twttr.view("twttr.views.LinkList",function(a,b){var a=a.array||a,c=a.length-1;this.links=twttr.map(a,function(a,d){return twttr.merge({separator:d==c?!1:b},a)})}),twttr.view("twttr.views.SlideshowTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SimpleTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SimpleTweetLarge",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SingleTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>").find("a[data-twitter-media-url='true']").attr("target","").end();return b.html()},include_embed_link:function(){return twttr.decider.isAvailable("embed_code_dialog")&&twttr.app.isOnPage("permalink")&&!this.user["protected"]},is_permalink:function(){return twttr.app.isOnPage("permalink")}}),twttr.view("twttr.views.FollowingTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({show_follow_action:!0}),twttr.view("twttr.views.DiscoveryStreamTweet",function(){twttr.views.StreamTweet.apply(this,arguments)}).subclassOf(twttr.views.StreamTweet).template(twttr.templates.stream_tweet_discovery).statics({has:function(a,b){var c=b.hasOwnProperty(a)&&!twttr.is.falsy(b[a]);if(c&&twttr.is.array(b[a])){if(b[a].length==0)return!1;b[a][b[a].length-1].is_last=!0}return c}}).methods({show_follow_action:!0,has_retweeters:function(){return twttr.views.DiscoveryStreamTweet.has("retweeters",this.network_activity)},has_retweet_count:function(){return twttr.views.DiscoveryStreamTweet.has("retweet_count",this)}}),twttr.view("twttr.views.ActivityItemTweet",function(){twttr.views.StreamTweet.apply(this,arguments)}).subclassOf(twttr.views.StreamTweet).methods({should_callout_tweet_actions:function(){return!0}}),twttr.view("twttr.views.UnclickableTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>");return b.find("a").replaceWith(function(){return"<a>"+$(this).contents().text()+"</a>"}),b.html()}}),twttr.view("twttr.views.SemiClickableTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).template(twttr.templates.unclickable_tweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>");return b.find("a.pretty-link").each(function(){$(this).addClass("non-link").removeAttr("href")}),b.html()}}),twttr.view("twttr.views.LatestTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({full_timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0,!1,!0)}}),twttr.view("twttr.views.ActivityItemTruncatedTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.EmbeddedTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.DetailsPaneTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.InReplyTo",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.ProfilePane",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats).methods({impression_cookie:function(){if(!this.promoted_content)return;var a=[];return JSON.stringify([this.id,this.promoted_content.impression_id,this.promoted_content.disclosure_type,this.promoted_content.disclosure_text,a])}}),twttr.view("twttr.views.MessageThread",function(a){twttr.views.Base.apply(this,arguments),this.items=[];for(var b=0;b<a.length;b++)this.items.push(new twttr.views.Message(a[b]))}).subclassOf(twttr.views.Base),twttr.view("twttr.views.ConversationThread",function(a){twttr.views.Base.apply(this,arguments),this.items=[];var b=null;for(var c=0;c<a.messages.length;c++){var d=new twttr.views.Message(a.messages[c]);b&&b.time_ago()!==d.time_ago()&&(d.delimiter_text=d.time_ago()),this.items.push(d),b=d}}).subclassOf(twttr.views.Base).methods({screen_name:function(){return this.threadId}}),twttr.view("twttr.views.SmsFollow").methods({show_sms_prompt:function(){return $.inArray(twttr.pageLocale,["ja","ko"])==-1},sms_follow_text:function(){var a="<strong>follow "+this.screen_name+"</strong>";switch(twttr.requestFullCity.substr(0,2).toLowerCase()){case"us":var b="40404",c=_("the United States");break;case"ca":var b="21212",c=_("Canada");break;default:return _('Text {{{command}}} to <a href="#" class="sms-codes-link">your carrier\'s shortcode</a>',{command:a})}return _("Text {{{command}}} to {{{number}}} in {{{country}}}",{command:a,number:"<strong>"+b+"</strong>",country:'<a href="#" class="sms-codes-link">'+c+"</a>"})}}),twttr.view("twttr.views.PermalinkSignupCallOut").subclassOf(twttr.views.SmsFollow),twttr.view("twttr.views.ProfileActions").subclassOf(twttr.views.SmsFollow).methods({is_current_user:function(){return twttr.helpers.isCurrentUser(this.user)},can_view:function(){return twttr.helpers.canViewUser(this.user)},show_device_notifications:function(){return!this.is_current_user()&&this.following&&(twttr.currentUser.lang!="ja"||twttr.decider.isAvailable("email_device_settings"))},notifications_on_for_user:function(){return twttr.currentUser.deviceSetup&&this.notifications},is_admin:function(){return twttr.is.def(twttr.isAdmin)}}),twttr.view("twttr.views.MessageThreadPreview").methods({last_was_yours:function(){return twttr.helpers.isCurrentUser(this.last_message().sender)},message_count:function(){return this.messages.length},last_message:function(){return this._last_message?this._last_message:this._last_message=new twttr.views.Message(this.messages[0])},other_person:function(){return new twttr.views.User(this.last_was_yours()?this.last_message().recipient:this.last_message().sender)},has_new_message:function(){return this.obj.hasNewMessages()}}),twttr.view("twttr.views.ConversationThreadUser",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.ConversationThreadPreview",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({message_count:function(){return this.count},last_message_date:function(){return this.lastMessageDate},timestamp:function(){return twttr.helpers.timeAgo(this.lastMessageDate,!0,!0)},other_person:function(){return new twttr.views.ConversationThreadUser(this.user)}}),twttr.view("twttr.views.Message",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({linkified_text:function(){var a=b.util.linkify(this.text,{nofollow:!0});return a=b.util.linkifyEntities(a,this),a},timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0,!0)},time_ago:function(){return twttr.helpers.timeAgoRounded(this.actual_timestamp())},actual_timestamp:function(){return twttr.helpers.parseDateString(this.created_at)}}),twttr.view("twttr.views.ProfileSignupCallOut",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.DashboardProfileStats",function(a,b){twttr.views.BaseStats.apply(this,[a]),this.profileStatsTitle=b}).subclassOf(twttr.views.BaseStats).methods({profile_stats_title:function(){return this.profileStatsTitle||_("About @{{screen_name}}",{screen_name:this.obj.screenName})}}),twttr.view("twttr.views.UserStats",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.TrendItem",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({is_sponsored:function(){return!!this.promoted_content},promoted_badge_class:function(){return"badge-"+(this.promoted_content.disclosure_type||"promoted")},trend_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.TREND}}),twttr.view("twttr.views.LocalTrendLocation",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.LocalTrendLocationNew",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.FollowList").methods({follow_list:function(){return(new twttr.views.UserThumbList(this.users)).html()}}),twttr.view("twttr.views.LocalTrends",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({_sortPlaces:function(a){return a.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0})},country_locations:function(){var a=[],c;for(var d=0;d<this.items.length;d++){var e=this.items[d];if(e.placeType.code!==b.constants.placeTypes.city){if(e.placeType.code==19){c=e;continue}a.push(e)}}return a=this._sortPlaces(a),c&&a.unshift(c),a},city_locations:function(){var a=[];for(var c=0;c<this.items.length;c++){var d=this.items[c];d.placeType.code===b.constants.placeTypes.city&&a.push(d)}return a=this._sortPlaces(a),a}}),twttr.view("twttr.views.LocalTrendsNew",function(a,b){twttr.views.BaseAPIList.call(this,a),this.forceShowLocations=b}).subclassOf(twttr.views.BaseAPIList).methods({_sortPlaces:function(a){return a.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0})},breadcrumbs:function(){if(this.is_personalized())return null;var a=twttr.trendLocations.withFilterAncestors().reverse();if(twttr.decider.isAvailable("personalized_trends")){var b=twttr.trendLocations.current;a[a.length-1].woeid!=b.woeid&&a.push(b)}return a[a.length-1]=$.extend({is_last:!0},a[a.length-1]),a},is_personalized:function(){return twttr.decider.isAvailable("personalized_trends")&&twttr.trendLocations.current.isPersonalized},show_personalized:function(){return this.is_personalized()&&!this.forceShowLocations},locations:function(){var a=this._sortPlaces(twttr.trendLocations.currentChildren());return twttr.trendLocations.current.isPersonalized&&a.unshift(twttr.trendLocations.worldwide()),a},locationsFor:function(a){var b=this.locations(),c=Math.ceil(b.length/3);return b.slice(a*c,(a+1)*c)},locations0:function(){return this.locationsFor(0)},locations1:function(){return this.locationsFor(1)},locations2:function(){return this.locationsFor(2)}}),twttr.view("twttr.views.Dialog",function(a){this.options=a;var b=this.options.template||this.options;twttr.views.Base.call(this,b)}),twttr.view("twttr.views.TweetDialog",function(a){this.options=a,this.options.fixed=!0,twttr.views.Dialog.call(this,a)}).subclassOf(twttr.views.Dialog).template(twttr.templates.dialog).methods(twttr.EventProvider).methods({afterRender:function(a){var b={container_id:"tweetbox",condensed:!1,closeAfterSuccess:!1,template:{button_text:this.options.tweetButton||_("Tweet"),show_geo:this.options.template.show_geo,show_turkey:this.options.template.show_turkey},statusAction:this.options.statusAction||"update",data:this.options.data,defaultContent:this.options.defaultContent||"",height:56,width:452,origin:this.options.origin,enableDraft:this.options.enableDraft,enableAutoGrow:!0};this.tweetBox=new twttr.TweetBox(a.find(".twttr-dialog-content"),b),this.tweetBox.bind("ready",twttr.bind(this,function(){this.trigger("ready")}))}}),twttr.view("twttr.views.Footer",function(){twttr.views.Base.apply(this,arguments)}).methods({year:function(){return(new Date).getFullYear()}}),twttr.view("twttr.views.ReplyDialog",function(a){this.options=a,this.options.statusAction="reply",twttr.views.TweetDialog.call(this,this.options)}).subclassOf(twttr.views.TweetDialog).mixin(twttr.mixins.i18nTweet).template(twttr.templates.dialog).methods({afterRender:function(a){twttr.views.TweetDialog.prototype.afterRender.call(this,a);var c=this;twttr.API.Status.find(this.options.data.tweetId,twttr.bind(this,function(d){var e=new twttr.views.ReplyDialogFooter({screen_name:d.user.screenName,text:b.util.linkifyEntities(b.util.linkify(d.text,{nofollow:!0}),d),profile_image_url:d.user.profileImageUrl});e.render(a.find(".twttr-dialog-footer"),"append"),a.find("div.tweet").each(function(){c.updateRtlDisplay($(this))})}))}}),twttr.view("twttr.views.KeyboardShortcuts").methods({current_user_screen_name:function(){return twttr.currentUser.screenName}}),twttr.view("twttr.views.UserThumbList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.TweetActivityThumbList",function(){twttr.views.UserThumbList.apply(this,arguments),twttr.each(this.items.slice(this.constructor.max_items_to_show),function(a){a.is_hidden=!0})}).template(twttr.templates.user_thumb_list).subclassOf(twttr.views.UserThumbList).statics({max_items_to_show:5}),twttr.view("twttr.views.UserSmallListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserThumbListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserSmallList",function(a){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserSmallListItem}),twttr.view("twttr.views.UserDetailedListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserDetailedList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserDetailedListItem}),twttr.view("twttr.views.UserStaticListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserStaticList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserStaticListItem}),twttr.view("twttr.views.UserItemAction",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.RecentlyViewed",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.ContactImportMatchesStats",function(){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({follow_all_text:function(){return this.count<=1?_("Follow all"):_("Follow all {{count}}",{count:this.count-this.following_count})}}),twttr.view("twttr.views.DashboardContactImportMatchesStats",function(){twttr.views.ContactImportMatchesStats.apply(this,arguments)}).subclassOf(twttr.views.ContactImportMatchesStats),twttr.view("twttr.views.MatchedContactUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.InviteContacts",function(){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({select_all_text:function(){return this.contacts.length==1?_("Select all"):_("Select all {{count}}",{count:this.contacts.length})},preview_link_url:twttr.router.invitationEmailPreviewPath,truncate:function(){return function(a,b){var c=28,d=b(a);return twttr.helpers.truncate(d,c)}}}),twttr.view("twttr.views.FollowingPage").methods({following_header_string:function(){var a=this.friends_count;if(a==1)return this.is_current_user()?_("You follow 1 person"):_("{{user}} follows 1 person",{user:this.name});var c=b.util.formatNumber(a,twttr.pageLocale);return this.is_current_user()?_("You follow {{num}} people",{num:c}):_("{{user}} follows {{num}} people",{user:this.name,num:c})},following_count_commaized:function(){return b.util.formatNumber(this.friends_count,twttr.pageLocale)}}),twttr.view("twttr.views.FollowingSubtabs",function(){twttr.views.Base.apply(this,arguments),this["active_subtab_"+this.subtab]=1,this.screen_name=this.screenName}).subclassOf(twttr.views.Base),twttr.view("twttr.views.FollowersPage").methods({followers_header_string:function(){var a=this.followers_count;if(a==1)return this.is_current_user()?_("You have 1 follower"):_("{{user}} has 1 follower",{user:this.name});var c=b.util.formatNumber(a,twttr.pageLocale);return this.is_current_user()?_("You have {{num}} followers",{num:c}):_("{{user}} has {{num}} followers",{user:this.name,num:c})},followers_count_commaized:function(){return b.util.formatNumber(this.followers_count,twttr.pageLocale)}}),twttr.view("twttr.views.FollowersSubtabs",function(){twttr.views.Base.apply(this,arguments),this["active_subtab_"+this.subtab]=1,this.screen_name=this.screenName}).subclassOf(twttr.views.Base),twttr.view("twttr.views.WelcomeAmbassador",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.WelcomeLearnFlow",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser).methods({name:function(){return twttr.currentUser.name}}),twttr.view("twttr.views.RecentTweets",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.SimpleTweet,screen_name:function(){return this.items[0].user.screen_name}}),twttr.view("twttr.views.Replies",function(a,b,c){twttr.views.BaseAPI.apply(this,arguments),this.descendants=b||[],this.forks=c||[]}).subclassOf(twttr.views.BaseAPI).methods({_viewFor:function(a){return new twttr.views.StreamTweet(a)},_viewsFor:function(a){var b=this;return twttr.map(a,function(a){return b._viewFor(a)})},has_replies:function(){return!0},has_tweets:function(){return this.descendants.length>0||this.forks.length>0},descendant_tweet_views:function(){return this._viewsFor(this.descendants)},fork_tweet_views:function(){return this._viewsFor(this.forks)},on_permalink:function(){return twttr.app.isOnPage("permalink")}}),twttr.view("twttr.views.TweetActivity").methods({_list_for:function(a){return userList=new twttr.API.util.BaseCollection(a),(new twttr.views.TweetActivityThumbList(userList)).html()},_count_for:function(a,b){return(new twttr.views.TweetActivityCount({length:a,is_retweets:b==="retweeters",is_favorites:b==="favoriters",is_replies:b==="repliers"})).html()},_show_count:function(a){return a.length>twttr.views.TweetActivityThumbList.max_items_to_show},show_retweets_count:function(){return this._show_count(this.activities.retweeters)},show_replies_count:function(){return this._show_count(this.activities.repliers)},show_favorites_count:function(){return this._show_count(this.activities.favoriters)},favorites_list:function(){return this._list_for(this.activities.favoriters)},retweets_list:function(){return this._list_for(this.activities.retweeters)},replies_list:function(){return this._list_for(this.activities.repliers)},retweets_count:function(){return this._count_for(this.counts.retweeters_count,"retweeters")},favorites_count:function(){return this._count_for(this.counts.favoriters_count,"favoriters")},replies_count:function(){return this._count_for(this.counts.repliers_count,"repliers")},is_retweets_empty:function(){return this.activities.retweeters.length===0},is_favorites_empty:function(){return this.activities.favoriters.length===0},is_replies_empty:function(){return this.activities.repliers.length===0},is_activity_empty:function(){var a=this.is_favorites_empty()&&this.is_retweets_empty(),b=!this.in_permalink_page&&a,c=this.in_permalink_page&&this.is_replies_empty()&&a;return b||c}}),twttr.view("twttr.views.ActivityOfMeStreamTitle").methods({should_see_activity_filters:function(){return twttr.currentUser&&twttr.currentUser.followersCount>=2e3}}),twttr.view("twttr.views.ActivityItemUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.ActivityItem",function(){twttr.views.BaseAPI.apply(this,arguments),this.is_your_activity=this.for_stream==="your_activity",this.is_network_activity=this.for_stream==="activity"}).subclassOf(twttr.views.BaseAPI).template(twttr.templates.activity_item).mixin(twttr.mixins.ActivityViewHelpers).methods({_getSupplement:function(a){var b=this.constructor.supplements[this.for_stream][this.event];b.primary&&(b=a?b.secondary:b.primary);if(b.sources&&b.targets){var c=(this.is_retweet||this.is_favorite)&&this.sources.length===1&&this.targets.length>1;b=c?b.targets:b.sources}return b},_traverse:function(a,b,c){twttr.is.def(c)||(c=0);if(!b||c>=b.length)return a;var d=b[c];if(twttr.is.def(a[d])&&!twttr.is.nil(a[d]))return this._traverse(a[d],b,c+1)},_populateSubsWithObjects:function(a,b,c,d){if(!d)return;var e=this;return twttr.inject(a,b,function(a,b,f){var g=e.constructor.substitutionKeyForObjectType[d],i=twttr.API.Activity.classMap[e.event][c],j=e._traverse(f,e.constructor.translateToObjectType[d][i]);return a[c+"_"+g+"_"+b]=(new twttr.views[e.constructor.viewForObjectType[e.for_stream][d]](j)).html(),a})},_populateSubsWithCounts:function(a,b,c){var d=c+"_count",e=this[c+"_size"];return b["full_"+d]=e,b[d]=e-1,b},_activity_supplement:function(a){var b=this,c=this._getSupplement(a||!1),d=4,e=twttr.views[c.view],f=this[c.object],g=Math.min(c.max,f.length)-1,i=twttr.views.StreamUser===e;return twttr.map(f,function(c,f){var j;return a&&f==0?"":(c.embedded_by_activity=!0,c.is_your_activity=b.is_your_activity,c.is_network_activity=b.is_network_activity,c.for_activity=c.is_your_activity||c.is_network_activity,f>g&&(twttr.isT1?(c.hidden_by_activity=!0,c.hidden_stack_class_name=f<d?"stack-item-"+f:"stack-item-hidden"):c.hidden=!0),j=new e(c),i&&(b.is_your_activity?(j.avatar_size_class="size24",j.profile_image_url=j.mini_profile_image_url()):(j.avatar_size_class="size73",j.profile_image_url=j.bigger_profile_image_url())),twttr.isT1?Mustache.to_html("<div class='supplement{{#is_hidden_supplement}} hidden-supplement {{hidden_stack_class_name}}{{/is_hidden_supplement}}{{^is_hidden_supplement}} visible-supplement{{/is_hidden_supplement}}'>{{{supplement}}}</div>",{supplement:j.html(),is_hidden_supplement:c.hidden_by_activity,hidden_stack_class_name:c.hidden_stack_class_name}):j.html())}).join("")},icon_class:function(){return this.constructor.iconClasses[this.event]},should_show_first_actor:function(){return!this.is_your_activity||this.is_list_member_added},first_actor:function(){return new twttr.views.BaseUser(this.sources[0])},view_all_supplements_sentence:function(){var a=this.constructor.supplementViewAllSentences[this.event];if(!a)return"";var b;if(twttr.isT1){var c=this.hidden_supplements_count();a=a[Math.min(a.length,c)-1],b={hidden_count:c}}else b=this.sources[0];return Mustache.to_html(a,b)},has_secondary_supplement:function(){var a=this.sources.length>this.constructor.maxQualifiedEntities;return!this.is_your_activity&&a&&(this.is_follow||this.is_retweet&&this.target_objects.length===1||this.is_favorite&&this.targets.length===1)},has_hidden_supplements:function(){var a=this._getSupplement(),b=this[a.object];return b.length>a.max&&a.objectType==="Status"},hidden_supplements_count:function(){if(!this.has_hidden_supplements())return 0;var a=this._getSupplement(),b=this[a.object];return b.length-a.max},supplement_count:function(){var a=this._getSupplement(),b=this[a.object];return b.length},user_supplement_and_count_greater_than_two:function(){return(this.is_follow||this.is_list_member_added)&&this.supplement_count()>2},user_supplement_and_count_exactly_two:function(){return(this.is_follow||this.is_list_member_added)&&this.supplement_count()===2},should_show_truncated_tweet:function(){return this.is_your_activity&&(this.is_retweet||this.is_favorite)&&this._getSupplement().useTruncated},truncated_tweet:function(){var a;if(this.is_retweet)a=this.target_objects[0];else{if(!this.is_favorite)throw new Error("You shouldn't be using truncated_tweet() if not a retweet or favorite!");a=this.targets[0]}return(new twttr.views.LatestTweet(a)).html()},activity_supplement:function(){return this._activity_supplement()},activity_secondary_supplement:function(){return this._activity_supplement(!0)},activity_line:function(){var a=this,b={},c=this.constructor.objectClasses[this.event][this.for_stream],d=this.constructor.objectStrings[this.event][this.for_stream];(!d||!c)&&console.error("Should not have an activity item with this verb in this stream!",this);var e=this.constructor.lineItemObjects;b.position=this.min_position,this._populateSubsWithObjects(this[e[this.event].sources],b,"sources",c.sourceClass),this._populateSubsWithObjects(this[e[this.event].targets],b,"targets",c.targetClass),this._populateSubsWithObjects(this[e[this.event].target_objects],b,"target_objects",c.targetObjectClass),this._populateSubsWithCounts(this.sources,b,"sources"),this._populateSubsWithCounts(this.targets,b,"targets"),this._populateSubsWithCounts(this.target_objects,b,"target_objects");var f=this._getSupplement();if(this.is_your_activity&&this.sources.length>f.max||this.has_secondary_supplement())b.link_sources_count=!0;var g=d[Math.min(this.sources.length,d.length)-1];return twttr.is.array(g)&&(g=g[Math.min(this.targets.length,g.length)-1],twttr.is.array(g)&&(g=g[Math.min(this.target_objects.length,g.length)-1])),Mustache.to_html(g,b)},full_timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0)},actual_timestamp:function(){return twttr.helpers.parseDateString(this.created_at)},afterRender:function(a){twttr.isT1||this.is_your_activity&&setTimeout(function(){twttr.helpers.ellipsify(a.find(".stream-item-activity-line .tweet-row"))},0)}}),twttr.view("twttr.views.DashboardActivityItem",function(){twttr.views.ActivityItem.apply(this,arguments)}).subclassOf(twttr.views.ActivityItem),twttr.view("twttr.views.StreamUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.DashboardStreamUser",function(){this.constructor.uber.constructor.apply(this,arguments)}).subclassOf(twttr.views.StreamUser),twttr.view("twttr.views.StreamFollowerRequest",function(){this.constructor.uber.constructor.apply(this,arguments)}).subclassOf(twttr.views.StreamUser),twttr.view("twttr.views.ProfileUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.ProfileFollowCard",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.MiniProfileStats",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.List",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({is_public:function(){return this.mode==="public"||this.mode===undefined},is_own_list:function(){return twttr.helpers.isCurrentUser(this.user)},user_list_path:function(){return twttr.router.userListPath({screen_name:this.user.screen_name,list_slug:this.slug})},list_subscribers_path:function(){return twttr.router.listSubscribersPath({screen_name:this.user.screen_name,list_slug:this.slug})},list_members_path:function(){return twttr.router.listMembersPath({screen_name:this.user.screen_name,list_slug:this.slug})},full_name_sans_at:function(){return this.full_name.replace(/^[@＠]/,"")}}),twttr.view("twttr.views.ListLink",function(){twttr.views.List.apply(this,arguments)}).subclassOf(twttr.views.List),twttr.view("twttr.views.NewestListMembers").subclassOf(twttr.views.List),twttr.view("twttr.views.StreamList").subclassOf(twttr.views.List),twttr.view("twttr.views.ListStreamTitle").subclassOf(twttr.views.List),twttr.view("twttr.views.ListHeader").subclassOf(twttr.views.List),twttr.view("twttr.views.ListActions").subclassOf(twttr.views.List),twttr.view("twttr.views.ListStreamTabs").subclassOf(twttr.views.List),twttr.view("twttr.views.ListFollowCard").subclassOf(twttr.views.List),twttr.view("twttr.views.ListOfLists",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.List}),twttr.view("twttr.views.ListDialog").subclassOf(twttr.views.List),twttr.view("twttr.views.Retweeters",function(a){twttr.views.Base.apply(this,arguments),this.count=a.count,this.retweeters=a.retweeters.map(function(a){return new twttr.views.BaseUser(a)}).array}).methods({retweeted_by_count:function(){var a=this.tweet.retweetingStatus?new twttr.views.BaseUser(this.tweet.retweetingStatus.user):this.retweeters[0],b=Mustache.to_html('<a class="user-profile-link" data-user-id="{{id}}" href="{{path}}" >{{screen_name}}</a>',{id:a.id,path:twttr.router.profilePath({screen_name:a.screen_name}),screen_name:a.screen_name});return this.count===1?_("Retweeted by {{{user_link}}}",{user_link:b}):this.count===2?_("Retweeted by {{{user_link}}} and 1 other",{user_link:b}):this.count?_("Retweeted by {{{user_link}}} and {{count}} others",{user_link:b,count:this.count}):_("Retweeted by {{{user_link}}} and others",{user_link:b})}}),twttr.view("twttr.views.ProfilePage").methods({has_pending_requests:function(){return twttr.helpers.isProfileUser()&&twttr.currentUser["protected"]},is_withheld:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"},is_withheld_copyright:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"&&!!twttr.profileUser.withheldCopyright},is_current_user:function(){return twttr.helpers.isCurrentUser(twttr.profileUser.id)},render_withheld:function(){return this.is_withheld()&&!this.is_current_user()}}),twttr.view("twttr.views.StreamSuggestionCategory",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,2)):!1},category_name:function(){return this.obj.name}}),twttr.view("twttr.views.CardNewsOnebox").subclassOf(twttr.views.BaseAPI).methods({article_image:function(){return this.obj.getImage(twttr.isSSL())},article_url:function(){return this.obj.getExpandedUrl()},article_display_url:function(){return this.obj.getDisplayUrl()}}),twttr.view("twttr.views.CardEventOnebox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.CardAccountsOneboxItem").subclassOf(twttr.views.BaseUser).methods({is_onebox:!0}),twttr.view("twttr.views.CardAccountsOnebox",function(a,b){twttr.views.BaseAPIList.call(this,a),this.view_all_path=b}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.CardAccountsOneboxItem}),using(twttr.isT1?"multiGlobals/more_views_t1":"multiGlobals/more_views_p1",function(){twttr.views.makeDefaultViews(twttr.templates),a()})})}),provide("multiGlobals/more_views_t1",function(a){using("util","constants","mixins/t1/discoveryStoryHelpers").as(function(b){twttr.view("twttr.views.MiniProfileUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.MiniCurrentUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.Nav").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.AvatarRow",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.TypeaheadSearchItem",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({search_query_source:function(){return twttr.is.def(this.id)?twttr.search.searchQuerySource.SAVED_SEARCH:twttr.search.searchQuerySource.TYPEAHEAD}}),twttr.view("twttr.views.TypeaheadAccountsShortcut",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({search_query_source:function(){return twttr.search.searchQuerySource.TYPEAHEAD}}),twttr.view("twttr.views.ProtectedAncestorTweet").subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.CardNews",function(a){twttr.views.BaseAPI.call(this,a.content.articles.get(0)),this.position=a.position,this.social_proof=a.attributes.social_proof,this.scribeComponent="card_news"}).subclassOf(twttr.views.BaseAPI).mixin(twttr.mixins.discoverySearchHelper).methods({article_display_url:function(){return this.obj.getDisplayUrl()},article_image:function(){return this.obj.getImage(twttr.isSSL())},article_url:function(){return this.obj.getExpandedUrl()}}),twttr.view("twttr.views.CardTopic",function(a){twttr.views.BaseAPI.call(this,a.content),this.position=a.position,this.scribeComponent="card_topic";if(a.content.media&&a.content.media.length>0){var b=a.content.media[0];this.has_image=b.type==="photo"&&twttr.decider.isAvailable("t1d_topic_img"),this.has_video=b.type==="video"&&twttr.decider.isAvailable("t1d_topic_vid"),this.has_media=this.has_image||this.has_video,this.tweet=a.content.tweet,this.tweet&&this.tweet.user&&(this.tweet.user.profile_image_url=twttr.assets.getPathFromAbsoluteURL(this.tweet.user.profile_image_url,{isVersioned:!1})),this.has_media&&(this.mediaInstance=twttr.media.matchInstance(b.media_url),this.image_url=this.getImageUrl(["large","medium","original"]),this.has_media=!!this.image_url)}this.media_type=this.has_image?"image":this.has_video?"video":null}).subclassOf(twttr.views.BaseAPI).mixin(twttr.mixins.discoverySearchHelper,twttr.mixins.discoveryMediaRenderHelper).methods({getImageUrl:function(a){if(!this.media||this.media.length===0)return null;var b=this.media[0];for(var c=0;c<a.length;c++){var d=a[c];if(b.sizes[d]){var e=b.sizes[d].url;if(e){if(twttr.isSSL()){var f=b.sizes[d].url_https;return f?f:this.mediaInstance&&this.mediaInstance.constructor.ssl?e.replace(/^http:/,"https:"):e}return e}}}return null},tweet_text:function(){var a=this.text,b=this,c=this.entities&&this.entities.urls;c&&twttr.each(c,function(b){b.display_url&&(a=a.replace(h(b.url),h(b.display_url)))});var d=this.entities&&this.entities.media;return d&&twttr.each(d,function(c){var d=b.text.substring(c.indices[0],c.indices[1]);c.display_url&&(a=a.replace(h(d),h(c.display_url)))}),a},card_url:function(){return this.tweet?twttr.router.permalinkPath({screen_name:this.tweet.user.screen_name,id:this.tweet.id_str}):twttr.router.searchFacetsSlideshowPath({query:this.obj.query,mode:this.has_image?"photos":"videos"})+"?url="+encodeURIComponent(this.media[0].media_url)},attribution_url:function(){return this.mediaInstance?this.mediaInstance.domainUrl():""},attribution_img:function(){return this.mediaInstance?this.mediaInstance.iconUrl():""},attribution_name:function(){return this.mediaInstance?this.mediaInstance.attributionName():""},has_attribution:function(){return this.mediaInstance?this.mediaInstance.hasAttributionInDiscovery():!0}}),twttr.view("twttr.views.StreamInterestCategory").subclassOf(twttr.views.BaseAPI).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,7)):!1},interest_name:function(){return this.obj.name}}),twttr.view("twttr.views.DashboardStreamInterestCategory").subclassOf(twttr.views.StreamInterestCategory).template(twttr.templates.stream_interest_category).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,3)):!1}}),twttr.view("twttr.views.WelcomeLearnProfile").subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.StreamViewTogglerBase",function(){twttr.views.StreamViewToggler.apply(this,arguments)}),twttr.view("twttr.views.MentionsStreamViewToggler",function(a){twttr.views.StreamViewTogglerBase.call(this,{title1:_("All"),active1:!a,route1:twttr.router.connectPath(),title2:_("Mentions"),active2:a,route2:twttr.router.mentionsPath()})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ProfileStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("With Replies"),active1:a,route1:twttr.router.profileWithRepliesPath({screen_name:b.screenName}),title2:_("Without"),active2:!a,route2:twttr.router.profilePath({screen_name:b.screenName})})}).subclassOf(twttr.views.StreamViewTogglerBase).template(twttr.templates.stream_view_toggler),twttr.view("twttr.views.SearchStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Top"),active1:b=="relevance",route1:twttr.router.searchResultsPath({query:a}),tip1:"Find the most relevant tweets",title2:_("All"),active2:b=="tweets",tip2:"Find the most recent tweets",route2:twttr.router.searchRealtimePath({query:a}),title3:_("People you follow"),active3:b=="timeline",route3:twttr.router.searchTimelinePath({query:a}),tip3:"Find tweets from people you follow"})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ListsStreamViewToggler",function(a){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Subscribed to"),active1:!a,route1:twttr.router.listsYouFollowPath(),title2:_("Member of"),active2:a,route2:twttr.router.listsFollowingYouPath()})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.FollowersStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("All"),active1:!b,route1:twttr.router.userFollowersPath({screen_name:a}),title2:_("You know"),active2:b,route2:twttr.router.followersYouFollowPath({screen_name:a})})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ProfileListsStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Subscribed to"),active1:a,route1:twttr.router.subscriptionsPath(b),title2:_("Member of"),active2:!a,route2:twttr.router.membershipsPath(b)})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.StreamSavedSearch",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({saved_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.SAVED_SEARCH}}),twttr.view("twttr.views.DirectMessageDialogConversationList",function(){var a=this;twttr.views.Base.apply(a,arguments),a.items=[],twttr.each(a.threads,function(b){a.items.push(new twttr.views.DirectMessageDialogConversationListItem(b))})}).subclassOf(twttr.views.Base),twttr.view("twttr.views.DirectMessageDialogConversationListItem",function(){twttr.views.Base.apply(this,arguments),this.last_message=new twttr.views.Message(this.messages[0]),this.is_last_message_mine=twttr.helpers.isCurrentUser(this.last_message.sender)}).methods({is_unread:function(){return this.obj.hasNewMessages()},last_message_text:function(){var a=this.last_message,c=a.text;return a.entities&&a.entities.urls&&twttr.each(a.entities.urls,function(a){a.display_url&&(c=c.replace(new RegExp(b.util.escapeRegExpChars(h(a.url))),h(a.display_url)))}),c},last_message_timestamp:function(){return this.last_message.timestamp()},last_message_actual_timestamp:function(){return this.last_message.actual_timestamp()},is_replied:function(){return this.is_last_message_mine&&this.messages.length>1},other_person:function(){return this.last_message[this.is_last_message_mine?"recipient":"sender"]}}),twttr.view("twttr.views.DirectMessageDialogConversation",function(){var a=this;twttr.views.Base.apply(a,arguments),a.items=[];for(var b=a.messages.length-1;b>=0;b--)a.items.push(new twttr.views.DirectMessageDialogConversationItem(a.messages[b]))}).subclassOf(twttr.views.Base),twttr.view("twttr.views.DirectMessageDialogConversationItem",function(){twttr.views.Message.apply(this,arguments)}).subclassOf(twttr.views.Message).methods({sent_or_received:function(){return twttr.helpers.isCurrentUser(this.sender)?"sent":"received"}}),twttr.view("twttr.views.TweetDetails",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.Ancestors",function(a){twttr.views.BaseAPI.apply(this,arguments),this._ancestors=a||[]}).subclassOf(twttr.views.BaseAPI).methods({_viewFor:function(a){return new twttr.views.SimpleTweet(a)},_viewsFor:function(a){var b=this;return twttr.map(a,function(a){return b._viewFor(a)})},ancestors:function(){return this._ancestors.length?this._viewsFor(this._ancestors):null}}),twttr.view("twttr.views.TweetStats",function(a){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({replies_count:function(){return this.repliers&&this.repliers.length?this.repliers_count:!1},retweets_count:function(){return this.retweeters&&this.retweeters.length?this.retweeters_count:!1},favorites_count:function(){return this.favoriters&&this.favoriters.length?this.favoriters_count:!1}}),twttr.view("twttr.views.BigAvatarListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.WebPersonalizationResults",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BigAvatarListItem,has_recs:function(){return this.items&&this.items.length>0}}),twttr.view("twttr.views.GlobalNavSavedSearch").subclassOf(twttr.views.BaseAPI).methods({saved_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.SAVED_SEARCH}}),twttr.view("twttr.views.GlobalNavSavedSearches",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.GlobalNavSavedSearch}),twttr.view("twttr.views.GeoMapSmall").subclassOf(twttr.views.Base).methods({place_map_url:function(){return twttr.geo.getPlaceFullAddressAndMapLink(this).map_link}}),twttr.view("twttr.views.PageProfile").methods({is_withheld:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"},is_withheld_copyright:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"&&!!twttr.profileUser.withheldCopyright},is_current_user:function(){return twttr.helpers.isCurrentUser(twttr.profileUser.id)},render_withheld:function(){return this.is_withheld()&&!this.is_current_user()}}),twttr.view("twttr.views.InlineReplyBox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.SoccerMatchedEvent").subclassOf(twttr.views.BaseAPI).methods({_currentStatus:function(){return this.obj.events.getMatchState().current_status},_appendTeamPage:function(a){return a.user?a.team_page=twttr.router.profilePath({screen_name:a.user.screen_name}):a.team_page=a.landing_page_url,a},getEvents:function(){return this.obj.events},home_team:function(){return this._appendTeamPage(this.obj.events.getMatchedTeam(!0))},score:function(){if(this._currentStatus()==="scheduled")return null;var a=this.obj.events.getMatchState().score;return a.search_path=this.search_path(),a},away_team:function(){return this._appendTeamPage(this.obj.events.getMatchedTeam(!1))},match_state:function(){var a=this.obj.events.getMatchState();a.show_time_elapsed_time=!1;if(a.current_status==="inprogress"){a.show_time_elapsed_time=!0;var b=0,c=0,d=a.current_period_elapsed_time+1;return a.overtime?d>15?(b=a.current_period===2?120:105,c=d-15):b=(a.current_period===2?105:90)+d:d>45?(b=a.current_period===2?90:45,c=d-45):b=(a.current_period===2?45:0)+d,a.penalty_shootout?(a.current_period_string=_("PK"),a.current_period_elapsed_time_string=null):(a.current_period_elapsed_time_string=Mustache.to_html(_("{{minutes}} min{{#extra_time}} (+{{extra_time}}){{/extra_time}}",{minutes:b,extra_time:c})),a.overtime?a.current_period_string=_("ET"):a.current_period===1?a.current_period_string=_("1st half"):a.current_period_string=_("2nd half")),a}return a.current_status==="halftime"?(a.overtime?a.current_period_string=_("ET"):a.penalty_shootout?a.current_period_string=_("PK"):a.current_period_string=_("Halftime"),a):null},preview:function(){return this._currentStatus()==="scheduled"?{time:twttr.helpers.prettyTime(this.obj.events.getMatchedEventData().scheduled_start_time_utc,!0),url:this.obj.events.getMatchedEvent().preview_url,search_path:this.search_path()}:null},recap:function(){var a=this.obj.events.getMatchState();return a.current_status==="final"?{url:this.obj.events.getMatchedEvent().recap_url}:null},hashtag:function(){return this.obj.events.getMatchedEvent().event_data.match_hashtag},search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.obj.events.getMatchedEvent().event_data.match_hashtag)})},show_follow:function(){return!twttr.loggedIn}}),twttr.view("twttr.views.CardSoccerOnebox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.SoccerTicker").subclassOf(twttr.views.BaseAPI).methods({ticker_list:function(){return this.obj.events.getOtherMatchState()},preview:function(){return this.obj.events.getOtherMatchState().length===0?this.obj.events.data().follow_news:null}}),a()})}),provide("$lib/easyXDM.js",function(a){(function(a,b,c,d,e,f){function t(a,b){var c=typeof a[b];return c=="function"||c=="object"&&!!a[b]||c=="unknown"}function u(a,b){return typeof a[b]=="object"&&!!a[b]}function v(a){return Object.prototype.toString.call(a)==="[object Array]"}function w(a){try{var b=new ActiveXObject(a);return b=null,!0}catch(c){return!1}}function C(){C=j,z=!0;for(var a=0;a<A.length;a++)A[a]();A.length=0}function E(a,b){if(z){a.call(b);return}A.push(function(){a.call(b)})}function F(){var a=parent;if(n!=="")for(var b=0,c=n.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function G(b){return a.easyXDM=p,n=b,n&&(q="easyXDM_"+n.replace(".","_")+"_"),o}function H(a){return a.match(k)[3]}function I(a){var b=a.match(k),c=b[2],d=b[3],e=b[4]||"";if(c=="http:"&&e==":80"||c=="https:"&&e==":443")e="";return c+"//"+d+e}function J(a){a=a.replace(m,"$1/");if(!a.match(/^(http||https):\/\//)){var b=a.substring(0,1)==="/"?"":c.pathname;b.substring(b.length-1)!=="/"&&(b=b.substring(0,b.lastIndexOf("/")+1)),a=c.protocol+"//"+c.host+b+a}while(l.test(a))a=a.replace(l,"");return a}function K(a,b){var c="",d=a.indexOf("#");d!==-1&&(c=a.substring(d),a=a.substring(0,d));var e=[];for(var g in b)b.hasOwnProperty(g)&&e.push(g+"="+f(b[g]));return a+(s?"#":a.indexOf("?")==-1?"?":"&")+e.join("&")+c}function M(a){return typeof a=="undefined"}function N(){var a={},b={a:[1,2,3]},c='{"a":[1,2,3]}';return typeof JSON!="undefined"&&typeof JSON.stringify=="function"&&JSON.stringify(b).replace(/\s/g,"")===c?JSON:(Object.toJSON&&Object.toJSON(b).replace(/\s/g,"")===c&&(a.stringify=Object.toJSON),typeof String.prototype.evalJSON=="function"&&(b=c.evalJSON(),b.a&&b.a.length===3&&b.a[2]===3&&(a.parse=function(a){return a.evalJSON()})),a.stringify&&a.parse?(N=function(){return a},a):null)}function O(a,b,c){var d;for(var e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],typeof d=="object"?O(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a}function P(){var c=b.createElement("iframe");c.name=q+"TEST",O(c.style,{position:"absolute",left:"-2000px",top:"0px"}),b.body.appendChild(c),r=c.contentWindow!==a.frames[c.name],b.body.removeChild(c)}function Q(a){M(r)&&P();var c;r?c=b.createElement("<iframe name='"+a.props.name+"' frameborder='0' allowtransparency='false' tabindex='-1', role='presentation' scrolling='no' />"):(c=b.createElement("IFRAME"),c.name=a.props.name,c.setAttribute("frameborder","0"),c.setAttribute("allowtransparency","false"),c.setAttribute("tabindex","-1"),c.setAttribute("role","presentation"),c.setAttribute("scrolling","no")),c.id=c.name=a.props.name,delete a.props.name,a.onLoad&&x(c,"load",a.onLoad),typeof a.container=="string"&&(a.container=b.getElementById(a.container)),a.container||(c.style.position="absolute",c.style.top="-2000px",a.container=b.body);var d=a.props.src;return delete a.props.src,O(c,a.props),c.border=c.frameBorder=0,a.container.appendChild(c),c.src=d,a.props.src=d,c}function R(a,b){typeof a=="string"&&(a=[a]);var c,d=a.length;while(d--){c=a[d],c=new RegExp(c.substr(0,1)=="^"?c:"^"+c.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$");if(c.test(b))return!0}return!1}function S(d){var e=d.protocol,f;d.isHost=d.isHost||M(L.xdm_p),s=d.hash||!1,d.props||(d.props={});if(!d.isHost){d.channel=L.xdm_c,d.secret=L.xdm_s,d.remote=L.xdm_e,e=L.xdm_p;if(d.acl&&!R(d.acl,d.remote))throw new Error("Access denied for "+d.remote)}else d.remote=J(d.remote),d.channel=d.channel||"default"+i++,d.secret=Math.random().toString(16).substring(2),M(e)&&(I(c.href)==I(d.remote)?e="4":t(a,"postMessage")||t(b,"postMessage")?e="1":t(a,"ActiveXObject")&&w("ShockwaveFlash.ShockwaveFlash")?e="6":navigator.product==="Gecko"&&"frameElement"in a&&navigator.userAgent.indexOf("WebKit")==-1?e="5":d.remoteHelper?(d.remoteHelper=J(d.remoteHelper),e="2"):e="0");switch(e){case"0":O(d,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0);if(d.isHost){if(!d.local){var g=c.protocol+"//"+c.host,j=b.body.getElementsByTagName("img"),k,l=j.length;while(l--){k=j[l];if(k.src.substring(0,g.length)===g){d.local=k.src;break}}d.local||(d.local=a)}var m={xdm_c:d.channel,xdm_p:0};d.local===a?(d.usePolling=!0,d.useParent=!0,d.local=c.protocol+"//"+c.host+c.pathname+c.search,m.xdm_e=d.local,m.xdm_pa=1):m.xdm_e=J(d.local),d.container&&(d.useResize=!1,m.xdm_po=1),d.remote=K(d.remote,m)}else O(d,{channel:L.xdm_c,remote:L.xdm_e,useParent:!M(L.xdm_pa),usePolling:!M(L.xdm_po),useResize:d.useParent?!1:d.useResize});f=[new o.stack.HashTransport(d),new o.stack.ReliableBehavior({}),new o.stack.QueueBehavior({encode:!0,maxLength:4e3-d.remote.length}),new o.stack.VerifyBehavior({initiate:d.isHost})];break;case"1":f=[new o.stack.PostMessageTransport(d)];break;case"2":f=[new o.stack.NameTransport(d),new o.stack.QueueBehavior,new o.stack.VerifyBehavior({initiate:d.isHost})];break;case"3":f=[new o.stack.NixTransport(d)];break;case"4":f=[new o.stack.SameOriginTransport(d)];break;case"5":f=[new o.stack.FrameElementTransport(d)];break;case"6":d.swf||(d.swf="../../tools/easyxdm.swf"),f=[new o.stack.FlashTransport(d)]}return f.push(new o.stack.QueueBehavior({lazy:d.lazy,remove:!0})),f}function T(a){var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var d=0,e=a.length;d<e;d++)b=a[d],O(b,c,!0),d!==0&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function U(a){a.up.down=a.down,a.down.up=a.up,a.up=a.down=null}var g=this,i=Math.floor(Math.random()*1e4),j=Function.prototype,k=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,l=/[\-\w]+\/\.\.\//,m=/([^:])\/\//g,n="",o={},p=a.easyXDM,q="easyXDM_",r,s=!1,x,y;if(t(a,"addEventListener"))x=function(a,b,c){a.addEventListener(b,c,!1)},y=function(a,b,c){a.removeEventListener(b,c,!1)};else{if(!t(a,"attachEvent"))throw new Error("Browser not supported");x=function(a,b,c){a.attachEvent("on"+b,c)},y=function(a,b,c){a.detachEvent("on"+b,c)}}var z=!1,A=[],B;"readyState"in b?(B=b.readyState,z=B=="complete"||~navigator.userAgent.indexOf("AppleWebKit/")&&(B=="loaded"||B=="interactive")):z=!!b.body;if(!z){if(t(a,"addEventListener"))x(b,"DOMContentLoaded",C);else{x(b,"readystatechange",function(){b.readyState=="complete"&&C()});if(b.documentElement.doScroll&&a===top){var D=function(){if(z)return;try{b.documentElement.doScroll("left")}catch(a){d(D,1);return}C()};D()}}x(a,"load",C)}var L=function(a){a=a.substring(1).split("&");var b={},c,d=a.length;while(d--)c=a[d].split("="),b[c[0]]=e(c[1]);return b}(/xdm_e=/.test(c.search)?c.search:c.hash);O(o,{version:"2.4.12.108",query:L,stack:{},apply:O,getJSONObject:N,whenReady:E,noConflict:G}),o.DomHelper={on:x,un:y,requiresJSON:function(c){u(a,"JSON")||b.write('<script type="text/javascript" src="'+c+'"><'+"/script>")}},function(){var a={};o.Fn={set:function(b,c){a[b]=c},get:function(b,c){var d=a[b];return c&&delete a[b],d}}}(),o.Socket=function(a){var b=T(S(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){a.onReady&&a.onReady(b)}}])),c=I(a.remote);this.origin=I(a.remote),this.destroy=function(){b.destroy()},this.postMessage=function(a){b.outgoing(a,c)},b.init()},o.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];typeof d=="function"&&(b.local[c]={method:d})}var e=T(S(a).concat([new o.stack.RpcBehavior(this,b),{callback:function(b){a.onReady&&a.onReady(b)}}]));this.origin=I(a.remote),this.destroy=function(){e.destroy()},e.init()},o.stack.SameOriginTransport=function(a){var b,e,f,g;return b={outgoing:function(a,b,c){f(a),c&&c()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){g=I(a.remote),a.isHost?(O(a.props,{src:K(a.remote,{xdm_e:c.protocol+"//"+c.host+c.pathname,xdm_c:a.channel,xdm_p:4}),name:q+a.channel+"_provider"}),e=Q(a),o.Fn.set(a.channel,function(a){return f=a,d(function(){b.up.callback(!0)},0),function(a){b.up.incoming(a,g)}})):(f=F().Fn.get(a.channel,!0)(function(a){b.up.incoming(a,g)}),d(function(){b.up.callback(!0)},0))},init:function(){E(b.onDOMReady,b)}}},o.stack.FlashTransport=function(a){function m(a){d(function(){e.up.incoming(a,i)},0)}function p(d){var e=a.swf,f="easyXDM_swf_"+Math.floor(Math.random()*1e4),g=l+'easyXDM.Fn.get("flash_'+f+'_init")';o.Fn.set("flash_"+f+"_init",function(){o.stack.FlashTransport.__swf=j=k.firstChild,d()}),k=b.createElement("div"),O(k.style,{height:"1px",width:"1px",postition:"abosolute",left:0,top:0}),b.body.appendChild(k);var i="proto="+c.protocol+"&domain="+H(c.href)+"&init="+g;k.innerHTML="<object height='1' width='1' type='application/x-shockwave-flash' id='"+f+"' data='"+e+"'>"+"<param name='allowScriptAccess' value='always'></param>"+"<param name='wmode' value='transparent'>"+"<param name='movie' value='"+e+"'></param>"+"<param name='flashvars' value='"+i+"'></param>"+"<embed type='application/x-shockwave-flash' FlashVars='"+i+"' allowScriptAccess='always' wmode='transparent' src='"+e+"' height='1' width='1'></embed>"+"</object>"}var e,f,g,i,j,k,l=n?n+".":"";return e={outgoing:function(b,c,d){j.postMessage(a.channel,b),d&&d()},destroy:function(){try{j.destroyChannel(a.channel)}catch(b){}j=null,f&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){i=I(a.remote),j=o.stack.FlashTransport.__swf;var b=function(){a.isHost?o.Fn.set("flash_"+a.channel+"_onMessage",function(b){b==a.channel+"-ready"&&(o.Fn.set("flash_"+a.channel+"_onMessage",m),d(function(){e.up.callback(!0)},0))}):o.Fn.set("flash_"+a.channel+"_onMessage",m),j.createChannel(a.channel,a.remote,a.isHost,l+'easyXDM.Fn.get("flash_'+a.channel+'_onMessage")',a.secret),a.isHost?(O(a.props,{src:K(a.remote,{xdm_e:I(c.href),xdm_c:a.channel,xdm_s:a.secret,xdm_p:6}),name:q+a.channel+"_provider"}),f=Q(a)):(j.postMessage(a.channel,a.channel+"-ready"),d(function(){e.up.callback(!0)},0))};j?b():p(b)},init:function(){E(e.onDOMReady,e)}}},o.stack.PostMessageTransport=function(b){function j(a){if(a.origin)return I(a.origin);if(a.uri)return I(a.uri);if(a.domain)return c.protocol+"//"+a.domain;throw"Unable to retrieve the origin of the event"}function k(a){var c=j(a);c==i&&a.data.substring(0,b.channel.length+1)==b.channel+" "&&e.up.incoming(a.data.substring(b.channel.length+1),c)}var e,f,g,i;return e={outgoing:function(a,c,d){g.postMessage(b.channel+" "+a,c||i),d&&d()},destroy:function(){y(a,"message",k),f&&(g=null,f.parentNode.removeChild(f),f=null)},onDOMReady:function(){i=I(b.remote),b.isHost?(x(a,"message",function j(c){c.data==b.channel+"-ready"&&(g="postMessage"in f.contentWindow?f.contentWindow:f.contentWindow.document,y(a,"message",j),x(a,"message",k),d(function(){e.up.callback(!0)},0))}),O(b.props,{src:K(b.remote,{xdm_e:I(c.href),xdm_c:b.channel,xdm_p:1}),name:q+b.channel+"_provider"}),f=Q(b)):(x(a,"message",k),g="postMessage"in a.parent?a.parent:a.parent.document,g.postMessage(b.channel+"-ready",i),d(function(){e.up.callback(!0)},0))},init:function(){E(e.onDOMReady,e)}}},o.stack.FrameElementTransport=function(e){var f,g,i,j;return f={outgoing:function(a,b,c){i.call(this,a),c&&c()},destroy:function(){g&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){j=I(e.remote),e.isHost?(O(e.props,{src:K(e.remote,{xdm_e:I(c.href),xdm_c:e.channel,xdm_p:5}),name:q+e.channel+"_provider"}),g=Q(e),g.fn=function(a){return delete g.fn,i=a,d(function(){f.up.callback(!0)},0),function(a){f.up.incoming(a,j)}}):(b.referrer&&I(b.referrer)!=L.xdm_e&&(a.top.location=L.xdm_e),i=a.frameElement.fn(function(a){f.up.incoming(a,j)}),f.up.callback(!0))},init:function(){E(f.onDOMReady,f)}}},o.stack.NixTransport=function(e){var f,i,j,k,l;return f={outgoing:function(a,b,c){j(a),c&&c()},destroy:function(){l=null,i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){k=I(e.remote);if(e.isHost){try{t(a,"getNixProxy")||a.execScript("Class NixProxy\n    Private m_parent, m_child, m_Auth\n\n    Public Sub SetParent(obj, auth)\n        If isEmpty(m_Auth) Then m_Auth = auth\n        SET m_parent = obj\n    End Sub\n    Public Sub SetChild(obj)\n        SET m_child = obj\n        m_parent.ready()\n    End Sub\n\n    Public Sub SendToParent(data, auth)\n        If m_Auth = auth Then m_parent.send(CStr(data))\n    End Sub\n    Public Sub SendToChild(data, auth)\n        If m_Auth = auth Then m_child.send(CStr(data))\n    End Sub\nEnd Class\nFunction getNixProxy()\n    Set GetNixProxy = New NixProxy\nEnd Function\n","vbscript"),l=getNixProxy(),l.SetParent({send:function(a){f.up.incoming(a,k)},ready:function(){d(function(){f.up.callback(!0)},0)}},e.secret),j=function(a){l.SendToChild(a,e.secret)}}catch(m){throw new Error("Could not set up VBScript NixProxy:"+m.message)}O(e.props,{src:K(e.remote,{xdm_e:I(c.href),xdm_c:e.channel,xdm_s:e.secret,xdm_p:3}),name:q+e.channel+"_provider"}),i=Q(e),i.contentWindow.opener=l}else{b.referrer&&I(b.referrer)!=L.xdm_e&&(a.top.location=L.xdm_e);try{l=a.opener}catch(n){throw new Error("Cannot access window.opener")}l.SetChild({send:function(a){g.setTimeout(function(){f.up.incoming(a,k)},0)}}),j=function(a){l.SendToParent(a,e.secret)},d(function(){f.up.callback(!0)},0)}},init:function(){E(f.onDOMReady,f)}}},o.stack.NameTransport=function(a){function l(b){var d=a.remoteHelper+(c?"#_3":"#_2")+a.channel;e.contentWindow.sendMessage(b,d)}function m(){c?(++g===2||!c)&&b.up.callback(!0):(l("ready"),b.up.callback(!0))}function n(a){b.up.incoming(a,j)}function p(){i&&d(function(){i(!0)},0)}var b,c,e,f,g,i,j,k;return b={outgoing:function(a,b,c){i=c,l(a)},destroy:function(){e.parentNode.removeChild(e),e=null,c&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){c=a.isHost,g=0,j=I(a.remote),a.local=J(a.local),c?(o.Fn.set(a.channel,function(b){c&&b==="ready"&&(o.Fn.set(a.channel,n),m())}),k=K(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),O(a.props,{src:k+"#"+a.channel,name:q+a.channel+"_provider"}),f=Q(a)):(a.remoteHelper=a.remote,o.Fn.set(a.channel,n)),e=Q({props:{src:a.local+"#_4"+a.channel},onLoad:function b(){var c=e||this;y(c,"load",b),o.Fn.set(a.channel+"_load",p),function f(){typeof c.contentWindow.sendMessage=="function"?m():d(f,50)}()}})},init:function(){E(b.onDOMReady,b)}}},o.stack.HashTransport=function(b){function p(a){if(!m)return;var c=b.remote+"#"+k++ +"_"+a;(f||!n?m.contentWindow:m).location=c}function r(a){j=a,c.up.incoming(j.substring(j.indexOf("_")+1),o)}function s(){if(!l)return;var a=l.location.href,b="",c=a.indexOf("#");c!=-1&&(b=a.substring(c)),b&&b!=j&&r(b)}function t(){g=setInterval(s,i)}var c,e=this,f,g,i,j,k,l,m,n,o;return c={outgoing:function(a,b){p(a)},destroy:function(){a.clearInterval(g),(f||!n)&&m.parentNode.removeChild(m),m=null},onDOMReady:function(){f=b.isHost,i=b.interval,j="#"+b.channel,k=0,n=b.useParent,o=I(b.remote);if(f){b.props={src:b.remote,name:q+b.channel+"_provider"};if(n)b.onLoad=function(){l=a,t(),c.up.callback(!0)};else{var e=0,g=b.delay/50;(function p(){if(++e>g)throw new Error("Unable to reference listenerwindow");try{l=m.contentWindow.frames[q+b.channel+"_consumer"]}catch(a){}l?(t(),c.up.callback(!0)):d(p,50)})()}m=Q(b)}else l=a,t(),n?(m=parent,c.up.callback(!0)):(O(b,{props:{src:b.remote+"#"+b.channel+new Date,name:q+b.channel+"_consumer"},onLoad:function(){c.up.callback(!0)}}),m=Q(b))},init:function(){E(c.onDOMReady,c)}}},o.stack.ReliableBehavior=function(a){var b,c,d=0,e=0,f="";return b={incoming:function(a,g){var i=a.indexOf("_"),j=a.substring(0,i).split(",");a=a.substring(i+1),j[0]==d&&(f="",c&&c(!0)),a.length>0&&(b.down.outgoing(j[1]+","+d+"_"+f,g),e!=j[1]&&(e=j[1],b.up.incoming(a,g)))},outgoing:function(a,g,i){f=a,c=i,b.down.outgoing(e+","+ ++d+"_"+a,g)}}},o.stack.QueueBehavior=function(a){function n(){if(a.remove&&c.length===0){U(b);return}if(g||c.length===0||j)return;g=!0;var e=c.shift();b.down.outgoing(e.data,e.origin,function(a){g=!1,e.callback&&d(function(){e.callback(a)},0),n()})}var b,c=[],g=!0,i="",j,k=0,l=!1,m=!1;return b={init:function(){M(a)&&(a={}),a.maxLength&&(k=a.maxLength,m=!0),a.lazy?l=!0:b.down.init()},callback:function(a){g=!1;var c=b.up;n(),c.callback(a)},incoming:function(c,d){if(m){var f=c.indexOf("_"),g=parseInt(c.substring(0,f),10);i+=c.substring(f+1),g===0&&(a.encode&&(i=e(i)),b.up.incoming(i,d),i="")}else b.up.incoming(c,d)},outgoing:function(d,e,g){a.encode&&(d=f(d));var i=[],j;if(m){while(d.length!==0)j=d.substring(0,k),d=d.substring(j.length),i.push(j);while(j=i.shift())c.push({data:i.length+"_"+j,origin:e,callback:i.length===0?g:null})}else c.push({data:d,origin:e,callback:g});l?b.down.init():n()},destroy:function(){j=!0,b.down.destroy()}}},o.stack.VerifyBehavior=function(a){function f(){c=Math.random().toString(16).substring(2),b.down.outgoing(c)}var b,c,d,e=!1;return b={incoming:function(e,g){var i=e.indexOf("_");i===-1?e===c?b.up.callback(!0):d||(d=e,a.initiate||f(),b.down.outgoing(e)):e.substring(0,i)===d&&b.up.incoming(e.substring(i+1),g)},outgoing:function(a,d,e){b.down.outgoing(c+"_"+a,d,e)},callback:function(b){a.initiate&&f()}}},o.stack.RpcBehavior=function(a,b){function g(a){a.jsonrpc="2.0",c.down.outgoing(d.stringify(a))}function i(a,b){var c=Array.prototype.slice;return function(){var d=arguments.length,i,j={method:b};d>0&&typeof arguments[d-1]=="function"?(d>1&&typeof arguments[d-2]=="function"?(i={success:arguments[d-2],error:arguments[d-1]},j.params=c.call(arguments,0,d-2)):(i={success:arguments[d-1]},j.params=c.call(arguments,0,d-1)),f[""+ ++e]=i,j.id=e):j.params=c.call(arguments,0),a.namedParams&&j.params.length===1&&(j.params=j.params[0]),g(j)}}function k(a,b,c,d){if(!c){b&&g({id:b,error:{code:-32601,message:"Procedure not found."}});return}var e,f;b?(e=function(a){e=j,g({id:b,result:a})},f=function(a,c){f=j;var d={id:b,error:{code:-32099,message:a}};c&&(d.error.data=c),g(d)}):e=f=j,v(d)||(d=[d]);try{var i=c.method.apply(c.scope,d.concat([e,f]));M(i)||e(i)}catch(k){f(k.message)}}var c,d=b.serializer||N(),e=0,f={};return c={incoming:function(a,c){var e=d.parse(a);if(e.method)b.handle?b.handle(e,g):k(e.method,e.id,b.local[e.method],e.params);else{var i=f[e.id];e.error?i.error&&i.error(e.error):i.success&&i.success(e.result),delete f[e.id]}},init:function(){if(b.remote)for(var d in b.remote)b.remote.hasOwnProperty(d)&&(a[d]=i(b.remote[d],d));c.down.init()},destroy:function(){for(var d in b.remote)b.remote.hasOwnProperty(d)&&a.hasOwnProperty(d)&&delete a[d];c.down.destroy()}}},g.easyXDM=o})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),a()}),provide("libwrap/easyxdm",function(a){using("$lib/easyXDM.js",function(){a(easyXDM)})}),provide("lib/lazyload",function(a){a(function(a){function i(b,c){var d=a.createElement(b),e;for(e in c)c.hasOwnProperty(e)&&d.setAttribute(e,c[e]);return d}function j(a){var b=d[a],c,g;b&&(c=b.callback,g=b.urls,g.shift(),e=0,g.length||(c&&c.call(b.context,b.obj),d[a]=null,f[a].length&&l(a)))}function k(){var c=navigator.userAgent;b={async:a.createElement("script").async===!0},(b.webkit=/AppleWebKit\//.test(c))||(b.ie=/MSIE/.test(c))||(b.opera=/Opera/.test(c))||(b.gecko=/Gecko\//.test(c))||(b.unknown=!0)}function l(e,g,l,o,p){var q=function(){j(e)},r=e==="css",s=[],t,u,v,w,x,y;b||k();if(g){g=typeof g=="string"?[g]:g.concat();if(r||b.async||b.gecko||b.opera)f[e].push({urls:g,callback:l,obj:o,context:p});else for(t=0,u=g.length;t<u;++t)f[e].push({urls:[g[t]],callback:t===u-1?l:null,obj:o,context:p})}if(d[e]||!(w=d[e]=f[e].shift()))return;c||(c=a.head||a.getElementsByTagName("head")[0]),x=w.urls;for(t=0,u=x.length;t<u;++t)y=x[t],r?v=b.gecko?i("style"):i("link",{href:y,rel:"stylesheet"}):(v=i("script",{src:y}),v.async=!1),v.className="lazyload",v.setAttribute("charset","utf-8"),b.ie&&!r?v.onreadystatechange=function(){/loaded|complete/.test(v.readyState)&&(v.onreadystatechange=null,q())}:r&&(b.gecko||b.webkit)?b.webkit?(w.urls[t]=v.href,n()):(v.innerHTML='@import "'+y+'";',m(v)):v.onload=v.onerror=q,s.push(v);for(t=0,u=s.length;t<u;++t)c.appendChild(s[t])}function m(a){var b;try{b=!!a.sheet.cssRules}catch(c){e+=1,e<200?setTimeout(function(){m(a)},50):b&&j("css");return}j("css")}function n(){var a=d.css,b;if(a){b=g.length;while(--b>=0)if(g[b].href===a.urls[0]){j("css");break}e+=1,a&&(e<200?setTimeout(n,50):j("css"))}}var b,c,d={},e=0,f={css:[],js:[]},g=a.styleSheets;return{css:function(a,b,c,d){l("css",a,b,c,d)},js:function(a,b,c,d){l("js",a,b,c,d)}}}(window.document))}),provide("phoenix-more-css-wrapper",function(a){var b=[];if(!twttr.isTestEnv)if(twttr.isT1){var c=twttr.isRTL?".rtl":"";b.push(twttr.hasHoversInCss?"css!/t1/css/t1_more.bundle"+c+".css":"css!/t1/css/t1_more_no_hovers.bundle"+c+".css")}else b.push("css!/phoenix/css/phoenix_more.bundle.css");using(b,function(){a()})}),provide("$lib/jquery.ui.core.js",function(a){(function($,a){function b(a,b){var d=a.nodeName.toLowerCase();if("area"===d){var e=a.parentNode,f=e.name,g;return!a.href||!f||e.nodeName.toLowerCase()!=="map"?!1:(g=$("img[usemap=#"+f+"]")[0],!!g&&c(g))}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||b:b)&&c(a)}function c(a){return!$(a).parents().andSelf().filter(function(){return $.curCSS(this,"visibility")==="hidden"||$.expr.filters.hidden(this)}).length}$.ui=$.ui||{};if($.ui.version)return;$.extend($.ui,{version:"1.8.16",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),$.fn.extend({propAttr:$.fn.prop||$.fn.attr,_focus:$.fn.focus,focus:function(a,b){return typeof a=="number"?this.each(function(){var c=this;setTimeout(function(){$(c).focus(),b&&b.call(c)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return $.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.curCSS(this,"position",1))&&/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?$(document):a},zIndex:function(b){if(b!==a)return this.css("zIndex",b);if(this.length){var c=$(this[0]),d,e;while(c.length&&c[0]!==document){d=c.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){e=parseInt(c.css("zIndex"),10);if(!isNaN(e)&&e!==0)return e}c=c.parent()}}return 0},disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.each(["Width","Height"],function(b,c){function g(a,b,c,e){return $.each(d,function(){b-=parseFloat($.curCSS(a,"padding"+this,!0))||0,c&&(b-=parseFloat($.curCSS(a,"border"+this+"Width",!0))||0),e&&(b-=parseFloat($.curCSS(a,"margin"+this,!0))||0)}),b}var d=c==="Width"?["Left","Right"]:["Top","Bottom"],e=c.toLowerCase(),f={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+c]=function(b){return b===a?f["inner"+c].call(this):this.each(function(){$(this).css(e,g(this,b)+"px")})},$.fn["outer"+c]=function(a,b){return typeof a!="number"?f["outer"+c].call(this,a):this.each(function(){$(this).css(e,g(this,a,!0,b)+"px")})}}),$.extend($.expr[":"],{data:function(a,b,c){return!!$.data(a,c[3])},focusable:function(a){return b(a,!isNaN($.attr(a,"tabindex")))},tabbable:function(a){var c=$.attr(a,"tabindex"),d=isNaN(c);return(d||c>=0)&&b(a,!d)}}),$(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));$.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),$.support.minHeight=b.offsetHeight===100,$.support.selectstart="onselectstart"in b,a.removeChild(b).style.display="none"}),$.extend($.ui,{plugin:{add:function(a,b,c){var d=$.ui[a].prototype;for(var e in c)d.plugins[e]=d.plugins[e]||[],d.plugins[e].push([b,c[e]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if($(a).css("overflow")==="hidden")return!1;var c=b&&b==="left"?"scrollLeft":"scrollTop",d=!1;return a[c]>0?!0:(a[c]=1,d=a[c]>0,a[c]=0,d)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(a,b,c,d,e,f){return $.ui.isOverAxis(a,c,e)&&$.ui.isOverAxis(b,d,f)}})})(jQuery),a()}),provide("$lib/jquery.ui.widget.js",function(a){(function($,a){if($.cleanData){var b=$.cleanData;$.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)try{$(d).triggerHandler("remove")}catch(e){}b(a)}}else{var c=$.fn.remove;$.fn.remove=function(a,b){return this.each(function(){return b||(!a||$.filter(a,[this]).length)&&$("*",this).add([this]).each(function(){try{$(this).triggerHandler("remove")}catch(a){}}),c.call($(this),a,b)})}}$.widget=function(a,b,c){var d=a.split(".")[0],e;a=a.split(".")[1],e=d+"-"+a,c||(c=b,b=$.Widget),$.expr[":"][e]=function(b){return!!$.data(b,a)},$[d]=$[d]||{},$[d][a]=function(a,b){arguments.length&&this._createWidget(a,b)};var f=new b;f.options=$.extend(!0,{},f.options),$[d][a].prototype=$.extend(!0,f,{namespace:d,widgetName:a,widgetEventPrefix:$[d][a].prototype.widgetEventPrefix||a,widgetBaseClass:e},c),$.widget.bridge(a,$[d][a])},$.widget.bridge=function(b,c){$.fn[b]=function(d){var e=typeof d=="string",f=Array.prototype.slice.call(arguments,1),g=this;return d=!e&&f.length?$.extend.apply(null,[!0,d].concat(f)):d,e&&d.charAt(0)==="_"?g:(e?this.each(function(){var c=$.data(this,b),e=c&&$.isFunction(c[d])?c[d].apply(c,f):c;if(e!==c&&e!==a)return g=e,!1}):this.each(function(){var a=$.data(this,b);a?a.option(d||{})._init():$.data(this,b,new c(d,this))}),g)}},$.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,b){$.data(b,this.widgetName,this),this.element=$(b),this.options=$.extend(!0,{},this.options,this._getCreateOptions(),a);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(b,c){var d=b;if(arguments.length===0)return $.extend({},this.options);if(typeof b=="string"){if(c===a)return this.options[b];d={},d[b]=c}return this._setOptions(d),this},_setOptions:function(a){var b=this;return $.each(a,function(a,c){b._setOption(a,c)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,b,c){var d=this.options[a];b=$.Event(b),b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),c=c||{};if(b.originalEvent)for(var e=$.event.props.length,f;e;)f=$.event.props[--e],b[f]=b.originalEvent[f];return this.element.trigger(b,c),!($.isFunction(d)&&d.call(this.element[0],b,c)===!1||b.isDefaultPrevented())}}})(jQuery),a()}),provide("$lib/jquery.ui.mouse.js",function(a){(function($,a){var b=!1;$(document).mouseup(function(a){b=!1}),$.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===$.data(b.target,a.widgetName+".preventClickEvent"))return $.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(a){if(b)return;this._mouseStarted&&this._mouseUp(a),this._mouseDownEvent=a;var c=this,d=a.which==1,e=typeof this.options.cancel=="string"&&a.target.nodeName?$(a.target).closest(this.options.cancel).length:!1;if(!d||e||!this._mouseCapture(a))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=this._mouseStart(a)!==!1;if(!this._mouseStarted)return a.preventDefault(),!0}return!0===$.data(a.target,this.widgetName+".preventClickEvent")&&$.removeData(a.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),a.preventDefault(),b=!0,!0},_mouseMove:function(a){return!$.browser.msie||document.documentMode>=9||!!a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return $(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&$.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery),a()}),provide("$lib/jquery.ui.draggable.js",function(a){(function($,a){$.widget("ui.draggable",$.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var b=this.options;return this.helper||b.disabled||$(a.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(a),this.handle?(b.iframeFix&&$(b.iframeFix===!0?"iframe":b.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(a){var b=this.options;return this.helper=this._createHelper(a),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),b.containment&&this._setContainment(),this._trigger("start",a)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!b.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,a),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(a,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,a),!0)},_mouseDrag:function(a,b){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute");if(!b){var c=this._uiHash();if(this._trigger("drag",a,c)===!1)return this._mouseUp({}),!1;this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return $.ui.ddmanager&&$.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var b=!1;$.ui.ddmanager&&!this.options.dropBehaviour&&(b=$.ui.ddmanager.drop(this,a)),this.dropped&&(b=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,b)){var c=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",a)!==!1&&c._clear()})}else this._trigger("stop",a)!==!1&&this._clear();return!1},_mouseUp:function(a){return this.options.iframeFix===!0&&$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,a),$.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){var b=!this.options.handle||!$(this.options.handle,this.element).length?!0:!1;return $(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(b=!0)}),b},_createHelper:function(a){var b=this.options,c=$.isFunction(b.helper)?$(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return c.parents("body").length||c.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo),c[0]!=this.element[0]&&!/(fixed|absolute)/.test(c.css("position"))&&c.css("position","absolute"),c},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),$.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left"in a&&(this.offset.click.left=a.left+this.margins.left),"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top"in a&&(this.offset.click.top=a.top+this.margins.top),"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&$.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:$(window).scrollLeft())+$(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:$(window).scrollTop())+($(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var b=$(a.containment),c=b[0];if(!c)return;var d=b.offset(),e=$(c).css("overflow")!="hidden";this.containment=[(parseInt($(c).css("borderLeftWidth"),10)||0)+(parseInt($(c).css("paddingLeft"),10)||0),(parseInt($(c).css("borderTopWidth"),10)||0)+(parseInt($(c).css("paddingTop"),10)||0),(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt($(c).css("borderLeftWidth"),10)||0)-(parseInt($(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt($(c).css("borderTopWidth"),10)||0)-(parseInt($(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=b}else a.containment.constructor==Array&&(this.containment=a.containment)},_convertPositionTo:function(a,b){b||(b=this.position);var c=a=="absolute"?1:-1,d=this.options,e=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop())*c),left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*c)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(c[0].tagName),e=a.pageX,f=a.pageY;if(this.originalPosition){var g;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();g=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else g=this.containment;a.pageX-this.offset.click.left<g[0]&&(e=g[0]+this.offset.click.left),a.pageY-this.offset.click.top<g[1]&&(f=g[1]+this.offset.click.top),a.pageX-this.offset.click.left>g[2]&&(e=g[2]+this.offset.click.left),a.pageY-this.offset.click.top>g[3]&&(f=g[3]+this.offset.click.top)}if(b.grid){var j=b.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY;f=g?j-this.offset.click.top<g[1]||j-this.offset.click.top>g[3]?j-this.offset.click.top<g[1]?j+b.grid[1]:j-b.grid[1]:j:j;var k=b.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/b.grid[0])*b.grid[0]:this.originalPageX;e=g?k-this.offset.click.left<g[0]||k-this.offset.click.left>g[2]?k-this.offset.click.left<g[0]?k+b.grid[0]:k-b.grid[0]:k:k}}return{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():d?0:c.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():d?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(a,b,c){return c=c||this._uiHash(),$.ui.plugin.call(this,a,[b,c]),a=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,a,b,c)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.extend($.ui.draggable,{version:"1.8.16"}),$.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=$(this).data("draggable"),d=c.options,e=$.extend({},b,{item:c.element});c.sortables=[],$(d.connectToSortable).each(function(){var b=$.data(this,"sortable");b&&!b.options.disabled&&(c.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,e))})},stop:function(a,b){var c=$(this).data("draggable"),d=$.extend({},b,{item:c.element});$.each(c.sortables,function(){this.instance.isOver?(this.instance.isOver=0,c.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,d))})},drag:function(a,b){var c=$(this).data("draggable"),d=this,e=function(a){var b=this.offset.click.top,c=this.offset.click.left,d=this.positionAbs.top,e=this.positionAbs.left,f=a.height,g=a.width,i=a.top,j=a.left;return $.ui.isOver(d+b,e+c,i,j,f,g)};$.each(c.sortables,function(e){this.instance.positionAbs=c.positionAbs,this.instance.helperProportions=c.helperProportions,this.instance.offset.click=c.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(d).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return b.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",a),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",a),c.dropped=!1)})}}),$.ui.plugin.add("draggable","cursor",{start:function(a,b){var c=$("body"),d=$(this).data("draggable").options;c.css("cursor")&&(d._cursor=c.css("cursor")),c.css("cursor",d.cursor)},stop:function(a,b){var c=$(this).data("draggable").options;c._cursor&&$("body").css("cursor",c._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(a,b){var c=$(b.helper),d=$(this).data("draggable").options;c.css("opacity")&&(d._opacity=c.css("opacity")),c.css("opacity",d.opacity)},stop:function(a,b){var c=$(this).data("draggable").options;c._opacity&&$(b.helper).css("opacity",c._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(a,b){var c=$(this).data("draggable");c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"&&(c.overflowOffset=c.scrollParent.offset())},drag:function(a,b){var c=$(this).data("draggable"),d=c.options,e=!1;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!d.axis||d.axis!="x")c.overflowOffset.top+c.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:a.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed);if(!d.axis||d.axis!="y")c.overflowOffset.left+c.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:a.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed)}else{if(!d.axis||d.axis!="x")a.pageY-$(document).scrollTop()<d.scrollSensitivity?e=$(document).scrollTop($(document).scrollTop()-d.scrollSpeed):$(window).height()-(a.pageY-$(document).scrollTop())<d.scrollSensitivity&&(e=$(document).scrollTop($(document).scrollTop()+d.scrollSpeed));if(!d.axis||d.axis!="y")a.pageX-$(document).scrollLeft()<d.scrollSensitivity?e=$(document).scrollLeft($(document).scrollLeft()-d.scrollSpeed):$(window).width()-(a.pageX-$(document).scrollLeft())<d.scrollSensitivity&&(e=$(document).scrollLeft($(document).scrollLeft()+d.scrollSpeed))}e!==!1&&$.ui.ddmanager&&!d.dropBehaviour&&$.ui.ddmanager.prepareOffsets(c,a)}}),$.ui.plugin.add("draggable","snap",{start:function(a,b){var c=$(this).data("draggable"),d=c.options;c.snapElements=[],$(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var a=$(this),b=a.offset();this!=c.element[0]&&c.snapElements.push({item:this,width:a.outerWidth(),height:a.outerHeight(),top:b.top,left:b.left})})},drag:function(a,b){var c=$(this).data("draggable"),d=c.options,e=d.snapTolerance,f=b.offset.left,g=f+c.helperProportions.width,i=b.offset.top,j=i+c.helperProportions.height;for(var k=c.snapElements.length-1;k>=0;k--){var l=c.snapElements[k].left,m=l+c.snapElements[k].width,n=c.snapElements[k].top,o=n+c.snapElements[k].height;if(!(l-e<f&&f<m+e&&n-e<i&&i<o+e||l-e<f&&f<m+e&&n-e<j&&j<o+e||l-e<g&&g<m+e&&n-e<i&&i<o+e||l-e<g&&g<m+e&&n-e<j&&j<o+e)){c.snapElements[k].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,a,$.extend(c._uiHash(),{snapItem:c.snapElements[k].item})),c.snapElements[k].snapping=!1;continue}if(d.snapMode!="inner"){var p=Math.abs(n-j)<=e,q=Math.abs(o-i)<=e,r=Math.abs(l-g)<=e,s=Math.abs(m-f)<=e;p&&(b.position.top=c._convertPositionTo("relative",{top:n-c.helperProportions.height,left:0}).top-c.margins.top),q&&(b.position.top=c._convertPositionTo("relative",{top:o,left:0}).top-c.margins.top),r&&(b.position.left=c._convertPositionTo("relative",{top:0,left:l-c.helperProportions.width}).left-c.margins.left),s&&(b.position.left=c._convertPositionTo("relative",{top:0,left:m}).left-c.margins.left)}var t=p||q||r||s;if(d.snapMode!="outer"){var p=Math.abs(n-i)<=e,q=Math.abs(o-j)<=e,r=Math.abs(l-f)<=e,s=Math.abs(m-g)<=e;p&&(b.position.top=c._convertPositionTo("relative",{top:n,left:0}).top-c.margins.top),q&&(b.position.top=c._convertPositionTo("relative",{top:o-c.helperProportions.height,left:0}).top-c.margins.top),r&&(b.position.left=c._convertPositionTo("relative",{top:0,left:l}).left-c.margins.left),s&&(b.position.left=c._convertPositionTo("relative",{top:0,left:m-c.helperProportions.width}).left-c.margins.left)}!c.snapElements[k].snapping&&(p||q||r||s||t)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,a,$.extend(c._uiHash(),{snapItem:c.snapElements[k].item})),c.snapElements[k].snapping=p||q||r||s||t}}}),$.ui.plugin.add("draggable","stack",{start:function(a,b){var c=$(this).data("draggable").options,d=$.makeArray($(c.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(!d.length)return;var e=parseInt(d[0].style.zIndex)||0;$(d).each(function(a){this.style.zIndex=e+a}),this[0].style.zIndex=e+d.length}}),$.ui.plugin.add("draggable","zIndex",{start:function(a,b){var c=$(b.helper),d=$(this).data("draggable").options;c.css("zIndex")&&(d._zIndex=c.css("zIndex")),c.css("zIndex",d.zIndex)},stop:function(a,b){var c=$(this).data("draggable").options;c._zIndex&&$(b.helper).css("zIndex",c._zIndex)}})})(jQuery),a()}),provide("$lib/jquery.ui.progressbar.js",function(a){(function($,a){$.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),$.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===a?this._value():(this._setOption("value",b),this)},_setOption:function(a,b){a==="value"&&(this.options.value=b,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),$.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),$.extend($.ui.progressbar,{version:"1.8.16"})})(jQuery),a()}),provide("$lib/jquery.swfobject.js",function(a){(function(a,h,b){function c(a,b){var d=(a[0]||0)-(b[0]||0);return d>0||!d&&a.length>0&&c(a.slice(1),b.slice(1))}function d(a){if(typeof a!=g)return a;var b=[],c="";for(var e in a)c=typeof a[e]==g?d(a[e]):[e,i?encodeURI(a[e]):a[e]].join("="),b.push(c);return b.join("&")}function e(a){var b=[];for(var c in a)a[c]&&b.push([c,'="',a[c],'"'].join(""));return b.join(" ")}function f(a){var b=[];for(var c in a)b.push(['<param name="',c,'" value="',d(a[c]),'" />'].join(""));return b.join("")}var g="object",i=!0;try{var j=b.description||function(){return(new b("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}()}catch(k){j="Unavailable"}var l=j.match(/\d+/g)||[0];a[h]={available:l[0]>0,activeX:b&&!b.name,version:{original:j,array:l,string:l.join("."),major:parseInt(l[0],10)||0,minor:parseInt(l[1],10)||0,release:parseInt(l[2],10)||0},hasVersion:function(a){return a=/string|number/.test(typeof a)?a.toString().split("."):/object/.test(typeof a)?[a.major,a.minor]:a||[0,0],c(l,a)},encodeParams:!0,expressInstall:"expressInstall.swf",expressInstallIsActive:!1,create:function(a){if(!a.swf||this.expressInstallIsActive||!this.available&&!a.hasVersionFail)return!1;if(!this.hasVersion(a.hasVersion||1)){this.expressInstallIsActive=!0;if(typeof a.hasVersionFail=="function"&&!a.hasVersionFail.apply(a))return!1;a={swf:a.expressInstall||this.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:this.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:a.swf,type:"application/x-shockwave-flash",id:a.id||"flash_"+Math.floor(Math.random()*999999999),width:a.width||320,height:a.height||180,style:a.style||""},i=typeof a.useEncode!="undefined"?a.useEncode:this.encodeParams,a.movie=a.swf,a.wmode=a.wmode||"opaque",delete a.fallback,delete a.hasVersion,delete a.hasVersionFail,delete a.height,delete a.id,delete a.swf,delete a.useEncode,delete a.width;var b=document.createElement("div");return b.innerHTML=["<object ",e(attrs),">",f(a),"</object>"].join(""),b.firstChild}},a.fn[h]=function(b){var c=this.find(g).andSelf().filter(g);return/string|object/.test(typeof b)&&this.each(function(){var c=a(this),d;b=typeof b==g?b:{swf:b},b.fallback=this;if(d=a[h].create(b))c.children().remove(),c.html(d)}),typeof b=="function"&&c.each(function(){var c=this;c.jsInteractionTimeoutMs=c.jsInteractionTimeoutMs||0,c.jsInteractionTimeoutMs<660&&(c.clientWidth||c.clientHeight?b.call(c):setTimeout(function(){a(c)[h](b)},c.jsInteractionTimeoutMs+66))}),c}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject),a()}),provide("$lib/jquery.hotkeys.js",function(a){(function(a){function b(b){if(typeof b.data!="string"&&!a.isArray(b.data))return;var c=b.handler,d=a.isArray(b.data),e=0,f=b.data.length;b.handler=function(g){var i=b.data,j;d&&(i=i[e]),j=i.toLowerCase().split(" ");if(!(this===g.target||!/textarea|select/i.test(g.target.nodeName)&&g.target.type!=="text"))return;var k=g.type!=="keypress"&&a.hotkeys.specialKeys[g.which],l=String.fromCharCode(g.which).toLowerCase(),m,n="",o={};g.altKey&&k!=="alt"&&(n+="alt+"),g.ctrlKey&&k!=="ctrl"&&(n+="ctrl+"),g.metaKey&&!g.ctrlKey&&k!=="meta"&&(n+="meta+"),g.shiftKey&&k!=="shift"&&(n+="shift+"),k?o[n+k]=!0:(o[n+l]=!0,o[n+a.hotkeys.shiftNums[l]]=!0,n==="shift+"&&(o[a.hotkeys.shiftNums[l]]=!0));for(var p=0,q=j.length;p<q;p++)if(o[j[p]])return!d||e===f-1?(e=0,c.apply(this,arguments)):(e+=1,!0);if(d&&e!==0){j=b.data[0].toLowerCase().split(" ");for(var p=0,q=j.length;p<q;p++)if(o[j[p]])return e=1,!0;e=0}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})})(jQuery),a()}),provide("$lib/jquery.autoellipsis.js",function(a){(function($){function e(a,b){var c=a.data();c||(c={});var d=c.wrapperElement;d||(d=a.wrapInner("<div/>").find(">div"));var e=d.data(),j=e.originalContent;j?d=e.originalContent.clone(!0).data({originalContent:j}).replaceAll(d):d.data({originalContent:d.clone(!0)}),a.data({wrapperElement:d,containerWidth:a.innerWidth(),containerHeight:a.innerHeight()});var k=!1,l=d;b.selector&&(l=$(d.find(b.selector).get().reverse())),l.each(function(){var c=$(this),e=c.text(),j=!1;if(d.innerHeight()-c.innerHeight()>a.innerHeight())c.remove();else{i(c);if(c.contents().length){k&&(g(c).get(0).nodeValue+=b.ellipsis,k=!1);while(d.innerHeight()>a.innerHeight()){j=f(c);if(!j){k=!0,c.remove();break}i(c);if(!c.contents().length){k=!0,c.remove();break}g(c).get(0).nodeValue+=b.ellipsis}b.setTitle=="onEllipsis"&&j||b.setTitle=="always"?c.attr("title",e):b.setTitle!="never"&&c.removeAttr("title")}}})}function f(a){var b=g(a);if(b.length){var c=b.get(0).nodeValue,d=c.lastIndexOf(" ");return d>-1?(c=$.trim(c.substring(0,d)),b.get(0).nodeValue=c):b.get(0).nodeValue="",!0}return!1}function g(a){if(a.contents().length){var b=a.contents().last();return b.filter(j).length?b:g(b)}return a.append(""),a.contents().last()}function i(a){if(a.contents().length){var b=a.contents().last();if(b.filter(j).length){var c=b.get(0).nodeValue;return c=$.trim(c),c==""?(b.remove(),!0):!1}while(i(b));return b.contents().length?!1:(b.remove(),!0)}return!1}function j(){return this.nodeType===3}function k(c,d){a[c]=d,b||(b=window.setInterval(function(){m()},200))}function l(c){a[c]&&(delete a[c],a.length||b&&(window.clearInterval(b),b=undefined))}function m(){if(!c){c=!0;for(var b in a)$(b).each(function(){var c,d;c=$(this),d=c.data(),(d.containerWidth!=c.innerWidth()||d.containerHeight!=c.innerHeight())&&e(c,a[b])});c=!1}}var a={},b,c=!1,d={ellipsis:"...",setTitle:"never",live:!1};$.fn.ellipsis=function(a,b){var c,f;return c=$(this),typeof a!="string"&&(b=a,a=undefined),f=$.extend({},d,b),f.selector=a,c.each(function(){var a=$(this);e(a,f)}),f.live?k(c.selector,f):l(c.selector),this}})(jQuery),a()}),provide("mixins/tweetFlagging",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.tweetFlagging",function(a){a.methods({flagLinkClicked:function(a,b){var c=$(a.target),d=this,e=twttr.decider.isAvailable("flag_yourself_nsfw")&&twttr.helpers.isCurrentUser(b.user),f=b.possiblySensitive,g={isOurTweet:e,before:function(){if(e){var a=c.attr("alternateText");c.attr("alternateText",c.html()),c.html(a)}else{var b='&nbsp;<a target="_blank" href="'+twttr.router.flagTurkeySupportPath()+'">'+_("(learn more)")+"</a>";c.replaceWith("<span>"+_("Flagged")+b+"</span>")}}};f&&!e?twttr.dialogs.sensitiveFlagConfirmation(function(){b.flag(g)}).open():(e&&(b.sync("possiblySensitive",!b.possiblySensitive),g.possibly_sensitive=b.possiblySensitive),b.flag(g))},tweetFlaggable:function(a){return twttr.loggedIn&&twttr.decider.isAvailable("media_flagging")&&(!a||a.possiblySensitiveEditable!==!1)}})}),a(twttr.mixins.tweetFlagging)})}),provide("promptbird",function(a){using("util","components/Promptbird").as(function(b){twttr.promptbird=twttr.promptbird||{},twttr.promptbird.renderComponentFromPrompt=function(a){var c=b.util.camelize("Prompt_"+a.prompt.template_name);if(!twttr.components[c]){var d=new Error('Promptbird component "'+c+'" is undefined');twttr.isLocalhost&&console.log(d,d.stack||"error.stack is unavailable :(");return}var e=new twttr.components[c](a);return e.bind("destroyed",twttr.promptbird.destroyCallback),e},twttr.promptbird.destroyCallback=function(){delete twttr.promptbird.cache},twttr.promptbird.getPrompt=function(){var a=(new b.util.Location(location.href)).search;if(!twttr.decider.isAvailable("promptbird_phoenix")&&!/force_prompt_id/.test(a))return;if(!twttr.promptbird.cache)return;if(!twttr.promptbird.cache.prompt.template_name)return;return twttr.promptbird.cache},twttr.promptbird.getPromptByFormat=function(a){var b=twttr.promptbird.getPrompt();if(!b)return;for(var c=0;c<a.length;c++)if(b.prompt.format===a[c])return b},a(twttr.promptbird)})}),provide("MessageManager",function(a){using().as(function(b){twttr.klass("twttr.MessageThread",function(a,b){this.threadId=a,this.messages=b}).methods({hasNewMessages:function(){return twttr.app.caches.dmThreads.get(this.threadId)!==this.messages[0].id&&!twttr.helpers.isCurrentUser(this.messages[0].sender)}}),twttr.klass("twttr.MessageManager",function(){var a=this;if(!twttr.loggedIn)return;twttr.isT1||this.setupContinuousPoll(),twttr.isT1&&twttr.decider.isAvailable("t1_dm_poll")&&($(document).on("active",function(){a.poll(twttr.MessageManager.activePollInterval)}),$(document).on("inactive",function(){a.poll(twttr.MessageManager.inactivePollInterval)}))}).statics({activePollInterval:9e4,inactivePollInterval:3e5}).methods(twttr.EventProvider).methods({setupContinuousPoll:function(){var a=this;this._pollingState?this._pollingState=="running"&&this._fetchMessages():(this._pollingState="starting",this._fetchMessages(function(){a._sort(),a.bind("messagesArrived",function(b,c){if(twttr.isT1)for(var d=c.length()-1;d>=0;d--)a.addMessage(c.get(d));else c.each(function(b){a.addMessage(b)})}),!twttr.isT1||twttr.decider.isAvailable("t1_dm_poll")?a.poll(twttr.MessageManager.activePollInterval):a.stopContinuousPoll(),a._intializeThreadState(),a.trigger("firstMessagesReceived"),a.trigger("pendingThreads")}))},isContinuouslyPolling:function(){return!!this._pollingState&&this._pollingState!=="starting"},stopContinuousPoll:function(){this.isContinuouslyPolling()&&(clearInterval(this._pollId),delete this._pollId,this._pollingState=null)},poll:function(a){var b=this;b.stopContinuousPoll(),b.currentPollInterval=a,b._pollId=setInterval(function(){b._fetchMessages()},a),b._pollingState="running"},reset:function(){this.threads=[],this.sentMessages=null,this.receivedMessage=null,twttr.app.caches.dmThreads.clear()},getAllThreads:function(a){var b=this;this.threads?a(this.threads):this.one("firstMessagesReceived",function(){a(b.threads)})},getThread:function(a,b){var c=this;if(this.threads){for(var d=0;d<this.threads.length;d++)if(this.threads[d].threadId===a)return b(this.threads[d]);return b()}this.getAllThreads(function(d){c.getThread(a,b)})},addMessage:function(a,b){var c=this;this.getThread(a.threadId,function(d){if(d){if(twttr.helpers.isCurrentUser(a.sender))for(var e=0,f=d.messages,g=f.length;e<g;e++){var i=f[e].id;if(i<a.id)break;if(i===a.id)return}d.messages.unshift(a);for(var e=0,j=c.threads.length;e<j;e++)if(c.threads[e].threadId===d.threadId){c.threads.splice(e,1);break}}else d=new twttr.MessageThread(a.threadId,[a]);c.threads||(c.threads=[]),c.threads.unshift(d),b&&c._markMessageAsRead(a),c.trigger("updatedThread",[d,"new",{message:a}]),c.trigger("newMessage."+a.threadId,[a]),c.trigger("pendingThreads")})},deleteMessage:function(a,b){var c=this;this.getThread(b,function(d){if(d){for(var e=0,f=d.messages,g=f.length;e<g;e++)if(f[e].id===a){var i=f.splice(e,1)[0];i.destroy({error:function(){c.addMessage(i)},success:function(a){var b={};b[a.id+""]={item_type:twttr.constants.clientEvent.itemType.message,target_id:a.id},trackClient({component:"stream",action:"delete"},{item_ids:[a.id],item_details:b})}});break}if(d.messages.length===0){for(var j=0;j<c.threads.length;j++)if(c.threads[j].threadId===b){c.threads.splice(j,1);break}c.trigger("deletedThread",[b])}else c.trigger("updatedThread",[d,"delete",{messageId:a}])}c.trigger("deletedMessage."+b,[a]),c.trigger("pendingThreads")})},hasPendingThreads:function(){var a=0,b=this.threads;if(b)for(var c=0,d=b.length;c<d;c++)b[c].hasNewMessages()&&a++;return a},markThreadAsRead:function(a){var b=this;this.getThread(a,function(c){if(!c)return;b._markMessageAsRead(c.messages[0]),b.trigger("readThread",[a]),b.trigger("pendingThreads")})},_markMessageAsRead:function(a){twttr.app.caches.dmThreads.set(a.threadId,a.id)},_intializeThreadState:function(){if(!twttr.app.caches.dmThreads.get("##initialized")){twttr.app.caches.dmThreads.set("##initialized",!0);var a=this.threads;for(var b=0,c=a.length;b<c;b++)twttr.app.caches.dmThreads.set(a[b].threadId,a[b].messages[0].id);return!0}return!1},_fetchMessages:function(a){function e(){c++;if(c===2||!d)b.isFetching=!1,a&&a()}var b=this,c=0;if(this.isFetching)return;this.isFetching=!0;var d=!twttr.isT1||this._pollingState==="starting",f,g={count:50,success:function(a){a.length()>0&&(b.receivedMessages?b.receivedMessages.concat(a):b.receivedMessages=a,b.trigger("messagesArrived",[a]),b._receivedSinceID=a.first().id),f=a,e()},cancel:function(){},error:function(a,b){a.status===502&&b.retry()}};b._receivedSinceID&&(g.since_id=b._receivedSinceID),twttr.currentUser&&twttr.currentUser.receivedMessages(g);var i={count:50,success:function(a){a.length()>0&&(b.sentMessages?b.sentMessages.concat(a):b.sentMessages=a,b.trigger("messagesArrived",[a]),b._sentSinceID=a.first().id),e()},cancel:function(){},error:function(a,b){a.status===502&&b.retry()}};b._sentSinceID&&(i.since_id=b._sentSinceID),twttr.currentUser&&d&&twttr.currentUser.sentMessages(i)},_sort:function(){this.allMessages=[],this.sentMessages&&(this.allMessages=this.allMessages.concat(this.sentMessages.array)),this.receivedMessages&&(this.allMessages=this.allMessages.concat(this.receivedMessages.array)),this.allMessages.sort(function(a,b){return twttr.natcompare(b.id,a.id)});var a={},b=[];for(var c=0;c<this.allMessages.length;c++){var d=this.allMessages[c],e=d.threadId;a[e]||(a[e]=[],b.push(e)),a[e].push(d)}this.threads=[];for(var c=0;c<b.length;c++)this.threads.push(new twttr.MessageThread(b[c],a[b[c]]))}}),a(twttr.MessageManager)})}),provide("ConversationManager",function(a){using("constants").as(function(b){twttr.klass("twttr.ConversationThread",function(a){this.threadId=a.user.screenName,this.user=a.user,this.count=a.count,this.lastMessageDate=a.lastMessageDate,this.lastMessageId=a.lastMessageId,this.messages=[]}).methods(twttr.EventProvider).methods({sort:function(){this.messages.sort(function(a,b){return b.id-a.id})},addMessage:function(a){if($.inArray(a,this.messages)>-1)return;this.messages.push(a),this.sort(),a.id>this.lastMessageId&&(this.lastMessageDate=a.createdAt,this.lastMessageId=a.id,this.count++),this.trigger("newMessage",[a])},deleteMessage:function(a,b){var c=!1;this.messages=$.grep(this.messages,function(b,d){return b.id===a&&(b.destroy(),c=!0),b.id!==a});if(!c)return;if(this.messages.length>0){var d=this.messages[this.messages.length-1];d.id>this.lastMessageId&&(this.lastMessageDate=d.createdAt,this.lastMessageId=d.id)}this.count--,this.trigger("deletedMessage",[a]),b()},getMessages:function(a){var b=this,c={user_id:this.user.id,since_id:this.since_id||0,count:100,success:function(c){c.each(function(a){b.addMessage(a)}),a(b)}};twttr.currentUser.conversationWith(c)}}),twttr.klass("twttr.ConversationManager",function(){this.threads={},this.since_id=0}).methods(twttr.EventProvider).methods({_fetchMessages:$.noop,_sort:$.noop,setupContinuousPoll:function(){if(this._pollId)return;var a=this;this._pollId=setInterval(function(){a.getAllThreads($.noop)},b.constants.directMessagePollInterval)},isContinuouslyPolling:function(){return twttr.is.def(this._pollId)},stopContinuousPoll:function(){this.isContinuouslyPolling()&&(clearInterval(this._pollId),delete this._pollId)},getThread:function(a,b){var c=this.threads[a];return c?c.getMessages(b):b()},getAllThreads:function(a){function c(c){var d;for(var e=c.array.length-1;e>=0;e--){var f=c.array[e];b.threads[f.user.screenName]?(d=b.threads[f.user.screenName],d.getMessages($.noop)):(d=new twttr.ConversationThread(f),b.threads[d.threadId]=d),b.since_id=d.lastMessageId,b.trigger("updatedThread",[d,"new"])}a()}var b=this;twttr.currentUser.conversations({success:c,since_id:this.since_id,count:100})},addMessage:function(a){var b=this.threads[a.threadId];b?(b.addMessage(a),this.trigger("updatedThread",[b,"new"])):(b=new twttr.ConversationThread({threadId:a.threadId,user:a.user,count:1,lastMessageDate:a.createdAt,lastMessageId:a.id}),this.threads[b.threadId]=b)},deleteMessage:function(a,b){var c=this,d=this.threads[b];d&&d.deleteMessage(a,function(){c.trigger("updatedThread",[d,""]),d.count===0&&(c.trigger("deletedThread",[b]),delete c.threads[b])})}}),a(twttr.ConversationManager)})}),provide("externalOauthPopup",function(a){using().as(function(b){a(function(a){var b,c=a.url,d=c.indexOf("?")==-1?"?":"&";c+=d+"callback_hash="+encodeURIComponent(a.callbackUrl);var e=$(window),f=window.screenY||window.screenTop||0,g=window.screenX||window.screenLeft||0,i=(e.height()-500)/2+f,j=(e.width()-500)/2+g,a=["width="+(a.width?a.width:500),"height="+(a.height?a.height:500),"top="+i,"left="+j,"toolbar=no","location=yes"];window.open(c,"twitter_oauth",a.join(",")).focus()})})}),provide("mixins/photoBox",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.photoBox",function(a){a.methods({_initPhotobox:function(){var a=this;if(!twttr.decider.isAvailable("turkey")||this.options.statusAction==="directMessage"||this.options.template.show_turkey===!1)return;this.tweetBoxId=twttr.turkey.getTweetBoxId(),this.options.template.tweet_box_id=this.tweetBoxId,(new twttr.views.PhotoControl(this.options.template)).render(this.$find("div.tweet-button-container"),"prepend");var b=this._getTextLength;this._getTextLength=function(){var a=b.apply(this,arguments);return this.turkey&&this.turkey.hasItems()&&(a+=this.turkey.count()*(twttr.constants.tcoLength+1)),a};var c=this.makeRequest;this.makeRequest=function(a,b,d){this.turkey&&this.turkey.hasItems()?(this._sendingStatus=!0,this.turkey.tweet(b,d)):c.apply(this,[a,b,d])};var d=this.resetTweetContent;this.resetTweetContent=function(){d.apply(this,arguments),this.turkey&&this.turkey.reset()};var e=function(){a.createFunc(),a._registerPhotoboxEvents();if(a.options.origin&&(a.options.origin=="main_tweet_box"||a.options.origin=="new-tweet-titlebar-button")){var b={context:a.options.origin=="main_tweet_box"?"timeline":"popup",event_info:twttr.turkey.tweetboxMode()};trackClient({component:"tweetbox",action:"impression"},b)}};this.bind("open",e),(!this.options.condensed||!this.options.condensedContent&&this.options.defaultContent||this._getDraftTweet())&&e()},_registerPhotoboxEvents:function(){var a=this;this.turkey.bind("photoChanged",function(){a.editor.trigger("didChangeContent",[a.editor.content()])});var b=function(){a.turkey&&a.turkey.destroy()};this.bind("close",b),this.bind("destroy",b),this.bind("titleChanged",function(b,c,d){if(d=="dm")a.turkey&&a.turkey.disable(),a.$find(".turkey-control").hide();else if(d=="reply"||d=="mention"||d=="update")a.turkey&&a.turkey.enable(),a.$find(".turkey-control").show()})},createFunc:function(){this.turkey&&this.turkey.remove(),this.turkey=new twttr.turkey.PhotoThumbnails(this.editor,this.$find(".turkey-selected-files"),this.$find(".turkey-add-action"),this.tweetBoxId)}})}),a()})}),provide("mixins/profileStreamMixin",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.profileStreamMixin",function(){this.methods({beforeShowNewItems:function(){this.keepPromotedTweetsAtTop=!0,this.constructor.uber.beforeShowNewItems.apply(this,arguments),this.promotedTweetWasExpanded=this.promotedTweetIsExpanded(),this.collapsePromotedTweet(),this.movePromotedTweetToTop()},onShowNewItems:function(a){this.constructor.uber.onShowNewItems.apply(this,arguments),this.trigger("onShowNewItems"),this.promotedTweetWasExpanded&&this.expandPromotedTweet(),this.logPromotedImpressions(this.items.slice(0,this.newItemsCount))},onShowOldItems:function(a){this.constructor.uber.onShowOldItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(this.items.length-this.oldItemsCount))},afterFirstSwitchingTo:function(){this.constructor.uber.afterFirstSwitchingTo.apply(this,arguments),$(document).trigger("profileVisit",twttr.profileUser)},_getPromotedStreamTweet:function(){return this.$find("div.stream-items .promoted-tweet")},_collapseExpandPromotedTweet:function(a){var b=this._getPromotedStreamTweet();b.length&&twttr.app.currentPageName()==="profile"&&twttr.app.currentPage().send("showHide",[b,{autoExpanded:!0,forceClose:!a,noAnimation:!0,containerClass:".expanding-stream-item"}])},collapsePromotedTweet:function(){this._collapseExpandPromotedTweet(!1)},expandPromotedTweet:function(){this._collapseExpandPromotedTweet(!0)},domNodeSelector:function(){return this.streamManagerDomNodeSelector?this.streamManagerDomNodeSelector+" .profile-stream":null},_getStreamErrorComponent:function(a){return this._getUserStreamErrorComponent(a)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You haven't tweeted yet."):_("@{{screen_name}} hasn't tweeted yet.",{screen_name:this.screenName})},_updateSinceId:function(a){var b=a.length==1&&a[0].isPromoted(),c=a.length>1&&a[0].isPromoted()&&twttr.natcompare(a[0].id,a[1].id)>0;b||c?this._sinceId=a[0].id:this.constructor.uber._updateSinceId.apply(this,arguments)},wokeUp:function(){signal(">streamWokeUp")}}),twttr.isT1&&this.methods({_setTitle:function(a){a(_("Tweets"))},_setViewToggler:function(a){twttr.streams.Profile.shouldDisplay()&&a(new twttr.views.ProfileStreamViewToggler(!0,this.params))}})});a(c)})}),provide("streams/Mentions",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.Mentions").statics({isLoadingRelationships:!1}).setTitle(function(a){twttr.isT1?a(_("Mentions")):a(_("Tweets mentioning {{username}}",{username:"@"+twttr.currentUser.screenName}))}).update(function(a,b,c){var d=this;twttr.decider.isAvailable("activity_dark_read")&&!twttr.decider.isAvailable("activity_read")&&$.ajax({url:"/i/gooble.json",headers:{"X-PHX":"true"},xhr:function(){return new twttr.anywhere.remote.server.contentWindow.XMLHttpRequest},success:function(){}});if(twttr.secrets&&twttr.secrets.hideMentions){var e=a.success;a.success=function(b){e.apply(a,arguments);if(d.constructor.isLoadingRelationships)return;d.constructor.isLoadingRelationships=!0,setTimeout(function(){var a={user_a:twttr.currentUser.id,user_ids:b.map(function(a){return a.user.id}).join(",")};$.ajax({url:"/account/batch_followed_by",data:a,dataType:"jsonp",type:"get",success:function(a){var b=[];for(var c in a.relationships)a.relationships[c]||b.push(".stream-tweet[data-user-id="+c+"]");b.length>0&&$(b.join(",")).hide(),d.constructor.isLoadingRelationships=!1}})},10)}}twttr.currentUser.mentions(a)}).methods({_getEmptyStreamHtml:function(){return _("Tweets that mention you, or are in reply to you, appear here.")}}).deciderKey("tweet_stream_mentions").pollingDeciderKey("tweet_stream_mentions_polling"),a()})}),provide("streams/Favorites",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.Favorites",function(){twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this._registerEvents()}).setTitle(function(a){twttr.isT1?a(_("Favorites")):!this.screenName||this.stream_user_is_current_user()?a(_("Your Favorites")):a(_("{{username}}'s Favorites",{username:this.screenName}))}).update(function(a,b,c){this.screenName?twttr.API.User.find(this.screenName).favorites(a):twttr.currentUser.favorites(a)}).methods({_getEmptyStreamHtml:function(){return!this.screenName||this.stream_user_is_current_user()?_("Your favorite tweets get saved here. To favorite a tweet, hover over it and click: <span class='favorite-icon'></span> <strong>Favorite</strong>"):_("<b>@{{screen_name}}</b> hasn't favorited any Tweets yet.",{screen_name:this.screenName})},_registerEvents:function(){if(twttr.loggedIn){var a=function(a,b){return twttr.helpers.isProfileUser()?b:null};this._registerAddToStreamEvent(twttr.API.Status,"favorite",a),this._registerRemoveFromStreamEvent(twttr.API.Status,"unfavorite",a)}}}).deciderKey("tweet_stream_favorites").pollingDeciderKey("tweet_stream_favorites_polling"),a()})}),provide("streams/User",function(a){using().as(function(b){var c=twttr.tweetStream("twttr.streams.User",function(a){var b=this;twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this.one("onShowNewItems",function(){b.expandPromotedTweet()}),twttr.helpers.isCurrentUser(a.screenName)&&twttr.API.Status.bind("unretweet",function(a,c){b.$node.find("[data-item-id="+c.id+"][data-item-type=tweet]").remove()})}).mixin(twttr.mixins.profileStreamMixin).statics({_supportsPromotedContent:twttr.isT1}).update(function(a,b,d){a.cacheOptions={shouldCacheAssociated:!1},a.pc=!!c._supportsPromotedContent,a.include_rts=!this.params.noRetweets,this.params.canViewUser?twttr.API.User.find(this.params.screenName).timeline(a):d(this,twttr.streams.PROTECTED)}).deciderKey("tweet_stream_user").pollingDeciderKey("tweet_stream_user_polling");a(c)})}),provide("streams/Profile",function(a){using().as(function(b){var c=twttr.tweetStream("twttr.streams.Profile",function(a){var b=this;twttr.streams.TweetStream.apply(this,arguments),this.one("onShowNewItems",function(){b.expandPromotedTweet()})}).mixin(twttr.mixins.profileStreamMixin).statics({_supportsPromotedContent:!0,shouldDisplay:function(){return twttr.profileUser.verified&&twttr.loggedIn&&twttr.abdecider.choose("replies_stripped_on_verified_profiles_222")=="stripped_replies_on_verified"}}).update(function(a,b,d){a.cacheOptions={shouldCacheAssociated:!1},a.pc=!!c._supportsPromotedContent,a.include_rts=!this.params.noRetweets,this.params.canViewUser?twttr.API.User.find(this.params.screenName).profileTimeline(a):d(this,twttr.streams.PROTECTED)}).methods({_setViewToggler:function(a){a(new twttr.views.ProfileStreamViewToggler(!1,this.params))}}).statics({_supportsPromotedContent:!0}).deciderKey("tweet_stream_profile").pollingDeciderKey("tweet_stream_profile_polling");a(c)})}),provide("streams/FollowingTweets",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.FollowingTweets",function(){twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this.registerUserActionEvents()}).mixin(twttr.mixins.userActionable).update(function(a,b,c){a.cacheOptions={shouldCacheAssociated:!1},this.params.canViewUser?twttr.API.User.find(this.params.screenName).followingTweets(a):c(this,twttr.streams.PROTECTED)}).methods({itemViewClass:"FollowingTweet",onUserActionFollowSync:function(a){this._findTweetsAndUpdateFollowState(a,!0)},onUserActionUnfollowSync:function(a){this._findTweetsAndUpdateFollowState(a,!1)},onShowNewItems:function(a){this._addFollowButtonsToNewTweets(a),this.constructor.uber.onShowNewItems.apply(this,arguments),this.trigger("showedNewItems")},onShowOldItems:function(a){this._addFollowButtonsToNewTweets(a),this.constructor.uber.onShowOldItems.apply(this,arguments),this.trigger("showedOldItems")},selectedItemsByUserId:function(a){var b=".stream-item:has(.stream-item-content[data-user-id="+a+"])";return this.$streamItems().find(b)},_reRenderTweetsByUserId:function(a){var b=this;this.selectedItemsByUserId(a).each(function(a,c){var d=$(c),e=d.find(".stream-tweet").attr("data-tweet-id");twttr.API.Status.find(e,function(a){d.replaceWith(b._renderItemHtml(a))})})},_getStreamErrorComponent:function(a){return this._getUserStreamErrorComponent(a)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("The people you follow haven't tweeted anything recently."):_("The people that @{{screen_name}} follows haven't tweeted recently.",{screen_name:this.screenName})},_setTitle:function(){$("#following-page-context").html(_("Here&rsquo;s what they&rsquo;re tweeting right now."))},_findUserIds:function(a){var b=[];return a.find(".stream-item-content").each(function(a,c){b.push(parseInt($(c).attr("data-user-id"),10))}),b.slice(0,twttr.constants.users.maxLookupSize)},_addFollowButtonsToNewTweets:function(a){if(!twttr.loggedIn||a.length===0)return!1;var b=this,c=this._findUserIds(a);twttr.API.User.findAll(c,{reload:!0,success:function(a){a.each(function(a){(!a.following||twttr.loggedIn&&a.id!==twttr.currentUser.id)&&b._findTweetsAndUpdateFollowState(a.id,a.following?null:!1)})}})},_findTweetsAndUpdateFollowState:function(a,b){var c;twttr.is.nil(b)?c="":b?c=Mustache.to_html('<span class="follow-text-quiet">&middot; {{action}}</span>',{action:_("Following")}):c=Mustache.to_html('<span class="follow-text-quiet">&middot;</span> <a href="#" class="js-action-follow tweet-follow-action follow-action" data-user-id="{{id}}">{{action}}</a>',{id:a,action:_("Follow")});var d=this.selectedItemsByUserId(a);d.each(function(a,b){$(b).find(".tweet-user-follow").html(c)})}}).deciderKey("tweet_stream_following").pollingDeciderKey("tweet_stream_following_polling"),a()})}),provide("streams/List",function(a){using("components/AddPeople","components/NoListMembers","streams/TweetStream",function(b,c,d){twttr.tweetStream("twttr.streams.List",function(){d.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id},message:this.params.listSlug})}).setTitle(function(a){twttr.isT1?a((new twttr.views.ListStreamTitle({full_name:_("Tweets")})).html()):(twttr.merge(this.params,{full_name:_("@{{screenName}}/{{listSlug}}",this.params),slug:this.params.listSlug,user:{screen_name:this.params.screenName}}),a((new twttr.views.ListStreamTitle(this.params)).html()))}).update(function(a,b,c){this._getList(function(b){b.statuses(a)})}).methods({_getEmptyStreamComponent:function(){return twttr.helpers.isCurrentUser(this.screenName)?new b:new c},_getList:function(a){var b=this;this._fetchingCallbacks=this._fetchingCallbacks||[],this._fetchingCallbacks.push(a);if(this._fetching)return;this._fetching=!0,twttr.API.User.find(this.screenName,{success:function(a){a.lists.find(b.params.listSlug,function(a){if(!a){b.trigger("notFound");return}b.memberCount=a.memberCount;var c;while(c=b._fetchingCallbacks.pop())c(a);b._list=a,b._fetching=!1})},error:function(){b.trigger("notFound")}})}}).deciderKey("tweet_stream_list").pollingDeciderKey("tweet_stream_list_polling"),a(twttr.streams.List)})}),provide("streams/Search",function(a){using().as(function(b,c){var d=twttr.tweetStream("twttr.streams.Search",function(a){return twttr.is.def(a.pretty_query)||(a.pretty_query=a.query),twttr.streams.TweetStream.apply(this,arguments),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:a.query}),this}).setTitle(function(a){var b=this;if(this.params.hideTitle)return;var c=twttr.merge({top_mode:this.params.mode=="relevance",all_mode:this.params.mode=="tweets",timeline_mode:this.params.mode=="timeline",with_links_mode:this.params.mode=="links"},this.params);a((new twttr.views.SearchStreamTitle(c)).html());var d=$(".js-stream-title .stream-tab-dropdown"),e=new twttr.control.Dropdown(d,{items:[{label:_("Top"),handlers:this._getSearchHandlers("relevance")},{label:_("All"),handlers:this._getSearchHandlers("tweets")},{label:_("With links"),handlers:this._getSearchHandlers("links")}],direction:"left"});e.render(d,"append")}).update(function(a,b,c){var d=this;!twttr.is.def(a.since_id)&&this.items.length>0&&!twttr.is.def(a.max_id)&&(a.since_id="1");if(!a.since_id){var e=a.success;a.success=function(a,b){d.logSearchImpressions(a),d._next_page=b.response.next_page;var c=e.apply({},arguments);return!d._next_page&&!b.response.served_by_blender&&d.reachedTheEnd(),c}}a.max_id&&(a.page=d._next_page),this.params.debug&&(a.debug=this.params.debug);var f=twttr.util.params().promoted_location;f&&(a.promoted_location=f),this.params.experimentId&&(a.experimentId=this.params.experimentId),this.params.mode==="links"?a.filter="links":this.params.mode==="relevance"?a.mode="relevance":this.params.mode==="timeline"&&(a.mode="timeline"),this.search(this.params.query,a)}).methods({_shouldCache:!1,search:function(a,b){var c=this;if(this.inProgress)return;var d=function(a,b){return a=a||$.noop,function(){return c.inProgress=b,a.apply(this,arguments)}};b.before=d(b.before,!0),b.success=d(b.success,!1),b.error=d(b.error,!1),b.cancel=d(b.cancel,!1),b.query_source=twttr.search.getLastQuerySource(),twttr.API.Status.search(a,b)},_getSearchHandlers:function(a){var b=this;return{click:function(){b.params.mode=a,twttr.app.currentPage().send("getStreamManager",function(a){a.switchTo(twttr.streams.Search,b.params)})}}},scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{query:this.params.query,type:this.params.mode})},logSearchImpressions:function(a){var b=[],c=[],d=[],e=[];a.each(function(a){a.isPromoted()?(d.push(a.id),e.push(a.impressionId)):a.resultCategory==="popular"?c.push(a.id):b.push(a.id)}),scribble("integrated_search_impression",{mode:this.params.mode,query:this.params.query,pretty_query:this.params.pretty_query,top_tweets:c,promoted_tweets:d,impression_ids:e,tweet_count:a.length()})},_getEmptyStreamHtml:function(){if(this.params.mode==="links")return _("No Tweet results with links for <strong>{{pretty_query}}</strong>.",this.params);if(this.params.mode==="relevance"){var a={path:twttr.router.searchRealtimePath({query:this.params.query}),pretty_query:this.params.pretty_query};return twttr.router.routeTo(twttr.router.searchRealtimePath({query:this.params.query}))}return _("No Tweet results for <strong>{{pretty_query}}</strong>.",this.params)},_getStreamEndHtml:function(){if(this.params.mode==="links")return _("Older Tweet results with links for <strong>{{pretty_query}}</strong> are unavailable.",this.params);if(this.params.mode==="relevance"){var a={path:twttr.router.searchRealtimePath({query:this.params.query}),pretty_query:this.params.pretty_query};return _('You&rsquo;ve reached the end of the Top Tweets for <strong>{{pretty_query}}</strong>. <div><a href="{{path}}">View all Tweets</a>.</div>',a)}return _("Older Tweet results for <strong>{{pretty_query}}</strong> are unavailable.",this.params)},beforeShowNewItems:function(){this.constructor.uber.beforeShowNewItems.apply(this,arguments),this.movePromotedTweetToTop()},onShowNewItems:function(a){this.constructor.uber.onShowNewItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(0,this.newItemsCount))},onShowOldItems:function(a){this.constructor.uber.onShowOldItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(this.items.length-this.oldItemsCount))}}).deciderKey("tweet_stream_search").pollingDeciderKey("tweet_stream_search_polling");twttr.isT1&&d.methods({_setHeader:function(a,b){a((new twttr.views.TweetSearchStreamHeader(b)).$html())},_setTitle:function(a){a(_("Tweets"))},_setViewToggler:function(a){a(new twttr.views.SearchStreamViewToggler(this.params.query,this.params.mode))}}),a(d)})}),provide("streams/UserStream",function(a){using().as(function(b){twttr.stream("twttr.streams.UserStream",function(a,b,c){var d=this;twttr.streams.Stream.apply(this,arguments),this.scribbler=this.params.scribbler||twttr.Scribbler.clientEvent,this.isCursorPagination()?this.cursor=-1:this.page=0,this.registerUserActionEvents()}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.userActionable).methods({itemViewClass:"StreamUser",streamItemType:"user",IDS_PER_REQUEST:5e3,update:function(a){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("people_streams")||this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}var c={success:function(c,d){var e=b.isCursorPagination();b.push(c.array);var f=d&&d.fetchedFullPage||c.length()===b.PAGE_SIZE;e?b.cursor=d.response.next_cursor:f?b.page=b.page+1:b.page=-1,(e&&!b.cursor||!e&&b.page===-1)&&b.reachedTheEnd(),c.each(function(a){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)}),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR),b._scribeResults("error",[],{status_code:c.status})},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT),b._scribeResults("error",[],{status_code:502})}};c=twttr.merge(c,this.isCursorPagination()?{cursor:this.cursor}:{page:this.page+1}),this.update(c)},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},PAGE_SIZE:20,isCursorPagination:function(){return!0},_getStreamErrorComponent:function(a){return a===twttr.streams.PROTECTED?new twttr.components.ProtectedUser({screen_name:this.params.screenName}):twttr.streams.Stream.prototype._getStreamErrorComponent.apply(this,arguments)},_scribeResults:function(a,b,c){twttr.streams.Stream.prototype._scribeResults.apply(this,arguments);var b=b||[];c=c||{};if(a=="error"||a=="initial"&&!b.length)this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},twttr.merge(c,{item_count:0,event_value:0,cursor_or_page:this._cursorOrPage(),referring_event:a}));else if(b.length){var d=this,e=[],f;twttr.each(b,function(a,b){e.push(a.id);if(d.constructor._namespace.indexOf("UserRecommendations")!=-1||d.constructor._namespace.indexOf("PeopleSearch")!=-1){var c;a.promotedContent&&a.promotedContent.impression_id&&(c={item_type:twttr.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id}),c&&(f=f||{},c.item_position=b,f[a.id+""]=c)}}),f&&(c.item_details=f),this.scribbler.scribe({component:"stream",action:"results"},twttr.merge(c,{item_ids:e,item_count:e.length,event_value:e.length,cursor_or_page:this._cursorOrPage(),referring_event:a}))}},sortUsersByIds:function(a,b){var c=[],d={};return twttr.each(a,function(a){d[a.id]=a}),twttr.each(b,function(a){d[a]&&c.push(d[a])}),c},fetchUsersById:function(a,b){var c=this,d,e,f;twttr.API.User.find(this.screenName,function(d){if(!twttr.helpers.canViewUser(d)){c._showError(twttr.streams.PROTECTED),c.doneLoadingMore();return}e=c.page*c.PAGE_SIZE,f=c.fetchedIds&&e<c.IDS_PER_REQUEST,f?c.hydrateUsers(a):(c.page=0,d[b]({cursor:c.idsCursor,success:function(b,d){d.response.next_cursor&&(c.idsCursor=d.response.next_cursor),c.fetchedIds=b,c.hydrateUsers(a)}}))})},hydrateUsers:function(a){var b=this,c=this.fetchedIds,d=a.success;a.success=function(a){var c=b.sortUsersByIds(a.array,e);a.array=c,d.call(this,a,{fetchedFullPage:e.length==b.PAGE_SIZE})};var e=c.slice(this.page*this.PAGE_SIZE,(this.page+1)*this.PAGE_SIZE);twttr.decider.isAvailable("people_stream_fresh")?e.length?twttr.API.User.findAll(e,{success:a.success,reload:!0}):a.success(new twttr.anywhere.api.util.BaseCollection([])):twttr.API.User.findAll(e,a.success)}}),a(twttr.streams.UserStream)})}),provide("streams/Friends",function(a){using("_","util").as(function(b,_){var c=twttr.stream("twttr.streams.Friends",function(a,b){twttr.streams.UserStream.apply(this,arguments);var c=this;this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"}),this._registerEvents()}).subclassOf(twttr.streams.UserStream).methods({PAGE_SIZE:100,update:function(a){this.fetchUsersById(a,"friendIds")},isCursorPagination:function(){return!1},_countString:function(a){return a===1?_("You follow 1 person"):_("You follow {{friendsCount}} people",{friendsCount:b.util.formatNumber(a,twttr.pageLocale)})},_setTitle:function(a){$("#following-page-context").html(_("Here&rsquo;s more about them."));if(this.params.subtab){var b=new twttr.views.FollowingSubtabs(this.params);a(b.html())}},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following anyone yet."):_("@{{screen_name}} isn't following anyone yet.",{screen_name:this.screenName})},_registerEvents:function(){if(twttr.loggedIn){var a=function(a,b){return twttr.helpers.isProfileUser()?b:null};this._registerAddToStreamEvent(twttr.API.User,"follow",a),this._registerRemoveFromStreamEvent(twttr.API.User,"unfollow",a)}}}).statics({_deciderKey:"people_stream_friends"});twttr.isT1&&c.methods({_setTitle:function(a){a(_("Following"))}}),a(c)})}),provide("streams/FollowerRequests",function(a){using("_","mixins/protectedUserActionable").as(function(b,_){twttr.stream("twttr.streams.FollowerRequests",function(a,b){var c=this;this.constructor.uber.constructor.apply(this,arguments),this.cursor=0,this.oldItemsCount=-1,this.pending_users=[],this.getFollowerRequestCount=function(a){var b=this;b.oldItemsCount==-1?twttr.currentUser.friends.pending(function(c,d){b.oldItemsCount=c.length,b.pending_users=c,a(b.oldItemsCount)}):(b.oldItemsCount=b.pending_users.length,a(b.oldItemsCount))},this.registerProtectedUserActions()}).subclassOf(twttr.streams.UserStream).mixin(b.mixins.protectedUserActionable).methods({itemViewClass:"StreamFollowerRequest",streamItemType:"user",update:function(a){},_fetchItems:function(a){var b=this;b.getFollowerRequestCount(function(c){var d={success:function(d,e){b.push(d.array),b.cursor=b.cursor+b.constructor.PAGE_SIZE,b.cursor>=c&&b.reachedTheEnd(),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}};sliced_list=b.pending_users.slice(b.cursor,b.cursor+b.constructor.PAGE_SIZE),twttr.API.User.findAll(sliced_list,d)})},_setTitle:function(a){a(_("Your pending follower requests"))}}).statics({PAGE_SIZE:20,_deciderKey:"people_stream_follower_requests"}),a(twttr.streams.FollowerRequests)})}),provide("streams/Followers",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Followers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"}),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({PAGE_SIZE:100,update:function(a){this.fetchUsersById(a,"followerIds")},isCursorPagination:function(){return!1},_setTitle:function(a){if(this.params.subtab){var b=new twttr.views.FollowersSubtabs(this.params);a(b.html())}},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You don't have any followers yet."):_("@{{screen_name}} doesn't have any followers yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return!twttr.helpers.isProfileUser()&&c.screenName===a.screenName?twttr.currentUser:null};this._registerAddToStreamEvent(twttr.API.User,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.User,"unfollow",b)}}}).statics({_deciderKey:"people_stream_followers"});twttr.isT1&&c.methods({_setTitle:function(a){a(_("Followers"))},_setViewToggler:function(a,b){twttr.loggedIn&&!twttr.helpers.isProfileUser()&&a(new twttr.views.FollowersStreamViewToggler(b.screenName,!1))}}),a(c)})}),provide("streams/SocialContextStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.SocialContextStream",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.params=a;var c=a.socialContextType=="followsInCommonWith"?"following_social_context":"followers_social_context";this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile",event_info:c})}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){if(!twttr.helpers.canViewUser(c)){b._showError(twttr.streams.PROTECTED),b.doneLoadingMore();return}twttr.currentUser[b.params.socialContextType](twttr.profileUser.id,a)})},_getEmptyStreamHtml:function(){var a={user:twttr.profileUser.screenName};return this.params.socialContextType=="followsInCommonWith"?_("You and @{{user}} don't follow anyone in common.",a):_("You don't follow anyone who follows @{{user}}.",a)}}).statics({_deciderKey:"social_context"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Followers"))},_setViewToggler:function(a,b){twttr.loggedIn&&!twttr.helpers.isProfileUser()&&a(new twttr.views.FollowersStreamViewToggler(b.screenName,!0))}}):c.methods({_setTitle:function(a){if(this.params.socialContextType=="followsInCommonWith")var b=new twttr.views.FollowingSubtabs(this.params);else var b=new twttr.views.FollowersSubtabs(this.params);a(b.html())}}),a(twttr.streams.SocialContextStream)})}),provide("streams/SuggestionCategoriesStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoriesStreamT1":"","mixins/discoveryHelper").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoriesStream",function(a,b){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments),this.$node.addClass("suggestion-categories");var c=this;this.$node.delegate("div[data-item-type=suggestion_category]","click",function(a){var b=$(this).attr("data-item-id"),d={};return d[b]={item_position:$("div.js-stream-manager-container div.js-stream-item").index($(a.target).closest(".js-stream-item"))},b&&(trackClient({component:"suggestion_category",action:"click"},{step:"interests",query:b,item_details:d}),c.routePageTo(c.params.pathRoot,"InterestsCategory",{category:b})),!1})}).subclassOf(twttr.streams.Stream).statics({cacheCategories:function(a){this.CATEGORIES=a,this.CATEGORY_MAP=this.buildCategoryMap(a)},buildCategoryMap:function(a){return a.reduce({},function(a,b){return a[b.slug]=b,a})},filterTopTweetsCategories:function(a){var b=this.buildCategoryMap(a);return a.filter(function(a){if(a.slug.match(/^(.+)[_-]top-tweets$/i)){var c=b[RegExp.$1];return c&&(c.topTweetsCategory=a),!1}return!0})}}).methods({itemViewClass:"StreamSuggestionCategory",streamItemType:"suggestion_category",sampleSize:"",streamItemId:function(a){return a.slug},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},addTipsies:function(){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("suggestion_categories_streams")){a(this,twttr.streams.DECIDER);return}var c={sample_size:this.sampleSize,samples:!0,success:function(c){c=b.constructor.filterTopTweetsCategories(c),b.constructor.cacheCategories(c);var d=c.map(function(a){var c,d;return a.topTweetsCategory&&a.topTweetsCategory.sample&&(d=a.topTweetsCategory.sample.shift())&&(c=d.id),a.clone({category_link:b.pagePathFor(b.params.pathRoot,"InterestsCategory",{category:a.slug}),category_top_tweets_user_id:c,category_top_tweets_is_current_user:!!twttr.currentUser&&twttr.currentUser.id==c,following_category_top_tweets:a.topTweetsCategory?a.topTweetsCategory.followingTopTweets:null})});b.push(d.array),a(b,twttr.streams.SUCCESS),b.addTipsies(),b.reachedTheEnd();var e=c.map(function(a,b){return a.name});b.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length()})},error:function(){a(b,twttr.streams.ERROR)}};b.defaultOpts&&(c=twttr.merge(b.defaultOpts,c)),b.params.lang&&(c.lang=b.params.lang),b.params.country&&(c.country=b.params.country),b.params.city&&(c.city=b.params.city),c.top_tweets=!0,twttr.API.SuggestionCategory.getAll(c)},_setTitle:function(a){this.params.title!==undefined?a(this.params.title):a(_("Select the topics you are interested in. Find a few people you want to hear from, then follow them."))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(this.constructor.CATEGORIES,this.params.pathRoot)},_getStreamEndComponent:function(){return this._getHeaderComponent()}}).mixin(twttr.mixins.discoveryHelper);c&&d.mixin(c),a(d)})}),provide("streams/PeopleSearch",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.PeopleSearch",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.ignoreScribeItemPosition=!1}).subclassOf(twttr.streams.UserStream).methods({scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{name:"Search",query:this.params.query,type:"people"})},update:function(a){a.display_location="search-view-all-stream",a.pc=!0,twttr.API.User.search(this.params.query,a)},isCursorPagination:function(){return!1},_getEmptyStreamHtml:function(){return _("No people results for <strong>{{query}}</strong>.",{query:this.params.query})},getStreamEndHtml:function(){return _("No more people results for <strong>{{query}}</strong>.",{query:this.params.query})},_setHeader:function(a,b){this.header?a(this.header.$node):a((new twttr.views.StreamHeader(b)).$html())},_setTitle:function(a){twttr.isT1?a(_("People")):a(_("Results for: <strong>{{query}}</strong>",{query:this.params.query}))}}).statics({_deciderKey:"people_stream_people_search"}),a(twttr.streams.PeopleSearch)})}),provide("streams/t1/HeadlessPeopleSearch",function(a){using("_").as(function(a,_){twttr.klass("twttr.streams.HeadlessPeopleSearch",function(a,b){twttr.streams.PeopleSearch.apply(this,arguments);var c=new twttr.streams[a.headerStreamClass](a,b);this._setHeader=c._setHeader,this._setTitle=c._setTitle,this._setHeaderButton=c._setHeaderButton,this._updateHeaderFromStream=c._updateHeaderFromStream}).subclassOf(twttr.streams.PeopleSearch).methods({_setViewToggler:function(a,b){a(new twttr.views.BackLink(b.backLinkOptions))}})}),a(twttr.streams.HeadlessPeopleSearch)}),provide("streams/DashboardPeopleSearch",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardPeopleSearch",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",twttr.streams.PeopleSearch.apply(this,arguments)}).subclassOf(twttr.streams.PeopleSearch).methods({scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{name:"Search",query:this.params.query,type:"people"})},update:function(a){a.display_location="search-view-all-stream",a.pc=!1,twttr.API.User.search(this.params.query,a)},_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a()})}),provide("streams/DashboardTopPeopleSearch",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardTopPeopleSearch",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b={is_t1:twttr.isT1,statuses:!1,stories:!0,related_queries:!1,spelling_corrections:!1,query_source:twttr.search.searchQuerySource.TYPED_QUERY};twttr.merge(b,a);var c=this,d=b.success||$.noop;b.success=function(a,b){var e=new twttr.anywhere.api.util.BaseCollection;a.stories.each(function(a){a.type=="user"&&(e=e.concat(a.content.users))}),d(e,b),c.trigger("results",[e])},twttr.API.Search.search(this.params.query,b)},_setHeader:function(a,b){a("")},_getStreamEndComponent:function(){return new twttr.components.TopPeopleStreamEnd(this.params.query)},itemViewClass:"DashboardStreamUser"}),twttr.klass("twttr.components.TopPeopleStreamEnd").subclassOf(twttr.components.Base).initializer(function(a){(new twttr.views.TopPeopleStreamEnd({query:a})).render(this.$node,"append")}),a()})}),provide("streams/ListFollowers",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ListFollowers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName).lists(function(c){c.find(function(a){return a.slug===b.params.listSlug}).followers(a)})},_setTitle:function(a){twttr.isT1?a(_("List subscribers")):a(_("People following this list"))},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return c.slug===a.listSlug?twttr.currentUser:null};this._registerAddToStreamEvent(twttr.API.List,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"unfollow",b)}}}).statics({_deciderKey:"people_stream_list_followers"}),a(twttr.streams.ListFollowers)})}),provide("streams/ListMembers",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ListMembers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName).lists(function(c){c.find(function(a){return a.slug===b.params.listSlug}).members(a)})},_setTitle:function(a){twttr.isT1?a(_("List members")):a(_("People this list follows"))},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c,d){return c.slug===a.listSlug?d:null};this._registerAddToStreamEvent(twttr.widget.ListMembershipDialog,"addListMember",b),this._registerRemoveFromStreamEvent(twttr.widget.ListMembershipDialog,"removeListMember",b)}}}).statics({_deciderKey:"people_stream_list_members"}),a(twttr.streams.ListMembers)})}),provide("streams/Discover",function(a){using("_","util","mixins/t1/cardActionable","helpers","constants").as(function(b,_){twttr.klass("twttr.streams.Discover",function(a,b){var c=this;twttr.streams.Stream.apply(c,arguments),this.scribbler=twttr.Scribbler.clientEvent,c.registerCardActions(),this.registerTweetActionEvents(),this.initComponentEvents(),c.$find(".js-user-tipsy").tipsy({gravity:"s"}),twttr.API.CurrentUser.bind("changedLocation.discovery",function(){jQuery.contains(document.body,c.$node[0])?c._fetchItems($.noop):c._lastUpdate=null})}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.cardActionable,twttr.mixins.componentEvents,twttr.mixins.tweetActionable).statics({discoveryRefreshRate:3e5}).methods({streamItemType:"story",_expandable:!0,itemViewClass:function(a){return twttr.views["Card"+b.util.capitalize(a.type)]},streamItemId:function(a){return a.getId()},addTipsies:function(){this.$find(".js-user-tipsy").tipsy({gravity:"s"})},afterFirstSwitchingTo:function(a){this._fetchItems(a)},afterSwitchingToAgain:function(a){!this._lastUpdate||this._lastUpdate+twttr.streams.Discover.discoveryRefreshRate<=this.now()?this._fetchItems(a):a&&a()},now:function(){return(new Date).getTime()},reset:function(){this.$streamItems().empty(),this.items=[],this.itemIds=null,this.$find(".js-discovery-error").remove()},_setTitle:function(a){a(_("Stories"))},_fetchItems:function(a){var b=this;!this.items.length&&this.showLoadingSpinner();var c=function(){b.reset(),b._lastUpdate=null,b.hideLoadingSpinner(),(new twttr.views.DiscoveryStreamError).$html().appendTo(b.dom()),a(b,twttr.streams.ERROR)},d=function(d){if(d.stories.isEmpty()){c();return}b.reset(),b.hideLoadingSpinner(),b._lastUpdate=b.now(),$.each(d.stories.array,function(a,b){b.position=a+1}),b.push(d.stories.array),b.newItemsCount=d.stories.length(),b.render(),b.ellipsify(),b.addTipsies(),a&&a(b,twttr.streams.SUCCESS),b.reachedTheEnd()};twttr.API.Discovery.discovery({success:d,error:c,include_entities:!0,tweet_count:0})},ellipsify:function(){b.helpers.ellipsify(this.$find("h3.js-story-title,p.js-metadata")),b.helpers.ellipsify(this.$find("p.js-news-snippet, h4.js-news-headline"),!1,!0,null,{ellipsis:"&ellip;"})},_scribeResults:function(a,c,d){this._scribeEmptyResults(a,c,d);if(c.length){var e=[],f={};twttr.each(c,function(a,c){var d,g=a.content&&a.content.articles&&a.content.articles.array[0];g?d=g.query:a.content&&(d=a.content.query),d&&(e.push(d),f[d]={item_type:b.constants.clientEvent.itemType.story,item_position:c,item_description:a.type})}),this.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length,event_value:e.length,item_details:f,referring_event:a})}}}).click({".story-social-new-tweet":function(a,b){a.stopPropagation(),a.preventDefault();var c=b.data("url");(new twttr.widget.TweetDialog({draggable:!0,template:{title:_("Tweet this link")},defaultContent:c,origin:"discovery-story-tweet-button"})).open().focus()}}),a(twttr.streams.Discover)})}),provide("streams/SavedSearches",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.SavedSearches",function(a,b){twttr.streams.Stream.apply(this,arguments),this.oldItemsCount=-1,this.scribbler=twttr.Scribbler.clientEvent}).subclassOf(twttr.streams.Stream).methods({itemViewClass:"StreamSavedSearch",streamItemType:"saved_search",streamItemId:function(a){return a.id}}).methods({afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_setTitle:function(a){a("Saved searches")},_fetchItems:function(a){var b=this;twttr.currentUser.savedSearches(function(c){b.items=c.array,b.oldItemsCount==-1&&(b.oldItemsCount=b.items.length),a(b,twttr.streams.SUCCESS),b.reachedTheEnd()})},_scribeResults:function(a,b,c){this._scribeEmptyResults(a,b,c);if(b.length){var d=twttr.map(b,function(a){return a.query});this.scribbler.scribe({component:"stream",action:"results"},{item_names:d,item_count:d.length,event_value:d.length,referring_event:a})}}}),a(twttr.streams.SavedSearches)})}),provide("mixins/SinceMaxPagination",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.SinceMaxPagination",function(){this.statics({deciderKey:function(a){return this._deciderKey=a,this}}),this.methods({_fetchItems:function(a){this.fetcher(!0,a)},fetcher:function(a,b,c){var d=this;twttr.is.fn(a)&&(c=b,b=a,a=!1);if(this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){b(this,twttr.streams.DECIDER);return}var e=a?this._optionsForOld(b):this._optionsForNew(b);c=c||{},e=twttr.merge(c,e),this.excludeEntities||(e.include_entities=1),this.update(e,this.params,b)},fetchUntilScreenIsFull:function(){var a=this;!this.noMoreOldItems&&this._isInDOM()&&this._shorterThanWindow()&&this.getMoreOldItems(function(b,c){c!==twttr.streams.SUCCESS?a._showError(c):a.fetchUntilScreenIsFull()})},_isInDOM:function(){return jQuery.contains(document.body,this.$node[0])},_shorterThanWindow:function(){return this.$node.height()<$(window).height()},_optionsForNew:function(a){var b=this,c={success:function(c){c instanceof twttr.API.util.BaseCollection&&(c=c.array),c.length&&(b._updateIds(c),b.unshift(c)),a&&a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)}};return this.items.length&&(c.since_id=this._sinceId),c},_optionsForOld:function(a){var b=this,c={success:function(d){c.max_id&&(d=d.slice(1)),d instanceof twttr.API.util.BaseCollection&&(d=d.array),d.length?(b._updateIds(d),b.push(d)):b.reachedTheEnd(),a&&a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}};return this.items.length?(c.max_id=this._maxId,c.count=this.PAGE_SIZE+1):c.count=this.PAGE_SIZE,c},_updateIds:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));var b=a[0],c=a[a.length-1],d,e;this._idForItem?(d=this._idForItem(b,"first"),e=this._idForItem(c,"last")):(d=b.id,e=c.id);if(!this._sinceId||twttr.natcompare(d,this._sinceId)>0)this._sinceId=d;if(!this._maxId||twttr.natcompare(e,this._maxId)<0)this._maxId=e}})}),a(twttr.mixins.SinceMaxPagination)})}),provide("mixins/PollingStream",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.PollingStream",function(){var a={ACTIVE:3e4,INACTIVE:9e4},b=!0,c=a.ACTIVE;$(window).focus(function(){c=a.ACTIVE,b=!0}),$(window).blur(function(){c=a.INACTIVE,b=!1}),this.statics({pollingDeciderKey:function(a){return this._pollingDeciderKey=a,this}}),this.methods({_getInterval:function(){return this.timeouts?b?this.timeouts.ACTIVE:this.timeouts.INACTIVE:c},_pollFetch:function(){var a={headers:{"X-Twitter-Polling":!0}};this.fetcher(twttr.bind(this,function(a){var b=a.newItemsCount;b>0&&(this.showNewItems(b,!0),this.trigger("newItems",[a,b]))}),a)},startPeriodicFetcher:function(){if(this.periodicUpdater||this.constructor._pollingDeciderKey&&!twttr.decider.isAvailable(this.constructor._pollingDeciderKey))return;this.periodicUpdater=setTimeout(twttr.bind(this,this.fetchNewItemsThenPoll),this._getInterval())},stopPeriodicFetcher:function(){this.periodicUpdater&&(clearTimeout(this.periodicUpdater),this.periodicUpdater=null)},fetchNewItemsThenPoll:function(){var a=!0;this._pollShouldFetch&&(a=this._pollShouldFetch()),a&&this._pollFetch(),this.restartFetcher()},restartFetcher:function(){this.stopPeriodicFetcher(),this.startPeriodicFetcher()}})}),a(twttr.mixins.PollingStream)})}),provide("mixins/activityStreamEvents",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.activityStreamEvents",function(){var a;twttr.isT1?a="div.stream-item-activity-me div.activity-supplement img.avatar,     div.stream-item-activity-network div.follow-more-than-two img.avatar,     div.stream-item-activity-network.stream-item-list_member_added img.avatar,     div.stream-item-activity-network div.activity-secondary-supplement img.user-profile-link":a=".stream-item-activity-me .sub-stream-item img.user-content-image,     .stream-item-activity-network .follow-more-than-two img.user-content-image,     .stream-item-activity-network.stream-item-list_member_added img.user-content-image,     .stream-item-activity-network .activity-secondary-supplement .user-profile-link",$(a).tipsy({live:!0,gravity:"s"})}),a(twttr.mixins.activityStreamEvents)})}),provide("mixins/inviteFriends",function(a){using("util","constants").as(function(b){twttr.klass.mixin("twttr.mixins.inviteFriends",function(){this.methods({sendInvitesByEmailSuccess:function(a){var b=a.invited&&a.invited.length;b?(this.scribbler.scribe({section:"dashboard",component:"invite_friends",action:"invited"},{event_value:b,item_count:b}),twttr.showMessage(b>1?_("OK, we will send invites to your {{count}} friends!",{count:b}):_("OK, we will send an invite to {{email}}!",{email:a.invited[0]})),this.$textarea.val("")):twttr.showError(_("Something is wrong, nobody was invited :-(")),this.$textarea.removeAttr("disabled").blur()},sendInvitesByEmailError:function(a){var b=twttr.helpers.extractEmailAddresses(this.$textarea.val()),c=b.length===1?b[0].split(","):b.length,d=twttr.API.util.RemoteRequest.apiErrorCodeFromResponse(a)||a.status;this.scribbler.scribe({component:"invite_friends",action:"error"},{status_code:d,item_count:c});switch(d){case 47:twttr.showError(_("We couldn't send invitations to any of those addresses."));break;case 37:twttr.showError(_("There was an error emailing your friends. Please try again later."));break;default:twttr.showMessage(_("OK, we will send invites to your friends!"))}this.$textarea.removeAttr("disabled").focus()},formSubmitCallback:function(){if(this.$textarea.attr("disabled"))return;var a=twttr.helpers.extractEmailAddresses(this.$textarea.val());if(a.length){this.$textarea.attr("disabled","disabled").val(a.join(", "));var b=this;twttr.API.AddressBook.sendInvitesByEmail(a,{source:"invite_friends",success:twttr.bind(this,this.sendInvitesByEmailSuccess),error:twttr.bind(this,this.sendInvitesByEmailError)})}else twttr.showError(_("Please check the address you entered."))},addFormEvents:function(a){this.scribbler=a||new twttr.Scribbler,this.$textarea=this.$textarea||this.$find("textarea"),this.$textarea.bind("keyup",function(a){var c=$(this);(a.which==b.constants.keyCodes.enter||c.val().indexOf(",")>0)&&c.addClass("expanded")}),twttr.helpers.addFormEvents(this.$find("form"),twttr.bind(this,this.formSubmitCallback))}})}),a(twttr.mixins.inviteFriends)})}),provide("mixins/newStreamItemsBar",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.newStreamItemsBar",function(){this.methods({showNewStreamItemsBar:function(a){var b=this.$find(".js-new-tweets-bar"),c;this.newStreamItemsBarPhrase?c=this.newStreamItemsBarPhrase(a):c=a==1?_("1 new item"):_("{{count}} new items",{count:a}),b.length>0?b.html(c):(b=$((new twttr.views.NewTweetsBar({tweets_count_phrase:c,is_tweet:!1})).html()),b.hide().prependTo(this.dom()).slideDown())}})}),a(twttr.mixins.newStreamItemsBar)})}),provide("mixins/typeaheadScribing",function(a){using().as(function(b,_){var c=twttr.klass.mixin("twttr.mixins.typeaheadScribing",function(){return this.methods({startStatsTimer:function(){this._statsTimerStart||(this._statsTimerStart=+(new Date)),this._lastTimerEvent="start"},pauseStatsTimer:function(){this._statsTimerStart!==0&&this._lastTimerEvent=="start"&&(this._statsCumulativeTime+=+(new Date)-this._statsTimerStart,this._statsTimerStart=0),this._lastTimerEvent="pause"},resetStatsTimer:function(){this._statsCumulativeTime=0,this._statsTimerStart=0,this._lastTimerEvent="pause"},addLocalLatency:function(a,b){this._localLatencies.push(b)},addRemoteLatency:function(a,b){this._remoteLatencies.push(b)},medianAndStdDev:function(a){var b=twttr.reduce(a,0,function(a,b,c){return a+c}),c=a.length,d=b/c,e=twttr.reduce(a,0,function(a,b,c){return a+(c-d)*(c-d)}),f=Math.sqrt(e/c);return{median:d,stdDev:f}},scribe:function(a,b){twttr.is.def(this._scribbler)||(this._scribbler=twttr.Scribbler.global.spawn({context:"typeahead"}),this._scribbler.component={}),this._scribbler.scribe(a,b)},browserInfo:function(){var a="unknown";return $.browser.webkit?a="webkit":$.browser.msie?a="msie":$.browser.mozilla?a="mozilla":$.browser.opera&&(a="opera"),{browser:a,version:$.browser.version}},scribeLocalStorageLatency:function(a,b,c){var d=this.browserInfo();this.scribe("typeahead_localstorage_latency",{type:b,latency:c,browser:d.browser,version:d.version})},scribeSelect:function(a,b,c){var d=this._statsCumulativeTime,e=a.type==="click"?"click":"enter",f=c.length>0,g=c.data("remote")===!0,i="unknown";c.data("query")?i="saved search":c.find("a").data("search-query")?i="query suggestion":c.data("user-id")&&(i="users");var j=this.$node.find(".js-selectable").index(c)+1||0,k=this.medianAndStdDev(this._localLatencies),l=this.medianAndStdDev(this._remoteLatencies),m=twttr&&twttr.users&&twttr.users.typeahead?twttr.users.typeahead.length:0,n;try{n=JSON.stringify(localStorage).length}catch(o){n=0}this.scribe("typeahead_select",{time_to_completion:d,keystrokes_to_completion:this._keystrokes,item_count:f.toString(),item_details:i,index:j,query:b,was_remote:g.toString(),local_latency_median:k.median,local_latency_std_dev:k.stdDev,remote_latency_median:l.median,remote_latency_std_dev:l.stdDev,click_or_enter:e,local_storage_size:n,users_in_local_storage:m,people_from_api:twttr.caches.User.get("typeahead_people_from_api")||0,people_followed:twttr.caches.User.get("typeahead_people_followed"),profile_visits:twttr.caches.User.get("typeahead_profile_visits"),people_blocked:twttr.caches.User.get("typeahead_people_blocked"),people_unblocked:twttr.caches.User.get("typeahead_people_unblocked")}),this.resetStatsTimer(),this._keystrokes=0}}),this});a(c)})}),provide("mixins/discoveryHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.discoveryHelper",function(a){return a.methods({pagePathFor:function(a,b,c){return twttr.router[a+(b||"")+"Path"](c)},routePageTo:function(a,b,c){twttr.router.routeTo(this.pagePathFor(a,b,c))},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a}}),a}),a(twttr.mixins.discoveryHelper)})}),provide("mixins/usesRelatedResults",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.usesRelatedResults",function(a){return a.methods({_conversationRoleFor:function(a){return a.annotations.ConversationRole},tweetsForConversationRole:function(a,b){var c=this,d=twttr.filter(a.results.array,function(a){return c._conversationRoleFor(a)===b});return twttr.map(d,function(a){return a.value})},_groupNamed:function(a,b){return twttr.filter(a.array,function(a){return a.groupName===b})[0]},conversationGroupFor:function(a){return this._groupNamed(a,"TweetsWithConversation")},withRelatedResults:function(a,b,c){var d=this;twttr.API.Status.related(a.id,{include_entities:1,success:function(b){d._logResultGroups(b,a),c.success(b)},error:c.error||function(){}})},_logResultGroups:function(a,b){var c=this,d=(new Date).getTime()+"-"+(twttr.currentUser?twttr.currentUser.id:"guest")+"-"+b.id,e=[],f={related_impression_id:d,groups:e},g;$.each(a.array,function(a,b){var f=[],i=[];e.push(c._scribeDataFor(b,a)),g||(g=c._abDataFor(b)),b.sync("relatedImpressionId",d)}),scribble("show-related-tweets",f),g&&scribble("show-related-tweets",g,"www_ab_testing")},_scribeDataFor:function(a,b){var c={pos:b,groupName:a.groupName,resultType:a.resultType,annotations:this._annotationsFor(a),tweets:this._tweetsFor(a)};return a.sync("relatedGroupName",a.groupName),c},_abDataFor:function(a){var b;for(var c in a.annotations)c=="abData"&&(b||(b=a.annotations[c]));if(b)for(var d in b)a.sync("ab_data_"+d,b[d]);return b},_annotationsFor:function(a){var b=[],c="";for(var d in a.annotations)if(d!="abData"){var e={type:d,value:a.annotations[d]};b.push(e),c+=a.annotations[d]+" "}return c.length>0&&(c=c.substring(0,c.length-1)),a.sync("relatedAnnotations",c),b},_tweetsFor:function(a){var b=[];return $.each(a.results.array,function(c,d){a.resultType=="Tweet"&&b.push(d.value.id)}),b}}),a}),a(twttr.mixins.usesRelatedResults)})}),provide("mixins/profileHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.profileHelper",function(a){return a.methods({getUserInfo:function(a,b,c,d){c=c||{},this._screenName=a?a.toLowerCase():a;var e;c.batch===!0&&twttr.decider.isAvailable("profile_combined_api")?e=twttr.API.User.findForProfile:e=twttr.API.User.find,e.call(twttr.API.User,this._screenName,{success:twttr.bind(this,function(a){this.profileUser=twttr.profileUser=a,b&&b()}),error:twttr.bind(this,function(a){signal(">wokeUp"),a.status==403?twttr.isT1?twttr.app.switchToPage("403").send("suspendedUser"):twttr.Router.performRedirect(twttr.router.suspendedPath()):this.trigger("notFound"),d&&d()})})},_isSocialContextAvailable:function(){return twttr.decider.isAvailable("social_context")&&twttr.loggedIn&&twttr.currentUser.id!=twttr.profileUser.id},_defaultedScreenName:function(a){return!a&&twttr.loggedIn?twttr.currentUser.screenName:a},_addPromotedData:function(){twttr.promotedAccountStore.hasAccount()&&twttr.promotedAccountStore.getAccount().id==this.profileUser.id&&(this.profileUser=twttr.API.util.PromotedStore.getPromotedUserInstance(this.profileUser,twttr.promotedAccountStore.getAccount().impressionId),twttr.promotedAccountStore.clear())},noAutoRender:!0}).addViewData(function(){return{profile_user:new twttr.views.ProfileUser(twttr.profileUser)}}),a}),a(twttr.mixins.profileHelper)})}),provide("mixins/commonDashboardClickHandlers",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.commonDashboardClickHandlers",function(a){return a.click({".title-link":function(b,c){var d={input:"click",component:"dashboard",subcomponent:a._name,target:"dashboard_title",item:c.find(".dashboard-component-title").html()};scribble("dashboard_click",d)},".user-profile-link":function(b,c){var d=c.is("img")||c.find("img")[0],e=c.attr("data-user-id")||c.closest("a").attr("data-user-id"),f={input:"click",component:"dashboard",subcomponent:a._name,target:"user_profile_link",target_type:d?"image":"link",profile_id:e};scribble("dashboard_click",f)}}),a}),a(twttr.mixins.commonDashboardClickHandlers)})}),provide("mixins/t1/cardActionable",function(a){using("constants").as(function(b){var c=twttr.klass.mixin("twttr.mixins.cardActionable",function(){this.methods({registerCardActions:function(){var a=this;a.$node.delegate(".js-action-card-search","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("search","card_"+a._getElementCardType(this),{query:a._getCardQuery(this),item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-news","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("open_link","card_news",{url:$(this).attr("href"),query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)}),b.stopPropagation()}),a.$node.delegate(".js-action-card-expandtweets","simpleExpandoContract",function(b){var c=a._getCardQuery(this);a._scribeCardAction("deselect","card_news",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-expandtweets","simpleExpandoExpand",function(b){var c=a._getCardQuery(this);a._scribeCardAction("select","card_news",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-tweetlink","click",function(b){var c=a._getCardQuery(this),d=a._getStreamItemId(this);a._scribeCardAction("compose_tweet","card_news",{url:d,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-permalink","click",function(b){var c=a._getCardTweetId(this);a._scribeCardAction("permalink","card_tweet",{item_count:1,item_ids:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-profile","click",function(b){var c=a._getCardTweetId(this);a._scribeCardAction("profile_click","card_tweet",{item_count:1,item_ids:[c],item_details:a._getCardItemDetails(this,c,a._getElementUserId(this))})}),a.$node.delegate(".js-action-card-media","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("click",a._getCardMediaType(this)+"_card_topic",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})})},_scribeCardAction:function(a,b,c){trackClient({action:a,component:b},c)},_getCardAttribute:function(a,b){var c=$(a).closest(".js-story-item");return c.attr(b)},_getElementUserId:function(a){var b=$(a).closest(".js-actionable-tweet");return b.attr("data-user-id")},_getCardTweetId:function(a){return this._getCardAttribute(a,"data-tweet-id")},_getCardQuery:function(a){return this._getCardAttribute(a,"data-query")},_getStreamItemId:function(a){var b=$(a).closest(".js-stream-item");return b.attr("data-item-id")},_getElementCardType:function(a){return this._getCardAttribute(a,"data-story-type")},_getCardMediaType:function(a){return this._getCardAttribute(a,"data-card-media-type")},_getCardItemPosition:function(a,b){var c=$(a).closest("div.js-stream-items"),d;return c.length&&c.find("[data-query]").each(function(a){var c=$(this),e=c.attr("data-query");if(b+""==e)return d=a,!1}),d},_getCardItemDetails:function(a,c,d){var e={},f={item_type:b.constants.clientEvent.itemType.story,item_description:this._getElementCardType(a),item_position:this._getCardItemPosition(a,c)};return d&&(f.target_id=d),e[""+c]=f,e}})});a(c)})}),provide("mixins/t1/discoveryStoryHelpers",function(a){using("_","constants","util").as(function(b){var c=twttr.klass.mixin("twttr.mixins.discoverySearchHelper",function(a){this.methods({formatted_tweet_count_text:function(){return _("{{count}} Tweets",{count:b.util.formatNumber(this.tweet_count,twttr.pageLocale)})},story_name:function(){return this.name||this.query},is_hashtag:function(){return this.story_name().substring(0,1)==="#"},search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.TREND}})}),d=twttr.klass.mixin("twttr.mixins.discoveryMediaRenderHelper",function(a){this.methods({escaped_query:function(){return escape(this.id||this.query)},afterHtml:function(){if(!this.has_media)return;var a=this;setTimeout(function(){var b=(new Date).getTime(),c=a.escaped_query(),d=$("div.js-story-item[data-query='"+c+"']");d.find("div.js-story-load-status").show();var e=d.find("img.js-story-media").error(function(b){twttr.decider.isAvailable("t1d_scribe_errors")&&a._scribe("error",{id:c,url:a.image_url}),d.removeClass("js-loading loading"),d.addClass("js-nomedia nomedia")}).load(function(){twttr.decider.isAvailable("t1d_scribe_times")&&a._scribe("complete",{id:c,time:(new Date).getTime()-b,url:a.image_url}),d.removeClass("js-loading loading")});e.attr("src",a.image_url)},0)},_scribe:function(a,b){trackClient({action:a,component:this.scribeComponent},b)}})});a(c,d)})}),provide("mixins/UserSimilaritiesStreamT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.UserSimilaritiesStreamT1",function(){this.methods({_setTitle:function(a){twttr.helpers.isCurrentUser(twttr.profileUser.screenName)?a(_("Similar to you")):a(_("Similar to {{full_name}}",{full_name:twttr.profileUser.name}))}})});a(c)})}),provide("mixins/SuggestionCategoriesStreamT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.SuggestionCategoriesStreamT1",function(){this.methods({itemViewClass:"StreamInterestCategory",sampleSize:"large",addTipsies:function(){this.$find(".js-user-tipsy").tipsy({gravity:"s"})},_setHeader:function(a,b){b.header_help=_("Select topics you&rsquo;re interested in. Follow people you want to hear from."),b.placeholder=_("Search for a topic, full name, or @username");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowInterestsSearchPath,b);a(c.$node)},_setTitle:function(a){a(_("Browse categories"))},_getStreamEndComponent:function(){return new twttr.components.StreamEnd(this._getStreamEndHtml(),this._getStreamEndShowBird())}})});a(c)})}),provide("mixins/SuggestionCategoryMembersStreamT1",function(a){using("helpers","mixins/hasGovernmentSearchHeader").as(function(b){var c=twttr.klass.mixin("twttr.mixins.SuggestionCategoryMembersStreamT1",function(){this.mixin(b.mixins.hasGovernmentSearchHeader),this.methods({_setTitle:function(a){a(this.category.name)},_setViewToggler:function(a){var b={route:twttr.router.whoToFollowInterestsPath(),name:_("View all categories")};a(new twttr.views.BackLink(b))},_getStreamEndComponent:function(){return new twttr.components.StreamEnd(this._getStreamEndHtml(),this._getStreamEndShowBird())},_showGovernmentSearchHeader:function(){return twttr.abdecider.choose("government_sul_your_reps_195")!=="show_in_government_sul"?!1:this.category.slug===(twttr.isLocalhost?"celebrities":"government")}})});a(c)})}),provide("mixins/UserRecommendationsT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.UserRecommendationsT1",function(){this.methods({getRecPosition:function(a){var b;return this.$find(".js-account-summary").each(function(c,d){if(a.attr("data-user-id")==$(d).attr("data-user-id"))return b=c,!1}),b},LIST_ITEM_SELECTOR:".js-recommended-followers > .js-actionable-user",_generateUserList:function(a){return $('<div class="js-recommended-followers flex-module-inner" data-section-id="wtf">'+(new twttr.views.UserSmallList(a)).html()+"</div>")},_removeRefreshLink:function(){this.$find("a.js-refresh-suggestions").parent("span").remove()},_getModuleViewName:function(){return this.screenName?"DashboardUserSimilarities":"DashboardUserRecommendations"},_shouldHaveSpacer:function(){return!1}})});a(c)})}),provide("mixins/hasGovernmentSearchHeader",function(a){using("helpers").as(function(b){var c=twttr.klass.mixin("twttr.mixins.hasGovernmentSearchHeader",function(){this.methods({_setHeader:function(a){var c=this;if(this._showGovernmentSearchHeader()){var d=(new twttr.views.GovernmentAccountSearch({zip_code:this.params&&this.params.zipCode||""})).$html();b.helpers.addFormEvents(d.find(".js-government-account-search"),function(a,b){c.trigger("governmentSearch",[b.zip])}),a(d)}else a()},_showGovernmentSearchHeader:function(){return!0}})});a(c)})}),provide("mixins/prefollowingStream",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.prefollowingStream",function(a){return a.methods({deferredFollows:{},preFollows:{},userActionPrefollow:function(a){var b=twttr.helpers.getUserId(a);this.preFollows[b]=!0,this.userActionFollow(a)},userActionFollow:function(a){var b=this,c=twttr.helpers.getUserId(a);this.deferFollows?(this.deferredFollows[c]=!0,twttr.API.User.trigger("prefollow_before"),twttr.API.User.find(c,function(c){b.updateButtonFollow(a,c["protected"]),twttr.API.User.trigger(c["protected"]?"prefollow_request_success":"prefollow_success",c)})):this.constructor.uber.userActionFollow.apply(this,arguments)},userActionUnfollow:function(a){var b=twttr.helpers.getUserId(a);this.deferFollows&&this.deferredFollows[b]?(delete this.deferredFollows[b],twttr.API.User.trigger("unprefollow_before"),twttr.API.User.find(b,function(a){twttr.API.User.trigger("unprefollow_success",a)}),this.preFollows[b]&&(delete this.preFollows[b],this.scribbler.scribe({action:"unprefollow"},{item_ids:[""+b],item_count:1}))):this.constructor.uber.userActionUnfollow.apply(this,arguments)},commitPrefollows:function(a){var b=this,c=[],d=[],e=0;for(var f in this.deferredFollows)c.push(f);for(var f in this.preFollows)d.push(f);if(c.length==0){a();return}this.scribbler.scribe({action:"prefollow"},{item_ids:d,item_count:d.length}),twttr.currentUser.friends.followAll(c,{stringifiedIds:!0,success:function(_,c){for(var d=0;d<c.response.length;++d){var e=c.response[d];b.scribbler.scribe({action:"follow"},{item_ids:[""+e.id],item_count:1})}a()},error:function(){twttr.currentUser.friendsCount+=c.length,a()}}),this.deferFollows=!1,this.deferredFollows={},this.preFollows={}}}),a}),a(twttr.mixins.prefollowingStream)})}),provide("streams/StarterList",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.StarterList",function(a,b){twttr.streams.ListMembers.apply(this,arguments)}).subclassOf(twttr.streams.ListMembers).mixin(twttr.mixins.discoveryHelper).methods({update:function(a){this.params.list.members(a)},_setTitle:function(a){a(_("{{name}} suggests you also follow these accounts:",this.params.list.user.attributes))},_getEmptyStreamHtml:function(){return _("Sorry, {{name}} doesn't recommend anybody in particular.<br />Find users by <a href='{{url}}'>Interests</a>.",{url:this.pagePathFor(this.params.pathRoot,"Interests"),name:this.params.list.user.name})}}),a(twttr.streams.StarterList)})}),provide("streams/StarterFriends",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.StarterFriends",function(){twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){if(!twttr.helpers.canViewUser(c)){b._showError(twttr.streams.PROTECTED),b.doneLoadingMore();return}c.friends(a)})},_setTitle:function(a){a(_("@{{screen_name}} follows these accounts:",{screen_name:this.screenName}))}}).statics({_deciderKey:"people_stream_friends"}),a(twttr.streams.StarterFriends)})}),provide("streams/UserRecommendationsStream",function(a){using("_","streams/UserStream","mixins/userRecommendationsHelper","mixins/userActionable").as(function(b,_){var c=twttr.klass("twttr.streams.UserRecommendationsStream",function(a,c,d){b.streams.UserStream.call(this,a,c),c&&(this._processLoadedUsers(c),a.cursor&&(this.cursor=a.cursor)),this.whotofollowComponentName="whotofollow_stream",this.registerUserRecommendationsActions()}).subclassOf(b.streams.UserStream).mixin(b.mixins.userRecommendationsHelper,b.mixins.userActionable).methods({afterFirstSwitchingTo:function(a){this.items&&this.items.length?(a(this,twttr.streams.SUCCESS),this.render()):this.getMoreOldItems(a)},_processLoadedUsers:function(a,b){a&&this.doneLoadingMore();var c="whotofollow_view_all_recommended_users",d=this.params.inWelcomeFlow?"welcome_flow":"find_users",e={tracking_context:d};return b&&(e.error_status=b.status),this.trackImpressions(a,c,e),a},loadRecommendedUsers:function(a){a.personalized=a.personalized||this.params.personalized||!1,a.force_bq=a.personalized,a.algorithm=a.algorithm||this.params.algorithm||"",a.connections=!0;if(this.params.inWelcomeFlow){var b=twttr.abdecider.choose("wtf_welcome_persistent_100"),c=b&&b.match(/bucket(\d+)/),d=c?c[1]:0;a.high_timeout=!0,a.display_location="welcome-flow-recommendations",a.bucket_id=d}twttr.decider.isAvailable("wtf_visited_users")&&(a.related_users=twttr.recentlyViewedUsers.stack.concat(twttr.loggedOutViewedUsers.stack)),a.cursor===undefined&&(a.cursor=-1);var e=this,f=a.success;a.success=function(a,b){e.hadBqResults=b.response.had_bq_results;var c=e.recsToUsers(a);f(c,b)},twttr.loggedIn?twttr.currentUser.recommendedUsers2(a):twttr.API.User.recommendedUsers2(a)},update:function(a){var b=this,c=a.success,d=a.error,e=function(){var a={success:function(a,d){a=b._processLoadedUsers(a),c(a,d)}};b.params.lang&&(a.lang=b.params.lang),b.params.country&&(a.country=b.params.country),b.params.city&&(a.city=b.params.city),a.bypass_cache=!0,twttr.API.SuggestionCategory.randomSample(a),b.sulFallback=!0,b._streamManager&&b._streamManager.setTitle(b)};a.success=function(a,d){a=b._processLoadedUsers(a);if(!a.length()){if(twttr.decider.isAvailable("whotofollow_random_sample")&&b.params.useSulFallback!==!1&&(!b.params.inWelcomeFlow||b.params.useSulFallback)){e();return}b.trigger("noMoreRecommendations")}b.sulFallback=!1,c(a,d),b._streamManager&&b._streamManager.setTitle(b)},a.error=function(a){b._processLoadedUsers(null,a),d&&d(a)},a.cursor==-1&&twttr.decider.isAvailable("promoted_accounts_in_whotofollow_viewall")&&!b.params.inWelcomeFlow&&(a.pc=!b.params.noPromotedContent,a.display_location="wtf-view-all-stream"),this.params.sulWithNoFollows&&twttr.currentUser.friendsCount==0?e():this.loadRecommendedUsers(a)},setStreamManager:function(a){this._streamManager=a},_setTitle:function(a){if(this.params.invisibleWhenEmpty&&(!this.items||this.items.length==0)){a("");return}if(twttr.is.def(this.params.title)){a(this.params.title);return}if(twttr.isT1){a(_("Who to follow"));return}this.params.inWelcomeFlow?a(_("Follow these people to get started:")):this.params.inHomePage?(this.$find(".stream-title").css("border-bottom","1px solid #EBEBEB"),a(_('<div class="wtf-timeline-title"><div class="wtf-timeline-text">It looks like you aren&#39;t following anyone yet.<br /><b>Go ahead and follow some people!</b></div><button class="done-right button selected" type="button">Done following</button></div>'))):this.sulFallback?a(_('We&#39;re building a list of personalized suggestions for you. In the meantime, here are some other <a href="{{url}}">interesting accounts</a> to follow.',{url:twttr.router.whoToFollowInterestsPath()})):a(_("Twitter accounts suggested for you based on who you follow and more."))},_getEmptyStreamHtml:function(){return this.params.invisibleWhenEmpty&&(!this.items||this.items.length==0)?"":this.params.personalizedOnly?_("We&#39;re sorry, Twitter does not have any personalized suggestions to show you at this time. You can browse our regular <a href='{{url}}'>Who to Follow</a> list.",{url:twttr.router.whoToFollowPath()}):_("Sorry, we&#39;ve temporarily run out of recommendations for you. We're out there looking for more right now. Please check back soon!")},_getStreamEndHtml:function(){return this.params.inHomePage?_('<button class="done-right button selected" type="button">Done following</button></div>'):_("<a href='#' class='back-to-top'>Back to top &uarr;</a>")},_getStreamEndShowBird:function(){return this.params.inHomePage?!1:!0},_trackNewImpressions:function(){}});twttr.isT1&&c.methods({_setHeader:function(a,b){b.header_help=_("Twitter accounts suggested for you based on who you follow and more.");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowSuggestionsSearchPath,b);a(c.$node)}}),a(twttr.streams.UserRecommendationsStream)})}),provide("streams/UserRecommendationsDashboardStream",function(a){using().as(function(b){twttr.klass("twttr.streams.UserRecommendationsDashboardStream",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",this.deferFollows=!!a.deferFollows,twttr.streams.UserRecommendationsStream.call(this,a,b)}).subclassOf(twttr.streams.UserRecommendationsStream).mixin(twttr.mixins.prefollowingStream).methods({_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a(twttr.streams.UserRecommendationsDashboardStream)})}),provide("streams/UserSimilaritiesStream",function(a){using("_",twttr.isT1?"mixins/UserSimilaritiesStreamT1":"").as(function(b,_,c){var d=twttr.klass("twttr.streams.UserSimilaritiesStream",function(a,b){twttr.streams.UserStream.call(this,a,b),this.registerUserRecommendationsActions(),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"})}).subclassOf(twttr.streams.UserStream).mixin(twttr.mixins.userRecommendationsHelper).methods({update:function(a){var b=this,c=a.success,d=a.error,e="whotofollow_view_all_similar_users",f="similar_to";a.success=function(a,d){var g=b.recsToUsers(a);b.trackImpressions(g,e,{tracking_context:f}),c(g,d)},a.error=function(a){b.trackImpressions(null,e,{tracking_context:f,error_status:a.status}),d&&d(a)},a.connections=!1,a.pc=!0,a.display_location="st-view-all-stream",twttr.profileUser.similarUsers(a)},setStreamManager:function(a){this._streamManager=a},_setTitle:function(a){a(_("Accounts similar to @{{screen_name}}:",{screen_name:this.params.screenName}))},_getEmptyStreamHtml:function(){return _("Sorry, we've temporarily run out of users similar to @{{screen_name}}. We're out there looking for more right now. Please check back soon!",{screen_name:this.params.screenName})},_trackNewImpressions:function(){}});c&&d.mixin(c),a(twttr.streams.UserSimilaritiesStream)})}),provide("streams/ContactImportMatches",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.streams.ContactImportMatches",function(a,b,c){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.UserStream.apply(this,arguments),this.$node.addClass("contact-import-matches"),a.noBigImages||(this.$node.addClass("contact-import-images"),this.itemViewClass="MatchedContactUser"),this._loadedMatches=!1,this._loadingCount=0,this._loadingComponent=new twttr.views.ContactImportLoading,this._followingCount=0,this._showFollowing=!1,this.$headerNode=this.getHeaderContainer();var d=this;this.$headerNode.delegate(".js-toggle-following","click",function(a){return d._toggleFollowing(),!1})}).subclassOf(twttr.streams.UserStream).mixin(twttr.mixins.discoveryHelper).methods({streamViewClass:"ContactImportMatches",afterSwitchingToAgain:function(a){this.afterFirstSwitchingTo(a)},afterFirstSwitchingTo:function(a){twttr.API.User.bind("follow.ContactImportMatches",twttr.bind(this,this._incrementFollowingCount)),twttr.API.User.bind("follow_request.ContactImportMatches",twttr.bind(this,this._incrementFollowingCount)),twttr.API.User.bind("unfollow.ContactImportMatches",twttr.bind(this,this._decrementFollowingCount)),this._loadedMatches||this.getMoreOldItems(a)},beforeSwitchingAway:function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),twttr.API.User.unbind(".ContactImportMatches")},update:function(a){this._loadingError=!1;var b=this,c=a.success,d=a.error;a.success=function(a,d){var e=!b._loadedMatches;b._loadedMatches="users"in d.response;if(b._loadedMatches){delete b._loadingComponent;if(d.response.count){b.showInviteesPopup=!!d.response.others_count&&b.params.pathRoot=="welcome";var f=twttr.merge(d.response,{retry_service_path:b.pagePathFor(b.params.pathRoot,"Import")});d.response.following_count==d.response.count&&(f.following_count=0,b._showFollowing=!0),e&&b.scribbler.scribe({component:"stream",action:"matches"}),b._followingCount=d.response.following_count,b._othersCount=d.response.others_count,b._matchesHeaderComponent=new twttr.components.ContactImportMatchesStats(b,f)}else e&&b.scribbler.scribe({component:"stream",action:"no_matches"}),d.response.others_count?b._inviteOthersInline():window.setTimeout(function(){b.routePageTo(b.params.pathRoot,"Import"),twttr.showMessage(_("There was no one in your address book"))},0)}c(a,d),b._loadedMatches&&b._followingCount&&b.$node.parents(".dashboard").length==0&&Math.abs(twttr.$doc.scrollTop()+twttr.windowHeight-twttr.$doc.height())<500&&b.getMoreOldItems(),b._loadedMatches||(b._loadingCount++<b.constructor._retryCount?b._scheduleRetry():(b.scribbler.scribe({component:"stream",action:"timeout"}),b._loadingCount=0,b._showError(twttr.streams.TIMEOUT)))},a.error=function(a,c){if(a.error=="denied"){b.routePageTo(b.params.pathRoot,"Import"),twttr.showMessage(_("Authorization to access your contacts was denied"));return}a.error&&(b._loadingError=!0),b.trigger("error"),d(a,c)},twttr.API.AddressBook.contactsMatches(a)},_scribeResults:function(a,b,c){if(a=="initial"&&!this._loadedMatches)return;c=c||{},c.message=""+this._othersCount,twttr.streams.UserStream.prototype._scribeResults.apply(this,[a,b,c])},_toggleFollowing:function(){this._showFollowing=!this._showFollowing;for(var a=0;a<this.items.length;++a){var b=this.items[a];if(b.following||b.followRequestSent){var c=this.$node.find(this.itemSelector(b.id));this._showFollowing?c.fadeIn():c.fadeOut()}}this._updateFollowingToggle()},_incrementFollowingCount:function(a,b){this._updateFollowing(b,!0)},_decrementFollowingCount:function(a,b){this._updateFollowing(b,!1)},_updateFollowing:function(a,b){for(var c=0;c<this.items.length;++c){var d=this.items[c];if(d.id==a.id){this.items[c]=a;break}}this._followingCount=Math.max(0,this._followingCount+(b?1:-1)),this._showFollowing&&this._updateFollowingToggle()},_updateFollowingToggle:function(){var a={following_count:this._followingCount},b;this._showFollowing?b=_("Hide {{following_count}} following",a):b=_("Show {{following_count}} following",a),this.$headerNode.find(".js-toggle-following").text(b)},_followAll:function(a){var b=this;if(a.hasClass("disabled"))return;a.addClass("disabled");var c={success:function(c,d){a.removeClass("disabled");var e="";switch(c.followed_ids.length){case 0:e=_("Requests were sent to everybody.");break;case 1:e=_("Congratulations! You are now following 1 more user.");break;default:e=_("Congratulations! You are now following {{count}} more users.",{count:c.followed_ids.length})}twttr.showMessage(e),twttr.API.User.startBulkFollowing();var f=0;twttr.API.User.findAllCached(c.followed_ids).each(function(a){a.data("following",!0),a.following=!0;var b={requestParameters:[{user_id:a.id}]};twttr.API.User.trigger("follow_before",b),twttr.API.User.trigger("follow_success",a),f++}),twttr.API.User.findAllCached(c.requested_ids).each(function(a){a.data("follow_request_sent",!0),a.followRequestSent=!0;var b={requestParameters:[{user_id:a.id}]};twttr.API.User.trigger("follow_request_before",b),twttr.API.User.trigger("follow_request_success",a),f++}),twttr.API.User.stopBulkFollowing(),b.scribbler.scribe({component:"stream_header",action:"follow"},{item_count:c.followed_ids.length,item_ids:c.followed_ids,event_value:c.followed_ids.length,event_info:"follow_all",context:"import"}),b.scribbler.scribe({component:"stream_header",action:"follow_all"},{item_count:c.followed_ids.length,event_value:c.followed_ids.length,context:"import"}),b._followingCount+=c.followed_ids.length+c.requested_ids.length-f,this._showFollowing&&this._updateFollowingToggle()},error:function(b){a.removeClass("disabled"),twttr.showError(_("There was an error following your contacts."))}};twttr.API.AddressBook.followAllContacts(c)},_saveAsList:function(){var a=this;(new twttr.widget.ListDialog({template:{content:(new twttr.views.ListDialog({name:_("Friends"),mode:"private"})).html()},onSuccess:function(b){options={success:function(b,c){twttr.API.User.findAllCached(b).each(function(b){a.isDuplicate(b)&&a.rerenderItem(b.id,b)}),a.scribbler.scribe({component:"stream_header",action:"save_list"},{event_value:b.length,item_count:b.length})},error:function(){twttr.showError(_("There was an error adding your contacts to the list."))}},twttr.API.AddressBook.addContactsToList(b.id,options)}})).open()},inviteOthers:function(a){a||this.scribbler.scribe({component:"invite_contacts_link",action:"click"}),this.showInviteesPopup=!1;var b=this,c={success:function(c,d){b.scribbler.scribe({component:"invite_contacts_dialog",action:"open"}),b.inviteDialog=(new twttr.widget.InviteContactsDialog(d.response,{css:{},onSuccess:function(){this.close()},scribbler:b.scribbler,routeToHome:a})).open()}};twttr.API.AddressBook.contactsOthers(c)},_inviteOthersInline:function(){this.showInviteesPopup=!1,this._suppressStreamEnd=!0;var a=this,b={success:function(b,c){a.doneLoadingMore();var d=new twttr.components.InviteContacts(c.response,{scribbler:a.scribbler});a.scribbler.scribe({component:"invite_contacts",action:"impression"}),a.$node.find("div.stream-items").append(d.$node),a._renderInviteHeader(b.length),a.reachedTheEnd()},error:function(b){a.doneLoadingMore(),a._loadingError=!0,a._showError(twttr.streams.ERROR)}};twttr.API.AddressBook.contactsOthers(b),window.setTimeout(function(){a._loadingComponent=new twttr.views.ContactImportLoading,a.showLoadingSpinner()},0)},_scheduleRetry:function(){var a=this;this._timeout=window.setTimeout(function(){a._timeout=null,a._loadingComponent=new twttr.views.ContactImportLoading,a.getMoreOldItems()},5e3),this.showLoadingSpinner()},_renderItemHtml:function(a){var b=twttr.streams.UserStream.prototype._renderItemHtml.call(this,a);return!this._showFollowing&&(a.following||a.followRequestSent)&&!this.selectedItem(a.id).length&&(b=b.replace(/^<div /,"<div style='display:none' ")),b},_getStreamLoadingComponent:function(){return this._loadingComponent||twttr.streams.UserStream.prototype._getStreamLoadingComponent.call(this)},_getStreamErrorComponent:function(a){var b=this._loadingError?_("There was an error loading your contacts."):_("Loading seems to be taking a while."),c=new twttr.components.ContactImportErrorEnd(b),d=this;return c.bind("tryImportAgain",function(a){d.routePageTo(d.params.pathRoot,"Import")}),c},_getHeaderComponent:function(){return this._matchesHeaderComponent}}).statics({_deciderKey:"contact_import_stream",_retryCount:13});twttr.isT1?c.methods({_setHeader:function(a,b){if(this.header)a(this.header.$node);else{var c=new twttr.views.ContactImportMatchesHeader(b);a(c.html())}},_updateHeaderFromStream:function(a){this._matchesHeaderComponent&&(this.header=this._matchesHeaderComponent,a.html(this._matchesHeaderComponent.$node))},_renderInviteHeader:function(a){this.$headerNode.find(".js-contact-import-header-placeholder").html((new twttr.views.InviteContactsHeader({count:a})).html())},getHeaderContainer:function(){return this.streamManager?this.streamManager.$headerContainer():null},_setTitle:function(a){a(_("Find friends"))},_setViewToggler:function(a){a(new twttr.views.BackLink({route:twttr.router.whoToFollowImportPath(),name:_("Try another service")}))}}):c.methods({getHeaderContainer:function(){return this.$node},_setTitle:function(a){a("")},_renderInviteHeader:function(a){(new twttr.views.InviteContactsHeader({count:a})).render(this.$find(".invite-contacts-component"),"prepend"),twttr.helpers.handlePopupLinks(this.$node)}}),a(twttr.streams.ContactImportMatches)})}),provide("streams/DashboardContactImportMatches",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardContactImportMatches",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",a.noBigImages=!0,twttr.streams.ContactImportMatches.apply(this,arguments)}).subclassOf(twttr.streams.ContactImportMatches).methods({_setHeader:function(a,b){this.header?a(this.header.$node):a("")},_updateHeaderFromStream:function(a){twttr.streams.ContactImportMatches.prototype._updateHeaderFromStream.apply(this,arguments),$(window).trigger("resize")},itemViewClass:"DashboardStreamUser",customHeaderView:"DashboardContactImportMatchesStats"}),a()})}),provide("streams/ContactImportServices",function(a){using("externalOauthPopup",twttr.isT1?"mixins/ContactImportServicesT1":"").as(function(b,c,d){twttr.klass("twttr.streams.ContactImportServices",function(a,c){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments);var d=this;this.$node.addClass("contact-import-services"),this.$node.delegate(".js-wipe-addressbook","click",function(a){(new twttr.widget.Prompt({modal:!0,draggable:!0,template:{container_id:"wipe-addressbook",title:_("Are you sure you want to remove your contacts? Who To Follow suggestions may become less relevant.")},callback:function(a){a&&$.ajax({type:"POST",dataType:"json",url:"/users/wipe_addressbook.json",headers:{"X-PHX":!0},data:{authenticity_token:twttr.API.getConfig().postAuthenticityToken},success:function(){twttr.showMessage(_("Your contacts have been removed."))},error:function(){twttr.showMessage(_("Oops, we couldn't remove your contacts at this time."))}})}})).open()}),this.$node.delegate("div.service-button, .js-service-row","click",function(c){var e=$(this),f=e.find(".js-service-name").attr("data-service-id"),g={query:f};e.hasClass("selected")&&(g.event_info="selected"),d.scribbler.scribe({component:"stream",action:"launch_service"},g),e.attr("data-popup")==="true"?b.externalOauthPopup({url:e.attr("data-url"),width:e.attr("data-width"),height:e.attr("data-height"),callbackUrl:d.pagePathFor(a.pathRoot,"ImportMatches")}):window.open(e.attr("data-url"),"_blank").focus(),d._matchesStreamKey?d._streamManager.clearKeyFromCache(d._matchesStreamKey):d._streamManager.clearFromCache(twttr.streams.ContactImportMatches,{pathRoot:a.pathRoot}),c.preventDefault()})}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.discoveryHelper).methods({setStreamManager:function(a){this._streamManager=a},setMatchesStreamKey:function(a){this._matchesStreamKey=a},update:function(a){this.params.lang&&(a.lang=this.params.lang),this.params.country&&(a.country=this.params.country),this.params.context&&(a.context=this.params.context),twttr.API.AddressBook.contactsServices(a)},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_fetchItems:function(a){var b=this;if(this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}var c={success:function(c,d){b.push(c),b.reachedTheEnd();var e,f=twttr.map(c,function(a,b){return a.matched_email&&(e=a.matched_email),a.id}),g={item_names:f,item_count:f.length};e&&(g.message=e),b.scribbler.scribe({component:"stream",action:"results"},g),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)}};this.update(c)},_renderItemsHtml:function(a){var b=null;for(var c=0;c<a.length;++c){a[c].matched_email&&(b=a[c]);var d=a[c].name_template;d&&twttr.views[d]&&(a[c].html_name=(new twttr.views[d]).html())}return this.params.onlyMatched&&b&&(a=[b]),(new twttr.views.ContactImportServicesVertical({services:a,matched_service:b,matched_service_name:(b||{}).name,in_welcome_flow:this.params.inWelcomeFlow})).html()},_setTitle:function(a){a(_("Search the services you use to discover which of your friends are already using Twitter. Follow any of the friends you find to add their Tweets to your timeline."))},_getStreamEndComponent:function(){return null}}).statics({_deciderKey:"contact_import_stream"}),d&&twttr.streams.ContactImportServices.mixin(twttr.mixins.ContactImportServicesT1),a(twttr.streams.ContactImportServices)})}),provide("mixins/ContactImportServicesT1",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.ContactImportServicesT1",function(){this.methods({_setHeader:function(a,b){b.header_help=_("Search your contacts for friends already on Twitter, or invite them via email.");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowImportSearchPath,b);a(c.$node)},_setTitle:function(a){a(_("Find friends"))},_getStreamEndComponent:function(){return new twttr.components.StreamEndInviteFriends(this._getStreamEndHtml(),this._getStreamEndShowBird())}})}),a(twttr.streams.ContactImportServicesT1)})}),provide("streams/DashboardContactImportServices",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardContactImportServices",function(a,b){a=a||{},twttr.streams.ContactImportServices.call(this,a,b)}).subclassOf(twttr.streams.ContactImportServices).methods({_setHeader:function(a,b){a("")}}),a()})}),provide("StoredUserStack",function(a){using().as(function(b){twttr.klass("twttr.StoredUserStack",function(a,b){this.storageKey=a,b||(b=twttr.caches.User);var c=b.get(this.storageKey);this.cache=c?c.index:{},this.stack=c?c.stack:[],this.timestamps=c&&c.timestamps?c.timestamps:{}}).methods(twttr.EventProvider).statics({MAX_SIZE:10}).methods({push:function(a){if(!twttr.helpers.isCurrentUser(a)){var b=a.id||a.toString();twttr.is.def(this.cache[b])&&(this.stack=twttr.filter(this.stack,function(a){return a!=b})),this.cache[b]=this.stack.push(b),this.timestamps[b]=(new Date).getTime();if(this.size()>twttr.StoredUserStack.MAX_SIZE){var c=this.stack.shift();delete this.timestamps[c],delete this.cache[c]}this.trigger("push",b)}return this.save()},save:function(){return twttr.caches.User.set(this.storageKey,{index:this.cache,stack:this.stack,timestamps:this.timestamps}),this.size()},clear:function(){this.cache={},this.stack=[],this.timestamps={},this.save()},size:function(){return this.stack.length},getLatestUserId:function(){var a=this.size();return a?this.stack[a-1]:null},getLastPushTime:function(a){return this.timestamps[a]},findAll:function(a){twttr.API.User.findAll(this.stack.reverse(),a)}}),twttr.app.waitForSignal("init",function(){twttr.recentlyViewedUsers=new twttr.StoredUserStack("recentlyViewedUsers"),twttr.loggedOutViewedUsers=new twttr.StoredUserStack("recentlyViewedUsers",new twttr.cache.local.User($.cookie("guest_id")))}),a(twttr.StoredUserStack)})}),provide("PasswordStrength",function(a){using().as(function(b){twttr.PasswordStrength=function(){function a(a){return typeof a=="function"}function b(a,b){var c="";for(var d=0;d<b.length;d++){var e=!0;for(var f=0;f<a&&f+d+a<b.length;f++)e=e&&b.charAt(f+d)==b.charAt(f+d+a);f<a&&(e=!1),e?(d+=a-1,e=!1):c+=b.charAt(d)}return c}return{check:function(c,d){var e=0,d=d||{};if(c.length<(d.minlength||6))return{score:0,msgClass:"tooshort"};var f=c.toLowerCase();if(d.username&&f==(a(d.username)?d.username():d.username).toLowerCase())return{score:0,msgClass:"obvious"};if($.inArray(f,twttr.BANNED_PASSWORDS||[])!=-1)return{score:0,msgClass:"banned"};if(c.match(/^\s*$/))return{score:0,msgClass:"whitespace"};if(d.requireStrong){var g="# ` ~ ! @ $ % ^ & * ( ) - _ = + [ ] { }  | ; : ' \" , . < > / ?".split(" ");g=$.map(g,function(a){return"\\"+a}).join("");var i=["\\d","[a-z]","[A-Z]","["+g+"]"],j=$.map(i,function(a){return"(?=.*"+a+")"}).join("");if(!c.match(new RegExp("("+j+"){10,}")))return{score:0,msgClass:"tooweak"}}e+=c.length*4,e+=(b(1,c).length-c.length)*1,e+=(b(2,c).length-c.length)*1,e+=(b(3,c).length-c.length)*1,e+=(b(4,c).length-c.length)*1,c.match(/(.*[0-9].*[0-9].*[0-9])/)&&(e+=5),c.match(/(.*[!@#$%^&*?_~].*[!@#$%^&*?_~])/)&&(e+=5),c.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(e+=10),c.match(/([a-zA-Z])/)&&c.match(/([0-9])/)&&(e+=15),c.match(/([!@#$%^&*?_~])/)&&c.match(/([0-9])/)&&(e+=15),c.match(/([!@#$%^&*?_~])/)&&c.match(/([a-zA-Z])/)&&(e+=15);if(c.match(/^\w+$/)||c.match(/^\d+$/))e-=10;return e<0&&(e=0),e>100&&(e=100),e<34?{score:e,msgClass:"weak"}:e<50?{score:e,msgClass:"good"}:e<75?{score:e,msgClass:"strong"}:{score:e,msgClass:"verystrong"}}}}(),a(twttr.PasswordStrength)})}),provide("mixins/urlShortener",function(a){using("_","util","constants").as(function(b,_){twttr.klass.mixin("twttr.mixins.urlShortener",function(a){a.mixin(twttr.mixins.caretHelper).statics({matchers:{tco:/^https?:\/\/t.co\/\w+$/}}).methods({_registerUrlShortenerEvents:function(){this._explainLinkShortening&&this.editor.bind("didChangeContent",twttr.bind(this,this._showCounterTipsy)),this.$counterText=$('<span class="tweetbox-counter-tipsy"></span>'),this.$counter.before(this.$counterText),this.$counterText.css("opacity",0),this.$links=[],this._a=!1,this._isTipShowing=!1,this._oldLinkLen=0;var a=this._getTextLength;this._getTextLength=function(c){var d=a.apply(this,arguments),e=twttr.txt.extractUrls(c);return d-=e.join("").length,twttr.each(e,function(a){d+=b.constants.tcoLength,a.match(/https:/)&&(d+=1)}),d}},_getLinkCounterText:function(a){var b=_("Links will appear shortened"),c=_("Link will appear shortened");return a>1?b:c},_showCounterTipsy:function(){var a=this,b,c,d=15;a._linkLen=a._extractUrls().length,a._linkLen&&a._linkLen!==a._oldLinkLen?(a.$counterText.html(a._getLinkCounterText(a._linkLen)),c=a.$container.find("div.tweet-button-container"),b=c.width(),c.children().each(function(){b-=$(this).outerWidth(!0)}),twttr.helpers.ellipsify(a.$container.find(".geo-text").width(function(a,c){return b<0||!c?c+b-d:c}),!0),a.$counterText.animate({opacity:1},100),a._isTipShowing=!0):a._isTipShowing&&!a._linkLen&&(a.$counterText.animate({opacity:0},100,function(){a.$counterText.html(""),twttr.helpers.ellipsify(a.$container.find(".geo-text").width(""),!0)}),a._isTipShowing=!1),a._oldLinkLen=a._linkLen},_showCounterFade:function(){if(twttr.txt.extractUrls(this.getCurrentWord(this.getCaret())).length){this.$counter.css({color:"green"});if(!this._a){var a=this.$counter.clone(),b=this.$counter.position();a.css({left:b.left,top:b.top}),a.addClass("tweet-counter-proxy"),this.$counter.after(a);function c(){a.remove()}a.animate({fontSize:"40px",opacity:0,marginTop:-20,marginLeft:-Math.round(a.width()/2)},200,c),this._a=!0}}else this.$counter.css({color:""}),this._a&&(this._a=!1)},_tweetReady:function(){this.lock(),this.callTalon(this._extractUrls(),twttr.bind(this,function(a){this.setTweetContent(this.replaceWithTalonUrls(a)),this.unlock(),this.tweet()}))},_extractUrls:function(){return this.filterInvalidLinks(twttr.txt.extractUrls(this.editor.content()))},replaceWithTalonUrls:function(a){var b=this.editor.content();return twttr.each(a,function(a){b=this.replaceContent(b,a)},this),b},callTalon:function(a,b){a.length?twttr.API.Urls.shortenMultiple(a,b):b([])},replaceContent:function(a,b){return a.replace(b.expanded_url,b.url)},filterInvalidLinks:function(b){return twttr.filter(b,function(b){return!b.match(a.matchers.tco)})},_mousemove:function(a){var b=a.pageX,c=a.pageY;twttr.each(this.$links,function(a){var d=$(a),e=d.offset(),f=d.attr("data-mouse-entered");if(b>=e.left&&b<=e.left+d.width()&&c>=e.top&&c<=e.top+d.height()){if(!f||f==="false")d.attr("data-mouse-entered","true"),d.trigger("mouseenter");return!1}f==="true"&&(d.attr("data-mouse-entered","false"),d.trigger("mouseleave"))})},_matchUrls:function(){setTimeout(twttr.bind(this,function(){this.$links=this.$find("a.twitter-timeline-link"),this.$links.tipsy({html:!0,gravity:"n",offset:3,"class":"tweetbox-tipsy",title:function(){return'<span class="tweetbox-tipsy-text">'+_("Link will be displayed as {{url}}",{url:twttr.helpers.displayUrl(this.href)})+"</span>"}})}),0)}})}),a(twttr.mixins.urlShortener)})}),provide("mixins/caretHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.caretHelper",function(){return this.statics({spaceBoundary:/\s|$/,wordEnd:/\S+$/}).methods({init:function(){this.$input.bind("blur",twttr.bind(this,function(a){setTimeout(twttr.bind(this,function(){this.hide()}),1e3)})).bind("mouseup",twttr.bind(this,function(a){setTimeout(twttr.bind(this,function(){this.getCaret()}),0)})).bind("focus",twttr.bind(this,function(a){this.getCaret()}))},getCurrentText:function(){return this.$input.val()},setCaretPosition:function(a){var b=this.$input[0];if(b.setSelectionRange)b.focus(),b.setSelectionRange(a,a);else if(b.createTextRange){var c=b.createTextRange();c.collapse(!0),c.moveEnd("character",a),c.moveStart("character",a),c.select()}this.lastCaret=a},getCaret:function(){var a=this.$input[0],b=0;if(document.selection){try{a.focus()}catch(c){}var d=document.selection.createRange();if(d==null)return this.lastCaret=0,0;var e=a.createTextRange(),f=e.duplicate();e.moveToBookmark(d.getBookmark()),f.setEndPoint("EndToStart",e),b=f.text.length}else if(a.selectionStart||a.selectionStart=="0")b=a.selectionStart;return this.lastCaret=b,b},insertOrReplaceSelection:function(a,b){var c=this.$input[0],d=this.getCaret(),e=d+a.length;if(document.selection){c.focus();var f=document.selection.createRange();f.text=a;if(b){var g=c.createTextRange();g.collapse(!0),g.moveEnd("character",e),g.moveStart("character",d),g.select()}else this.setCaretPosition(e)}else if(c.selectionStart||c.selectionStart=="0"){var i=c.selectionStart,j=c.selectionEnd,k=c.scrollTop;c.value=c.value.substring(0,i)+a+c.value.substring(j,c.value.length),c.focus(),c.selectionStart=b?d:e,c.selectionEnd=e,c.scrollTop=k}else c.value+=a,this.setCaretPosition(e),c.focus();this.lastCaret=e,this.$input.change()},getCurrentWord:function(a){var b=this.getCurrentText(),c=b.slice(0,a),d=b.slice(a,b.length),e=b.charAt(a-1);if(!e||e===" ")return"";this.leftBoundary=c.search(this.constructor.wordEnd);var f=c.slice(this.leftBoundary,c.length),g=d.slice(0,d.search(this.constructor.spaceBoundary)),i=f.concat(g);return this.rightBoundary=this.leftBoundary+i.length,i},replaceCurrentWord:function(a){var b=this.getCurrentText().split("");this.oldValueArray=b;var c=b.slice(0,this.leftBoundary),d=b.slice(this.rightBoundary,b.length);if(d.length<1||!d[0].match(/\s/))a+=" ";var e=(c.join("")+a).length+1;return{value:c.join("")+a+d.join(""),cursor:e}}}),this}),a(twttr.mixins.caretHelper)})}),provide("geo",function(a){using("_","util").as(function(b,_){twttr.provide("twttr.geo",{LOG_VERSION:3,UI_VERSION:2,LOCATION_CACHE_INTERVAL:3e4,BROWSER_GEO_BANNER_APPEAR_DELAY:500,BROWSER_GEO_BANNER_DISAPPEAR_INTERVAL:100,PLACE_SEARCH_AUTOCOMPLETE_DELAY:250,MAX_NEARBY_PLACES:12,MAX_NEARBY_NEIGHBORHOODS:5,MAX_PLACE_SEARCH_RESULTS:50,MAX_PLACE_AUTOCOMPLETE_RESULTS:8,PLACE_SEARCH_RESULTS_PER_PAGE:5,PLACE_CREATION_DEFAULT_ZOOM_LEVEL:15,SIMILAR_PLACES_MAX_ZOOM_LEVEL:17,ACCEPTABLE_LOCATION_ACCURACY:1e3,ACCEPTABLE_LOCATION_TIMEOUT:5e3,LOCATION_TIMEOUT:15e3,LOCATION_MAXIMUM_AGE:6e4,MAX_SIMILAR_PLACES:5,TARGET_POI_NAME_LENGTH:40,TARGET_PLACE_NAME_LENGTH:50,POI_MARKER_SIZE:{width:43,height:32},POI_MARKER_HOTSPOT:{x:14,y:33},POI_MAP_DEAD_ZONE:{left:4,top:24,right:6,bottom:0},geoEnabled:null,currentLocation:{},mapsTimeout:1e4,mapsListeners:[],Exceptions:{GeoSupportException:function(){this.msg=_("This browser does not support GeoLocation")}},mapsInitialized:function(){while(twttr.geo.mapsListeners.length){var a=twttr.geo.mapsListeners.shift();a()}},loadMaps:function(a){if(twttr.geo.mapsAvailable())a();else{twttr.geo.mapsListeners.push(a);if(twttr.geo.mapsListeners.length==1){var b=window.location.protocol==="https:"?"https://maps-api-ssl.google.com":"http://maps.google.com";b+="/maps/api/js?v=3.4&sensor=false&callback=twttr.geo.mapsInitialized",window.location.hostname.match(/^(.+\.)?twitter\.com$/)&&(b+="&client=free-twitter");var c=document.createElement("script");c.type="text/javascript",c.src=b,document.body.appendChild(c),setTimeout(twttr.geo.mapsInitialized,twttr.geo.mapsTimeout)}}},mapsAvailable:function(){return typeof google!="undefined"&&google.maps!==undefined},getBestContainer:function(a){if(!a)return{name:"",full_name:"",contained_within:[],place_type:"city",bounding_box:{type:"Polygon",coordinates:[[[-122.51368188,37.70813196],[-122.35845384,37.70813196],[-122.35845384,37.83245301],[-122.51368188,37.83245301]]]}};var b={name:a.part_of_name||"",full_name:a.part_of_name||"",contained_within:[],place_type:"city"};return a.contained_within&&twttr.every(a.contained_within,function(a){return b=a,a.place_type!="city"}),b},getPlaceFullAddressAndMapLink:function(a){var b=[twttr.geo.getPlaceAttribute(a,"street_address"),a.contained_within&&a.contained_within.length>0?a.contained_within[0].full_name:null];b=twttr.filter(b,function(a){return a}).join(", ");var c=a.place_type=="poi"?b:a.name+", "+b;return{full_address:b,map_link:"http://maps.google.com/maps?"+$.param({q:c})}},placesFromApi:function(a){var b=[];return a.each(function(a){b.push(a.data())}),b},getPlaceAttribute:function(a,b){return a.attributes&&a.attributes[b]||""},getPlaceDetails:function(a){var b=twttr.geo.getPlaceAttribute(a,"street_address");if(b)return b;switch(a.place_type){case"city":return _("a city");case"neighborhood":return _("a neighborhood");case"country":return _("a country");case"admin":return _("a state or province");default:return twttr.geo.getBestContainer(a).name}},getFullPlace:function(a){return $.extend({},a,{address:twttr.geo.getPlaceAttribute(a,"street_address"),container:twttr.geo.getBestContainer(a).full_name,phone:twttr.geo.getPlaceAttribute(a,"phone"),place_id:a.id,place_name:a.full_name},twttr.geo.getPlaceFullAddressAndMapLink(a))}}),a(twttr.geo)})}),provide("components/Autocomplete",function(a){using("_","util","constants").as(function(b,_){twttr.provide("twttr.users",{autocompleted:[]}),twttr.klass("twttr.components.Autocomplete",function(a){var c={limit:5,textarea:!1,preselect:!0};this.options=twttr.merge({},c,a),this.$input=$(this.options.input),this.$container=$('<ul class="autocomplete-container"></ul>').insertAfter(this.options.input),this._isCompletionsOpen=!1,twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_autocomplete")||b.util.params().autocomplete)&&this.registerEvents(),this.init()}).mixin(twttr.mixins.caretHelper).statics({cache:{},regCache:new twttr.cache.Simple,hashtagCache:{},_isCompletionsOpen:!1,nextCursor:-1,cursorCount:0,requestedUsers:!1,getAutocompletedUsers:function(a){!!twttr.currentUser;var c=this;if(twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_autocomplete")||b.util.params().autocomplete)){function d(a){return twttr.map(a,function(a,b){return[a.id,a.screenName,a.name,a.profileImageUrl]})}if(!this.requestedUsers){this.requestedUsers=!0;var e=twttr.caches.User.get("autocomplete_friends");e?(twttr.users.autocompleted=e,a&&a()):function(){function b(e){++c.cursorCount<=5&&twttr.currentUser?twttr.currentUser.friends({count:100,cursor:e,success:twttr.bind(c,function(c,e){twttr.components.Autocomplete.invalidateCache();if(c.isEmpty()){a&&a();return}c=d(c.toArray()),twttr.users.autocompleted.push.apply(twttr.users.autocompleted,c),twttr.components.Autocomplete.resetStorageCache(),e.response.next_cursor?b(e.response.next_cursor):a&&a()})}):a&&a()}twttr.currentUser&&twttr.components.Autocomplete.addToList([twttr.currentUser.id,twttr.currentUser.screenName,twttr.currentUser.name,twttr.currentUser.profileImageUrl]),b(twttr.components.Autocomplete.nextCursor)}()}else a&&a()}}}).methods(twttr.EventProvider).statics({username:/^[@＠]([a-zA-Z0-9_]{1,20})$/,hashtag:/^[#＃]([a-zA-Z0-9_]+)/,transformAvatar:/(.+)(?:_normal)\.(\w+)$/,_matchesContiguously:function(a,b){var c=twttr.components.Autocomplete,d=c._matchesContiguouslyCaches.matchers=c._matchesContiguouslyCaches.matchers||{},e=c._matchesContiguouslyCaches.results=c._matchesContiguouslyCaches.results||{};return e[a]&&e[a][b]!==undefined?e[a][b]:(d[a]=d[a]||new RegExp("^"+a,"i"),e[a]=e[a]||{},e[a][b]=d[a].test(b.replace(/\W/,"")),e[a][b])},_matchesConsecutively:function(a,b){var c=twttr.components.Autocomplete,d=c._matchesConsecutivelyCaches.matchers=c._matchesConsecutivelyCaches.matchers||{},e=c._matchesConsecutivelyCaches.results=c._matchesConsecutivelyCaches.results||{};return e[a]&&e[a][b]!==undefined?e[a][b]:(d[a]=d[a]||new RegExp(a.split("").join(".*"),"i"),e[a]=e[a]||{},e[a][b]=d[a].test(b),e[a][b])},levenSorter:function(a,c){var d=twttr.components.Autocomplete._currentPrefix,e=b.util.leven(a,d),f=b.util.leven(c,d);return e<f?-1:e>f?1:0},sorter:function(a,c){var d=twttr.components.Autocomplete._matchesContiguously,e=twttr.components.Autocomplete._matchesConsecutively,f=twttr.components.Autocomplete._currentPrefix;if(d(f,a[1])&&!d(f,c[1]))return-1;if(!d(f,a[1])&&d(f,c[1]))return 1;if(d(f,a[2])&&!d(f,c[2]))return-1;if(!d(f,a[2])&&d(f,c[2]))return 1;if(e(f,a[1])&&!e(f,c[1]))return-1;if(!e(f,a[1])&&e(f,c[1]))return 1;if(e(f,a[2])&&!e(f,c[2]))return-1;if(!e(f,a[2])&&e(f,c[2]))return 1;var g=b.util.leven(a[1],f),i=b.util.leven(c[1],f);if(g<i)return-1;if(g>i)return 1;var j=b.util.leven(a[2],f),k=b.util.leven(c[2],f);return j<k?-1:j>k?1:0},_htmlEscapeAndStrongifyMatches:function(a,b){return h(a.replace(b,"<strong>$1</strong>")).replace(/&lt;(\/?strong)&gt;/g,"<$1>")}}).statics({_matchesContiguouslyCaches:{results:{},matchers:{}},_matchesConsecutivelyCaches:{results:{},matchers:{}}}).statics({invalidateCache:function(a){if(!a){this.cache={},twttr.components.Autocomplete._matchesConsecutivelyCaches.results={},twttr.components.Autocomplete._matchesConsecutivelyCaches.matchers={},twttr.components.Autocomplete._matchesContiguouslyCaches.results={},twttr.components.Autocomplete._matchesContiguouslyCaches.matchers={};return}var b="";a=a.split("");for(var c=a.length-1;c>=0;c--)b+=a.shift(),delete this.cache[b],delete twttr.components.Autocomplete._matchesConsecutivelyCaches.results[b],delete twttr.components.Autocomplete._matchesConsecutivelyCaches.matchers[b],delete twttr.components.Autocomplete._matchesContiguouslyCaches.results[b],delete twttr.components.Autocomplete._matchesContiguouslyCaches.matchers[b]},resetStorageCache:function(){var a=[],b=0;twttr.users.autocompleted.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0});for(var c=0,d=twttr.users.autocompleted.length;c<d;c++){if(twttr.users.autocompleted[c+1]&&twttr.users.autocompleted[c][0]==twttr.users.autocompleted[c+1][0])continue;a[b++]=twttr.users.autocompleted[c]}twttr.users.autocompleted=a,twttr.caches.User.set("autocomplete_friends",twttr.users.autocompleted,2592e5)},addToList:function(a){var b=!1;for(var c=0,d=twttr.users.autocompleted.length;c<d;++c)if(twttr.users.autocompleted[c][1]===a[1]){b=!0;break}b||twttr.users.autocompleted.push(a),twttr.components.Autocomplete.invalidateCache(a[1]),this.resetStorageCache()}}).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.bind("close",twttr.bind(this,function(){this.hide()}));var b="keypress"+($.browser.webkit||$.browser.msie?" keydown":"");this.$input.bind("keyup click",twttr.bind(this,this.keyup)),this.$input.bind("change",twttr.bind(this,this.change)),this.$input.bind(b,twttr.bind(this,this.keypress)),this.$container.delegate("li.selectable","mouseenter",function(b){a.$container.find("li.selected").removeClass("selected"),$(this).addClass("selected")}).delegate("li.selectable","click",twttr.bind(this,function(a){a.preventDefault();if($(a.target).hasClass("twttr-follow-notice"))return;$(a.target).addClass("selected").siblings(".selected").removeClass("selected"),this.select(),this.focus()})),this.$input.bind("keydown",function(b){if(b.ctrlKey)return;if(!a._isCompletionsOpen&&b.which==twttr.constants.keyCodes.escape)return;b.stopPropagation()}),this.position()},focus:function(){this.$input.focus()},set:function(a){if(this.options.textarea){var b=this.replaceCurrentWord(a);this.$input.val(b.value),this.setCaretPosition(b.cursor)}else this.$input.val(a);this.$input.change()},hide:function(){setTimeout(twttr.bind(this,function(){this.$container.css("visibility","hidden"),this._isCompletionsOpen&&this.trigger("hide"),this._isCompletionsOpen=!1,this.constructor._isCompletionsOpen=!1}),0)},show:function(){this.$container.css("visibility","visible"),this.constructor._isCompletionsOpen=!0,this._isCompletionsOpen=!0},keypress:function(a){if(a.ctrlKey)return;switch(a.keyCode){case b.constants.keyCodes.tab:case b.constants.keyCodes.enter:case b.constants.keyCodes.escape:if(!this._isCompletionsOpen)return;a.preventDefault();break;case b.constants.keyCodes.upArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.previous(),a.preventDefault());break;case b.constants.keyCodes.downArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.next(),a.preventDefault())}a.stopPropagation(),setTimeout(twttr.bind(this,this.change),0)},keyup:function(a){if(a.ctrlKey)return;a.stopPropagation();if(a&&(a.keyCode===b.constants.keyCodes.tab||a.keyCode===b.constants.keyCodes.shift)&&!this._isCompletionsOpen)return;var c="",d=!1;if(this.options.textarea){var e=this.getCaret();c=this.getCurrentWord(e).replace(twttr.constants.regexps.dirMark,""),c.match(this.constructor.username)?(c=RegExp.$1,this.autocompleteType="username",d=!0):c.match(this.constructor.hashtag)&&(c=RegExp.$1,this.autocompleteType="hashtag",d=!0)}else this.autocompleteType="username",c=this.$input.val(),d=!0;if(c.length&&d)switch(a.keyCode){case b.constants.keyCodes.escape:this.hide(),a.stopPropagation();break;case b.constants.keyCodes.upArrow:case b.constants.keyCodes.downArrow:break;case b.constants.keyCodes.tab:case b.constants.keyCodes.enter:!a.shiftKey&&this._isCompletionsOpen&&this.select();break;default:this.autocompleteType=="hashtag"?this.lookUpHashtag(c):this.lookUpUser(c)}else this.hide()},select:function(){var a=this.$container.find("li.selected"),b=a.find("b").text(),c=a.find("img").attr("src");this.set(b),this.hide();if(this.autocompleteType==="username"){var d=a.attr("data-user-screenname"),e=a.attr("data-user-id");this.trigger("select",[this.autocompleteType,b,c,d,e])}else this.trigger("select",[this.autocompleteType,b,c])},change:function(){var a=this.getCurrentText(),b=this.lastText||"";if(a===b)return;var c=0,d=a.length,e=b.length,f=Math.min(d,this.getCaret());for(var g=0;g<f;g++){if(b.charAt(g)!==a.charAt(g))break;c+=1}var i=0;for(var g=1;g<=d-c;g++){if(b.charAt(e-g)!==a.charAt(d-g))break;i+=1}var j=c+i;this.lastText=a,this.trigger("substitution",[c,e-j,d-j,a])},sanitize:function(a){return this.constructor._currentPrefix=a.replace(/ /g,""),this.constructor._currentPrefix},appendNotice:function(a){return twttr.currentUser&&twttr.currentUser.friendsCount>500&&(a+='<li class="twttr-follow-notice">'+_("<em>Showing most recent 500 you're following</em>")+"</li>"),a},lookUpHashtag:function(a){var b=this;a=this.sanitize(a);var c=this.constructor.hashtagCache[a];if(c){this.$container.html(c),this.$container.find("li.selectable:first").addClass("selected"),this.show();return}var d=function(a){if(a.match(b.regexPrefix))return a},e=twttr.merge({},this.getFilteredResults(a,twttr.suggestedHashtags||[],d,this.constructor.levenSorter),!0),f=this.getItemTemplate(e,function(a,c){return'<li class="hashtag-completion selectable"><b>#'+b.constructor._htmlEscapeAndStrongifyMatches(a,c)+"</b></li>"}).slice(0,this.options.limit);if(f.length>0){var g=f.join("");this.constructor.hashtagCache[a]=g,this.$container.html(g),this.$container.find("li.selectable:first").addClass("selected"),this.show()}else this.hide()},lookUpUser:function(a){var b=this;a=this.sanitize(a);var c=this.constructor.cache[a];if(c){this.$container.html(c),this.options.preselect&&this.$container.find("li.selectable:first").addClass("selected"),this.show();return}var d=function(a){if(a[1].match(b.regexPrefix))return a;if(a[2].replace(/ /g,"").match(b.regexPrefix))return a},e=twttr.merge({},this.getFilteredResults(a,twttr.users.autocompleted,d,this.constructor.sorter),!0),f=this.getItemTemplate(e,function(a,c){var d=a[3].replace(b.constructor.transformAvatar,"$1_mini.$2");return'<li data-user-id="'+h(a[0])+'" data-user-screenname="'+h(a[1])+'" class="selectable"><img src="'+h(d)+'"/> <span><b>@'+b.constructor._htmlEscapeAndStrongifyMatches(a[1],c)+"</b> <em>"+b.constructor._htmlEscapeAndStrongifyMatches(a[2],c)+"</em></span></li>"}).slice(0,this.options.limit);this.options.defaultResults&&twttr.each(this.options.defaultResults,function(b){(!b.show||b.show(a,e))&&f.splice(f.length,0,b.format(a))});if(f.length>0){var g=f.join("");g=this.appendNotice(g),this.constructor.cache[a]=g,this.$container.html(g),this.options.preselect&&this.$container.find("li.selectable:first").addClass("selected"),this.show()}else this.hide()},position:function(){setTimeout(twttr.bind(this,function(){if(this.$input.offsetParent().length){var a=this.$input.position(),b=Math.round(a.top+this.$input.innerHeight()+1),c=Math.round(a.left);this.$container.css({top:b,left:c})}}),0),this.$container.css({width:this.$input.innerWidth()})},getItemTemplate:function(a,b){var c=new RegExp("("+this.constructor._currentPrefix.split("").join("|")+")","gi");return twttr.map(a,twttr.bind(this,function(a,d){return b(a,c)}),null,"array")},getFilteredResults:function(a,b,c,d){var e=this,f,g=this.constructor.regCache.get(a);if(g)this.regexPrefix=g;else{var i=a.split(""),j="^"+i.join("\\w*");this.regexPrefix=new RegExp(j,"i"),this.constructor.regCache.set(a,this.regexPrefix)}var k=twttr.filter(b,c);return d?k.sort(d):k},next:function(){var a=this.$container.find("li.selected");if(!a.length){this.$container.find("li.selectable:first").addClass("selected");return}a=a.removeClass("selected").nextAll("li.selectable:first"),a.length?a.addClass("selected"):this.$container.find("li.selectable:first").addClass("selected")},previous:function(){var a=this.$container.find("li.selected");if(!a.length){this.$container.find("li.selectable:last").addClass("selected");return}a=a.removeClass("selected").prevAll("li.selectable:first"),a.length?a.addClass("selected"):this.$container.find("li.selectable:last").addClass("selected")}}),a(twttr.components.Autocomplete)})}),provide("components/Typeahead",function(a){using("constants","mixins/typeaheadScribing").as(function(b,c,d){var e=twttr.klass.component("twttr.components.Typeahead",function(a){var b=this,c={pauseInterval:300,closeDelay:500,select:$.noop};this.options=twttr.merge({},c,a),this.datasources=this.options.datasources,this._select=this.options.select,this.val=this._val="",this.typingPauseDetectionTimeoutId=null,this.$input=$(this.options.input),this.$inputHint=$(this.options.inputHint),this.$node=$((new twttr.views.Typeahead).html()).insertAfter(this.$inputHint),this._isCompletionsOpen=this._wasCompletionsOpen=!1,this._keystrokes=0,this._localLatencies=[],this._remoteLatencies=[],this._lastTimerEvent="none",this._statsTimerStart=0,this._statsCumulativeTime=0,this._resultsDirty=!1,this._lastHint="",this._placeholder=this.$input.attr("placeholder"),this.resizeTimer=null,this.heightLimit={1:0,2:1,3:2,4:3,5:5,6:6};var d=twttr.abdecider.choose("typeahead_271");this.inBucket=d!=="control"&&(d==="typeahead"||twttr.decider.isAvailable("swift_typeahead")),this.registerTypeaheadEvents();if(twttr.loggedIn&&(twttr.decider.isAvailable("typeahead")||this.inBucket)){var e=this.$find(".js-typeahead-results");twttr.each(this.datasources,function(a){a.bind("show",function(a,c){c===b._val&&b.$input.hasClass("focus")&&b.show()}),a.bind("scribeLocalStorageLatency",twttr.bind(b,b.scribeLocalStorageLatency)),a.bind("localLatency",twttr.bind(b,b.addLocalLatency)),a.bind("remoteLatency",twttr.bind(b,b.addRemoteLatency)),a.bind("resultsDirty",twttr.bind(b,b.resultsDirty)),a.bind("hint",twttr.bind(b,b.hint)),a.init(),e.append(a.$node)}),this.bind("hint",twttr.bind(this,this.hint)),this.resizeHeight(),this.executeQueryIfAlreadyFocused()}}).deciderKey("typeahead").mixin(d).methods({registerTypeaheadEvents:function(){var a=this,b="keypress"+($.browser.webkit||$.browser.msie?" keydown":"");this.$input.bind("keyup click",twttr.bind(this,this.keyup)),this.$input.bind(b,twttr.bind(this,this.keypress)),this.$node.delegate(".js-selectable","mouseenter",function(b){a.$find(".selected").removeClass("selected"),$(this).addClass("selected");var c=$(this).data("hint");c=c?c:"",a.trigger("hint",[c,a.$input.val()])}).delegate(".js-selectable","click",twttr.bind(this,function(a){this.select(a)})),this.$input.bind("keydown",function(b){b.keyCode===27&&(a.$input.removeClass("focus"),a.$inputHint.removeClass("focus"),a.hide(),a.$input.trigger("blur")),clearTimeout(a.typingPauseDetectionTimeoutId)}),this.$input.bind("focus",twttr.bind(this,this.focus)),this.$input.bind("blur",twttr.bind(this,this.blur)),this.$node.bind({mouseenter:function(){a.mouseOverDropDown=!0},mouseleave:function(){a.mouseOverDropDown=!1}}),twttr.widget.Dialog.bind("close",twttr.bind(this,function(){this.hide()})),$(window).resize(function(){clearTimeout(a.resizeTimer),a.resizeTimer=setTimeout(twttr.bind(a,a.resizeHeight),100)}),$(document).click(function(b){a.$node.parent().find($(b.target))||a.hide()}),$(document).bind("searchPlaceholderUpdate",function(b,c){a._placeholder=c})},hint:function(a,b,c){if(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket){var d=this.$input.val();d.toLowerCase()===c.toLowerCase()&&this.inputIsFocused()&&this.$input[0].scrollWidth<=this.$input.width()?this.$inputHint.val(d+b.slice(d.length)):this.$inputHint.val(""),c===""&&b!==""&&this.$input.attr("placeholder",""),this.$inputHint.css("direction",this.$input.css("direction"))}},resultsDirty:function(){this._resultsDirty=!0;if(this.$input.hasClass("focus")){var a=this.$input.val();this.queryLocalData(a),this.queryRemoteData(a)}},executeQueryIfAlreadyFocused:function(){this.inputIsFocused()&&(this.$input.addClass("focus"),this.$inputHint.addClass("focus"),this.focus())},focus:function(a){var b=this.$input.val();b===this._val&&this._wasCompletionsOpen&&!this._resultsDirty?(this.show(),this._lastHint!==""&&(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket)&&(this.$inputHint.val(this._lastHint),this.$input.attr("placeholder",""))):setTimeout(twttr.bind(this,function(){this.queryLocalData(b),this.typingPauseDetectionTimeoutId=setTimeout(twttr.bind(this,function(){this.queryRemoteData(b)}),this.options.pauseInterval)}),0),this.startStatsTimer()},blur:function(a){this._lastHint=this.$inputHint.val();if(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket)this.$inputHint.val(""),this.$input.attr("placeholder",this._placeholder);!this.mouseOverDropDown&&!twttr.search.mouseOverMagnifying&&setTimeout(twttr.bind(this,function(){this.hide()}),this.options.closeDelay),this.pauseStatsTimer()},inputIsFocused:function(){return this.$input.is(":focus")||this.$input[0]==document.activeElement},resizeHeight:function(){var a=$(window).height(),b=Math.ceil(a/100),c=b in this.heightLimit?this.heightLimit[b]:b<2?1:6;twttr.each(this.datasources,function(a){a.trigger("newLimit",c)})},autocompleteHint:function(a){if(this._isCompletionsOpen&&!a.shiftKey&&this.isCursorAtEnd()){var c=this.$input.css("direction")==="rtl";if(c&&a.keyCode===b.constants.keyCodes.rightArrow||!c&&a.keyCode===b.constants.keyCodes.leftArrow)return;var d=this.$node.find(".js-selectable.selected[data-hint]:visible").first();if(d.length===0&&this.$node.find(".js-selectable.selected").length===1)return;d.length===0&&(d=this.$node.find(".js-selectable[data-hint]:visible").first()),this.$input.val(d.data("hint")),a.preventDefault()}},isCursorAtEnd:function(){var a;return document.selection?(this.$input.focus(),a=document.selection.createRange(),a.moveStart("character",-this.$input[0].value.length),this.$input.val().length-a.text.length===0):typeof this.$input[0].selectionStart=="number"?this.$input.val().length-this.$input[0].selectionStart===0:!0},hide:function(){setTimeout(twttr.bind(this,function(){this._isCompletionsOpen&&(this.$node.hide(),this._wasCompletionsOpen=this._isCompletionsOpen,this._isCompletionsOpen&&this.trigger("hide"),this._isCompletionsOpen=!1)}),0)},show:function(){this.$find(".js-selectable").length>0&&(this.$node.show(),this._isCompletionsOpen=!0)},keypress:function(a){a.stopPropagation();switch(a.keyCode){case b.constants.keyCodes.enter:if(this.inputIsFocused()&&!a.shiftKey&&a.type==="keypress"||this.inputIsFocused()&&!a.shiftKey&&a.type==="keydown"&&(a.metaKey||a.ctrlKey))a.preventDefault(),this.select(a);break;case b.constants.keyCodes.escape:this._isCompletionsOpen&&a.preventDefault();break;case b.constants.keyCodes.rightArrow:if(a.charCode===39)break;case b.constants.keyCodes.leftArrow:case b.constants.keyCodes.tab:this.autocompleteHint(a);break;case b.constants.keyCodes.upArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.previous(),a.preventDefault());break;case b.constants.keyCodes.downArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.next(),a.preventDefault())}},keyup:function(a){a.type!=="click"&&(a.stopPropagation(),a.keyCode!==b.constants.keyCodes.enter&&this._keystrokes++);if(a&&(a.keyCode===b.constants.keyCodes.tab||a.keyCode===b.constants.keyCodes.shift)&&!this._isCompletionsOpen)return;val=this.$input.val();var c=this;if(val!==this._val||this._resultsDirty)this.hide(),setTimeout(twttr.bind(this,function(){this.queryLocalData(val),this.typingPauseDetectionTimeoutId=setTimeout(function(){c.queryRemoteData(val)},this.options.pauseInterval)}),0),this._resultsDirty=!1},queryLocalData:function(a){twttr.loggedIn&&(twttr.decider.isAvailable("typeahead_local_queries")||this.inBucket)&&(this._val=a,twttr.each(this.datasources,function(b){b.localQueryAndRenderResults(a)}))},queryRemoteData:function(a){var b=this;twttr.loggedIn&&(twttr.decider.isAvailable("typeahead_remote_queries")||this.inBucket)&&twttr.each(b.datasources,function(b){b.remoteQueryAndRenderResults(a)})},select:function(a){var b=this.$find(".selected"),c=this.$input.val();if(c===""&&b.length===0)return;var d=a.metaKey||a.ctrlKey;this.$input.val(""),this.$inputHint.val(""),this.hide(),this.$input.blur(),trackClient({section:"top_nav",component:"searchbox",action:"search"},{query:c}),this.scribeSelect(a,c,b,d),this._select(a,c,b,d)},next:function(){var a=this.$find(".selected").removeClass("selected"),b=this.$find(".js-selectable:visible"),c=b.index(a),d=c===b.length?0:c+1;d!==b.length&&$(b[d]).addClass("selected");var e=d===b.length,f=$(b[d]),g=$(b[0]);this.hintForNextOrPreviousItem(e,f,g)},previous:function(){var a=this.$find(".selected").removeClass("selected"),b=this.$find(".js-selectable:visible"),c=b.index(a),d=c===-1?b.length-1:c-1;d!==-1&&$(b[d]).addClass("selected");var e=d===-1,f=$(b[d]),g=$(b[0]);this.hintForNextOrPreviousItem(e,f,g)},hintForNextOrPreviousItem:function(a,b,c){var d=this.$input.val(),e=b.data("hint"),f="";e?f=e:a&&(f=c.data("hint")),this.trigger("hint",[f,d])}});a(e)})}),provide("components/TypeaheadDatasource",function(a){using().as(function(b,_){var c=twttr.klass.component("twttr.components.TypeaheadDatasource").methods({init:$.noop,localQueryAndRenderResults:$.noop,remoteQueryAndRenderResults:$.noop,inBucket:function(){var a=twttr.abdecider.choose("typeahead_271");return a!=="control"&&(a==="typeahead"||twttr.decider.isAvailable("swift_typeahead"))},tokenizeName:function(a){return $.trim(a.replace(/[@#]/,"")).toLowerCase().split(/[\s-_]+/)},tokenizeScreenName:function(a){return $.trim(a).toLowerCase().split(/_/)},tokenizeText:function(a){return $.trim(a).toLowerCase().split(/[\s-_]+/)},queryTopicAndAccountRemoteApi:function(a,b,c){twttr.API.User.typeaheadGlobal(a,{count:b,success:function(b){$(document).trigger("accountResults",[a,c,b.users]),$(document).trigger("topicResults",[a,c,b.topics])}})},updateStorageCache:function(){var a=2592e5;twttr.caches.User.set("typeahead_friends",twttr.users.typeahead,a),twttr.caches.User.set("typeahead_people_from_api",twttr.users.typeahead.length-1||0)},reset:function(){twttr.caches.User.reset()},get:function(a){twttr.caches.User.get(a)},set:function(a,b,c){var d=2592e5;c=c||d,twttr.caches.User.set(a,b,c)},update:function(a,b){twttr.caches.User.update(a,b)},"delete":function(a){twttr.caches.User.set(a,null,-1)}});a(c)})}),provide("components/TypeaheadSearchQueryDatasource",function(a){using("components/TypeaheadDatasource").as(function(b,_){var c=twttr.klass("twttr.components.TypeaheadSearchQueryDatasource",function(a){var b={limit:6};this.options=twttr.merge({},b,a),this.$node=(new twttr.views.TypeaheadSavedSearches).render(),this.$results=this.$find("ul"),this.savedSearches=[],this._version=10,this._lastQuery=""}).subclassOf(b.components.TypeaheadDatasource).deciderKey("typeahead_saved_searches").methods({init:function(){var a=this;this.$node.hide(),this._version!==twttr.caches.User.get("saved_searches_version")&&(twttr.caches.User.set("saved_searches",null,-1),twttr.caches.User.set("saved_searches_version",this._version)),this.cacheSavedSearches(),twttr.API.SavedSearch.bind("create",function(b,c){b.type==="create"&&(($.inArray(c),a.savedSearches)&&a.savedSearches.push(c),twttr.caches.User.update("saved_searches",a.savedSearches),a.savedSearches.length===1&&$(".global-nav .js-search-form").addClass("has-saved-searches"),a.updateOrDirtyResults())}),twttr.API.SavedSearch.bind("delete",function(b,c){b.type==="delete"&&(a.savedSearches=a.savedSearches.filter(function(a){return a.query!=c.query}),twttr.caches.User.update("saved_searches",a.savedSearches),a.savedSearches.length===0&&$(".global-nav .js-search-form").removeClass("has-saved-searches"),a.updateOrDirtyResults())}),this.bindLimitBasedOnWindowHeight(),this.bindRemoteApiListener()},bindRemoteApiListener:function(){var a=this;(twttr.decider.isAvailable("typeahead_searches")||this.inBucket())&&$(document).bind("topicResults",function(b,c,d,e){var c=a._lastQuery,f="",g=[];if(c==="")g=a.savedSearches;else{e.length&&twttr.each(e,function(b){var c=b.topic,d=b.rounded_score;a.isSavedSearch(c)||g.push(a.mapQuerySuggestionsToApiSearchItem(c,d))});if(twttr.decider.isAvailable("typeahead_new_style_saved_searches")||a.inBucket())g=g.concat(twttr.filter(a.savedSearches,twttr.bind(a,a.matcher(c))));g=g.slice(0,Math.min(4,a.options.limit))}f=g.length>0?g[0].name:"",a.trigger("hint",[f,c]),a.render(g,c);var i=new Date-d;a.trigger("remoteLatency",i)})},bindLimitBasedOnWindowHeight:function(){this.bind("newLimit",twttr.bind(this,function(a,b){this.options.limit=b}))},updateOrDirtyResults:function(){this.$node.is(":visible")?this.localQueryAndRenderResults(this._lastQuery):this.trigger("resultsDirty")},cacheSavedSearches:function(){var a=this;savedSearches=twttr.caches.User.get("saved_searches"),savedSearches?a.savedSearches=savedSearches:twttr.currentUser.savedSearches(function(b){a.savedSearches=b.array,$(".global-nav .js-search-form").addClass("has-saved-searches");var c=36e5;twttr.caches.User.set("saved_searches",a.savedSearches,c),a.trigger("resultsDirty")})},mapQuerySuggestionsToApiSearchItem:function(a,b){return{debug_info:twttr.decider.isAvailable("typeahead_debug_info")?' title="score = '+b+'"':"",search_results_path:twttr.router.searchResultsPath({query:a}),query:a,name:a,search_query_source:"typeahead_click"}},localQueryAndRenderResults:function(a){if(twttr.decider.isAvailable("typeahead_saved_searches")||this.inBucket()){var b=new Date;this._lastQuery=a;var c=twttr.filter(this.savedSearches,twttr.bind(this,this.matcher(a)));this.render(c,a);var d=c[0]?c[0].name:"";this.trigger("hint",[d,a]);var e=new Date-b;this.trigger("localLatency",e)}},remoteQueryAndRenderResults:$.noop,matcher:function(a){return function(b){if(b.name.toLowerCase().indexOf(a.toLowerCase())===0)return b}},ranker:function(a){return function(b,c){return a.length/c.length+c.matched_count-(a.length/b.length+b.matched_count)}},renderSearch:function(a){return(new twttr.views.TypeaheadSearchItem(a)).html()},render:function(a,b){this.$results.attr("data-search-query",b.toLowerCase());var c=twttr.map(a,this.renderSearch);if(c.length>0){var d=c.join("");this.$results.html(d),this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b)}else this.$results.empty(),this.$node.hide(),this.$node.removeClass("has-results")},isSavedSearch:function(a){for(var b=0,c=this.savedSearches.length;b<c;b++)if(this.savedSearches[b].name.toLowerCase()===a)return!0}});a(c)})}),provide("components/TypeaheadAccountsDatasource",function(a){using("components/TypeaheadDatasource").as(function(b,_){twttr.provide("twttr.users",{typeahead:{adjacencyList:{},userHash:{},length:0}});var c=twttr.klass.component("twttr.components.TypeaheadAccountsDatasource",function(a){var b={limit:6};this.options=twttr.merge({},b,a),this.$node=(new twttr.views.TypeaheadAccounts).render(),this.$results=this.$find("ul"),this.weights={PROFILE_VISIT_BOOST:10,UNCACHED_PROFILE_VISIT:75,FOLLOW:100,UNBLOCK:50,SELF:250},this.IE8_ACCOUNT_LIMIT=1e3,this.ACCOUNT_LIMIT=2500,this.addUsersQueue=[],this.blocks={},this.userIdsCurrentlyRendered={},this._version=66,this.isFullySupportedBrowser=!($.browser.msie&&parseInt($.browser.version,10)<8)}).subclassOf(b.components.TypeaheadDatasource).deciderKey("typeahead_people").methods({init:function(){this.$node.hide(),this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_local_queries")||this.inBucket())&&(this.clearCacheIfNewVersion(),this.bindRemoteApiListener(),this.bindProfileVisitHandler(),this.bindFollowEventHandler(),this.bindBlockEventHandler(),this.bindUnblockEventHandler(),this.bindLimitBasedOnWindowHeight(),this.getTypeaheadUsers(),this.userIdsCurrentlyRendered={})},clearCacheIfNewVersion:function(){this._version!==twttr.caches.User.get("typeahead_people_version")&&(twttr.caches.User.set("typeahead_friends",null,-1),twttr.caches.User.set("blocks",null,-1),twttr.caches.User.set("typeahead_people_version",this._version),twttr.caches.User.set("typeahead_people_from_api",0),twttr.caches.User.set("typeahead_people_followed",0),twttr.caches.User.set("typeahead_profile_visits",0),twttr.caches.User.set("typeahead_people_blocked",0),twttr.caches.User.set("typeahead_people_unblocked",0))},mapJavaScriptUser:function(a,b){return{id:a.id,screen_name:a.screenName,name:a.name,profile_image_url:a.profileImageUrl,profile_image_url_https:a.profileImageUrlHttps,verified:a.verified,tokens:a.tokens||this.tokenizeJavascriptUserObject(a),weight:b||a.weight||0}},mapApiUser:function(a,b){return{id:a.id,screen_name:a.screen_name,name:a.name,profile_image_url:a.profile_image_url,profile_image_url_https:a.profile_image_url_https,verified:a.verified,tokens:a.tokens,weight:b||parseFloat(a.rounded_graph_weight)||0}},bindRemoteApiListener:function(){$(document).bind("accountResults",twttr.bind(this,function(a,b,c,d){if(this.$results.attr("data-query")===b.toLowerCase()){d=twttr.filter(d,twttr.bind(this,this.filterBlockedUsers)),d=twttr.filter(d,twttr.bind(this,this.filterAlreadyDisplayedUsers)),this.renderRemoteUsers(d,b);var e=new Date-c;this.trigger("remoteLatency",e)}}))},bindProfileVisitHandler:function(){var a=this;$(document).bind("profileVisit",function(b,c){if(!c.screenName)return;var d=a.removeFromList(a.mapJavaScriptUser(c));d?(d.tokens=a.tokenizeJavascriptUserObject(d),a.addToList(a.mapApiUser(d,d.weight+a.weights.PROFILE_VISIT_BOOST))):(c.tokens=a.tokenizeJavascriptUserObject(c),a.addToList(a.mapJavaScriptUser(c,a.weights.UNCACHED_PROFILE_VISIT)));var e=a.get("typeahead_profile_visits")||0;a.set("typeahead_profile_visits",e+1)})},bindFollowEventHandler:function(){var a=this;twttr.API.User.bind("follow",function(b,c){a.addToList(a.mapJavaScriptUser(c,a.weights.FOLLOW)),a.set("typeahead_people_followed",a.get("typeahead_people_followed")+1),a.trigger("resultsDirty")})},bindBlockEventHandler:function(){var a=this;twttr.API.User.bind("block",function(b,c){a.blocks[c.id]=c,a.update("blocks",a.blocks),a.removeFromList(a.mapJavaScriptUser(c)),a.set("typeahead_people_blocked",a.get("typeahead_people_blocked")+1),a.trigger("resultsDirty")})},bindUnblockEventHandler:function(){var a=this;twttr.API.User.bind("unblock",function(b,c){delete a.blocks[c.id],a.update("blocks",a.blocks),a.addToList(a.mapJavaScriptUser(c,a.weights.UNBLOCK)),a.set("typeahead_people_unblocked",a.get("typeahead_people_unblocked")+1),a.trigger("resultsDirty")})},bindLimitBasedOnWindowHeight:function(){this.bind("newLimit",twttr.bind(this,function(a,b){this.options.limit=b}))},localQueryAndRenderResults:function(a){this.userIdsCurrentlyRendered={},this.$results.attr("data-query",a.toLowerCase());if(this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_local_queries")||this.inBucket())){var b=new Date,c;a.length&&twttr.users.typeahead?(processedQuery=this.processQuery(a),c=this.getPossiblyMatchingAccounts(processedQuery),c=twttr.filter(c,twttr.bind(this,this.matcher(processedQuery,twttr.users.typeahead.length))),c=twttr.filter(c,twttr.bind(this,this.filterBlockedUsers)),c=c.sort(this.ranker),c=c.slice(0,this.options.limit)):c=[],this.renderLocalUsers(c,a);var d=new Date-b;this.trigger("localLatency",d)}},remoteQueryAndRenderResults:function(a){var b=this;if(this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_remote_queries")||this.inBucket())){var c=new Date,d;a.length&&this.queryTopicAndAccountRemoteApi(a,this.options.limit+2,c)}},processQuery:function(a){var b=this.tokenizeText(a);return{raw:a,length:a.length,terms:twttr.map(this.tokenizeText(a),function(a){return{val:a}})}},getUserObjectsFromIds:function(a){var b=[],c=twttr.users.typeahead.userHash;for(var d=0,e=a.length;d<e;d++)$.inArray(c[a[d]],b)===-1&&b.push(c[a[d]]);return b},getPossiblyMatchingAccounts:function(a){var b={},c={};for(var d=0,e=a.terms.length;d<e;d++){var f=a.terms[d],g=f.val[0],i=twttr.users.typeahead.adjacencyList[g];f&&i&&!b[g]&&(b[g]=!0,twttr.map(i,function(a){c[a]=!0}))}var j=[];return $.each(c,function(a){j.push(a)}),this.getUserObjectsFromIds(j)},matcher:function(a,b){return function(b){var c=b.tokens,d=[];for(var e=0,f=c.length;e<f;e++)for(var g=0,i=a.terms.length;g<i;g++)c[e].token.indexOf(a.terms[g].val)===0&&d.push(g);b.matchedCount=$.unique(d).length;if(b.matchedCount===a.terms.length)return b}},ranker:function(a,b){return b.weight-a.weight},renderLocalUsers:function(a,b){var c=twttr.map(a,twttr.bind(this,this.renderAccount));b&&a.length&&c.push((new twttr.views.TypeaheadAccountsShortcut({query:b})).html()),this.$results.html(c.join("")),c.length>0?(this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b)):(this.$node.hide(),this.$node.removeClass("has-results"))},renderRemoteUsers:function(a,b){var c=this.$results.find('li a[data-shortcut="true"]').length,d=this.$results.find("li").length-c;a=a.slice(0,Math.max(0,this.options.limit-d));var e=twttr.map(a,twttr.bind(this,this.renderAccount));b&&c===0&&a.length?(e.push((new twttr.views.TypeaheadAccountsShortcut({query:b})).html()),this.$results.html(e.join(""))):$(e.join("")).insertBefore(this.$results.find(".js-shortcut")),e.length>0&&(this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b))},tokenizeJavascriptUserObject:function(a){var b=this.tokenizeScreenName(a.screenName).concat(["@"+a.screenName],this.tokenizeName(a.name));return twttr.map(b,function(a){return{token:a}})},mapApiUsers:function(a){var b=this;return twttr.map(a,function(a,c){return b.mapApiUser(a)})},addCurrentUser:function(){if(twttr.currentUser){var a=twttr.currentUser;a.tokens=this.tokenizeJavascriptUserObject(a),this.addToList(this.mapJavaScriptUser(twttr.currentUser,this.weights.SELF))}},getTypeaheadUsers:function(){if(twttr.decider.isAvailable("typeahead_local_queries")||this.inBucket())if(!this.requestedUsers){var a=this;this.requestedUsers=!0;var b=twttr.caches.User.get("typeahead_people_from_api"),c=+(new Date);twttr.users.typeahead=twttr.caches.User.get("typeahead_friends"),b&&b!==0&&!!twttr.users.typeahead?(this.trigger("scribeLocalStorageLatency",["load",+(new Date)-c]),this.processQueuedUsers(),this.trigger("resultsDirty")):twttr.API.User.typeaheadSocial(twttr.currentUser.id,{count:$.browser.msie&&parseInt($.browser.version,10)===8?a.IE8_ACCOUNT_LIMIT:a.ACCOUNT_LIMIT,success:function(b){b.length&&(b=a.mapApiUsers(b),a.getBlockedUsers(function(){b=a.filterBlockedUsers(b);var c=twttr.is.def(twttr.users.typeahead)?twttr.users.typeahead:{adjacencyList:{},userHash:{},length:0};twttr.users.typeahead=a.preprocessUsers(b,c),a.addCurrentUser();var d=+(new Date);a.updateStorageCache(),a.trigger("scribeLocalStorageLatency",["save",+(new Date)-d]),a.trigger("resultsDirty")}),a.processQueuedUsers())}})}},preprocessUsers:function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];for(var f=0,g=e.tokens.length;f<g;f++){var i=e.tokens[f].token[0];if(!i)break;b.adjacencyList[i]||(b.adjacencyList[i]=[]),$.inArray(e.id,b.adjacencyList[i])===-1&&b.adjacencyList[i].push(e.id)}b.userHash[a[c].id]=a[c]}return b.length=b.length+a.length,b},getBlockedUsers:function(a){var b=this;blocks=b.get("blocks"),blocks?a(blocks):twttr.currentUser.blocks(function(c){c=c.array;for(var d=0,e=c.length;d<e;d++)b.blocks[c[d].id]=c[d];var f=36e5;b.set("blocks",b.blocks,f),a(b.blocks)})},filterBlockedUsers:function(a){if(!twttr.is.def(this.blocks[a.id]))return a},filterAlreadyDisplayedUsers:function(a){if(!twttr.is.def(this.userIdsCurrentlyRendered[a.id]))return a},renderAccount:function(a){this.userIdsCurrentlyRendered[a.id]=a;var b=twttr.isSSL()?a.profile_image_url_https:a.profile_image_url;return a.avatar=twttr.helpers.transformProfileImageUrl(b,"mini"),a.verified=a.verified?' <i class="verified"></i>':"",twttr.decider.isAvailable("typeahead_debug_info")?(isUserLocal=twttr.is.def(a.weight),a.debug_info=twttr.util.supplant(' title="{datasource} user, weight/score: {score}"',{datasource:isUserLocal?"local":"remote",score:isUserLocal?a.weight:a.rounded_score})):a.debug_info="",(new twttr.views.TypeaheadAccountItem(a)).html()},processQueuedUsers:function(){for(var a=0,b=this.addUsersQueue.length;a<b;a++)this.addToList(this.addUsersQueue[a])},addToList:$.noop,removeFromList:function(a){return a}});a(c)})}),provide("components/GlobalNavTypeahead",function(a){using("constants","components/Typeahead","components/TypeaheadSearchQueryDatasource","components/TypeaheadAccountsDatasource").as(function(b,c,_){var d=twttr.klass("twttr.components.GlobalNavTypeahead",function(a){var c={input:$("#search-query"),inputHint:$("#search-query-hint"),datasources:[new b.components.TypeaheadSearchQueryDatasource,new b.components.TypeaheadAccountsDatasource],select:function(a,b,c,d){var e=c.find("a").attr("data-shortcut"),f=c.attr("data-user-screenname"),b=c.find("a").attr("data-search-query")||b,g=c.find("a").attr("data-query-source")==="saved_search_click",i=g?twttr.search.searchQuerySource.SAVED_SEARCH_CLICK:twttr.search.searchQuerySource.TYPEAHEAD_CLICK;!c.find("a").attr("data-search-query")&&!f&&(i=twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.setLastQuerySource(i);var j;e?j=c.find("a")[0].href:f?j=twttr.router.profilePath({screen_name:f}):(twttr.search.$searchQuery.val(b),j=twttr.router.searchResultsPath({query:b})),d?window.open(j):twttr.router.routeTo(j),a.preventDefault()}},a=twttr.merge({},c,a);(twttr.decider.isAvailable("typeahead_global_nav")||twttr.abdecider.choose("typeahead_271")==="typeahead")&&b.components.Typeahead.call(this,a)}).subclassOf(b.components.Typeahead);a(d)})}),provide("components/Editor",function(a){using("util","constants").as(function(b){twttr.klass("twttr.components.Editor",function(a,b){var c=this;this.$container=$(a),this.$container.addClass("twttr-editor"),this.options=b||{},this._defaultContent=this.options.defaultContent||"",this._enableAutoGrow=this.options.enableAutoGrow||!1,this._isIE7()&&(this._enableAutoGrow=!1),this._autoGrowMinHeight=this.options.height||75;var d=this.options.width||"100%",e=this.options.height||"auto";this.$editor=$("<textarea/>").addClass("twitter-anywhere-tweet-box-editor").css({width:d,height:e}).val(this._defaultContent),this.options.condensed&&this.$container.addClass("condensed"),this.css={width:$.browser.mozilla?d-2:d,height:e,"min-height":e},this.$container.append(this.$editor),this._enableAutoGrow&&(this.$editor.css("overflow","hidden"),this.$shadow=this._createShadowForTextArea(this.$editor),this.$shadow.appendTo(this.$editor.parent())),this._registerEvents()}).methods(twttr.EventProvider).methods({moveCursorToEnd:function(){var a=this.$editor[0];setTimeout(function(){try{if(a.createTextRange){var b=a.createTextRange();b.collapse(!0),b.moveStart("character",a.value.length),b.moveEnd("character",a.value.length),b.select()}else a.selectionStart=a.value.length}catch(c){}},0)},content:function(){return this.$editor.val().replace(twttr.constants.regexps.dirMark,"")},setContent:function(a){a=a||"",this.$editor.val(a),this.trigger("didChangeContent",[a])},height:function(a){this.$editor.css("height",a)},width:function(a){this.$editor.css("width",a)},focus:function(){this.$editor.focus(),this.moveCursorToEnd()},blur:function(){this.$editor.blur()},toggle:function(){this.$editor.toggle()},reset:function(){this.setContent("")},_tryAutoGrow:function(){var a=this._autoGrowMinHeight,b=150,c="xyz",d=this.$editor;this._copyCssPropertiesFromTextArea(this.$shadow,d),this.$shadow.text(d.val()+c);var e=this.$shadow.height();e>a&&e<=b?(d.css("overflow","hidden"),d.height(e)):e<a?(d.css("overflow","hidden"),d.height(a)):e>b&&d.css("overflow","auto")},_isIE7:function(){return $.browser.msie&&parseInt($.browser.version,10)===7},_copyCssPropertiesFromTextArea:function(a,b){var c=["font-family","font-size","font-weight","line-height","padding-bottom","padding-left","padding-right","padding-top","white-space","width","word-wrap"];$.each(c,function(c,d){a.css(d,b.css(d))})},_createShadowForTextArea:function(a){var b=$("<div />").css("display","none");return this._copyCssPropertiesFromTextArea(b,a),b},_registerEvents:function(){var a=this;this.$editor.bind("focus blur",function(b){a.trigger(b.type,Array.prototype.slice.call(arguments,1))}),this.$editor.bind("keypress",function(a){if(a.ctrlKey)return;a.stopPropagation()}),this.$editor.bind("keydown",function(c){if(c.ctrlKey)return;switch(c.keyCode){case b.constants.keyCodes.tab:c.preventDefault(),a.trigger("blurFromTab",[c]);break;case b.constants.keyCodes.esc:c.preventDefault(),a.trigger("blurFromEscape");break;default:c.stopPropagation()}}),$.browser.mozilla?this.$editor.bind("input mousedown mouseup",twttr.bind(this,this._keyEvents)):this.$editor.bind("keydown keyup paste change mousedown mouseup input",twttr.bind(this,this._keyEvents)),this._enableAutoGrow&&this.$editor.bind("change cut keyup paste",twttr.bind(this,this._tryAutoGrow))},_keyEvents:function(a){!$.browser.webkit||a.type!="paste"&&a.type!="keydown"?this._inputCallback(a):setTimeout(twttr.bind(this,function(){this._inputCallback(a)}),0)},_inputCallback:function(a){this.trigger("didChangeContent",[this.content(),a])}}),twttr.klass("twttr.components.RichEditor",function(a,c){function e(a){var b=d.$editor.offset();d.$proxy=$(a.contentWindow.document.body),twttr.i18n&&twttr.i18n.rtl&&(d.$proxy[0].dir="rtl"),d.$proxy.append("<style>"+d.constructor.css+"</style>"),d._$proxyWrapper=$('<pre class="proxy-wrapper"></pre>').appendTo(d.$proxy),d._applyStyles(),d._queue.flush()}var d=this;this.supr=twttr.components.Editor,this.supr.apply(this,arguments),this._queue=new b.util.WaitQueue,this._$proxyWrapper={length:0},this.$iframe=$('<iframe allowtransparency="false" src="../../receiver.html" frameborder="0" tabindex="-1" role="presentation" scrolling="no"/>'),this.$iframe.insertBefore(this.$editor),this.$iframe.bind("load",function(){e(this)}),this.$iframe.addClass("proxy-editor"),this.$container.addClass("rich-editor"),this._tweetBoxHeight=0,$('<div class="tweet-meta"><div class="tweetbox-media-icon"/></div>').appendTo(this.$container),this.$mediaicon=this.$container.find(".tweetbox-media-icon"),this._foundMedia=!1,this.bind("didChangeContent",twttr.bind(this,this._proxyLinkify))}).subclassOf(twttr.components.Editor).statics({css:'body {        margin: 0;        width: 482px;        height: 56px;        color: #222;        overflow-x: hidden;        overflow-y: hidden;      }      .proxy-wrapper {        margin: 0;        padding: 0;        font: 14px/18px "Helvetica Neue", Arial, sans-serif;        white-space: pre-wrap;        word-wrap: break-word;      }      a {        color: #0084b4;        text-decoration: none;      }      a.twitter-timeline-link {        background-color: #bedff8;        -moz-border-radius: 5px;        -webkit-border-radius: 5px;        border-radius: 5px;      }      em {        font-style: normal;        display: inline-block;        width: 2px;      }'}).methods({_applyStyles:function(){this.$editor.css("min-height",this.css.height),this.$proxy.css("width",this.css.width),this.$iframe.css("width",this.css.width)},_growTweetBox:function(){var a=this._$proxyWrapper.height();$.browser.webkit&&(a+=10),a!==this._tweetBoxHeight&&(this.$editor.height(a),this.$iframe.height(a),this.trigger("heightChange")),this._tweetBoxHeight=a},_replaceAndys:function(a){return a.replace(/&amp;/g,"&")},_proxyLinkify:function(){this._queue.add(twttr.bind(this,function(){var a=b.util.linkify(this._replaceAndys(h(this.content())))+"<em>&nbsp;</em>";this._$proxyWrapper.html(a),this._growTweetBox(),this._showMediaIcon()}))},_showMediaIcon:function(){var a=twttr.txt.extractUrls(this.content()),b;for(var c=0;c<a.length;c++){var d=a[c];b=twttr.media.matchInstance(d);if(b){var e=twttr.is.fn(b.icon)?b.icon():b.icon;this.$mediaicon.addClass(e),this._foundMedia=!0;return}}!b&&this._foundMedia&&(this.$mediaicon[0].className="tweetbox-media-icon",this._foundMedia=!1)},reset:function(){this.supr.prototype.reset.apply(this,arguments),this._$proxyWrapper.html(""),this._applyStyles()}}),a(twttr.components.Editor)})}),provide("TweetBox",function(a){using("_","util","constants","components/TweetboxAutocomplete","mixins/urlShortener","mixins/photoBox").as(function(b,_){var c={condensed:!0,condensedContent:"",closeAfterSuccess:!0,defaultContent:!1,width:560,height:56,autocomplete:!0,autocompleteSuggestionLimit:10,displayError:!0,template:{show_geo:!0,show_title:!0,title:_("What’s happening?"),button_text:_("Tweet"),api_url:window.location.protocol+"//"+twttr.domains.upload},enableDraft:!1,statusAction:"update",draggable:!0},d=1,e={},f={update:"Status",reply:"Status",dm:"DirectMessage",directMessage:"DirectMessage"},g=/^(?:d|m|dm)\s+[@＠]?([a-zA-Z0-9_]{1,20}) /;twttr.klass("twttr.TweetBox",function(a,f){var g=this;c.template.title=_("What’s happening?"),c.template.button_text=_("Tweet"),c.template.post_authenticity_token=twttr.API.getConfig().postAuthenticityToken,this.options=twttr.merge({},c,f||{},!0),this.places=[],this._explainLinkShortening=twttr.is.def(this.options.explainLinkShortening)?this.options.explainLinkShortening:!0,this._isButtonEnabled=!1,this._hasWarned=!0,this._hasSuperWarned=!1,this._hasNoWarned=!1;var i={defaultContent:this._getDraftTweet()||this.options.condensedContent||this.options.defaultContent,width:this.options.width,height:this.options.height,enableAutoGrow:this.options.enableAutoGrow||!1};this.id=this.options.id||d++,e[this.id]=this,this.$container=$(a),this.view=(new twttr.views.TweetBox(this.options.template)).render(a,"append");var j=twttr.decider.isAvailable("phoenix_tweetbox_talon")&&twttr.decider.isAvailable("phoenix_rich_editor")&&!$.browser.msie,k=j?"RichEditor":"Editor";this.editor=new twttr.components[k](this.$container.find(".text-area-editor"),i),this.$counter=this.$find(".tweet-counter"),this.$tweetButton=this.$container.find(".tweet-button"),this.$title=this.$container.find("h2"),this.options.autocomplete&&(this.autocomplete=new b.components.TweetboxAutocomplete(this)),this._updateDraftTweet=twttr.bind(this,this._updateDraftTweet),!this.options.condensed||!this.options.condensedContent&&this.options.defaultContent||i.defaultContent!==(this.options.condensedContent||this.options.defaultContent)?this.open():this.editor.blur(),twttr.is.def(this.options.dynamicTitle)&&(this._dynamicTitle=this.options.dynamicTitle),this._registerUrlShortenerEvents(),this.registerEvents(),this._initPhotobox(),this._toggleCounterState(null,i.defaultContent||"")}).mixin(twttr.mixins.i18nTweetBox,twttr.mixins.urlShortener,twttr.mixins.photoBox).statics({focus:function(a){e[a].editor.focus()},_getDefaultContentForReply:function(a,b,c){var d=!1,e=a?a.find("a.twitter-atreply"):[],f="@"+b+" ";if(e.length){d=!0;var g=[];e.each(function(a,d){var e=$(this).text().replace("@","");!e.match(new RegExp("^"+b+"$"),"i")&&!twttr.is.inArray(e,g)&&!e.match(new RegExp("^"+c+"$","i"))&&g.push(e)}),g.unshift(b),f=twttr.map(g,function(a){return"@"+a+" "}).join("")}return{defaultContent:f,multiple:d}}}).statics(twttr.EventProvider).methods(twttr.EventProvider).methods({$find:function(a){return this.$container.find(a)},_locked:!1,_dynamicTitle:!0,lock:function(){this._locked=!0},unlock:function(){this._locked=!1},focus:function(){this.editor.focus(),this.editor.moveCursorToEnd()},_getTextLength:function(a){var c=b.util.displayLength(a);return c},_noPhotosPresent:function(){return!this.turkey||this.turkey&&!this.turkey.hasItems()},_toggleButtonState:function(a,b){var c=this._getTextLength(b),d=this.options.defaultContent||"";(c>140||$.trim(this.getTweetContent())==$.trim(d))&&this._noPhotosPresent()?this._isButtonEnabled&&(this._isButtonEnabled=!1,this.$tweetButton.addClass("disabled").removeClass("primary-btn")):this._isButtonEnabled||(this._isButtonEnabled=!0,this.$tweetButton.removeClass("disabled").addClass("primary-btn"))},_toggleCounterState:function(a,b){var c=this._getTextLength(b);this._updateCounter(c),c>120&&c<130?this._hasWarned||(this._hasWarned=!0,this._hasSuperWarned=!1,this._hasNoWarned=!1,this.$counter.addClass("warn").removeClass("superwarn")):c>=130?this._hasSuperWarned||(this._hasSuperWarned=!0,this._hasWarned=!1,this._hasNoWarned=!1,this.$counter.addClass("superwarn").removeClass("warn")):this._hasNoWarned||(this._hasNoWarned=!0,this._hasSuperWarned=!1,this._hasWarned=!1,this.$counter.removeClass("superwarn").removeClass("warn"))},_updateCounter:function(a){this.$counter.val(140-a)},open:function(){var a=this;if(this._isOpen)return;this._isOpen=!0,this.$container.find(".tweet-box").removeClass("condensed");var b=this._getDraftTweet();b?this.setTweetContent(b):twttr.is.string(this.options.defaultContent)&&this.setTweetContent(this.options.defaultContent),this.editor.bind("didChangeContent",this._updateDraftTweet),this.trigger("open");var c={};twttr.audit.currentPage()=="profile"&&(c.profile_id=twttr.profileUser.id);var d=a.options.statusAction==="directMessage"||a.editor.content().match(g);d||(twttr.profileUser&&twttr.profileUser.verified&&twttr.app.currentPageName()=="profile"&&twttr.abdecider.track("replies_stripped_on_verified_profiles_222","compose_tweet"),trackClient({component:"tweetbox",action:"compose_tweet"},c))},close:function(){if(!this._isOpen)return;this.options.condensed&&this.$container.find(".tweet-box").addClass("condensed"),this.editor.unbind("didChangeContent",this._updateDraftTweet),this.turkey&&this.turkey.reset(),this.trigger("close"),this._isOpen=!1},disable:function(){this.close(),this.editor.$editor.val(""),this.editor.$editor.bind("keypress",function(a){a.preventDefault()})},getTweetContent:function(){return this.editor.content()},setTweetContent:function(a){this._setDraftTweet(a),this.editor.setContent(a)},resetTweetContent:function(){this.editor.reset(),this._setDraftTweet(null),this.$container.find("textarea").val(this.options.condensedContent)},_tweet:function(){this.trigger("readyToTweet"),this.tweet()},tweet:function(){var a=this._shouldTweet();a.shouldTweet&&(this.setTweetBoxToBusyState(),this._setDraftTweet(null),this.trigger("sendingTweet",{action:this.options.statusAction}),this.makeRequest.apply(this,a.args)),a.msg&&(this.options.displayError&&twttr.showError(a.msg),this.trigger("error",[a.msg])),a.redirectToProfile&&twttr.router.routeTo(twttr.router.profilePath({screen_name:a.redirectToProfile}))},_getDraftTweet:function(){return this.options.enableDraft?twttr.app.caches.draftTweets.get(this.options.enableDraft===!0?window.location.href:this.options.enableDraft):null},_setDraftTweet:function(a){if(this.options.enableDraft){var b=this.options.enableDraft===!0?window.location.href:this.options.enableDraft;a?twttr.app.caches.draftTweets.set(b,a,864e5):twttr.app.caches.draftTweets.remove(b)}},_updateDraftTweet:function(){this._setDraftTweet(this.getTweetContent())},_shouldTweet:function(){var a=[],c=this.options.statusAction,d=f[c],e=$.trim(this.editor.content());if((this.options.condensedContent&&e==$.trim(this.options.condensedContent)||this.options.defaultContent&&e==$.trim(this.options.defaultContent))&&this._noPhotosPresent())return{shouldTweet:!1};if(this._sendingStatus||this._locked)return{shouldTweet:!1};var g=this.turkey&&this.turkey.hasItems();if(c==="update"&&this.editor.content().match(b.constants.regexps.usernameWithSpace)&&!g){var i=RegExp.$1;return this.$container.find(".tweet-spinner").show(),this.$container.find(".tweet-counter").hide(),{shouldTweet:!1,redirectToProfile:i}}if(this._getTextLength(e)>140)return{shouldTweet:!1,msg:(new twttr.views.TooLongErrorMessage({is_dm:c==="directMessage"})).html()};if(this._getTextLength(e)===0)return{shouldTweet:!1};if(c=="directMessage")if(!twttr.is.def(this.options.data.getUser())||twttr.is.blank(this.options.data.getUser()))return{shouldTweet:!1,msg:_("Whoops! You forgot to type in a username.")};var j=this,k=this._getRequestOptions();this.options.inReplyToStatusId&&twttr.merge(k,{in_reply_to_status_id:this.options.inReplyToStatusId});if(twttr.geo.location){var l=twttr.geo.location.isLocationOn()&&twttr.geo.location.cityId();l&&(k.place_id=l)}twttr.decider.isAvailable("geo_place_entities_write")&&this.places.length&&(k.places=JSON.stringify(this.places)),k.timeout=function(a){a.retry()};switch(c){case"update":a=[this.getTweetContent(),k];break;case"reply":k.impression_id=this.options.data.impressionId,a=[this.options.data.tweetId,this.getTweetContent(),k];break;case"directMessage":c="send",a=[this.options.data.getUser(),this.getTweetContent(),k]}return{shouldTweet:!0,args:[d,c,a]}},setTweetBoxToBusyState:function(){this.$container.find(".tweetbox-counter-tipsy").hide(),this.$container.find(".tweet-spinner").show(),this.$container.find(".tweet-counter").hide(),this.$tweetButton.addClass("disabled")},unSetTweetBoxToBusyState:function(){this.$container.find(".tweet-spinner").hide(),this.$container.find(".tweet-counter").show(),this.$container.find(".tweetbox-counter-tipsy").show(),this.$tweetButton.removeClass("disabled")},_getRequestOptions:function(){var a=this,b=a.options.statusAction==="directMessage"||a.editor.content().match(g);return{complete:function(){a.unSetTweetBoxToBusyState(),a._sendingStatus=!1},success:function(c,d){var e="";a.options.closeAfterSuccess&&a.close(),b||(a.trigger("tweetSuccess",[c,a.options.statusAction]),a.constructor.trigger("tweetSuccess",[c,a.options.statusAction]),e=a.options.inReplyToStatusId||c.text.indexOf("@")==0?"send_reply":"send_tweet"),a.editor.reset(),a.places=[],delete a.options.inReplyToStatusId;var f={item_ids:[c.id]};twttr.profileUser&&(f.profile_id=twttr.profileUser.id);var g=a.options.id||"unspecified-tweetbox";g.indexOf("send-message-box")!=-1&&(g="send-message-box"),b?(a.trigger("dmSuccess",[c,a.options.statusAction]),trackClient({component:"direct_message",action:"send_dm"},f)):trackClient({component:g,action:e},f),a.options.condensed&&a.$container.find(".tweet-box").addClass("condensed"),a.resetTweetContent()},error:function(c){a.$tweetButton.removeClass("disabled");if(twttr.isT1&&b)var d=twttr.errors.errorCodeFromResponse(c);else var d=twttr.helpers.showErrorFromResponse(c,b?"dm":"tweet");a.trigger(b?"dmError":"tweetError",[d])}}},makeRequest:function(a,b,c){this._sendingStatus=!0,twttr.API[a][b].apply(twttr.API[a],c)},destroy:function(){this.trigger("destroy")},collapseOnBlur:function(){if(this.preventBlur)return;var a=this.editor.content(),b=a===this.options.defaultContent||a==="";b&&this._noPhotosPresent()&&(this.close(),this.editor.setContent(this.options.condensedContent||this.options.defaultContent||""),$(document).unbind("click.tweetbox"))},registerEvents:function(){var a=this;this.$tweetButton.addClass("disabled"),this.editor.bind("focus",function(b){setTimeout(function(){a.open(),twttr.geo.location&&twttr.geo.location.onFocusTweetBox(a.$container)},0)}),twttr.isT1&&(this.editor.bind("blur",function(){a.collapseOnBlur()}),this.editor.bind("focus",function(){$(document).unbind("click.tweetbox"),$(document).bind("click.tweetbox",function(b){$(b.target).is(".tweet-box, .tweet-box *")||a.collapseOnBlur()})}),this.$container.bind("mouseenter",function(){a.preventBlur=!0}),this.$container.bind("mouseleave",function(){a.preventBlur=!1})),this.editor.bind("didChangeContent",twttr.bind(this,this._toggleButtonState)),this.editor.bind("didChangeContent",twttr.bind(this,this._toggleCounterState)),this.registerTextDirEvents(),this.editor.bind("blurFromTab",function(b,c){twttr.components.Autocomplete._isCompletionsOpen||a.$container.find(".tweet-button").focus()}),this.editor.bind("blurFromEscape",function(b){twttr.components.Autocomplete._isCompletionsOpen||(a.preventBlur=!1,a.editor.blur(),a.trigger("blurFromEscape"))}),!this.options.condensedContent&&this.options.defaultContent.length>0&&(this.editor.trigger("didChangeContent",[this.options.defaultContent]),setTimeout(twttr.bind(this,function(){this.open(),this.focus(),this.editor.$editor.trigger(jQuery.Event("keyup"))}),0)),this.$tweetButton.bind("keypress",twttr.bind(this,function(a){a.stopPropagation();if(a.keyCode===b.constants.keyCodes.enter||a.charCode===b.constants.charCodes.space)return this._tweet(),a.preventDefault(),this.blur(),!1})).bind("click",function(b){a._tweet(),this.blur(),b.preventDefault()});var d,e,f,i;if(this.options.statusAction=="update"||this.options.statusAction=="reply")this.bind("titleChanged",function(b,c,d){a.$tweetButton[0].childNodes[0].nodeValue=d=="dm"?_("Send Message"):_("Tweet")}),this._dynamicTitle&&this.editor.bind("didChangeContent",twttr.bind(this,function(a,j){if(j.match(g)){if(!d){d=!0,e=f=i=!1;var k=RegExp.$1,l=_("Message {{username}}",{username:k});this.$title.html(l),this.trigger("titleChanged",[l,"dm"])}}else if(this.options.statusAction=="reply"&&j.match(new RegExp("[@＠]"+this.options.data.screenName+" "))){if(!e){e=!0,d=f=i=!1;var l=_("Reply to @{{username}}",{username:this.options.data.screenName});this.$title.html(l),this.trigger("titleChanged",[l,"reply"])}}else if(j.match(b.constants.regexps.usernameWithAt)){if(!f){f=!0,d=e=i=!1;var l=_("Tweet to {{username}}",{username:RegExp.$1});this.$title.html(l),this.trigger("titleChanged",[l,"mention"])}}else i||(i=!0,d=e=f=!1,this.$title.html(c.template.title),this.trigger("titleChanged",[c.template.title,"update"]))}));twttr.geo.location&&twttr.geo.location.onRegisterTweetBox(this.$container,this.options.whenGeoPopupOpens),this.trigger("ready")}}),a(twttr.TweetBox)})}),provide("components/TweetboxAutocomplete",function(a){using().as(function(){twttr.klass("twttr.components.TweetboxAutocomplete").subclassOf(twttr.components.Base).initializer(function(a){var b=this;this.tweetbox=a,this.places=a.places,this.autocomplete=new twttr.components.Autocomplete({input:a.editor.$editor,textarea:!0,limit:a.options.autocompleteSuggestionLimit}),this.autocomplete.bind("select",function(a){b.tweetbox.editor.trigger("didChangeContent",[b.tweetbox.editor.content()])}),this.tweetbox.editor.bind("heightChange",twttr.bind(this.autocomplete,this.autocomplete.position)),a.bind("open",function(a){twttr.components.Autocomplete.getAutocompletedUsers(),b.autocomplete.position()}),a.$container.delegate(".geo-insert-place-button","click",twttr.bind(this,function(a){return this.autocomplete.insertPlace(),!1}))}),a(twttr.components.TweetboxAutocomplete)})}),provide("shortcuts_t1",function(a){using("_","constants").as(function(b,_){twttr.shortcuts={delegateToApp:function(){$(document).bind("keypress",function(a){return twttr.app.currentPage().send("onkeypress",[a])}),$(document).bind("keyup",function(a){return twttr.app.currentPage().send("onkeyup",[a])}),$(document).bind("keydown",function(a){return twttr.app.currentPage().send("onkeydown",[a])})},focusSearchBox:function(a){a.preventDefault(),$("#search-query").focus(),scribble("search-box-focus",{input:"keyboard"})},initCombos:function(){twttr.shortcuts.currentKey=null;var a=[],b={65:"a",67:"c",68:"d",71:"g",76:"l",85:"u",82:"r",83:"s",80:"p",72:"h",70:"f",86:"v",88:"x",77:"m"};$(document).keydown(function(a){if(twttr.helpers.isModifier(a))return;twttr.shortcuts.verify(a)&&$(a.target).is(":not(input)")?a.preventDefault():twttr.shortcuts.currentKey=null}),twttr.augmentString("twttr.shortcuts.combo",function(b,c){a.push({keys:b,fn:c})}),twttr.augmentString("twttr.shortcuts.verify",function(c){var d=c.keyCode,e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(b[d]===g.keys[0]){e=!0,twttr.shortcuts.currentKey=b[d];break}if(b[d]===g.keys[1]&&twttr.shortcuts.currentKey===g.keys[0]){e=!0,twttr.shortcuts.currentKey=null,g.fn();break}}return e}),twttr.shortcuts.combo(["g","u"],function(){scribble("open-goto-user-dialog",{input:"keyboard"}),twttr.components.Autocomplete.getAutocompletedUsers(),twttr.dialogs.goToUser().open()});if(twttr.loggedIn){function c(){scribble("switch-stream",{input:"keyboard",toStream:"connect"}),twttr.router.routeTo(twttr.router.connectPath())}function d(){scribble("switch-stream",{input:"keyboard",toStream:"activity"}),twttr.router.routeTo(twttr.router.networkActivityPath())}function e(){scribble("switch-stream",{input:"keyboard",toStream:"mentions"}),twttr.router.routeTo(twttr.router.mentionsPath())}twttr.decider.isActivityEnabled()?(twttr.shortcuts.combo(["g","a"],d),twttr.shortcuts.combo(["g","c"],c),twttr.shortcuts.combo(["g","r"],e)):twttr.shortcuts.combo(["g","r"],e),twttr.shortcuts.combo(["g","d"],function(){scribble("switch-page",{input:"keyboard",toPage:"discover"}),twttr.router.routeTo(twttr.router.discoverPath())}),twttr.shortcuts.combo(["g","l"],function(){scribble("switch-stream",{input:"keyboard",toPage:"lists"}),twttr.router.routeTo(twttr.router.listsPath())}),twttr.shortcuts.combo(["g","p"],function(){scribble("switch-page",{input:"keyboard",toPage:"profile"}),twttr.router.routeTo(twttr.router.profilePath({screen_name:twttr.currentUser.screenName}))}),twttr.shortcuts.combo(["g","m"],function(){scribble("switch-page",{input:"keyboard",toPage:"messages"}),twttr.dialogs.directMessage({origin:"message-dialog-hotkey"}).open().switchToConversationListView()}),twttr.shortcuts.combo(["g","h"],function(){scribble("switch-stream",{input:"keyboard",toStream:"home"}),twttr.router.routeTo(twttr.router.homePath())}),twttr.shortcuts.combo(["g","f"],function(){scribble("switch-stream",{input:"keyboard",toStream:"favorites"}),twttr.router.routeTo(twttr.router.favoritesPath())}),twttr.shortcuts.combo(["g","s"],function(){scribble("switch-page",{input:"keyboard",toPage:"settings"}),twttr.router.routeTo(twttr.router.settingsPath())}),twttr.decider.isAvailable("phoenix_facets")&&(twttr.shortcuts.combo(["s","p"],function(){scribble("open-search-facets-dialog",{input:"keyboard",facetsType:"photos"}),twttr.dialogs.searchFacets("photos").open()}),twttr.shortcuts.combo(["s","v"],function(){scribble("open-search-photos-dialog",{input:"keyboard",facetsType:"videos"}),twttr.dialogs.searchFacets("videos").open()})),twttr.shortcuts.combo(["g","x"],function(){twttr.decider.isAvailable("muteUsers")&&(twttr.components.Autocomplete.getAutocompletedUsers(),(new twttr.widget.MuteDialog).open())})}},initSecrets:function(){twttr.loggedIn&&(twttr.provide("twttr.secrets"),twttr.secrets.secretSauce=function(a,b){$(document).bind("keydown",b.split("->"),function(b){twttr.decider.isAvailable(a)&&(twttr.secrets[a]=!twttr.secrets[a])})},twttr.secrets.secretSauce("hideMentions","x->o"),twttr.secrets.secretSauce("allMedia","x->i"))},openDialogs:function(a){if(!twttr.loggedIn||twttr.shortcuts.currentKey)return;if(twttr.helpers.isModifier(a)||$(a.target).is("input"))return;a.keyCode===77?(twttr.dialogs.directMessage({origin:"message-dialog-hotkey"}).open().switchToNewMessageView(),scribble("dialog-direct-message",{input:"keyboard"}),a.preventDefault()):a.keyCode===78&&((new twttr.widget.TweetDialog({draggable:!0,template:{title:_("What’s happening?")},origin:"new-tweet-hotkey"})).open().focus(),scribble("dialog-new-tweet",{input:"keyboard"}),a.preventDefault())},closeDialogs:function(a){a.keyCode===b.constants.keyCodes.escape&&twttr.widget.Dialog.currentModal&&twttr.widget.Dialog.currentModal.options.closable&&(twttr.widget.Dialog.close(),a.stopPropagation(),a.preventDefault())},openKeyboardDialog:function(a){a.which===b.constants.charCodes.questionMark&&(a.preventDefault(),twttr.dialogs.keyboardShortcuts().toggle(),scribble("shortcut-dialog",{input:"keyboard"}))}},twttr.app.waitForSignal("init",function(){$(document).bind("keydown",twttr.shortcuts.openDialogs),$(document).bind("keydown",twttr.shortcuts.closeDialogs),$(document).bind("keypress","/",twttr.shortcuts.focusSearchBox),$(document).bind("keypress",twttr.shortcuts.openKeyboardDialog),twttr.shortcuts.delegateToApp(),twttr.shortcuts.initCombos(),twttr.shortcuts.initSecrets(),$("a.js-keyboard-shortcut-trigger").live("click",function(a){a.preventDefault(),twttr.dialogs.keyboardShortcuts().open()})}),a(twttr.shortcuts)})}),provide("stork",function(a){using("util").as(function(b){function c(a){return function(b){if(twttr.stork.isEnabled())return a("stork."+b)}}twttr.provide("twttr.stork",twttr.merge({init:function(){twttr.isT1&&twttr.decider.isAvailable("stork_guidance")&&(this.EXPIRE_TIME=12096e5,twttr.caches.User.set("stork.enabled",!0,this.EXPIRE_TIME),$.each(twttr.stork.STORKS,function(a,b){twttr.caches.User.set("stork."+b.counter,0,twttr.stork.EXPIRE_TIME)}))},STORKS:[{id:"expand_photo",counter:"expand_tweet",icon:"stork-help",matcher:function(a){return a.find(".js-sm-icon.sm-image").length>0},promptHtml:_("There’s a photo in this Tweet. Check it out."),explainHtml:_("<p>You’ll also find music, videos, and replies inside Tweets, so keep expanding them.</p>"),promptHighlight:".original-tweet .js-view-details",explainHighlight:"remove",explainOn:"expanded.tweet",dismissOn:"collapsed.tweet"},{id:"expand_video",counter:"expand_tweet",icon:"stork-help",matcher:function(a){return a.find(".js-sm-icon.sm-video").length>0},promptHtml:_("There’s a video in this Tweet. Check it out."),explainHtml:_("You’ll also find photos, music, and replies inside Tweets, so keep expanding them."),promptHighlight:".original-tweet .js-view-details",explainHighlight:"remove",explainOn:"expanded.tweet",dismissOn:"collapsed.tweet"},{id:"retweet_profile",counter:"retweet_profile",icon:"stork-help",matcher:function(a){return a.find("[data-retweet-id]").length>0},explainHtml:_("<p>A <strong>retweet</strong> is a Tweet that was shared by someone you’re following.</p> <p>The author of that Tweet may be someone you don’t follow, so it’s a great way to check out somebody new.</p>"),explainHighlight:".stream-item-footer .context .js-retweet-text",explainOn:"expanded.tweet",dismissOn:"profile_popup.tweet collapsed.tweet"},{id:"hashtag",counter:"hashtag",icon:"stork-help",matcher:function(a){return a.find(".original-tweet .js-tweet-text .twitter-hashtag").length>0},explainHtml:_("<p>The # symbol makes this word a <strong>hashtag</strong>. People add hashtags to their Tweets to give them topics.</p> <p>Click on it to find other Tweets with the same hashtag.</p>"),explainHighlight:".original-tweet .js-tweet-text .twitter-hashtag",explainOn:"expanded.tweet",dismissOn:{selector:".js-tweet-text .twitter-hashtag",event:"click"}},{id:"mention",counter:"mention",icon:"stork-help",matcher:function(a){return a.find(".original-tweet .js-tweet-text .twitter-atreply").length>0},explainHtml:_("<p>The @ symbol is used to <strong>mention</strong> another person by username. Mentions call attention to someone and can start a conversation.</p> <p>Click on it to see that user’s profile.</p>"),explainHighlight:".original-tweet .js-tweet-text .twitter-atreply",explainOn:"expanded.tweet",dismissOn:{selector:".js-tweet-text .twitter-atreply",event:"click"}}],getValue:c(function(a){return twttr.caches.User.get(a)||0}),incrValue:c(function(a){var b=twttr.caches.User.get(a)||0;twttr.caches.User.set(a,b+1,twttr.stork.EXPIRE_TIME)}),isEnabled:function(){return twttr.isT1&&twttr.caches.User.get("stork.enabled")},storkifyTweets:function(a){if(!this.isEnabled())return;var b=[];$.each(twttr.stork.STORKS,function(a,c){twttr.stork.getValue(c.counter)==0&&b.push(c)});var c=a.find(".js-stream-item").slice(0,10),d=!!c.find(".js-pip").length;if(d)return;c.each(function(a,c){var d=$(c),e=!1;if(d.attr("data-promoted")||d.find("[data-promoted]").length>0)return;$.each(b,function(a,b){if(b.matcher(d)){var c=new twttr.components.StorkPip(d,b);return e=!0,!1}});if(e)return!1})}},twttr.EventProvider)),a(twttr.stork)})}),provide("streams/ActivityStream",function(a){using().as(function(b){twttr.stream("twttr.streams.ActivityStream",function(a,b){twttr.streams.Stream.apply(this,arguments),this.page=0,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.registerTweetActionEvents(),this.registerUserActionEvents(),this.updateI18nDisplay(),this.initComponentEvents()}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.componentEvents,twttr.mixins.SinceMaxPagination,twttr.mixins.PollingStream,twttr.mixins.tweetActionable,twttr.mixins.i18nTweet,twttr.mixins.userActionable,twttr.mixins.activityStreamEvents,twttr.mixins.streamablePageWithInlineMedia).deciderKey(function(){return twttr.decider.isActivityEnabled()}).pollingDeciderKey(function(){return twttr.decider.isActivityEnabled()}).methods({PAGE_SIZE:20,timeouts:{ACTIVE:15e3,INACTIVE:9e4},itemViewClass:"ActivityItem",streamItemType:"activity",additionalStreamItemClass:function(a){return"js-activity js-activity-"+a.event},_idForItem:function(a,b){return b==="first"?a.maxPosition:a.minPosition},_pollShouldFetch:function(){var a=$(".stream-container").offset().top,b=$(window).scrollTop();return b<=a},streamItemId:function(a){return[a.minPosition,a.maxPosition,a.event,a.timestamp].join("_")},update:function(){},beforeSwitchingAway:function(){this.stopPeriodicFetcher()},afterFirstSwitchingTo:function(a){var b=this;this.startPeriodicFetcher(),this._loadedStreamOnce=!0,this.isLoadingMore(),this.fetcher(!0,function(c,d){c.render(),c.doneLoadingMore(),d!==twttr.streams.SUCCESS?(b._scribeResults("error",[],{status_code:502}),b._showError(d)):b.fetchUntilScreenIsFull(),a?a():$.noop}),twttr.isT1&&this.addInlineMediaIcons(this.$node)},afterSwitchingToAgain:function(a){this.fetcher(twttr.bind(this,function(b){var c=this.newItemsCount;this.newItemsCount>0&&this.showNewItems(this.newItemsCount),this.restartFetcher(),a?a():$.noop}))},showNewItems:function(a,b){this._showNewItems()},_showNewItems:function(a){var b=this.$streamItems();this.beforeShowNewItems(),this.newItemsCount>this.NEW_ITEMS_COUNT_MAX&&(b.empty(),this.items=this.items.slice(0,this.NEW_ITEMS_COUNT_CUTOFF),this.newItemsCount=this.NEW_ITEMS_COUNT_CUTOFF);var c=this.items.slice(0,this.newItemsCount),d=this._renderItems(c);!a&&this.newItemsCount>0&&this.onGotNewItems(c),a&&this.onGotInitialResults(this.items);var e=d.children();e.hide(),b.prepend(d),e.fadeIn(),this.newItemsCount=0,this.onShowNewItems(d),this.trigger("newItemsCountChanged",[0])},onShowNewItems:function(a){twttr.isT1&&this.addInlineMediaIcons(a),twttr.streams.Stream.prototype.onShowNewItems.apply(this,arguments),this.updateI18nDisplay(),this.trigger("onShowNewItems",a)},onShowOldItems:function(a){twttr.isT1&&this.addInlineMediaIcons(a),twttr.streams.Stream.prototype.onShowOldItems.apply(this,arguments),this.updateI18nDisplay(),this.trigger("onShowOldItems",a)},unshift:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));for(var b=0,c=a.length;b<c;++b)a[b].sync("for_stream",this.constructor.activityType);twttr.streams.Stream.prototype.unshift.call(this,a)},push:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));for(var b=0,c=a.length;b<c;++b)a[b].sync("for_stream",this.constructor.activityType);twttr.streams.Stream.prototype.push.call(this,a)},_getStreamErrorComponent:function(a){return a===twttr.streams.PROTECTED?new twttr.components.ProtectedUser({screen_name:this.params.screenName}):twttr.streams.Stream.prototype._getStreamErrorComponent.apply(this,arguments)},_scribeResults:function(a,b,c){var d=[],e=[];twttr.each(b,function(a){var b=[a.minPosition,a.maxPosition,a.event,a.timestamp].join("_");e.push(b),d.push(a.position||a.minPosition)});if(a=="error"||a=="initial"&&!d.length){var f={item_count:0,event_value:0,cursor_or_page:this._sinceId,referring_event:a};a=="error"&&c&&c.status_code&&(f.status_code=c.status_code),this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},f)}else a!="initial"&&this.scribbler.scribe({component:"stream",action:a},{item_count:d.length,cursor_or_page:this._sinceId});d.length&&this.scribbler.scribe({component:"stream",action:"results"},{item_ids:d,item_names:e,item_count:d.length,event_value:d.length,cursor_or_page:this._sinceId,referring_event:a})},showActivitySupplements:function(a){var b=a.closest(".stream-item");b.find(".hidden-supplement").removeClass("hidden-supplement").addClass("hidden-supplement-expanded"),b.find(".sub-stream-item-hidden").removeClass("sub-stream-item-hidden").addClass("sub-stream-item-showing"),b.find(".view-all-supplements").removeClass("show").addClass("hide")},hideActivitySupplements:function(a){var b=a.closest(".stream-item");b.find(".hidden-supplement-expanded").removeClass("hidden-supplement-expanded").addClass("hidden-supplement"),b.find(".sub-stream-item-showing").removeClass("sub-stream-item-showing").addClass("sub-stream-item-hidden"),b.find(".view-all-supplements").removeClass("hide").addClass("show")},oldShowActivitySupplements:function(a){var b=a.closest(".stream-item"),c=b.find(".sub-stream-item"),d=c.filter(".sub-stream-item-hidden"),e=b.find(".stream-item-activity"),f=c.length,g=d.length;a.removeClass("show").addClass("hide"),b.addClass("parent");var i;for(var j=f-g;j<f;++j)i=b.clone(),i.find(".view-all-supplements").remove(),i.addClass("expanded"),i.find(".activity-supplement > div").each(function(a,b){var c=$(b);a!=j?c.remove():c.removeClass("sub-stream-item-hidden")}),b.after(i)},oldHideActivitySupplements:function(a){var b=a.closest(".stream-item"),c=b.find(".stream-item-activity");b.removeClass("parent"),b.nextUntil(".stream-item:not('.expanded')").remove(),a.removeClass("hide").addClass("show")}}).click({".stream-item-activity .activity-count":function(a,b){var c=b.closest(".stream-item");return c.find(".sub-stream-item-hidden").removeClass("sub-stream-item-hidden"),c.find(".activity-secondary-supplement").show(),b.find("span").unwrap(),!1},".stream-item-activity-network .stream-item-activity-header":function(a,b){if(!twttr.isT1)return;var c=b.find(".view-all-supplements");c.get(0)&&(c.hasClass("show")?this.showActivitySupplements(c):this.hideActivitySupplements(c))},"div.js-activity .view-all-supplements":function(a,b){return twttr.isT1?b.hasClass("show")?this.showActivitySupplements(b):this.hideActivitySupplements(b):b.hasClass("show")?this.oldShowActivitySupplements(b):this.oldHideActivitySupplements(b),a.stopPropagation(),a.preventDefault(),!1},".js-activity .hidden-supplement":function(a,b){this.showActivitySupplements(b)}}),a(twttr.streams.ActivityStream)})}),provide("streams/ActivityByUserStream",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ActivityByUserStream").subclassOf(twttr.streams.ActivityStream).statics({activityType:"profile_activity"}).methods({update:function(a){twttr.API.User.find(this.params.screenName).activity(a)},_setTitle:function(a){a(_("Activity by {{screen_name}}",{screen_name:this.params.screenName}))}}),a(twttr.streams.ActivityByUserStream)})}),provide("streams/ActivityByNetworkStream",function(a){using("streams/ActivityStream").as(function(b){twttr.stream("twttr.streams.ActivityByNetworkStream").subclassOf(b.streams.ActivityStream).statics({activityType:"activity"}).methods({afterFirstSwitchingTo:function(){b.streams.ActivityStream.prototype.afterFirstSwitchingTo.apply(this,arguments)},onShowNewItems:function(a){b.streams.ActivityStream.prototype.onShowNewItems.apply(this,arguments)},onShowOldItems:function(a){b.streams.ActivityStream.prototype.onShowOldItems.apply(this,arguments)},_getEmptyStreamHtml:function(){return _("Favorites, follows, retweets, and more by people you follow will appear here.")},update:function(a){twttr.currentUser.networkActivity(a)},_setTitle:function(a){twttr.isT1?a(_("Activity")):a(_("Favorites, follows, retweets, and more by people you follow"))}}),a(twttr.streams.ActivityByNetworkStream)})}),provide("streams/ActivityOfMeStream",function(a){using().as(function(b){twttr.stream("twttr.streams.ActivityOfMeStream").subclassOf(twttr.streams.ActivityStream).mixin(twttr.mixins.newStreamItemsBar).statics({activityType:"your_activity"}).methods({itemForRender:function(a){return a.isMention?a.targetObjects.get(0):a.isReply?a.targets.get(0):a},additionalStreamItemClass:function(a){var b=twttr.streams.ActivityStream.prototype.additionalStreamItemClass.apply(this,arguments);return twttr.isT1&&(a.isReply||a.isMention)&&(b+=" expanding-stream-item"),b},itemViewClass:function(a){return a.isMention||a.isReply?twttr.views.StreamTweet:twttr.views.ActivityItem},_getEmptyStreamHtml:function(){return _("@mentions, favorites, follows and more on you and your Tweets will appear here.")},_afterItemsRendered:function(a){twttr.helpers.ellipsify(a.find(".activity-truncated-tweet .tweet-row"))},onShowNewItems:function(a){twttr.streams.ActivityStream.prototype.onShowNewItems.apply(this,arguments),this.$find(".js-new-tweets-bar").remove(),this._afterItemsRendered(a)},onShowOldItems:function(a){twttr.streams.ActivityStream.prototype.onShowOldItems.apply(this,arguments),this._afterItemsRendered(a)},update:function(a){!twttr.isT1&&$.cookie("should_filter_mentions")&&(a.filter=["mention","reply"]),twttr.currentUser.inboundActivity(a)},newStreamItemsBarPhrase:function(a){return a==1?_("1 New interaction"):_("{{count}} New interactions",{count:a})},_setTitle:function(a){twttr.isT1?a(_("Interactions")):a((new twttr.views.ActivityOfMeStreamTitle({})).html())},showNewItems:function(a,b){b?this.showNewStreamItemsBar(a):this._showNewItems()},afterSwitchingToAgain:function(a){twttr.streams.ActivityStream.prototype.afterSwitchingToAgain.apply(this,arguments),this.afterSwitchingTo()},afterFirstSwitchingTo:function(a){twttr.streams.ActivityStream.prototype.afterFirstSwitchingTo.apply(this,arguments);var b=this;this._attachedTweetBarEvent||(this._attachedTweetBarEvent=!0,this.dom().delegate(".js-new-tweets-bar","click",function(){b._showNewItems()})),this.afterSwitchingTo()},afterSwitchingTo:function(){this.updateI18nDisplay();var a=this,b=this.$node.closest(".stream-manager").find("#show_mentions_only"),c=!!$.cookie("should_filter_mentions");b.attr("checked",c?"checked":null),setTimeout(function(){b.one("click",function(){return c=!c,$.cookie("should_filter_mentions",c||null,{expires:3650}),b.attr("checked",c?"checked":null),trackClient({component:"mentions_filter",action:c?"select":"deselect"}),a.trigger("reloadCurrentStream",[a.constructor]),!1})},0)}}),a(twttr.streams.ActivityOfMeStream)})}),provide("streams/AllSubscriptions",function(a){using("_","streams/ListStream").as(function(b,_){twttr.stream("twttr.streams.AllSubscriptions",function(a,b){twttr.streams.ListStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"allLists",_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!1))},_setHeaderButton:function(a,b){twttr.helpers.isCurrentUser(b.screenName)&&a(new twttr.views.CreateListButton)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following any lists yet."):_("@{{screen_name}} isn't following any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"create follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"delete unfollow",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}),a()})}),provide("streams/AllSubscriptionsUser",function(a){using("_","streams/AllSubscriptions").as(function(b,_){twttr.stream("twttr.streams.AllSubscriptionsUser",function(a,b){twttr.streams.AllSubscriptions.apply(this,arguments)}).subclassOf(twttr.streams.AllSubscriptions).methods({_setViewToggler:function(a,b){a(new twttr.views.ProfileListsStreamViewToggler(!0,{screen_name:b.screenName}))}}),a()})}),provide("media",function(a){using().as(function(b){twttr.provide("twttr.media");var c={};twttr.aug(twttr.media,{match:function(a){if(twttr.is.nil(a))return;var b,d,e;return(d=c[a])?d.mediaType:($.each(twttr.media.types,function(b,f){if(!f.isEnabled())return!0;$.each(f.matchers,function(b,g){d=twttr.is.regex(g)?a.match(g):g(a);if(d)return c[a]={mediaType:f,matchLabel:b,match:RegExp.$1},e=f,!1});if(d)return!1}),e)},matchInstance:function(a,b){var d=this.match(a);if(d)return new d({url:a,matchLabel:c[a].matchLabel,slug:c[a].match,tweet:b})},expand:function(a,b){twttr.urlResolver.expand(a,function(a){b(a)})},mediaTypes:function(a,b){var c=[],d={},e=function(a,b){var e=twttr.media.match(b);if(e){d[b]=e;return}c.push(a)};$.each(a,e);if(c.length===0){b(d);return}twttr.media.expand(c,function(a){$.each(a,e),b(d)})},extractUrls:function(a){var b={};return a.entities?(a.entities.urls&&$.each(a.entities.urls,function(a,c){c.url&&(b[c.url]=c.expanded_url||c.url)}),twttr.media.extractMedia(a,b),b):($.each(twttr.txt.extractUrls(a.text),function(a,c){b[c]||(b[c]=c)}),b)},extractMedia:function(a,b){return a.entities&&a.entities.media&&$.each(a.entities.media,function(a,c){c.type&&c.type=="photo"&&c.display_url&&(b[c.display_url]=c.display_url)}),b},hasMedia:function(a){var b=a.entities&&a.entities.media&&a.entities.media.length,c=twttr.Cards.prototype.hasCards(a);return b||c},resolveImageUrl:function(a,b,c,d){var e=this;c=c||{};var f=twttr.media.matchInstance(a,c.tweet),g=c.error?c.error:$.noop;if(f&&f.getImageURL){if(c.filter&&c.filter(f)!==!0){g("your filter function filtered out this media");return}f.getImageURL(b,function(a){!twttr.is.nil(a)&&twttr.is.def(a)?c.success(a):g("getImageUrl did not return a resolvedURL")},d)}else g("url did not match any media types")},iconType:function(a,b){var d=new b({url:a,matchLabel:c[a].matchLabel,slug:c[a].match});return d.icon()},getViewMediaCookie:function(){var a=$.cookie("show_all_inline_media");return!!a},setViewMediaCookie:function(){$.cookie("show_all_inline_media",!0)},matchCache:c}),a(twttr.media)})}),provide("media/Iconifier",function(a){using("media").as(function(b){twttr.provide("twttr.media");var c=twttr.klass("twttr.media.Iconifier",function(a,b){var c=this,d=$(a);d.attr("media",!0),twttr.isT1&&c.iconifyGeo(d),twttr.decider.isAvailable("platform_enable_cards")&&(c.iconifyNativeMedia(d.find(".js-stream-tweet.has-native-media")),c.iconifyCards(d.find(".js-stream-tweet.has-cards:not(.iconified)"))),c.iconify(d.find(".js-stream-tweet a.twitter-timeline-link").get(),!0,b)});c.methods({expand:function(a,c){var d=[],e=[];$.each(a,function(a,b){d.push(b.href)}),b.media.expand(d,function(b){var d;$.each(a,function(a,c){d=b[c.href],d&&(c.setAttribute("data-ultimate-url",d),e.push(c))}),c(e)})},iconifyGeo:function(a){var b=this,c=a.find('div.js-stream-tweet[data-geo="true"] span.js-icon-container'),d=(new twttr.views.InlineMediaIcon({is_geo:!0})).html();c.each(function(){var a=$(this);a.append(d),b.updateHandleText(a,"geo")})},iconifyNativeMedia:function(a){var b=this;a.each(function(){var a=$(this),c=a.find("span.js-icon-container"),d="photo";b.updateHandleText(a,d),b.addSmallIcon(c,d,d),a.addClass("iconified")})},iconifyCards:function(a){var b=this;a.each(function(){var a=$(this),c=a.find("span.js-icon-container"),d=a.data("card-type");b.updateHandleText(a,d),b.addSmallIcon(c,d,d),a.addClass("iconified")})},preloadTwimgs:function(a){if(twttr.decider.isAvailable("phoenix_preload_twimgs")){var b=a.closest("div.js-stream-tweet").attr("data-item-id");twttr.API.Status.find(b,function(b){b.entities&&b.entities.media&&twttr.each(b.entities.media,function(b){var c=new Image;c.src=twttr.isSSL()?b.media_url_https:b.media_url,a.trigger("preloadedImage",[c])})})}},iconify:function(a,c,d){var e=this,f=[];$.each(a,function(a,d){var g=$(d),i=g.closest("div.js-stream-tweet"),j=d.getAttribute("data-ultimate-url")||d.getAttribute("data-expanded-url")||d.href,k=b.media.match(j);if(twttr.abdecider.choose("long_tweet_urls_248")==="long"){var l=j.replace(/^https?:\/\//,"");l.length>32&&(l=l.slice(0,29)+"..."),g.html(l)}if(k||!c){var m=0;switch(twttr.abdecider.choose("long_tweet_urls_2_259")){case"p25":m=.25;break;case"p50":m=.5;break;case"p75":m=.75;break;case"p100":m=1;break;case"control":default:m=0}if(m&&Math.random()<=m){var l=j.replace(/^https?:\/\//,"");l.length>32&&(l=l.slice(0,29)+"..."),g.attr("data-long_tweet_urls_2_259","expanded"),g.html(l)}}if(!k){f.push(d);return}var n=!!g.parents().filter(function(a,b){return $(b).hasClass("js-old-content")}).length;if(n)return;g.data("media-type",k);var o=b.media.iconType(j,k),p=i.find(".js-icon-container");p.find('[data-media-class="'+o+'"]').length===0&&(!g.closest(".js-stream-tweet:not(.iconified)").length||(e.addSmallIcon(p,o,k._name.toLowerCase()),e.updateHandleText(p,o)),k._name.toLowerCase()==="CopiedTwimg"&&e.preloadTwimgs(p))}),c&&f.length>0?this.expand(f,function(a){e.iconify(a,!1,d)}):d&&d()},addSmallIcon:function(a,b,c){(new twttr.views.InlineMediaIcon({icon:b,media_name:c,is_image:b==="photo",is_video:b==="video"||b==="player",is_audio:b==="song"||b==="album",is_summary:b==="summary",is_embed:b==="generic"||b==="software"||b==="tweet"})).render(a,"append")},updateHandleText:function(a,b){if(!twttr.decider.isExpando())return;var c=a.data("placename");c?(c=_("from {{placename}}",{placename:c}),c=[c,c]):c=[_("View location"),_("Hide location")];var d={photo:[_("View photo"),_("Hide photo")],video:[_("View video"),_("Hide video")],generic:[_("View media"),_("Hide media")],song:[_("View song"),_("Hide song")],album:[_("View album"),_("Hide album")],software:[_("View app"),_("Hide app")],tweet:[_("View tweet"),_("Hide tweet")],geo:c,player:[_("View media"),_("Hide media")],summary:[_("View summary"),_("Hide summary")]}[b],e="tweet_anatomy_hide_view_179",f=twttr.abdecider.choose(e);f!=="hide"&&(f==="always"?(d||(d=[_("View details"),_("Hide details")]),d&&a.show().parent().find("span.js-view-details").html(d[0]).end().find("span.js-hide-details").html(d[1])):d&&a.show().parent().find("span.js-view-details").html(d[0]).end().find("span.js-hide-details").html(d[1]))}}),a(c)})}),provide("media/Embedder",function(a){using("media").as(function(b){var c=twttr.klass("twttr.media.Embedder",function(a,b){this.tweet=a,this.options=b||{},this.options.preProcess=this.options.preProcess||function(a,b){b()},this.options.postProcess=this.options.postProcess||function(){},this.options.beforeRender=this.options.beforeRender||function(a,b){b({shouldRender:!0})},this.options.afterRender=this.options.afterRender||function(){}});c.mixin(twttr.mixins.tweetFlagging),c.methods({expand:function(a,c){var d=[];b.media.expand(a,function(a){$.each(a,function(a,b){d.push(b)}),c(d)})},render:function(a){var c=this,d=twttr.Cards.prototype;if(d.hasCardPhotoEntities(this.tweet))$(this.tweet.entities.media).each(function(a,b){c.embed(b.url,twttr.media.types.nativePhoto,b)});else if(d.hasPhotos(this.tweet))c.embed(this.tweet.cards.photos[0].url,twttr.media.types.photo,this.tweet.cards);else if(d.hasPlayers(this.tweet))c.embed(this.tweet.cards.players[0].url,twttr.media.types.player,this.tweet.cards);else if(d.hasSummaries(this.tweet))c.embed(this.tweet.cards.summaries[0].url,twttr.media.types.summary,this.tweet.cards);else{var e=b.media.extractUrls(this.tweet),f=this.embedMatchedAndReturnUnmatched(e);f.length&&this.expand(f,function(a){c.embedMatchedAndReturnUnmatched(a)})}a&&a()},embedMatchedAndReturnUnmatched:function(a){var c=this,d=[];return $.each(a,function(a,e){var f=b.media.match(e);f?c.embed(e,f):d.push(a)}),d},embedThumbnail:function(a){var c=this,d=b.media.match(a);if(!d)return;var e=new d({url:a,matchLabel:b.media.matchCache[a].matchLabel,slug:b.media.matchCache[a].match,size:this.options.size});e.process(function(){e.renderThumbnail(c.options.DOMContainer)})},embed:function(a,c,d){var e=this,f;d?f=new c({url:a,tweet:this.tweet,mediaEntity:d}):f=new c({url:a,matchLabel:b.media.matchCache[a].matchLabel,slug:b.media.matchCache[a].match,tweet:this.tweet}),e.options.preProcess(f,function(b){f.process(function(){e.options.postProcess(f,b||{}),e.options.beforeRender(f,function(b){var c=(new twttr.views.MediaTypeContainer({url:a,media_type:f.constructor._name,media_type_class:f.constructor._name.toLowerCase()})).$html(),d=c.data("url-id");e.options.DOMContainer.find('div[data-url-id="'+d+'"]').remove().end().append(c),f.render(c);if(!f.data||!f.data.is_card)e.tweetFlaggable(e.tweet)&&c.append(f.flaggable()),c.append(f.attribution());setTimeout(function(){c.closest(".tweet").delegate(".flaggable","click",function(a){e.flagLinkClicked(a,e.tweet)})},0),e.options.afterRender(f,b||{}),twttr.images.addPrivacyCover(c.find("a img"))})},b||{},d)})}}),a(c)})}),provide("media/mediaType",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.media.MediaType",function(a){this.url=a.url,this.matchLabel=a.matchLabel,this.slug=a.slug,this.tweet=a.tweet||null,this.options=a||{},this.location=new b.util.Location(this.url),this.data={}}),twttr.mediaType=function(a,c){var d="twttr.media.types."+a,e=twttr.klass(d,function(){twttr.media.MediaType.apply(this,arguments)});e.subclassOf(twttr.media.MediaType).statics({partnerName:a,domain:c.domain||"",attributionName:c.attributionName||a,skipAttributionInDiscovery:c.skipAttributionInDiscovery||!1,title:c.title||null,_icon:c.icon||"generic",deciderKey:c.deciderKey||null,screenName:c.screenName||null,aspectRatio:c.aspectRatio||b.constants.videos.fullscreen,height:c.height,ssl:c.ssl||!1,isEnabled:function(){return this.deciderKey?twttr.decider&&twttr.decider.isAvailable(this.deciderKey):!0},attributionTemplate:c.attributionTemplate||"MediaAttribution",validActions:$.extend({resizeFrame:!0},c.validActions),enableAPI:c.enableAPI||!1,addMatchers:function(a){for(var c in a)this.matchers[c]=b.util.regexSupplant(a[c])},flagActionTemplate:c.flagActionTemplate||"<span class='flag-container'><a href='#' class='flaggable' alternateText='"+_("Un-flag this media")+"'>"+_("Flag this media")+"</a></span>"}).methods({process:c.process||function(){},content:c.content||function(){},getImageURL:c.getImageURL||function(){},partnerName:a,metadata:function(a){if(twttr.is.fn(c.metadata))return c.metadata.apply(this,[a])},calcHeight:function(a,b){b||(b=this.constructor.aspectRatio);var c=parseInt(b.split(":")[0],10),d=parseInt(b.split(":")[1],10),e=30;return Math.round(a*(d/c))+e},resizeHtmlEmbed:function(a,b,c,d){if(a&&b&&b.maxwidth&&b.maxwidth<c){var e=Math.round(b.maxwidth*d/c);a=a.replace(new RegExp('width=("?)'+c+"(?=\\D|$)","g"),"width=$1"+b.maxwidth).replace(new RegExp('height=("?)'+d+"(?=\\D|$)","g"),"height=$1"+e)}return a},useOpaqueModeForFlash:function(a){return a.replace(/(<\/object>)/,'<param name="wmode" value="opaque">$1').replace(/(<embed .*?)(\/?>)/,'$1 wmode="opaque"$2')},icon:function(){return twttr.is.fn(this.constructor._icon)?this.constructor._icon.call(this,this.url):this.constructor._icon},flaggable:function(){return!twttr.loggedIn||!c.flaggable||!twttr.decider.isAvailable("media_flagging")?!1:$(Mustache.to_html(this.constructor.flagActionTemplate))},attribution:function(){return c.attribution&&twttr.is.fn(c.attribution)?c.attribution.call(this):(new twttr.views[this.constructor.attributionTemplate]({url:this.domainUrl(),icon_url:this.iconUrl(),title:this.data.attribution_title||this.constructor.title||this.constructor._name,media_type:this.constructor._name})).html()},iconUrl:function(){return this.data.attribution_icon||twttr.assets.path("/images/partner-favicons/"+this.constructor._name+".png")},domainUrl:function(){return this.data.attribution_url||this.constructor.domain},attributionName:function(){return this.constructor.attributionName},hasAttributionInDiscovery:function(){return!this.constructor.skipAttributionInDiscovery},render:function(a){if(c.render&&twttr.is.fn(c.render))return c.render.call(this,a);var b=this.content();if($.browser.msie&&$.browser.version<=8)$(a).html(b);else{b="<div class='tweet-media'>"+b+"</div>";var d=new twttr.platform.SandboxedApplication(this.constructor,{tweet:this.tweet,originalUrl:this.url}),e={DOMContainer:a,htmlContent:b,height:this.data.height,width:this.data.width,security:this.constructor.ssl};d.run(e)}},content:function(){return c.content&&twttr.is.fn(c.content)?c.content.call(this):""},renderThumbnail:function(a){var b=this;this.metadata(function(c){c.alt=b.constructor.title;var d=Mustache.to_html('<img src="{{image}}" alt="{{alt}}" title="{{title}}" />',c);$(a).append(d)})},renderIframe:function(a,b){t="<iframe src='{{url}}' width='{{width}}' height='{{height}}'></iframe>",$(a).append(Mustache.to_html(t,$.extend({url:b},this.data)))},renderEmbeddedApplication:function(a,b){var c=new twttr.platform.EmbeddedApplication(this.constructor,{tweet:this.tweet,originalUrl:this.url}),d={DOMContainer:a,height:this.data.height,width:this.data.width};c.run(b,d)}}),e.matchers=c.matchers||{};for(var f in e.matchers)(function(){var a=f;e.matchers[a]=b.util.regexSupplant(e.matchers[a])})();return e},a(twttr.mediaType)})}),provide("media/expandodo",function(a){using("util","constants").as(function(b){function e(a){return a.expanded_url.replace(/^https?:\/\//,"//")+"/large"}function f(a){a&&(a.profile_path="/"+a.screen_name)}function g(a){var b=["players","summaries","photos"],c,d,e,g;for(c=0;c<b.length;c++){g=a[b[c]];if(g&&g.length)for(d=0;d<g.length;d++)e=g[d],f(e.author_user),f(e.site_user)}}function i(a,b,c){this.data=c,this.data.is_card=!0,g(this.data),a()}function j(a,b,c){var d=this;c&&c.source_status_id_str?twttr.API.Status.find(c.source_status_id_str,function(e){k(c,e.user,function(c){i.apply(d,[a,b,c])})}):k(c,!1,function(c){i.apply(d,[a,b,c])})}function k(a,b,f){var g=l(a.sizes.medium.w,a.sizes.medium.h,d,c),i={photos:[{url:e(a),title:!1,description:!1,images:{web:{image_url:a.media_url_https+":medium",width:g.width,height:g.height}},twimg_attribution:!0,permalink_continuity:!0}]};b&&(i.photos[0].author_user={id_str:b.id,screen_name:b.screenName,name:b.name,profile_image_url:b.profileImageUrl,profile_image_url_https:b.profileImageUrlHttps}),f(i)}function l(a,b,c,d){return b>=a&&b>d?(a*=d/b,b=d):a>b&&a>c&&(b*=c/a,a=c),{width:Math.ceil(a),height:Math.ceil(b)}}function m(a){$(a).append(Mustache.to_html(twttr.templates.cards_base,this.data,twttr.templates))}var c=375,d=435;twttr.mediaType("photo",{icon:"photo",process:i,render:m}),twttr.mediaType("nativePhoto",{icon:"photo",attribute:!1,process:j,render:m}),twttr.mediaType("summary",{icon:"summary",process:i,render:m}),twttr.mediaType("player",{icon:"player",process:i,render:m}),a()})}),provide("platform/BaseApplication",function(a){using("_").as(function(b,_){(function(){function a(a){var b=twttr.platform.runningApplications[a];b&&(b.stop(),delete twttr.platform.runningApplication[a])}twttr.platform||(twttr.platform={}),twttr.platform.application_types={embedded:"embedded"},twttr.platform.runningApplications={};var b=50,c=36e5,d={trends:!0,"geo/nearby_places":!0,"statuses/retweets/:id":!0,"followers/ids":!0,"geo/id/:id":!0,"geo/search":!0,"lists/statuses":!0,"users/suggestions":!0,"friendships/show":!0,"statuses/show":!0,"trends/current":!0,"geo/similar_places":!0,"statuses/user_timeline":!0,"friends/ids":!0,"trends/:woeid":!0,"statuses/followers":!0,"statuses/friends":!0,"statuses/public_timeline":!0,"users/show":!0},e={"users/search":!0,"users/typeahead":!0,":user/lists/subscriptions":!0,"statuses/network_timeline":!0,"statuses/friends_timeline":!0,":user/:list_id/members":!0,":user/lists/memberships":!0,"statuses/:id/retweeted_by/ids":!0,":user/lists":!0,"statuses/mentions":!0,"geo/reverse_geocode":!0,"friendships/exists":!0,":user/:list_id/members/:id":!0,search:!0,"statuses/retweeted_to_me":!0,"statuses/retweets_of_me":!0,"statuses/retweeted_by_me":!0,":user/:list_id/subscribers":!0,":user/:list_id/subscribers/:id":!0,"favorites/:id":!0,"statuses/:id/retweeted_by":!0,"account/verify_credentials":!0,"users/lookup":!0,"trends/weekly":!0,"trends/daily":!0,"statuses/home_timeline":!0,"lists/show":!0};twttr.platform.events={resize:function(){var a=this;$(window).bind("resize."+this.config._name,function(){var b=$("div.details-pane.opened");b.length!==0&&a.socket.trigger("resize",b.width())})}},twttr.platform.interfaceActions={openTab:function(a){window.open(a.url,"_blank")},openProfile:function(a,b){twttr.app.currentPage().send("loadUserInDetailsPane",[this.config.screenName,{}],function(){a(!0)},function(){b("Profile pane not available or no registered screen name")})},tweet:function(a,b,c){(new twttr.widget.TweetDialog({defaultContent:a,draggable:!0,template:{title:_("What’s happening?")},origin:"new-tweet-titlebar-button"})).open().focus()},notify:function(a,b){twttr.Notifications.notify(a.type,a.subject,a.message,a.icon,function(){b(a)})},resizeFrame:function(a){this.DOMContainer.firstChild.style.height=a+"px"},bind:function(a,b,c){var d=twttr.platform.events[a];d?(d.call(this),b(!0)):c("You tried to bind to an event that is not bindable")},unbind:function(a,b,c){var d=twttr.platform.events[a];d?($(window).unbind(a+"."+this.config._name),b(!0)):c("You tried to unbind from an event that is not bindable")}};var f=0,g=twttr.klass("twttr.platform.BaseApplication",function(a){this.limiter=0,this.interval=(new Date).getTime(),this.socket=null,this.config=a,this.minimized=!1,this.id=++f});g.methods({run:function(a,b){var c=this;this.options=b||{},this.url=a;var d=b.DOMContainer||$(document.body);d instanceof jQuery&&(this.DOMContainer=d[0]),this.socket=new easyXDM.Rpc({remote:this.url,container:this.DOMContainer,props:{width:b.width||"100%",height:b.height||0},onReady:function(){twttr.platform.runningApplications[c.id]=c,c.limiter=0,c.interval=(new Date).getTime();var a=c.initialData();c.socket.initialize(a),b.loaded&&b.loaded.call(c)}},{local:{api:twttr.bind(this,this.api),ui:twttr.bind(this,this.ui),log:twttr.bind(this,this.log)},remote:{trigger:{},initialize:{}}})},initialData:function(){var a={},b=$("div.details-pane.opened");return b.length!==0&&(a.size=b.width()),twttr.currentUser&&twttr.currentUser.profileLinkColor&&(a.styles=[["a",["color","#"+twttr.currentUser.profileLinkColor]]]),a},stop:function(){this.socket.destroy()},maximize:function(){this.minimized&&(this.minimized=!1,this.run(this.url,this.options))},minimize:function(){this.stop(),this.attribution=$(this.DOMContainer).find(".media-attribution").detach(),this.minimized=!0},isRateLimited:function(){var a=(new Date).getTime();return a-this.interval>c?(this.limiter=0,this.interval=a,!1):this.limiter>=b},isPermitted:function(){return!0},isProtectedEndpoint:function(a){return twttr.currentUser["protected"]&&!this.isPermitted(this.socket.origin)?!0:!d[a]&&!e[a]?!0:!1},log:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b=b||{},c=c||$.noop,d=d||$.noop;if(this.minimized)return d("You cannot log information while your application is minimized");scribble("partner_event",{partner:this.config._name,origin:this.socket.origin,eventName:a,data:b}),c(!0)},api:function(a,b,c,d){d=d||$.noop;if(this.minimized)return d("You cannot access the API while your application is minimized");if(!this.config.enableAPI)return d("You do not have API Access");if(!!this.isRateLimited())return d("You have been rate-limited.");this.limiter++;if(this.isProtectedEndpoint(a))return d("You do not have access to that endpoint.");twttr.is.fn(b)&&(d=c,c=b,b=[]),twttr.API.util.makeRemoteRequest(a,b,{success:function(a){c&&c(a)},error:function(a){d&&d(a)}})},ui:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b=b||{},c=c||$.noop,d=d||$.noop;if(!this.config.validActions[a])return d("This is not a valid UI action.");if(this.minimized)return d("You cannot access interface components while your application is minimized");scribble("partner_ui_action",{partner:this.config._name,origin:this.socket.origin,actionName:a,data:b}),twttr.platform.interfaceActions[a].apply(this,[b,c,d])}})})(),a(twttr.platform.BaseApplication)})}),provide("platform/EmbeddedApplication",function(a){using().as(function(b){var c=twttr.klass("twttr.platform.EmbeddedApplication",function(a,b){b=b||{},twttr.platform.BaseApplication.apply(this,arguments),this.tweet=b.tweet||null,this.originalUrl=b.originalUrl||null,this.applicationType=twttr.platform.application_types.embedded});c.subclassOf(twttr.platform.BaseApplication),c.methods({initialData:function(){var a=twttr.platform.BaseApplication.prototype.initialData.call(this);return a},log:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b.original_url=this.originalUrl,twttr.platform.BaseApplication.prototype.log.apply(this,arguments)}}),a(c)})}),provide("platform/SandboxedApplication",function(a){using().as(function(b){twttr.klass("twttr.platform.SandboxedApplication",function(a,b){twttr.platform.EmbeddedApplication.apply(this,arguments)}).subclassOf(twttr.platform.EmbeddedApplication).statics({remoteUrl:function(a){var b=twttr.domains.local.match(/localhost/),c="/details_pane_content_sandbox.html";return b?"http://localhost:3000"+c:twttr.assets.path(c,{isSSL:twttr.isSSL()&&a})}}).methods({run:function(a){twttr.platform.EmbeddedApplication.prototype.run.call(this,twttr.platform.SandboxedApplication.remoteUrl($.browser.msie||a.security),a)},initialData:function(){var a=twttr.platform.EmbeddedApplication.prototype.initialData.call(this);return twttr.currentUser&&twttr.currentUser.profileLinkColor&&a.styles.push([".sandboxed-media a",["color","#"+twttr.currentUser.profileLinkColor]]),$.extend({},a,{htmlContent:this.options.htmlContent})}}),a(twttr.platform.SandboxedApplication)})}),provide("sandboxedAjax",function(a){using().as(function(b){twttr.klass("twttr.AjaxSandboxer",function(){this._nextRequestId=0,this._requests={},this._sockets=[null,null]}).statics({TIMEOUT:5e3}).methods({send:function(a){a.timeout||(a.timeout=twttr.AjaxSandboxer.TIMEOUT),this._useSandbox()?this._sendWithSandbox(a):this._sendWithoutSandbox(a)},_useSandbox:function(){return twttr.isSSL()},_sendWithSandbox:function(a){security=!!(a.url.match(/^https:/)||twttr.isSSL()&&a.url.match(/^\/\//)),$.browser.msie&&(security=1),index=security?0:1,this._sockets[index]||(this._sockets[index]=this._generateSocket(this._remoteUrl(security)));var b=this._generateSandboxRequest(a);this._sockets[index].postMessage(JSON.stringify(b))},_sendWithoutSandbox:function(a){$.ajax(a)},_generateSandboxRequest:function(a){var b=++this._nextRequestId;a=twttr.merge({},a);var c={id:b,callbacks:{success:a.success,error:a.error,before:a.before,complete:a.complete},request:{id:b,data:a}};return delete a.success,delete a.error,delete a.complete,delete a.before,this._requests[b]=c,c.request},_remoteUrl:function(a){var b="/jsonp_sandbox.html";return twttr.domains.local.match(/localhost/)?"http://localhost:3000"+b:twttr.assets.path(b,{isSSL:a})},_generateSocket:function(a){var b=this;return new easyXDM.Socket({remote:a,onMessage:function(a,c){var d=JSON.parse(a),e=b._requests[d.id];e&&e.callbacks[d.callbackName]&&e.callbacks[d.callbackName].apply(null,d.callbackArgs),d.callbackName==="complete"&&delete b._requests[d.id]}})}}),twttr.sandboxedAjax=new twttr.AjaxSandboxer,a(twttr.sandboxedAjax)})}),provide("media/types",function(a){using("util","constants").as(function(b){function c(a){return twttr.isSSL()?a.replace(/^http:/,"https:"):a}twttr.provide("twttr.regexps",{protocol:/(?:https?\:\/\/)/,protocol_no_ssl:/(?:http\:\/\/)/,optional_protocol:/(?:(?:https?\:\/\/)?(?:www\.)?)/,protocol_subdomain:/(?:(?:https?\:\/\/)?(?:[\w\-]+\.))/,optional_protocol_subdomain:/(?:(?:https?\:\/\/)?(?:[\w\-]+\.)?)/,wildcard:/[a-zA-Z0-9_#\.\-\?\&\=\/]+/,itunes_protocol:/(?:https?\:\/\/)?(?:[a-z]\.)?itunes\.apple\.com(?:\/[a-z][a-z])?/}),twttr.mediaType("Youtube",{title:"YouTube",icon:"video",domain:"//www.youtube.com",ssl:!0,flaggable:!0,height:359,matchers:{tinyUrl:/^#{optional_protocol}?youtu\.be\/([a-zA-Z0-9_\-\?\&\=\/]+)/i,standardUrl:/^#{optional_protocol}?youtube\.com\/watch[a-zA-Z0-9_\-\?\&\=\/]+/i},process:function(a,b){this.data.width=b&&b.maxwidth||390,this.data.height=b&&b.maxwidth?this.calcHeight(b.maxwidth):307,this.url.match(this.constructor.matchers.tinyUrl)?(this.data.id=this.location.pathname.replace(/\//g,""),a()):this.location.search.match(/[\?\&]v\=([\w\-]+)(?:\&|$)/)&&(this.data.id=this.location.query("v"),a())},metadata:function(a){var c={image:b.util.supplant("//img.youtube.com/vi/{id}/0.jpg",this.data)};a(c)},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},render:function(a){this.renderIframe(a,twttr.proto+"://www.youtube.com/embed/"+this.data.id+"?wmode=opaque")}}),twttr.mediaType("Twitter",{icon:"tweet",domain:"//twitter.com",ssl:!0,skipAttributionInDiscovery:!0,matchers:{permalink:/^#{optional_protocol}?twitter\.com\/(?:#!?\/)?\w{1,20}\/status\/(\d+)[\/]?$/i},process:function(a){var b=this;twttr.API.Status.find(this.slug,function(c){b.data.tweet=c,twttr.isT1?using("//platform.twitter.com/js/vendor/twt/dist/twt.all.min.js","css!//platform.twitter.com/twt/twt.css",function(){if(!window.twt)return;for(var c=twttr.languages.length;c--;)if(twttr.languages[c].current){twt.settings.lang=twttr.languages[c].code;break}var d=twt.tweet(b.data.tweet.attributes);b.tweetHtml=d.html(),a()}).load():a()})},render:function(a){if(!twttr.isT1)$(a).append((new twttr.views.EmbeddedTweet(this.data.tweet)).html());else{var b=this;$(a).append(Mustache.to_html("<div class='tweet-embed'>{{{tweet}}}</div>",{tweet:b.tweetHtml}))}}}),twttr.mediaType("CopiedTwimg",{icon:"photo",domain:"//twitter.com",ssl:!0,flaggable:!0,deciderKey:"photo_copy_paste_inception",skipAttributionInDiscovery:!0,attributionTemplate:"PhotobucketAttribution",matchers:{media:/^#{optional_protocol}?twitter\.com\/(?:#!?\/)?\w{1,20}\/status\/(\d+)\/photo\/\d*$/i},getImageURL:function(){twttr.media.types.Twimg.prototype.getImageURL.apply(this,arguments)},metadata:function(){twttr.media.types.Twimg.prototype.metadata.apply(this,arguments)},process:function(a){var b=this;twttr.API.Status.find(this.slug,function(c){b.data.tweet=c,c.entities&&c.entities.media&&$.each(c.entities.media,function(a,c){if(c.expanded_url.indexOf(b.slug)>-1)return b.foundMedia=c,!1});var d;twttr.isSSL()?d=b.foundMedia.media_url_https:d=b.foundMedia.media_url,b.data.src=d,b.data.url=b.foundMedia.expanded_url,b.data.name=b.constructor._name,a()})},render:function(a){var b=this.data.tweet;if(!this.foundMedia)return;var c={name:"copied-twimg",time_ago:twttr.helpers.timeAgo(twttr.helpers.parseDateString(b.createdAt),!0),url:this.foundMedia.url,media_url:twttr.isSSL()?this.foundMedia.media_url_https:this.foundMedia.media_url,screen_name:b.user.screenName},d=$(a);d.append((new twttr.views.CopiedTwimg(c)).html()),d.find(".inline-media-image img").bind("load",function(){$(this).closest(".media-instance-container").width(this.width)}),twttr.app.isOnPage("permalink")&&d.find(".user-profile-link").click(function(){return twttr.router.routeTo(twttr.router.profilePath({screen_name:$(this).data("screen-name")})),!1})}}),twttr.mediaType("Twimg",{icon:"photo",domain:"//twitter.com",attributionName:"Twitter",flaggable:!0,ssl:!0,skipAttributionInDiscovery:!0,matchers:{twimg:/^#{optional_protocol}?p\.twimg\.com\/[a-zA-Z0-9_-]+\.(?:jpg|png|gif)$/i,media:/^#{optional_protocol}?pic\.twitter\.com\/[a-zA-Z0-9]+$/i},attributionTemplate:"PhotobucketAttribution",getImageURL:function(a,c){var d=this;this.process(function(){d.metadata(function(d){if(d&&d.image){var e=d.image;a==b.constants.imageSizes.small?e+=":thumb":a==b.constants.imageSizes.large&&(e+=":large"),c(e)}else c(null)})})},metadata:function(a){a({image:this.data.src,name:this.data.name,expandedUrl:this.data.url})},process:function(a,b){var d=twttr.media.types.Twimg.matchers,e=this,f,g;if(this.url.match(d.twimg))this.data.src=c(this.url),this.data.url=c(this.url),this.data.displayUrl=this.url,this.data.name=this.constructor._name;else{if(!this.tweet||!this.tweet.entities.media){a();return}var i=$.map(this.tweet.entities.media,function(a){return a.display_url});if($.inArray(this.url,i)<0){a();return}$.each(this.tweet.entities.media,function(){if(this.display_url==e.url){g=this;return}});if(!g){a();return}twttr.isSSL()?f=g.media_url_https:f=g.media_url,this.data.src=f,this.data.url=b&&b.linkLarge===!0?g.expanded_url+"/large":g.url,this.data.displayUrl=g.display_url,this.data.name=this.constructor._name}a()},render:function(a){var b='<div class="twimg">                <a class="inline-media-image" data-inline-type="{{name}}" href="{{url}}" target="_blank" title="{{displayUrl}}">                  <img src="{{src}}" alt="{{displayUrl}}"/>                 </a>              </div>';$(a).append(Mustache.to_html(b,this.data))}}),twttr.mediaType("Ustream",{icon:"video",domain:"http://ustream.tv",ssl:!1,flaggable:!0,matchers:{recorded:/^#{optional_protocol}?ustream\.tv\/(recorded\/(?:\d+))/i,channel:/^#{optional_protocol}?ustream\.tv\/(channel\/(?:[\w\-]+)\/?)/i},metadata:function(a){var b=null;this.data&&this.data.imageUrl&&this.data.imageUrl.small&&(b=this.data.imageUrl.small),a({title:this.data.title,description:this.data.description?twttr.helpers.truncate(this.data.description,255,"..."):"",image:b})},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){b(a.image)})})},process:function(a,b){var c=this;this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),(this.slug.match(this.constructor.re.channel)||this.slug.match(this.constructor.re.video))&&twttr.sandboxedAjax.send({url:"http://api.ustream.tv/json/channel/"+RegExp.$1+"/getInfo",dataType:"jsonp",data:{key:this.constructor.API_KEY,maxwidth:this.data.width},success:function(b){b!==null&&(c.data.type="channel",c.data.embed=c.useOpaqueModeForFlash(b.embedTag),c.data.imageUrl=b.imageUrl),a()}})},content:function(){return this.data.type==="channel"?this.data.embed:Mustache.to_html(this.constructor.templates[this.data.type],this.data)}}).statics({API_KEY:"12ab548e85128e0d3182ba3a346c3428",re:{video:/^recorded\/(\d+)/,channel:/^channel\/([\w\-]+)\/?/},templates:{video:'        <object width="{{width}}" height="{{height}}">          <param name="flashvars" value="autoplay=false&amp;vid={{videoId}}&amp;"/>          <param name="allowfullscreen" value="true"/>          <param name="allowscriptaccess" value="always"/>          <param name="wmode" value="opaque"/>          <param name="src" value="http://www.ustream.tv/flash/video/{{videoId}}"/>          <embed            flashvars="loc=%2F&amp;autoplay=false&amp;vid={{videoId}}&amp;"            width="{{width}}"            height="{{height}}"            allowfullscreen="true"            allowscriptaccess="always"            wmode="opaque"            src="http://www.ustream.tv/flash/video/{{videoId}}"            type="application/x-shockwave-flash" />        </object>'}}),twttr.mediaType("Vevo",{icon:"video",domain:"http://vevo.com",ssl:!1,flaggable:!0,matchers:{standardVideo:/^#{optional_protocol}?vevo\.com\/watch\/[\w-]+\/[\w-]+\/([a-zA-Z0-9_]+)/i},process:function(a,b){this.data.id=this.slug,this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),a()},content:function(){var a='<object width="{{width}}" height="{{height}}">                <param name="movie" value="http://www.vevo.com/VideoPlayer/Embedded?videoId={{id}}&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961&playerType=embedded"/>                <param name="bgcolor" value="#000000"/>                <param name="allowFullScreen" value="true"/>                <param name="allowScriptAccess" value="always"/>                <param name="wmode" value="opaque"/>                <embed                  src="http://www.vevo.com/VideoPlayer/Embedded?videoId={{id}}&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961&playerType=embedded"                   type="application/x-shockwave-flash"                   allowfullscreen="true"                   allowscriptaccess="always"                   wmode="opaque"                   width="{{width}}"                   height="{{height}}"                   bgcolor="#000000" />              </object>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Flickr",{icon:"photo",favicon:twttr.isSSL()?"https://secure.flickr.com/favicon.ico":"http://www.flickr.com/favicon.ico",domain:twttr.isSSL()?"https://secure.flickr.com":"http://www.flickr.com",deciderKey:"phoenix_flickr_details",flaggable:!0,matchers:{profile:/^#{optional_protocol}?flickr\.com\/(?:photos|people)\/([\w\@\-]+)\/?$/i,photo:/^#{optional_protocol}?flickr\.com\/photos\/[\w\@\-]+\/(\d+)\/?/i,sets:/^#{optional_protocol}?flickr\.com\/photos\/(?:[\w\@\-]+)\/sets\/(\d+)\/?(?:show\/?)?$/i,galleries:/^#{optional_protocol}?flickr\.com\/photos\/([\w\@\-]+)\/galleries\/(\d+)\/?$/i,pool:/^#{optional_protocol}?flickr\.com\/groups\/([\w\@\-]+)\/?(?:pool\/|discuss\/)?$/i},ssl:!0,metadata:function(a){var b;this.data.photos&&this.data.photos.length>=1?(b=this.data.photos[0],a({image:Mustache.to_html("//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}.jpg",b),title:this.data.title,description:this.data.description,author:{name:this.data.author_name,url:this.data.author_url}})):a(null)},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},process:function(a,b){this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),this.data.domain=this.constructor.domain;var c=twttr.media.types.Flickr.matchers,d=this,e=this.url;if(e.match(c.photo)){var f=RegExp.$1;this.makeRequest({data:{method:"flickr.photos.getInfo",photo_id:f},success:function(b){b.photo&&(d.data.author_name=b.photo.owner.realname,d.data.author_url=d.constructor.domain+"/photos/"+b.photo.owner.nsid,b.photo.media&&b.photo.media=="video"&&(d.data.isVideo=!0),d.data.photos=[b.photo]),a()}})}else e.match(c.sets)?this._makeSetRequest(RegExp.$1,a):e.match(c.profile)?this.lookUpUserPhotos(RegExp.$1,this.slug,a):e.match(c.pool)?this._makeGroupRequestByName(RegExp.$1,a):e.match(c.galleries)&&this.makeRequest({data:{method:"flickr.urls.lookupGallery",url:"flickr.com/photos/"+RegExp.$1+"/galleries/"+RegExp.$2},success:function(b){var c=b.gallery.id;d.makeRequest({data:{method:"flickr.galleries.getPhotos",gallery_id:c},success:function(b){d.data.photos=b.photos.photo.slice(0,16),d.data.isGallery=1,a()}})}});return},content:function(){var a="",b=twttr.media.types.Flickr;if(this.data.photos.length==1)if(this.data.isVideo){var c=this.data.photos[0];c.domain=this.data.domain,a+=Mustache.to_html(b.templates.video,c)}else this.data.photos[0].href=this.data.photos[0].urls.url[0]._content,a+=Mustache.to_html(b.templates.photo,this.data.photos[0]);else{a='<div class="flickr-group">'+this.createThumbList(this.data.photos)+"</div>";if(this.data.isGallery)return a;var d;this.data.set_id?d=b.photoSetFlashVars:this.data.group_id?d=b.photoGroupFlashVars:d=b.photoUserFlashVars,d=twttr.merge({},b.defaultSlideshowFlashVars,d,!0);var e=[];jQuery.each(d,function(a,b){e.push(a+"="+b)}),e=Mustache.to_html(e.join("&"),this.data),a+=Mustache.to_html(b.templates.slideshow,{flashvars:e,domain:this.data.domain})}return a}}).statics({API_KEY:"2a56884b56a00758525eaa2fee16a798",SECRET:"7c794fe3256175b6",REST_DOMAIN:"//widgets.platform.twitter.com",defaultSlideshowFlashVars:{lang:"en-us",offsite:!0,minH:100,minW:100},templates:{video:'<object width="{{width}}" height="{{height}}"                   type="application/x-shockwave-flash"                   data="{{domain}}/apps/video/stewart.swf?v=71377"                   classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">                   <param name="flashvars" value="intl_lang=en-us&photo_secret={{secret}}&photo_id={{id}}"/>                   <param name="movie" value="{{domain}}/apps/video/stewart.swf?v=71377"/>                   <param name="bgcolor" value="#000000"/>                   <param name="allowFullScreen" value="true"/>                   <param name="wmode" value="opaque"/>                   <embed                     type="application/x-shockwave-flash"                     src="{{domain}}/apps/video/stewart.swf?v=71377"                     bgcolor="#000000"                     allowfullscreen="true"                     wmode="opaque"                     flashvars="intl_lang=en-us&photo_secret={{secret}}&photo_id={{id}}"                     height="{{height}}"                     width="{{width}}" />                 </object>',photo:'<div class="flickr-photo">                   <a href="{{href}}" target="_blank">                     <img src="//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}.jpg"/>                   </a>                 </div>',set:'<a href="{{href}}" style="text-decoration:none;" target="_blank">                <img class="flickr-thumb" src="//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}_s.jpg"/>              </a>',slideshow:'<embed type="application/x-shockwave-flash"                             src="{{domain}}/apps/slideshow/show.swf?v=107931"                             width="{{width}}"                             height="{{height}}"                             id="slideShowMovie"                             bgcolor="#000000"                             quality="high"                             allowfullscreen="true"                             allowscriptaccess="always"                             wmode="opaque"                             flashvars={{flashvars}} />'},photoUserFlashVars:{user_id:"{{user_id}}",page_show_back_url:"/photos/{{user_name}}/",page_show_url:"/photos/{{user_name}}/show/"},photoGroupFlashVars:{group_id:"{{group_id}}",page_show_url:"/groups/{{group_id}}/pool/show/",page_show_back_url:"/groups/{{group_id}}/pool/"},photoSetFlashVars:{set_id:"{{set_id}}",page_show_back_url:"/photos/{{user_name}}/sets/{{set_id}}/",page_show_url:"/photos/{{user_name}}/sets/{{set_id}}/show/"}}).methods({base58:function(a){var b="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",c=a.length,d=0,e=1;for(var f=c-1;f>=0;f--)d+=e*b.indexOf(a[f]),e*=b.length;return d},lookUpUserPhotos:function(a,b,c){var d=this;this.makeRequest({data:{method:"flickr.urls.lookupUser",url:"flickr.com/photos/"+a},success:function(b){if(b.stat==="fail"){c();return}var e=b.user.id,f=b.user.username._content;d.makeRequest({data:{method:"flickr.people.getPublicPhotos",user_id:e},success:function(b){d.data.photos=b.photos.photo.slice(0,16),d.data.user_id=e,d.data.user_name=a,d.data.author_name=f,d.data.author_url=d.constructor.domain+"/photos/"+e,c()}})}})},createThumbList:function(a){var b="http://www.flickr.com/photos",c=this;return $.map(a,function(a,c){return a.href=[b,a.owner,a.id].join("/"),Mustache.to_html(twttr.media.types.Flickr.templates.set,a)}).join("")},_makeGroupRequestByName:function(a,b){this.makeRequest({data:{method:"flickr.urls.lookupGroup",url:"flickr.com/groups/"+a},success:twttr.bind(this,function(a){this._makeGroupRequestById(a.group.id,b)})})},_makeGroupRequestById:function(a,b){this.makeRequest({data:{method:"flickr.groups.pools.getPhotos",group_id:a},success:twttr.bind(this,function(c){this.data.photos=c.photos.photo.slice(0,16),this.data.group_id=a,b()})})},_makeSetRequest:function(a,b){this.makeRequest({data:{method:"flickr.photosets.getPhotos",photoset_id:a},success:twttr.bind(this,function(a){var c=a.photoset.owner;this.data.photos=a.photoset.photo.slice(0,16),twttr.each(this.data.photos,function(a){a.owner=c}),this.data.set_id=a.photoset.id,this.data.user_name=c,this.data.author_name=a.photoset.ownername,this.data.author_url=this.constructor.domain+"/photos/"+a.photoset.owner,b()})})},makeRequest:function(a){var b={url:twttr.media.types.Flickr.REST_DOMAIN+"/services/rest",dataType:"jsonp",jsonp:"jsoncallback",data:{format:"json",api_key:twttr.media.types.Flickr.API_KEY},success:function(a){}};twttr.sandboxedAjax.send(twttr.merge({},b,a,!0))}}),twttr.mediaType("DeviantArt",{title:"deviantART",icon:"photo",domain:"http://deviantart.com",flaggable:!0,matchers:{canonical:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/art\/(?:[\w\@-]+))/i,oldStyle:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/deviation\/(?:[\w\@-]+))/i,gallery:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/gallery\/#\/d(?:[\w\@-]+))/i,favMe:/^(#{protocol}?fav\.me\/(?:[\w\@-]+))/i,oldView:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/view\/(?:[\w\@-]+))/i},process:function(a,b){b=b||{},twttr.sandboxedAjax.send({url:"http://backend.deviantart.com/oembed",data:{url:this.slug,format:"jsonp",maxwidth:b.maxwidth},dataType:"jsonp",success:twttr.bind(this,function(b){this.data.href=this.url,this.data.name=this.constructor._name,this.data.src=b.thumbnail_url,this.data.author_name=b.author_name,this.data.author_url=b.author_url,a()})})},attribution:function(){var a="         <div class='media-attribution'>           <span>via</span>            <a target='_blank' class='media-attribution-link' href='{{author_url}}'>{{author_name}}</a>            from <img src='{{icon_url}}'/>           <a target='_blank' data-media-type='{{media_type}}' class='media-attribution-link' href='{{url}}'>{{title}}</a>         </div>";return Mustache.to_html(a,{url:this.constructor.domain,icon_url:twttr.assets.path("/partner-favicons/DeviantArt.ico"),title:this.constructor.title||this.constructor._name,media_type:this.constructor._name,author_name:this.data.author_name,author_url:this.data.author_url})},content:function(){var a='<div class="deviantart">                <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                  <img src="{{src}}"/>                </a>              </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Vimeo",{icon:"video",domain:"//vimeo.com",ssl:!0,flaggable:!0,height:150,matchers:{video:/^#{optional_protocol}?vimeo\.com\/(\d+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.thumbnail_url?b(c.data.thumbnail_url):b(null)})},process:function(a,b){var c=this;b=b||{},this.data.video_id=this.slug,twttr.sandboxedAjax.send({url:"//vimeo.com/api/oembed.json",dataType:"jsonp",data:{url:"http://vimeo.com/"+this.slug,width:b.maxwidth||446},success:function(b){c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a()}})},render:function(a){this.renderIframe(a,"//player.vimeo.com/video/"+this.data.video_id.replace(/[^0-9]/g,""))}}),twttr.mediaType("Etsy",{icon:"photo",domain:"http://etsy.com",ssl:!1,matchers:{itemListing:/^#{optional_protocol}?etsy\.com\/listing\/(\d+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.images&&c.data.images.length>0?b(c.data.images[0].url_170x135):b(null)})},process:function(a,b){var c=this;b=b||{},this.data.itemId=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,twttr.sandboxedAjax.send({url:"http://openapi.etsy.com/v2/public/listings/"+this.slug+".js",dataType:"jsonp",data:{detail_level:"high",api_key:"qev732j7b8j44eg5pqsb38k4",includes:"Images(url_170x135):6",fields:"listing_id,title,price,currency_code,quantity",maxwidth:b.maxwidth},success:function(b){var d=b.results[0];c.data.title=d.title;switch(d.currency_code){case"USD":c.data.price=d.quantity+" for $"+(d.price||0);break;default:c.data.price=d.quantity+" for "+(d.price||0)+" "+d.currency_code}c.data.images=d.Images;var e=$.map(d.Images,function(a,b){return'<a class="inline-media-image" data-inline-type="{{name}}" target="_blank" href="{{href}}">                      <img class="thumb" src="'+a.url_170x135+'"/>                    </a>'}).join(""),f='            <div class="etsy">              <h3>{{title}}</h3>              <p>{{price}}</p>              <p>'+e+"</p>            </div>";c.data.html=Mustache.to_html(f,c.data),a()}})},content:function(){return this.data.html}}),twttr.mediaType("Photozou",{icon:"photo",domain:"http://photozou.jp",flaggable:!0,matchers:{photo:/^#{optional_protocol}?photozou\.(?:com|jp)\/photo\/show\/\d+\/(\d+)/i},ssl:!1,getImageURL:function(a,c,d){var e=this;this.process(function(){e.data&&e.data.src?d&&d<120||a==b.constants.imageSizes.small?c(e.data.smallSrc):c(e.data.src):c(null)})},process:function(a){this.data.src="http://photozou.jp/p/img/"+this.slug,this.data.smallSrc="http://photozou.jp/p/thumb/"+this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="photozou">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("TwitPic",{icon:"photo",domain:"//twitpic.com",flaggable:!0,matchers:{media:/^#{optional_protocol}?twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i},ssl:!0,process:function(a){this.data.src=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},getImageURL:function(a,c){if(this.slug){var d="";a==b.constants.imageSizes.medium?d="//twitpic.com/show/thumb/"+this.slug:a=="small"?d="//twitpic.com/show/mini/"+this.slug:d="//twitpic.com/show/iphone/"+this.slug,c(d)}else c(null)},content:function(){var a='<div class="twitpic">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="//twitpic.com/show/large/{{src}}"/>                 </a>              </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Twitgoo",{icon:"photo",domain:"http://twitgoo.com",ssl:!1,flaggable:!0,matchers:{image:/^#{optional_protocol}?twitgoo\.com\/(?!a\/)([a-zA-Z0-9\-\?\=]+)/i},getImageURL:function(a,c){this.slug?c(b.util.supplant("http://twitgoo.com/{src}/img",{src:this.slug})):c(null)},process:function(a){this.data.src=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="twitgoo">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="http://twitgoo.com/{{src}}/img"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("DailyBooth",{icon:"photo",domain:"//dailybooth.com",ssl:!0,matchers:{photo1:/^#{optional_protocol}?dailybooth\.com\/(u\/\w+)/i,photo2:/^#{optional_protocol}?dailybooth\.com\/(\w+\/\w+)/i},getImageURL:function(a,c){var d=this;this.process(function(){d.data?a===b.constants.imageSizes.original?c(d.data.src):c(d.data.smallImage):c(null)})},process:function(a){var b=this;this.data.href=c(this.url),this.data.name=this.constructor._name;if(this.slug.match(/^u\/(\w+)/))var d=parseInt(RegExp.$1,36),e=this.getBaseTen(d);else{var e=this.slug.match(/\w+\/(\w+)/);if(!e){a();return}e=e[1]}twttr.sandboxedAjax.send({url:"//api.dailybooth.com/v1/picture/"+e+".json",dataType:"jsonp",type:"get",success:function(d){b.data.src=c(d.urls.large),b.data.smallImage=c(d.urls.small),a()}})},content:function(){var a='<div class="dailybooth">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}).methods({getBaseTen:function(a){if(Number.prototype.toFixed)a=a.toFixed(5),a=parseFloat(a);else{var b=Math.floor(a),c=a-b;a=b+Math.round(c*1e14)/1e14}return a}}),twttr.mediaType("YFrog",{domain:"//yfrog.com",ssl:!0,flaggable:!0,icon:function(a){var b=this.slug.charAt(this.slug.length-1);switch(b){case"j":case"p":case"b":case"t":case"g":return"photo";case"z":case"f":case"s":return"video"}},matchers:{media:/^#{optional_protocol}?yfrog\.(?:com|ru|com\.tr|it|fr|co\.il|co\.uk|com\.pl|pl|eu|us)\/(\w+)/i},getImageURL:function(a,c){this.slug?this.icon()==="video"?c(b.util.supplant("//yfrog.com/{id}:frame",{id:this.slug})):a===b.constants.imageSizes.small?c(b.util.supplant("//yfrog.com/{id}:twthumb",{id:this.slug})):c(b.util.supplant("//yfrog.com/{id}:tw1",{id:this.slug})):c(null)},process:function(a){this.data.media_id=this.slug,this.data.href=this.url.replace(/\/$/,""),this.data.name=this.constructor._name,a()},content:function(){var a,b=this.data.media_id.charAt(this.data.media_id.length-1);if(b=="j"||b=="p"||b=="b"||b=="t"||b=="g")a='<div class="yfrog">               <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                 <img src="//yfrog.com/{{media_id}}:iphone">               </a>             </div>';else if(b=="z"||b=="f"||b=="s")a='<embed                src="//yfrog.com/{{media_id}}:embed"                width="100%"                allowFullScreen="true"                wmode="transparent"                type="application/x-shockwave-flash"/>';return a||(a=""),Mustache.to_html(a,this.data)}}),twttr.mediaType("Lockerz",{icon:"photo",domain:"//www.lockerz.com",ssl:!0,matchers:{tweetphoto:/^#{optional_protocol}?tweetphoto\.com\/(\d+)/i,plixi:/^#{protocol}?(?:(?:m|www)\.)?plixi\.com\/p\/(\d+)/i,lockerz:/^#{protocol}?(?:(?:m|www)\.)?lockerz\.com\/s\/([0-9\?\=\- ]+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.src?b(c.data.src):b(null)})},process:function(a){this.data.src="//api.plixi.com/api/tpapi.svc/imagefromurl?size=medium&url="+encodeURIComponent(this.url),this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="lockerz">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}" />                 </a>              </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Kiva",{icon:"generic",domain:"http://www.kiva.org",ssl:!1,matchers:{project:/^#{optional_protocol}?kiva\.org\/lend\/(\d+)/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.kiva.org/services/oembed",dataType:"jsonp",jsonp:"jsonp",data:{url:"http://www.kiva.org/lend/"+this.slug,format:"jsonp",maxwidth:b.maxwidth},success:function(b){c.data.html=b.html,a()}})},content:function(){return this.data.html}}),twttr.mediaType("TwitVid",{icon:"video",domain:"//www.twitvid.com",ssl:!0,flaggable:!0,favicon:"//www.twitvid.com/favicon.ico",matchers:{video:/^#{optional_protocol}?twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i},process:function(a,b){this.data.media_id=this.slug,this.data.width=b&&b.maxwidth||425,this.data.height=this.calcHeight(this.data.width),a()},metadata:function(a){a({image:b.util.supplant("//www.twitvid.com/{media_id}:largethumb",this.data)})},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},render:function(a){this.renderIframe(a,twttr.proto+"://www.twitvid.com/embed.php?autoplay=0&guid="+this.data.media_id)}}),twttr.mediaType("GoogleVideo",{icon:"video",domain:"http://video.google.com",ssl:!1,flaggable:!0,matchers:{video:/^#{optional_protocol}video\.google\.com\/([a-zA-Z0-9_\-\?\=\&\#]+)/i},process:function(a,b){this.data.width=400,this.data.height=326,b&&b.maxwidth&&b.maxwidth<this.data.width&&(this.data.width=b.maxwidth,this.data.height=Math.round(b.maxwidth*326/400)),this.slug.match(/#docid=(\-?\d+)/)?(this.data.doc_id=RegExp.$1,a()):this.slug.match(/\?docid=(\-?\d+)/)&&(this.data.doc_id=RegExp.$1,a())},content:function(){var a='         <embed type="application/x-shockwave-flash"                 id="VideoPlayback"                 src="http://video.google.com/googleplayer.swf?docid={{doc_id}}&hl=en&fs=true"                 style="width:{{width}}px;height:{{height}}px"                 allowFullScreen="true"                 allowScriptAccess="always"                wmode="opaque" />';return Mustache.to_html(a,this.data)}}),twttr.mediaType("JustinTV",{icon:"video",domain:"http://justin.tv",ssl:!1,flaggable:!0,matchers:{embed:/^#{protocol_no_ssl}([a-zA-Z0-9_\-\?\=]*\.)?justin\.tv\/[a-zA-Z0-9]+(\/b\/\d+)?\/?(\?\w*?)?(#\w*)?$/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.thumbnail_url?b(c.data.thumbnail_url):b(null)})},process:function(a,b){var c=this,d=400,e=300;twttr.sandboxedAjax.send({url:"http://api.justin.tv/api/embed/from_url.json",dataType:"jsonp",jsonp:"jsonp",data:{url:c.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),f.thumbnail_url&&(c.data.thumbnail_url=f.thumbnail_url),a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Kickstarter",{icon:"generic",domain:"//kickstarter.com",ssl:!0,matchers:{project:/^#{optional_protocol}?(kickstarter\.com\/projects\/[a-zA-Z0-9_\-]+\/[a-zA-Z0-9_\-]+)/i},process:function(a){this.data.height="380px",this.data.width="220px",a()},render:function(a){var b=this.slug;b.slice(-1)!=="/"&&(b+="/"),b+="widget/card.html",this.renderIframe(a,twttr.proto+"://www."+b)}}),twttr.mediaType("MTV",{icon:"video",domain:"http://mtv.com",ssl:!1,matchers:{video:/^#{optional_protocol}?mtv\.com\/videos\/([a-z0-9\-\_]+\/)+[0-9]+\/[a-z0-9\-\_]+\.jhtml(#[a-z0-9\=\&]+)?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.mtv.com/videos/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.url=b.url,b.width>315?(c.data.width=315,c.data.height=Math.floor(b.height*315/b.width)):(c.data.height=b.height,c.data.width=b.width),a())}})},content:function(){var a='<object width="{{width}}" height="{{height}}">                <param name="movie" value="{{url}}"/>                <param name="allowFullScreen" value="true"/>                <param name="allowscriptaccess" value="always"/>                <param name="wmode" value="opaque"/>                <embed src="{{url}}"                        type="application/x-shockwave-flash"                        allowscriptaccess="always"                        allowfullscreen="true"                        wmode="opaque"                        width="{{width}}"                        height="{{height}}"/>              </object>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("WashingtonPost",{icon:"video",domain:"http://washingtonpost.com",matchers:{video:/(^(?:#{protocol}?(?:[\w\-\_]+\.))?washingtonpost\.com\/wp-dyn\/content\/video\/\d{4}\/\d{2}\/\d{2}\/VI\d+\.html(#{wildcard})?)/i},ssl:!1,process:function(a,b){var c=this,d=400,e=225;twttr.sandboxedAjax.send({url:"http://specials.washingtonpost.com/tv/info.json",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("MSNBC",{icon:"video",domain:"http://msnbc.com",ssl:!1,matchers:{video:/(^(?:#{protocol}?(?:[\w\-\_]+\.))?msnbc\.msn\.com\/id\/\d{1,8}\/vp\/\d{1,8}(#{wildcard})?)/i},process:function(a,b){var c=this,d=420,e=245;twttr.sandboxedAjax.send({url:"http://www.polls.newsvine.com/_labs/twitter/oembed",type:"GET",dataType:"jsonp",data:{format:"jsonp",url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.resizeHtmlEmbed(f.html,b,d,e),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("CNN",{icon:"video",domain:"http://cnn.com",title:"CNN Video",ssl:!1,deciderKey:"phoenix_cnn_details",matchers:{video:/(^(?:#{protocol}?(?:(?:www|edition|us)\.)?)?cnn\.com\/video\/[\?|#]\/#{wildcard})/i},process:function(a,b){var c=this,d=this.url,e=416,f=374,g=d.split("?");g.length>2&&(g.pop(),d=g.join("?")),twttr.sandboxedAjax.send({url:"http://newspulse.cnn.com/widget/json/twitter-video",type:"GET",dataType:"jsonp",data:{format:"jsonp",maxwidth:b&&b.maxwidth||e,url:d},success:function(d){d.error||(c.data.embed=c.resizeHtmlEmbed(d.html,b,e,f),c.data.attribution_url="http://cnn.com/video",c.data.width=d.width,c.data.height=d.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Apple",{icon:twttr.isT1?function(){switch(this.matchLabel){case"song":return"song";case"album":return"album";case"music_video":case"video":case"movie":case"tv":return"video";case"software":return"software";case"event":case"preorder":case"playlist":case"ping_playlist":case"podcast":case"book":default:return"generic"}}:"song",domain:"http://itunes.apple.com",deciderKey:"phoenix_apple_itunes",matchers:{song:/^#{itunes_protocol}(?:\/album)\/.*\?i=/i,album:/^#{itunes_protocol}(?:\/album)\//i,event:/^#{itunes_protocol}\/event\//i,music_video:/^#{itunes_protocol}(?:\/music-video)\//i,video:/^#{itunes_protocol}(?:\/video)\//i,software:/^#{itunes_protocol}(?:\/app)\//i,playlist:/^#{itunes_protocol}(?:\/imix)\//i,ping_playlist:/^#{itunes_protocol}(?:\/imixes)\?/i,preorder:/^#{itunes_protocol}(?:\/preorder)\//i},ssl:!1,getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.src?b(c.data.src):b(null)})},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://itunes.apple.com/WebObjects/MZStore.woa/wa/remotePreview",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,c.data.attribution_icon=b.attribution_icon,c.data.attribution_url=b.attribution_url,c.data.attribution_title="iTunes",b.favicon&&(c.data.attribution_icon=b.favicon),b.faviconLink&&(c.data.attribution_url=b.faviconLink),b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}});var d={_queue:[],push:function(a,b){b===!0?this._queue.unshift(a):this._queue.push(a),this._process()},_process:function(){var a=this;if(this._isProcessing)return;this._isProcessing=!0,setTimeout(function(){var b=a._queue.shift();a._isProcessing=!1,b&&(b(),a._process())},200)}};twttr.mediaType("Instagram",{icon:"photo",domain:"//instagr.am",title:"Instagram",deciderKey:"phoenix_instagram_and_friends",ssl:!0,height:301,matchers:{video:/^#{optional_protocol_subdomain}?(?:instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+\/?)/i},getImageURL:function(a,c){var d=this;this.process(function(){if(d.data&&d.data.href){var e=b.constants.imageSizes;a===e.small||a===e.medium?c(d.data.smallSrc):c(d.data.src)}else c(null)},{size:a})},process:function(a,c){this.data.href=Mustache.to_html("{{domain}}/p/{{slug}}",{domain:this.constructor.domain,slug:this.slug}),this.data.src=b.util.joinPath(this.data.href,"media/?size=l"),this.data.smallSrc=b.util.joinPath(this.data.href,"media/?size=t"),this.data.name=this.constructor._name,d.push(a,c&&c.size===b.constants.imageSizes.large)},content:function(){var a='        <div class="instagram">          <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">            <img src="{{src}}"/>          </a>        </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Rdio",{icon:"song",domain:"//rdio.com",ssl:!0,matchers:{rdio:/^#{optional_protocol}(?:rd\.io|rdio\.com)\/#{wildcard}/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//rdio.com/api/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth||390},success:function(b){b.error||(c.data.embed=c.resizeHtmlEmbed(b.html),a())}})},content:function(){return this.data.embed},getImageURL:function(a,b){var c=this;this.process(function(){b(this.url)},{maxwidth:500})}}),twttr.mediaType("Dipdive",{domain:"http://dipdive.com",ssl:!1,deciderKey:"phoenix_dipdive_details",matchers:{photos:/^#{optional_protocol_subdomain}?dipdive\.com\/(((?:member\/[a-zA-Z0-9\-]+\/)?pictures\/([0-9]+))|(v\/[a-zA-Z0-9]+))/i,videos:/^#{optional_protocol_subdomain}?dipdive\.com\/(((?:member\/[a-zA-Z0-9\-]+\/)?media\/([0-9]+))|(v\/[a-zA-Z0-9]+))/i},icon:function(a){return this._icon?this._icon:(this.url.match(/pictures/)?this._icon="photo":this._icon="video",this._icon)},process:function(a,b){var c=this,d=425,e=385;b=b||{},twttr.sandboxedAjax.send({url:"http://api.dipdive.com/oembed.jsonp",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(f.type==="photo"?(c.data.type="photo",c.data.href=f.url,c.data.name=c.constructor._name):(c.data.embed=c.resizeHtmlEmbed(f.html,b,d,e),c.data.width=f.width,c.data.height=f.height),a())}})},content:function(){var a;return this.data.type==="photo"?(a='<div class="dipdive">               <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                 <img src="{{href}}"/>               </a>             </div>',Mustache.to_html(a,this.data)):this.data.embed},flaggable:!0}),twttr.mediaType("SlideShare",{icon:"generic",domain:"http://slideshare.com",ssl:!0,deciderKey:"phoenix_instagram_and_friends",matchers:{slides:/^#{optional_protocol}?slideshare\.(?:com|net)\/[a-zA-Z0-9\.]+\/[a-zA-Z0-9-]+\/?#{wildcard}?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"https://www.slideshare.net/api/oembed/2",type:"GET",dataType:"jsonp",data:{url:this.url,format:"json",maxwidth:b.maxwidth||390},success:function(b){b.error||(c.data.embed=c.resizeHtmlEmbed(b.html),c.data.attribution_url=b.author_url,c.data.attribution_title=b.author_name,a())}})},content:function(){return this.data.embed},flaggable:!0}),twttr.mediaType("BlipTV",{icon:"video",domain:"//blip.tv",flaggable:!0,title:"blip.tv",ssl:!1,deciderKey:"phoenix_instagram_and_friends",matchers:{videos:/^#{optional_protocol}?blip\.tv\/(?:(?:file\/[\w-]+)|(?:(?:[\w-]+\/)?[\w-]+-(?:\d+)))\/?/i},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.thumbnail_url)})},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//blip.tv/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Livestream",{icon:"video",domain:"http://www.livestream.com",ssl:!1,flaggable:!0,matchers:{wwwlivestream:/^#{optional_protocol}?livestream\.com\/[\w_]+(\/#{wildcard})?/i,livestream:/^#{protocol}?livestre\.am\/[\w_]+(\/#{wildcard})?/i,twitcam:/^#{protocol}?twitcam\.(?:livestream\.)com\/[\w_]+(\/#{wildcard})?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.livestream.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("WallStreetJournal",{icon:"video",domain:"http://online.wsj.com",title:"The Wall Street Journal Digital Network",ssl:!1,matchers:{video:/^#{protocol}?online\.wsj\.com\/video\/[A-Z0-9a-z\-]+\/[A-Z0-9a-z\-]+\.html/i},process:function(a,b){var c=this,d=450,e=344;b=b||{},twttr.sandboxedAjax.send({url:"http://online.wsj.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Hulu",{icon:"video",domain:"http://www.hulu.com",ssl:!1,height:253,matchers:{video:/^#{optional_protocol}?hulu\.com\/w(atch)?\/([a-zA-Z0-9]+)/i},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.thumbnail_url)})},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.hulu.com/api/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=c.useOpaqueModeForFlash(b.html),c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("NHL",{icon:"video",domain:"http://www.nhl.com",ssl:!1,matchers:{video:/^#{protocol}?video\.([a-z]{4,11}\.)?nhl\.com\/videocenter\/console\?(((catid=-?\d+&)?id=\d+)|(hlg=\d{8},\d,\d{1,4}(&event=[A-Z0-9]{4,6})?)|(hlp=\d{5,10}(&event=[A-Z0-9]{4,6})?))/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://video.nhl.com/videocenter/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=c.useOpaqueModeForFlash(b.html),c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Meetup",{icon:"generic",domain:"//www.meetup.com",deciderKey:"phoenix_local_meetup",ssl:!0,matchers:{anevent:/^#{protocol_no_ssl}?(?:(((www|dev)\.){0,2}?meetup.com)|meetu.ps)\/(?:u\/)?[\w\-]{3,}(?:[a-zA-Z0-9_#\.\-\?\&\=\/]+)/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//api.meetup.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.html=b.html,a())}})},content:function(){return this.data.html}}),twttr.mediaType("Plancast",{icon:"generic",domain:"//plancast.com",deciderKey:"phoenix_local_plancast",ssl:!0,matchers:{anevent:/^#{protocol}?(?:[a-z0-9]+\.)?plancast\.com\/p\/(?:[a-z0-9]+)\/?$/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var d=this;b=b||{},twttr.sandboxedAjax.send({url:"//plancast.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(d.data.src=c(b.src),b.height&&(d.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Gowalla",{icon:"generic",domain:"//www.gowalla.com",deciderKey:"phoenix_local_gowalla",ssl:!0,matchers:{anevent:/^#{protocol}?(((go)?wal.la)\/([chpnt])\/\w+\/?|gowalla.com\/(trips|challenges|checkins|pins)\/\d+\/?)/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//gowalla.com/api/twitter_oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Foursquare",{icon:"generic",domain:"//www.foursquare.com",deciderKey:"phoenix_local_foursquare",ssl:!0,matchers:{anevent:/^#{optional_protocol}?foursquare\.com\/([a-zA-Z0-9\-]+)\/checkin\/(#{wildcard})/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"https://api.foursquare.com/services/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Amazon",{icon:"generic",domain:"//www.amazon.com",deciderKey:"phoenix_amazon_details",ssl:!0,matchers:{review:/^#{protocol}?www\.amazon\.(com|de|fr|ca|it|(?:co\.(?:jp|uk)))(?:(?!(\/[^\/]*)?\/[bs][\/\?]|\/gp\/browse\.html|\/aw\/ri\/|\/gp\/search|\/search|\/gp\/feature|\/gp\/goldbox|\/gp\/registry))(?:#{wildcard}?)/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=twttr.media.types.Amazon.matchers,d=this,e=this.url;b=b||{},matches=e.match(c.review),matches[1]&&twttr.sandboxedAjax.send({url:"//www.amazon."+matches[1]+"/gp/twitter/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(d.data.src=b.src,b.height&&(d.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("AolVideo",{icon:"video",domain:"http://www.aol.com",title:"Aol",deciderKey:"phoenix_aol_video",matchers:{video:/^#{protocol_no_ssl}?share\.aolvideo\.com\/twitter\.php\?video\=(#{wildcard})/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://share.aolvideo.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Photobucket",{icon:"photo",domain:"http://photobucket.com",flaggable:!0,matchers:{user_groups:/^#{protocol}?(?:g?(?:i|s)(?:\d+|mg))\.photobucket\.com\/(?:albums|groups)\/(?:#{wildcard})/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://photobucket.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url.replace(/^([^?]*[^/])(?=\?)/,"$1/"),maxwidth:b.maxwidth},success:function(b){b.error||(c.data.href=b.url,c.data.name=c.constructor._name,a())}})},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.href)})},render:function(a){var b='        <div class="photobucket">          <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">            <img src="{{href}}"/>          </a>        </div>';$(a).append(Mustache.to_html(b,this.data))}}),twttr.mediaType("With",{icon:"photo",domain:twttr.isSSL()?"https://with.me":"http://with.me",ssl:!0,deciderKey:"phoenix_withme_details",matchers:{project:/^#{optional_protocol}?with\.me[\/\?]\??[a-zA-Z0-9]+$/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//with.me/services/oembed",dataType:"jsonp",type:"GET",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){!b.error&&b.hasOwnProperty("url")&&(c.data.href=c.url,c.data.src=b.url,c.data.title=b.title,a())}})},content:function(){var a='           <div class="with-me">             <a class="inline-media-image" href="{{href}}" target="_blank">               <img src="{{src}}"/>             </a>           </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Facebook",{icon:"photo",domain:twttr.isSSL()?"https://facebook.com":"http://facebook.com",ssl:!0,deciderKey:"phoenix_facebook_details",matchers:{project:/^#{optional_protocol}?facebook\.com\/([a-zA-Z0-9_#\.\-\?\&\=\/])*pid=(#{wildcard})/i},process:function(a,b){var c="https://www.facebook.com/twitter/photo/?id={{id}}&l={{l}}&pid={{pid}}",d=this;d.data.href=this.url;var e=twttr.util.paramsFromUrl(this.url);e&&e.id&&e.l&&e.pid&&(d.data.src=Mustache.to_html(c,e),a())},getImageURL:function(a,b){var c=this;this.process(function(){c.data.src?b(c.data.src):b(null)})},content:function(){var a='            <div class="facebook-dp">              <a class="inline-media-image" href="{{href}}" target="_blank">                <img src="{{src}}"/>              </a>            </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("WordPress",{icon:"generic",domain:"//wordpress.com",ssl:!0,deciderKey:"phoenix_wordpress_details",matchers:{tinyUrl:/^#{optional_protocol}?(?:[a-z0-9]+\.)?wp\.me[\/\?][a-zA-Z0-9_#\.\-\?\&\=\/]+$/i,standardUrl:/^#{optional_protocol}?(?:[a-z0-9]+\.)?wordpress\.com[\/\?][a-zA-Z0-9_#\.\-\?\&\=\/]+$/i},process:function(a,b){var c=this;b=b||{};var d="//public-api.wordpress.com/oembed/1.0/?for=twitter.com&as_article=true",e={url:this.url};twttr.app.isOnPage("permalink")||(e.maxwidth=433),twttr.sandboxedAjax.send({url:d,dataType:"jsonp",type:"GET",data:e,success:function(b){!b.error&&b.title&&(c.data.href=c.url,b.thumbnail_url&&b.thumbnail_url.indexOf("http:")>=0&&(b.thumbnail_url=b.thumbnail_url.replace("http","https")),c.data=twttr.merge(c.data,b),a())}})},content:function(){var a='                  <div id="wp-details" class="component"><div class="wp-inset">                  <a href="{{href}}" class="wp-link" target="_blank">                  <h1 class="wp-news-headline">{{title}}</h1></a>                  <p class="wp-news-description">{{{body}}}</p>                  {{#thumbnail_url}}                  <div><a class="inline-media-image" href="{{href}}" target="_blank">                  <img class="wp-img" src="{{thumbnail_url}}"/>                  </a></div>                  {{/thumbnail_url}}                  </div></div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("WhoSay",{domain:"//www.whosay.com",ssl:!0,flaggable:!0,deciderKey:"phoenix_whosay_details",icon:"photo",matchers:{media:/^#{optional_protocol}?whosay\.com\/[^\/\s]+\/photos\/(\d+)/i},getImageURL:function(a,c){if(this.slug){if(a===b.constants.imageSizes.medium)return c(b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_melt.jpg",{id:this.slug}));if(a===b.constants.imageSizes.large)return c(b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_lalt.jpg",{id:this.slug}))}c(null)},process:function(a){this.data.href=this.url,this.data.name=this.constructor._name,this.data.src=b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_melt.jpg",{id:this.slug}),a()},content:function(){var a='<div class="whosay">                  <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                    <img alt="" src="{{src}}">                  </a>                </div>';return Mustache.to_html(a,this.data)}}),a()})}),provide("geo/Map",function(a){using().as(function(b){twttr.klass("twttr.geo.Map",function(a,b){var c=this;if(!twttr.geo.mapsAvailable())return;var d={mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,scrollwheel:!1,navigationControl:!0,navigationControlOptions:{position:google.maps.ControlPosition.TOP_LEFT,style:google.maps.NavigationControlStyle.SMALL}};c.map=new google.maps.Map(a.get(0),twttr.merge(d,b)),c.bounds=new google.maps.LatLngBounds,c.initialized=!0,c.$canvas=a,c.addListener("tilesloaded",function(){c.resize()})}).methods({addListener:function(a,b){google.maps.event.addListener(this.map,a,b)},createOverlay:function(a){function c(){this.setMap(b.map)}var b=this;c.prototype=new google.maps.OverlayView,c.prototype.onAdd=function(){},c.prototype.onRemove=function(){},c.prototype.draw=function(){a&&(setTimeout(a,0),a=null)},b.mapOverlay=new c},getProjection:function(){var a=this.mapOverlay;return a&&a.getProjection()},latLngToContainerPoint:function(a){var b=this;a=b.normalizeLatLng(a);var c=b.getProjection();return c?c.fromLatLngToContainerPixel(a):null},latLngToOverlayPoint:function(a){var b=this;a=b.normalizeLatLng(a);var c=b.getProjection();return c?c.fromLatLngToDivPixel(a):null},containerPointToLatLng:function(a,b){return this.getProjection().fromContainerPixelToLatLng(new google.maps.Point(a,b))},extendBounds:function(a){this.bounds.extend(a)},normalizeLatLng:function(a){return $.isArray(a)?new google.maps.LatLng(a[1],a[0]):a},addPoint:function(a,b){var c=this;a=c.normalizeLatLng(a),c.extendBounds(a);var d=twttr.geo.POI_MARKER_SIZE,e=twttr.geo.POI_MARKER_HOTSPOT,f=new google.maps.MarkerImage("/phoenix/img/pin.png",new google.maps.Size(d.width,d.height),null,new google.maps.Point(e.x,e.y));c.marker=new google.maps.Marker({flat:!0,icon:f,map:c.map,position:a,clickable:!1,zIndex:2});if(b){var g=new google.maps.MarkerImage(b,null,null,new google.maps.Point(13,32),new google.maps.Size(24,24));c.avatar=new google.maps.Marker({flat:!0,icon:g,map:c.map,position:a,zIndex:3})}},addPoi:function(a,b){var c=twttr.is.fn(b);a=this.normalizeLatLng(a),this.extendBounds(a);var d=new google.maps.MarkerImage("/phoenix/img/poi-pin.png",null,null,new google.maps.Point(twttr.geo.POI_MARKER_HOTSPOT.x,twttr.geo.POI_MARKER_HOTSPOT.y)),e=new google.maps.Marker({flat:!0,icon:d,map:this.map,position:a,draggable:c,clickable:c,zIndex:2});return c&&google.maps.event.addListener(e,"position_changed",function(){var a=e.getPosition();b(a.lat(),a.lng())}),e},addFocusablePoint:function(a,b,c){var d=this;a=d.normalizeLatLng(a),d.extendBounds(a);var e=new google.maps.MarkerImage("/phoenix/img/place-minor10x.png",new google.maps.Size(10,10),new google.maps.Point(10,0),new google.maps.Point(5,5)),f=new google.maps.MarkerImage("/phoenix/img/place-minor10x.png",new google.maps.Size(10,10),null,new google.maps.Point(5,5)),g=new google.maps.Marker({flat:!0,icon:f,map:d.map,position:a,clickable:b!==undefined,zIndex:2});return b&&(google.maps.event.addListener(g,"mouseover",function(c){b(!0,d.latLngToContainerPoint(a))}),google.maps.event.addListener(g,"mouseout",function(c){b(!1,d.latLngToContainerPoint(a))})),c&&google.maps.event.addListener(g,"click",function(a){c()}),function(a){a?(g.setIcon(e),g.setZIndex(3)):(g.setIcon(f),g.setZIndex(2))}},extendBoundsToIncludeCircle:function(a,b){if(b<200)return;var c=new google.maps.Circle({map:null,center:this.normalizeLatLng(a),radius:b,clickable:!1,fillColor:"#0040FF",fillOpacity:.08,strokeColor:"#2929D4",strokeOpacity:.7,strokeWeight:.5,zIndex:1}),d=c.getBounds();this.extendBounds(d.getNorthEast()),this.extendBounds(d.getSouthWest())},addPlacePolygon:function(a){a=a[0];var b=[];for(var c=0;c<a.length;c++){var d=this.normalizeLatLng(a[c]);b.push(d),this.extendBounds(d)}new google.maps.Polygon({path:b,strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:.5,fillColor:"#FF0000",fillOpacity:.2,map:this.map})},isEmpty:function(){return this.bounds.isEmpty()},adjustBounds:function(a,b){var c=this;if(this.isEmpty())return;c.fitBounds(c.bounds,a,b)},MIN_LAT:-85.05113,MAX_LAT:85.05113,X_FROM_LNG:256/360,Y_FROM_RADIANS:-256/(2*Math.PI),DEGREES_FROM_RADIANS:180/Math.PI,MAX_CONTENT_WIDTH_RATIO:.9,MAX_CONTENT_HEIGHT_RATIO:.9,_worldXFromLng:function(a){return a*this.X_FROM_LNG},_worldYFromLat:function(a){var b=this;a=Math.max(b.MIN_LAT,Math.min(b.MAX_LAT,a));var c=Math.sin(a/b.DEGREES_FROM_RADIANS);return Math.log((1+c)/(1-c))*.5*b.Y_FROM_RADIANS},_lngFromWorldX:function(a){return a/this.X_FROM_LNG},_latFromWorldY:function(a){var b=2*Math.atan(Math.exp(a/this.Y_FROM_RADIANS));return(b-.5*Math.PI)*this.DEGREES_FROM_RADIANS},_zoomFromPixelDelta:function(a,b,c){var d=Math.floor(Math.log(Math.abs(a/b))/Math.LN2);return isNaN(d)?c:Math.max(0,Math.min(c,d))},fitBounds:function(a,b,c){var d=this;d.bounds=a;var e=a.getNorthEast(),f=a.getSouthWest(),g=d._worldXFromLng(f.lng()),i=d._worldXFromLng(e.lng()),j=d._worldYFromLat(e.lat()),k=d._worldYFromLat(f.lat()),l=d._zoomFromPixelDelta(d.$canvas.width()*d.MAX_CONTENT_WIDTH_RATIO,i-g,b),m=d._zoomFromPixelDelta(d.$canvas.height()*d.MAX_CONTENT_HEIGHT_RATIO,k-j,b);d.map.setZoom(Math.min(l,m));if(!c){var n=d._latFromWorldY((j+k)*.5);c=new google.maps.LatLng(n,a.getCenter().lng())}d.map.setCenter(d.normalizeLatLng(c))},getCenter:function(){return this.map.getCenter()},resize:function(){google.maps.event.trigger(this.map,"resize")}}),a(twttr.geo.Map)})}),provide("geo/Location",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.geo.Location",function(){var a=this;a.$empty=a.$fakeFocus=a.$dropdown=a.$input=a.$helpText=$([]),a.clearLocation(),a.closeDropdownClick=function(b){var c=a.$dropdown.get(0);c&&b.target!==c&&!$.contains(c,b.target)&&a.closeDropdown()}}).statics({GEO_WEBCLIENT_COOKIE:"geo_webclient",MS_WAIT_BETWEEN_GET_LOCATIONS:9e5,LOCATION_URL:"/account/location.json"}).methods({onRegisterTweetBox:function(a,b){var c=this,d=a.find(".geo-control");c.showGeoState(),d.find("a.geo-location").click(function(a){a.preventDefault(),d.find(".geo-location-dropdown").length||setTimeout(function(){$(".geo-control .geo-icon").tipsy("hide"),c.isLocationOn()?(c.openDropdown(d),b&&b()):c.isGeoEnabled()?c.turnLocationOn():(new twttr.widget.GeoPromoDialog).show()},0)}),d.find(".geo-icon").tipsy({gravity:"nw",offset:5,fade:!0,opacity:.9,title:function(){return c.isLocationOn()?"":h(_("Add your location"))}})},onFocusTweetBox:function(a){this.isLocationOn()&&!this.isUpdatingLocation()&&(!this.cityId()||this.now()-this.lastLocationTime>=this.constructor.MS_WAIT_BETWEEN_GET_LOCATIONS)&&this.updateLocation()},clearLocation:function(){this.location={},this.cache={},this.searchKeyShowing=null,this.$dropdown.remove(".override-location"),this.lastMessage="",this.lastFetchId=null},isUpdatingLocation:function(){return!!this.lastFetchId},updateLocation:function(a){var c=this;if(!c.isGeoUiAllowed()){c.processNewLocation(null);return}c.isUpdatingLocation()||(c.clearLocation(),c.showGeoState(a?_("Changing location..."):_("Getting location...")));var d={};c.lastFetchId=d,twttr.currentUser.geoLocation({override_place_id:a,spoof_ip:b.util.params().spoof_ip,success:function(a){c.lastFetchId===d&&c.processNewLocation(a)},error:function(a){if(c.lastFetchId===d){var b=a.status&&a.status===503;c.processNewLocation(b?{status:"busy"}:null)}}})},places:function(){return this.location&&this.location.places||[]},place:function(){return this.places()[0]||{}},cityId:function(){var a=this.place();return a.full_name&&a.id||""},cityName:function(){var a=this.place();return a.id&&a.full_name||""},isGeoUiAllowed:function(){return twttr.decider.isAvailable("geo_ui")&&twttr.decider.isAvailable("geo_location")},isGeoEnabled:function(){return twttr.currentUser&&twttr.currentUser.geoEnabled},isLocationOn:function(){return this.isGeoEnabled()&&!!$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE)},turnLocationOn:function(){$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE,"1",{expires:3650}),this.updateLocation()},turnLocationOff:function(){$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE,null),this.clearLocation(),this.showGeoState()},processNewLocation:function(a){var b=this;b.lastFetchId=null;var c=a&&a.status;if(c==="busy"||c==="ok")b.lastLocationTime=this.now();b.location=a,b.cache={},b.showGeoState(b.cityName()||c==="unresolved"&&_("Unknown location")||_("Location service unavailable")),b.inputChanged(),b.showPlaceSuggestions()},now:function(){return(new Date).getTime()},showGeoState:function(a){var b=this.isLocationOn();this.lastMessage=b&&(a||this.lastMessage)||"";var c=this.lastMessage!=="";$("span.geo-control span.geo-icon").toggleClass("geo-icon-on",b).toggleClass("geo-icon-ok",b&&!!this.cityId()),twttr.helpers.ellipsify($("span.geo-control span.geo-text").html(h(this.lastMessage)),!0),$("span.geo-control span.geo-dropdown-icon").toggle(c).css("visibility","visible")},openDropdown:function(a){var b=this;b.closeDropdown(),$(document).add("textarea").bind("click",b.closeDropdownClick);var c=(new twttr.views.GeoLocationDropdown).$html();b.$dropdown=c,b.$input=c.find("input"),b.$helpText=c.find(".help-text"),b.$helpText.click(function(a){a.preventDefault(),a.stopPropagation(),b.$input.focus()}),c.find(".geo-turn-off-item a").bind("select",function(){b.closeDropdown(),b.turnLocationOff()}).click(function(a){a.preventDefault(),$(this).trigger("select")}),c.find(".glass").click(function(a){a.stopPropagation(),b._updateSearchResults(!0)}),c.delegate(".override-location a","select",function(){b.updateLocation($(this).attr("data-place-id")),b.closeDropdown()}).delegate(".override-location a","click",function(a){a.preventDefault(),$(this).trigger("select")}).delegate(".focusable","mousemove",function(){b.setFakeFocus($(this))}).delegate(".focused","mouseout",function(){b.setFakeFocus(b.$empty)});var d=a.find(".geo-icon"),e=d.position(),f=Math.round(e.top+d.outerHeight());c.css({left:e.left,top:f}),b.searchKeyShowing=null,b.showPlaceSuggestions(),b.setupInput(),a.append(c),b.$input.focus().select()},closeDropdown:function(){this.$dropdown.remove(),this.$fakeFocus=this.$empty,$(document).add("textarea").unbind("click",this.closeDropdownClick)},showSearchError:function(a){this.$dropdown.find(".location-error").text(a)},showPlaceSuggestions:function(){var a=this.$dropdown,b=(new twttr.views.GeoLocationDropdownItems({places:this.places()})).html();a.find(".override-location").remove(),a.find(".geo-turn-off-item").before(b),a.find(".override-location:first").addClass("checked-item padding-above"),this.updateMenuSeparators()},updateMenuSeparators:function(){var a=this.$dropdown;a.find(".location-search-result:first").addClass("padding-above"),a.find(".override-location:last,").addClass("separator-below"),a.find(".location-search-result:last").addClass("separator-below"),a.find("li:last").removeClass("separator-below")},setupInput:function(){var a=this;a.$input.click(function(a){a.stopPropagation()}).keydown(function(c){c.stopPropagation();if(c.keyCode===b.constants.keyCodes.escape)a.closeDropdown();else switch(c.keyCode){case b.constants.keyCodes.upArrow:a.arrowUp(),a.arrowKeyDownEvent=!0,c.preventDefault();break;case b.constants.keyCodes.downArrow:a.arrowDown(),a.arrowKeyDownEvent=!0,c.preventDefault();break;case b.constants.keyCodes.enter:a.hasFakeFocus()?a.$fakeFocus.find("a").trigger("select"):a.updateSearchResults(!0);default:a.inputChanged()}}).keypress(function(c){c.stopPropagation();if(c.charCode===0&&!a.arrowKeyDownEvent)switch(c.keyCode){case b.constants.keyCodes.upArrow:a.arrowUp(),c.preventDefault();break;case b.constants.keyCodes.downArrow:a.arrowDown(),c.preventDefault()}a.arrowKeyDownEvent=!1}).keyup(function(a){a.stopPropagation()}).change(function(){a.inputChanged()}).mousedown(function(){a.setFakeFocus(a.$empty)}).focus(function(){a.setFakeFocus(a.$empty)})},arrowUp:function(){var a=this.$fakeFocus.prevAll(".focusable:first");a.length||(a=this.$dropdown.find(".focusable:last")),this.setFakeFocus(a)},arrowDown:function(){var a=this.$fakeFocus.nextAll(".focusable:first");a.length||(a=this.$dropdown.find(".focusable:first")),this.setFakeFocus(a)},hasFakeFocus:function(){return!!this.$fakeFocus.length},setFakeFocus:function(a){this.$fakeFocus.removeClass("focused"),this.$fakeFocus=a.addClass("focused")},inputChanged:function(){var a=this;setTimeout(function(){(a.$input.val()||"")!==""&&a.$helpText.hide(),setTimeout(function(){a.updateSearchResults(!1)},0)},0)},updateSearchResults:function(a){var b=this,c=b.$input.val()||"";a&&c?b.enterQuery=c:c!==b.enterQuery&&(b.enterQuery=null);if(b.isUpdatingLocation())return;var d=!b.enterQuery,e=(d?"~":"=")+c;e!=b.searchKeyShowing&&b.setFakeFocus(b.$empty);if(b.searchKeyShowing===e||b.searchKeySearching===e||d&&b.searchKeySearching)return;var f=c?b.cache[e]:[];f?b.showSearchResults(f,e):b.search(e)},centroid:function(){var a=this.place();if(!a.bounding_box||a.bounding_box.type!=="Polygon"||!a.bounding_box.coordinates)return null;var b=a.bounding_box.coordinates[0];return!b||b.length!==4?null:{lat:(b[0][1]+b[2][1])*.5,lon:(b[0][0]+b[2][0])*.5}},search:function(a){var b=this,c=a.charAt(0)==="~",d=a.substr(1);b.$dropdown.addClass("geo-location-dropdown-searching"),b.searchKeySearching=a,b.showSearchError(_("Searching places...")),twttr.API.Place.search(twttr.merge({max_results:5,granularity:"neighborhood",autocomplete:c?"true":"false",query:d,full_geom:"false",success:function(c){var d=twttr.geo.placesFromApi(c);b.cache[a]=d,b.searchKeySearching===a&&(b.searchKeySearching=null,b.showSearchError("")),b.$dropdown.removeClass("geo-location-dropdown-searching"),b.updateSearchResults()},error:function(){b.$dropdown.removeClass("geo-location-dropdown-searching"),b.searchKeySearching===a?(b.showSearchError(_("Location service unavailable")),b.searchKeySearching=null):b.updateSearchResults()}},b.centroid()))},showSearchResults:function(a,b){this.searchKeyShowing=b,a.length===0&&b.length>1&&this.showSearchError(_("No search results")),this.$dropdown.find(".location-search-result").remove();var c=(new twttr.views.GeoLocationDropdownItems({places:a,for_search_results:!0})).html();this.$dropdown.find(".query-location").after(c),this.updateMenuSeparators()}}),twttr.app.waitForSignal("init",function(a){twttr.geo.location=new twttr.geo.Location}),a(twttr.geo.Location)})}),provide("control/Dropdown",function(a){using().as(function(b){(function(){var a={view:"Control"};twttr.klass("twttr.control.Base",function(b){this.options=$.extend({},a,b),this.itemView=twttr.views.DefaultDropdownItem,this.options.itemView&&(this.itemView=twttr.is.string(this.options.itemView)?twttr.views[this.options.itemView]:this.options.itemView)}).methods(twttr.EventProvider).methods({render:function(a,b){var c=this.viewData();this.view=new twttr.views[this.options.view](c),this.$dropdown=this.view.$html(),$(a)[b](this.$dropdown)},viewData:function(){return this.options}}),twttr.augmentString("twttr.helpers.control",function(a,b){var c=twttr.klass("twttr.control."+a,b);return c.subclassOf(twttr.control.Base),c}),function(){var a={direction:"left",view:"Dropdown"},b=[];twttr.helpers.control("Dropdown",function(c,d){b.push(this),this.$controller=$(c);var d=$.extend({},a,d);this.items=d.items||[],twttr.control.Dropdown.uber.constructor.call(this,d),this.registerEvents()}).statics({_registeredHtmlClick:!1,caches:{},createCache:function(a){this.caches[a]={}},closeAll:function(){twttr.each(b,function(a){a.close()})}}).methods({defaultDividerView:twttr.views.DefaultDropdownDivider,registerEvents:function(){this.$controller.bind("click",twttr.bind(this,function(a){this.toggle()}))},applyDirection:function(){this.$dropdown.css({left:this.options.direction=="left"?"0":"auto",right:this.options.direction=="right"?"0":"auto"})},flushItems:function(){this.$dropdown.empty(),this.items=[]},setItemsFromCallback:function(){var a=this;a.flushItems(),a.itemsCallback(function(b){a.addItems(b),a.registerItemHandlers()})},disable:function(){this.close(),this.$controller.unbind("click")},enable:function(){this.registerEvents()},open:function(a){this.constructor.closeAll(),this.itemsCallback&&this.setItemsFromCallback(),this.$controller.addClass("open").addClass("button-active"),this.$dropdown.css({top:this.$container?this.$container.outerHeight():this.$controller.outerHeight(),visibility:"visible"}),a&&this.$dropdown.css({opacity:0}).animate({opacity:1},{duration:500,queue:!1});var b=twttr.bind(this,function(a){this.$controller.get(0)!==a.target&&!$.contains(this.$controller.get(0),a.target)&&($("#doc").unbind("click",b),this.close())});$("#doc").bind("click",b)},close:function(a){if(a){var b=this;this.$dropdown.animate({opacity:0},500,function(){b.$controller.removeClass("open").removeClass("button-active"),b.$dropdown.css("visibility","hidden"),b.$dropdown.css("opacity",1)})}else this.$controller.removeClass("open").removeClass("button-active"),this.$dropdown.css("visibility","hidden")},toggle:function(){this.$controller.hasClass("open")?this.close():this.open()},addItem:function(a,b,c){b=b||"appendTo",this.items.push(a);var d=this.getItemView(a).$html();return b=="insertBefore"||b=="insertAfter"?d[b](c):d[b](this.$dropdown),d},addItems:function(a){var b=this;b.items=b.items.concat(a);var c=twttr.map(b.items,function(a){return b.getItemView(a).html()});$(c.join("")).appendTo(b.$dropdown)},itemsFrom:function(a){this.itemsCallback=a},registerItemHandlers:function(){var a=this.$dropdown.children();for(var b=0;b<this.items.length;b++){var c=this.items[b];if(!c.handlers)continue;$.each(c.handlers,function(c,d){var e=$(a[b]),f=[c];twttr.is.array(d)?f=f.concat(d):f.push(d),e.bind.apply(e,f)})}},render:function(a,b,c){if(b==="before"||b==="after")this.$controller.parent().hasClass("drop-down-container")?this.$container=this.$controller.parent():this.$container=this.$controller.wrap('<div class="drop-down-container"/>').parent();return twttr.control.Base.prototype.render.apply(this,arguments),c&&(this.constructor.caches[c.key]||(this.constructor.caches[c.key]={}),this.constructor.caches[c.key][c.id]=!0),this.registerItemHandlers(),this.applyDirection(),this},getItemView:function(a){return a.itemView?new twttr.views[a.itemView](a):a.divider?new this.defaultDividerView:new this.itemView(a)},viewData:function(){var a=this,b=twttr.map(this.items,function(b,c){return a.getItemView(b).html()});return{items:b.join("")}}})}()})(),a(twttr.control.Dropdown)})}),provide("widget/Dialog",function(a){using("constants","util").as(function(b){twttr.provide("twttr.dialogs"),twttr.dialogs.defaultOptions={modal:!1,stackPreviousModal:!1,draggable:!1,closable:!0,closeOnClickOutside:!1,closeOnNavigate:!1,destroyOnClose:!0,css:{width:500,height:"auto"},fixed:!0,template:{container_id:null,title:null,footer:null,content:null}};var c=!1,d=function(){c=!0;var a=$("<div>",{height:100,width:100,position:"absolute",top:-300,left:-300}).prependTo($("body")),b=$("<div>",{height:200}).appendTo(a);a.css("overflow-y","scroll");var d=a.width()-b.width();a.remove(),$("head").append("<style>          .modal-enabled,          .modal-enabled .global-nav-inner {            margin-right: "+d+"px        } </style>")},e=twttr.klass("twttr.widget.Dialog",function(a){var c=this;this.options=twttr.merge({},twttr.dialogs.defaultOptions,a||{},!0),this.options.template.closable=this.options.closable,this._isOpen=!1,this.view=new twttr.views[this.options.view||this.constructor._name](this.options),twttr.isT1?(this.options.modal=!0,this.$container=this.view.render(this.options.node||$(".twttr-dialog-wrapper"),"append")):this.$container=this.view.render(this.options.node||"body","append"),this.$dialog=this.$container.find(".twttr-dialog"),this.$title=this.$container.find(".twttr-dialog-header h3"),twttr.isT1?this.$container.css(twttr.merge({top:$(".js-banners").height()},this.options.css)):this.$dialog.css(this.options.css),this.$dialog.attr("data-component-term",b.util.underscore(this.constructor._name)),twttr.is.nil(c.options.template.footer)&&this.$container.find(".twttr-dialog-footer").hide(),this.options.draggable&&this.applyDraggability(),this.options.modal&&(this.$overlay=$('<div class="twttr-dialog-overlay"></div>').appendTo($("body"))),this._escKeyHandler=function(a){c.options.closable&&a.keyCode===b.constants.keyCodes.esc&&(c.close(),a.stopPropagation())};if(this.options.closeOnClickOutside||this.options.modal)this._clickOutsideHandler=function(a){!$.contains(c.$container.get(0),a.target)&&($.contains(document.body,a.target)||document.body===a.target)&&(c.close(),c.options.modal||(a.preventDefault(),a.stopPropagation()))};if(this.options.closeOnNavigate){var d=twttr.bind(this,this.close);twttr.router.bind("routeFollowed",d),this.bind("close",function(){twttr.router.unbind("routeFollowed",d)})}this.registerEvents()}).statics(twttr.EventProvider).statics({currentModal:!1,close:function(){var a=0;while(this.currentModal&&a++<8)this.currentModal.close()}}).methods(twttr.EventProvider).methods({$find:function(a){return this.$container.find(a)},registerEvents:function(){var a=this;this.$find("textarea, input[type=text], input[type=password]").bind("keydown keypress keyup",function(c){twttr.components.Autocomplete._isCompletionsOpen||(c.stopPropagation(),c.type==="keydown"&&c.keyCode===b.constants.keyCodes.esc&&a.close())}),this.$container.delegate(".twttr-dialog-close","click",function(b){b.preventDefault(),b.stopPropagation(),a.close()}),twttr.router.bind("urlChanged",this.urlChangedListener=function(b,c){a.close()});if($.browser.mozilla&&$.browser.version.slice(0,1)=="8"){var c=null;this.bind("close",function(){twttr.$win.scrollTop(c)}),this.bind("open",function(){c=twttr.$win.scrollTop()})}},applyDraggability:function(){var a=this;this.$container.addClass("draggable").draggable({cursor:"move",handle:this.$container.find(".js-twttr-dialog-draggable"),start:function(){a.$container.addClass("unselectable"),$("#doc").addClass("unselectable")},stop:function(){a.$container.removeClass("unselectable"),$("#doc").removeClass("unselectable")},cancel:":input,option,.js-twttr-dialog-not-draggable"})},toggle:function(){return this[this._isOpen?"close":"open"](),this},open:function(){c||d();var a=this;return twttr.widget.Dialog.currentModal&&(this.options.stackPreviousModal&&this.options.modal?(this.previousModal=twttr.widget.Dialog.currentModal,this.previousModal._close()):twttr.widget.Dialog.close()),this.options.modal&&(twttr.widget.Dialog.currentModal=this,this.$overlay.show(),$("body").addClass("modal-enabled")),this.position(),this.$container.css({visibility:"visible",display:"block"}),this.trigger("open"),twttr.widget.Dialog.trigger("open"),this._isOpen=!0,twttr.$win.bind("keydown",this._escKeyHandler),this._clickOutsideHandler&&setTimeout(function(){$("body").bind("click",a._clickOutsideHandler)},0),this},_close:function(){return this.options.modal&&(twttr.widget.Dialog.currentModal=!1,this.$overlay.hide(),$("body").removeClass("modal-enabled")),document.activeElement&&$.contains(this.$container.get(0),document.activeElement)&&$(document.activeElement).blur(),this.$container.css({visibility:"hidden",display:"none"}),$(".tipsy").remove(),this.trigger("close"),twttr.widget.Dialog.trigger("close"),this._isOpen=!1,twttr.$win.unbind("keydown",this._escKeyHandler),this._clickOutsideHandler&&$("body").unbind("click",this._clickOutsideHandler),this.previousModal&&(this.previousModal.open(),delete this.previousModal),this},show:function(){return this.open()},hide:function(){return this._close()},setFooterText:function(a){this.$find(".twttr-dialog-footer").html(a)},setError:function(a){this.$find(".twttr-dialog-error").show().html(_("<p>{{message}}</p>",{message:a}))},clearError:function(){this.$find(".twttr-dialog-error").hide().empty()},position:function(){this.options.fixed||this.$container.addClass("static");var a=$(window).scrollTop(),b=this.$container.innerHeight(),c=$(window).height(),d=Math.round(c/2-b/2);this.options.fixed||(d+=a);var e=this.$container.innerWidth(),f=$(window).width(),g=twttr.i18n&&twttr.i18n.rtl?"right":"left",i=Math.round(f/2-e/2);d=this.options.positioning&&this.options.positioning.top?this.options.positioning.top:d,i=this.options.positioning&&this.options.positioning.left?this.options.positioning.left:i;var j={top:d};return j[g]=i,this.$container.css(j),this},destroy:function(){return this._close(),this.remove(),this},remove:function(){return this.$container.unbind().remove(),this.$overlay&&this.$overlay.unbind().remove(),this._isOpen=!1,this},close:function(){return this[this.options.destroyOnClose?"destroy":"_close"]()},isOpen:function(){return this._isOpen}});twttr.isT1&&e.methods({position:twttr.util.noopInT1}),a(e)})}),provide("dialogs",function(a){using("_","constants").as(function(b,_){twttr.aug(twttr.dialogs,{reply:function(a,b){var c=a.dataFields||twttr.TweetBox._getDefaultContentForReply(a.$tweet,a.screenName,twttr.currentUserScreenName),d={multiple:c.multiple,modal:!0,draggable:!0,defaultContent:c.defaultContent,template:{title:_("Reply to @<strong>{{screen_name}}</strong>",{screen_name:a.screenName}),footer:""},data:a,origin:a.origin};return b?d:new twttr.widget.ReplyDialog(d)},directMessage:function(a){if(twttr.isT1)var b=twttr.widget.DirectMessageDialog.views.newConversation;else var c=twttr.assets.path("sticky/default_profile_images/default_profile_6_mini.png",{isVersioned:!1}),b={modal:!1,draggable:!0,basic:!1,template:{title:_("Message")+' <div><img class="avatar" src="'+c+'"/> <input class="twttr-directmessage-input" type="text"/></div> <span class="twttr-dm-check"/>',footer:_("Tip: you can send a message to anyone who follows you")},origin:a.origin};return new twttr.widget.DirectMessageDialog(b)},dmSingle:function(a){return twttr.isT1?new twttr.widget.DirectMessageDialog(twttr.widget.DirectMessageDialog.views.conversation,a.user.screenName):(twttr.merge(a,{draggable:!0,basic:!1,template:{title:'<img src="'+a.user.profile_image_url+'"/> '+_("<strong>Send <b>{{user_name}}</b> a message</strong>",{user_name:a.user.name})}}),new twttr.widget.DirectMessageDialogSingle(a))},keyboardShortcuts:function(){return twttr.dialogs._keyboardShortcuts=twttr.dialogs._keyboardShortcuts||new twttr.widget.Dialog({css:{width:twttr.loggedIn?600:300},modal:!0,draggable:!0,destroyOnClose:!1,template:{title:_("Keyboard shortcuts"),content:(new twttr.views.KeyboardShortcuts).html()}}),twttr.dialogs._keyboardShortcuts},discoverable:function(){var a=twttr.currentUser,b={help_url:twttr.router.helpDiscoveryPath(),email_checked:!a.emailDiscoverabilitySet||a.discoverableByEmail,phone_checked:!a.mobilePhoneDiscoverabilitySet||a.discoverableByMobilePhone};return new twttr.widget.DiscoveryDialog(twttr.merge(b,a.attributes))},verifyEmail:function(a){return new twttr.widget.VerifyEmailDialog(a,twttr.currentUser)},retweet:function(a,b,c){var d,e,f=twttr.isT1&&twttr.currentUser&&new Date(2012,6,3)<new Date(twttr.currentUser.createdAt)&&twttr.abdecider.choose("change_deutsch_verbs_229")==="change_verbs";f?(d="Diesen Tweet mit Deinen Followern teilen?",e="Teilen"):(d=_("Retweet this to your followers?"),e=_("Retweet"));var g={modal:!0,draggable:!0,callback:c,template:{title:d,container_id:"retweet-dialog",footer:"",content:(new twttr.views.Prompt({ok:e,cancel:_("Cancel")})).html()},data:{tweetId:a},tweetText:b,css:{width:500}};return new twttr.widget.RetweetDialog(g)},deleteMessage:function(a){var b={modal:!0,stackPreviousModal:!0,draggable:!0,callback:a,template:{title:_("Are you sure you want to delete this message?")},css:{width:450}};return new twttr.widget.Prompt(b)},deleteSavedSearch:function(a){return new twttr.widget.Prompt({modal:!0,template:{title:_("Are you sure you want to delete this search?"),content:(new twttr.views.Prompt({ok:_("Yes"),cancel:_("No")})).html()},callback:a})},goToUser:function(){var a={modal:!0,draggable:!0,template:{title:_("Go to a person's profile"),content:'<input class="twttr-goto-user-input" type="text"/>'},css:{width:450},positioning:{top:75}},c=new twttr.widget.Dialog(a),d=c.$find(".twttr-goto-user-input"),e=function(a){c.close(),twttr.router.one("routed",function(){$('<input type="text"/>').css({position:"absolute",top:0,left:0}).appendTo("body").focus().remove()});var b=a.replace("@","").split("/");b.length===1?(screen_name=b[0],twttr.API.User.find(screen_name,{success:function(a){twttr.router.routeTo(twttr.router.profilePath({screen_name:screen_name}))},error:function(a){twttr.router.routeTo(twttr.router.userSearchPath({query:screen_name}))}})):twttr.router.routeTo(twttr.router.userListPath({screen_name:b[0],list_slug:b[1]}))},f=new twttr.components.Autocomplete({limit:8,input:d,type:"username",preselect:!0,defaultResults:[{format:function(a){return(new twttr.views.CurrentTextUserAutocompleteItem({screenname:a.charAt(0)==="@"?a.substring(1):a})).html()},show:function(a,b){for(var c in b)if(b[c][1]===a)return!1;return!0}}]});return f.bind("select",function(a,b,c,d,f,g){e(f)}),d.bind("keypress",function(a){a.keyCode===b.constants.keyCodes.enter&&!f._isCompletionsOpen&&(a.preventDefault(),e(d.val()))}),c.bind("open",function(){d.focus()}),c},searchFacets:function(a){if(!twttr.decider.isAvailable("phoenix_facets"))return!1;var c={modal:!0,draggable:!0,template:{title:a==="photos"?_("Search photos"):_("Search videos"),content:'<input class="twttr-search-facets-input" type="text"/>'},css:{width:450},positioning:{top:75}},d=new twttr.widget.Dialog(c),e=d.$find(".twttr-search-facets-input");return e.bind("keypress",function(c){c.keyCode===b.constants.keyCodes.enter&&(c.preventDefault(),d.close(),twttr.router.one("routed",function(){$('<input type="text"/>').css({position:"absolute",top:0,left:0}).appendTo("body").focus().remove()}),twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:e.val(),mode:a})))}),d.bind("open",function(){e.focus()}),d},_trendsOptions:function(){return options={draggable:!0,css:{width:520},template:{title:_("Choose a trend location")}}},trends:function(){return arguments.callee._ret=arguments.callee._ret||new twttr.widget.TrendsDialog(this._trendsOptions())},signinOrSignup:function(a){a=a||{};var c=a.follow?a.follow.screenName:!1,d={screen_name:c,signup_source:twttr.audit.currentPage()};if(c)d.redirect_after_login=twttr.router.profilePath(d);else if(twttr.audit.currentPage()==="permalink"||twttr.audit.currentPage()==="profile"||twttr.audit.currentPage()==="search")d.redirect_after_login=twttr.audit.currentPath();var e=c?_("Sign in to Twitter &amp; follow @{{screen_name}}",d):_("Sign in to Twitter");a.justSignup&&(d.is_signup_only=!0,d.guest_modal=!0,d.signup_source=twttr.audit.currentPage(),e=c?_("Sign up for Twitter &amp; follow @{{screen_name}}",d):_("Sign up for Twitter"));var f=new twttr.widget.Dialog({css:{width:500},modal:!0,draggable:!0,template:{title:e,content:(new twttr.views.SigninOrSignup(d)).html()}}),g=f.$find("form.signin"),i=g.find(".textbox input");return a.justSignup&&f.$dialog.addClass("signup-only-dialog"),twttr.helpers.addHoldingInputEvents(g),twttr.helpers.addFormEvents(g),i.bind("keypress",function(a){a.keyCode===b.constants.keyCodes.enter&&$(this).val()&&(a.preventDefault(),g.submit())}),f.bind("open",function(){i.first().focus();var b={section:"auth_dialog",component:a.follow?"unauth_follow":"unauth_action",action:"open"};trackClient(b,twttr.audit.currentPage())}),f.$find("form").bind("submit",function(){setTimeout(function(){f.close(),trackClient({section:"auth_dialog",component:"signup_form",action:"signup_click"},twttr.audit.currentPage())},0)}),f},signupModalDialogGuest:function(a,b){var c=[],d=[],e=0;for(var f=0;f<a;f++)twttr.API.User.find(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-f-1],{success:function(f){c.push({name:f.name,screen_name:f.screenName,profile_image_url:f.profileImageUrl,id:f.id,description:"@"+f.screenName,count_num:e}),d.push(f.screenName),e++;if(e==a){var g={screen_names:d.join(","),signup_source:twttr.audit.currentPage(),user_data_list:c,guest_modal:!0},i=new twttr.widget.Dialog({css:{width:575},modal:!0,draggable:!0,template:{title:_("Follow your interests on Twitter!"),content:(new twttr.views.GuestModalSignup(g)).html()}});$signup=i.$find("form.signup-btn"),$inputs=$signup.find(".textbox input"),twttr.helpers.addFormEvents($signup),twttr.helpers.addHoldingInputEvents($signup),i.bind("open",function(){$inputs.first().focus()});var j=i.$find("input[type=checkbox]");j.bind("click",function(a){var b=i.$find("input[type=checkbox]:checked"),c=$.map(b,function(a,b){return a.value}).join(",");$signup.find("input[name=follows]").val(c)}),i.$find("form").bind("submit",function(){i.close(),trackClient({section:"profiles_viewed_dialog",component:"signup_form",action:"signup_click"},twttr.audit.currentPage())}),b(i)}}})},searchOperators:function(){return twttr.dialogs._searchOperators=new twttr.widget.Dialog({css:{width:600},modal:!1,draggable:!0,template:{title:_("Search Operators"),content:(new twttr.views.SearchOperators).html()}}),twttr.dialogs._searchOperators},smsCodes:function(){return twttr.dialogs._smsCodes=twttr.dialogs._smsCodes||new twttr.widget.Dialog({modal:!1,draggable:!0,template:{title:_("Two-way (sending and receiving) short codes:"),content:(new twttr.views.SmsCodes).html()}}),twttr.dialogs._smsCodes},sensitiveFlagConfirmation:function(a){var b=new twttr.widget.Prompt({modal:!1,draggable:!0,template:{title:_("Flag this media"),content:(new twttr.views.SensitiveFlagConfirmation).html()},callback:function(c){c&&(b.$find("#sensitive-settings-checkbox").attr("checked")&&twttr.currentUser.updateViewPossiblySensitive(!1,{success:function(){twttr.showMessage(_("Your media display settings have been changed."))},error:function(a){twttr.showError(_("Couldn't set inline media settings."))}}),b.$find("#sensitive-illegal-checkbox").attr("checked")&&a())}});return b},embedCode:function(a){return new twttr.widget.EmbedDialog(a)}}),a(twttr.dialogs)})}),provide("widget/TweetDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.TweetDialog",function(a){a=twttr.merge({basic:!0,modal:!0,fixed:!0},a),a.template=twttr.merge({show_geo:!0,container_id:"tweet_dialog"},a&&a.template),a=$.extend(!0,{basic:!0,template:{show_geo:!0,container_id:"tweet_dialog"}},a),twttr.widget.TweetDialog.uber.constructor.call(this,a),this._ready=!1}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.view.bind("ready",twttr.bind(this,function(){this._ready=!0,setTimeout(twttr.bind(this,function(){this.onReady()}),0)})),this.view.tweetBox.bind("tweetSuccess",twttr.bind(this,function(a,b,c){c==="reply"&&b.inReplyToScreenName?twttr.showMessage(_("Your Tweet to @{{username}} has been sent!",{username:b.inReplyToScreenName})):(twttr.showMessage(_("Your Tweet was posted!")),$(document).trigger("tweetSuccess",b)),this.destroy()})),this.view.tweetBox.bind("dmSuccess",twttr.bind(this,function(b,c){twttr.is.def(twttr.messageManager)&&twttr.messageManager.addMessage(c),twttr.showMessage(_("Your message was sent!")),a.close()})),this.view.tweetBox.bind("dmFail",twttr.bind(this,function(b,c){a.close()})),this.options.basic&&this.view.tweetBox.bind("titleChanged",twttr.bind(this,function(a,b){this.$title.html(b||this.options.template.title)}))},onReady:function(){var a=[];return function(b){b?a.push(b):(twttr.each(a,function(a){a()}),a=[])}}(),open:function(){return twttr.widget.Dialog.prototype.open.call(this),this.onReady(twttr.bind(this,function(){setTimeout(twttr.bind(this,function(){this.options.defaultContent&&(this.focus(),this.setContent(this.options.defaultContent))}),0)})),this},setContent:function(a){return this.view.tweetBox.editor.setContent(a),this},setCaretPosition:function(a,b){b=b||a;var c=this.view.tweetBox.editor.$editor[0];if(c.setSelectionRange)c.focus(),c.setSelectionRange(a,b);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveStart("character",a),d.moveEnd("character",b),d.select()}},focus:function(){if(this.options.defaultContent){var a=this.view.tweetBox.editor.$editor.val().length;this.setCaretPosition(a)}else this.view.tweetBox.editor.focus();return this}}),a(twttr.widget.TweetDialog)})}),provide("widget/Prompt",function(a){using("_","constants").as(function(b,_){var c=twttr.isT1?"primary-btn":"selected";twttr.klass("twttr.widget.Prompt",function(a){var b={view:"Dialog",template:{content:(new twttr.views.Prompt({ok:_("Yes"),cancel:_("No")})).html()}};this.options=twttr.merge({},b,a,!0),twttr.widget.Prompt.uber.constructor.call(this,this.options)}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this),this.$ok=this.$container.find(".js-prompt-ok"),this.$cancel=this.$container.find(".js-prompt-cancel"),this.$ok.addClass(c).bind("click",twttr.bind(this,function(a){a.preventDefault(),this.close(),this.options.callback(!0)})),this.$cancel.bind("click",twttr.bind(this,function(a){a.preventDefault(),this.options.callback(!1),this.close()})),this.$container.bind("keypress",twttr.bind(this,function(a){a.stopPropagation();if(a.metaKey)return;if(a.keyCode===b.constants.keyCodes.tab)this.$cancel.toggleClass(c),this.$ok.toggleClass(c);else if(a.keyCode===b.constants.keyCodes.enter||a.keyCode===b.constants.keyCodes.spacebar)a.preventDefault(),this.options.callback(this.$ok.hasClass(c)),this.close()})),this._$tabInput=$('<input type="text" class="twttr-hidden-input"/>').appendTo(this.$dialog).bind("keypress",function(a){a.preventDefault()})},open:function(){return twttr.widget.Dialog.prototype.open.call(this),setTimeout(twttr.bind(this,function(){this._$tabInput.focus()}),10),this}}),a(twttr.widget.Prompt)})}),provide("widget/DeviceSetupDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.DeviceSetupDialog",function(a){a=twttr.merge({modal:!0,draggable:!0,css:{width:550,height:"auto"},positioning:{top:80},template:{title:_("Get notifications and Tweet via SMS"),content:(new twttr.views.DeviceSetupDialog).html()}},a||{},!0),a.view="Dialog",this._fetchStatus();var b=this;this._carriers=twttr.API.Device.carriers({success:function(a){b._carriers=a}}),twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).statics({POLLING_DELAY:15e3}).methods({close:function(){this._clearDelayedStatusFetch(),twttr.widget.Dialog.prototype.close.call(this)},_fetchStatus:function(){this._clearDelayedStatusFetch();var a=this;twttr.API.Device.list({success:twttr.bind(this,this._updateStatus),error:function(b){a.close(),twttr.showError(b.response.error.message)}})},_fetchStatusDelayed:function(){this._fetchTimeout=window.setTimeout(twttr.bind(this,this._fetchStatus),twttr.widget.DeviceSetupDialog.POLLING_DELAY)},_clearDelayedStatusFetch:function(){this._fetchTimeout&&(window.clearTimeout(this._fetchTimeout),this._fetchTimeout=null)},_updateStatus:function(a){if(a.length==0)this._showCreate();else{var b=a[0];b.verified?this._showVerified(b):this._showWaiting(b)}},_showCreate:function(){var a=this,b=this.$container.find(".twttr-dialog-device-setup"),c=new twttr.views.DeviceSetupDialogCreate;b.empty().append('<div class="loading"></div>'),this._carriers.get(function(d){b.empty();var e=c.render(b,"append"),f=e.find("select.country-or-region"),g=e.find("select.country-in-region"),i=e.find("select.carrier"),j=e.find("select.language"),k=!1;for(var l=0;l<d.regionsAndCountryCodes.length;++l){var m=d.regionsAndCountryCodes[l];m[0]=="-------------"?$('<option disabled="disabled">').text(m[0]).val(m[1]).appendTo(f):$("<option>").text(m[0]).val(m[1]).appendTo(f)}var n=function(){var a=$(this),b=a.find("option:selected"),c=b.text(),f=b.val();if(d.countries[c]){var l=c;g.empty();var m=d.countries[l];for(var o=0;o<m.length;++o){var p=m[o];$("<option>").text(p[0]).val(p[1]).appendTo(g)}g.parents(".field").first().show(),n.call(g.get(0));return}var q=c;e.find(".country-code").text(f),a.hasClass("country-or-region")&&(g.empty(),g.parents(".field").first().hide()),i.empty(),j.empty();var r=d.carriers[q],s=d.languages[q];k=!1;if(d.countries[_("Satellite")])for(var o=0;o<d.countries[_("Satellite")].length;o++)if(d.countries[_("Satellite")][o][0]==q){k=!0;break}if(r){for(var o=0;o<r.length;++o){var t=r[o];$("<option>").text(t.display).val(t.value).appendTo(i)}k?i.parents(".field").first().hide():i.parents(".field").first().show()}else i.parents(".field").first().hide();if(s){for(var o=0;o<s.length;++o){var u=s[o];$("<option>").text(u.display).val(u.value).appendTo(j)}j.parents(".field").first().show()}else j.parents(".field").first().hide()};f.change(n),g.change(n),n.call(f.get(0)),twttr.helpers.addFormEvents(e.find("form"),function(b,c){var d=$(this);c.device_country_intl_prefix=d.find(".country-code").text(),d.find(".error").removeClass("error"),d.find(".error-text").remove(),d.addClass("submitting"),twttr.API.Device.create(c,{success:function(b){d.removeClass("submitting");var e=b.devices[0];b.duplicate?a._showDuplicate(e,c):b.errors?a._showCreateErrors(d,b.errors):(k||(e.carrier_name=i.find(":selected").text()),a._showWaiting(e))},error:function(a){d.removeClass("submitting");var b=a.response.errors;b&&b.length&&b[0].message?twttr.showError(b[0].message):twttr.showError(_("Whoops! Something went wrong. Please try again!"))}})})})},_showCreateErrors:function(a,b){var c=b.device;for(var d=0;d<c.length;++d){var e=c[d],f=a.find("input[name='device["+e[0]+"]']"),g=f.parents(".field").first();$error=$("<div>").addClass("error-text").text(e[1]),g.addClass("error"),g.find(".label").first().append($error)}},_showDuplicate:function(a,b){this._updateDeviceForRendering(a);var c=this,d=this.$container.find(".twttr-dialog-device-setup");d.empty();var e=(new twttr.views.DeviceSetupDialogDuplicate(a)).render(d,"append");e.find(".retry").click(function(a){a.preventDefault();var d=$(this);if(d.hasClass("disabled"))return;d.addClass("disabled"),twttr.API.Device.create(b,{success:function(a){d.removeClass("disabled"),a.duplicate||(a.errors?c._showCreate():c._showWaiting(a.devices[0]))},error:function(){d.removeClass("disabled")}})}),e.find(".cancel-instructions a").click(function(a){a.preventDefault(),c._showCreate()})},_showWaiting:function(a){this._fetchStatusDelayed();var b=this,c=this.$container.find(".twttr-dialog-device-setup"),d=c.find(".twttr-dialog-device-setup-waiting");if(d.length)return;c.empty(),this._updateDeviceForRendering(a),d=(new twttr.views.DeviceSetupDialogWaiting(a)).render(c,"append"),d.find(".refresh a").click(function(a){a.preventDefault(),b._fetchStatus()}),d.find(".cancel-instructions a").click(function(c){c.preventDefault(),b._clearDelayedStatusFetch(),twttr.API.Device.destroy(a.id,{success:twttr.bind(b,b._showCreate)})})},_showVerified:function(a){var b=this.$container.find(".twttr-dialog-device-setup");b.empty(),this._updateDeviceForRendering(a),(new twttr.views.DeviceSetupDialogVerified(a)).render(b,"append")},_updateDeviceForRendering:function(a){a.address_without_country_code=a.address.replace("+"+a.country_code,""),a.stop_command="Stop",a.go_command="Go"}}),a(twttr.widget.DeviceSetupDialog)})}),provide("widget/InviteContactsDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.InviteContactsDialog",function(a,b){b=b||{},this.routeToHome=b.routeToHome,b.template=b.template||{},b.template.title=b.template.title||_("Invite your friends who aren't on Twitter"),b.template.content=b.template.content||"",defaultOptions={modal:!0,draggable:!0},b=twttr.merge({},defaultOptions,b,!0),b.view="Dialog",twttr.widget.Dialog.call(this,b);var c=b.onSuccess||$.noop,d=this,e={onSuccess:function(){c.call(d)},onSubmit:function(){d.clearError()},showError:function(a){d.setError(a)},scribbler:b.scribbler,clientEventComponent:"invite_contacts_dialog"},f=new twttr.components.InviteContacts(a,e);this.$container.find(".twttr-dialog-content").append(f.$node),this.$container.find(".twttr-dialog-footer").remove()}).subclassOf(twttr.widget.Dialog).methods({close:function(){this.constructor.uber.close.call(this),this.routeToHome&&twttr.router.routeTo(twttr.router.homePath())}}),a(twttr.widget.InviteContactsDialog)})}),provide("widget/ListDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.ListDialog",function(a){a=a||{},a.template=a.template||{},a.template.title=a.template.title||a.list?_("Edit list details"):_("Create a new list"),a.template.content=a.template.content||(new twttr.views.ListDialog(a.list)).html(),twttr.is.def(a.modal)||(a.modal=!0),twttr.is.def(a.draggable)||(a.draggable=!0),a.view="Dialog",twttr.is.fn(a.onSuccess)||(a.onSuccess=function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:a.slug}))}),twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).methods({open:function(){twttr.widget.Dialog.prototype.open.call(this),this.$container.find("input[name=name]").focus()},registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this);var b=this.$container.find(".update-list-button");this.$container.find(".field .text").bind("focus blur keyup",function(a){this.value.length?b.removeClass("disabled"):b.addClass("disabled")}),b.click(function(b){if($(this).hasClass("disabled"))return;$(this).addClass("disabled");var c={name:a.$container.find("[name=name]").val(),description:a.$container.find("[name=description]").val(),mode:a.$container.find("[name=mode]:checked").val(),error:function(b){twttr.helpers.showErrorFromResponse(b),$(a).removeClass("disabled")},complete:function(b){a.close()}};a.options.list?a.options.list.update(twttr.merge(c,{success:function(b){twttr.showMessage(_("List updated!")),a.options.onSuccess(b)}})):twttr.currentUser.lists.create(c.name,twttr.merge(c,{success:function(b){twttr.showMessage(_("List created!")),a.options.onSuccess(b)}}))})},close:function(){this.constructor.uber.close.call(this),this.remove()}}),a(twttr.widget.ListDialog)})}),provide("components/t1/DirectMessageDialog",function(a){using("widget/Dialog","constants","TweetBox",function(b,c,d){var e=twttr.klass("twttr.widget.DirectMessageDialog",function(a,b,c){twttr.messageManager._fetchMessages(),c=c||{},d=c.tweetBox||d,twttr.widget.Dialog.call(this,{modal:!0,draggable:!0,view:"DirectMessageDialog",closeOnNavigate:!0,template:{footer:!0},positioning:{top:55}}),this.initComponentEvents(this.$container);var e=this;twttr.messageManager.bind("updatedThread",function(a,b,c,d){e._updateConversation(b,c,d)}),twttr.messageManager.bind("deletedThread",function(a,b){e._deleteThread(b)}),this._hideTweetBox(),this.tweetBox=new d(".twttr-dialog-container .js-dm-tweetbox",{data:{getUser:twttr.bind(this,this._getRecipient)},closeAfterSuccess:!1,condensed:!1,width:450,height:56,statusAction:"directMessage",displayError:!1,template:{button_text:_("Send message"),show_geo:!1,show_turkey:!1,show_title:!1}}),this.tweetBox.bind("dmSuccess",function(a,b,c){twttr.messageManager.addMessage(b,!0),e.switchToConversationView(b.threadId)}),this.tweetBox.bind("dmError",function(a,b){var b=twttr.errors.getViewForErrorCode(b,"dm").html();e._showError($("<span>").html(b))}),this.tweetBox.bind("error",function(a,b){e._showError(b)});var e=this;a=a||twttr.widget.DirectMessageDialog.views.conversationList,this.bind("close",function(){twttr.messageManager.unbind("updatedThread"),twttr.messageManager.unbind("deletedThread")}),this.bind("open",function(){switch(a){case twttr.widget.DirectMessageDialog.views.newConversation:e.switchToNewMessageView(b),e._trackClientDialogImpression("dm_new_conversation");break;case twttr.widget.DirectMessageDialog.views.conversation:e.switchToConversationView(b),e._trackClientDialogImpression("dm_existing_conversation");break;case twttr.widget.DirectMessageDialog.views.conversationList:default:e.switchToConversationListView(),e._trackClientDialogImpression("dm_conversation_list")}})}).subclassOf(b).mixin(twttr.mixins.componentEvents,twttr.mixins.i18nTweet).statics({views:{conversationList:1,conversation:2,newConversation:3}}).methods({_getRecipient:function(){var a=this.$find(".js-dm-conversation[data-thread-id]").attr("data-thread-id");return a||this.$find(".js-dm-user-autocomplete").val()},_trackClientDialogImpression:function(a){trackClient({component:a,action:"open"},{})},_trackClientDelete:function(a){trackClient({component:"direct_message",action:"delete"},{item_ids:[a],item_count:1})},switchToConversationListView:function(){var a=this;this._updateHeader({conversation_list:!0}),this._hideTweetBox(),twttr.messageManager.getAllThreads(function(b){a._updateContent("DirectMessageDialogConversationList",{threads:b}),a.$find("div.dm-thread-content").each(function(){a.updateRtlDisplay($(this))})})},switchToConversationView:function(a){var b=this;twttr.messageManager.getThread(a,function(c){if(!c){b.switchToNewMessageView(a);return}var d=c.messages[0],e=twttr.helpers.isCurrentUser(d.recipient)?d.sender:d.recipient;b._updateHeader({conversation:!0,name:e.name}),b._updateContent("DirectMessageDialogConversation",c),b.$find("div.dm-content").each(function(){b.updateRtlDisplay($(this))}),b._showTweetBox(a),b.tweetBox.focus(),b.$find("a.js-dm-delete").tipsy({gravity:"s"});var f=b.$find(".js-dm-conversation");f.scrollTop(f[0].scrollHeight),twttr.messageManager.markThreadAsRead(c.threadId)})},switchToNewMessageView:function(a){var b=this;this._updateHeader({new_dm:!0}),this._updateContent("DirectMessageDialogNew",{}),twttr.components.Autocomplete.getAutocompletedUsers(function(){b.autocomplete=new twttr.components.Autocomplete({limit:8,input:b.$find(".js-dm-user-autocomplete")}),b.autocomplete.bind("select",function(a,c,d,e,f,g){b._setProfileImageUrl(e),b.switchToConversationView(f),b.tweetBox.focus()}),b.autocomplete.bind("hide",function(){!b.$find(".js-dm-user-autocomplete:focus").length&&b._verifyUser()}),b._setProfileImageUrl(),b.autocomplete.focus(),a&&(b.autocomplete.set(a),b._verifyUser())}),this._showTweetBox()},_updateConversation:function(a,b,c){var d=this._getCurrentView();switch(d){case twttr.widget.DirectMessageDialog.views.conversationList:this._updateConversationListView(a,b);break;case twttr.widget.DirectMessageDialog.views.conversation:this._updateConversationView(a,b,c)}},_deleteThread:function(a){this.$find(".js-dm-threads .js-dm-thread[data-thread-id="+a+"]").remove(),this.$find(".js-dm-conversation[data-thread-id="+a+"]").empty()},_updateConversationListView:function(a,b){var c=this.$find(".js-dm-threads"),d=c.find(".js-dm-thread[data-thread-id="+a.threadId+"]"),e=$((new twttr.views.DirectMessageDialogConversationListItem(a)).html());d.length>0&&d.replaceWith(e),d=e,b==="new"&&c.find(".js-dm-thread-list").prepend(d)},_updateConversationView:function(a,b,c){var d=this.$find(".js-dm-conversation[data-thread-id="+a.threadId+"]");if(d.length>0){var e=d.find(".js-dm-item[data-message-id="+c.messageId+"]");switch(b){case"new":if(e.length)break;d.append((new twttr.views.DirectMessageDialogConversationItem(c.message)).html()),d.animate({scrollTop:d.attr("scrollHeight")},500);break;case"delete":e.remove()}twttr.messageManager.markThreadAsRead(a.threadId)}},_getCurrentView:function(){return this.$find(".js-dm-threads").length>0?twttr.widget.DirectMessageDialog.views.conversationList:this.$find(".js-dm-conversation").length>0?twttr.widget.DirectMessageDialog.views.conversation:this.$find(".js-dm-new").length>0?twttr.widget.DirectMessageDialog.views.newConversation:null},_updateHeader:function(a){return this._replaceDivWithView(".js-dm-header","DirectMessageDialogHeader",a)},_setProfileImageUrl:function(a){a=a||twttr.assets.path("sticky/default_profile_images/default_profile_6_mini.png",{isVersioned:!1}),this.$find("img.js-dm-avatar").attr("src",a)},_updateContent:function(a,b){return this._replaceDivWithView(".js-dm-content",a,b)},_replaceDivWithView:function(a,b,c){return this.$find(a).html((new twttr.views[b](c)).html())},_hideTweetBox:function(){this.$find(".js-dm-tweetbox").hide()},_showTweetBox:function(a){this.tweetBox.resetTweetContent(),this.$find(".js-dm-tweetbox").show()},_showError:function(a){var b=this.$find(".js-dm-error");b.find(".dm-error-text").html(a),b.show()},_hideError:function(){this.$find(".js-dm-error").hide()},_verifyUser:function(){var a=this,b=this.$find(".js-dm-user-autocomplete").val();this._hideError();if(!b||twttr.is.blank(b))return;if(!b.match(c.regexps.username)){a._setProfileImageUrl(),a._showError(_("Whoops! That's not a valid username."));return}twttr.API.User.find(b,{success:function(b){twttr.currentUser.relationshipWith(b.screenName,function(c){c.canDM?a._setProfileImageUrl(b.profileImageUrl):a._showError(_("You can't send a message to a user who is not following you."))})},error:function(b){a._setProfileImageUrl(),a._showError(_("Whoops! That user does not exist."))}})}}).click({".js-dm-thread-link":function(a){var b=$(a.currentTarget).attr("data-thread-id");this.switchToConversationView(b),a.preventDefault()},".js-dm-header-title":function(a){this.switchToConversationListView(),a.preventDefault()},".js-dm-header-new":function(a){this.switchToNewMessageView(),a.preventDefault()},".js-dm-delete":function(a){this.$find(".js-dm-delete").tipsy("hide"),$("div.js-dm-tweetbox").addClass("dm-deleting");var b=$(a.currentTarget).attr("data-message-id"),c=".js-dm-delete-confirm";this._replaceDivWithView(c,"DirectMessageDeleteConfirm",{messageId:b}),$(c).show(),a.preventDefault()},".js-dm-delete-confirm .js-prompt-ok":function(a){var b=$(a.currentTarget).attr("data-message-id"),c=this.$find(".js-dm-conversation").attr("data-thread-id");this.$find(".js-dm-item[data-message-id="+b+"]").remove(),this.$find(".js-dm-item").length==0&&this.switchToConversationListView(),$("div.js-dm-tweetbox").removeClass("dm-deleting"),twttr.messageManager.deleteMessage(b,c),this._trackClientDelete(b),a.preventDefault()},".js-dm-delete-confirm .js-prompt-cancel":function(a){var b=$(a.currentTarget).attr("data-message-id");this.$find(".js-dm-item[data-message-id="+b+"]").hide(),$("div.js-dm-tweetbox").removeClass("dm-deleting"),a.preventDefault()},".js-dm-error .js-dismiss":function(a){this._hideError(),a.preventDefault()}}).focus({".twitter-anywhere-tweet-box-editor":function(a){this._getCurrentView()===twttr.widget.DirectMessageDialog.views.newConversation&&(this._verifyUser(),this.autocomplete&&this.autocomplete.hide())}});a(e)})}),provide("widget/MuteDialog",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.widget.MuteDialog",function(){this.peoples=twttr.caches.User.get("muted"),this.peoples||(this.peoples={});var a={fixed:!1,draggable:!0,modal:!1,view:"Dialog",template:{title:_("Mute a User"),content:(new twttr.views.MuteUsers).html()}};twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.autocomplete=new twttr.components.Autocomplete({input:this.$find(".mute-input"),limit:10}),this.currentSelection={},this.autocomplete.bind("select",function(b,c,d,e,f,g){a.currentSelection.screenName=f,a.currentSelection.userId=g,a.currentSelection.profileImageUrl=e}),this.$dialog.delegate(".remove-muted-person","click",function(b){var c=$(this).parent(),d=c.attr("data-user-id");delete a.peoples[d],twttr.caches.User.set("muted",a.peoples),c.remove()}),this.$find(".mute-input,.twttr-dialog").bind("keydown",function(c){c.keyCode===b.constants.keyCodes.enter&&!twttr.components.Autocomplete._isCompletionsOpen&&(c.stopPropagation(),a.fetchUser())}),this.$find(".button").bind("click",function(b){a.fetchUser()}),this.populateUsers()},fetchUser:function(){var a=this.$find("input[type=text]");twttr.API.User.find(a.val().toString(),twttr.bind(this,function(b){a.val(""),$(".stream-tweet[data-user-id="+b.id+"]").parent().hide();var c={screenName:b.screenName,userId:b.id,profileImageUrl:twttr.helpers.transformProfileImageUrl(b.profileImageUrl,"mini")};this.peoples[b.id]=c,twttr.caches.User.set("muted",this.peoples),this.populateUsers()}))},populateUsers:function(){var a=[];for(var b in this.peoples)a.push('<li data-user-id="'+this.peoples[b].userId+'" data-user-screenname="'+this.peoples[b].screenName+'">                  <img width="24" height="24" src="'+this.peoples[b].profileImageUrl+'"/> '+this.peoples[b].screenName+' <span class="remove-muted-person">&times;</span></li>');a=a.join(""),this.$find(".muted-user-list").html(a)},open:function(){return twttr.widget.Dialog.prototype.open.call(this),this.$find("input[type=text]").focus(),this},close:function(){return twttr.widget.Dialog.prototype.close.call(this),this.remove(),this}}),a(twttr.widget.MuteDialog)})}),provide("widget/DiscoveryDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.DiscoveryDialog",function(a){twttr.widget.Dialog.call(this,twttr.merge({modal:!0,draggable:!1,css:{width:530}},a))}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this);var a=this,b=this.$find("form"),c=function(){b.find("input, textarea").attr("disabled","disabled"),b.find(".button").addClass("disabled")},d=function(){twttr.Router.performRedirect(twttr.router.homePath())};twttr.helpers.addFormEvents(b,function(e,f){if(b.find(".button").hasClass("disabled"))return;c(),twttr.currentUser.updateDiscoverability(f,{success:function(b){twttr.currentUser.sync("name",b.name),twttr.currentUser.sync("description",b.description),twttr.currentUser.sync("location",b.location),twttr.currentUser.sync("email_discoverability_set",b.email_discoverability_set),twttr.currentUser.sync("mobile_phone_discoverability_set",b.mobile_phone_discoverability_set),twttr.currentUser.sync("discoverable_by_email",b.discoverable_by_email),twttr.currentUser.sync("discoverable_by_mobile_phone",b.discoverable_by_mobile_phone),a.destroy(),d()},error:function(b){twttr.showError(_("Whoops! Something went wrong. Please try again!")),a.destroy()}})}),this.$find(".button.cancel").bind("click",function(){c(),d()})}}),a(twttr.widget.DiscoveryDialog)})}),provide("widget/GeoPromoDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.GeoPromoDialog",function(){twttr.widget.Dialog.call(this,{template:{title:_("Add a location to your tweets"),content:(new twttr.views.GeoPromoDialog).html()},view:"Dialog",modal:!0,stackPreviousModal:!0})}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.$find("#geo_turn_location_on").click(function(){a.enableGeoForCurrentUser()}),this.$find(".geo_dialog_close").click(function(b){b.preventDefault(),a.destroy()})},enableGeoForCurrentUser:function(){var a=this,b=$("#geo_promo_dialog_content .geo-progress"),c=$("#geo_promo_dialog_content .geo-unable-to-turn-location-on");if(b.hasClass("geo-spinner"))return;b.addClass("geo-spinner"),c.hide(),twttr.currentUser.setGeoEnabled(!0,{success:function(){twttr.geo.geoEnabled=!0,a.destroy(),twttr.geo.location.turnLocationOn()},error:function(){b.removeClass("geo-spinner"),c.show()}})}}),a(twttr.widget.GeoPromoDialog)})}),provide("widget/RetweetDialog",function(a){using().as(function(b){twttr.klass("twttr.widget.RetweetDialog",function(a){twttr.widget.RetweetDialog.uber.constructor.call(this,a),this.$dialog.attr("type","retweet"),this.$container.find(".twttr-dialog-footer").hide(),twttr.API.Status.find(this.options.data.tweetId,twttr.bind(this,function(b){var c=new twttr.views.ReplyDialogFooter({screen_name:b.user.screenName,text:a.tweetText,profile_image_url:b.user.profileImageUrl});c.render(this.$container.find(".twttr-dialog-content"),"prepend")}))}).subclassOf(twttr.widget.Prompt),a()})}),provide("widget/TrendsDialog",function(a){using().as(function(b){var c=twttr.klass("twttr.widget.TrendsDialog",function(a){var b=this,a=twttr.merge({view:"Dialog",destroyOnClose:!1,template:{container_id:"trends_dialog"}},a,!0);a.template.title=twttr.decider.isAvailable("personalized_trends")?_("Trends"):_("Choose a trend location"),twttr.widget.Dialog.call(b,a),b.resetChangeCount(),b.bind("close",function(){b.logClose()}),b.bind("open",function(){trackClient({section:"trends_location_dialog",action:"open"}),b.rerender()}),this.initComponentEvents(this.$container),b.position()}).subclassOf(twttr.widget.Dialog).mixin(twttr.mixins.componentEvents).methods({resetChangeCount:function(){this.changeCount=0},logClose:function(){scribble("close-trend-location-dialog",{woeid:twttr.trendLocations.current.woeid,change_count:this.changeCount,input:"click"}),this.resetChangeCount()},updateFooter:function(a){var b=this.$find(".twttr-dialog-footer");twttr.decider.isAvailable("personalized_trends")&&!twttr.trendLocations.current.isPersonalized||a?(b.html((new twttr.views.TrendsDialogFooter).html()),b.show()):b.hide()},rerender:function(a){var b=this.$container.find(".twttr-dialog-content");b.empty(),this.updateFooter(a),(new twttr.views.LocalTrendsNew(twttr.trendLocations.all,a)).render(b,"append"),this.markLocation()},registerEvents:function(){var a=this;twttr.widget.TrendsDialog.uber.constructor.prototype.registerEvents.call(a),a.$container.delegate("li a","click",function(b){a.changeCurrentLocation($(this),"dialog"),b.preventDefault()}),a.$container.delegate("a.trend-breadcrumb-location","click",function(b){a.changeCurrentLocation($(this),"dialog-breadcrumb"),b.preventDefault()})},position:function(){this.options.fixed||this.$dialog.addClass("static");var a=twttr.app.currentPage().$find(".dashboard");if(twttr.isT1||a.length===0)var b=($(document).width()+this.$dialog.outerWidth())/2;else var b=Math.max(a.offset().left,this.$dialog.outerWidth());var c=$(window).scrollTop(),d=this.$dialog.innerHeight(),e=$(window).height(),f=Math.round(e/2-d/2);f=Math.max(f,$("#top-stuff").innerHeight()+1),this.options.fixed||(f+=c),this.$container.css({left:b-this.$dialog.outerWidth(),top:f})},changeCurrentLocation:function(a,b){if(a){a.closest(".twttr-dialog-content").find(".selected").removeClass("selected"),a.addClass("selected");var c=parseInt(a.attr("data-woeid"),10)}twttr.trendLocations.setCurrent({isPersonalized:!c,woeid:c,origin:b}),this.changeCount+=1},markLocation:function(){var a=twttr.trendLocations.current;if(!a.isPersonalized){var b=a&&a.woeid||1;this.$container.find("[data-woeid="+b+"]").addClass("selected")}}}).click({".customize-by-location":function(){this.rerender(!0)},"button.done":function(){this.close()},".select-personalized":function(){this.changeCurrentLocation(null,"dialog"),this.close()}});twttr.isT1&&c.methods({position:twttr.util.noopInT1}),a(c)})}),provide("widget/ReplyDialog",function(a){using().as(function(b){twttr.klass("twttr.widget.ReplyDialog",function(a){var a=twttr.merge({},twttr.dialogs.defaultOptions,a,{},!0);twttr.widget.ReplyDialog.uber.constructor.call(this,a),this.$dialog.attr("type","reply")}).subclassOf(twttr.widget.TweetDialog).statics({openReplyDialog:!1}).methods({open:function(){return this.constructor.openReplyDialog&&this.constructor.openReplyDialog.close(),twttr.widget.TweetDialog.prototype.open.call(this),this.constructor.openReplyDialog=this,this.focus(),this},focus:function(){var a=this.view.tweetBox.editor.$editor.val().length,b=this.view.tweetBox.editor.$editor.val().length;this.options.multiple&&(a=this.options.data.screenName.length+2),this.setCaretPosition(a,b)}}),a(twttr.widget.ReplyDialog)})}),provide("widget/ListMembershipDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.ListMembershipDialog",function(a,b){b=twttr.merge({view:"Dialog",modal:!0,draggable:!0,css:{width:340,height:"auto"},positioning:{top:80},template:{container_id:"list_membership_dialog",title:_("Your lists"),content:(new twttr.views.AddToListDialog({screen_name:a.screenName})).html()}},b||{},!0),this.makeListItems(a),twttr.widget.Dialog.call(this,b),this.addSpinner()}).subclassOf(twttr.widget.Dialog).methods({makeListItems:function(a){var b=this;this.getListDialogItems(a,function(a){b.spinner&&b.spinner.hide(),a.length>1&&b.$container.find(".add-to-list-prompt").show(),b.renderItems(a),b.attachHandlers(a)})},addSpinner:function(){this.spinner=$("<span class='spinner' title='{{_i}}Loading...{{/i}}'></span>"),this.spinner.appendTo(this.$container.find(".twttr-dialog-body"))},attachHandlers:function(a){var b=this.$container.find(".list-membership-container").children();for(var c=0;c<a.length;c++){var d=a[c];if(!d.handlers)continue;$.each(d.handlers,function(a,d){var e=$(b[c]),f=[a,d];e.bind.apply(e,f)})}},renderItems:function(a){var b=twttr.map(a,function(a){return(new twttr.views.CheckboxListItem(a)).html()});$(b.join("")).appendTo(this.$container.find(".list-membership-container"))},getListDialogItems:function(a,b){var c=this;twttr.currentUser.lists({count:twttr.currentUser.listsLimit,success:function(d){var e=[],f={},g=function(f){d.each(function(a){e.push(i(a))}),e.push({label:_("Create a list"),icon:"list",className:"btn create-a-list",handlers:{click:function(){c.destroy(),(new twttr.widget.ListDialog({onSuccess:function(b){b.add(a,{success:function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:b.slug}))},error:function(a){twttr.helpers.showErrorFromResponse(a)}})}})).open()}}}),b(e)},i=function(b){return{label:h(b.name),id:b.id,user_is_member:f[b.id],is_private:b.mode==="private",handlers:{click:c.handler(b,a)}}};d.length()?a.memberships({filter_to_owned_lists:!0,success:function(a){a.each(function(a,b){f[a.id]=!0}),g()}}):g()}})},handler:function(a,b){return function(c){c.stopPropagation(),c.preventDefault();var d=$(this).find("input[type=checkbox]"),e=d.attr("data-is-checked"),f=!!e&&e==="true",g=$(this).find("img");d.hide(),g.show();var i=f?"remove":"add";a[i](b,{success:function(){twttr.widget.ListMembershipDialog.trigger(i+"ListMember",[a,b]),d.attr("data-is-checked",!f),d.attr("checked",!f)},error:function(){d.attr("data-is-checked",f),d.attr("checked",f),twttr.showError(_("There was an error updating the list"))},complete:function(){g.hide(),d.show()}})}}}),a(twttr.widget.ListMembershipDialog)})}),provide("widget/MiniProfileDialog",function(a){using("components/ProfilePane","components/RecentTweets",function(b,c){twttr.klass("twttr.widget.MiniProfileDialog",function(a,d){var e=this;d=d||!1;var f="";d&&(f=" js-unclickable unclickable"),twttr.widget.Dialog.call(this,{modal:!0,draggable:!0,view:"Dialog",closeOnNavigate:!0,template:{container_id:"mini-profile",title:twttr.isT1?null:"@"+a.screenName,content:"<div class='expando-profile-popup expanding-stream-item js-expando-profile-popup"+f+"'/>"},css:{width:400},positioning:{top:95}});var g=new b(a),i=new c(a);this.$find(".js-expando-profile-popup").append(g.$node).append(i.$node),this.$dialog.delegate(".js-unclickable, .js-unclickable a","click",function(a){!$(a.target).hasClass("js-action-follow")&&!$(a.target).hasClass("js-action-unfollow")&&!$(a.target).hasClass("twttr-dialog-close")&&(a.stopPropagation(),a.preventDefault())}).delegate(".js-mini-profile-user","click",function(){setTimeout(function(){e.close()},0)})}).subclassOf(twttr.widget.Dialog),a(twttr.widget.MiniProfileDialog)})}),provide("widget/EmbedDialog",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.widget.EmbedDialog",function(a){return this.status=a,twttr.widget.Dialog.call(this,{modal:!0,fixed:!1,draggable:!1,destroyOnClose:!0,positioning:{top:$(window).scrollTop()+100},view:"Dialog",template:{title:_("Embed this Tweet"),content:(new twttr.views.EmbedDialog).html()}})}).subclassOf(twttr.widget.Dialog).methods({open:function(){function n(a){setTimeout(function(){l.select()},0),x()}function o(){using("//platform.twitter.com/js/vendor/twt/dist/twt.all.min.js","css!//platform.twitter.com/twt/twt.css",function(){if(!window.twt)return;twt.settings.lang=f;var b=twt.tweet(a.status.attributes,{expandMedia:!0});a.status.isReply?a.status.inReplyTo({success:function(a){m.html(b.inReplyTo(a.attributes).html())},error:function(){m.html(b.html())}}):m.html(b.html())}).load()}function p(a,b){var c=b.find(".active");if(c[0]==a[0])return;c.removeClass("active"),a.addClass("active")}function q(a){p($(this).prev(),$(a.delegateTarget)),y($("input:checked",i).val()),u()}function r(a){a.preventDefault();var b=$(this);p(b,$(a.delegateTarget));var c=b.data().target;y(c),u()}function s(){var a={lang:f,target:$(".active",j).data().target,align:$("input:checked",i).val()},b=t(a);return a.success=v(b),a}function t(a){return a.lang+a.target+a.align}function u(){var b=s(),f=t(b),g={html:"https://twitter.com/"+a.status.user.screenName+"/statuses/"+a.status.id+""};e++||l.addClass(c).attr(c,c);if(d[f])return b.success(d[f]);if(b.target=="link")return b.success(g);a.status.oembed(b)}function v(a){return function(f){var g=s();d[a]=f,--e||l.val(d[t(g)].html).removeClass(c).removeAttr(c),b&&(b=!1,n())}}function w(){var a={section:"embed_code_dialog",component:"embed_tweet_code",action:"open"};trackClient(a,twttr.audit.currentPage())}function x(){var a={section:"embed_code_dialog",component:"embed_tweet_code",action:"focus"};trackClient(a,twttr.audit.currentPage())}function y(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"target_"+a};trackClient(b,twttr.audit.currentPage())}function z(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"align_"+a};trackClient(b,twttr.audit.currentPage())}function A(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"language_"+a};trackClient(b,twttr.audit.currentPage())}var a=this,b=!0,c="disabled",d={},e=0,f;twttr.widget.Dialog.prototype.open.call(this);for(var g=twttr.languages.length;g--;)if(twttr.languages[g].current){f=twttr.languages[g].code;break}var i=this.$container,j=i.find(".embed-target"),k=i.find(".embed-alignment"),l=i.find("textarea"),m=i.find(".embed-preview");return u(),o(),w(),A(f),j.delegate("a","click",r),k.delegate("input","click",q),l.focus(n),this},destroy:function(){twttr.widget.Dialog.prototype.destroy.call(this),twttr.router.unbind("urlChanged",this.urlChangedListener),twttr.router.routeTo(twttr.router.permalinkPath({screen_name:this.status.user.screenName,id:this.status.id}))}}),a(twttr.widget.EmbedDialog)})}),provide("components/pages/mixins/searchT1",function(a){using("mixins/sideNavigationT1","components/t1/SearchHeader","components/t1/dashboard/SearchNav","components/SignupCallOut").as(function(b){var c=twttr.klass.mixin("twttr.components.pages.mixins.searchT1",function(){this.mixin(b.mixins.sideNavigationT1).view(twttr.views.SearchPage).addOnSwitchAway(function(){this.removeSearchHeader(),this.removeSearchAssistance()}).addOnSwitchTo(function(){this.registerSearchAssistanceDecider(),this.$node.find(".js-search-header").length||this.addSearchHeader()}).addAfterRender(function(){this.isNewSearchHeaderAvailable()?(this.setQuery(this._query),this.focusQuery()):(this.addSearchHeader(),$("#search-query").val(""))}).methods({getDashboardComponents:function(){var a=[];return twttr.loggedIn||a.push(new b.components.SignupCallOut("search",{query:this._query})),this._nav=new b.components.t1.dashboard.SearchNav(this._query),this.trendsComponent=this.trendsComponent||new twttr.components.Trends,a.concat([this._nav,this.trendsComponent,new twttr.components.Footer])},noAutoRender:!0,people:function(a,c){var d=a.query||c.q,e=this._query!==d;this._query=d;if(!d)return this.routePageTo(this.PATH_ROOT);this.streamManager||this.render({query:d,pretty_query:d,has_relevance_search:!1,top_mode:!1,all_mode:!1,timeline_mode:!1,with_links_mode:!1}),this.streamManager.switchTo(twttr.streams.PeopleSearch,{query:d,pathRoot:this.PATH_ROOT,hideTitle:!1});if(e){var f=new b.components.t1.dashboard.SearchNav(this._query);this._nav.$node.replaceWith(f.$node),delete this._nav,this._nav=f}this.setQuery(d),this.focusQuery(),this.selectCurrentSideNav(),this.removeOnebox(),this.removeSearchAssistance(),this.updatePageTitle(_("Twitter / User Search"))},registerSearchAssistanceDecider:function(){if(twttr.decider.isAvailable("search_assistance")){this._isNewSearchHeaderAvailable=!0,this._isSearchAssistanceAvailable=!0;return}var a=twttr.abdecider.choose("search_assistance_192");this._isNewSearchHeaderAvailable=a==="no_header_no_assistance"||a==="no_header_with_assistance",this._isSearchAssistanceAvailable=a==="no_header_with_assistance"},isNewSearchHeaderAvailable:function(){return!!this._isNewSearchHeaderAvailable},isSearchAssistanceAvailable:function(){return!!this._isSearchAssistanceAvailable},renderRelatedQueries:function(a){if(!$.isArray(a)||!a.length)return;var b=a.length,c=[],d=[];for(var e=0;e<b;e++)c[e]={search_query_source:twttr.search.searchQuerySource.RELATED_QUERY,query:this._query,related_query:a[e].query,url:twttr.router.searchResultsPath({query:a[e].query}),delimiter:e<b-1?", ":""},d[e]=a[e].query;this.$find(".js-search-header").append((new twttr.views.RelatedQueries({related_queries:c})).html()),trackClient({section:"search",component:"related_queries",action:"impression"},{query:this._query,item_count:d.length,item_names:d})},renderSpellingCorrections:function(a){if(!$.isArray(a)||!a.length)return;var b=a[0].query,c=[];if(a[0].indices&&a[0].indices.length){var d=a[0].indices,e=0,f=b.length;for(var g=0;g<d.length;g++)c[g]={nonhighlighted:b.substring(e,d[g][0]),highlighted:b.substring(d[g][0],d[g][1])},e=d[g][1];c[d.length]={nonhighlighted:b.substring(e,f),highlighted:""}}else c[0]={nonhighlighted:"",highlighted:b};this.$find(".js-stream-header").before((new twttr.views.SpellingCorrections({query:this._query,correction:b,partitions:c,url:twttr.router.searchResultsPath({query:b}),search_query_source:twttr.search.searchQuerySource.SPELLING_CORRECTION})).html()),trackClient({section:"search",component:"spelling_corrections",action:"impression"},{query:this._query,item_count:a.length,item_names:a})},removeSearchAssistance:function(){this.$find(".js-spelling-corrections").remove(),this.$find(".js-related-queries").remove()},addSearchHeader:function(){this.isNewSearchHeaderAvailable()||(this._header=new b.components.t1.SearchHeader(this._query),this.$node.prepend(this._header.$node))},removeSearchHeader:function(){this.isNewSearchHeaderAvailable()||this._header&&this._header.destroy()},setupSavedSearchAction:function(){var a=twttr.search.isSavedSearch(this._query);a?this.toggleSavedSearchOn(a):this.toggleSavedSearchOff()},toggleSavedSearchOn:function(a){this.isNewSearchHeaderAvailable()?(this.$find(".js-toggle-saved-search-link").html(_("Remove saved search")).addClass("saved").removeClass("not-saved"),this.$find(".js-search-title").html(Mustache.to_html(_('Saved search: <strong class="search-query">{{query}}</strong>'),{query:this._query}))):this._header.toggleSavedSearchOn(),this._savedSearch=a},toggleSavedSearchOff:function(){this.isNewSearchHeaderAvailable()?(this.$find(".js-toggle-saved-search-link").html(_("Save search")).addClass("not-saved").removeClass("saved"),this.$find(".js-search-title").html(Mustache.to_html(_('Results for <strong class="search-query">{{query}}</strong>'),{query:this._query}))):this._header.toggleSavedSearchOff(),this._savedSearch=null},showSearchMenu:function(a){var b=this;a.addClass("open"),$(document).bind("click.button",function(){b.hideSearchMenu(a)})},hideSearchMenu:function(a){a.removeClass("open"),$(document).unbind("click.button")},toggleSearchMenu:function(a){var b=this.$node.find(".js-search-dropdown");b.hasClass("open")?this.hideSearchMenu(b):this.showSearchMenu(b)},setQuery:function(a){this.isNewSearchHeaderAvailable()?$("#search-query").val(a):this._header.setQuery(a)},focusQuery:function(){this.isNewSearchHeaderAvailable()?($("#search-query").addClass("focus"),$("#search-query").blur()):this._header.focusQuery()},addDropdownMenu:twttr.util.noopInT1,renderPeopleResults:twttr.util.noopInT1,renderOneboxContainer:function(a){this.$find(".js-onebox-container").html(a.$node)},removeOnebox:function(){this.$find(".js-onebox-container").empty()},addImpressionData:function(a){a.query=this._query}}).click({"a.js-toggle-saved-search-link":function(a,b){this._savedSearch?twttr.dialogs.deleteSavedSearch(twttr.bind(this,function(a){if(a){var b=this._savedSearch;this._savedSearch.destroy({before:twttr.bind(this,this.toggleSavedSearchOff),error:twttr.bind(this,function(){this.toggleSavedSearchOn(b),twttr.showError(_("Error deleting search"))})})}})).open():twttr.currentUser.savedSearches.create(this._query,{before:twttr.bind(this,this.toggleSavedSearchOn),error:twttr.bind(this,function(){this.toggleSavedSearchOff(),twttr.showError(_("Error saving search"))})}),a.preventDefault()},"button.js-search-dropdown-button":function(a,b){return this.toggleSearchMenu(),a.preventDefault(),a.stopPropagation(),!1},"div.js-related-queries a":function(a,b){trackClient({section:"search",component:"related_queries",action:"search"},{query:b.data("query"),item_names:[b.data("search-assistance")]})},"div.js-spelling-corrections a":function(a,b){trackClient({section:"search",component:"spelling_corrections",action:"search"},{query:b.data("query"),item_names:[b.data("search-assistance")]})},"div.js-spelling-corrections div.js-action-dismiss":function(a,b){this.$find(".js-spelling-corrections").animate({opacity:"0"},250).slideUp(),trackClient({section:"search",component:"spelling_corrections",action:"dismiss"},{query:b.data("query"),item_names:[b.data("search-assistance")]})}})});a(c)})}),provide("components/pages/ProfileAbstract",function(a){using().as(function(b){var c=twttr.klass.page("twttr.components.pages.ProfileAbstract").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage,twttr.mixins.profileHelper).methods({_addAdminTools:function(){if(twttr.admin&&!twttr.helpers.isCurrentUser(this.profileUser)){var a=this;using(">defaultViews",function(){twttr.admin.addToolsFor(a.profileUser.screenName,a.profileUser.id)})}},_highlightNavIfCurrentUser:function(a){twttr.app.highlightGlobalNav("profile",twttr.helpers.isCurrentUser(a))},_switchToStream:function(a,b){var c=this;this.unfocusStreamItem(),this.loading(a.screenName),this.getUserInfo(a.screenName,function(){c._addPromotedData(),!c._renderedScreenName||c._renderedScreenName.toLowerCase()!==a.screenName?c._renderPage():twttr.themes.loadUserStyleFor(c.profileUser),c.streamManager.switchTo(a.stream,twttr.merge({canViewUser:twttr.helpers.canViewUser(c.profileUser)},a),b),twttr.components.JapaneseAd.refreshAds(),c.trigger("switchedToStream")},{batch:!twttr.loggedIn},twttr.bind(this,this.noUserFoundCallback)),this.focusStreamTab(a.tab),twttr.isT1||trackClient({action:"impression"},{profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"})},loading:function(a){a=a.toLowerCase();if(this.preRendered){this.preRenderedScreenName=this.$find("div.profile-header").attr("data-screen-name").toLowerCase();if(this.preRenderedScreenName==a)return}if(!this._renderedScreenName||this._renderedScreenName.toLowerCase()!==a)this.streamManager&&this.streamManager.getCurrent()&&this.streamManager.getCurrent().$node.detach(),this.$node.children().empty(),$("div.tipsy").remove()},_renderPage:function(){this.profileUser.screenName.toLowerCase()!==this.preRenderedScreenName&&twttr.themes.loadUserStyleFor(this.profileUser),this._addAdminTools(),this.render({can_view:twttr.helpers.canViewUser(this.profileUser),screen_name:this.profileUser.screenName,social_context:this._isSocialContextAvailable()}),this._renderedScreenName=this.profileUser.screenName,this.renderUserInfo(),this._followingDropDown=null,this._followersDropDown=null},noAutoRender:!0});twttr.isT1?c.methods({renderUserInfo:twttr.util.noopInT1}):c.methods({renderUserInfo:function(){var a=this,b=this.profileUser;this.panes.push(new twttr.views.Dashboard("profile.dashboard",b.attributes));var c=new twttr.components.ProfileActions(b);c.$node.appendTo(this.$find(".profile-actions-container"))}}),a(c)})}),provide("components/pages/Search",function(a){using("_",twttr.isT1?"components/pages/mixins/searchT1":"components/pages/mixins/searchP1","util","constants").as(function(b,_,c){var d=twttr.klass("twttr.components.pages.Search").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).view(twttr.views.SearchPage).addOnSwitchAway(function(){twttr.search.clear(),this.trendsComponent&&this.trendsComponent.stopUpdatePolling()}).addOnSwitchTo(function(){twttr.themes.loadCurrentUserStyle(),this.trendsComponent&&this.trendsComponent.startUpdatePolling()}).addAfterRender(function(){this.addDashboardComponents(this.getDashboardComponents()),this.trendsComponent&&this.trendsComponent.registerEventHandlers()}).statics({addSearchClickLogging:function(a,b){if(a.length){var c={};b.tweet_click_info=c,c.tweet_id=a.attr("data-tweet-id"),c.pos=a.closest(".stream-item").prevAll(".stream-item").length,c.type=a.is(".promoted-tweet")?"promoted":a.is(".top-tweet")?"popular":"recent"}}}).methods({realtime:function(a,b){var c=a.query||b.q;twttr.decider.isAvailable("phoenix_search_relevance")?this.updatePageTitle(_("Twitter / Search - {{{query}}} - All Tweets",{query:c})):this.updatePageTitle(_("Twitter / Search - {{{query}}}",{query:c})),this.enterMode(c,"tweets")},timeline:function(a,b){var c=a.query||b.q;this.updatePageTitle(_("Twitter / Timeline Search - {{{query}}}",{query:c})),this.enterMode(c,"timeline")},links:function(a,b){var c=a.query||b.q;if(!c)return this.search({query:"links"});this.updatePageTitle(_("Twitter / Search - {{{query}}} - Tweets with links",{query:c})),this.enterMode(c,"links")},searchShow:function(a,b){if(twttr.decider.isAvailable("swift_events")&&twttr.decider.isAvailable("swift_events_search")){var c=twttr.griffin.isEvent(a.query);twttr.griffin.setNoRedirectOnSearch(c,!0)}this.search(a,b)},search:function(a,b){if(!twttr.currentUser&&!twttr.decider.isAvailable("phoenix_search_relevance_logged_out")||twttr.currentUser&&!twttr.decider.isAvailable("phoenix_search_relevance")){this.realtime(a,b);return}b&&b.partner=="mozilla"&&b.source=="desktop-search"&&(a.query=a.query.replace(/\+/g," ")),this.query=a.query||b.q,this.query===!0&&(this.query=!1);if(twttr.decider.isAvailable("swift_events")&&twttr.decider.isAvailable("swift_events_search")){var c=twttr.griffin.isEvent(this.query);twttr.griffin.isEuroSearchTakeover(this.query)&&(c="euro2012");if(twttr.griffin.redirectOnSearch(c))return}this.updatePageTitle(_("Twitter / Search - {{{query}}}",{query:this.query})),this.enterMode(this.query,"relevance",b)},placeTweetSearch:function(a){var b=a.place_name,c=a.place_id;this.updatePageTitle(_("Twitter / Tweets at {{placeName}}",{placeName:b})),this._placeName=b,this.enterMode("place:"+c,"placeTweetSearch")},noAutoRender:!0,enterMode:function(a,b,c){twttr.search.latestQuery=a,c=c||{};if(!a){twttr.router.redirectTo(twttr.router.searchHomePath());return}twttr.isT1||trackClient({action:"impression"},{query:a}),this.unfocusStreamItem(),twttr.SearchAPI.flushCache();var d=this;d._mode=b;if(a!==this._query){this._query=a,!twttr.isT1&&twttr.loggedIn&&(this.setupSavedSearchAction(),this.registerSavedSearchListeners()),this.streamManager&&this.streamManager.$node.detach();var e=!1;twttr.currentUser?e=twttr.decider.isAvailable("phoenix_search_relevance"):e=twttr.decider.isAvailable("phoenix_search_relevance_logged_out");var f=b=="placeTweetSearch";this.render({query:a,pretty_query:f&&this._placeName||a,has_relevance_search:e,top_mode:b=="relevance",all_mode:b=="tweets",timeline_mode:b=="timeline",with_links_mode:b=="links"})}else twttr.decider.isAvailable("phoenix_search_dropdown")&&this.$find(".stream-tabs").empty().append((new twttr.views.SearchPageTabs({top_mode:b=="relevance",all_mode:b=="tweets",timeline_mode:b=="timeline",with_links_mode:b=="links"})).html());twttr.decider.isAvailable("phoenix_search_dropdown")&&this.addDropdownMenu(this._query,this.$find(".stream-tab-dropdown")),this.streamManager.switchTo(twttr.streams.Search,{query:a,pretty_query:this._placeName||a,mode:b,hideTitle:!0,debug:c.debug,experimentId:c.experimentId,is_new_search_header_available:this.isNewSearchHeaderAvailable()}),this.focusStreamTab(b),this.focusQuery(a),twttr.router.getCurrentRoute().name==="searchRealtime"?this.selectSideNav("searchResults"):this.selectCurrentSideNav(),twttr.isT1&&twttr.loggedIn&&(this.setupSavedSearchAction(),this.registerSavedSearchListeners()),this.addSearchExtras(),this.renderPeopleResults()},focusQuery:function(a){twttr.search.focusQuery(a)},isNewSearchHeaderAvailable:function(){return!1},isSearchAssistanceAvailable:function(){return!1},removeSearchAssistance:$.noop,isOneboxAvailable:function(){return!!this._query&&twttr.decider.isAvailable("onebox")},renderOnebox:function(a){if(a.length()===0)return;var c,d=a.get(0),e=twttr.components.onebox[b.util.capitalize(d.type)];if(!e)return;var c=new e(d,this._query);if(!c||c.$node.children().size()==0)return;this.renderOneboxContainer(c,d),this.$find("div.onebox").show(),c.render();var f=c.items||[];trackClient({section:"onebox",component:d.type,action:"impression"},{item_count:f.length,item_ids:f,query:this._query})},addSearchExtras:function(){var a=this,b=a.isSearchAssistanceAvailable(),c=a.isOneboxAvailable();if(!c&&!b)return;c&&this.$find("div.onebox").hide();var d=twttr.search.getLastQuerySource(),e={is_t1:twttr.isT1,statuses:!1,stories:c,related_queries:b,spelling_corrections:b,query_source:d,success:function(d){a.removeSearchAssistance(),c&&a.renderOnebox(d.stories),b&&(d.spellingCorrections&&a.renderSpellingCorrections(d.spellingCorrections),!d.spellingCorrections.length&&d.relatedQueries&&a.renderRelatedQueries(d.relatedQueries))}};this._query&&twttr.API.Search.search(this._query,e)},setupSavedSearchAction:function(){var a=this;twttr.currentUser.savedSearches(function(b){var c=b.filter(function(b){return b.query===a._query});c.length()?a.toggleSavedSearchOn(c.first()):a.toggleSavedSearchOff()})},registerSavedSearchListeners:function(){var a=this;twttr.API.SavedSearch.bind("create",function(b,c){c.query==a._query&&a.toggleSavedSearchOn(c)}),twttr.API.SavedSearch.bind("delete",function(b,c){c.query==a._query&&a.toggleSavedSearchOff()})},_getSearchHandlers:function(a,b){return{click:function(){twttr.router.routeTo(twttr.router[b]({query:a}))}}}});d.mixin(c),a(d)})}),provide("components/pages/SearchHome",function(a){using("_").as(function(b,_){twttr.klass.page("twttr.components.pages.SearchHome").view(twttr.views.SearchHome).click({".operators a:not(.advanced-search)":function(a){a.preventDefault(),twttr.dialogs.searchOperators().open()},".operators a.advanced-search":function(a){twttr.search.latestQuery=this.$find("input:text[name=q]").val()}}).addAfterRender(function(){this.$find(".bottompart").append((new twttr.components.Footer).$node)}).addOnSwitchTo(function(){twttr.themes.clear()}).methods({noAutoRender:!0,initSearchForm:function(){var a=this.$find(".search form"),b=a.is(".advanced-search form");twttr.helpers.addFormEvents(a,function(a,c){var d=$(this),e=b?twttr.search.serializeAdvancedForm(d):c.q;e?(twttr.search.setLastQuerySource(twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.doSearch(e)):twttr.showMessage(_("Enter your query before submitting the search form!"))}),twttr.search.formifyLatestQuery(a);if(b){var c=a.find("input[name=near]"),d=a.find("fieldset.geo div.sel");c.val()?d.show():c.one("keyup change",function(){d.slideDown()})}},languages:function(){return this.searchLanguages().sort(function(a,b){return a=a.localized_name.toLowerCase(),b=b.localized_name.toLowerCase(),a==b?0:a<b?-1:1})},searchLanguages:function(){return[{code:"am",localized_name:_("Amharic"),name:"አማርኛ"},{code:"ar",localized_name:_("Arabic"),name:"العربية"},{code:"bg",localized_name:_("Bulgarian"),name:"Български"},{code:"bn",localized_name:_("Bengali"),name:"বাংলা"},{code:"bo",localized_name:_("Tibetan"),name:"བོད་སྐད"},{code:"chr",localized_name:_("Cherokee"),name:"ᏣᎳᎩ"},{code:"da",localized_name:_("Danish"),name:"Dansk"},{code:"de",localized_name:_("German"),name:"Deutsch"},{code:"dv",localized_name:_("Maldivian"),name:"ދިވެހި"},{code:"el",localized_name:_("Greek"),name:"Ελληνικά"},{code:"en",localized_name:_("English"),name:"English"},{code:"es",localized_name:_("Spanish"),name:"Español"},{code:"fa",localized_name:_("Persian"),name:"فارسی"},{code:"fi",localized_name:_("Finnish"),name:"Suomi"},{code:"fr",localized_name:_("French"),name:"Français"},{code:"gu",localized_name:_("Gujarati"),name:"ગુજરાતી"},{code:"iw",localized_name:_("Hebrew"),name:"עברית"},{code:"hi",localized_name:_("Hindi"),name:"हिंदी"},{code:"hu",localized_name:_("Hungarian"),name:"Magyar"},{code:"hy",localized_name:_("Armenian"),name:"Հայերեն"},{code:"in",localized_name:_("Indonesian"),name:"Bahasa Indonesia"},{code:"is",localized_name:_("Icelandic"),name:"Íslenska"},{code:"it",localized_name:_("Italian"),name:"Italiano"},{code:"iu",localized_name:_("Inuktitut"),name:"ᐃᓄᒃᑎᑐᑦ"},{code:"ja",localized_name:_("Japanese"),name:"日本語"},{code:"ka",localized_name:_("Georgian"),name:"ქართული"},{code:"km",localized_name:_("Khmer"),name:"ខ្មែរ"},{code:"kn",localized_name:_("Kannada"),name:"ಕನ್ನಡ"},{code:"ko",localized_name:_("Korean"),name:"한국어"},{code:"lo",localized_name:_("Lao"),name:"ລາວ"},{code:"lt",localized_name:_("Lithuanian"),name:"Lietuvių"},{code:"ml",localized_name:_("Malayalam"),name:"മലയാളം"},{code:"my",localized_name:_("Myanmar"),name:"မြန်မာဘာသာ"},{code:"ne",localized_name:_("Nepali"),name:"नेपाली"},{code:"nl",localized_name:_("Dutch"),name:"Nederlands"},{code:"no",localized_name:_("Norwegian"),name:"Norsk"},{code:"or",localized_name:_("Oriya"),name:"ଓଡ଼ିଆ"},{code:"pa",localized_name:_("Panjabi"),name:"ਪੰਜਾਬੀ"},{code:"pl",localized_name:_("Polish"),name:"Polski"},{code:"pt",localized_name:_("Portuguese"),name:"Português"},{code:"ru",localized_name:_("Russian"),name:"Русский"},{code:"si",localized_name:_("Sinhala"),name:"සිංහල"},{code:"sv",localized_name:_("Swedish"),name:"Svenska"},{code:"ta",localized_name:_("Tamil"),name:"தமிழ்"},{code:"te",localized_name:_("Telugu"),name:"తెలుగు"},{code:"th",localized_name:_("Thai"),name:"ไทย"},{code:"tr",localized_name:_("Turkish"),name:"Türkçe"},{code:"ur",localized_name:_("Urdu"),name:"ﺍﺭﺩﻭ"},{code:"vi",localized_name:_("Vietnamese"),name:"Tiếng Việt"},{code:"zh",localized_name:_("Chinese"),name:"中文"}]},index:function(){this.updatePageTitle(_("Twitter / Search")),this.render(),this.initSearchForm(),this.$find("input").focus();var a=new twttr.components.Trends;this.$find(".trends-container").append(a.$node)},advanced:function(){if(!twttr.decider.isAvailable("advanced_search"))return twttr.router.routeTo(twttr.router.searchHomePath());this.updatePageTitle(_("Twitter / Advanced Search")),this.render({languages:this.languages(),is_advanced:!0}),this.initSearchForm()}}),a(twttr.components.pages.SearchHome)})}),provide("components/pages/Front",function(a){using("_").as(function(b,_){var c=twttr.klass.page("twttr.components.pages.Front",function(){twttr.components.Page.apply(this,arguments)}).methods({$find:function(a){return $("#front-container").find(a)}}).view(twttr.views.Nothing).addAfterRender(function(){var a=twttr.abdecider.choose("lohp_video_experiment_258");a==="video"&&this.$find(".front-welcome").click(function(){if($(this).hasClass("playing"))return;var a=['type="text/html"','width="520" height="293"','src="http://www.youtube.com/embed/1xgLJpBbdDE?showinfo=0&rel=0&modestbranding=1&controls=0&autohide=1&autoplay=1&origin='+window.location.protocol+"//"+window.location.host+'"','frameborder="0"'];$(this).append("<iframe "+a.join(" ")+"></iframe>").addClass("playing"),trackClient({component:"video",element:"play_button",action:"click"});var b=1,c=setInterval(function(){trackClient({component:"video",element:"second"+b*10,action:"impression"}),b++},1e4);setTimeout(function(){clearInterval(c)},9e4)});var b=twttr.abdecider.choose("nascar_homepage_276");b!="homepage_off"&&this.$find('a[href="/hashtag/nascar"]').click(function(){trackClient({page:"front",section:"",action:"click"},"nascar")}),twttr.pageLocale==="ja"?(twttr.abdecider.choose("japanese_signup_text_214"),twttr.abdecider.choose("localized_tagline_loggedout_front_page_244")):twttr.pageLocale==="de"&&twttr.abdecider.choose("localized_image_germany_loggedout_front_page_294");var c=this.$find(".js-front-signup form");c.find("input[type=text], input[type=password]").focus(function(){trackClient({section:"signup_callout",component:$(this).attr("name").split(/[\[|\]]/)[1],action:"focus_field"})}),c.submit(function(){trackClient({section:"signup_callout",component:"form",action:"signup_click"})}),twttr.helpers.addFormEvents(c);var d=this.$find(".js-front-signin form"),e=c.data("front_page_full_signup_256");e&&(d=$(".global-nav .js-front-signin form")),(!e||e&&!$("form input.focused").length)&&d.find(".email-input").focus(),d.submit(function(){trackClient({section:"login_callout",component:"form",action:"login_click"})}),twttr.helpers.addFormEvents(d),e&&(twttr.helpers.addHoldingInputEvents(d),d.find(".placeholding-input .placeholder").each(function(){var a=$(this);a.text(twttr.helpers.truncate(a.text(),20,"...")),a.show()}))}).addOnSwitchAway(function(){twttr.themes.loadDefaultTheme()}).methods({index:function(a,b){if(b.in_reply_to_status_id){twttr.router.routeTo(twttr.router.loginRedirectPath({redirect_after_login:"/"+window.location.search}));return}window._scribedFrontImpression?window._scribedFrontImpression=!1:$(".front-image-nascar").length>0?trackClient({page:"front",section:"",action:"impression"},"nascar"):trackClient({page:"front",section:"",action:"impression"},"front"),this.updatePageTitle(_("Twitter")),twttr.themes.loadFrontPageTheme()}});twttr.isT1?c.addAfterRender(function(){var a=$(".js-front-language form");a.submit(function(){trackClient({section:"language_dropdown",component:"form",action:"select"},{event_info:this.lang.value})})}):c.addAfterRender(function(){this.$find(".bottompart").empty().append((new twttr.components.LanguageLinks).$node.fadeIn()).append((new twttr.components.CountrySelect).$node.fadeIn()).append((new twttr.components.Footer).$node)}).addOnSwitchTo(function(){twttr.$elements.page.css("padding-top","")}),a(c)})}),provide("components/pages/Login",function(a){using("_","constants").as(function(b,_,c){var d=twttr.abdecider.choose("remember_me_checked_by_default_287")=="checked",e=jQuery.cookie("remember_checked")=="1"||jQuery.cookie("remember_checked")==null&&d,f=twttr.klass.page("twttr.components.pages.Login").view(twttr.views.LoginPage).addBeforeRender(function(){this.updatePageTitle(_("Sign in to Twitter")),twttr.themes.clear()}).addAfterRender(function(){if(twttr.loggedIn)twttr.showMessage(_("You are already logged in!")),twttr.router.routeTo(twttr.router.homePath());else{twttr.helpers.addFormEvents(this.$find("form.js-signin")),this.$find("p.js-forgot a[title]").tipsy({gravity:"se"});var a=this.$find(".js-bottompart");twttr.isT1?twttr.helpers.addHoldingInputEvents(this.$find("form")):a.append((new twttr.components.LanguageLinks).$node).append((new twttr.components.CountrySelect).$node),a.append((new twttr.components.Footer).$node);var b=this.$find(".username input").focus();setTimeout(function(){b.focus()},1)}}).addOnSwitchTo(function(){twttr.themes.loadDefaultTheme()}).methods({noAutoRender:!0,index:function(a,b){this.render({redirect_after_login:a.redirect_after_login||b.redirect_after_login,password_reset_title:_("If you remember your password, try logging in with your email"),remember_checked:e}),trackClient({section:"",component:"",action:"impression"},"login")},error:function(a,b){this.render({redirect_after_login:a.redirect_after_login||b.redirect_after_login,username_or_email:b.username_or_email,remember_checked:e}),twttr.loggedIn||(a.error=="captcha"?(this._addCaptcha(),twttr.showMessage(_("We gotta check... are you human?")),trackClient({section:"form",component:"captcha",action:"show"},"login")):(twttr.showError(_("Wrong Username/Email and password combination.")),trackClient({section:"form",component:"username_password",action:"validation_error"},"login")))},loginRequired:function(){twttr.router.routeTo(twttr.router.loginRedirectPath({redirect_after_login:twttr.Router.getCurrentPath()})),twttr.showMessage(_("You must log in to do that!"))},_addCaptcha:function(){var a=this;using(b.constants.recaptcha.srcUrl).load().then(function(){Recaptcha.create(b.constants.recaptcha.publicKey,a.$find(".js-signin .js-captcha")[0],{lang:twttr.pageLocale,theme:"white"})})}});a(twttr.components.pages.Login)})}),provide("components/pages/Logout",function(a){using("_").as(function(b,_){twttr.klass.page("twttr.components.pages.Logout").view(twttr.views.LogoutPage).addAfterRender(function(){twttr.helpers.addFormEvents(this.$find("form.signout")),this.$find(".cancel").click(function(){return twttr.router.routeTo(twttr.router.homePath()),!1});var a=this.$find(".bottompart");twttr.isT1||a.append((new twttr.components.LanguageLinks).$node).append((new twttr.components.CountrySelect).$node),a.append((new twttr.components.Footer).$node)}).methods({index:function(a,b){if(!twttr.loggedIn)return twttr.decider.isAvailable("mobile_download_gallery_logged_out")?twttr.router.routeTo("/download?logged_out=1"):twttr.router.routeTo(twttr.router.homePath());this.updatePageTitle(_("Twitter / Sign out of Twitter")),twttr.themes.loadCurrentUserStyle()}}),a(twttr.components.pages.Logout)})}),provide("components/pages/Profile",function(a){using("_",twttr.isT1?"components/pages/mixins/profileT1":"components/pages/mixins/profileP1",twttr.isT1?"mixins/t1/emptyTimelineRecommendations":"mixins/emptyTimelineRecommendations","constants").as(function(b,_,c,d){var e=twttr.klass("twttr.components.pages.Profile").subclassOf(twttr.components.pages.ProfileAbstract).view(twttr.views.ProfilePage).containerCssClass("profile-container").mixin(c,d).methods({checkWithheld:function(){twttr.decider.isAvailable("phoenix_pctd")&&twttr.profileUser&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope==="user"&&!twttr.helpers.isCurrentUser(twttr.profileUser.id)?this.renderWithheld():this.renderNotWithheld()},renderWithheld:function(){$("#page-container").removeClass("profile-container").addClass("wrapper-permalink permalink-container withheld")},renderNotWithheld:function(){$("#page-container").addClass("profile-container").removeClass("wrapper-permalink permalink-container withheld")},userWasBlocked:function(a,b){b.screenName===twttr.profileUser.screenName&&$(".profile-actions-container a.js-direct-message-action, .profile-actions-container div.js-direct-message-action").remove()},getUserInfo:function(a,b,c){if(this.profileUser&&a==this.profileUser.screenName){twttr.profileUser=this.profileUser,twttr.is.def(this.profileUser.promotedContent)&&(twttr.promotedAccount={id:this.profileUser.id,impressionId:this.profileUser.promotedContent.impression_id}),b&&b();return}var d=this.preRendered?this.$find("div.profile-header").attr("data-user"):null;if(d){data=JSON.parse(d),this.profileUser=twttr.profileUser=new twttr.anywhere.api.models.User(data),b&&b();return}return twttr.components.pages.ProfileAbstract.prototype.getUserInfo.apply(this,arguments)},profile:function(a,b){var c=this,d=a.screen_name.toLowerCase().replace(/^@/,"");this.loading(d),!twttr.loggedIn&&twttr.pageLocale==="ja"&&twttr.abdecider.choose("japanese_signup_text_profile_232"),this.getUserInfo(d,function(){c.updatePageTitle(_("{{fullName}} ({{screenName}}) on Twitter",{fullName:c.profileUser.name,screenName:d})),c._highlightNavIfCurrentUser(d),c.selectCurrentSideNav(),b.banner_preview_url&&twttr.helpers.isCurrentUser(c.profileUser)&&(c.bannerPreviewUrl=b.banner_preview_url),c._switchToStream({screenName:d,stream:c.initialProfileStream(),tab:"tweets"}),c.checkWithheld()},{batch:!twttr.loggedIn,profiler:!0},twttr.bind(this,this.noUserFoundCallback))},message:function(a){this.profile(a),a=a||{},twttr.API.User.find(a.screen_name,function(b){twttr.dialogs.dmSingle({user:{screenName:a.screen_name,user_id:b.attributes.id,name:b.attributes.name,profile_image_url:b.attributes.profile_image_url},origin:a.origin}).open()})},favorites:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Favorites",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.Favorites,tab:"favorites"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},profile_activity:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Activity",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.ActivityByUserStream,tab:"activity"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},followers:function(a){var b=this._defaultedScreenName(a.screen_name);this.updatePageTitle(_("Twitter / People who follow {{screenName}}",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.Followers,tab:"followers"})},following:function(a){var b=this._defaultedScreenName(a.screen_name);this.updatePageTitle(_("Twitter / People {{screenName}} is following",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this.one("switchedToStream",twttr.bind(this,this.insertEmptyTimeline)),this._switchToStream({screenName:b,stream:twttr.streams.Friends,tab:"following"})},youBothFollow:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){this.updatePageTitle(_("Twitter / People you and @{{screenName}} both follow",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.SocialContextStream,socialContextType:"followsInCommonWith",tab:"following"})}))},followersYouFollow:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){this.updatePageTitle(_("Twitter / People you follow who follow @{{screenName}}",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectSideNav("userFollowers"),this._switchToStream({screenName:b,stream:twttr.streams.SocialContextStream,socialContextType:"followingFollowersOf",tab:"followers"})}))},lists:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Lists",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.OwnLists,tab:"lists"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},subscriptions:function(a){var b=a.screen_name;this.updatePageTitle(_("Twitter / Lists {{screenName}} is following",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.Subscriptions,tab:"lists"})},followerRequests:function(a){var b=twttr.util.params().uid;b&&!twttr.helpers.isCurrentUser(+b)&&twttr.router.redirectTo("/?badLinkRecipient="+b);var c=this._defaultedScreenName(a.screen_name);if(!twttr.helpers.isCurrentUser(c))twttr.router.routeTo(twttr.router.profilePath({screen_name:c}));else{this.updatePageTitle(_("Twitter / My follower requests")),this.selectCurrentSideNav(),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.FollowerRequests,tab:"pending"});if(!this.didBindUserBlockedEvent){this.didBindUserBlockedEvent=!0;var d=this;twttr.API.User.bind("block",function(){d.streamManager.resetCache()})}}},listDeleted:function(a){this.streamManager.getCurrent().remove(a.uri)},dashStatsTitle:function(){return twttr.helpers.isProfileUser()?_("About you"):null},shouldShowTweetBox:function(){return twttr.loggedIn&&!twttr.helpers.isProfileUser()&&twttr.decider.isAvailable("profile_tweetbox")},renderTweetbox:function(){if(this.tweetBox&&this._renderedScreenName===twttr.profileUser.screenName)return this.tweetBoxNode;var a=this;this.$find("div.profile-tweet-box-placeholder").remove();if(this.shouldShowTweetBox()){var b=this.tweetBoxNode=$('<div class="profile-tweet-box"/>'),c="@"+this.profileUser.screenName;this.$find(".profile-actions-container").addClass("preceeding-profile-tweet-box").after(b),this.tweetBox=new twttr.TweetBox(b.empty(),twttr.merge({defaultContent:c+" ",id:"profile-tweet-box",condensed:!0,enableDraft:twttr.isT1,enableAutoGrow:twttr.isT1,statusAction:"update"},this.getTweetBoxOptions())),this.tweetBox.bind("tweetSuccess",function(a,b){b.inReplyToScreenName?twttr.showMessage(_("Your Tweet to @{{username}} has been sent!",{username:b.inReplyToScreenName})):twttr.showMessage(_("Your Tweet was posted!"))})}return b},getTweetbox:function(){return this.tweetBox},initialProfileStream:function(){return twttr.isT1&&twttr.streams.Profile.shouldDisplay()?twttr.streams.Profile:twttr.streams.User},noUserFoundCallback:function(){this._renderedScreenName=null,this.streamManager&&(this.streamManager.switchOut(),this.streamManager.setCurrent(null))}}).addOnSwitchAway(function(){twttr.admin&&twttr.admin.removeTools(),this.renderNotWithheld(),twttr.API.User.unbind("block",this.userWasBlocked)}).addAfterRender(function(){if(!window.location.hash)return;var a=twttr.util.paramsFromUrl(window.location.hash);a&&a.protected_redirect&&(window.location.hash=window.location.hash.replace("?protected_redirect=true",""),twttr.showError(_("Sorry, you are not authorized to see this status.")))}).addAfterRender(function(){this.preRendered&&!this.didEmptyDashboard&&(this.$find("div.dashboard").empty(),this.didEmptyDashboard=!0),this.addDashboardComponents(this.getDashboardComponents())});a(e)})}),provide("components/pages/List",function(a){using("_","util",twttr.isT1?"components/pages/mixins/listT1":"components/pages/mixins/listP1","streams/List","streams/ListMembers","streams/ListFollowers","components/SignupCallOut",function(_,b,c,d,e,f,g){var i=twttr.klass("twttr.components.pages.List").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).methods(twttr.EventProvider).methods({list:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}}",a)),this.switchToStream(d,a),this.selectCurrentSideNav(),this.focusStreamTab("tweets")},members:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}} - Following",a)),this.switchToStream(e,a),this.selectCurrentSideNav(),this.focusStreamTab("members")},followers:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}} - Followers",a)),this.switchToStream(f,a),this.selectCurrentSideNav(),this.focusStreamTab("followers")},noAutoRender:!0,listDeleted:function(a){twttr.showMessage(_("List deleted")),twttr.router.routeTo(twttr.router.homePath())},listUpdated:function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:a.slug}))},_getList:function(a){var b=this;if(!this.listOwnerName||!this.listId)throw"You tried to use _getList before defining .listOwnerName and .listId";twttr.API.User.find(this.listOwnerName,function(c){c.lists.find(b.listId,function(b){a(b,c)})})},switchToStream:function(a,b){var c=this,d=function(){c.trigger("notFound")};this.loading(b.screenName,b.listSlug),twttr.API.User.find(b.screenName,{success:function(e){twttr.profileUser=e,e.lists.find(b.listSlug,{success:function(d){c.listId=d.id,c.listOwnerName=d.user.screenName,c._listSlug=d.slug,c.fullName=d.fullName;var e=new twttr.views.List(d);twttr.themes.loadUserStyleFor(d.user),c._renderedListId!==d.id&&(c.render({list:e}),c._registerEvents(d),c._renderedListId=d.id),c.streamManager.switchTo(a,b)},error:d})},error:d})},loading:function(a,b){this.unfocusStreamItem(),this._listSlug!==b&&this.listOwnerName!==a&&this.$node.children().empty()}}).addAfterRender(function(){var a=this;this._getList(function(b,c){a.owner=c,twttr.loggedIn||a.addDashboardComponent(new g("list",{profileUser:c})),a.addDashboardComponents(a.getDashboardComponents(b)),a.owner&&!twttr.isT1&&trackClient({action:"impression"},{profile_id:a.owner.id,message:b.slug})})}).mixin(c);a(i)})}),provide("components/pages/Permalink",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.pages.Permalink").subclassOf(twttr.components.Page).view(twttr.views.PermalinkPage).addOnSwitchAway(function(){twttr.$elements.page.css("padding-top",""),twttr.widget.Dialog.close()}).methods({permalink:function(a){this.loadPage(a)},loadPage:function(a,b){var c=this;twttr.widget.Dialog.close();if(this._renderedTweetId==a.id)return b&&b.call(this);this._renderedTweetId=a.id,this.loading();var d=function(b){b.status==403?twttr.router.routeTo(twttr.router.profilePath({screen_name:a.screen_name})):c.trigger("notFound")},e=function(d){c.tweetComponent=new twttr.components.PermalinkTweet(d),c.tweetComponent.$node.appendTo(c.$find(".components-middle")),c.tweetComponent.bind("deleted",function(){twttr.app.isOnPage("permalink")&&twttr.router.routeTo(twttr.router.homePath())});if(a.photo_index&&!twttr.decider.isAvailable("phoenix_turkey_permalink")){c.trigger("notFound");return}var e=c.$find(".permalink");if(c.tweetComponent.renderWithheld())e.addClass("withheld");else{c.tweetComponent.renderCreatorWithheld()?e.addClass("withheld-creator"):e.removeClass("withheld-creator");var f=c.$find("div.js-tweet-media-container");c.mediaComponent=new twttr.components.Media(d,f.width(),{linkLarge:!0}),c.mediaComponent.$node.appendTo(f);var g=new twttr.components.InReplyTo(d),i=new twttr.components.TweetGeoSmall(d),j=new twttr.components.Footer("slim"),k=new twttr.components.MachineTranslatedTweet(d);g.$node.appendTo(c.$find(".components-above"));if(!twttr.isT1){var l=new twttr.components.MentionedInTweet(d);l.$node.appendTo(c.$find(".components-below"))}c.renderActivity(d),i.$node.appendTo(c.$find(twttr.isT1?".components-middle .permalink-inner":".components-below")),c.renderReplies(d),j.$node.appendTo(c.$find(".permalink-footer")),k.$node.appendTo(c.$find("div.js-machine-translated-tweet-container")),e.removeClass("withheld"),b&&b.call(c)}if(!twttr.loggedIn){var m=new twttr.components.SignupCallOut("permalink",{profileUser:d.user});twttr.isT1?m.$node.prependTo(c.$find(".permalink-footer")):m.$node.appendTo(c.$find(".permalink-header")),twttr.$elements.page.css("padding-top","30px")}};twttr.API.Status.find(a.id,{success:function(a){c.status=a,c.updatePageTitle(_("Twitter / @{{screenName}}: {{{truncatedText}}} ...",{screenName:a.user.screenName,truncatedText:a.text.slice(0,26)})),twttr.themes.loadUserStyleFor(a.user),c.render(),twttr.loggedIn?twttr.currentUser.relationshipWith(a.user.screenName,{success:function(b){a.user.following=b.following,a.user.attributes.following=b.following,a.attributes.user.following=b.following,e(a)},error:d}):(a.user.following=!1,a.user.attributes.following=!1,a.attributes.user.following=!1,e(a)),trackClient({component:"tweet",action:"results"},{item_ids:[a.id],item_count:1,event_value:1})},error:d}),trackClient({action:"impression"})},loading:function(){this.$find(".permalink").empty()}}).methods({noAutoRender:!0}).click({".js-tweets-at-this-place":function(a,b){var c=b.attr("data-place-id"),d=b.attr("data-place-name");return c&&d&&twttr.router.routeTo(twttr.router.placeTweetSearchPath({place_id:c,place_name:d})),a.stopPropagation(),a.preventDefault(),!1},"a[data-twitter-media-url='true']":function(a){a.stopPropagation()}}).keydown({f:function(a){$(a.target).is(":not(input)")&&this.tweetComponent.faveTweet("keyboard")},r:function(a){$(a.target).is(":not(input)")&&(this.tweetComponent.replyTweet("keyboard"),a.preventDefault())},t:function(a){$(a.target).is(":not(input)")&&this.tweetComponent.retweetTweet("keyboard")}});twttr.isT1?c.containerCssClass("wrapper-permalink").methods({renderReplies:function(a){var b=this;new twttr.components.Conversation(a,null,function(c){var d=new twttr.components.Replies(a,null,c.resultGroups);d.$node.appendTo(b.$find(".components-below")),new twttr.components.InlineReplyBox(b.tweetComponent.$node.find(".tweet"),b.$find(".components-below"),d.$node,481,425)})},permalinkWithEmbedDialog:function(a){this.loadPage(a,this.showEmbedDialog)},showEmbedDialog:function(){twttr.decider.isAvailable("embed_code_dialog")&&twttr.dialogs.embedCode(this.status).open()},renderActivity:twttr.util.noopInT1}).click({"a.embed-link":function(a){a.preventDefault(),a.stopPropagation(),twttr.router.routeTo(twttr.router.embedDialogPermalinkPath({screen_name:this.status.user.screenName,id:this.status.id}))}}):c.containerCssClass("permalink-container").methods({permalinkWithEmbedDialog:twttr.util.noopInP1,showEmbedDialog:twttr.util.noopInP1,renderReplies:twttr.util.noopInP1,renderActivity:function(a){var b=twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_social_context"),c=new twttr.components[b?"TweetActivity":"Retweeters"](a);c.$node.appendTo(this.$find(".components-below"))}}),a(c)})}),provide("components/pages/WhoToFollow",function(a){using("_","constants","streams/SuggestionCategoryMembersStream").as(function(b,_){twttr.klass.page("twttr.components.pages.WhoToFollow",function(){twttr.components.Page.apply(this,arguments),this.dashboardNeedsToBeCreated=!1}).mixin(twttr.mixins.streamablePage).mixin(twttr.mixins.discoveryHelper).view(twttr.views.WhoToFollow).addAfterRender(function(){this._rendered=!0;var a=this;this._createDashboard(!0),twttr.helpers.addFormEvents(this.$find(".who-to-follow-header form"),function(){var b=twttr.audit.currentAction(),c=this.q.value,d;twttr.audit.currentPage()=="welcome"?d=twttr.components.pages.Welcome.ROUTES_TO_STEP[b]:d=twttr.components.pages.WhoToFollow.ROUTES_TO_STEP[b],c!=""&&(trackClient({component:"user_search_form",action:"search"},{step:d,query:c}),a.routePageTo(a.PATH_ROOT,"Search",{query:c}))})}).addOnSwitchTo(function(){this._createDashboard(),trackClient({section:"",component:"",action:"impression"})}).addOnSwitchAway(function(){twttr.API.User.unbind("follow.RecentlyFollowedComponent"),twttr.recentlyViewedUsers.unbind("push.RecentlyViewedComponent"),this.dashboardNeedsToBeCreated=!0,this._rendered=!1,this.$find(".dashboard > .component").remove()}).statics({ROUTES_TO_STEP:{whoToFollow:"suggestions",suggestions:"suggestions",interests:"interests",category:"interests","import":"import",matches:"import",search:"search"}}).methods({switchToStream:function(){var a=this.streamManager.switchTo.apply(this.streamManager,arguments);return a},search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo(this.PATH_ROOT);this._switchTabAndRender("search",c),this.updatePageTitle(_("Twitter / User Search")),trackClient({action:"impression"},{context:"search",query:c});var d=twttr.Scribbler.clientEvent.spawn({context:"search",query:c});this.switchToStream(twttr.streams.PeopleSearch,{query:c,scribbler:d,pathRoot:this.PATH_ROOT})},suggestions:function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("suggestions"),this.updatePageTitle(_("Twitter / Who to follow / Suggestions")),trackClient({action:"impression"},"suggestions");var c=twttr.Scribbler.clientEvent.spawn({context:"suggestions"});if(twttr.decider.isAvailable("whotofollow_recommendations")){var d=this.switchToStream(twttr.streams.UserRecommendationsStream,{scribbler:c,pathRoot:this.PATH_ROOT});d&&d.setStreamManager(this.streamManager)}else twttr.router.redirectTo(twttr.router.whoToFollowInterestsPath())},interests:function(a,b){this._switchTabAndRender("interests"),this.updatePageTitle(_("Twitter / Who to follow / Interests")),trackClient({action:"impression"},"interests");var c=twttr.Scribbler.clientEvent.spawn({context:"interests"}),d={scribbler:c,pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.SuggestionCategoriesStream,this.localizeQuery(d,b))},category:function(a,c){var d=this,e=function(a){if(!a)return d.routePageTo(d.PATH_ROOT,"Interests");var e=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});d._switchTabAndRender("interests"),d.updatePageTitle(_("Twitter / Who to follow / Interests / {{category}}",{category:a.name})),d.switchToStream(b.streams.SuggestionCategoryMembersStream,d.localizeQuery({category:f,suggestionCategory:a,scribbler:e,pathRoot:d.PATH_ROOT},c))},f=a.category||c.category;trackClient({action:"impression"},{query:f,context:"interests"});var g=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;g?e(g[f]):twttr.API.SuggestionCategory.getAll(this.localizeQuery({success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[f];e(b)}},c))},"import":function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("import","","services"),this.updatePageTitle(_("Twitter / Who to follow / Find friends")),trackClient({action:"impression"},"import");var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:this.PATH_ROOT},b),e=this.switchToStream(twttr.streams.ContactImportServices,d);e&&e.setStreamManager(this.streamManager)},matches:function(){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("import","","matches"),this.updatePageTitle(_("Twitter / Who to follow / Find friends / Results")),trackClient({action:"impression"},"import");var a=twttr.Scribbler.clientEvent.spawn({context:"import"});this.switchToStream(twttr.streams.ContactImportMatches,{scribbler:a,pathRoot:this.PATH_ROOT})},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a},PATH_ROOT:"whoToFollow",noAutoRender:!0,_createDashboard:function(a){if(a||this.dashboardNeedsToBeCreated)this.addDashboardComponents(this._dashboardComponents()),this.dashboardNeedsToBeCreated=!1},_dashboardComponents:function(){var a=twttr.Scribbler.clientEvent.spawn({context:function(){var a=twttr.audit.currentAction();return twttr.audit.currentPage()=="welcome"?twttr.components.pages.Welcome.ROUTES_TO_STEP[a]:twttr.components.pages.WhoToFollow.ROUTES_TO_STEP[a]}});if(!twttr.loggedIn)return[new twttr.components.SignupCallOut("who_to_follow"),new twttr.components.Footer];var b=twttr.abdecider.choose("wtf_with_less_122"),c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer];return b=="empty_dashboard"?c=[]:b=="no_recent_follow"?c=[new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_recent_view"?c=[new twttr.components.RecentlyFollowed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_invite_friends"?c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_related_services"?c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.Footer]:b=="invite_friends_only"&&(c=[new twttr.components.InviteFriends(a)]),c},_switchTabAndRender:function(a,b,c){this._rendered||this.render();var d=this.$find(".who-to-follow-header form input");b?d.val(b).addClass("actasfocused").focus():d.val("").removeClass("actasfocused").blur(),this.focusStreamTab(a,c),this.$find(".who-to-follow-stream").removeClass().addClass("who-to-follow-stream who-to-follow-"+a+"-stream"),twttr.themes.loadDefaultTheme()}}),a(twttr.components.pages.WhoToFollow)})}),provide("components/pages/WebPersonalizationPreview",function(a){using("_","constants","components/WebPersonalizationSettings","components/Footer").as(function(b,_){var c=twttr.klass.page("twttr.components.pages.WebPersonalizationPreview").view(twttr.views.WebPersonalizationPreview).containerCssClass("wrapper-narrow").methods({preview:function(a,c){if(!twttr.decider.isAvailable("personalization_preview")&&!c.force_bq)return twttr.router.redirectTo(twttr.router.whoToFollowInterestsPath());this.updatePageTitle(_("Twitter / Web Personalization Preview")),twttr.inEU&&trackClient({element:"eu",action:"impression"}),twttr.doNotTrack&&trackClient({element:"dnt",action:"impression"}),twttr.themes.loadDefaultTheme(),this.$node.empty();var d=new b.components.WebPersonalizationSettings;d.$node.appendTo(this.$node),d.bind("disallow",function(a){twttr.router.routeTo(twttr.router.homePath())}),(new b.components.Footer("slim")).$node.appendTo(this.$node)}});a(c)})}),provide("components/pages/404",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.404").subclassOf(twttr.components.Page).view(twttr.views["404Page"]).containerCssClass("error-page").methods({notFound:function(a){this.render(),this.updatePageTitle(_("Twitter / ?")),twttr.themes.loadCurrentUserStyle()}}).methods({noAutoRender:!0}).addAfterRender(function(){var a=this,b=new twttr.components.Footer("slim");this.$find("div.four-oh-four-footer").remove(),b.$node.appendTo(this.$find(".four-oh-four")),twttr.helpers.addFormEvents(this.$find(".user-search-form"),function(){var a=this.q.value;a!=""&&(twttr.isT1?twttr.router.routeTo(twttr.router.userSearchPath({query:a})):twttr.router.routeTo(twttr.router.whoToFollowSearchPath({query:a})))}),a.$find(".user-search-form").addClass("ready")}),a(twttr.components.pages[404])})}),provide("components/pages/403",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.403").subclassOf(twttr.components.Page).view(twttr.views.SuspendedUserPage).containerCssClass("error-page").methods({suspendedUser:function(a){this.render(),this.updatePageTitle(_("Twitter / Suspended")),twttr.themes.loadCurrentUserStyle()}}).methods({noAutoRender:!0}),a(twttr.components.pages[403])})}),provide("components/pages/PlaceT1",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.pages.PlaceT1",function(){twttr.components.Page.apply(this,arguments)}).subclassOf(twttr.components.Page).methods({tweets:function(a){var b=this;twttr.API.Place.find(a.place_id,{success:function(a){twttr.router.redirectTo(twttr.geo.getPlaceFullAddressAndMapLink(a.data()).map_link)},error:function(a){b.trigger("notFound")}})},noAutoRender:!0});a(c)})}),provide("components/pages/RateLimit",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.RateLimit").subclassOf(twttr.components.Page).view(twttr.views.RateLimitPage).methods({tooMuch:function(a){this.render(),this.updatePageTitle(_("Twitter / Error")),twttr.themes.loadDefaultTheme()}}).methods({noAutoRender:!0}).containerCssClass("four-twenty-container"),a(twttr.components.pages.RateLimit)})}),provide("components/pages/mixins/welcomeLearnFlowT1",function(a){using().as(function(){twttr.klass.mixin("twttr.components.pages.mixins.welcomeLearnFlowT1",function(){return this.click({".js-account-group":function(a,b){a.stopPropagation(),a.preventDefault(),this.showMiniProfile(b.closest(".js-actionable-user").data("user-id")),twttr.scribbles.logViewProfileDetails.call(b,a)},".js-who-to-follow-search .js-submit":function(){trackClient({component:"user_search_form",element:"search_button",action:"click"})}}).methods({showMiniProfile:function(a){twttr.API.User.find(a,function(a){using("widget/MiniProfileDialog",function(b){(new b(a,!0)).open()})})},_slideDrawer:function(a,b){a?$(".js-welcome-dashboard").show():$(".js-welcome-dashboard").hide(),b&&b()},_customRenderStep:function(a){a=="matches"?this.$find(".js-back-to-import").show():this.$find(".js-back-to-import").hide()},_pulseFollowButton:function(){},_resizeFlow:function(){var a=$(window).height()-$(".js-flow-step").outerHeight()-$(".js-welcome-stream-header").outerHeight()-$("div.js-stream-header").outerHeight()-($(".js-back-to-import:visible").outerHeight()||0)-114;a>100&&$(".stream-manager-container").css("max-height",a);var b=$(window).height()-$(".js-welcome-faux-tweet-stream").height()-$(".js-content-header").height()-153+30;b>20&&$(".route-welcome .content-main .stream-end-inner").css("padding-bottom",b)},_getNextButtonText:function(a){return a?_("Done"):_("Next")},_setTheme:function(){twttr.themes.loadDefaultTheme()}}).addOnSwitchTo(function(){twttr.cache.local.shownWelcomeFlow=!0})}),a()})}),provide("components/pages/WelcomeLearnFlow",function(a){using("streams/SuggestionCategoryMembersDashboardStream","stork").as(function(b){twttr.klass.page("twttr.components.pages.WelcomeLearnFlow",function(){twttr.components.Page.apply(this,arguments),this._steps=this._firstStep=null;var a=twttr.Router.getCurrentQueryStringParams();this._resurrect=!!a.resurrect;var b=[];for(var c=0;c<b.length;++c){var d=twttr.abdecider.choose(b[c]);if(d!="")break}d||(this._bucket=a.welcomeBucket),this._showIntro=!0,this._showProgress=!0,this.PROFILE_SIZE_LIMIT=716800}).subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).mixin(twttr.mixins.discoveryHelper).mixin(twttr.mixins.welcomeScribing).mixin(twttr.isT1?twttr.components.pages.mixins.welcomeLearnFlowT1:twttr.components.pages.mixins.welcomeLearnFlowP1).view(twttr.views.WelcomeLearnFlow).click({".user-content-image, .display-name, .screen-name":function(a){$(a.target).closest(".stream-item-content").find(".more-info").slideDown()},".glass .submit":function(a){$(a.target).closest("form").submit()},".js-image-error .js-dismiss":function(){this._hideImageError()},".js-back-to-stream .js-button":function(){this.$find(".js-welcome-search input[type='text']").val("");var a=this._steps[this._currentSearchStepId].route;twttr.router.routeTo(a)},".js-full-results-link":function(a){var b=$(a.target).data("query")||"";trackClient({section:"search",element:"full_results_link",action:"click"},{query:b}),this.routePageTo(this.PATH_ROOT,"Search",{query:b})},".js-skip-link":function(a){var b=this,c=$(a.target),d=this._steps[this._currentStepId],e=function(){b._scribeStepCompletion("skip"),b._isOnLastStep()?b.finish():twttr.router.routeTo(c.attr("href"))};return d&&d.skip_handler?d.skip_handler(e):window.setTimeout(e,0),!1},".js-next-btn":function(a){var b=this,c=$(a.target);if(c.is(".disabled"))return!1;var d=this._steps[this._currentStepId],e=function(){b._scribeStepCompletion("done"),b._isOnLastStep()?b.finish():twttr.router.routeTo(c.attr("href"))},f;return b._lastStream&&b._lastStream.deferFollows?f=function(){d.suppress_follow_progress=!0,b._addNextDisableReason("prefollowing"),b._lastStream.commitPrefollows(function(){d.suppress_follow_progress=!1,e()})}:f=e,d&&d.next_handler?d.next_handler(f):window.setTimeout(f,0),!1}}).addOnSwitchTo(function(){this.updatePageTitle(_("Twitter / Welcome")),twttr.app.resetPadding(),this.setWelcomeSkipCookie(),this._setSteps(),twttr.abdecider.choose("growth_stork_persistent_239")!="no_stork"&&twttr.stork.init(),twttr.decider.isAvailable("welcome_timeline_stats")&&(twttr.streams.Home.scribeTweetDensity=!0,twttr.components.pages.Home.scribeScroll=!0);var a=this;twttr.API.User.bind("follow_request.WelcomeLearnFlow prefollow_request.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(1)}}),twttr.API.User.bind("follow.WelcomeLearnFlow prefollow.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(1)},success:function(b,c){a._previewFollow(c)}}),twttr.API.User.bind("unfollow.WelcomeLearnFlow unprefollow.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(-1)},success:function(b,c){a._previewUnfollow(c)}}),$(window).bind("resize.WelcomeLearnFlow",twttr.bind(this,this._resizeFlow))}).addOnSwitchAway(function(){twttr.app.recalculatePadding(),this._steps=this._firstStep=null,twttr.API.User.unbind(".WelcomeLearnFlow"),$(window).unbind("resize.WelcomeLearnFlow"),this._profileImageInterval&&(window.clearInterval(this._profileImageInterval),this._profileImageInterval=null),twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=$.noop}).addAfterRender(function(){var a=this;this._rendered=!0,this.streamManager.noInfiniteScroll=!0,this.$find(".welcome-dashboard div.js-stream-manager-container").bind("scroll",function(b){var c=$(this);Math.abs(c.scrollTop()+c.height()-c.children().height())<100&&a.streamManager.getMoreOldItems(function(a){scribble("stream-scrolled",{page:a._page,stream:a._cacheKey,focused_tweet_id:a.focusedItemId||""})})}),twttr.helpers.addFormEvents(a.$find(".js-welcome-search form"),function(b,c){var d=c.q;if(d!=""){var e=function(){trackClient({component:"user_search_form",action:"search"},{query:d});var b=twttr.abdecider.choose("welcome_top_people_286")=="top_people"?"SearchTop":"Search";a.routePageTo(a.PATH_ROOT,b,{query:d})};a._lastStream&&a._lastStream.deferFollows?a._lastStream.commitPrefollows(e):e()}})}).statics({ROUTES_TO_STEP:{intro:"intro",interests:"interests",category:"interests","import":"import",matches:"import",search:"search",starter:"starter",recommendations:"recommendations",profile:"profile"}}).methods({PATH_ROOT:"welcome",noAutoRender:!0,_addressBookAvailable:function(){return twttr.decider.isAvailable("wtf_signup_suggestions")},_previewFollow:function(a){var b=this,c=this.$find('.js-tweet-preview-container .js-unclickable-tweet[data-user-id="'+a.idStr+'"]');if(c.length){c.slideDown();return}var d=function(a){var c=new twttr.views.UnclickableTweet(a),d=$(c.html()).hide();b.$find(".js-tweet-preview-container").prepend(d),d.slideDown()};a.status&&!a.status.inReplyToUserId&&!a.status.attributes.was_retweeted?(a.status.attributes.user=a.attributes,d(a.status)):a.timeline({count:25,exclude_replies:!0,success:function(a){a.length()&&d(a.first())}})},_previewUnfollow:function(a){var b=this,c=this.$find(".js-tweet-preview-container .js-unclickable-tweet[data-user-id="+a.id+"]");c.slideUp()},_setSteps:function(){var a=this;this._steps={intro:{route:twttr.router.welcomeIntroPath(),title:_("Welcome, {{{name}}}.",twttr.currentUser),subtitle:_("Get started in less than 60 seconds."),next_step:"recommendations",show_progress:!1,show_search:!1,next_enabled:!0,no_drawer:!0,show_intro_text:!1},recommendations:{route:twttr.router.welcomeRecommendationsPath(),title:_("Build your timeline."),subtitle:_("Follow people to get their Tweets."),next_step:"interests",show_search:!0,show_progress:!0,initial_progress_copy:_("Start by following 5"),min_progress:3,suggested_progress:5,next_enabled:!1,show_intro_text:!0},"import":{route:twttr.router.welcomeImportPath(),title:_("Find people you know."),subtitle:_("Add your contacts securely."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:2,suggested_progress:5,next_enabled:!1,show_intro_text:!0},matches:{route:twttr.router.welcomeImportMatchesPath(),title:_("Find people you know."),subtitle:_("Add your contacts securely."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:2,suggested_progress:5,next_enabled:!1,show_intro_text:!0},interests:{route:twttr.router.welcomeInterestsPath(),title:_("See who’s here."),subtitle:_("Find and follow well-known people."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:3,suggested_progress:5,next_enabled:!1,show_intro_text:!0},profile:{route:twttr.router.welcomeProfilePath(),title:_("Add character."),subtitle:_("Upload a photo and describe yourself.",twttr.currentUser),next_step:"finish",show_search:!1,show_progress:!1,min_progress:1,suggested_progress:1,next_enabled:twttr.abdecider.choose("hide_skip_in_profile_welcome_step_288")==="skip_disabled",skip_disabled:twttr.abdecider.choose("hide_skip_in_profile_welcome_step_288")==="skip_disabled",next_handler:function(b){a._handleProfileNext(b)},show_intro_text:!0}},this._firstStep=this._showIntro?"intro":"recommendations";var b="interests",c;this._resurrect&&(this._steps["import"].min_progress=0),twttr.abdecider.choose("welcome_prefollow_213")=="prefollow"&&(this._steps.recommendations.subtitle+=" "+_("Here are 3 accounts to get you started.")),twttr.abdecider.choose("welcome_email_import_copy_change_264")=="nospam"&&(this._steps["import"].subtitle=_("We won't email your contacts without your permission."),this._steps.matches.subtitle=_("We won't email your contacts without your permission.")),twttr.decider.isAvailable("contact_import")&&(c=this._steps[b],c.next_step="import",b="import"),twttr.decider.isAvailable("welcome_profile")&&twttr.decider.isAvailable("avatar_upload")&&!this._resurrect&&(c=this._steps[b],c.next_step="profile",b="profile"),twttr.decider.isAvailable("welcome_ad_track")&&(this._steps.intro.ad_referal=$.cookie("ad_partner")=="adparlor",this._steps.intro.ad_parlor=$.cookie("ad_partner")=="adparlor"),this._currentSearchStepId=this._steps.intro.next_step,this._steps.matches.next_step=this._steps["import"].next_step},_addAmbassadorList:function(a,b){twttr.currentUser.friendsCount>0?twttr.currentUser.friends().first(function(c){if(!c){b();return}c.lists(function(c){var d=c.find(function(a){return a.description.match(/\#WelcomeToTwitter/i)});if(d){var e=[],f=-1,g=function(){d.members({cursor:f,success:function(c,d){e=e.concat(c.toArray()),d.response.next_cursor?(f=d.response.next_cursor,g()):(a.unshift(e),a.render(),b())}})};g()}else b()})}):b()},_routeToFirstStep:function(){var a=this;window.setTimeout(function(){a._steps?twttr.router.routeTo(a._steps[a._firstStep].route):twttr.router.routeTo(twttr.router.welcomePath())},0)},welcome:function(a,b){this._steps?(trackClient({action:"impression"}),this._welcomeSetupSpinner&&(this._welcomeSetupSpinner.detach(),this._welcomeSetupSpinner=null),this._routeToFirstStep()):(this.render(),this.$find(".js-welcome-search").hide(),this.streamManager.setTitle({_setTitle:function(a){a(_("Please wait…"))}}),this._welcomeSetupSpinner=(new twttr.views.StreamLoading).render(this.$find(".js-who-to-follow-stream .stream-container"),"html"))},_recommendationsStreamOptions:function(){var a={inWelcomeFlow:!0,pathRoot:this.PATH_ROOT,title:"",scribbler:this._createScribbler("recommendations_stream",{context:"starter"})};return a},recommendations:function(a,b){var c=new twttr.streams.UserRecommendationsStream(this._recommendationsStreamOptions()),d=this,e=function(){return twttr.router.routeTo(d._nextRoute(d._steps.recommendations))};if(!this._addressBookAvailable()){e();return}c.loadRecommendedUsers({success:function(a,b){if(a.length()>0){c.scribbler.scribe({action:"found_results",section:"recommendations"}),d._renderStep("recommendations"),d.bqPrefollow&&d.$find(".js-welcome-faux-tweet-stream").hide();var f=d._recommendationsStreamOptions();f.initialItems=a,f.cursor=b.response.next_cursor;var g=d.switchToStream(twttr.streams.UserRecommendationsDashboardStream,f);d.bqPrefollow&&g.reachedTheEnd(),twttr.decider.isAvailable("welcome_warm_signup")&&!d.bqPrefollow?d._addAmbassadorList(g,function(){d._loadedRecommendations(g)}):d._loadedRecommendations(g),g.bind("rendered_recs.WelcomeLearnFlow",function(){d._pulseFollowButton()}),f.scribbler.scribe({action:"impression"})}else c.scribbler.scribe({action:"not_found_results",section:"recommendations"}),e()},error:function(a){e()}})},_loadedRecommendations:function(a){twttr.abdecider.choose("welcome_prefollow_213")=="prefollow"&&twttr.currentUser.friendsCount<=1&&this._prefollow(a,3),this.bqPrefollow&&this._prefollow(a,100)},_prefollow:function(a,b){var c=this,d=this._steps[this._currentStepId];a.deferFollows=!0,window.setTimeout(function(){c.$find(".js-welcome-dashboard .js-stream-item .js-follow-combo").each(function(c,d){if(c>=b)return!1;a.userActionPrefollow($(d),"prefollow.user")}),d.next_enabled||window.setTimeout(function(){c._addNextDisableReason("progress")},0)},0)},intro:function(a,b){trackClient({action:"impression"}),this._renderStep("intro"),this.switchToStream(null)},resurrect:function(a,b){var c=twttr.router.welcomeRecommendationsPath();trackClient({action:"impression"},"resurrect"),c="/?resurrect=1"+c.slice(1),window.location.href=c},"import":function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._renderStep("import"),trackClient({action:"impression"},"import");var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:this.PATH_ROOT,onlyMatched:twttr.abdecider.choose("welcome_flow_no_choice_contact_import_160")=="no_choice_contact_import",inWelcomeFlow:!0,context:"welcome"},b),e=this.switchToStream(twttr.streams.DashboardContactImportServices,d);e&&(e.setStreamManager(this.streamManager),e.setMatchesStreamKey(this._lastMatchesStreamKey))},matches:function(){if(!twttr.loggedIn)return this.trigger("loginRequired");this._renderStep("matches"),trackClient({action:"impression"},"import");var a=twttr.Scribbler.clientEvent.spawn({context:"import"}),b={scribbler:a,pathRoot:this.PATH_ROOT},c=this.switchToStream(twttr.streams.DashboardContactImportMatches,b),d=this;c.bind("error.WelcomeLearnFlow",function(){d._removeNextDisableReason("progress")}),this._lastMatchesStreamKey=c._cacheKey},interests:function(a,b){var c=this;this._renderStep("interests"),trackClient({action:"impression"});var d=twttr.Scribbler.clientEvent.spawn({context:"interests"}),e={scribbler:d,noHeaderFooter:!0,title:"",pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.SuggestionCategoriesDashboardStream,this.localizeQuery(e,b))},category:function(a,c){var d=this,e=function(a){if(!a)return d.routePageTo(d.PATH_ROOT,"Interests");var e=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});d._renderStep("interests"),d.$find(".js-back-to-stream .js-dashboard-stream-title").text(a.name),d.$find(".js-back-to-stream").show(),d._resizeFlow();var g=d.localizeQuery({category:f,suggestionCategory:a,scribbler:e,noHeaderFooter:!0,title:a.name+" ("+a.size+")",pathRoot:d.PATH_ROOT},c);d.switchToStream(b.streams.SuggestionCategoryMembersDashboardStream,g)},f=a.category||c.category;trackClient({action:"impression"},{query:f,context:"interests"});var g=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;g?e(g[f]):twttr.API.SuggestionCategory.getAll(this.localizeQuery({success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[f];e(b)}},c))},switchToStream:function(a){return this._lastStream&&(this._lastStream.unbind(".WelcomeLearnFlow"),this._lastStream=null),a?this._lastStream=this.streamManager.switchTo.apply(this.streamManager,arguments):(this.streamManager.switchOut(),this.streamManager.setCurrent(null),this.streamManager.$moreButton&&this.streamManager.$moreButton.hide()),this._lastStream},search:function(a,b){var c=a.query||b.q;if(!c)return twttr.router.routeTo(this._steps[this._currentSearchStepId].route);this._renderStep(this._currentSearchStepId);var d=this.$find(".js-back-to-stream");d.find("h3").html(_("Results for: <strong>{{query}}</strong>",{query:""})).find("strong").text(c),d.show(),this.$find('.js-welcome-search input[type="text"]').focus();var e=this._createScribbler({section:"search",component:"full_stream"},{context:"search",query:c});e.scribe({action:"impression"});var f={query:c,scribbler:e,pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.DashboardPeopleSearch,f)},searchTop:function(a,b){var c=a.query||b.q;if(!c)return twttr.router.routeTo(this._steps[this._currentSearchStepId].route);this._renderStep(this._currentSearchStepId);var d=this.$find(".js-back-to-stream");d.find("h3").html(_("Top results for: <strong>{{query}}</strong>",{query:""})).find("strong").text(c),this.$find('.js-welcome-search input[type="text"]').focus();var e=this._createScribbler({section:"search",component:"top_stream"},{context:"search",query:c});e.scribe({action:"impression"});var f={query:c,scribbler:e,pathRoot:this.PATH_ROOT},g=this,i=this.switchToStream(twttr.streams.DashboardTopPeopleSearch,f);i.bind("results.WelcomeLearnFlow",function(a,b){b.isEmpty()?g.routePageTo(g.PATH_ROOT,"Search",{query:c}):d.show()})},profile:function(a,b){var c=this;trackClient({action:"impression"});var d=twttr.currentUser.profileImageUrl;d.indexOf("default_profile_image")!=-1&&(d=twttr.assets.path("t1/img/upload_placeholder.png"));var e={description:twttr.currentUser.description,location:twttr.currentUser.location,url:twttr.currentUser.url,profile_image_url:d,api_url:"//"+twttr.domains.remote,post_authenticity_token:twttr.API.getConfig().postAuthenticityToken};this._renderStep("profile"),this.switchToStream(null),(new twttr.views.WelcomeLearnProfile(e)).render(this.$find(".js-content-container"),"html");var f=this.$find(".js-profile-image-input"),g=this.$find(".js-profile-form"),i=this.$find(".js-bio-count");f.bind("change",function(){c._uploadProfileImage()}),twttr.helpers.addFormEvents(g,$.noop),g.find("input, textarea").bind("change keypress",function(){c._removeNextDisableReason("error_"+$(this).attr("name")),c._updateProfileProgress()}),this._updateProfileProgress();var j=function(){var a=$(this);window.setTimeout(function(){var b=a.is(".js-placeholded")?0:a.val().length;i.text(""+b),i.removeClass("warn superwarn"),b>150?i.addClass("superwarn"):b>140&&i.addClass("warn"),b>160?c._addNextDisableReason("bio"):c._removeNextDisableReason("bio")},0)};g.find("textarea").bind("keyup change",j).each(j)},_enableProfileImageUploadControls:function(){var a=this.$find(".js-current-profile-picture-wrapper"),b=this.$find(".js-upload-form");a.removeClass("loading"),b.find(".btn").removeClass("disabled"),b.find('input[type="file"]').attr("disabled",null)},_showImageError:function(a){this.$find(".js-image-error .js-image-error-text").text(a).parent().fadeIn()},_hideImageError:function(a){this.$find(".js-image-error").fadeOut()},_uploadProfileImage:function(){this._hideImageError(),this.$find(".js-current-profile-picture-wrapper").addClass("loading");if(twttr.turkey.hasFileReader()){var a=this.$find(".js-profile-image-input").get(0);if(a.files&&a.files[0]){var b=a.files[0];if(!twttr.turkey.validatePhoto(a.value)){this._showImageError(_("Profile pictures must be JPG, GIF or PNG")),this._enableProfileImageUploadControls(),trackClient({section:"profile",component:"picture",action:"error"}),trackClient({section:"profile",component:"picture",action:"error_format"});return}if(!twttr.is.def(b.size)||b.size>=this.PROFILE_SIZE_LIMIT){this._showImageError(_("Profile pictures must be smaller than 700K")),this._enableProfileImageUploadControls(),trackClient({section:"profile",component:"picture",action:"error"}),trackClient({section:"profile",component:"picture",action:"error_size"});return}}}this._submitProfileImageForm()},_submitProfileImageForm:function(){var a=this,b=this.$find(".js-upload-form");twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=function(b){twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=$.noop,b.error?(trackClient({section:"profile",component:"picture",action:"error"}),a._showImageError(b.error),a._enableProfileImageUploadControls()):(trackClient({section:"profile",component:"picture",action:"success"}),a._uploadProfileImageCallback())},b[0].submit(),b.find(".btn").addClass("disabled"),b.find('input[type="file"]').attr("disabled","disabled")},_uploadProfileImageCallback:function(){var a=this,b=/profile_images\/.*/,c=twttr.currentUser.profileImageUrl.match(b)[0],d=0,e=function(){a._enableProfileImageUploadControls(),window.clearInterval(a._profileImageInterval),a._profileImageInterval=null};a._profileImageInterval=window.setInterval(function(){if(d++>20){e();return}twttr.currentUser.profileImage(twttr.currentUser.screenName,{size:"normal",zx:Math.random(),ssl:!0,success:function(d){var f=d.profile_image_url,g=f.match(b)[0];g!=c&&(a._updateProfileImageUrl(f),e())},error:function(){e()}})},5e3)},_updateProfileImageUrl:function(a){twttr.currentUser.profileImageUrl=a,twttr.currentUser.profileImageUrlHttps=a,twttr.currentUser.attributes.profile_image_url=a,twttr.currentUser.attributes.profile_image_url_https=a,$(".js-mini-current-user img").each(function(){$(this).attr("src",a)});var b=twttr.helpers.transformProfileImageUrl(a,"reasonably_small");this.$find(".js-current-profile-picture-wrapper").find("img").attr("src",b),this._updateProfileProgress()},_handleProfileNext:function(a){var b=this,c=this.$find('.js-profile-form input[type="text"], .js-profile-form textarea'),d=this.$find(".js-profile-form .control-group"),e={success:function(){c.each(function(){var a=$(this);a.val()&&a.val().length>1&&trackClient({section:"profile",component:a.attr("name"),action:"complete"})}),a()},error:function(a){var c=twttr.showError(_('Sorry, we weren’t able to update your profile. Try again or <a class="js-skip-link" href="#">skip this step</a>.'));c.$dom.find(".js-skip-link").click(function(){b.$find(".js-skip-link").click()})}};if(c.length==0){a();return}c.each(function(){var a=$(this);a.is(".js-placeholded")||(e[a.attr("name")]=a.val())}),d.removeClass("error").find(".js-error-msg").remove(),twttr.currentUser.update(e)},_nextRoute:function(a){var b=this._steps[a.next_step].route;return this._resurrect&&(b="/?resurrect=1"+b.slice(1)),b},_updateProfileProgress:function(){var a=0;this.$find('.js-profile-form input[type="text"], .js-profile-form textarea').each(function(){var b=$(this);b.val()&&!b.is(".js-placeholded")&&a++}),this.$find(".js-current-profile-picture").attr("src").indexOf("upload_placeholder.png")==-1&&a++,a>0&&this._removeNextDisableReason("progress"),this._setProgress(a)},_addNextDisableReason:function(a){this._nextDisableReasons[a]||(this._nextDisableReasons[a]=!0,this._nextDisableReasons._reasonCount++),this._setNextButton(!1)},_removeNextDisableReason:function(a){this._nextDisableReasons[a]&&(delete this._nextDisableReasons[a],this._nextDisableReasons._reasonCount--,this._setNextButton(this._nextDisableReasons._reasonCount==0))},_setProgress:function(a){var b=this._steps[this._currentStepId];this.$find(".js-progressbar").progressbar({value:1+Math.floor(100*a/b.suggested_progress)})},_updateProgress:function(a){var b=this._steps[this._currentStepId];b._currentProg||(b._currentProg=0),b._currentProg+=a,b._currentProg<0&&(b._currentProg=0),this._setProgress(b._currentProg),b._currentProg>=b.min_progress&&this._removeNextDisableReason("progress"),b._currentProg>=b.suggested_progress?this.$find(".js-progress-label").html(_("Great!")):b._currentProg==0?this.$find(".js-progress-label").html(b.initial_progress_copy):b.progress_copy_function?this.$find(".js-progress-label").html(b.progress_copy_function(b.suggested_progress-b._currentProg)):this.$find(".js-progress-label").html(_("Follow {{count}} more!",{count:b.suggested_progress-b._currentProg}))},_setNextButton:function(a){a?(this.$find(".js-next-btn").toggleClass("disabled",!1).fadeIn().toggleClass("selected",!0),this.$find(".js-progressbar").closest("td").width("99%")):(this.$find(".js-next-btn").toggleClass("disabled",!0).hide().toggleClass("selected",!1),this.$find(".js-progressbar").closest("td").width("100%")),this.$find(".js-save-btn").toggleClass("primary-btn",a)},_isOnLastStep:function(){var a=this._steps[this._currentStepId];return a&&a.next_step=="finish"},finish:function(){this.clearWelcomeSkipCookie(),trackClient({section:"finished",action:"impression"}),this._slideDrawer(!1,function(){twttr.router.routeTo(twttr.router.homePath())})},_scribeStepCompletion:function(a){var b=this.constructor.ROUTES_TO_STEP[this._currentStepId];trackClient({section:b,action:"complete"}),trackClient({section:b,component:"progress",action:a})},_renderStep:function(a){this._rendered||this.render(),this._setTheme();var b=this._steps[a];this.$find(".js-content-container").empty(),this._customRenderStep(a),this.$find(".js-welcome-search").toggle(b.show_search),this.$find(".js-back-to-stream").hide(),this._currentStepId=a,a!="search"&&(this._currentSearchStepId=this._currentStepId);var c;a=="matches"||a=="import"?c=_("Find people by name..."):c=_("Search for..."),this.$find(".js-who-to-follow-search input").attr("placeholder",c),this._slideDrawer(!b.no_drawer),this.$find(".js-welcome-intro").hide(),this.$find(".js-welcome-dashboard-footer").show();var d=b.next_step=="finish",e={last_step:d,button_text:this._getNextButtonText(d),continue_route:d?twttr.router.homePath():this._nextRoute(b),show_progress:b.show_progress,next_enabled:b.next_enabled,stream_arrow:!b.no_drawer};twttr.merge(e,b),(new twttr.views.WelcomeLearnHeader(e)).render(this.$find(".js-flow-step"),"html");var f=this.$find(".js-next-btn"),g=this.$find(".js-skip-link");f.attr("href",e.continue_route),g.attr("href",e.continue_route).toggle(!b.next_enabled),a=="intro"?this.$find(".js-intro-tweet").show():this.$find(".js-intro-tweet").hide(),this._nextDisableReasons={_reasonCount:0},b.next_enabled||(this._addNextDisableReason("progress"),this._updateProgress(0)),b.skip_disabled&&this.$find(".js-welcome-dashboard-footer").hide(),this._resizeFlow();var i=this.$find(".example-tweet-info");b.show_intro_text?i.show():i.hide()},_createScribbler:function(a,b){twttr.is.string(a)&&(a={component:a});var c=function(b){var c=twttr.Scribbler.clientAppDefaultTerms();return b=twttr.merge({},b,a),twttr.Scribbler.clientAppEventNameGenerator(b,c)};return twttr.Scribbler.clientEvent.spawn(b,c)},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a}}),a()})}),provide("components/pages/Welcome",function(a){using("boot/bootstrap_data").as(function(b){var c=twttr.components.pages.WelcomeLearnFlow,d=twttr.Router.getCurrentQueryStringParams();if(d.welcomePage&&d.welcomePage.match(/^Welcome/)&&twttr.components.pages[d.welcomePage])c=twttr.components.pages[d.welcomePage];else if(!twttr.isT1){var e=[];for(var f=0;f<e.length;++f){var g=e[f][0],i=e[f][1],j=twttr.abdecider.choose(g,!0);if(j){j!="control"&&(c=i);break}}}twttr.components.pages.Welcome=c,a(twttr.components.pages.Welcome)})}),provide("components/pages/AbstractMediaGallery",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.components.pages.AbstractMediaGallery").subclassOf(twttr.components.Page).addAfterRender(function(){}).view(twttr.views.MediaGalleryPage).addOnSwitchAway(function(){$("#page-container").show(),$(twttr.isT1?".js-topbar":"#top-stuff").show(),$("body").removeClass("has-media-gallery"),this.$gallery.remove(),this.$gallery=null,this.$content=null,this._query=null,this._viewMode=null}).addOnSwitchTo(function(){$("#page-container").hide(),$(twttr.isT1?".js-topbar":"#top-stuff").hide(),this.$gallery=(new twttr.views.MediaGalleryPage).$html().appendTo("#doc"),this.$content=this.$gallery.find(".media-gallery-content"),$("body").addClass("has-media-gallery")}).keydown({left:function(){this._grid&&this._grid.showPrev&&this._grid.showPrev()},right:function(){this._grid&&this._grid.showNext&&this._grid.showNext()},esc:function(){this.closeGalleryAction()}}).methods({showSlideshowLoading:function(){this.addClass("loading loadingTweet loadingMedia")},showLoading:function(){this.addClass("loading")},hideTweetLoading:function(){this.removeClass("loading loadingTweet")},hideMediaLoading:function(){this.removeClass("loading loadingMedia")},hideLoading:function(){this.removeClass("loading loadingTweet loadingMedia")},addClass:function(a){this.$content&&this.$content.addClass(a)},removeClass:function(a){this.$content&&this.$content.removeClass(a)},grid:function(a,b){if(twttr.decider.isAvailable("disable_gallery_grid")){this.slideshow(a,b);return}this.setup(a,b),this._viewMode="grid";if(this.deciderKey&&!twttr.decider.isAvailable(this.deciderKey)){this.trigger("notFound");return}this.buildGrid(a,b),this.scribbler.scribe({component:this._mode,action:"impression"})},buildGrid:function(){throw new Exception("buildGrid is an abstract method that must be implemented in your subclass.")},completeGridRender:function(a){a.generateItemHref=twttr.bind(this,this.generateItemHref),a.provider=this._provider,a.scribbler=this.scribbler,this._renderControls("grid"),this._grid&&(this._grid.$node.remove(),this._grid=null),this.showLoading(),this.$content.addClass("grid"),this._grid=new twttr.components.TheGrid(a,this.$content.width()),this._grid.$node.appendTo(this.$content),this._mode=="videos"&&this._grid.$node.addClass("grid-videos"),this._grid.bind("showLoading",twttr.bind(this,this.showLoading)),this._grid.bind("hideLoading",twttr.bind(this,this.hideLoading)),b.util.lazyBind(window,"resize",twttr.bind(this,this.resizeGrid))},slideshow:function(a,b){if(this.alreadySlideshow(a))return;this.setup(a,b),this._viewMode="slideshow",this._displayMode="slideshow";if(this.deciderKey&&!twttr.decider.isAvailable(this.deciderKey)){this.trigger("notFound");return}this._renderControls("detail");var c={width:this.$content.width(),height:$(window).height()-300,thumbContainerWidth:880,url:b.url||null,mode:this._mode};this._grid&&(this._grid.$node.remove(),this._grid=null),this.buildSlideshow(a,b,c),this.$content.removeClass("grid"),this.scribbler.scribe({component:this._mode,action:"impression"})},buildSlideshow:$.noop,completeSlideshowRender:function(a){a.generateItemHref=twttr.bind(this,this.generateItemHref),a.provider=this._provider,a.scribbler=this.scribbler,this._grid=new twttr.components.MediaSlideshow(a),this._grid.$node.appendTo(this.$content),this._grid.bind("showSlideshowLoading",twttr.bind(this,this.showSlideshowLoading)),this._grid.bind("hideTweetLoading",twttr.bind(this,this.hideTweetLoading)),this._grid.bind("hideMediaLoading",twttr.bind(this,this.hideMediaLoading)),this.showLoading(),b.util.lazyBind(window,"resize",twttr.bind(this,this.resizeSlideshow)),this._grid.bind("mediaRendered",twttr.bind(this,this.resizeSlideshow))},resizeGrid:function(){if(this._viewMode=="slideshow"||!this.$content)return;var a=this.$content.width();this._grid.setCols(a)},resizeSlideshow:function(){var a=this;if(this._viewMode!="slideshow"||!this.$content)return;var c=this._mode=="photos"?b.constants.slideshow.photoMinHeight:b.constants.slideshow.videoMinHeight,h=$(window).height()-(twttr.decider.isAvailable("disable_gallery_thumbs")?220:300),d=this.$content.width();h=Math.max(h,c),this._grid.resizePicture(h,d),this._grid._thumbnailViewer&&(this.resizeThumbnailViewerTimer&&clearTimeout(this.resizeThumbnailViewerTimer),this.resizeThumbnailViewerTimer=setTimeout(function(){a._grid._thumbnailViewer&&a._grid._thumbnailViewer.updateWidth()},500))},_renderControls:function(a){this._controls&&(this._controls.$node.remove(),this._controls=null);var b=$.extend(this.getControlsOptions(),{view:a});this._controls=new twttr.components.MediaGalleryControls(b),this._controls.$node.appendTo(this.$content),this._controls.bind("close",twttr.bind(this,this.closeGalleryAction)),this._controls.bind("detailViewSelected",twttr.bind(this,this.detailViewSelected)),this._controls.bind("gridViewSelected",twttr.bind(this,this.gridViewSelected)),$("div.tipsy").remove(),this._controls.$node.find(".detailview, .gridview").tipsy({gravity:"s",fade:!0})},closeGalleryAction:$.noop,detailViewSelected:$.noop,gridViewSelected:$.noop}),a(twttr.components.pages.AbstractMediaGallery)})}),provide("components/pages/UserMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.UserMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a){this.type="userMedia",this.screenName=a.screen_name,this.deciderKey="phoenix_user_media_gallery",this._mode="photos",this._provider=new twttr.media.provider.UserMedia({screenName:this.screenName}),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id},event_info:this._mode}),this.filter=function(a){return!a||!a.mediaType?!1:a.mediaType.icon()===twttr.constants.media.photoIcon}},getControlsOptions:function(){return{type:this.type,screenName:this.screenName,profilePath:twttr.router.profilePath({screen_name:this.screenName}),mode:this._mode}},generateItemHref:function(a){return twttr.router.userMediaSlideshowPath({screen_name:this.screenName})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this.updatePageTitle(_("Twitter / Recent images by @{{screen_name}}",{screen_name:this.screenName})),this.completeGridRender({type:this.type,screenName:this.screenName,generateItemHref:twttr.bind(this,this.generateItemHref),filter:this.filter}),this.updateBackButton();var c=this;this._grid.$node.delegate("a","click",function(){c.scribbler.scribe({component:c._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){this.updatePageTitle(_("Twitter / Recent images by @{{screen_name}}",{screen_name:this.screenName})),c.type=this.type,c.screenName=this.screenName,c.filter=this.filter,this.completeSlideshowRender(c),this.updateBackButton()},alreadySlideshow:function(a){return this.$content&&a.screen_name===this.screenName&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.userMediaSlideshowPath({screen_name:this.screenName})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.userMediaGridPath({screen_name:this.screenName})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(this.pathBack),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})},updateBackButton:function(){var a=twttr.audit.trail(),b=null;this.pathBack=twttr.router.profilePath({screen_name:this.screenName});if(a.length>1)for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e.page!=="userMediaGallery"){b=e.page,this.pathBack=e.path;break}var f=e.path.split("/")[2];if(f!==this.screenName){b="profile";break}}var g=this._controls.$find(".media-gallery-back-nav span"),i="";switch(b){case"home":i=_("Back to Home");break;case"permalink":i=_("Back to Tweet page");break;case"profile":twttr.helpers.isCurrentUser(this.screenName)?i=_("Back to your profile",{screen_name:this.screenName}):i=_("Back to @{{screen_name}}'s profile",{screen_name:this.screenName});break;case"list":var j=this.pathBack.split("/");i=_("Back to @{{screen_name}}'s list '{{list_name}}'",{screen_name:j[2],list_name:j[3]});break;case"search":i=_("Back to search results");break;default:i=_("@{{screen_name}}'s profile",{screen_name:this.screenName})}g.text(i)}}),a(twttr.components.pages.UserMediaGallery)})}),provide("components/pages/FacetsMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.FacetsMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a,b){var c=this;this.type="search",this.deciderKey="phoenix_facets",this._mode=a.mode,this._query=a.query||b.q,this._provider=new twttr.media.provider.Search,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:this._query,event_info:this._mode})},getControlsOptions:function(){return{type:this.type,mode:this._mode,query:this._query}},slideshow:function(){twttr.components.pages.AbstractMediaGallery.prototype.slideshow.apply(this,arguments)},generateItemHref:function(a){return twttr.router.searchFacetsSlideshowPath({query:this._query,mode:this._mode})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this._mode!="videos"&&this._mode!="photos"&&twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:this._query,mode:"photos"})),this.updatePageTitle(_("Twitter / Gallery - {{{query}}}",{query:this._query}));var c={query:this._query,mode:this._mode,type:this.type};this._mode=="videos"&&(c.imageWidth=200,c.imageHeight=150,c.margin=10),this.completeGridRender(c);var d=this;this._grid.$node.delegate("a","click",function(){d.scribbler.scribe({component:d._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){var d=b.url||null;if(this._query&&this._mode!="videos"&&this._mode!="photos"){var e=twttr.router.searchFacetsSlideshowPath({query:this._query,mode:"photos"});d&&(e=e+"?url="+encodeURIComponent(d)),twttr.router.routeTo(e);return}this._mode=="videos"&&twttr.merge(c,{thumbHeight:48,thumbWidth:64,thumbDisplayWidth:66,thumbDisplayHeight:48}),this.updatePageTitle(_("Twitter / Gallery - {{{query}}}",{query:this._query})),c.type=this.type,c.query=this._query,this.completeSlideshowRender(c)},alreadySlideshow:function(a){return this.$content&&a.query===this._query&&a.mode===this._mode&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.searchFacetsSlideshowPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(twttr.router.searchResultsPath({query:this._query})),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})}}),a(twttr.components.pages.FacetsMediaGallery)})}),provide("components/pages/EventsMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.EventsMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a,b){var c=this;this.type="search",this._mode="photos",this._query=a.query||b.q,this._eventId=this._query,twttr.griffin.isEvent(this._eventId)||twttr.router.routeTo(twttr.router.homePath()),this._provider=new twttr.media.provider.Search,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:this._query,event_info:"events"})},getControlsOptions:function(){return{type:this.type,mode:this._mode,query:this._query,eventId:this._eventId}},slideshow:function(){twttr.components.pages.AbstractMediaGallery.prototype.slideshow.apply(this,arguments)},generateItemHref:function(a){return twttr.router.eventsSlideshowPath({query:this._query,mode:this._mode})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this._mode!="videos"&&this._mode!="photos"&&twttr.router.routeTo(twttr.router.eventsGridPath({query:this._query,mode:"photos"})),this.updatePageTitle(_("Twitter / Events - {{{query}}}",{query:this._query}));var c={query:this._query,mode:this._mode,type:this.type};this._mode=="videos"&&(c.imageWidth=200,c.imageHeight=150,c.margin=10),c.isEvent=!0,this.completeGridRender(c);var d=this;this._grid.$node.delegate("a","click",function(){d.scribbler.scribe({component:d._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){var d=b.url||null;if(this._query&&this._mode!="videos"&&this._mode!="photos"){var e=twttr.router.eventsSlideshowPath({query:this._query,mode:"photos"});d&&(e=e+"?url="+encodeURIComponent(d)),twttr.router.routeTo(e);return}this._mode=="videos"&&twttr.merge(c,{thumbHeight:48,thumbWidth:64,thumbDisplayWidth:66,thumbDisplayHeight:48}),this.updatePageTitle(_("Twitter / Events - {{{query}}}",{query:this._query})),c.type=this.type,c.query=this._query,c.showFirstOnFail=!0,c.isEvent=!0,this.completeSlideshowRender(c)},alreadySlideshow:function(a){return this.$content&&a.query===this._query&&a.mode===this._mode&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.eventsSlideshowPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.eventsGridPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(twttr.router[this._query+"StaticPath"]()),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})}}),a(twttr.components.pages.EventsMediaGallery)})}),provide("components/pages/BigPhotoPermalink",function(a){using().as(function(b){var c=twttr.components.pages.AbstractMediaGallery.prototype;twttr.klass("twttr.components.pages.BigPhotoPermalink").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({permalink:function(a){var b=this;this.$content.empty(),this.index=a.photo_index,twttr.API.Status.find(a.id,{success:twttr.bind(this,this.renderTweet),error:function(){b.trigger("notFound")}})},renderTweet:function(a){this.updatePageTitle(_("Twitter"));if(!a.entities||!a.entities.media||!a.entities.media[this.index-1]){this.trigger("notFound");return}this.$content.addClass("big-photo-permalink media-slideshow-tweet"),(new twttr.views.SlideshowTweet(a)).render(this.$content,"append");var b=a.entities.media[this.index-1];this.dimensions=b.sizes.large;var c=twttr.isSSL()?b.media_url_https:b.media_url;c+=":large",this.loadImage(c)},loadImage:function(a){this.$image=$("<img/>",{"class":"large",src:a,height:this.dimensions.h,width:this.dimensions.w}).appendTo(this.$content),this.refit(),twttr.util.lazyBind(window,"resize",twttr.bind(this,this.refit),200)},refit:function(){var a=twttr.$win.width(),h=twttr.$win.height()-this.$content.find(".tweet").height()-40;this.$image.css({top:Math.max(0,Math.round((h-this.dimensions.h)/2)),left:Math.max(0,Math.round((a-this.dimensions.w)/2))})}}),a()})}),provide("components/pages/Discover",function(a){using(twttr.isT1?"mixins/t1/emptyTimelineRecommendations":"mixins/emptyTimelineRecommendations","components/t1/dashboard/DiscoverNav","components/UserRecommendations","components/Trends","components/Footer","streams/Discover","streams/SuggestionCategoriesStream","mixins/streamablePage","mixins/discoveryHelper").as(function(b,c){var d=twttr.klass("twttr.components.pages.Discover").subclassOf(twttr.components.Page).mixin(b.mixins.streamablePage,b.mixins.discoveryHelper,c).view(twttr.views.Page).methods({setupPage:function(a,b){b=b||{},this.updatePageTitle(a),twttr.themes.loadCurrentUserStyle(),b.sideNavRoute?this.selectSideNav(b.sideNavRoute):this.selectCurrentSideNav()},discover:function(a,c){this.setupPage(_("Twitter / Discover")),this.streamManager.switchTo(b.streams.Discover,{})},networkActivity:function(a,b){this.setupPage(_("Twitter / Activity")),this.streamManager.switchTo(twttr.streams.ActivityByNetworkStream,{}),this.insertEmptyTimeline()},suggestions:function(a,b){this.setupPage(_("Twitter / Who to follow / Suggestions"),{sideNavRoute:"whoToFollowSuggestions"}),this.streamManager.switchTo(twttr.streams.UserRecommendationsStream,{})},suggestions_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowSuggestions");this.setupPage(_("Twitter / Who to follow / Search"),{sideNavRoute:"whoToFollowSuggestions"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"UserRecommendationsStream",backLinkOptions:{route:twttr.router.whoToFollowSuggestionsPath(),name:_("View suggestions")},query:c})},find_friends:function(a,b){this.setupPage(_("Twitter / Find Friends"));var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:"whoToFollow"},b),e=this.streamManager.switchTo(twttr.streams.ContactImportServices,d);e&&e.setStreamManager(this.streamManager)},matches:function(a,b){this.setupPage(_("Twitter / Find Friends / Results"),{sideNavRoute:"whoToFollowImport"});var c=twttr.Scribbler.clientEvent.spawn({context:"import"});this.streamManager.switchTo(twttr.streams.ContactImportMatches,{scribbler:c,pathRoot:"whoToFollow"})},find_friends_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowImport");this.setupPage(_("Twitter / Find Friends / Search"),{sideNavRoute:"whoToFollowImport"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"ContactImportServices",backLinkOptions:{route:twttr.router.whoToFollowImportPath(),name:_("View services")},query:c})},interests:function(a,b){this.setupPage(_("Twitter / Categories"));var c=twttr.Scribbler.clientEvent.spawn({context:"interests"}),d={scribbler:c,pathRoot:"whoToFollow"};d=this.localizeQuery(d,b),this.streamManager.switchTo(twttr.streams.SuggestionCategoriesStream,d)},interests_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowInterests");this.setupPage(_("Twitter / Categories / Search"),{sideNavRoute:"whoToFollowInterests"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"SuggestionCategoriesStream",backLinkOptions:{route:twttr.router.whoToFollowInterestsPath(),name:_("View categories")},query:c})},government_by_zip:function(a,b){this.setupPage(_("Twitter / Government Search"),{sideNavRoute:"whoToFollowInterests"}),this.streamManager.switchTo(twttr.streams.GovernmentSearchStream,{zipCode:a.zipCode})},category:function(a,b){var c=this,d=function(a){if(!a)return c.routePageTo("whoToFollow","Interests");var d=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});c.setupPage(_("Twitter / Categories / {{category}}",{category:a.name}),{sideNavRoute:"whoToFollowInterests"});var f={category:e,suggestionCategory:a,scribbler:d,pathRoot:"whoToFollow"};f=c.localizeQuery(f,b),c.streamManager.switchTo(twttr.streams.SuggestionCategoryMembersStream,f)},e=a.category||b.category;this._category=e;var f=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;if(f)d(f[e]);else{var g={success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[e];d(b)}};g=this.localizeQuery(g,b),twttr.API.SuggestionCategory.getAll(g)}},renderDashboard:function(){this.trendsComponent=new b.components.Trends,this.addDashboardComponents([new b.components.t1.dashboard.DiscoverNav,new twttr.components.JapaneseAd,this.trendsComponent,new b.components.Footer])},addImpressionData:function(a){var b=twttr.audit.currentAction();switch(b){case"find_friends":case"matches":a.context="import";break;case"interests":a.context="interests";break;case"category":a.context="interests",a.query=this._category}}}).addAfterRender(function(){this.renderDashboard()}).addOnSwitchTo(function(){this.trendsComponent&&this.trendsComponent.startUpdatePolling()}).addOnSwitchAway(function(){this.trendsComponent&&this.trendsComponent.stopUpdatePolling()});a(d)})}),provide("components/pages/Connect",function(a){using("_","components/t1/dashboard/MiniHomeProfile","components/t1/dashboard/ConnectNav","components/Trends","components/UserRecommendations","components/Footer","mixins/streamablePage","multiGlobals/more_views").as(function(b){var c=twttr.klass("twttr.components.pages.Connect",function(){twttr.components.Page.apply(this,arguments)}).subclassOf(twttr.components.Page).mixin(b.mixins.streamablePage).view(twttr.views.Page).methods({connect:function(a,b){this.updatePageTitle(_("Twitter / Interactions")),twttr.themes.loadCurrentUserStyle(),this.selectCurrentSideNav(),this.streamManager.switchTo(twttr.streams.ActivityOfMeStream,{})},mentions:function(a,b){this.updatePageTitle(_("Twitter / Mentions")),this.selectSideNav("mentions"),twttr.themes.loadCurrentUserStyle(),this.streamManager.switchTo(twttr.streams.Mentions,{})},renderDashboard:function(){this.addDashboardComponents([new b.components.t1.dashboard.ConnectNav,new twttr.components.JapaneseAd,new twttr.components.UserRecommendations({screenName:null,showLinks:!0}),new b.components.Footer])}}).addAfterRender(function(){this.renderDashboard()});a(c)})}),provide("widget/Banner",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.widget.Banner",function(a){this.$node=$("<div/>"),this.view=new twttr.views[a.view](a),this.$node.delegate(".pane-close","click",twttr.bind(this,this.remove)),this.$node.attr("data-component-term",b.util.underscore(a.view)),this.newBanner=a.newBanner}).methods(twttr.EventProvider).methods({insert:function(){this.view.render(this.$node),$(this.newBanner?".new-js-banners":".js-banners").append(this.$node),twttr.app.recalculatePadding()},remove:function(){this.$node.remove(),twttr.app.recalculatePadding(),this.trigger("closed")}}),twttr.provide("twttr.banners",twttr.augmentObject({pending_new:0,pending_changed:1,pending_bouncing:2,stacked:3,nonStacked:4,display:function(){twttr.currentUser&&twttr.profileUser&&twttr.currentUser!=twttr.profileUser&&twttr.currentUser.isAdmin&&twttr.profileUser.suspended&&this.viewing_suspended_user().insert();if(twttr.currentUser&&twttr.currentUser.states){var a=[],b=!1,c=twttr.currentUser.states;twttr.is.falsy(c.pending_email)||(b=this.pending_new),c.bouncing_email&&(a=twttr.is.array(c.bouncing_email)?c.bouncing_email:[c.bouncing_email]),b!==!1&&twttr.currentUser.emailAddress&&(b=this.pending_changed),b!==!1&&$.inArray(c.pending_email,a)>=0&&(b=this.pending_bouncing);if(twttr.currentUser.emailAddress&&$.inArray(twttr.currentUser.emailAddress,a)>=0){var d=b!==!1?this.stacked:this.nonStacked;this.bouncingEmail(d,twttr.currentUser.emailAddress).insert()}if(b!==!1){var e=twttr.abdecider.choose("email_verification-18",!0);(!e||e=="control")&&this.verifyEmail(b,c.pending_email).insert()}c.detached_email&&this.detachedEmail().insert(),c.suspended&&this.suspended(twttr.currentUser.screenName).insert(),$.cookie("show_reactivated_"+twttr.currentUser.id)&&this.reactivated().insert()}},detachedEmail:function(){return new twttr.widget.Banner({view:"DetachedEmailBanner",newBanner:!0})},verifyEmail:function(a,b){var c=new twttr.widget.Banner({view:"VerifyEmailBanner",pending_email:b,pending_new:a==this.pending_new,pending_changed:a==this.pending_changed,pending_bouncing:a==this.pending_bouncing,newBanner:!0});return c.$node.delegate(".resend-confirmation-email-link","click",function(a){twttr.currentUser.emailResendConfirmation({success:function(a){twttr.showMessage(a.messageForFlash)},error:function(a){twttr.showError(_("Oops!  There was an error sending the confirmation email."))}})}),c},bouncingEmail:function(a,b){var c=new twttr.widget.Banner({view:"BouncingEmailBanner",current_email:b,stacked:a==this.stacked,newBanner:!0});return c.$node.delegate(".reset-bounce-link","click",function(a){twttr.currentUser.emailBounceReset(function(a){twttr.showMessage(_("Your email notifications should resume shortly.")),c.$node.fadeOut("fast",function(){c.remove()})})}),c},suspended:function(a){return new twttr.widget.Banner({view:"SuspendedBanner",screen_name:a,newBanner:!0})},reactivated:function(){var a=new twttr.widget.Banner({view:"ReactivatedBanner"});return a.bind("closed",function(){$.cookie("show_reactivated_"+twttr.currentUser.id,null)}),a.$node.delegate("a.reactivate-settings-link","click",function(b){b.preventDefault(),a.trigger("closed"),window.location.href=b.target}),a},emailAlreadyVerified:function(){var a;for(var b=0;b<twttr.currentUser.email.length;b++)twttr.currentUser.email[b].current&&(a=twttr.currentUser.email[b]);return new twttr.widget.Banner({view:"EmailAlreadyVerifiedBanner",already_verified_message:_("Someone has already confirmed the email {{email}}",{email:a.address})})},welcomeToPhoenix:function(){return new twttr.widget.Banner({view:"WelcomeToPhoenixBanner",welcome_search_results_path:twttr.router.searchResultsPath({query:"#NewTwitter"})})},becameUser:function(){return new twttr.widget.Banner({view:"BecameUserBanner"})}},twttr.EventProvider)),twttr.app.waitForSignal("init",function(){twttr.banners.display()}),a(twttr.widget.Banner)})}),provide("components/Promo",function(a){using().as(function(b){twttr.klass("twttr.components.Promo").subclassOf(twttr.components.Base).initializer(function(){twttr.API.Promo.random({promo_type:"",limit:1},twttr.bind(this,function(a){$.isEmptyObject(a)||((new twttr.views.DashboardPromo({promo:a[0]})).render(this.$node,"append"),this.hasRendered())}))}).click({".promo .definition":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"promo",target:"definition",definition:b.find("strong").html()};scribble("dashboard_click",c)}}).deciderKey("promo_component"),a(twttr.components.Promo)})}),provide("components/Promptbird",function(a){using("_","multiGlobals/more_views","mixins/inviteFriends","mixins/userActionable","constants").as(function(b,_){twttr.klass("twttr.components.Promptbird").subclassOf(twttr.components.Base).initializer(function(a){if(!twttr.views[this.constructor._name]){var b=new Error('Promptbird view "'+this.constructor._name+'" is undefined');twttr.isLocalhost&&console.log(b,b.stack||"error.stack is unavailable :(");return}var c={action:"impression",section:"promptbird_"+a.prompt.prompt_id};trackClient(c),this.prompt=a,this.$node.addClass("promptbird");var d="promptbird-"+a.prompt.format.replace(/_/g,"-");this.$node.addClass(d),a.data.promptId=a.prompt.prompt_id;var e=(new twttr.views[this.constructor._name](a.data)).html();this.$node[0].innerHTML=e,"below_black_bar"===a.prompt.format&&(this.noSpacer=!0),this.hasRendered()}).click({".js-dismiss":function(a){a.stopImmediatePropagation();var b={prompt_id:this.prompt.prompt.prompt_id},c={success:function(a){}};return twttr.API.Promptbird.dismissPrompt(b,c),this.destroy(),!1},".call-to-action":function(a){var b=this,c={action:"click",section:"promptbird_"+this.prompt.prompt.prompt_id};trackClient(c);if($(a.currentTarget).data("preserve-prompt"))return;var d={prompt_id:this.prompt.prompt.prompt_id},e={success:function(a){}};twttr.API.Promptbird.dismissPrompt(d,e),this.destroy()}}),twttr.klass("twttr.components.PromptbirdLanguage").subclassOf(twttr.components.Promptbird).initializer(function(a){this._superInitializer(a),this.$find(".call-to-action").one("click",function(){var b=a.prompt.template_name.split("_");b.shift();var c=b.join("-"),d={success:function(){window.location.reload()}};twttr.currentUser.setLanguage(c,d)})}),twttr.klass("twttr.components.PromptLanguageDe").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageEs").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageHi").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageFr").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageFil").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageId").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageIt").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageJa").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageKo").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageMsa").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageNl").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguagePt").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageRu").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageTr").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageZhCn").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageZhTw").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptImport").subclassOf(twttr.components.Promptbird),twttr.klass("twttr.components.PromptVitDe").subclassOf(twttr.components.Promptbird).initializer(function(a){this.registerUserActionEvents(),a.data.id=16181559,this.constructor.uberclass._initializer.apply(this,arguments),this.$find(".js-action-follow").addClass("call-to-action")}).mixin(b.mixins.userActionable),twttr.klass("twttr.components.PromptOneClickImport").subclassOf(twttr.components.Promptbird).initializer(function(a){this._superInitializer(a),this.$find(".call-to-action").one("click",function(a){var b=$(this);using("externalOauthPopup").as(function(a){var c=window.location.protocol+"//"+twttr.domains.local+"/invitations/oauth_launch?email="+encodeURIComponent(b.attr("data-email"));a.externalOauthPopup({url:c,callbackUrl:twttr.router.whoToFollowImportMatchesPath()})})})}),twttr.klass("twttr.components.PromptImportInline").subclassOf(twttr.components.Promptbird).initializer(function(a){this.constructor.uberclass._initializer.apply(this,arguments);var b=new twttr.components.ContactImportLauncher,c=this;b.bind("servicesLoaded",function(){b.$find(".service-button").addClass("call-to-action").data("preserve-prompt","true"),c.$find(".import-inline").append(b.$node)}),b.trigger("addedToPage")}),twttr.klass("twttr.components.PromptProfile").subclassOf(twttr.components.Promptbird),twttr.klass("twttr.components.PromptMobile").subclassOf(twttr.components.Promptbird).initializer(function(a){var b=twttr.router.mobileGalleryPath(),c=twttr.pageLocale==="en"?"":"?lang="+twttr.pageLocale;a.data.android_path=b+"/android"+c,a.data.blackberry_path=b+"/blackberry"+c,a.data.iphone_path=b+"/iphone"+c,a.data.ipad_path=b+"/ipad"+c,a.data.wp7_path=b+"/wp7"+c,a.data.mobile_gallery_path=b+c,this.constructor.uberclass._initializer.call(this,a)}),twttr.klass("twttr.components.PromptInvite").subclassOf(twttr.components.Promptbird).mixin(twttr.mixins.inviteFriends).initializer(function(a){this.constructor.uberclass._initializer.apply(this,arguments),this.addFormEvents(),twttr.helpers.handlePopupLinks(this.$node);if(twttr.isT1)this.$find(".js-submit").data("preserve-prompt",!0);else{var b=new twttr.components.InviteFriends;b.$find(".js-submit").addClass("call-to-action").data("preserve-prompt",!0),this.$find(".invite").append(b.$node)}}),twttr.klass("twttr.components.PromptFacebookDe").subclassOf(twttr.components.Promptbird),a(twttr.components.Promptbird)}),twttr.klass("twttr.components.PromptbirdDashboardPlaceholder").subclassOf(twttr.components.Base).initializer(function(){this.$node.attr("id","js-promptbird-dashboard-narrow-hook")})}),provide("components/RelatedServices",function(a){using().as(function(b){twttr.klass("twttr.components.RelatedServices").subclassOf(twttr.components.Base).initializer(function(){var a=this;twttr.API.Promo.random({promo_type:"related_service",limit:2},function(b){$.isEmptyObject(b)||((new twttr.views.DashboardRelatedServices({promos:b})).render(a.$node,"append"),a.hasRendered())})}).deciderKey("promo_component"),a(twttr.components.RelatedServices)})}),provide("TrendLocations",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.TrendLocations",function(a){this.getLocation(a)}).statics({LOGGED_OUT_TREND_LOCATION_COOKIE:"trend_location",install:function(a){twttr.trendLocations?twttr.trendLocations.getLocation(a):twttr.trendLocations=new twttr.TrendLocations(a)}}).methods({getLocation:function(a){var b=this;twttr.API.Trend.locations({lang:twttr.pageLocale,success:function(c){b.all=c;if(twttr.currentUser)twttr.currentUser.trendLocation().first(function(c){c?b.current=c:b.current=b.worldwide(),a(b.current)});else{var d=parseInt($.cookie(b.constructor.LOGGED_OUT_TREND_LOCATION_COOKIE),10);b.current=b.locationForWoeid(d)||b.worldwide(),a(b.current)}}})},allLocations:function(){return this.all.array},ancestorsOf:function(a){if(!a.parentid)return[];var b=this.locationForWoeid(a.parentid);return[b].concat(this.ancestorsOf(b))},withAncestorsOf:function(a){return[a].concat(this.ancestorsOf(a))},currentAncestors:function(){return this.ancestorsOf(this.current)},withCurrentAncestors:function(){return this.withAncestorsOf(this.current)},withFilterAncestors:function(){return this.withAncestorsOf(this.currentFilter())},childrenOf:function(a){return twttr.filter(this.allLocations(),function(b){return b.parentid===a.woeid})},currentChildren:function(){return this.current.isPersonalized?this.childrenOf(this.currentFilter(this.worldwide())):this.childrenOf(this.currentFilter())},locationForWoeid:function(a){return a?twttr.filter(this.allLocations(),function(b){return b.woeid==a})[0]:null},locationsForWoeids:function(a){var b=this;return twttr.map(a,function(a){return b.locationForWoeid(a)})},worldwide:function(){return this.locationForWoeid(1)},currentFilter:function(a){var c=a||this.current;return c.placeType.code===b.constants.placeTypes.city||this.childrenOf(c).length===0?this._currentFilterWoeid=c.parentid:this._currentFilterWoeid=c.woeid,this.locationForWoeid(this._currentFilterWoeid)},setPersonalized:function(a){this.current=$.extend(this.current,{isPersonalized:a})},setCurrent:function(a){this.current=this.locationForWoeid(a.woeid)||this.current,this.setPersonalized(a.isPersonalized),twttr.currentUser?twttr.currentUser.setTrendLocation(a.woeid,a.isPersonalized):(twttr.API.CurrentUser.trigger("changedLocation_success"),$.cookie(this.constructor.LOGGED_OUT_TREND_LOCATION_COOKIE,a.woeid)),scribble("switch-trend-location",{woeid:a.woeid,input:"click",origin:a.origin})}}),a(twttr.TrendLocations)})}),provide("components/PeopleResults",function(a){using("constants").as(function(b){twttr.klass("twttr.components.PeopleResults").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(a){a=a.replace(/(^|\b)(from\:|to\:|near\:|source\:)/g,""),this.scribbler=twttr.Scribbler.clientEvent.spawn({query:a,context:"user_search"});if(a.indexOf(":")!=-1)return;var b={reputable:!0,display_location:"search-component",pc:!0},c=this,d=4;twttr.API.User.search(a,b).first(d,function(b){c._readyToRender?c._renderNow(b,a):c._result={users:b,query:a}})}).methods({_renderNow:function(a,c){var d=this;a.length()>0&&(a=a.map(twttr.bind(this,function(a,b){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id),a.socialContext=a.socialContext||[];var c=d.makeSocialContextHtml(a,!1);return a.clone({socialcontext:c})})),d.$node.empty(),(new twttr.views.PeopleResults({query:c})).subview("found_people",new twttr.views.UserSmallList(a)).render(d.$node,"append"),d.$find("a.view-all").click(function(a){d.scribbler.scribe({component:d._getScribeComponentName(),action:"view_all"})}),twttr.helpers.ellipsify(d.$find("div.bio")),d.registerUserActionEvents(),d.hasRendered());var e=[],f;a.each(function(a,c){e.push(a.id);if(a.promotedContent&&a.promotedContent.impression_id){var d={target_id:a.id,item_type:b.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id,item_position:c};f=f||{},f[a.id+""]=d}}),d.scribbler.scribe({component:d._getScribeComponentName(),action:"results"},{item_ids:e,item_count:e.length,item_details:f})},render:function(){var a=this._result;a?this._renderNow(a.users,a.query):this._readyToRender=!0}}).deciderKey("onebox_user_search"),a(twttr.components.PeopleResults)})}),provide("components/ProfileActions",function(a){using("_","constants","mixins/serverRenderableObject",twttr.isT1?"mixins/t1/genericComboButton":[]).as(function(b,_,c,d,f){twttr.klass("twttr.components.ProfileActions",function(a,b,c){this.profileUser=a,this.inProfilePane=!!c,this.$node=this.$domNode(function(){return $("<div />")}),twttr.components.Base.prototype.constructor.apply(this,arguments)}).subclassOf(twttr.components.Base).initializer(function(a,b){var c=this;this.similarUser=a,this.screenName=a.screenName,this.currentRecommendations=[],this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.profileUser.id}),this.whotofollowComponentName="whotofollow_dropdown",this.ignoreScribeItemPosition=!0,twttr.recentlyViewedUsers.push(a);if(twttr.loggedIn){var d=twttr.bind(this,function(b){this._data={user:a,id:a.id,screen_name:a.screenName,notifications:b.notifications,following:b.following,followed_by:b.followedBy,blocking:b.blocking,follow_request_sent:a.followRequestSent,want_retweets:b.wantRetweets,can_dm:b.canDM&&twttr.currentUser.id!=a.id,reported:!1},this._applyMuteMethods(b,a),this._renderActions(),this.registerEvents(),this.wokeUp()});b?d(b):twttr.currentUser.relationshipWith(this.profileUser,d)}else{this._data={user:a,id:a.id,screen_name:a.screenName},this._renderActions(),this._registerFollowEvents();var e=twttr.abdecider.choose("signup_with_profiles_viewed-73",!0);if(twttr.recentlyViewedUsers.size()>=2){var f=(new Date).getTime()-864e5;e=="two_profiles"&&(twttr.recentlyViewedUsers.size()==2||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-3])<f)?twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-2])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(2,function(a){a.open()})):e=="three_profiles"&&(twttr.recentlyViewedUsers.size()==3||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-4])<f)?twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-3])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(3,function(a){a.open()})):e=="four_profiles"&&(twttr.recentlyViewedUsers.size()==4||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-5])<f)&&twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-4])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(4,function(a){a.open()}))}this.wokeUp()}this.registerUserActionEvents(),this.registerUserRecommendationsActions(".user-rec-dropdown")}).mixin(twttr.mixins.userRecommendationsHelper,twttr.mixins.userActionable,d).methods({domNodeSelector:function(){var a=this.inProfilePane?"div.details-pane ":"";return a+"div.profile-actions-container[data-user-id="+this.profileUser.id+"] div.profile-actions-component"},_renderActions:function(){if(!this.preRendered||this.didInitialRenderActions)this._deregisterTipsy(),this.$node.empty(),(new twttr.views.ProfileActions(this._data)).render(this.$node,"append");this.didInitialRenderActions=!0,this.scribeComponentName=this.$node.closest("div.details-pane").length?"mini_profile_actions":"profile_actions",this.$userProfileActionController=this.$find(".user-profile-actions-button"),this.userProfileActionsDropdown=null,this._registerTipsy()},wokeUp:function(){using(">streamWokeUp",function(){signal(">wokeUp")})},_applyMuteMethods:function(a,b){var c=this;if(!twttr.decider.isAvailable("muteUsers"))return;this.$node.delegate(".mute-action","click",function(a){var d=$(this);d.hasClass("is-muted")?(d.removeClass("is-muted"),d.text(_("Mute")),$(".stream-tweet[data-user-id="+b.id+"]").parent().show(),c._removeFromMuteList(b.id)):(d.addClass("is-muted"),d.text(_("Unmute")),$(".stream-tweet[data-user-id="+b.id+"]").parent().hide(),c._addToMuteList(b))}),twttr.merge(this._data,{show_mute:function(){return a.following&&twttr.decider.isAvailable("muteUsers")},is_muted:function(){var a=twttr.caches.User.get("muted");if(!a)return!1;for(var c in a)if(b.id==c)return!0}})},_addToMuteList:function(a){var b={screenName:a.screenName,userId:a.id,profileImageUrl:twttr.helpers.transformProfileImageUrl(a.profileImageUrl,"mini")},c=twttr.caches.User.get("muted")||{};c[a.id]=b,twttr.caches.User.set("muted",c)},_removeFromMuteList:function(a){var b=twttr.caches.User.get("muted")||{};delete b[a],twttr.caches.User.set("muted",b)},renderSimilarUsers:function(){if(!twttr.decider.isAvailable("whotofollow_similarities"))return;var a=this;a.profileUser.similarUsers({limit:2,success:function(b){var c=a.recsToUsers(b);a.trackImpressions(c,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:a.profileUser.id});if(c.length()){var d=(new twttr.views.UserRecommendationsDropdown({user:a.profileUser.name})).subview("recommended_followers",new twttr.views.UserSmallList(c)).render(a.$find(".profile-actions"),"after");a.attachUserRecommendationHideEvents("whotofollow_dropdown_hide",d),twttr.helpers.ellipsify(a.$find(".profile-actions div.bio")),d.slideDown(300)}},error:function(b){a.trackImpressions(null,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:a.profileUser.id,error_status:b.status})}})},registerEvents:function(){if(this.$node.attr("did-register-events"))return;this.$node.attr("did-register-events",!0),this.$node.delegate(".js-direct-message-action","click",twttr.bind(this,function(a){a.preventDefault(),twttr.decider.isExpando()&&$(".twttr-dialog-close").click(),twttr.dialogs.dmSingle({user:{screenName:this.profileUser.screenName,user_id:this.profileUser.attributes.id,name:this.profileUser.attributes.name,profile_image_url:this.profileUser.attributes.profile_image_url},origin:"profile-actions-direct-message"}).open(),this.scribbler.scribe({component:this.scribeComponentName,action:"dm"},{item_ids:[this.profileUser.attributes.id],item_details:this._itemDetails()})})),this._registerDeviceEvents(),this._registerRetweetEvents(),this._registerFollowEvents(),this._registerUnblockEvents(),this._registerAPIListeners()},_registerTipsy:function(){this.$find(".mute-action").tipsy({gravity:"s",delayIn:150,delayOut:500,fade:!0}),this.$find(".device-notifications").tipsy({gravity:"s",html:!0,title:function(){var a=$(this).hasClass("notifying")?_("Tweets from this user are sent to your mobile phone."):_("Tweets from this user are not sent to your mobile phone.");return(new twttr.views.Tipsy({title:a})).html()}}),this.$find(".retweet-setting").tipsy({gravity:"s",html:!0,title:function(){var a=$(this).hasClass("including")?_("Retweets from this user will appear in your timeline."):_("Retweets from this user won't appear in your timeline.");return(new twttr.views.Tipsy({title:a})).html()}})},_deregisterTipsy:function(){this.$find(".device-notifications").tipsy({stopThat:!0}),this.$find(".retweet-setting").tipsy({stopThat:!0}),this.$find(".mute-action").tipsy({stopThat:!0})},_registerDeviceEvents:function(){var a,b,c,d=this;this.$node.delegate(".js-device-notifications","click",function(e){e.preventDefault();if(!twttr.currentUser.deviceSetup){!twttr.currentUser.deviceVerified&&(!twttr.currentUser.pushTweetsDecidered||!twttr.currentUser.pushDevice)?(a={title:_("Setup mobile notifications"),content:(new twttr.views.PhoneSetupPrompt({screen_name:d._data.screen_name,ok:_("Set up phone"),cancel:_("Cancel")})).html()},b=twttr.router.devicesPath()):(a={title:_("Enable mobile notifications for Tweets"),content:(new twttr.views.PhoneTweetsOffPrompt({screen_name:d._data.screen_name,ok:_("Enable Tweet notifications"),cancel:_("Close")})).html()},twttr.currentUser.pushDevice&&twttr.currentUser.pushTweetsDecidered?b=twttr.router.pushHelpPath():b=twttr.router.devicesPath()),(new twttr.widget.Prompt({modal:!0,callback:function(a){a&&(c=function(){twttr.router.routeTo(b)},twttr.API.User.bind("subscribe",c),d.profileUser.setNotificationsOn())},template:a})).open();return}var f=$(this),g=f.hasClass("notifying")?"setNotificationsOff":"setNotificationsOn";d.profileUser[g]()})},_registerRetweetEvents:function(){var a=this;this.$node.delegate(".js-retweet-setting","click",function(b){var c=$(this);b.preventDefault();var d=c.hasClass("including"),e=d?"setWantRetweetsOff":"setWantRetweetsOn";a.profileUser[e]()})},_registerFollowEvents:function(){var a=this;this.$node.delegate(".js-follow, .profile-follow-button, .follow-request-button","click",function(b){var c=a.profileUser.impressionId;twttr.loggedIn?a.profileUser.follow({before:function(){a._showTweetsFromUserOnHome()},success:function(){a.renderSimilarUsers(),trackClient({component:a.scribeComponentName,action:"follow"},{profile_id:a.profileUser.id,item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"follow"})},error:function(b){a._hideTweetsFromUserOnHome(),twttr.helpers.showErrorFromResponse(b,"follow")},impression_id:c}):twttr.dialogs.signinOrSignup({follow:a.profileUser,justSignup:!0}).open(),b.preventDefault()}),this.$node.delegate(".js-unfollow, .profile-unfollow-link, .cancel-request-link","click",function(b){if(a.$node.find(".follow-state").hasClass("just-followed")&&!!b.clientX)return;var c=a.profileUser.impressionId;a.profileUser.unfollow({before:function(){a._hideTweetsFromUserOnHome()},success:function(){trackClient({component:a.scribeComponentName,action:"unfollow"},{profile_id:a.profileUser.id,item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"unfollow"})},error:function(b){a._showTweetsFromUserOnHome(),twttr.helpers.showErrorFromResponse(b,"unfollow")},impression_id:c}),b.preventDefault()}),this.$node.delegate(".just-followed .profile-unfollow-link","mouseleave",function(b){a.$node.find(".follow-state").removeClass("just-followed")})},_registerUnblockEvents:function(){var a=this;this.$node.delegate(".js-unblock","click",function(b){a.profileUser.unblock({before:twttr.bind(a,a._showStreamForBlockedUser),success:function(){a.scribbler.scribe({component:a.scribeComponentName,action:"unblock"},{item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"unblock"})},error:function(b){a._hideStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(b,"unblock")}}),b.preventDefault()}),this.$node.delegate(".js-block","click",function(b){a.profileUser.block({timeout:function(a){a.retry()},before:twttr.bind(a,a._hideStreamForBlockedUser),error:function(){a._showStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(b,"block")}})})},_updateDisplay:function(a,b){var c=this,d=!b,e=!!b;switch(a){case"follow":c._data.following=d,c._data.want_retweets=d,c._data.just_followed=d;break;case"unfollow":case"cancel_request":c._data.following=e,c._data.follow_request_sent=e,c._data.just_followed=e;break;case"follow_request":c._data.follow_request_sent=d;break;case"block":b?c._data.following=!!c._data.was_following:(c._data.was_following=c._data.following,c._data.following=!1),c._data.blocking=d,c._data.reported=e;break;case"unblock":c._data.following=e,c._data.blocking=e,c._data.reported=e,c._data.followed_by=!1;break;case"report":b?c._data.following=!!c._data.was_following:(c._data.was_following=c._data.following,c._data.following=!1),c._data.blocking=d,c._data.reported=d;break;case"subscribe":c._data.notifications=d;break;case"unsubscribe":c._data.notifications=e;break;case"does_want_retweets":c._data.want_retweets=d;break;case"doesnt_want_retweets":c._data.want_retweets=e}$(["following","blocking","followRequestSent","reported","notifications","wantRetweet"]).each(function(a,b){c._data.user.sync(b,c._data[b])}),c._renderActions()},_registerAPIListeners:function(){var a=this,b={before:function(b,c){var d=c.requestParameters[0],e=d.user_id||d.user_ids;e===a._data.id&&a._updateDisplay(b.type,!1)},error:function(b,c,d){var e=d.requestParameters[0],f=e.user_id||e.user_ids;f===a._data.id&&a._updateDisplay(b.type,!0)}};twttr.API.User.bind("follow",b),twttr.API.User.bind("unfollow",b),twttr.API.User.bind("follow_request",b),twttr.API.User.bind("cancel_request",b),twttr.API.User.bind("block",b),twttr.API.User.bind("unblock",b),twttr.API.User.bind("report",b),twttr.API.User.bind("subscribe",b),twttr.API.User.bind("unsubscribe",b),twttr.API.User.bind("does_want_retweets",b),twttr.API.User.bind("doesnt_want_retweets",b)},_getHomeTimeline:function(a){var b=twttr.app.getPage("home");b&&b.send("getStreamManager",function(b){if(b){var c=b.getStream(twttr.streams.Home);c&&a(c.$node)}})},_streamItemsForUserId:function(a,b){return a.find('.stream .stream-item[data-item-type="user"][data-item-id="'+b+'"]').add('.stream .stream-tweet[data-user-id="'+b+'"]',a).add('.stream .stream-tweet[data-retweeter-id="'+b+'"]',a).closest(".stream-item")},_hideTweetsFromUserOnHome:function(){var a=this,b=this.profileUser.id,c=this._getHomeTimeline(function(c){a._streamItemsForUserId(c,b).hide()})},_showTweetsFromUserOnHome:function(){var a=this,b=this.profileUser.id;this._getHomeTimeline(function(c){a._streamItemsForUserId(c,b).show()})},_hideStreamForBlockedUser:function(){this._streamItemsForUserId($(document.body),this.profileUser.id).hide()},_showStreamForBlockedUser:function(){this._streamItemsForUserId($(document.body),this.profileUser.id).show()},_getActionsDropdown:function(a){var b=this,c=[];return c.push({label:_("Mention {{screen_name}}",this._data),icon:"mention",handlers:{click:function(){(new twttr.widget.TweetDialog({template:{title:"Mention "+b.profileUser.screenName},draggable:!0,defaultContent:"@"+b.profileUser.screenName+" ",origin:"profile-actions-dropdown-metion"})).open().focus()}}}),this._data.blocking?c.push({label:_("Unblock {{screen_name}}",this._data),icon:"block",handlers:{click:function(){b.profileUser.unblock({before:function(){$('.stream .stream-tweet[data-user-id="'+b.profileUser.id+'"]').closest(".stream-item").show()}})}}}):c.push({label:_("Block {{screen_name}}",this._data),icon:"block",handlers:{click:function(){b.profileUser.block({timeout:function(a){a.retry()},before:twttr.bind(b,b._hideStreamForBlockedUser),error:function(){b._showStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(e,"block")}})}}}),this._data.blocking||c.push({label:_('Report <span class="truncate">{{screen_name}}</span> for spam',this._data),icon:"spam",handlers:{click:function(){b.profileUser.report({before:function(){$('.stream .stream-tweet[data-user-id="'+b.profileUser.id+'"]').closest(".stream-item").hide()}})}}}),new twttr.control.Dropdown(a,{items:c,direction:"right"})},_itemDetails:function(){var a={},c=this.profileUser.impressionId;return a[""+this.profileUser.id]={item_token:c,target_id:this.profileUser.id,item_type:b.constants.clientEvent.itemType[c?"promotedUser":"user"]},a}}),twttr.control.Dropdown.createCache("lists"),f&&twttr.components.ProfileActions.mixin(f),a(twttr.components.ProfileActions)})}),provide("components/RecentTweets",function(a){using().as(function(b){twttr.klass("twttr.components.RecentTweets").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet).initializer(function(a){var b=this,c=twttr.$win.height()<600?2:3;a.timeline().first(c,function(a){a.length()>0&&((new twttr.views.RecentTweets(a)).render(b.$node,"append"),b.registerTweetActionEvents(),b.updateI18nDisplay(),b.hasRendered())})}).deciderKey("recent_tweets_component"),a(twttr.components.RecentTweets)})}),provide("components/RecentlyFollowed",function(a){using().as(function(b){twttr.klass("twttr.components.RecentlyFollowed").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable,twttr.mixins.userRecommendationsHelper).initializer(function(a){function c(a,c){var d=function(a){return a.screenName==c.screenName};b._userCollection&&!b._userCollection.find(d)&&(b._userCollection.unshift(c),b.rememberHeight(),b.deferredCreateView())}function d(a,c){var d=function(a){return a.screenName!=c.screenName};b._userCollection&&(b._userCollection=b._userCollection.filter(d),b.rememberHeight(),b.deferredCreateView())}if(!twttr.currentUser)return;this.inWelcomeFlow=a,this._maxFollowersCount=10,this._maxSimilarsCount=2;var b=this;twttr.currentUser.friends({count:this._maxFollowersCount,success:function(c){b._userCollection=c,(a||!c.isEmpty())&&b.createView(),b.registerUserActionEvents(),b.registerUserRecommendationsActions()}}),this.$node.delegate(".followed li a.dynsims","click",function(a){var c=$(this);if(c.parent().hasClass("active"))return;var d=c.attr("data-user-id"),e=b._userCollection.find(function(a,b){if(a.id.toString()==d)return a});return e&&twttr.decider.isAvailable("whotofollow_similarities")&&(b.rememberHeight(),b.showSimilarUsers(e)),a.preventDefault(),a.stopPropagation(),!1}),twttr.API.User.bind("follow.RecentlyFollowedComponent",c),twttr.API.User.bind("unfollow.RecentlyFollowedComponent",d),twttr.app.bind("fakeFollow.RecentlyFollowedComponent",c),twttr.app.bind("fakeUnfollow.RecentlyFollowedComponent",d)}).destructor(function(){twttr.app.unbind(".RecentlyFollowedComponent"),twttr.API.User.unbind(".RecentlyFollowedComponent")}).methods({rememberHeight:function(){var a=this.$find(".recently-followed-users");a.css("height",a.height()+"px")},autoHeight:function(){this.$find(".recently-followed-users").css("height","")},deferredCreateView:function(){this._createViewTimeout&&(clearTimeout(this._createViewTimeout),this._createViewTimeout=null);var a=this;this._createViewTimeout=setTimeout(function(){a.createView(),a._createViewTimeout=null},1)},createView:function(){var a=this._userCollection.first();(new twttr.views.RecentlyFollowed({user:new twttr.views.BaseStats(twttr.currentUser),latest_friends:new twttr.views.UserThumbList(this._userCollection.slice(0,this._maxFollowersCount)),latest_friend:a?a.screenName:!1,welcome_flow:!!this.inWelcomeFlow,screen_name:twttr.currentUser.screenName,following_count:twttr.currentUser.friendsCount,following_10:twttr.currentUser.friendsCount>=10})).render(this.$node,"html");var b=this.$find(".followed ul");if(a&&twttr.decider.isAvailable("whotofollow_similarities")){b.find("li a").addClass("dynsims").removeClass("user-profile-link").attr("href","#");var c=this.$find(".recently-followed-users .suggestions");this.showSimilarUsers(a)}else this.autoHeight();if(this.inWelcomeFlow){var d=b.find("li").length+1;for(var e=d;e<=10;e++)b.append('<li><span class="welcome-placeholder">'+e+"</span></li>")}this.hasRendered()},showSimilarUsers:function(a){var b=this.$find(".followed ul"),c=this.$find(".suggestions").css({opacity:0});b.find("li").removeClass("active"),a.similarUsers({limit:this._maxSimilarsCount,complete:twttr.bind(this,function(){this.autoHeight()}),success:twttr.bind(this,function(d){this.similarUser=a,this.screenName=a.screenName;var e=this.recsToUsers(d).slice(0,this._maxSimilarsCount);"florian"==a.screenName&&(e=new twttr.API.util.BaseCollection),this.trackImpressions(e,"recently_followed_view_similarities",{to_user_id:a.id,tracking_context:"recently_followed",similar_to_user:a.id}),e.length()?((new twttr.views.UserDetailedList(e)).render(c.find("ul"),"html"),b.find("li a[data-user-id="+a.id+"]").parent("li").addClass("active"),c.find("p span").text(a.name),c.animate({opacity:1},200,function(){$(this).show()})):c.hide()}),error:twttr.bind(this,function(b){this.trackImpressions(null,"recently_followed_view_similarities",{to_user_id:a.id,tracking_context:"recently_followed",similar_to_user:a.id,error_status:b.status})})})}}),a(twttr.components.RecentlyFollowed)})}),provide("components/RecentlyViewed",function(a){using().as(function(b){twttr.klass("twttr.components.RecentlyViewed").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(){this.createView(),this.registerEvents()}).methods({registerEvents:function(){var a=this;this.$node.delegate("h2 .clear-all","click",function(b){b.preventDefault(),twttr.recentlyViewedUsers.clear(),a.$node.slideUp("fast",function(){a.$node.empty().show()})}),twttr.recentlyViewedUsers.bind("push.RecentlyViewedComponent",function(b,c){a.$find('li[data-user-id="'+c+'"]').size()||a.createView()}),a.registerUserActionEvents(),a.$node.delegate(".user-profile-link, .follow-action","click",function(){var a=$(this),b=a.hasClass("user-profile-link")?"profile_click":"follow";trackClient({section:"dashboard",component:"recently_viewed",action:b},{item_ids:[parseInt(a.attr("data-user-id"))],item_count:1})})},createView:function(){var a=this;twttr.recentlyViewedUsers.findAll({success:function(b){b=b.filter(function(a){return!a.following}).slice(0,6),b.length()?(trackClient({section:"dashboard",component:"recently_viewed",action:"results"},{item_ids:b.map(function(a){return a.id}),item_count:b.length()}),(new twttr.views.RecentlyViewed(b)).render(a.$node,"html"),twttr.helpers.ellipsify(a.$find("div.bio")),a.hasRendered()):a.trigger("notRendered","noRecentlyViewedUsers")}})}}),a(twttr.components.RecentlyViewed)})}),provide("components/InviteContacts",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.InviteContacts").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},this.scribbler=b.scribbler||new twttr.Scribbler,this.clientEventComponent=b.clientEventComponent||"invite_contacts";var c;for(var d=0;d<a.contacts.length;++d)c=a.contacts[d],c.index=d,c.truncated_email=twttr.helpers.truncate(c.email),c.truncated_name=twttr.helpers.truncate(c.name);(new twttr.views.InviteContacts(a)).render(this.$node,"append"),twttr.helpers.handlePopupLinks(this.$node);var e=this.$node.find("#select-all-contacts"),f=this.$node.find(".invite-contacts-button"),g=this.$node.find(".contacts .checkbox input");e.change(function(a){return g.attr("checked",this.checked),this.checked?f.removeClass("disabled"):f.addClass("disabled"),!0}),f.addClass("disabled"),g.change(function(a){var b=!0;return g.each(function(){b=b&&this.checked}),e.attr("checked",b),this.checked?f.removeClass("disabled"):g.filter(":checked").length==0&&f.addClass("disabled"),!0});var i=b.onSuccess||$.noop,j=b.onSubmit||$.noop,k=b.showError||function(a){twttr.showError(a)},l=this;f.click(function(a){if($(this).hasClass("disabled"))return;j();var b=g.filter(":checked").map(function(){var a=l.$node.find('label[for="'+this.id+'"]').text();return a==this.value?this.value:'"'+a+'" <'+this.value+">"}).get();f.addClass("disabled");var c={source:"contact_import",success:twttr.bind(this,function(a){var b=a.invited&&a.invited.length;twttr.showMessage(_("We let {{count}} of your contacts know about Twitter.",{count:b})),l.scribbler.scribe({component:l.clientEventComponent,action:"invited"},{event_value:b,item_count:b}),l.scribbler.scribe({component:l.clientEventComponent,action:"invitable"},{item_count:g.length}),i()}),error:function(a){f.removeClass("disabled");var c=twttr.API.util.RemoteRequest.apiErrorCodeFromResponse(a)||a.status;l.scribbler.scribe({component:l.clientEventComponent,action:"error"},{status_code:c,item_count:b.length});switch(c){case 47:k(_("We couldn't send invitations to any of those addresses."));break;case 37:k(_("There was an error emailing your contacts. Please try again later."));break;default:twttr.showMessage(_("We let your contacts know about Twitter.")),i()}}};twttr.API.AddressBook.sendInvitesByEmail(b,c)}),this.hasRendered()}),a(twttr.components.InviteContacts)})}),provide("components/InviteFriends",function(a){using("_","constants","mixins/inviteFriends").as(function(b,_){twttr.klass("twttr.components.InviteFriends").subclassOf(twttr.components.Base).mixin(twttr.mixins.inviteFriends).initializer(function(a){(new twttr.views.InviteFriends).render(this.$node,"append"),twttr.helpers.handlePopupLinks(this.$node),this.addFormEvents(a),this.hasRendered()}),a(twttr.components.InviteFriends)})}),provide("components/Retweeters",function(a){using().as(function(b){twttr.klass("twttr.components.Retweeters").subclassOf(twttr.components.Base).initializer(function(a,b,c){var d=this;a.retweeters({count:b||15,success:function(b){if(b.length()){var c=a.retweetCount,e=c>50?"50+":c;(new twttr.views.TweetStats({retweeters:b.array,retweeters_count:e,retweeters_length_one:c==1,retweeters_length_other:c!=1})).render(d.$node,"append");var f=b.map(function(a){return new twttr.views.BaseUser(a)});(new twttr.views.FacePile({users:f.array})).render(d.$find(".js-face-pile-container"),"append"),d.$find(".js-user-tipsy").tipsy({gravity:"s"}),d.hasRendered()}}})}).deciderKey("retweeters_component"),a(twttr.components.Retweeters)})}),provide("components/TweetActivity",function(a){using().as(function(b){twttr.klass("twttr.components.TweetActivity").subclassOf(twttr.components.Base).initializer(function(a){this.tweet=a,this.tweet.activities&&this.loadUsersAndRenderActivity()}).methods({loadUsersAndRenderActivity:function(){var a=this,b=33,c=[],d={favoriters:{},retweeters:{},repliers:{}},e={favoriters:[],retweeters:[],repliers:[]};for(var f in e){var g=this.tweet.activities[f];for(var i=0;i<g.length;i++)c=c.concat(g.slice(0,b)),d[f][g[i]]=!0}twttr.API.User.findAll(twttr.util.arrayUniq(c),{stringifiedIds:!0,success:function(b){b.each(function(a){for(var b in e)d[b][a.id]&&e[b].push(a)}),(new twttr.views.TweetActivity({counts:{favoriters_count:a.tweet.activities.favoriters_count,retweeters_count:a.tweet.activities.retweeters_count,repliers_count:a.tweet.activities.repliers_count},activities:e})).render(a.$node,"append")}})}}).click({".tweet-activity-view-all":function(a,b){b.closest(".activity-list-container").find("li.hidden").show(),b.closest(".tweet-activity-count-container").remove(),a.preventDefault()}}).deciderKey(function(){return twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_social_context")}),a(twttr.components.TweetActivity)})}),provide("components/ConversationThread",function(a){using().as(function(b){twttr.klass("twttr.components.ConversationThread").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.ConversationThread(a)).render(this.$node,"append"),a.bind("newMessage",function(a,c){(new twttr.views.Message(c)).render(b.$find(".messages-pane-header"),"after")}),a.bind("deletedMessage",function(a,c){b.$find(".js-message[data-message-id="+c+"]").remove()}),this.hasRendered()}),a(twttr.components.ConversationThread)})}),provide("components/InReplyTo",function(a){using().as(function(b){twttr.klass("twttr.components.InReplyTo").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet).initializer(function(a){var b=this;a.isReply&&a.inReplyTo(function(a){(new twttr.views.InReplyTo(a)).render(b.$node,"append"),b.registerTweetActionEvents(),b.updateI18nDisplay(),b.hasRendered()})}).deciderKey("in_reply_to_component").methods({noSpacer:!0}),a(twttr.components.InReplyTo)})}),provide("components/InlineReplyBox",function(a){using().as(function(b){twttr.klass("twttr.components.InlineReplyBox").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable).mixin(twttr.mixins.streamablePageWithInlineMedia).mixin(twttr.mixins.i18nTweet).initializer(function(a,b,c,d,e){if(!twttr.decider.hasInlineReplies())return null;this.registerTweetActionEvents(),b.addClass("with-inline-reply");var f=this.tweetActionReply(a,"expand",!0);f=twttr.dialogs.reply(f,!0);var g=(new twttr.views.InlineReplyBox({profile_image_url:twttr.currentUser.profileImageUrl,profile_image_size:e?"48":"32"})).$html();this.tweetbox=new twttr.TweetBox(g.prependTo(b),twttr.merge(f,{condensed:!0,condensedContent:_("Reply to @{{username}}",{username:f.defaultContent.slice(1)}),width:d,statusAction:"reply",whenGeoPopupOpens:function(){b.parent().scrollTop(0).css("overflow","visible")}}));var i=this;this.tweetbox.bind("open",function(){g.addClass("shifted").find(".inline-reply-user-image").show(),e&&i.tweetbox.$find("textarea").width(e)}),this.tweetbox.bind("close",function(){g.removeClass("shifted").find(".inline-reply-user-image").hide(),e&&i.tweetbox.$find("textarea").width(d)}),this.tweetbox.bind("tweetSuccess",function(a,b){var d=c.show().find(".tweets-wrapper");d.length||(d=c),(new twttr.views.SimpleTweet(b)).render(d,"prepend"),i.addInlineMediaIcons(d),i.updateI18nDisplay()}),this.tweetbox.bind("sendingTweet",function(c,d){i.trigger("reply.tweet",[a,b,"reply"])})}).methods({focus:function(){this.tweetbox.focus()}}),a(twttr.components.InReplyTo)})}),provide("components/Conversation",function(a){using().as(function(b){twttr.klass("twttr.components.Conversation").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.usesRelatedResults,twttr.mixins.i18nTweet,twttr.mixins.streamablePageWithInlineMedia).initializer(function(a,b,c){var d=this;d._tweetId=a.id;var e=function(a){if(a.length>1){var b=$("div.inner-pane").filter("div.active").find("div.pane-components"),c=b.find("div.conversation-last-ancestor-tweet");c.length>0&&b.animate({scrollTop:c.position().top-50},800)}},f=function(b){var f=twttr.isT1?new twttr.views.Ancestors(b):new twttr.views.Conversation(d.conversationGroup,a,b);f.render(d.$node,"append"),d.registerTweetActionEvents(),d.updateI18nDisplay(),twttr.isT1&&d.addInlineMediaIcons(d.$node),d.hasRendered(),twttr.isT1&&!b.length&&d.$node.hide(),c(d),twttr.decider.isExpando()||e(b)},g=function(a){twttr.API.User.find(a,function(a){twttr.helpers.canViewUser(a)||((new twttr.views.Ancestors({protected_ancestor:{user:new twttr.views.BaseUser(a)}})).render(d.$node,"append"),c(d))})};d.withRelatedResults(a,b,{success:function(b){d.resultGroups=b,d.conversationGroup=d.conversationGroupFor(b);var c=d.conversationGroup&&d.tweetsForConversationRole(d.conversationGroup,"Ancestor");c&&c.length?f(c):a.inReplyTo({success:function(a){f(a?[a]:[])},error:function(){twttr.isT1&&a.inReplyToUserId?g(a.inReplyToUserId):f([])}})},error:function(){f([])}})}).methods({onTweetActionDelete:function(a){a===this._tweetId&&this.trigger("deleted")},noSpacer:!0}),a(twttr.components.Conversation)})}),provide("components/Replies",function(a){using().as(function(b){twttr.klass("twttr.components.Replies").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.usesRelatedResults,twttr.mixins.i18nTweet,twttr.mixins.profilePopupActionable,twttr.mixins.streamablePageWithInlineMedia).initializer(function(a,b,c,d){if(!c)return;var e=this,f=function(a,b,c){b=e.filterRetweets(b);if(twttr.decider.isExpando()){var f=a.length;f>5?a=a.slice(0,5):b.length+f>5&&(b=b.slice(0,5-f))}a.length+b.length>0?((new twttr.views.Replies(c,a,b)).render(e.$node,"append"),e.registerTweetActionEvents(),e.updateI18nDisplay(),e.hasRendered(),twttr.isT1&&e.addInlineMediaIcons(e.$node),d&&d.apply(e)):twttr.decider.hasInlineReplies()&&((new twttr.views.Replies(c,a,b)).render(e.$node,"append"),e.$node.hide(),e.registerTweetActionEvents(),d&&d.apply(e))},g=[],i=[],j=e.conversationGroupFor(c);j&&(g=e.tweetsForConversationRole(j,"Descendant"),i=e.tweetsForConversationRole(j,"Fork")),f(g,i,j)}).methods({filterRetweets:function(a){var b={};for(var c=a.length-1;c>=0;c--){var d=a[c].id;a[c].attributes.retweeting_status?b[d]===undefined&&(b[d]=!1):b[d]=!0}for(var c=a.length-1;c>=0;c--){var d=a[c].id;a[c].attributes.retweeting_status&&b[d]===!0?a.splice(c,1):a[c].attributes.retweeting_status&&b[d]===!1&&(b[d]=!0)}return a}}).deciderKey("conversations"),a(twttr.components.Replies)})}),provide("components/MoreLists",function(a){using().as(function(b){twttr.klass("twttr.components.MoreLists").subclassOf(twttr.components.Base).initializer(function(a){this.render(a),this._registerEvents(a)}).deciderKey("more_lists_component").methods({render:function(a){var b=this;a.user.lists(function(c){c.length()&&((new twttr.views.MoreLists({user:new twttr.views.BaseUser(a.user),lists:new twttr.views.ListOfLists(c),create_list_button:{link_only:!0}})).render(b.$node),b.hasRendered())})},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"update",function(c,d){d.id===a.id&&b.render(d)})}}),a(twttr.components.MoreLists)})}),provide("geo/TweetGeo",function(a){using("_").as(function(b,_){twttr.klass("twttr.geo.TweetGeo",function(a,b,c,d){this.opts=d,this.placeId=b,this.render(a,c)}).methods({render:function(a,b){var c=this;c.$target=b;var d=$.extend({},a.data());d.tweet_id=a.id,c.avatarUrl=a.user.profileImageUrl.replace(/(.+)(?:_normal)\.(\w+)$/,"$1_mini.$2"),d.coordinates&&(c.coordinates=d.coordinates.coordinates),d.is_from=!c.placeId;var e=c.placeId||a.place&&a.place.id;if(e){if(!d.place||d.place.id!=e)d.place={id:e,name:_("A Place")};twttr.API.Place.find(e,{success:function(a){var b=a.data();d.place=twttr.geo.getFullPlace(b),c.finishRendering(d)},error:function(){d.place.place_id=e,c.finishRendering(d)}})}else delete d.place,c.finishRendering(d)},finishRendering:function(a){var b=this,c=!!b.coordinates,d=!(!a.place||!a.place.geometry&&!a.place.bounding_box);a.show_map=c||d;if(a.show_map||a.place){var e=(new twttr.views[b.opts.viewName](a)).$html();$.browser.safari&&!navigator.userAgent.match(/Chrome/)&&(e.find(".map_canvas").addClass("notransform"),b.opts.mapOptions.draggable=!1),b.$target.append(e)}if(a.show_map){b.drawMap(e.find(".map_canvas"),a.place);var f={},g=a.tweet_id+"";f[g]={item_type:twttr.constants.clientEvent.itemType.tweet},trackClient({component:"tweet",action:"show",element:"map"},{event_info:"dynamic",item_details:f,item_ids:[g],item_count:1})}},drawMap:function(a,b){var c=this;twttr.geo.loadMaps(function(){c.geoMap=new twttr.geo.Map(a,c.opts.mapOptions);if(!c.geoMap.initialized)return;var d=!1;if(b)if(b.geometry){var e=b.geometry.coordinates;b.geometry.type=="Polygon"?c.geoMap.addPlacePolygon(e):b.geometry.type=="MultiPolygon"?twttr.each(e,function(a){c.geoMap.addPlacePolygon(a)}):b.geometry.type=="Point"&&(c.geoMap.addPoi(e),d=!0)}else{var e=b.bounding_box.coordinates,f=e[0][0],g=e[0][2];f[0]==g[0]&&f[1]==g[1]?(c.geoMap.addPoi(e[0][0]),d=!0):c.geoMap.addPlacePolygon(e)}!d&&c.coordinates&&c.geoMap.addPoint(c.coordinates,c.avatarUrl),c.geoMap.adjustBounds(13,!d&&c.coordinates),a.bind("refreshMap",function(){c.geoMap.resize()})})}}),a(twttr.geo.TweetGeo)})}),provide("components/MachineTranslationBackend",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.components.MachineTranslationBackend",function(){}).statics({getBackend:function(){return new twttr.components.BingMTBackend}}).methods({translationTextEqual:function(a,b){return a===b?!0:(global_spaces=RegExp(twttr.txt.regexen.spaces.toString().slice(1,-1),"g"),a.replace(/[MHL]T\d*KEN/g,"").replace(global_spaces,"").toLowerCase()===b.replace(/[MHL]T\d*KEN/g,"").replace(global_spaces,"").toLowerCase()?!0:!1)},shouldShowTranslation:function(a,b,c,d){return c==d?!1:this.translationTextEqual(a,b)?!1:!0}}),twttr.klass("twttr.components.BingMTBackend",function(){}).subclassOf(twttr.components.MachineTranslationBackend).methods({attribution:function(){return _('Translation powered by <a href="http://bing.com/translator" target="_new">Bing Translator</a>')},translate:function(a,b,c){var d=this;$.ajax({url:window.location.protocol+"//api.microsofttranslator.com/v2/ajax.svc/GetTranslations?oncomplete=?",dataType:"jsonp",data:{appId:"2ADD5BC2C5139FA743F612F9CE8ECD783FCB899F",text:a,to:b,maxTranslations:1},success:twttr.bind(this,function(b){if(b&&b.Translations){var e=b.Translations[0].TranslatedText,f=b.From;this.shouldShowTranslation(a,e,f,d.destLocale)&&c(e,f)}})})}}),twttr.klass("twttr.components.MachineTranslatedTweet").subclassOf(twttr.components.Base).initializer(function(a){this._initTranslation(a,twttr.pageLocale||$("html").attr("lang")||"en")}).deciderKey("machine_translated_tweets").methods({_initTranslation:function(a,b){a.user["protected"]||(this.destLocale=b,this.fetchTranslation(a,this.destLocale))},_preProcessTweetText:function(a){var b=a,c=function(a){return a&&a.replace&&a.replace(/^\s+|\s+$/g,"")};this._mentions=a.match(twttr.txt.regexen.extractMentions)||[];for(i in this._mentions)this._mentions[i]=c(this._mentions[i]),b=b.replace(this._mentions[i],"<M"+i+"></M"+i+">");this._hashtags=a.match(twttr.txt.regexen.autoLinkHashtags)||[];for(i in this._hashtags)this._hashtags[i]=c(this._hashtags[i]),b=b.replace(this._hashtags[i],"<H"+i+"></H"+i+">");this._links=a.match(twttr.txt.regexen.extractUrl)||[];for(i in this._links)this._links[i]=this._links[i],b=b.replace(this._links[i],"<L"+i+"></L"+i+">");return b},_postProcessTweetText:function(a){var c=a;if(this._mentions&&this._mentions.length>0)for(var d=0;d<this._mentions.length;d++)c=c.replace(new RegExp("<M"+d+">\\s?</M"+d+">","i"),this._mentions[d]);if(this._hashtags&&this._hashtags.length>0)for(var d=0;d<this._hashtags.length;d++)c=c.replace(new RegExp("<H"+d+">\\s?</H"+d+">","i"),this._hashtags[d]);if(this._links&&this._links.length>0)for(var d=0;d<this._links.length;d++)c=c.replace(new RegExp("<L"+d+">\\s?</L"+d+">","i"),this._links[d]);return b.util.linkify(c)},fetchTranslation:function(a,b){var c=this;this.sourceText=this._preProcessTweetText(a.text);var d=twttr.components.MachineTranslationBackend.getBackend();d.translate(this.sourceText,b,function(b,e){(new twttr.views.MachineTranslatedTweet({translated_text:c._postProcessTweetText(b),attribution:d.attribution()})).render(c.$node,"append"),eventTerms={client:"web",page:"home",section:"timeline",component:"tweet",action:"translate"},eventDetails={item_ids:[a.id],i18n_details:{source_lang:e,source_length:c.sourceText.length,translation_lang:c.destLocale,translation_length:b.length}},trackClient(eventTerms,eventDetails),c.hasRendered()})}}),a(twttr.components.MachineTranslationBackend)})}),provide("components/TweetGeoSmall",function(a){using().as(function(b){twttr.klass("twttr.components.TweetGeoSmall").subclassOf(twttr.components.Base).initializer(function(a,b){if(!b&&!a.showGeoMap)return;if(a.geo||a.place&&a.place.id||b||a.coordinates)new twttr.geo.TweetGeo(a,b,this.$node,{viewName:"GeoMapSmall",mapOptions:twttr.isT1?{}:{draggable:!1,disableDoubleClickZoom:!0,navigationControl:!1}}),this.hasRendered()}).deciderKey("tweet_geo_component"),a(twttr.components.TweetGeoSmall)})}),provide("components/NewestListMembers",function(a){using().as(function(b){twttr.klass("twttr.components.NewestListMembers").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(a){this.render(a),this._registerEvents(a)}).deciderKey("newest_list_members_component").methods({render:function(a){var b=this;a.members().first(4,function(c){(new twttr.views.NewestListMembers({list:a.attributes})).render(b.$node),c.length()&&(c.each(function(a){var c=new twttr.views.UserSmallListItem(a);c.is_withheld()||c.render(b.$find(".js-recent-members"),"append")}),twttr.helpers.ellipsify(b.$find("div.bio")),b.hasRendered(),b.registerUserActionEvents())})},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"add remove",function(c,d){d.id===a.id&&b.render(d)})}}),a(twttr.components.NewestListMembers)})}),provide("components/StorkPip",function(a){using().as(function(b){twttr.klass("twttr.components.StorkPip").subclassOf(twttr.components.Base).initializer(function(a,b){var c=this;this._opts=b,this._state="icon",this._$streamItem=a,this._scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({component:"stork",element:b.id}),this.constructor.allPips[b.id]||(this.constructor.allPips[b.id]=[]),this.constructor.allPips[b.id].push(this),(new twttr.views.StorkPipIcon({icon:b.icon})).render(this.$node),this.$node.hide().prependTo(a).fadeIn("fast"),b.iconHighlight&&this.highlight(b.iconHighlight),this._scribbler.scribe({action:"impression"});var d=a.closest(".js-stream-items");if(b.explainOn){twttr.is.string(b.explainOn)&&(b.explainOn={event:b.explainOn});var e=b.explainOn.selector?d.find(b.explainOn.selector):d;this._registerEvent(e,b.explainOn.event,function(a){var d=$(a.target).closest(".js-stream-item");if(d.length&&(!b.matcher||b.matcher(d))){if(d[0]!=c._$streamItem[0]&&d.find(".js-pip").length)return;if(c._state=="icon")c._scribbler.scribe({action:"show"});else{if(c._state!="prompt")return;c._scribbler.scribe({action:"success"})}c.showState("explain",d)}})}if(b.dismissOn){twttr.is.string(b.dismissOn)&&(b.dismissOn={event:b.dismissOn});var e=b.dismissOn.selector?d.find(b.dismissOn.selector):d;this._registerEvent(e,b.dismissOn.event,function(a){var d=$(a.target).closest(".js-stream-item");d.length&&(!b.matcher||b.matcher(d))&&(d[0]==c._$streamItem[0]&&c._state=="explain"&&c._scribbler.scribe({action:"complete"}),c.dismissAll())})}}).click({".js-pip":function(){this._state=="icon"?(this.showState("prompt"),this._scribbler.scribe({action:"open"})):this._state=="explain"&&(this.dismissAll(),this._scribbler.scribe({action:"dismiss"}))},".js-dismiss":function(){this.dismissAll(),this._scribbler.scribe({action:"dismiss"})}}).statics({allPips:{},openPip:null}).methods({showState:function(a,b){function e(a){var b=new twttr.views.StorkPipText({contents:a,dismiss:!1});b.render(d.$node,"append"),d.$node.fadeIn("fast")}if(a=="prompt"&&!this._opts.promptHtml)return this.showState("explain",b);b=b||this._$streamItem;if(this._state==a)return;this._state=="icon"&&(a=="prompt"||a=="explain")&&twttr.stork.incrValue(this._opts.counter);if(a!="icon"){var c=this.constructor.openPip;c&&c!=this&&(c._state=="prompt"?c.showState("icon"):c._state=="explain"&&c.dismiss()),this.constructor.openPip=this}a=="explain"&&this.dismissOthers(),this._$streamItem[0]!=b[0]&&this.unhighlight(),this._state=a,this._$streamItem=b;var d=this;this.$find(".js-pip").prependTo(this.$node.parent()).fadeOut("fast",function(){$(this).remove();if(a=="icon"){var b=(new twttr.views.StorkPipIcon({icon:d._opts.icon})).render(d.$node);d.$node.fadeIn("fast")}else{var c=d._opts[a+"Html"],f=d._opts[a+"Highlight"];twttr.is.fn(c)?c(d._$streamItem,e):e(c),f&&f!="remove"?d.highlight(f):d.unhighlight(f=="remove")}}),this.$node.hide().prependTo(b)},highlight:function(a){this._$streamItem.find(a).is(".stork-highlighted")||(this.unhighlight(),this._$streamItem.find(a).each(function(){var a=$(this),b=$("<span>").addClass("stork-highlight-background"),c=$("<span>").addClass("stork-highlight-container").css({width:a.outerWidth(),height:a.outerHeight()});a.wrap(c).before(b).addClass("stork-highlighted"),b.fadeIn()}))},unhighlight:function(a){this._$streamItem.find(".stork-highlighted").each(function(){var b=$(this),c=b.parent().find(".stork-highlight-background"),d=function(){c.remove(),b.unwrap()};b.removeClass("stork-highlighted"),a?d():c.fadeOut(d)})},dismissOthers:function(){for(var a=0;a<this.constructor.allPips[this._opts.id].length;++a){var b=this.constructor.allPips[this._opts.id][a];b!=this&&b.dismiss()}this.constructor.allPips[this._opts.id]=[this]},dismissAll:function(){var a=this.$node.closest(".js-stream-items");for(var b=0;b<this.constructor.allPips[this._opts.id].length;++b){var c=this.constructor.allPips[this._opts.id][b];c.dismiss()}this.constructor.allPips[this._opts.id]=[],twttr.stork.storkifyTweets(a)},dismiss:function(){var a=this;this._$streamItem&&this.unhighlight(),this.$node.fadeOut(function(){a.destroy()}).find(".js-pip").removeClass("js-pip")}}),a(twttr.components.StorkPip)})}),provide("components/StreamEnd",function(a){using().as(function(b){twttr.klass("twttr.components.StreamEnd").subclassOf(twttr.components.Base).initializer(function(a,b){(new twttr.views.StreamEnd({show_stream_end_bird:b===undefined?!0:b,end_text:a})).render(this.$node,"append")}),a(twttr.components.StreamEnd)})}),provide("components/StreamEndInviteFriends",function(a){using().as(function(b){twttr.klass("twttr.components.StreamEndInviteFriends").subclassOf(twttr.components.StreamEnd).initializer(function(a,b){var c=new twttr.components.InviteFriends;c.$node.addClass("stream-item"),this.$node.append(c.$node),this._superInitializer.apply(this,arguments)}),a(twttr.components.StreamEndInviteFriends)})}),provide("components/StreamWhaleEnd",function(a){using().as(function(b){twttr.klass("twttr.components.StreamWhaleEnd").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.StreamWhaleEnd({stream_fail_header:a})).render(this.$node,"append"),this.$node.delegate(".try-again-after-whale","click",function(a){a.preventDefault(),b.trigger("tryAgain")})}),a(twttr.components.StreamWhaleEnd)})}),provide("components/ContactImportErrorEnd",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.ContactImportErrorEnd").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.StreamWhaleEnd({stream_fail_header:a})).render(this.$node,"append"),this.$node.delegate(".try-again-after-whale","click",function(a){b.trigger("tryImportAgain")})}),a(twttr.components.ContactImportErrorEnd)})}),provide("components/EmptyHome",function(a){using().as(function(b){var c=twttr.klass("twttr.components.EmptyHome").subclassOf(twttr.components.Base).initializer(function(){this.render(),this.hasRendered()}).methods({render:function(){var a=twttr.currentUser;(new twttr.views.EmptyHome({screen_name:a.screenName,protected_account:a["protected"]})).render(this.$node.empty(),"append")}});twttr.isT1&&c.methods({render:function(){(new twttr.views.EmptyHome({show_stream_end_bird:!0,end_text:(new twttr.views.EmptyTimelineMessage).html()})).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/AddPeople",function(a){using().as(function(b){var c=twttr.klass("twttr.components.AddPeople").subclassOf(twttr.components.Base).initializer(function(){this.render();var a=twttr.isT1?"userSearchPath":"whoToFollowSearchPath";twttr.helpers.addFormEvents(this.$find(".js-search-for-list-people"),function(){var b=this.q.value;b!=""&&(twttr.router.routeTo(twttr.router[a]({query:b})),trackClient({component:"empty_list_stream",action:"search"},"list"),_scribble("search-for-people",{input:"click"}))}),this.hasRendered()});twttr.isT1?c.methods({render:twttr.util.noopInT1}).setBaseView(twttr.views.AddPeople):c.methods({render:function(){(new twttr.views.AddPeople).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/NoListMembers",function(a){using().as(function(b){var c=twttr.klass("twttr.components.NoListMembers").subclassOf(twttr.components.Base).initializer(function(){var a=this;this.render(),this.hasRendered()});twttr.isT1?c.methods({render:twttr.util.noopInT1}).setBaseView(twttr.views.NoListMembers):c.methods({render:function(){(new twttr.views.NoListMembers).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/Media",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.components.Media").subclassOf(twttr.components.Base).initializer(function(a,b,c){this.tweet=a,this.urls=twttr.media.extractUrls(a),this.$node.prepend($('<div class="tweet-media"/>')),this.$mediaNode=this.$node.find("div.tweet-media"),this.width=b,this.options=c||{},this.hasCalledHasRendered=!1,this.notDisplayedClass=".media-not-displayed";var d=this;this.checkForMedia(function(a){a&&(d.$mediaNode.bind("hideMedia",function(){$("div.tweet-media").empty()}),d.$mediaNode.bind("showMedia",function(){d.restrictedMedia()?twttr.loggedIn?d.loggedInBehavior():d.loggedOutBehavior():d.renderMedia()}),d.$mediaNode.trigger("showMedia"))})}).deciderKey("inline_media_component").statics({restrictedCategories:{photo:!0,video:!0},dashboardThumbnailOptions:{itemWidth:66,itemHeight:66,itemDisplayWidth:70,width:276,viewClass:twttr.views.ThumbnailViewerFacet,thumbnailViewClass:twttr.views.ThumbnailFacet}}).methods({checkForMedia:function(a){var c=this;if(b.util.objKeys(this.urls).length===0&&!twttr.media.hasMedia(this.tweet)){a(!1);return}var d=c.tweet;twttr.Cards.prototype.hasCards(d)?(this.mediaTypes=[],a(!0)):twttr.media.mediaTypes(this.urls,function(d){c.mediaTypes=d;if(b.util.objKeys(c.mediaTypes).length===0){a(!1);return}a(!0)})},onProfilePage:function(){return twttr.profileUser&&twttr.profileUser.id==this.tweet.user.id},restrictedMedia:function(){var a=!1;return $.each(this.mediaTypes,function(b,c){var d=twttr.media.iconType(b,c);!twttr.components.Media.restrictedCategories[d]||(a=!0)}),a},_getUser:function(){return this.tweet.retweetingStatus?this.tweet.retweetingStatus.user:this.tweet.user},loggedInBehavior:function(){var a=this,b=this._getUser();if(twttr.helpers.isCurrentUser(b)||this.hasClickedShowMedia){this.renderMedia();return}this.checkPossiblySensitive()},_isPossiblySensitive:function(){return!!this.tweet.possiblySensitive},checkPossiblySensitive:function(){this._isPossiblySensitive()?this.possiblySensitiveBehavior():this.renderMedia()},checkNotFollowing:function(){var a=this,b=this._getUser();twttr.currentUser.relationshipWith(b,function(c){b.sync("following",c.following),a.renderMedia()})},possiblySensitiveBehavior:function(){var a=this;twttr.currentUser.viewPossiblySensitive({success:function(b){b?a.checkNotFollowing():a.renderBlockedMessage({possibly_sensitive:!0})}})},loggedOutBehavior:function(){this.onProfilePage()&&!this._isPossiblySensitive()?this.renderMedia():this._isPossiblySensitive()&&!twttr.media.getViewMediaCookie()?this.renderBlockedMessage({possibly_sensitive:!0}):this.renderMedia()},renderMedia:function(){var a=this,b=(new twttr.media.Embedder(this.tweet,{DOMContainer:a.$mediaNode,preProcess:function(b,c){c(twttr.aug(a.options,{maxwidth:a.width}))},afterRender:function(b,c){a.hasCalledHasRendered||(a.hasRendered(),a.hasCalledHasRendered=!0),a.options.afterRender&&a.options.afterRender(b)}})).render()},buildNotDisplayedView:function(a){return new twttr.views.MediaNotDisplayed(a)},renderBlockedMessage:function(a){var b=this;b.hasCalledHasRendered||(b.hasRendered(),b.hasCalledHasRendered=!0);if(this.$node.find(this.notDisplayedClass+":visible").get(0))return;this.buildNotDisplayedView(a).render(this.$node,"prepend"),this.options.whenNotDisplayed&&this.options.whenNotDisplayed(this.$node);var c=twttr.bind(this,function(a){this.renderMedia(),this.$node.find(this.notDisplayedClass).hide(),twttr.loggedIn?this.hasClickedShowMedia=!0:twttr.media.setViewMediaCookie(),a.stopPropagation()});this.$node.find(".display-this-media").click(c),this.$node.find(".always-display-media").click(function(a){twttr.currentUser.updateViewPossiblySensitive(!0,{success:function(){twttr.showMessage(_("Your media display settings have been changed.")),c(a)},error:function(a){twttr.showError(_("Couldn't set inline media settings."))}})})}}),a(twttr.components.Media)})}),provide("components/ProfilePane",function(a){using("mixins/userActionable",twttr.isT1?["mixins/userUpdateable","mixins/profilePopupActionable"]:[]).as(function(b){var c=twttr.klass("twttr.components.ProfilePane").subclassOf(twttr.components.Base).initializer(function(a){this.user=a,this.renderPane(),twttr.loggedIn&&this.$node.append((new twttr.components.ProfileActions(this.user,undefined,!0)).$node),this.hasRendered()}).methods({renderPane:function(){var a=new twttr.views.ProfilePane(this.user);a.render(this.$node)},renderStats:function(){var a=new twttr.views.MiniProfileStats(this.user);a.render(this.$node.find(".js-mini-profile-stats"),"replaceWith")}});twttr.isT1&&c.mixin(b.mixins.userActionable,b.mixins.userUpdateable,b.mixins.profilePopupActionable).initializer(function(a){var b=this,c=a.impressionId;this.user=a,this.renderPane(),this.registerUserActionEvents(),twttr.loggedIn&&(this.registerUserUpdateEvents(this.user),this.bind("userUpdated",function(a,d){b.user=d,c&&(b.user=twttr.API.util.PromotedStore.getPromotedUserInstance(b.user,c)),b.renderStats()})),this.hasRendered()}).methods({renderPane:function(){var a=this;this.getRelationship(this.user,function(b,c){a.updateUserAttributesFromRelationship(b);var d=new twttr.views.ProfilePane(a.user);d.render(a.$node),a.showFollowOrUnfollow(a.user),twttr.helpers.canViewUser(a.user)&&a.showMiniSocialProof(a.user),a.renderUserProfileMenu(a.$find(".js-follow-combo"),a.$find(".js-action-profilemenu"),c)})}}),a(c)})}),provide("components/JapaneseAd",function(a){using("constants").as(function(b){twttr.klass("twttr.components.JapaneseAd").subclassOf(twttr.components.Base).initializer(function(){if(twttr.components.JapaneseAd.shouldBeHidden()){this.$node.hide();return}(new twttr.views.JapaneseAd).render(this.$node,"append");if(twttr.decider.isAvailable("japanese_new_ad_provider"))this.constructor.getJapanAd()?this.constructor.refreshAds():this.constructor.createIframeAd(this.$node);else if(!this.constructor.loadedOnce){this.constructor.loadedOnce=!0;var a="loadedJsCallBack"+parseInt(Math.random()*1e5,10);twttr.components.JapaneseAd.callbacks[a]=function(b){delete twttr.components.JapaneseAd.callbacks[a],twttr.components.JapaneseAd.loadedJsCallback(b)},$.ajax({cache:!0,url:window.location.protocol+b.constants.japaneseAdUrl+a,dataType:"script"})}else this.constructor.refreshAds()}).statics({shouldBeHidden:function(){var a=["japan_olympic","akiko_lawson","docomo","mhamura","warnerjp","aquarius_sports"];return twttr.pageLocale!=="ja"||twttr.app.currentPageName()==="profile"&&$.inArray(twttr.profileUser.screenName.toLowerCase(),a)!=-1},callbacks:{},loadedJsCallback:function(a){this.etologyAdSrc=a[0];if(typeof renderAd=="function"){var b=renderAd;renderAd=function(a){document.getElementById(a.spaceTag)&&b.apply(this,arguments)}}this.refreshAds()},createIframeAd:function(a){$(a).append($('<iframe id="j_ad" src="'+b.constants.japaneseAdIframeUrl+'" width="300" height="185" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>')),trackClient({component:"japanese_ad",action:"impression"},{url:b.constants.japaneseAdIframeUrl})},getJapanAd:function(){return $("#j_ad")[0]},refreshAds:function(){var a="t="+(new Date).getTime();twttr.decider.isAvailable("japanese_new_ad_provider")?this.getJapanAd()&&($("#j_ad").attr("src",b.constants.japaneseAdIframeUrl+"&"+a),trackClient({component:"japanese_ad",action:"refresh"},{url:b.constants.japaneseAdIframeUrl})):this.etologyAdSrc&&(trackClient({section:"dashboard",component:"japanese_ad",action:"refresh"},{url:this.etologyAdSrc}),_scribble("japanese-ad-refresh",{adSource:this.etologyAdSrc}),$.getScript(this.etologyAdSrc+"?"+a))}}).deciderKey("japanese_ad_component"),a(twttr.components.JapaneseAd)})}),provide("components/ProtectedUser",function(a){using().as(function(b){twttr.klass("twttr.components.ProtectedUser").subclassOf(twttr.components.Base).initializer(function(a){(new twttr.views.ProtectedUser(a)).render(this.$node,"append")}),a(twttr.components.ProtectedUser)})}),provide("components/TweetStats",function(a){using().as(function(b){var c=twttr.klass("twttr.components.TweetStats").subclassOf(twttr.components.Base).initializer(function(a,b,c){this.maxUsersToShow=b;var d=this;a.summary(function(b){d.shouldRender(b)&&($.extend(b,{screen_name:a.user.screenName,id:a.id,retweeters_length:b.retweeters.length,favoriters_length:b.favoriters.length,has_retweets:!!parseInt(b.retweeters_count,10),has_favorites:!!parseInt(b.favoriters_count,10)}),(new twttr.views.TweetStats(b)).render(d.$node,"append"),d.$node.closest(".js-stream-tweet").addClass("with-social-proof"),d.getFacePile(b),c&&c())})}).methods({shouldRender:function(a){return a.retweeters.length+a.favoriters.length>0},getFacePile:function(a){var b=this,c=twttr.util.arrayUniq(a.retweeters.concat(a.favoriters));c=c.slice(0,this.maxUsersToShow),twttr.API.User.findAll(c,function(a){var d={};a.each(function(a){d[a.id]=a});var e=new twttr.anywhere.api.util.BaseCollection($.map(c,function(a){return d[a]})),f=e.map(function(a){return new twttr.views.BaseUser(a)});(new twttr.views.FacePile({users:f.array})).render(b.$find(".js-face-pile-container"),"append"),b.$node.closest(".js-stream-tweet").addClass("with-social-proof"),b.$find(".js-user-tipsy").tipsy({gravity:"s"})})}}).deciderKey(function(){return twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_status_summary")});a(c)})}),provide("components/PermalinkTweet",function(a){using().as(function(b){twttr.klass("twttr.components.PermalinkTweet").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet,twttr.mixins.userActionable,twttr.mixins.profilePopupActionable).initializer(function(a){this.view=new twttr.views.SingleTweet(a),this.view.render(this.$node,"append"),this._tweetId=a.id,this.registerTweetActionEvents(),this.updateI18nDisplay(),this.hasRendered(),this.scribeComponentName="tweet";if(twttr.isT1){var b=twttr.loggedIn?"TweetStats":"Retweeters",c=new twttr.components[b](a,9);this.$find("div.js-tweet-stats-container").append(c.$node)}this.registerUserActionEvents()}).methods({renderWithheld:function(){return this.view.render_withheld()},renderCreatorWithheld:function(){return this.view.is_withheld()&&this.view.is_current_user()},faveTweet:function(a){this.tweetActionFavorite(this.$find(".tweet"),a)},replyTweet:function(a){this.tweetActionReply(this.$find(".tweet"),a)},retweetTweet:function(a){this.tweetActionRetweet(this.$find(".tweet"),a)},onTweetActionDelete:function(a){a===this._tweetId&&this.trigger("deleted")}}).click({"img.user-profile-link":function(a,b){this.trigger("avatar_click.tweet",[b.closest(".js-actionable-tweet"),"avatar",b])},".tweet-user-block-screen-name":function(a,b){this.trigger("screen_name_click.tweet",[b.closest(".js-actionable-tweet"),"screen_name",b])},".stats .js-stat-count a":function(a,b){a.stopPropagation(),a.preventDefault()}}),a(twttr.components.PermalinkTweet)})}),provide("components/NoUserExists",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.NoUserExists").subclassOf(twttr.components.Base).initializer(function(){this.$node.append("<p class='no-user tweet-text tweet-text-large'>"+_("This user does not exist.")+"</p>"),this.hasRendered()}),a(twttr.components.NoUserExists)})}),provide("components/SignupCallOut",function(a){using().as(function(b){twttr.klass("twttr.components.SignupCallOut").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{};var c;if(b.profileUser){var d=twttr.merge({signup_source:a},b.profileUser.attributes);a=="permalink"?c=new twttr.views.PermalinkSignupCallOut(d):c=new twttr.views.ProfileSignupCallOut(d)}else c=new twttr.views.NewSignupCallOut({signup_source:a,query:b.query});c.render(this.$node.empty(),"append"),this.$node.delegate("form.signup-btn","submit",function(){trackClient({section:"signup_callout",component:"form",action:"signup_click"})});if(b.profileUser||twttr.isT1){var e=this.$find("form");twttr.helpers.addFormEvents(e),twttr.helpers.addHoldingInputEvents(e)}this.$node.delegate(".profile-subpage-call-out-button","click",function(){trackClient({section:"signup_callout",component:"discover_link",action:"click"},{profile_id:twttr.profileUser.id,context:"profile"})}),this.hasRendered()}),a(twttr.components.SignupCallOut)})}),provide("components/SuggestionCategoriesList",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.SuggestionCategoriesList").subclassOf(twttr.components.Base).initializer(function(a,b,c){var d=this.categoriesToLinks(a,b,c);(new twttr.views.LinkList(d,"&middot;")).render(this.$node,"append"),this.$find("ul").addClass("categories-list")}).mixin(twttr.mixins.discoveryHelper).methods({categoriesToLinks:function(a,b,c){var d=this;return a?a.map(function(a,e){var f={text:a.name};if(c==a.slug)return f;var g=d.pagePathFor(b,"InterestsCategory",{category:a.slug});return twttr.merge(f,{href:g})}).array:[]}}),a(twttr.components.SuggestionCategoriesList)})}),provide("components/ContactImportMatchesStats",function(a){using().as(function(b){twttr.klass("twttr.components.ContactImportMatchesStats").subclassOf(twttr.components.Base).initializer(function(a,b){var c=a.customHeaderView||"ContactImportMatchesStats";(new twttr.views[c](b)).render(this.$node,"append"),this.$node.delegate(".js-action-follow-all","click",function(b){a._followAll($(this)),b.preventDefault()}),this.$node.delegate(".save-as-list","click",function(b){a._saveAsList($(this)),b.preventDefault()}),this.$node.delegate(".invite-contacts","click",function(b){a.inviteOthers(),b.preventDefault()})}),a(twttr.components.ContactImportMatchesStats)})}),provide("components/media/Base",function(a){using().as(function(b){twttr.klass("twttr.components.media.Base").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.options=a,this.size=a.size||"medium",this.count=this.count||a.count||100,this.offset=this.offset||a.offset||0,this.score=a.score||!0,this.isDataReady=!1,this._urls=[]}).methods(twttr.EventProvider).methods({render:function(){throw new Error("You should implement this.")},dataReady:function(a,b){this._urls=a,this.isDataReady=!0,this.trigger("urlsLoaded",[this._urls,!!b])}}),a(twttr.components.media.Base)})}),provide("components/media/profile",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.media.profile.Images").subclassOf(twttr.components.media.Base).initializer(function(a){var b=this;this._superInitializer.apply(this,arguments),this.user=a.user,this.provider=new twttr.media.provider.UserMedia({user:this.user}),this.options=a||{},this._fetchedMedia=null,this.viewTemplate=twttr.views.FacetMedia,this.filter=a.filter||function(){return!0},this.thumbnailViewerOptions=$.extend({},{width:340,itemWidth:83,itemHeight:83,itemDisplayWidth:85,generateItemHref:function(a){return twttr.router.userMediaSlideshowPath({screen_name:b.user.screenName})+"?url="+encodeURIComponent(a)}},this.options),this.noSpacer=!!this.options.noSpacer}).methods({fetchImages:function(){var a=this;this.provider.fetch({count:this.count,page:this.offset,filter:this.filter,success:function(b){a._fetchedMedia=b;var c=!1;a.dataReady($.map(b,function(a){return c=c||a&&a.tweet&&a.tweet.possiblySensitive,a.url}),c)}})},render:function(){var a=this;if(!this.isDataReady)return;var b=4,c=this._urls.length>b;this.viewAllHref=twttr.router.userMediaGridPath({screen_name:a.user.screenName});if(this._urls.length>0){var d=(new this.viewTemplate({title:_("Recent images"),view_all_href:this.viewAllHref,show_view_all:c})).$html();this.$node.append(d),this.thumbnailViewer=new twttr.components.ThumbnailViewer(this._urls,this.thumbnailViewerOptions,this._fetchedMedia),this.thumbnailViewer.renderWithIndex(0),this.thumbnailViewer.bind("nextPage prevPage",function(a,b){trackClient({section:"dashboard",component:"photos_user_media",action:"page"},{event_info:"photos",cursor_or_page:b,profile_id:twttr.profileUser&&twttr.profileUser.id})}),this.thumbnailViewer.bind("allFailed",function(){a.trigger("failed")}),this.$find(".js-media-images").replaceWith(this.thumbnailViewer.$node)}this.hasRendered()}}),a(twttr.components.media.profile)})}),provide("components/media/facets/Base",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Base").subclassOf(twttr.components.media.Base).initializer(function(a){this._superInitializer(a)}).methods(twttr.EventProvider).methods({render:function(){throw new Error("You should implement this.")}});a(c)})}),provide("components/media/facets/Media",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Media").subclassOf(twttr.components.media.facets.Base).methods({render:function(){var a=this;if(!this.isDataReady)return;var b=a._type==="images"?4:3,c=this._urls.length>b;if(this._urls.length>0){var d=(new this.viewTemplate({title:this.title,view_all_href:!twttr.isT1||c?this.view_all_href:this.view_slideshow_href,show_view_all:c})).$html();this.$node.append(d);var e={imageSize:this.imageSize,cacheSize:this.cacheSize,width:340,itemWidth:this.itemWidth||83,itemHeight:this.itemHeight||83,itemDisplayWidth:this.itemDisplayWidth||85,delayLoading:!0,generateItemHref:function(b){return twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:a._type==="images"?"photos":a._type})+"?url="+encodeURIComponent(b)},containsVideos:a._type!=="images"?!0:!1};twttr.isT1&&twttr.aug(e,twttr.components.Media.dashboardThumbnailOptions),this.thumbnailViewer=new twttr.components.ThumbnailViewer(this._urls,e),this.thumbnailViewer.renderWithIndex(0),this.thumbnailViewer.bind("nextPage prevPage",function(b,c){var d=a._type=="images"?"photos":a._type;trackClient({section:"dashboard",component:d+"_search_facets",action:"page"},{event_info:d,query:a.options.query,page_or_cursor:c})}),this.thumbnailViewer.bind("failedToLoad",function(c,d){var e=$.inArray(d,a._urls);e>-1&&a._urls.splice(e,1),a._urls.length<=b&&a.hideViewAll()}),this.thumbnailViewer.bind("allFailed",function(){a.trigger("failed")}),this.$find(".js-media-images").replaceWith(this.thumbnailViewer.$node)}this.afterRender(),this.hasRendered()},hideViewAll:function(){this.$find(".view-all-link").remove()},afterRender:function(){},viewTemplate:twttr.views.FacetMedia});a(c)})}),provide("components/media/facets/Images",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Images").subclassOf(twttr.components.media.facets.Media).initializer(function(){var a=this;this.title=_("Top images"),this._type="images",this._superInitializer.apply(this,arguments),this.view_all_href=twttr.router.searchFacetsGridPath({query:a.options.query,mode:"photos"}),this.view_slideshow_href=twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:"photos"}),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"photos_search_facets",action:"view_all"},{query:a.options.query,event_info:"photos"}),scribble("facets_view_all_click",{mode:"images",query:a.options.query,userId:twttr.currentUser?twttr.currentUser.id:null})}),this.$node.delegate(".media-thumbnail","click",function(b){trackClient({section:"dashboard",component:"photos_search_facets",action:"click"},{query:a.options.query,event_info:"photos",url:$(this).attr("data-url")})}),twttr.SearchAPI.getImageFacets(this.options.query,{experimentId:this.options.expId,count:100,success:function(b){var c=$.map(b,function(a){return a.url});a.dataReady(c,!1)}})}).methods({scribeComponentName:"photos_search_facets"}).deciderKey("phoenix_facets_images");a(c)})}),provide("components/media/facets/Videos",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Videos").subclassOf(twttr.components.media.facets.Media).initializer(function(){var a=this;this.itemWidth=112,this.itemDisplayWidth=114,this.title=_("Top videos"),this._type="videos",this._superInitializer.apply(this,arguments),this.view_all_href=twttr.router.searchFacetsGridPath({query:a.options.query,mode:"videos"}),this.view_slideshow_href=twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:"videos"}),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"videos_search_facets",action:"view_all"},{query:a.options.query,event_info:"videos"})}),this.$node.delegate(".media-thumbnail","click",function(b){trackClient({section:"dashboard",component:"videos_search_facets",action:"click"},{query:a.options.query,event_info:"videos",url:$(this).attr("data-url")})}),twttr.SearchAPI.getVideoFacets(this.options.query,{experimentId:this.options.expId,count:100,success:function(b){var c=$.map(b,function(a){return a.url});a.dataReady(c,!1)}})}).methods({scribeComponentName:"videos_search_facets"}).deciderKey("phoenix_facets_videos");a(c)})}),provide("components/ThumbnailViewer",function(a){using("constants").as(function(b){var c=twttr.klass("twttr.components.ThumbnailViewer").subclassOf(twttr.components.Base).initializer(function(a,b,c){b?(this.imageSize=b.imageSize||this.imageSize,this.cacheSize=b.cacheSize||this.cacheSize,this.itemWidth=b.itemWidth||60,this.itemHeight=b.itemHeight||60,this.itemDisplayWidth=b.itemDisplayWidth||this.itemWidth,this.itemDisplayHeight=b.itemDisplayHeight||this.itemHeight,this.containsVideos=b.containsVideos||!1,this.width=b.width||304,this.viewClass=b.viewClass||twttr.views.ThumbnailViewer,this.thumbnailViewClass=b.thumbnailViewClass||twttr.views.Thumbnail,this.scribbler=b.scribbler||twttr.Scribbler.clientEvent,this.noRender=b.noRender,this.atEnd=!1,this.firstVisibleIndex=0,twttr.is.def(b.fadeOutNav)?this.fadeOutNav=b.fadeOutNav:this.fadeOutNav=!0,this.generateItemHref=b.generateItemHref||function(a){return a}):this.scribbler=twttr.Scribbler.clientEvent,this.originalCount=a.length,this.urls=a,this.embeddedMedia=c,(new this.viewClass).render(this.$node,"append"),this.thumbSetup(),this._registerEventHandlers(),this.updatePageNavigation()}).methods({animateTo:function(a){a<0&&(a=0);var b=this.getFullyVisibleThumbsPerPage();this.firstVisibleIndex=a-a%b;var c=this.determineLeftPosition(a,b),d=Modernizr.csstransitions?"animateWithCss":"animate";twttr.isRTL?this.$thumbs[d]({right:-c},400,"swing"):this.$thumbs[d]({left:-c},400,"swing"),this.loadSurroundingImages(a,b),this.updatePageNavigation()},determineLeftPosition:function(a,b){var c=this.firstVisibleIndex*this.itemDisplayWidth,d=this.getThumbsWidth(),e=a*this.itemDisplayWidth,f=this.getThumbsVisibleWidth(),g=c+f-d;if(g>=0&&this.firstVisibleIndex>=b)c-=g,this.atEnd=!0;else{var i=d-e;this.atEnd===!0&&i<f?(c-=g,this.atEnd=!0,this.firstVisibleIndex=this.urls.length-b):this.atEnd=!1}return c},loadNextImages:function(a,b){if(this.noRender)return;this.$thumbs.children().slice(a,b).trigger("loadImage")},loadSurroundingImages:function(a,b){var c=a-b;c<0&&(c=0),this.loadNextImages(c,a+b*2)},thumbSetup:function(){this.$thumbs=this.$find(".js-thumbnail-viewer-images"),this.$container=this.$find(".js-thumbnail-viewer-container"),this.$thumbs.width(this.getThumbsWidth()),this.generateThumbs(this.urls)},getThumbsWidth:function(){return this.urls.length*this.itemDisplayWidth},getThumbsVisibleWidth:function(){return this.$container.width()||this.width},getThumbsPerPage:function(){return Math.ceil(this.getThumbsVisibleWidth()/this.itemDisplayWidth)},getFullyVisibleThumbsPerPage:function(){var a=this.getThumbsVisibleWidth()/this.itemDisplayWidth;return a-Math.floor(a)>.95?Math.ceil(a):Math.floor(a)},renderWithIndex:function(a){a=this.resetIndex(a),this.animateTo(a)},removeUrl:function(a){var b=$.inArray(a,this.urls);b!==-1&&(this.urls.splice(b,1),this.trigger("failedToLoad",a),this.updatePageNavigation()),this.urls.length==0&&this.trigger("allFailed")},selectByUrl:function(a){var b=$.inArray(a,this.urls);return b==-1?!1:(this.renderWithIndex(b),this._select(this.getThumbnailByUrl(a)),!0)},selectByIndex:function(a){a=this.resetIndex(a),this.renderWithIndex(a);var b=this.$thumbs.find(".media-thumbnail");this._select($(b[a]))},resetIndex:function(a){return a>this.urls.length?0:a},getThumbnailByUrl:function(a){return this.$thumbs.find(".media-thumbnail[data-url='"+a+"']").first()},generateThumbs:function(a){var c=this;if(a.length===0)return;var d=b.constants.imageSizes,e=$(),f={width:this.itemWidth,height:this.itemHeight,dimension:Math.max(this.itemWidth,this.itemHeight),size:this.itemWidth<80&&this.itemHeight<80?d.small:d.medium,scalingMode:"trim",delayLoading:!0,thumbnailViewClass:this.thumbnailViewClass,componentName:this._namespace.split(".").pop()};this.embeddedMedia?e=twttr.images.renderProviderMedia(this.embeddedMedia,f):e=twttr.images.renderMediaUrls(a,f);if(e.length){var g=this.getFullyVisibleThumbsPerPage(),i=0,j=0,k=g*2,l=k;function m(){i+j===l&&j<=g&&(c.loadNextImages(j,j+k),l+=k)}e.addClass("thumbnail-image-wrapper").bind("failedToResolve failedToLoad",function(a,b){var d=$(this).attr("data-url");twttr.images.scribeImageFailure(c.scribbler,"photos_thumbnails",d),c.removeUrl(d),$(this).remove(),i++,m()}).bind("loaded",function(){twttr.images.animateImageFadeIn($(this).find("img"),500),j++,m()}),e.append('<div class="thumbnail-active-border"><div class="thumbnail-active-border-inner"></div></div>'),twttr.isT1||e.append('<div class="media-play-button"></div>'),this.containsVideos&&e.addClass("video"),e.each(function(){var a=$(this);a.attr("href",c.generateItemHref(a.attr("data-url")))}),this.$thumbs.append(e)}},updateWidth:function(a){this.width=a||this.$node.width(),this.animateTo(this.getActiveThumbnail().index()),this.updatePageNavigation()},prevPage:function(){var a=this.getFullyVisibleThumbsPerPage();this.animateTo(this.firstVisibleIndex-a),this.trigger("prevPage",Math.round(this.firstVisibleIndex/a)+1)},nextPage:function(){var a=this.getFullyVisibleThumbsPerPage();this.animateTo(this.firstVisibleIndex+a),this.trigger("nextPage",Math.round(this.firstVisibleIndex/a)+1)},updatePageNavigation:function(){var a=this.$find(".thumbnail-viewer-prev");this.firstVisibleIndex===0?a.addClass("disabled"):a.removeClass("disabled");var b=this.$find(".thumbnail-viewer-next");this.atEnd===!0?b.addClass("disabled"):b.removeClass("disabled");var c=this.$find(".thumbnail-viewer-nav");this.getFullyVisibleThumbsPerPage()>=this.urls.length?c.hide():c.css("display","")},deselect:function(){this.$node.find(".media-thumbnail").removeClass("media-thumbnail-active")},_select:function(a){if(a.length===0)return;this.deselect(),a.addClass("media-thumbnail-active"),this.selectedUrl=a.attr("data-url"),this.trigger("select",[{url:this.selectedUrl,index:a.prevAll().length+1,hasPrev:a.prev().length>0,hasNext:a.next().length>0}])},prev:function(){this.shiftOne("prev")},next:function(){this.shiftOne("next")},shiftOne:function(a){var b=this.getActiveThumbnail()[a]();b.length>0&&(this._select(b),this.trigger(a,[b.prevAll().length+1]),twttr.router.routeTo(b.attr("href")))},getActiveThumbnail:function(){return this.$find(".media-thumbnail-active")},_registerEventHandlers:function(){var a=this;this.$node.delegate(".media-thumbnail","click",function(b){a._select($(this))}),this.$node.delegate(".thumbnail-viewer-prev","click",function(b){a.prevPage()}),this.$node.delegate(".thumbnail-viewer-next","click",function(b){a.nextPage()});if(this.fadeOutNav){this.$nav=this.$find(".thumbnail-viewer-nav").css("opacity",0);var b=Modernizr.csstransitions?"animateWithCss":"animate";this.$node.hover(function(){a.fadeTimer&&clearTimeout(a.fadeTimer),a.$nav[b]({opacity:1},400,"swing")},function(){a.fadeTimer=window.setTimeout(function(){a.$nav[b]({opacity:0},400,"swing")},200)})}}});a(c)})}),provide("components/TheGrid",function(a){using("constants").as(function(b){twttr.klass("twttr.components.TheGrid").subclassOf(twttr.components.Base).initializer(function(a,b){(new twttr.views.TheGrid).render(this.$node,"append"),this.$grid=this.$find(".the-grid"),this.media=[],this.totalCount=0,this.imageWidth=a.imageWidth||150,this.imageHeight=a.imageHeight||150,this.margin=a.margin||10,this.chunksize=a.chunksize||100,this.gridCols=6,this.isEvent=a.isEvent||!1,this.generateItemHref=a.generateItemHref||$.noop,this.provider=a.provider,this.query=a.query,this.mode=a.mode,this.type=a.type,this.screenName=a.screenName,this.filter=a.filter,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.provider.fetch({count:100,score:!0,offset:0,mode:this.mode,query:this.query,is_event:this.isEvent,filter:this.filter,success:twttr.bind(this,this._loadMedia),error:twttr.bind(this,this.renderNoResults)}),this.setCols(b),this._registerEventHandlers()}).methods({setCols:function(a){var b=this.mode==="videos"?this._getWidthVideos(a):this._getWidthPhotos(a);this.$grid.width(b)},_getWidthPhotos:function(a){var b=960;return a>=640&&a<800?b=640:a>=800&&a<960&&(b=800),b},_getWidthVideos:function(a){var b=840;return a>=630&&a<840&&(b=630),b},decrementLoaded:function(){this.totalCount--,this.totalCount==0&&this.trigger("hideLoading")},_doLoad:function(a){var c=this,d=a.length,e=$(),f={width:this.imageWidth,height:this.imageHeight,size:b.constants.imageSizes.medium,scalingMode:"trim",componentName:this._namespace.split(".").pop()};a&&(e=twttr.images.renderProviderMedia(a,f)),e.length&&(e.addClass("grid-square").bind("failedToResolve failedToLoad",function(a,b){var e=$(this).attr("data-url");twttr.images.scribeImageFailure(c.scribbler,"photos",e),$(this).remove(),d--,d==0&&c.renderAndResolve(),c.decrementLoaded()}),this.mode=="videos"&&e.addClass("video").append('<div class="media-play-button"></div>'),e.each(function(){var a=$(this);a.attr("href",c.generateItemHref(a.attr("data-url")))}),e.bind("loaded",function(){d--,d==0&&c.renderAndResolve(),c.decrementLoaded(),twttr.images.animateImageFadeIn($(this).find("img"))}),this.mode=="videos"&&e.addClass("video").append('<div class="media-play-button"></div>'),this.$find(".the-grid").prepend(e))},renderAndResolve:function(){var a=this,b=this.media.splice(0,this.chunksize);b.length>0?this._doLoad(b):this.trigger("hideLoading")},_loadMedia:function(a){this.media=a,this.totalCount=this.media.length,this.$find(".the-grid").empty(),this.media.length>0?this.renderAndResolve():this.renderNoResults()},renderNoResults:function(){(new twttr.views.MediaGalleryNoResults({is_search:this.type==="search",is_usermedia:this.type==="userMedia",query:this.query,mode_photos:this.mode==="photos",mode_videos:this.mode==="videos",screen_name:this.screenName})).render(this.$find(".the-grid"),"append"),this.trigger("hideLoading")},_registerEventHandlers:function(){var a=this;setTimeout(function(){a.trigger("hideLoading")},1e4)}}),a(twttr.components.TheGrid)})}),provide("components/MediaGalleryControls",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.MediaGalleryControls").subclassOf(twttr.components.Base).initializer(function(a){this._options=a||{},this._eventId=a.eventId||!1,this._isEvent=!!this._eventId,this._type=a.type||"search",this._view=a.view||"grid",this._mode=a.mode||"photos",this._query=a.query||"",this.screenName=a.screenName,this._render(),this._registerEvents()}).methods({_registerEvents:function(){var a=this;this.$node.delegate(".media-gallery-back-nav","click",function(b){a.trigger("close")}),this.$detailView=this.$find(".toggle-button.detailview"),this.$gridView=this.$find(".toggle-button.gridview"),this.$detailView.bind("click",function(b){a.setMode("detail")}),this.$gridView.bind("click",function(b){a.setMode("grid")})},setMode:function(a){if(this._view==a)return;a=="grid"?(this.$gridView.addClass("selected"),this.$detailView.removeClass("selected"),this.trigger("gridViewSelected")):(this.$gridView.removeClass("selected"),this.$detailView.addClass("selected"),this.trigger("detailViewSelected")),this._view=a},_render:function(){(new twttr.views.MediaGalleryControls({is_search:this._type==="search",is_usermedia:this._type==="userMedia",screen_name:this.screenName,is_grid_view:this._view==="grid",is_detail_view:this._view==="detail",mode_photos:this._mode==="photos",mode_videos:this._mode==="videos",disable_grid:twttr.decider.isAvailable("disable_gallery_grid"),disable_thumbs:twttr.decider.isAvailable("disable_gallery_thumbs"),back_text:this._isEvent?_("Back to #{{event}}",{event:this._query}):_("Back to search results"),query:this._query})).render(this.$node,"append")}}),a(twttr.components.MediaGalleryControls)})}),provide("components/MediaSlideshow",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.components.MediaSlideshow").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.tweetFlagging,twttr.mixins.profilePopupActionable).initializer(function(a){var b=this;a=a||{},this._media=[],this.options=a,this.width=a.width||530,this.height=a.height||530,this.thumbContainerWidth=a.thumbContainerWidth||494,this.thumbHeight=a.thumbHeight||48,this.thumbWidth=a.thumbWidth||48,this.thumbDisplayWidth=a.thumbDisplayWidth||50,this.thumbDisplayHeight=a.thumbDisplayHeight||48,this.type=a.type,this.screenName=a.screenName,this.options.mode=this.options.mode||"photos",this.showFirstOnFail=this.options.showFirstOnFail||!1,this.arrowOutOpacity=twttr.decider.isAvailable("disable_gallery_thumbs")?.6:0,this.isEvent=a.isEvent||!1,this.generateItemHref=a.generateItemHref||$.noop,this.provider=a.provider,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.scribeComponentName=this.options.mode+"_tweet",this.render(),this.registerTweetActionEvents(),this.provider.fetch({count:100,score:!0,mode:this.options.mode,query:this.options.query,is_event:this.isEvent,filter:a.filter,success:function(a){b.addMedia(a),b.addMediaComplete()},error:twttr.bind(this,this.renderNoResults)})}).methods(twttr.EventProvider).methods({render:function(){(new twttr.views.MediaSlideshow).render(this.$node,"append"),this.$thumbnails=this.$find(".media-slideshow-thumbnails"),this.$bigPicture=this.$find(".media-slideshow-picture"),this.$bigPictureWrapper=this.$find(".media-slideshow-pictures"),this.$mediaContainer=this.$find(".media-slideshow-media-container"),this.$prevButton=this.$find(".media-control-button.prev"),this.$nextButton=this.$find(".media-control-button.next"),this.$nextButton=this.$find(".media-control-button.next"),this.$flagcontainer=$('<div class="flag-container"/>'),this.$bigPicture.css({height:this.height,width:this.width}),this._registerEventHandlers()},renderNoResults:function(){this.$node.empty(),(new twttr.views.MediaGalleryNoResults({is_search:this.type==="search",is_usermedia:this.type==="userMedia",query:this.options.query,mode_photos:this.options.mode==="photos",mode_videos:this.options.mode==="videos",screen_name:this.screenName})).render(this.$node,"append"),this.trigger("hideLoading")},addMediaComplete:function(){var a=this;if(this._media.length>1){var b={itemWidth:this.thumbWidth,itemHeight:this.thumbHeight,itemDisplayWidth:this.thumbDisplayWidth,itemDisplayHeight:this.thumbDisplayHeight,width:this.thumbContainerWidth,generateItemHref:this.generateItemHref,noRender:twttr.decider.isAvailable("disable_gallery_thumbs")};this.options.mode=="videos"&&(b.containsVideos=!0),this._thumbnailViewer=new twttr.components.ThumbnailViewer(this._mediaUrls(),b,this._media),this._thumbnailViewer.$node.appendTo(this.$thumbnails),twttr.decider.isAvailable("disable_gallery_thumbs")&&this._thumbnailViewer.$node.hide(),this._thumbnailViewer.bind("select",function(b,c){a.showPicture(a._findMedia(c.url,c.index),c.hasPrev,c.hasNext,c.index)}),this._thumbnailViewer.bind("failedToLoad",function(b,c){a.removeUrl(c)}),this._thumbnailViewer.bind("next prev",function(b,c){a.scribbler.scribe({component:a.options.mode,action:"page"},{cursor_or_page:c})}),this._thumbnailViewer.bind("nextPage prevPage",function(b,c){a.scribbler.scribe({component:a.options.mode+"_thumbnails",action:"page"},{cursor_or_page:c})}),this.selectUrl(this.options.url)}else this._media.length==1?this.showPicture(a._media[0],!1,!1,1):this.renderNoResults()},_registerEventHandlers:function(){var a=this;this.$nextButton.bind("click",twttr.bind(this,this.showNext)),this.$prevButton.bind("click",twttr.bind(this,this.showPrev)),this.$flagcontainer.delegate(".flaggable","click",function(b){a.flagLinkClicked(b,a.tweet)}),this.$nav=this.$find(".media-control-button").css("opacity",this.arrowOutOpacity);var b=Modernizr.csstransitions?"animateWithCss":"animate";this.$bigPictureWrapper.hover(function(){a.fadeTimer&&clearTimeout(a.fadeTimer),a.$nav[b]({opacity:.6},400,"swing")},function(){a.fadeTimer=window.setTimeout(function(){a.$nav[b]({opacity:this.arrowOutOpacity},400,"swing")},2e3)}),this.$nav=this.$find(".media-control-button").css("opacity",this.arrowOutOpacity),this.$bigPictureWrapper.mouseenter(twttr.bind(this,this._attachMouseMove)),this.$bigPictureWrapper.mouseleave(twttr.bind(this,this._detachMouseMove))},_mouseMoveHandler:function(){var a=this;clearTimeout(this.fadeOutTimer),this.fadeOutTimer=setTimeout(twttr.bind(this,this._fadeOutArrows),b.constants.slideshow.fadeOutArrowTimeout);if(this.fadeInTimer)return;this.fadeInTimer=setTimeout(function(){a._fadeInArrows(.6)},b.constants.slideshow.fadeInArrowTimeout)},_attachMouseMove:function(){var a=this;this.$bigPictureWrapper.bind("mousemove",twttr.bind(this,this._mouseMoveHandler)),a.fadeInTimer=setTimeout(function(){a._fadeInArrows(.6)},b.constants.slideshow.fadeInArrowTimeout)},_detachMouseMove:function(){this.$bigPictureWrapper.unbind("mousemove"),this.fadeInTimer&&(clearTimeout(this.fadeInTimer),this.fadeInTimer=undefined),this._fadeOutArrows()},_fadeInArrows:function(a){var c=Modernizr.csstransitions?"animateWithCss":"animate";this.$nav[c]({opacity:a},b.constants.slideshow.fadeAnimationTime,"swing"),clearTimeout(this.fadeInTimer),this.fadeInTimer=undefined},_fadeOutArrows:function(){var a=Modernizr.csstransitions?"animateWithCss":"animate";this.$nav[a]({opacity:this.arrowOutOpacity},b.constants.slideshow.fadeAnimationTime,"swing")},addMedia:function(a){this._media=this._media.concat(a)},_findMedia:function(a,b){var c=this._media[b-1];if(c&&c.url==a)return c;var d=this._mediaUrls(),e=$.inArray(a,d);return e>=0?this._media[e]:!1},_mediaUrls:function(){return twttr.map(this._media,function(a){return a.url})},selectUrl:function(a){a=a||this._mediaUrls()[0];var b=this._thumbnailViewer.selectByUrl(a);b||(this.showFirstOnFail?this._thumbnailViewer.selectByIndex(0):(this._showNotFound(a),this._thumbnailViewer.deselect(),this._thumbnailViewer.animateTo(0),this._updateArrows(!1,!1)))},removeUrl:function(a){for(var b=0;b<this._media.length;b++)if(this._media[b].url===a){this._media.splice(b,1);break}this.currentUrl===a&&(b==0&&this._mediaUrls().length?this._thumbnailViewer.selectByUrl(this._mediaUrls()[0]):this._showNotFound())},_showNotFound:function(a){this._resetMediaContainer(),(new twttr.views.MediaSlideshowNotFound({})).render(this.$mediaContainer,"append"),this.$mediaContainer.addClass("not-found"),this.trigger("hideLoading")},_resetMediaContainer:function(){return this._removeTweet(),this.$flagcontainer.detach(),this.$mediaContainer.css({top:null}).empty()},_updateArrows:function(a,b){a?this.$prevButton.addClass("enabled"):this.$prevButton.removeClass("enabled"),b?this.$nextButton.addClass("enabled"):this.$nextButton.removeClass("enabled")},showPicture:function(a,b,c,d){if(a&&this.currentUrl!=a.url){this.currentUrl=a.url,this.trigger("showSlideshowLoading"),this.$mediaContainer.removeClass("not-found"),this.options.mode=="photos"?this.renderPicture():this.renderVideo();if(this.tweetFlaggable(a.tweet)){this.$flagcontainer.html("<a href='#' class='flaggable'>"+_("Flag this media")+"</a>");var e=this.$flagcontainer.find(".flaggable");a.tweetId&&e.attr("tweet-id",a.tweetId)}}this._renderMedia(a),this._updateArrows(b,c),this.scribbler.scribe({component:this.options.mode+"_slide",action:"impression"},{url:a.url,cursor_or_page:d})},_removeTweet:function(){this.$find(".media-slideshow-tweet").empty().addClass("loading")},_renderMedia:function(a){var b=this;a.tweet&&a.tweet.entities?this._renderTweet(a.tweet,a.url):a.tweetId&&(this.tweetId=a.tweetId,twttr.API.Status.find(a.tweetId,{success:function(c,d){b._renderTweet(c,a.url)},error:function(){b.trigger("hideLoading")}}))},_renderTweet:function(a,b){this.tweet=a,this._removeTweet(),twttr.isT1?(a.attributes.is_slideshow=!0,(new twttr.views.SimpleTweet(a)).render(this.$find(".media-slideshow-tweet"),"append")):(new twttr.views.SlideshowTweet(a)).render(this.$find(".media-slideshow-tweet"),"append"),this.$find(".media-slideshow-tweet").removeClass("loading");var c=this,d=twttr.media.types.Twimg.matchers.twimg,e=twttr.media.types.Twimg.matchers.media;if(b&&(b.match(d)||b.match(e))&&a&&a.entities&&a.entities.media){var f=a.entities.media.length,g=b.split("/").pop().split(".")[0];for(var i=0;i<f;i++){var j=a.entities.media[i];if(j.display_url.indexOf(g)>=0||j.media_url.indexOf(g)>=0){c.$imageDiv.attr("href",j.url);break}}}this.scribbler.scribe({component:this.options.mode+"_tweet",action:"impression"},{url:a.url,item_ids:[a.id]}),this.trigger("hideTweetLoading")},renderVideo:function(){var a=this,c=twttr.media.matchInstance(this.currentUrl);this._resetMediaContainer();if(!c){this._showNotFound(this.currentUrl);return}c.process(function(){c.render(a.$mediaContainer),setTimeout(function(){a.trigger("mediaRendered"),a.trigger("hideMediaLoading"),a._renderAttribution(a.currentUrl)},1)},{maxwidth:b.constants.slideshow.videoMaxWidth})},renderPicture:function(){var a=this,c;this._resetMediaContainer();var d=twttr.filter(this._media,function(b){if(a.currentUrl==b.url)return b});d&&(d=[d[0]]),this.$imageDiv=twttr.images.renderProviderMedia(d,{width:this.width,height:this.height,size:b.constants.imageSizes.large,scalingMode:"fit",divMode:"snap",componentName:this._namespace.split(".").pop()}).bind("failedToResolve failedToLoad",function(b,c){var d=$(this).attr("data-url");twttr.images.scribeImageFailure(a.scribbler,"photos_slide",d),$(this).remove(),a._showNotFound(a.currentUrl)}).bind("loaded",function(){a.trigger("mediaRendered"),a.trigger("hideMediaLoading"),a._renderAttribution(a.currentUrl),a.renderTwimgAttribution()}).attr("target","_blank"),this.$mediaContainer.append(this.$imageDiv)},_renderAttribution:function(a){var b=twttr.media.matchInstance(a);if(b){var c=$("<div class='media-attribution-and-flag'/>"),d=$(b.attribution()).appendTo(c);if(this.tweetFlaggable(this.tweet)){var e=$(twttr.at(b._namespace).flagActionTemplate);this.$flagcontainer.html(e.html());var f=this.$flagcontainer.find(".flaggable");this.tweetId&&f.attr("tweet-id",this.tweetId),this.$flagcontainer.appendTo(c)}c.appendTo(this.$mediaContainer)}},renderTwimgAttribution:function(){var a=this,b=this.currentUrl.match(twttr.media.types.CopiedTwimg.matchers.media);if(b&&b[1]){var c=b[1];twttr.API.Status.find(c,function(b){var c=b.user.screenName,d=new twttr.views.CopiedTwimgAttribution({screen_name:c,time_ago:twttr.helpers.timeAgo(twttr.helpers.parseDateString(b.createdAt),!0)});a.$imageDiv.append(d.html()).find(".attribution-wrapper").css("display","none").fadeIn("fast"),a.$imageDiv.find(".user-profile-link").click(function(){return twttr.router.routeTo(twttr.router.profilePath({screen_name:c})),!1})})}},resizePicture:function(h,a){var b,c;this.$bigPicture.css({height:h,width:a});if(this.options.mode=="photos")twttr.images.resizeImageInDiv(this.$imageDiv,{width:a,height:h,size:"large",scalingMode:"fit",divMode:"snap"}),b=this.$imageDiv.find("img").width(),c=this._offset(h,this.$imageDiv.height());else{var d=this.$mediaContainer.children().first();b=d.width(),c=this._offset(h,d[0].height)}this.$mediaContainer.css({width:b,top:c})},_offset:function(a,b){return Math.max(0,Math.floor((a-b)/2))},showNext:function(){this._thumbnailViewer&&this._thumbnailViewer.next()},showPrev:function(){this._thumbnailViewer&&this._thumbnailViewer.prev()}}),a(twttr.components.MediaSlideshow)})}),provide("components/SearchFacets",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.SearchFacets").subclassOf(twttr.components.Base).initializer(function(a,b){this.query=a,this.shouldShowBlockMessage=!0,this.darkMode=!1;if(twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_facets_dark")||twttr.decider.isAvailable("phoenix_facets"))||!twttr.loggedIn&&twttr.decider.isAvailable("phoenix_facets_logged_out"))twttr.loggedIn&&!twttr.decider.isAvailable("phoenix_facets")&&twttr.decider.isAvailable("phoenix_facets_dark")&&(this.darkMode=!0),this.renderFacets()}).methods({renderFacets:function(){var a=this,b=twttr.Router.getCurrentQueryStringParams().experimentId;if(!this.darkMode){this.facetsImages=new twttr.components.media.facets.Images({query:this.query,expId:b}),this.facetsVideos=new twttr.components.media.facets.Videos({query:this.query,expId:b}),this.registerEventTracker(),this.facetsImages.bind("urlsLoaded",function(b,c){if(!c||c.length==0){a._scribeResults("photos",c);return}a.facetsImages.$node.appendTo(a.$node),a.shouldShowBlockMessage?a.showBlockedMessage():a.facetsImages.render(),a._scribeResults("photos",c)}),this.facetsImages.bind("failed",function(){a.facetsImages.$node.hide(),a._scribeResults("photos")}),this.facetsVideos.bind("urlsLoaded",function(b,c){if(!c||c.length==0){a._scribeResults("videos",c);return}a.facetsVideos.$node.appendTo(a.$node),a.shouldShowBlockMessage?a.showBlockedMessage():a.facetsVideos.render(),a._scribeResults("videos",c)}),this.facetsVideos.bind("failed",function(){a._scribeResults("videos"),a.facetsVideos.$node.hide()});if(twttr.loggedIn)a.shouldShowBlockMessage=!1,a.hideBlockedMessage();else{var c=twttr.media.getViewMediaCookie();c?(a.renderFacetsMedia(),a.shouldShowBlockMessage=!1):(a.shouldShowBlockMessage=!0,a.renderBlockedMessage())}}},renderFacetsMedia:function(){if(this.darkMode)return;this.facetsImages.render(),this.facetsVideos.render()},showBlockedMessage:function(){this.$notDisplayed||this.renderBlockedMessage(),this.$notDisplayed.show()},hideBlockedMessage:function(){this.$notDisplayed&&this.$notDisplayed.hide()},_scribeResults:function(a,b){var c=b&&b.length?"results":"no_results",d=a+"_search_facets";b=b||[],trackClient({section:"dashboard",component:d,action:c},{item_names:b.slice(0,4),item_count:b.length,event_info:a,query:this.query})},registerEventTracker:function(){function e(e,f){e?b=!0:c=!0,d=d||f&&f.length,allLoaded=b&&c,(b||c)&&a.trigger("urlsLoaded",[!!d,!!allLoaded])}var a=this,b=!1,c=!1,d=!1;this.facetsImages.one("urlsLoaded failed",function(a,b){e(!0,b)}),this.facetsVideos.one("urlsLoaded failed",function(a,b){e(!1,b)})},renderBlockedMessage:function(){var a=this;if(this.$notDisplayed||this.darkMode)return;(new twttr.views.FacetsMediaNotDisplayed).render(this.$node),this.$notDisplayed=this.$node.find(".facets-media-not-displayed"),this.$notDisplayed.hide();var b=twttr.bind(this,function(){this.renderFacetsMedia(),this.$notDisplayed.hide(),twttr.loggedIn||twttr.media.setViewMediaCookie()});this.$node.delegate(".display-this-media","click",b)}});a(c)})}),provide("components/FollowerRequestLink",function(a){using("_","components/Base","multiGlobals/more_views").as(function(b,_){var c=twttr.klass("twttr.components.FollowerRequestLink").subclassOf(b.components.Base).initializer(function(){twttr.currentUser&&twttr.currentUser["protected"]&&twttr.currentUser.friends.pending({success:twttr.bind(this,function(a){this.pendingFriendRequests=a,this.renderRequestButton()}),error:function(a){}}),this.noSpacer=!0,this.hasRendered()}).methods({renderRequestButton:function(){if(!this.pendingFriendRequests||this.pendingFriendRequests.length===0){this.destroy();return}var a;this.pendingFriendRequests.length===1?a=_("{{num}} new follower request",{num:this.pendingFriendRequests.length}):a=_("{{num}} new follower requests",{num:this.pendingFriendRequests.length}),(new twttr.views.DashboardFollowerRequestLink({button_label:a,screen_name:twttr.currentUser.screenName})).render(this.$node,"append")}});twttr.isT1&&c.setBaseView(twttr.views.Module),a(c)})}),provide("components/WebPersonalizationSettings",function(a){using("_","components/Base","mixins/userActionable","mixins/profilePopupActionable").as(function(b,_){var c=twttr.klass("twttr.components.WebPersonalizationSettings").subclassOf(b.components.Base).mixin(b.mixins.userActionable,b.mixins.profilePopupActionable).initializer(function(){var a=this;twttr.inEU||twttr.doNotTrack?(a._render({in_eu:twttr.inEU,do_not_track:!0}),a.trigger("disallow")):twttr.loggedIn?(a._hasAllowed=!1,a._render({loading:!0}),twttr.currentUser.personalizationSettings({success:function(b){!b.cookie_personalization_prompt_displayed||!b.use_cookie_personalization?a._render({show_results:!1}):(a._render({show_results:!0,results_loading:!0}),a._displayResults())},error:function(){twttr.showError(_("We can&#8217;t show you tailored suggestions at this time. Please try again later.")),a.trigger("disallow")}})):a._render({show_results:!1}),this.registerUserActionEvents()}).methods({_render:function(a){a=a||{},a.users&&(a.results=new twttr.views.WebPersonalizationResults(a.users)),(new twttr.views.WebPersonalizationSettings(a)).render(this.$node.empty())},_allow:function(){var a=this;a._render({show_results:!0,results_loading:!0}),a._hasAllowed=!0,this._updateSettings(!0,function(b){b?(twttr.showError(_("We&#8217;re not able to set your preference at this time. Please try again later.")),a._render({show_results:!1})):a._displayResults()})},_disallow:function(){var a=this;twttr.loggedIn?twttr.showError(_("Thanks. We&#8217;ve set your preference. This will go into effect on other browsers once you log into Twitter on that browser.")):twttr.showMessage(_("Thanks. We&#8217;ve set your preference.")),a._render({show_results:!1}),this._updateSettings(!1,function(b){b?(twttr.showError(_("We&#8217;re not able to set your preference at this time. Please try again later.")),a._render({show_results:a._hasAllowed,results_loading:!a._users,users:a._users})):a.trigger("disallow")})},_displayResults:function(){var a=this;this._render({show_results:!0,results_loading:!0}),twttr.API.User.recommendedUsers2({personalized:!0,force_bq:!0,limit:60,success:function(b,c){var d=b.map(function(a){return a.user});a._users=d,a._render({users:d,show_results:!0}),trackClient({component:"user_recommendations",element:"initial",action:"results"},{item_count:d.length()||0}),d.length()||trackClient({component:"user_recommendations",element:"initial",action:"no_results"},{item_count:0})},error:function(){twttr.showError(_("We can&#8217;t show you tailored suggestions at this time. Please try again later."))}})},_updateSettings:function(a,b){twttr.loggedIn?twttr.currentUser.updatePersonalizationSettings({use_cookie_personalization:a,cookie_personalization_prompt_displayed:!0},{error:function(){b("error :(")},complete:function(){b()}}):a?b():$.ajax({type:"POST",dataType:"json",url:"/account/turn_off_cookie_personalization.json",data:{authenticity_token:twttr.API.getConfig().postAuthenticityToken},complete:function(){b()},error:function(){b("error :(")}})}}).click({".js-web-personalization-allow":function(a,b){this._allow(),trackClient({element:"allow",action:"click"})},".js-web-personalization-disallow":function(a,b){this._disallow(),trackClient({element:"disallow",action:"click"})},".js-web-personalization-turnoff":function(a,b){this._disallow(),trackClient({element:"turnoff",action:"click"})},".js-web-personalization-signup .signup-btn":function(a,b){trackClient({section:"signup_callout",component:"form",action:"signup_click"})}});a(c)})}),provide("photo/turkey",function(a){using().as(function(b){twttr.provide("twttr.turkey",{tweetBoxId:1,imageMaxDim:2048,turkeyCallbacks:{},swfCallbacks:{},swfErrorCallbacks:{},swfPath:"/phoenix/flash/PhotoHelper.swf",swfPreloaded:!1,errorTypes:{tooLarge:"tooLarge",notImage:"notImage",ioError:"ioError",maxFiles:"maxFiles",dupe:"duplicate"},getTweetBoxId:function(){return twttr.turkey.preloadSwf(),"tweetbox_"+this.tweetBoxId++},getFileName:function(a){if(a.indexOf("/")==-1&&a.indexOf("\\")==-1)return a;var b=a.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/);return b[2]},validatePhoto:function(a){return/(.*)\.(jpg|jpeg|png|gif)/i.test(a)},getThumbnailOffsets:function(h,a,b){var c={};if(a==h)return{height:b,width:b,left:0,top:0};if(h<b||a<b)h<b&&a<b?(c.top=(b-h)/2,c.left=(b-a)/2):a>h?c.top=(b-h)/2:c.left=(b-a)/2;else if(a>h){var d=b/h*a;c={height:b,width:d,left:-(d-b)/2,top:0}}else if(h>a){var e=b/a*h;c={height:e,width:b,top:-(e-b)/2,left:0}}return c},hasFileReader:function(){try{return twttr.is.object(new FileReader)}catch(a){return!1}},resizeImage:function(a,b){var c=new FileReader;c.onerror=function(){b(!1)},c.onload=function(a){var c=new Image,d=document.createElement("canvas"),e=d.getContext("2d");c.onload=function(){if(c.width<twttr.turkey.imageMaxDim&&c.height<twttr.turkey.imageMaxDim){b(a.target.result.split(";base64,")[1]);return}var f,h;c.width>c.height?(f=twttr.turkey.imageMaxDim,h=c.height/c.width*twttr.turkey.imageMaxDim):(h=twttr.turkey.imageMaxDim,f=c.width/c.height*twttr.turkey.imageMaxDim),d.width=f,d.height=h,e.drawImage(c,0,0,f,h);var g=d.toDataURL("image/jpeg");b(g.split("data:image/jpeg;base64,")[1])},c.onerror=function(){b(!1)},c.src=a.target.result},c.readAsDataURL(a)},hasFlash:function(){try{return $.flash.available&&$.flash.hasVersion(10)}catch(a){return!1}},shouldUseFlash:function(){return!twttr.turkey.hasFileReader()&&twttr.turkey.hasFlash()&&twttr.decider.isAvailable("phoenix_turkey_flash")},tweetboxMode:function(){return twttr.turkey.hasFileReader()?"html5":twttr.turkey.shouldUseFlash()?"flash":"html4"},preloadSwf:function(){if(twttr.turkey.swfPreloaded||!twttr.turkey.shouldUseFlash())return;$node=twttr.turkey.loadSwf($("#flash-object-container"),0),setTimeout(function(){$node&&$node.remove()},1e3)},loadSwf:function(a,b){return a.flash({swf:twttr.turkey.swfPath,height:25,width:28,wmode:"transparent",AllowScriptAccess:"sameDomain",flashvars:{tweetBoxId:b}}),a.find("object")},shouldShowTurkeyPrompt:function(){return twttr.promptbird.getPromptByFormat(["modal"])},dismissShowTurkeyPrompt:function(a){var b={prompt_id:a},c={success:$.noop};twttr.API.Promptbird.dismissPrompt(b,c),delete twttr.promptbird.cache},showFirstTimeTurkey:function(){if(twttr.loggedIn){var a=this;using("boot/bootstrap_data",function(b){var c=a.shouldShowTurkeyPrompt();if(c&&c.prompt.format==="modal"&&c.prompt.template_name=="first_time_turkey"){a.dismissShowTurkeyPrompt(c.prompt.prompt_id);var d=600,e=new twttr.widget.Dialog({view:"FirstTimeTurkey",modal:!0,draggable:!1,css:{width:530},positioning:{top:twttr.$win.height()<=d?20:150}});e.$container.find(".button.ok-thanks").bind("click",function(a){a.preventDefault(),a.stopPropagation(),e.destroy()}),e.open()}})}}}),a(twttr.turkey)})}),provide("photo/photo_thumbnails",function(a){using("_").as(function(b,_){twttr.klass("twttr.turkey.PhotoThumbnails").subclassOf(twttr.components.Base).deciderKey("turkey").initializer(function(a,b,c,d){this.FILE_SIZE_LIMIT=3145728,this.TIMEOUT_BY_BYTES=10240,this.defaultTimeoutDelay=12e4,this.timeoutDelay=this.defaultTimeoutDelay,this.maxFiles=1,this.useIframe=!1,this.enabled=!0,this.files=[],this.$selectedFiles=b,this.$camera=c,this.$swf=this.$camera.find(".swf"),this.tweetBoxId=d,this.editor=a,this.$thumbsWrapper=$("<div/>").addClass("twitter-media-thumbs"),this.$thumbsWrapper.appendTo(this.editor.$container),this.thumbnailsMessage=_("Images will appear as links"),this.thumbnailMessage=_("Image will appear as a link"),this.$thumbnailMessage=$("<div/>").addClass("media-thumbnails-message"),this.$thumbnailMessage.appendTo(this.$thumbsWrapper),this.maxPhotosMessage=_("Maximum number of images reached."),this.addPhotoMessage=_("Add an image"),this.hasFileReader=twttr.turkey.hasFileReader(),this.shouldUseFlash=twttr.turkey.shouldUseFlash(),this.html4Mode=!this.hasFileReader&&!this.shouldUseFlash,this.$editorTextarea=this.editor.$container.find("textarea"),this.textareaPaddingBottom=this.$editorTextarea.css("padding-bottom"),this.createThumbnails(),this.createTipsy()}).methods(twttr.EventProvider).methods({animateShow:function(a){var b=this;this.html4Mode?(this.$editorTextarea.css("padding-bottom",a),this.editor.$container.addClass("has-thumbnails"),this.$camera.addClass("has-turkeys"),this.$thumbsWrapper.show()):(this.$camera.addClass("has-turkeys"),this.$editorTextarea.animate({paddingBottom:a},300,"linear",function(){b.editor.$container.addClass("has-thumbnails"),b.$thumbsWrapper.show()}))},animateHide:function(a,b){var c=this;this.editor.$container.removeClass("has-thumbnails").addClass("closing"),!this.html4Mode&&!b?(this.$camera.removeClass("has-turkeys"),this.$editorTextarea.animate({paddingBottom:a},200,"linear",function(){c.editor.$container.removeClass("has-thumbnails").removeClass("closing")})):(this.$editorTextarea.css("padding-bottom",a),this.$camera.removeClass("has-turkeys")),this.$thumbsWrapper.hide()},updateEmptyFeedback:function(){this.inst.$feedback.text()==""&&this.updateFeedback()},tweet:function(a,b){var c=this,d={};this.useIframe&&(d.iframe_callback="window.top.twttr.turkey.turkeyCallbacks."+this.tweetBoxId);switch(a){case"update":d.status=b[0],$.extend(d,b[1]);break;case"reply":d.status=b[1],d.in_reply_to_status_id=b[0],$.extend(d,b[2])}this.useIframe?this.tweetIframe(d):this.tweetAjax(d)},tweetAjax:function(a){var b=this;a["media_data[]"]=this.files[0].input.val(),a.timeout=$.noop;var c=a.error;a.error=function(a){c(a),b.scribeEvent("failure",{message:"serverError"})};var d=a.success;a.success=function(a){d(a,twttr.turkey.tweetboxMode())},twttr.API.Status.updateWithMedia(a.status,a)},tweetIframe:function(a){var b=this,c=setTimeout(function(){twttr.turkey.turkeyCallbacks[b.tweetBoxId]=$.noop,a.error({error:!0,response:{error:"Tweeting a photo timed out."}}),a.complete(),b.scribeEvent("failure",{message:"timeout",duration_ms:b.timeoutDelay})},this.timeoutDelay);twttr.turkey.turkeyCallbacks[this.tweetBoxId]=function(d){if(d.error){var e={error:!0,status:500,response:d,reason:"An error occured"};a.error(e),a.complete(),clearTimeout(c),b.scribeEvent("failure",{message:"serverError"})}else a.success(d,twttr.turkey.tweetboxMode()),a.complete(),clearTimeout(c)},this._submitTweetOptions(a)},_submitTweetOptions:function(a){this.resetForm();for(var b in a)!twttr.is.fn(a[b])&&!twttr.is.object(a[b])&&$('<input type="hidden" reset="true"/>').attr("name",b).attr("value",a[b]).appendTo(this.$selectedFiles);this.$selectedFiles.submit()},resetForm:function(){this.$selectedFiles.find("input[reset='true']").remove()},enable:function(){this.files.length>0&&this.animateShow(this.getPadding(this.files.length)),this.$camera.show(),this.enabled=!0},disable:function(){this.files.length>0&&this.animateHide(this.getPadding(0)),this.$camera.hide(),this.enabled=!1},hasItems:function(){return this.files.length>0&&this.enabled},count:function(){return this.files.length},hasDuplicate:function(a){for(var b=0;b<this.files.length;b++)if(this.files[b].input.value==a.value)return!0;return!1},getPadding:function(a){return a===0?this.textareaPaddingBottom:this.html4Mode?12+25*a+2*(a-1):60},checkFiles:function(){var a=this.files.length;a>=this.maxFiles?(this.$camera.addClass("max-turkeys"),this.editor.trigger("heightChange"),this.destroySwf()):(this.$camera.removeClass("max-turkeys"),this.editor.trigger("heightChange"),this.createSwf());var b=this.getPadding(a);a>0?(this.animateShow(b),a==1?this.$thumbnailMessage.text(this.thumbnailMessage):this.$thumbnailMessage.text(this.thumbnailsMessage)):this.animateHide(b),this.trigger("photoChanged")},removeAllFiles:function(){$.each(this.files,function(a,b){$(b.input).remove(),b.item.remove()}),this.files=[]},removeFile:function(a){var b=this;$(a.input).remove(),a.item.remove();var c=$.inArray(a,b.files);c!=-1&&b.files.splice(c,1),b.checkFiles(),this.scribeEvent("remove")},hasMaxFiles:function(){return this.files.length>=this.maxFiles},addFileError:function(a,b){this.killTipsy();if(a==twttr.turkey.errorTypes.tooLarge)twttr.showError(_("The file you selected is greater than the 3MB limit."));else if(a==twttr.turkey.errorTypes.notImage||a==twttr.turkey.errorTypes.ioError)twttr.showError(_("You did not select an image"));else if(a==twttr.turkey.errorTypes.maxFiles){var c;this.maxFiles===1?c=_("Can only tweet one image at a time."):c=_("Cannot tweet more than {{numberOfPhotos}} images at a time.",{numberOfPhotos:this.maxFiles}),twttr.showError(c)}else a==twttr.turkey.errorTypes.dupe&&twttr.showError(_("You already selected this file"));this.scribeEvent("failure",{message:a})},killTipsy:function(){this.$camera.data("tipsy")&&this.$camera.data("tipsy").$tip&&this.$camera.data("tipsy").$tip.hide()},scribeEvent:function(a,b){var c=b?b:{};c.context="photo_uploader",c.event_info=twttr.turkey.tweetboxMode(),trackClient({component:"tweetbox",action:a},c)},createThumbnailImage:function(a,b,c){var d=this,e=$("<img/>").attr("alt",a);return e.appendTo(c.item),e.bind("load",function(){var a=twttr.turkey.getThumbnailOffsets(e[0].height,e[0].width,55);e.css(a),c.item.find(".upload-file-close").bind("click",function(a){a.stopPropagation(),a.preventDefault(),d.removeFile(c)}),c.item[Modernizr.csstransitions?"animateWithCss":"animate"]({opacity:100},200,Modernizr.csstransitions?"default":"linear"),d.checkFiles()}),e.attr("src",b),e},createThumbnail:function(){var a;return this.html4Mode?a=$('<div class="upload-file upload-filename">        <span class="filename"></span><a href="#" class="thumbnail-close upload-file-close"><span></span></a>        </div>'):a=$('<div class="upload-file upload-thumbnail">        <a href="#" class="thumbnail-close upload-file-close"><span></span></a>        </div>').css({opacity:0}),a.appendTo(this.$thumbs),a},addFileItem:function(a,b){var c={input:a,item:b};return this.files.push(c),this.$selectedFiles.append(a),this.resetAddPhoto(),this.scribeEvent("add"),this.checkFiles(),c},addFileData:function(a,b,c){this.setTimeoutBySize(a.length);var d=$('<input type="hidden" maxlength="'+this.FILE_SIZE_LIMIT+'" name="media_data[]"/>');d.val(a);var e=this.createThumbnail(),f=this.addFileItem(d,e),g=this.createThumbnailImage(c,"data:image/jpeg;base64,"+b,f);this.killTipsy()},addFileInput:function(a){var b=this,c=this.createThumbnail(),d=this.addFileItem(a,c);if(this.hasFileReader&&a.files){var e=a.files[0];this.setTimeoutBySize(e.size);var f=new FileReader;f.onloadend=function(c){var e=c.target.result,f=b.createThumbnailImage(twttr.turkey.getFileName(a.value),e,d)},f.readAsDataURL(e)}else twttr.helpers.ellipsify(c.find(".filename").text(twttr.turkey.getFileName(a.value))),c.find(".upload-file-close").bind("click",function(a){a.stopPropagation(),a.preventDefault(),b.removeFile(d)}),this.inst&&this.inst.setFeedback(this.tweetboxFeedback)},addFile:function(a){var b=this;if(this.hasMaxFiles()){this.addFileError(twttr.turkey.errorTypes.maxFiles);return}if(!twttr.turkey.validatePhoto(a.value)){this.addFileError(twttr.turkey.errorTypes.notImage);return}if(this.hasDuplicate(a)){this.addFileError(twttr.turkey.errorTypes.dupe);return}var c;a.files&&a.files[0]&&(c=a.files[0]);var d=function(c){c?b.addFileData(c,c,twttr.turkey.getFileName(a.value)):b.addFileError(twttr.turkey.errorTypes.notImage)};if(c)if(!twttr.decider.isAvailable("phoenix_turkey_html5_resize")||!this.hasFileReader){if(!this.checkFileSize(c)){this.addFileError(twttr.turkey.errorTypes.tooLarge);return}this.useIframe=!0,this.addFileInput(a)}else twttr.turkey.resizeImage(c,d);else this.useIframe=!0,this.addFileInput(a);this.killTipsy()},checkFileSize:function(a){return!twttr.is.def(a.size)||a.size<=this.FILE_SIZE_LIMIT},getTimeoutBySize:function(a){var b=Math.ceil(a/this.TIMEOUT_BY_BYTES*1e3);return b<this.defaultTimeoutDelay?this.defaultTimeoutDelay:b},setTimeoutBySize:function(a){this.timeoutDelay=this.getTimeoutBySize(a)},resetPhotoPost:function(){this.useIframe=!1,this.$selectedFiles.empty();var a=twttr.API.getConfig().postAuthenticityToken;$('<input type="hidden" name="post_authenticity_token" value="'+a+'"/>"').appendTo(this.$selectedFiles),$('<input type="hidden" name="include_entities" value="true"/>').appendTo(this.$selectedFiles)},reset:function(){this.removeAllFiles(),this.$camera.removeClass("max-turkeys"),this.editor.trigger("heightChange"),this.animateHide(this.getPadding(0),!0),this.timeoutDelay=this.defaultTimeoutDelay},createThumbnails:function(){var a=this;this.$thumbs=$("<div class='media-thumbnails' />"),this.$thumbs.prependTo(this.$thumbsWrapper),this.html4Mode&&this.editor.$container.addClass("html4"),this.resetPhotoPost(),this.resetAddPhoto(),this.createSwf()},destroySwf:function(){if(!this.shouldUseFlash)return;this.$swf.empty()},createSwf:function(){if(!this.shouldUseFlash)return;var a=this;setTimeout(function(){twttr.turkey.swfErrorCallbacks[a.tweetBoxId]=twttr.bind(a,a.addFileError),twttr.turkey.swfCallbacks[a.tweetBoxId]=twttr.bind(a,a.addFileData),twttr.turkey.loadSwf(a.$swf,a.tweetBoxId)},500)},createTipsy:function(){var a=this;this.$camera.tipsy({gravity:"nw",fade:!0,opacity:.9,title:twttr.bind(this,this.getTipsyTitle)}),this.$camera.click(function(){setTimeout(function(){a.$camera.data("tipsy")&&a.$camera.data("tipsy").hide()},750)})},getTipsyTitle:function(){return this.files.length>=this.maxFiles?"":this.addPhotoMessage},resetAddPhoto:function(){var a=this;this.$camera.find('input[type="file"]').remove();var b=$('<input type="file" class="turkey-file-input" name="media[]"></input>');this.$camera.append(b),b.bind("change",function(b){a.addFile(b.target)}),this.$camera.bind("click",function(){a.scribeEvent("click")})},remove:function(){this.$thumbsWrapper.remove()}}),a(twttr.turkey.PhotoThumbnails)})}),provide("images",function(a){using().as(function(b){twttr.images={renderProviderMedia:function(a,b){var a=a.concat(),c=twttr.images.generateDivs($.map(a,function(a){return a.url}),b);this.bindLoadImageHandler(c,b.componentName);var d=function(a,b){setTimeout(function(){a.trigger("failedToResolve",[b])},0)};return $.each(a,function(a,e){var f=$(c[a]);e.mediaType.getImageURL(b.size,function(a){a?twttr.images.scaleImageIntoDiv(f,a,b):d(f,"getImageUrl did not return a resolvedURL")},b.dimension)}),c},renderMediaUrls:function(a,b,c){var d=twttr.images.generateDivs(a,b);this.bindLoadImageHandler(d,b.componentName);var e={success:function(a,c){twttr.images.scaleImageIntoDiv(a,c,b)},error:function(a,b){setTimeout(function(){a.trigger("failedToResolve",[b])},0)}};return twttr.images.resolveDataUrls(d,b,e,c),d},animateImageFadeIn:function(a,b,c){var d=Modernizr.csstransitions?"animateWithCss":"animate";a.css("opacity",0),a[d]({opacity:c||1},b||500,"swing")},renderMediaUrl:function(a,b,c){return this.renderMediaUrls([a],b,c)},generateDivs:function(a,b){var c=$(),d=b.thumbnailViewClass||twttr.views.Thumbnail;return $.each(a,function(a,e){var f=$((new d({url:e,width:b.width,height:b.height,lineHeight:b.height+"px"})).html());c=c.add(f)}),c},bindLoadImageHandler:function(a,b){var c=this;a.bind("loadImage",function(){var a=$(this);if(a.data("loaded")===!0)return;var d=a.data("resolvedUrl"),e=a.data("childImg");if(d&&e){if(twttr.decider.isAvailable("profile_image_latency")){var f=twttr.media.matchInstance(a.data("url")),g=new twttr.Profiler(c.createProfilingDescription(f.partnerName,d,b));$(e[0]).load(function(){g.done()})}e[0].src=d,a.data("loaded",!0)}else a.data("loadWhenResolved",!0)})},createProfilingDescription:function(a,b,c){return c=c?c:"",[a.toLowerCase(),JSON.stringify(b),c.toLowerCase()].join(".")},resolveDataUrls:function(a,b,c,d){a.each(function(a,e){var f=$(e),g=f.attr("data-url")||e.href;twttr.media.resolveImageUrl(g,b.size,{success:function(a){c.success&&c.success(f,a)},error:function(a){c.error&&c.error(f,a)},tweet:d,filter:b.filter},b.dimension)})},scaleImageIntoDiv:function(a,b,c){b=b.replace(/([^:])\/\//g,"$1/");var d=$("<img/>").addClass("scaled-image");d.bind("load",function(){var b=twttr.images.calculateScaleDimensions({containerWidth:c.width,containerHeight:c.height,itemWidth:this.width,itemHeight:this.height,scalingMode:c.scalingMode});d.attr({origHeight:this.height,origWidth:this.width}),c.divMode==="snap"?a.css(b).css("line-height",b.height+"px"):(d.css(b),d.css({top:Math.floor(c.height/2-b.height/2),left:Math.floor(c.width/2-b.width/2)})),setTimeout(function(){d.appendTo(a.find("div.thumbnail-wrapper")),twttr.images.addPrivacyCover(d),a.trigger("loaded")},0)}).bind("error",function(){a.trigger("failedToLoad")}),a.data("resolvedUrl",b).data("childImg",d),(!c.delayLoading||a.data("loadWhenResolved"))&&a.trigger("loadImage")},resizeImageInDiv:function(a,b){if(!a)return;var c=a.find("img.scaled-image");if(c.length==0)return;var d=twttr.images.calculateScaleDimensions({containerWidth:b.width,containerHeight:b.height,itemWidth:parseInt(c.attr("origWidth"),10),itemHeight:parseInt(c.attr("origHeight"),10),scalingMode:b.scalingMode});c.attr(d).trigger("resize"),b.divMode==="snap"?a.css(d).css("line-height",d.height+"px"):c.css({top:Math.floor(b.height/2-d.height/2),left:Math.floor(b.width/2-d.width/2)})},calculateScaleDimensions:function(a){function j(){return{width:e,height:d}}function k(){return{width:c,height:d/g}}function l(){return{width:e/i,height:b}}var b=a.containerHeight,c=a.containerWidth,d=a.itemHeight,e=a.itemWidth,f=a.scalingMode,g=e/c,i=d/b;switch(f){case"fit":return g<1&&i<1?j():g>i?k():l();case"trim":return g<1||i<1?j():g>i?l():k();default:return{width:c,height:b}}},addPrivacyCover:function(a,b){if(a.length<=0||!twttr.decider.isAvailable("prevent_right_click_on_images"))return;var c=function(){var b=a[0],d=d||a.parent();d.find(".cover").remove(),d.addClass("has-cover").height(b.height).width(b.width),d.closest(".media-instance-container").width(b.width),$("<div/>",{"class":"cover",height:b.height,width:b.width}).appendTo(d),a.bind("resize",c)},d=0,e=function(){a[0].complete===!0?setTimeout(c,0):(a.bind("load",function(){setTimeout(c,0)}),d<10&&setTimeout(e,500),d++)};e()},SCRIBABLE_PROVIDERS:["dailybooth","flickr","instagram","lockerz","photobucket","twimg","twitpic","yfrog","youtube"],scribeImageFailure:function(a,b,c){if(!twttr.decider.isAvailable("scribe_image_failures"))return;var d=twttr.media.match(c);if(d&&d.partnerName){var e=d.partnerName.toLowerCase();$.inArray(e,this.SCRIBABLE_PROVIDERS)&&a.scribe({component:b,action:"third_party_error"},{url:c,event_info:e})}}},a(twttr.images)})}),provide("components/ContactImportLauncher",function(a){using("externalOauthPopup").as(function(b){twttr.klass("twttr.components.ContactImportLauncher").subclassOf(twttr.components.Base).initializer(function(a){var b=this;this.bind("addedToPage",function(){if(!twttr.decider.isAvailable("contact_import"))return;twttr.API.AddressBook.contactsServices({success:function(c){if(!c||!c.length){b.trigger("notRendered","no_items");return}(new twttr.views.DashboardContactImport({services:c,compact:a})).render(b.$node,"append"),b.$node.delegate(".service-link","click",function(a){b.launchService($(this))}),b.trigger("servicesLoaded")},error:function(){b.trigger("notRendered","darkmoded")}})})}).methods({launchService:function(a){var c=a.attr("data-url"),d=a.attr("data-width"),e=a.attr("data-height");if(c){a.attr("data-popup")=="true"?b.externalOauthPopup({url:c,width:d,height:e,callbackUrl:twttr.router.whoToFollowImportMatchesPath()}):window.open(c,"_blank").focus();var f=a.find("strong.service-name").attr("data-service-id");trackClient({section:"dashboard",component:"contact_import_launcher",action:"launch_service"},{event_info:f,context:"import"})}}}),a(twttr.components.ContactImportLauncher)})}),provide("streams/ListStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.ListStream",function(a,b){this._cursor=-1,twttr.streams.Stream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent,twttr.loggedIn&&!twttr.isT1&&this._registerUpdateStreamEvent(twttr.API.List,"follow unfollow",function(a,b){return b.sync("following",a.type==="follow"),b})}).subclassOf(twttr.streams.Stream).methods({itemViewClass:"StreamList",streamItemType:"list",streamItemId:function(a){return a.uri},rerenderItem:function(a,b){var c=this.selectedItem(a);c.length===0&&(c=this.$find("div.js-list[data-list-id='"+a+"']").closest(".js-stream-item")),c.replaceWith(this._renderItemHtml(b))},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("list_streams")||this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}twttr.API.User.find(this.screenName)[this.API_METHOD]({cursor:this._cursor,success:function(c,d){b._cursor=d.response.next_cursor,b.push(c.array),a(b,twttr.streams.SUCCESS),b._cursor||b.reachedTheEnd()},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}})},_scribeResults:function(a,b,c){this._scribeEmptyResults(a,b,c);if(b.length){var d=twttr.map(b,function(a){return a.fullName});this.scribbler.scribe({component:"stream",action:"results"},{item_names:d,item_count:d.length,event_value:d.length,referring_event:a})}}});a(c)})}),provide("streams/OwnListsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.OwnLists",function(a,b){twttr.streams.ListStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"lists",_setTitle:function(a){this.stream_user_is_current_user()?a(_("Your lists")):a(_("{{username}}'s lists",{username:this.screenName}))},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You haven't created any lists yet."):_("@{{screen_name}} hasn't created any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"create",b),this._registerRemoveFromStreamEvent(twttr.API.List,"delete",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}).statics({_deciderKey:"list_stream_own_lists"});a(c)})}),provide("streams/SubscriptionsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Subscriptions",function(a,b){twttr.streams.ListStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent,this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"subscriptions",_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following any lists yet."):_("@{{screen_name}} isn't following any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"unfollow",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}).statics({_deciderKey:"list_stream_subscriptions"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!1))},_setHeaderButton:function(a,b){a(new twttr.views.CreateListButton)}}):c.methods({_setTitle:function(a){a(_("Lists {{username}} follows",{username:this.screenName}))}}),a(c)})}),provide("streams/MembershipsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Memberships",function(a,b){twttr.streams.ListStream.apply(this,arguments)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"memberships",_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't listed yet."):_("@{{screen_name}} isn't listed yet.",{screen_name:this.screenName})}}).statics({_deciderKey:"list_stream_memberships"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!0))},_setHeaderButton:function(a,b){twttr.helpers.isCurrentUser(b.screenName)&&a(new twttr.views.CreateListButton)}}):c.methods({_setTitle:function(a){a(_("Lists following {{username}}",{username:this.screenName}))}}),a(c)})}),provide("streams/MembershipsStreamUser",function(a){using("_","streams/MembershipsStream").as(function(b,_){var c=twttr.stream("twttr.streams.MembershipsUser",function(a,b){twttr.streams.Memberships.apply(this,arguments)}).subclassOf(twttr.streams.Memberships).methods({_setViewToggler:function(a,b){a(new twttr.views.ProfileListsStreamViewToggler(!1,{screen_name:b.screenName}))}});a(c)})}),provide("multiGlobals/trackSession",function(a){var b={};b._maxLength=1e3,b._cookieName="session_buffer",b._defaultJson="[]",b._getStorage=function(){var a=$.cookie(b._cookieName)||b._defaultJson,c;try{c=JSON.parse(a)}catch(d){c=JSON.parse(b._defaultJson)}return c},b._setStorage=function(a){var c=JSON.stringify(a);if(c.length>b._maxLength){var d=Math.floor(a.length/2);a.splice(d,a.length),c=JSON.stringify(a)}$.cookie(b._cookieName,c)},b._setSession=function(a){var c=b._getStorage();c=$.grep(c,function(b){return a.key!==b.key}),c.unshift(a),b._setStorage(c)},b._extractSessions=function(a){var c=b._getStorage(),d=[];return c=$.grep(c,function(b){return $.inArray(b.key,a)>-1?(d.unshift(b),!1):!0}),b._setStorage(c),d},b.start=function(a,c){c=c||{},b._setSession({key:a,data:c});var d={component:a,action:"session_start"};trackClient(d,c)},b.stop=function(a,c){"string"==typeof a&&(a=[a]);var d=b._extractSessions(a);$.each(d,function(a,b){var d={component:b.key,action:"session_stop"};trackClient(d,b.data),c&&c(b)})},window.startTrackSession=b.start,window.stopTrackSession=b.stop,a(b)}),provide("streams/SuggestionCategoriesStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoriesStreamT1":"","mixins/discoveryHelper").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoriesStream",function(a,b){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments),this.$node.addClass("suggestion-categories");var c=this;this.$node.delegate("div[data-item-type=suggestion_category]","click",function(a){var b=$(this).attr("data-item-id"),d={};return d[b]={item_position:$("div.js-stream-manager-container div.js-stream-item").index($(a.target).closest(".js-stream-item"))},b&&(trackClient({component:"suggestion_category",action:"click"},{step:"interests",query:b,item_details:d}),c.routePageTo(c.params.pathRoot,"InterestsCategory",{category:b})),!1})}).subclassOf(twttr.streams.Stream).statics({cacheCategories:function(a){this.CATEGORIES=a,this.CATEGORY_MAP=this.buildCategoryMap(a)},buildCategoryMap:function(a){return a.reduce({},function(a,b){return a[b.slug]=b,a})},filterTopTweetsCategories:function(a){var b=this.buildCategoryMap(a);return a.filter(function(a){if(a.slug.match(/^(.+)[_-]top-tweets$/i)){var c=b[RegExp.$1];return c&&(c.topTweetsCategory=a),!1}return!0})}}).methods({itemViewClass:"StreamSuggestionCategory",streamItemType:"suggestion_category",sampleSize:"",streamItemId:function(a){return a.slug},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},addTipsies:function(){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("suggestion_categories_streams")){a(this,twttr.streams.DECIDER);return}var c={sample_size:this.sampleSize,samples:!0,success:function(c){c=b.constructor.filterTopTweetsCategories(c),b.constructor.cacheCategories(c);var d=c.map(function(a){var c,d;return a.topTweetsCategory&&a.topTweetsCategory.sample&&(d=a.topTweetsCategory.sample.shift())&&(c=d.id),a.clone({category_link:b.pagePathFor(b.params.pathRoot,"InterestsCategory",{category:a.slug}),category_top_tweets_user_id:c,category_top_tweets_is_current_user:!!twttr.currentUser&&twttr.currentUser.id==c,following_category_top_tweets:a.topTweetsCategory?a.topTweetsCategory.followingTopTweets:null})});b.push(d.array),a(b,twttr.streams.SUCCESS),b.addTipsies(),b.reachedTheEnd();var e=c.map(function(a,b){return a.name});b.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length()})},error:function(){a(b,twttr.streams.ERROR)}};b.defaultOpts&&(c=twttr.merge(b.defaultOpts,c)),b.params.lang&&(c.lang=b.params.lang),b.params.country&&(c.country=b.params.country),b.params.city&&(c.city=b.params.city),c.top_tweets=!0,twttr.API.SuggestionCategory.getAll(c)},_setTitle:function(a){this.params.title!==undefined?a(this.params.title):a(_("Select the topics you are interested in. Find a few people you want to hear from, then follow them."))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(this.constructor.CATEGORIES,this.params.pathRoot)},_getStreamEndComponent:function(){return this._getHeaderComponent()}}).mixin(twttr.mixins.discoveryHelper);c&&d.mixin(c),a(d)})}),provide("streams/SuggestionCategoryMembersStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoryMembersStreamT1":"").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoryMembersStream",function(a,b){var c=this;a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.UserStream.apply(this,arguments),this.category=a.suggestionCategory,this.ignoreScribeItemPosition=!1}).subclassOf(twttr.streams.UserStream).statics({_deciderKey:"suggestion_categories_streams"}).methods({update:function(a){this.params.lang&&(a.lang=this.params.lang),this.params.country&&(a.country=this.params.country),this.params.city&&(a.city=this.params.city),this.category.members(a)},isCursorPagination:function(){return!1},_setTitle:function(a){var b={category:this.category.name,size:this.category.size};a(this.params.title||_("View {{category}} ({{size}})",b))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(twttr.streams.SuggestionCategoriesStream.CATEGORIES,this.params.pathRoot,this.category.slug)},_getStreamEndComponent:function(){return this.params.noHeaderFooter?twttr.streams.SuggestionCategoryMembersStream.uber._getStreamEndComponent.call(this):this._getHeaderComponent()}});c&&d.mixin(c),a(d)})}),provide("streams/SuggestionCategoriesDashboardStream",function(a){using().as(function(b){twttr.klass("twttr.streams.SuggestionCategoriesDashboardStream",function(a,b){a=a||{},twttr.streams.SuggestionCategoriesStream.call(this,a,b)}).subclassOf(twttr.streams.SuggestionCategoriesStream).methods({itemViewClass:twttr.isT1?"DashboardStreamInterestCategory":"StreamSuggestionCategory",_setHeader:function(a,b){a("")},addTipsies:function(){}}),a()})}),provide("streams/SuggestionCategoryMembersDashboardStream",function(a){using("streams/SuggestionCategoryMembersStream").as(function(b){twttr.klass("twttr.streams.SuggestionCategoryMembersDashboardStream",function(a,c){a=a||{},a.streamItemClass="unfocusable-stream-item",b.streams.SuggestionCategoryMembersStream.call(this,a,c)}).subclassOf(b.streams.SuggestionCategoryMembersStream).methods({_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a(twttr.streams.SuggestionCategoryMembersDashboardStream)})}),provide("streams/GovernmentSearchStream",function(a){using("_","mixins/hasGovernmentSearchHeader").as(function(b,_){var c=twttr.klass("twttr.streams.GovernmentSearchStream",function(a,b){var c=this;twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).mixin(b.mixins.hasGovernmentSearchHeader).methods({itemViewClass:"StreamUser",streamItemType:"user",afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},streamItemId:function(a){return a.id},_fetchItems:function(a){var b=this;twttr.API.UsPoliticalRep.findByZip(this.params.zipCode,{success:function(c,d){b.push(c.map(function(a){return a.user}).array),a(b,twttr.streams.SUCCESS),b.reachedTheEnd()},error:function(c){c.status===502?a(b,twttr.streams.WHALE):c.status===404?(a(b,twttr.streams.SUCCESS),b.reachedTheEnd()):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}})},_setTitle:function(a){a(_("Government"))},_getEmptyStreamHtml:function(){return _("Sorry, we couldn't find any representatives for that Zip Code.")},_setViewToggler:function(a){var b={route:twttr.router.whoToFollowInterestsPath(),name:_("View all categories")};a(new twttr.views.BackLink(b))}});a(c)})}),provide("widget/VerifyEmailDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.VerifyEmailDialog",function(a,b){this.bucket=a,twttr.widget.Dialog.call(this,twttr.merge({modal:!0,draggable:!1,css:{width:530},email:b.email_address||b.attributes.states.pending_email},b.attributes))}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this),this.$container.find(".button.ok-thanks").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","dialog_dismissed"),a.preventDefault(),a.stopPropagation(),$.cookie("abtest_email_verification_18","1",{expires:.0417}),this.destroy()})),this.$container.find(".send-verify-email").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","resend_verification_email"),$.ajax({url:"/account/resend_confirmation_email",dataType:"json",success:twttr.bind(this,function(a){var b=this.$container.find(".twttr-dialog-verify-email");b.length?b.fadeOut(300,function(){b.find("h2").html(_("Confirmation email sent!")),b.find(".verify-email-text").html(_("Please take this time to check your email for the confirmation message and to verify your email address by <strong>clicking the link in the email</strong>.")),b.fadeIn()}):twttr.showMessage(a.messageForFlash)}),error:function(a){twttr.showError(_("Oops!  There was an error sending the confirmation email."))}}),a.preventDefault(),a.stopPropagation()})),this.$container.find(".change-email").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","change_email"),this.destroy()}))}}),a(twttr.widget.VerifyEmailDialog)})}),provide("SearchAPI",function(a){using().as(function(b){twttr.SearchAPI={_generateFacetsQuery:function(a){var b=a.query,c=a.facets,d={q:b,imageResults:c.images?c.images.count:null,videoResults:c.videos?c.videos.count:null};return a.experimentId&&(d.experimentId=a.experimentId),d},getImageFacets:function(a,b){twttr.SearchAPI._wrapInCache("imageFacets",a,b)},getVideoFacets:function(a,b){twttr.SearchAPI._wrapInCache("videoFacets",a,b)},_wrapInCache:function(a,b,c){var d=this,e=twttr.SearchAPI.cacheKey(a,b,c);this._facetsCache[e]?setTimeout(function(){c.success&&c.success(d._facetsCache[e])},0):twttr.API.Search[a](b,twttr.merge({},c,{success:function(a){var b=[];a.each(function(a){b.push({url:a.url,tweet:a})}),d._facetsCache[e]=b,c.success&&c.success(b)},error:function(){c.error&&c.error()}}))},cacheKey:function(){return JSON.stringify(Array.prototype.slice.apply(arguments))},_facetsCache:{},flushCache:function(){this._facetsCache={}}},a(twttr.SearchAPI)})}),provide("media/providers",function(a){using().as(function(b){var c=function(a,b){return b=b||function(){return!0},function(c){var d=[];$.each(c,function(a,c){c.mediaType=twttr.media.matchInstance(c.url,c.tweet),c.mediaType&&b(c)&&d.push(c)}),a(d)}};twttr.klass("twttr.media.provider.Search",function(a){this.options=a||{}}).methods({fetch:function(a){var b=a.query;a.success=c(a.success,a.filter),a.mode=="videos"?twttr.SearchAPI.getVideoFacets(b,a):twttr.SearchAPI.getImageFacets(b,a)}}),twttr.klass("twttr.media.provider.UserMedia",function(a){this.defaults={offset:0,count:20},this.screenName=a.screenName||null,this.user=a.user||null}).methods({fetchWithUser:function(a){var b=a.success||$.noop;a.success=function(a){var c=[];twttr.each(a.array,function(a){a.entities&&a.entities.media&&$.each(a.entities.media,function(b,d){if(d.type&&d.type=="photo"&&d.display_url){var d={url:d.display_url,tweet:a};c.push(d)}}),a.entities&&a.entities.urls&&$.each(a.entities.urls,function(b,d){var e={url:d.expanded_url||d.url,tweet:a};c.push(e)})}),b(c)},this.user.media(a)},fetchWithScreenName:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){b.user=c,b.fetchWithUser(a)})},fetch:function(a){a=$.extend({},this.defaults,a),a.success=c(a.success,a.filter),this.user?this.fetchWithUser(a):this.screenName&&this.fetchWithScreenName(a)}}),a(twttr.media.provider)})}),provide("mixins/userRecommendationsHelper",function(a){using("_","constants").as(function(b,_){twttr.klass.mixin("twttr.mixins.userRecommendationsHelper",function(a){return a.methods({INTERESTING_RATING:6,BLOCK_RATING:5,USEFUL_RATING:1,LIST_ITEM_SELECTOR:"ul.recommended-followers > li.user-small-list-item",userRecommendationsAvailable:function(a){return twttr.loggedIn?a?twttr.decider.isAvailable("whotofollow_similarities"):twttr.decider.isAvailable("whotofollow_recommendations"):twttr.decider.isAvailable("whotofollow_logged_out_similarities")},trackImpressions:function(a,c,d,e,f){var g=[],i=[],j;a&&a.length()&&(a.each(function(a,c){g.push(a.id),i.push(a.feedback);if(a.promotedContent&&a.promotedContent.impression_id){var d={target_id:a.id,item_type:b.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id,item_position:c};j=j||{},j[a.id+""]=d}}),e?this.currentRecommendations=twttr.map(this.currentRecommendations,function(a,b){return a==e?g[0]:a}):this.currentRecommendations=g),this._trackOldImpressions(c,g,i,d),this._trackNewImpressions(g,i,j,f)},trackError:function(a,b){this._trackOldImpressions(a,[],[],b),this.getScribbler().scribe({component:this._getScribeComponentName(),action:"error"})},_trackOldImpressions:function(a,b,c,d){var e={recommended_users:b,recommended_users_count:b.length,tokens:c};twttr.merge(e,d||{});var f=this.mergeSimilarUserId(e);_scribble(a,f,"whotofollow")},_trackNewImpressions:function(a,b,c,d){var e={profile_id:this.getSimilarUserId(),item_ids:a,item_count:a.length,event_value:a.length,item_names:b,referring_event:d?"get_newer":"initial",duration_ms:new Date-this.initTime};c&&(e.item_details=c),this.getScribbler().scribe({component:this._getScribeComponentName(),action:a.length?"results":"no_results"},e)},_scribeResults:function(a,b,c){twttr.streams.Stream.prototype._scribeResults.apply(this,arguments);var b=b||[];c=c||{};if(a=="error"||a=="initial"&&!b.length)this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},twttr.merge(c,{item_ids:[0],item_count:0,event_value:0,cursor_or_page:this._cursorOrPage(),referring_event:a}));else if(b.length){var d=this,e=[],f=[],g;twttr.each(b,function(a,b){e.push(a.id),f.push(a.feedback);if(d.constructor._namespace.indexOf("UserRecommendations")!=-1){var c;a.promotedContent&&a.promotedContent.impression_id&&(c={item_type:twttr.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id}),c&&(g=g||{},c.item_position=b,g[a.id+""]=c)}}),g&&(c.item_details=g),this.scribbler.scribe({component:this._getScribeComponentName(),action:"results"},twttr.merge(c,{item_ids:e,item_names:f,item_count:e.length,event_value:e.length,cursor_or_page:this._cursorOrPage(),referring_event:a}))}},logPromotedImpressions:function(a){a.each(function(a){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)})},getSimilarUserId:function(){return this.similarUser&&this.similarUser.id||twttr.profileUser&&twttr.profileUser.id},mergeSimilarUserId:function(a){return this.screenName&&$.extend(a,{to_user_id:this.getSimilarUserId()}),a.phoenix_enabled=!0,a},recsToUsers:function(a){return a.map(twttr.bind(this,function(a,b){var c=this._namespace=="twttr.streams.UserRecommendationsStream"||this._namespace=="twttr.streams.UserSimilaritiesStream";return a.user.clone({following:a.user.following===!0,feedback:a.token,dismissable:!this.screenName||c&&twttr.profileUser&&twttr.currentUser.id==twttr.profileUser.id,socialcontext:this.makeSocialContextHtml(a,c)})}))},fetch:function(a){this.screenName?twttr.profileUser.similarUsers(a):(a.force_new_signup=this.forceNewSignup,twttr.currentUser.recommendedUsers(a))},registerUserRecommendationsActions:function(a){var b=this,c=function(b){return!a||b.parents(a).length};this.bind("avatar_click.user screen_name_click.user select.user",function(a,d,e,f){if(!c(d))return;var g=parseInt(d.attr("data-user-id")),i=b.mergeSimilarUserId({rating:b.INTERESTING_RATING,recommended_user_id:g,token:d.attr("data-feedback-token")||"0"});if(!g)return;i.recommendation_position=b.getRecPosition(d),scribble(b.whotofollowComponentName+"_profile_click",i,"whotofollow"),scribble("view-profile",{profile_user_id:g,component:b._namespace.indexOf(".stream.")?"stream":"dashboard",subcomponent:"who-to-follow",target:e.is("a")?"link":"image"})}),this.bind("follow.user",function(a,d,e,f){if(!c(d))return;var g=parseInt(d.attr("data-user-id")),i=b.mergeSimilarUserId({rating:b.USEFUL_RATING,recommended_user_id:g,token:d.attr("data-feedback-token")||"0"});if(!g)return;twttr.API.UserRecommendation.rate(i),i.recommendation_position=b.getRecPosition(d),scribble(b.whotofollowComponentName+"_follow",i,"whotofollow"),scribble("follow-user",{profile_user_id:g,component:b._namespace.indexOf(".stream.")?"stream":"dashboard",subcomponent:"who-to-follow"})}),this.bind("dismiss.user",function(a,d,e,f){if(!c(d))return;twttr.isT1&&d.hasClass("js-follow-combo")&&(d=d.parent(".js-actionable-user"));var g=parseInt(d.attr("data-user-id")),i=d.attr("data-impression-id"),j=b.getRecPosition(d),k=d.attr("data-feedback-token")||"0",l=d.find("a.js-action-follow, div.js-action-follow, .follow-action, .follow-button").length||b.screenName,m={};twttr.cache.local.dismissedIDs=twttr.cache.local.dismissedIDs||[],twttr.cache.local.dismissedIDs.push(g),d.animate({opacity:0},200);var n=function(a){var c;if(e.closest('[data-section-id="wtf"]').length)if(a&&a.length()&&!twttr.is.inArray(a.first().user.id,b.currentRecommendations||[])){c=b.recsToUsers(a);var f=c.first();if(f){var i=b.renderItemView(f).$html();i.css({opacity:0}),d.replaceWith(i),i.animate({opacity:1},300),b.trackImpressions(c,"whotofollow_sidebar_replace_dismissed",twttr.merge({recommended_user_id:g,recommendation_position:j},m),g)}}else d.fadeOut(200,function(){d.animate({height:1},100,null,function(){d.remove(),b.$find(b.LIST_ITEM_SELECTOR).length==0&&(b.trigger("notRendered","noMoreRecommendations"),b.$node.empty())})});else{var n=d.parent(".stream-item");n.slideUp(100,function(){n.remove()})}l&&scribble(b.whotofollowComponentName+"_block",b.mergeSimilarUserId({token:k,recommended_user_id:g,rating:b.BLOCK_RATING,recommendation_position:j}),"whotofollow")},o=function(){twttr.showError(_("Whoops! Something went wrong. Please try again!")),d.css({opacity:1})};m=b.mergeSimilarUserId({});var p=twttr.merge({user_id:m.to_user_id,excluded:b.currentRecommendations.concat(twttr.cache.local.dismissedIDs||[]).join(","),success:n,error:o,pc:!!i},m);d.find("a.js-action-unfollow:visible, div.js-action-unfollow:visible").length?b.fetch(twttr.merge(p,{limit:1})):d.find(".unfollow-button").length&&twttr.audit.currentPage()!="similar_to"?n():(p=twttr.merge({connections:!0},p),twttr.API.UserRecommendation.hide(g,k,p))})},attachUserRecommendationHideEvents:function(){this.$find("a.js-user-dropdown-dismiss").click(twttr.bind(this,function(){this.$find("a.js-user-dropdown, div.js-user-dropdown").fadeOut(300)}))},renderItemView:function(a){return new twttr.views.UserSmallListItem(a)},getRecPosition:function(a){}}),a}),a(twttr.mixins.userRecommendationsHelper)})}),provide("mixins/t1/genericComboButton",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.t1.genericComboButton",function(){this.methods({getButton:function(a){return a.closest(".js-combo-btn")},setState:function(a,b,c){b&&c!==b&&(a.removeClass(c),a.addClass(b),a.attr("data-state",b))}}).click({".js-combo-btn-dropdown":function(a,b){var c=this.getButton(b);c.toggleClass("open"),c.hasClass("open")&&($(document).bind("click.button",function(){c.removeClass("open"),$(document).unbind("click.button")}),a.stopPropagation())},".js-combo-btn-action, .js-combo-btn-dropdown-options a":function(a,b){var c=this.getButton(b);this.setState(c,b.attr("data-state"),c.attr("data-state"))}})});a(c)})}),provide("mixins/userUpdateable",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.userUpdateable",function(){return this.methods({registerUserUpdateEvents:function(a){var b=this;if(!twttr.loggedIn)return;twttr.API.User.bind("follow unfollow",function(c,d){var e=a.id==d.id,f=twttr.helpers.isCurrentUser(a);if(!e&&!f)return;twttr.helpers.isCurrentUser(b.user)?b.trigger("userUpdated",twttr.currentUser):b.trigger("userUpdated",d)})}}),this});a(c)})}),provide("components/UserMedia",function(a){using().as(function(b){twttr.klass("twttr.components.UserMedia").subclassOf(twttr.components.Media).deciderKey("phoenix_user_media_gallery").initializer(function(a,b){this.user=a,this.options=b||{},this.notDisplayedClass=".user-media-not-displayed",this.hasCalledHasRendered=!0,this.buildSubComponents()}).methods({buildSubComponents:function(){var a=this,b=function(){a.$node.hide()},c=twttr.aug({user:this.user,filter:function(a){return!a||!a.mediaType?!1:a.mediaType.icon()===twttr.constants.media.photoIcon}},this.options);twttr.isT1&&twttr.aug(c,twttr.components.Media.dashboardThumbnailOptions),this.images=new twttr.components.media.profile.Images(c),this.images.bind("urlsLoaded",function(c,d,e){a._possiblySensitive=e,d.length===0?b():twttr.loggedIn?a.loggedInBehavior():a.loggedOutBehavior(),a._scribeResults("photos",d)}),this.images.bind("failed",function(){b(),a._scribeResults("photos")}),this.images.fetchImages()},_isPossiblySensitive:function(){return!!this._possiblySensitive},_getUser:function(){return this.user},onProfilePage:function(){return!0},renderMedia:function(){this.images.$node.appendTo(this.$node),this.images.render(),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"photos_user_media",action:"view_all"},{event_info:"photos",profile_id:twttr.profileUser&&twttr.profileUser.id})}),this.$node.delegate(".media-thumbnail","click",function(a){trackClient({section:"dashboard",component:"photos_user_media",action:"click"},{event_info:"photos",url:$(this).attr("data-url"),profile_id:twttr.profileUser&&twttr.profileUser.id})})},buildNotDisplayedView:function(a){var b="";return a.possibly_sensitive?b=_("This media may contain sensitive content"):a.not_following&&(b=_("This media was shared by {{screen_name}}, someone you don&#8217;t follow.",{screen_name:this.user.screenName})),new twttr.views.UserMediaNotDisplayed({screenName:this.user.screenName,reason:b,renderHr:this.options.renderHr})},_scribeResults:function(a,b){var c=b&&b.length?"results":"no_results",d=a+"_user_media";b=b||[],trackClient({section:"dashboard",component:d,action:c},{item_names:b.slice(0,4),item_count:b.length,event_info:a,profile_id:twttr.profileUser&&twttr.profileUser.id})}}),a(twttr.components.UserMedia)})}),provide("components/UserRecommendations",function(a){using("_","mixins/userRecommendationsHelper","mixins/userActionable",twttr.isT1?"mixins/UserRecommendationsT1":"mixins/UserRecommendationsP1").as(function(b,_,c,d,e){var f=twttr.klass("twttr.components.UserRecommendations").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.screenName=a.screenName,this.showLinks=a.showLinks,this.currentRecommendations=[],this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.screenName&&twttr.profileUser&&twttr.profileUser.id}),this.scribeComponentName=this._determineScribeComponentName(a),this.whotofollowComponentName=this._determineWhotofollowComponentName(this.scribeComponentName),this.initTime=+(new Date),this.onDeck=[],this.scribbler.scribe({component:this.scribeComponentName,action:"impression"}),this.noSpacer=!this._shouldHaveSpacer(),this.bind("addedToPage",twttr.bind(this,function(){this.userRecommendationsAvailable()?this.loadRecommendations():this.trigger("notRendered","darkmoded")})),this.registerUserActionEvents(),this.registerUserRecommendationsActions()}).mixin(c,d,e).statics({wtfCycleTimeout:1e3}).click({".title-link":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:"dashboard_title",item:b.find(".dashboard-component-title").html()};scribble("dashboard_click",c)},".user-rec-inner h3 a":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:"view_all_recommendations",recommendations:this.currentRecommendations};scribble("dashboard_click",c)},".user-rec-inner .view-all":function(a,b){trackClient({component:this.scribeComponentName,action:"view_all"})},".flex-module-footer a[data-element-term=interests_link]":function(a,b){trackClient({component:this.scribeComponentName,element:"interests_link",action:"click"})},".flex-module-footer a[data-element-term=import_link]":function(a,b){trackClient({component:this.scribeComponentName,element:"import_link",action:"click"})},".user-rec-links a":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:b.html(),target_type:"recommendation_link",recommendations:this.currentRecommendations};scribble("dashboard_click",c)},"a.js-action-follow, div.js-action-follow":function(a,b){if(twttr.app.currentPageName()==="home"&&this.scribeComponentName!=="empty_timeline_recommendations"){var c=this,d=b.closest(".js-actionable-user");window.setTimeout(function(){c.loadRecommendations(d)},twttr.components.UserRecommendations.wtfCycleTimeout)}}}).methods({forceNewSignup:!1,renderItemView:function(a){return new twttr.views.UserSmallListItem(a)},renderModuleView:function(a,b){var c=this._getModuleViewName();(new twttr.views[c](a)).subview("recommended_followers",new twttr.views.UserSmallList(b)).render(this.$node,"append")},loadRecommendations:function(a){var b,c;this.screenName?(b="whotofollow_view_similar_users",c="profile"):(b="whotofollow_view_recommended_users",c="home"),this.fetch({limit:a?1:this._recommendationsLimit(),excluded:this.onDeck.concat(twttr.cache.local.dismissedIDs||[]).join(","),display_location:this.screenName?"st-component":"wtf-component",pc:!0,connections:!this.screenName,algorithm:this.useUserToUserRec()?"UserToUserRec":null,success:twttr.bind(this,function(d){var e=this.recsToUsers(d);this.trackImpressions(e,b,{tracking_context:c});if(e.length()>0){this.logPromotedImpressions(e);var f;if(a){f=this.renderItemView(e.first()).$html();var g=parseInt(f.attr("data-user-id"));if(this.onDeck.find(function(a){return a==g}))this.trigger("notRendered","recommendationAlreadyOnDeck");else{var i=parseInt(a.attr("data-user-id"));this.onDeck=this.onDeck.map(function(a){return a==i?g:a}),a.css({opacity:1}),f.css({opacity:0}),a.animate({opacity:0},400,function(){a.replaceWith(f),f.animate({opacity:1},400,function(){f.css({opacity:""})})})}}else{this.onDeck=e.map(function(a){return $(a).attr("id")});var j=this.screenName?{screen_name:this.screenName,self_sims:twttr.helpers.isCurrentUser(this.screenName),profile_name:twttr.profileUser.name,small_avatar:!0}:{show_links:this.showLinks};this.renderModuleView(j,e),this.attachUserRecommendationRefreshEvents(),this.hasRendered(),this.trigger("recommendationsLoaded"),f=this.$node}twttr.helpers.ellipsify(f.find(".user-screen-and-full-name")),twttr.helpers.ellipsify(f.find("div.bio"))}else this.trigger("notRendered","noMoreRecommendations")}),error:twttr.bind(this,function(a){this.trackError(b,{tracking_context:c,error_status:a.status}),this.trigger("notRendered",a)})})},refreshRecommendations:function(a){var b=this.$find(".js-recommended-followers");b.animate({opacity:0},200);var c=this.screenName?"whotofollow_refresh_similar_users":"whotofollow_refresh_recommended_users";twttr.cache.local.dismissedIDs=(twttr.cache.local.dismissedIDs||[]).concat(this.currentRecommendations),this.fetch({limit:this._recommendationsLimit(),excluded:this.onDeck.concat(twttr.cache.local.dismissedIDs).join(","),pc:a,display_location:"wtf-component",connections:!0,algorithm:this.useUserToUserRec()?"UserToUserRec":null,success:twttr.bind(this,function(d){var e=this.recsToUsers(d);if(e.length()>0){this.scribbler.scribe({component:this.scribeComponentName,action:"refresh"}),this.trackImpressions(e,c,{},!1,!0),a&&this.logPromotedImpressions(e);var f=this._generateUserList(e);f.css({opacity:0}),b.replaceWith(f),twttr.helpers.ellipsify(f.find(".user-screen-and-full-name")),f.animate({opacity:1},200)}else twttr.showMessage(_("You have no more recommendations today!")),this._removeRefreshLink(),b.css({opacity:1})}),error:function(a){this.trackError(c,{error_status:err.status}),twttr.helpers.showErrorFromResponse(a),b.css({opacity:1})}})},attachUserRecommendationRefreshEvents:function(){var a=this;this.$find("a.js-refresh-suggestions").click(twttr.bind(this,function(a){this.refreshRecommendations(!0)}))},_recommendationsLimit:function(){return 3},useUserToUserRec:function(){return this.screenName!=null&&twttr.abdecider.choose("wtf_user_to_user_rec_155")=="user_to_user_rec"},_determineScribeComponentName:function(a){return a=a||{},a.scribeComponentName?a.scribeComponentName:a.screenName?"similar_user_recommendations":"user_recommendations"},_determineWhotofollowComponentName:function(a){return a==="empty_timeline_recommendations"?"whotofollow_empty_timeline":"whotofollow_sidebar"}});a(twttr.components.UserRecommendations)})}),provide("components/Footer",function(a){using().as(function(b){var c=twttr.klass("twttr.components.Footer").subclassOf(twttr.components.Base).initializer(function(a){this.renderFooter(a),twttr.loggedIn||this.$node.delegate("a","click",function(a){var b={url:$(this).attr("href"),context:twttr.audit.currentPage()},c={section:"footer",component:"link",action:"click"};trackClient(c,b)}),this.hasRendered()}).method("renderFooter",function(a){(new(twttr.isT1?twttr.views.Footer:twttr.views.GenericFooter)({year:2012,is_slim:a=="slim"})).render(this.$node,"append")});a(c)})}),provide("components/Trends",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.Trends").subclassOf(twttr.components.Base).initializer(function(a){var b=this;trackClient({component:"trends",action:"impression"}),b.isFullPage=!!a&&!!a.isFullPage,this.renderTrends(),a&&a.wide&&b.$find(".trends-inner").addClass("wide-trends"),b.hasRendered(),b.registerEventHandlers(),twttr.API.CurrentUser.bind("changedLocation",function(){b.trendLocationUpdated=!0,b.updateTrends()}),twttr.TrendLocations.install(function(){b.trendLocationsLocated=!0,b.startUpdatePolling(),b.trigger("trendLocationsLocated")})}).statics({trendUpdateTime:3e5}).methods({registerEventHandlers:function(){var a=this,b=a.$find(".js-trend-toggle");b.click(function(b){var c=function(){a.dialog().open(),scribble("open-trend-dialog",{input:"click",woeid:a.currentWoeid()})};a.trendLocationsLocated?c():a.bind("trendLocationsLocated",c),b.preventDefault()}),b.hover(function(b){scribble("trend-location-selector-hover",{input:"hover",woeid:a.currentWoeid()})})},currentWoeid:function(){return twttr.trendLocations.current.woeid},dialog:function(){return this._dialog?this._dialog:this._dialog=twttr.dialogs.trends()},startUpdatePolling:function(){var a=this;!a.trendUpdateInterval&&a.trendLocationsLocated&&(a.updateTrends(),a.trendUpdateInterval=setInterval(function(){twttr.decider.isAvailable("trends_component_polling")&&a.updateTrends(!0)},twttr.components.Trends.trendUpdateTime))},stopUpdatePolling:function(){this.trendUpdateInterval&&(clearInterval(this.trendUpdateInterval),this.trendUpdateInterval=!1)},prettyHash:function(a){return a&&a[0]==="#"?a.slice(1):null},updateTrends:function(a){var b=this;b.$node.addClass("loading");var c={pc:twttr.loggedIn,promoted_location:twttr.util.params().promoted_location,success:function(c){var d=twttr.anywhere.api.util.buildCollection(twttr.anywhere.api.models.Trend,c.get(0).trends),e=c.get(0).personalized;twttr.trendLocations.current.isPersonalized!=e&&twttr.trendLocations.setPersonalized(e),b.updateTrendsLocation(),b._dialog&&b.dialog().rerender();var f=[],g=[];$trends=b.$find(".js-trends").empty(),d.each(function(c,d){var e=$.extend({attributes:{}},c);e.attributes=$.extend({index:d+1,is_full_page:b.isFullPage,pretty_hash:b.prettyHash(e.attributes.name)},e.attributes),twttr.isRTL&&(e.attributes.name=e.attributes.name.replace(/^#/,"‎#"));var i=(new twttr.views.TrendItem(e)).$html();c.promotedContent&&(a||twttr.API.util.PromotedContent.logTrendImpression(c.promotedContent.id),i.bind("click",function(a){twttr.API.util.PromotedContent.logTrendClick(c.promotedContent.id)}));var j={rank:d,woeid:b.currentWoeid(),component:"dashboard",input:"click",trend:c.name,dialog_open:b._dialog&&b._dialog.isOpen()};c.promotedContent&&(j.promoted_content_id=c.promotedContent.id),i.bind("click",function(a){scribble("show-trend",j),trackClient({section:"dashboard",component:"trend",action:"click"},{query:c.name,woeid:b.currentWoeid(),position:d}),c.promotedContent&&trackClient({section:"dashboard",component:"promoted_trend",action:"click"},{query:c.name,woeid:b.currentWoeid(),position:d})}),i.appendTo($trends),f.push(j),g.push(c.name)}),b.$node.removeClass("loading"),b.isFullPage&&$(".trends-page").removeClass("trends-page-loading"),b.showTrends(),trackClient({component:"trends",action:"results"},{item_names:g,item_count:g.length,referring_event:a||b.trendLocationUpdated?"get_newer":"initial",event_initiator:a?twttr.constants.scribe.CLIENT_SIDE_APP:twttr.constants.scribe.CLIENT_SIDE_USER}),scribble("trend-impression",{component:"dashboard",trends:f})},error:function(c){b.isFullPage&&($(".trends-page").removeClass("trends-page-loading"),a||twttr.helpers.showErrorFromResponse(c)),b.hideTrends()}};twttr.trendLocations.current.trends(c)},updateTrendsLocation:function(){var a=twttr.trendLocations.current,b=twttr.decider.isAvailable("personalized_trends")&&a.isPersonalized?_("Trends"):1===a.woeid?_("Worldwide trends"):Mustache.to_html(_("{{location}} trends"),{location:a.name});this.$find(".js-trend-location").text(b).attr("woeid",a.woeid)},showTrends:function(){!this.isFullPage&&this.$node.show()},hideTrends:function(){!this.isFullPage&&this.$node.hide()}}).deciderKey("trends_component");twttr.isT1?(c.setBaseView(twttr.views.DashboardTrends),c.methods({renderTrends:function(){this.hideTrends()}})):c.methods({renderTrends:function(){var a=this.isFullPage?twttr.views.FullPageTrends:twttr.views.DashboardTrends;(new a).render(this.$node,"append"),this.noSpacer=this.isFullPage}}),a(c)})}),provide("components/onebox/News",function(a){using("_","helpers").as(function(b,_,c){var d=twttr.klass.component("twttr.components.onebox.News").initializer(function(a){var b=this,c=b.getArticle(a);if(!c)return;b.$node.append((new twttr.views.CardNewsOnebox(c)).html()),b.$node.css("visibility","hidden")}).deciderKey("news_onebox").click({".js-news-headline,.onebox-news-url":function(a){trackClient({section:"onebox",component:"news",action:"click"})}}).methods({getTopicName:function(){return _("Top news")},getArticle:function(a){var b=twttr.at("content.articles",a);return b?b.get(0):null},render:function(){var a=this.$find(".js-news-headline"),c=this.$find(".js-news-snippet"),d=a.innerHeight();d>=36?c.css("height","18px"):d>=18&&c.css("height","36px"),b.helpers.ellipsify([a,c],!1,!0,null,{setTitle:"always",ellipsis:"&ellip;"}),b.helpers.ellipsify(this.$find(".onebox-news-url-text")),this.$node.css("visibility","")}});a(d)})}),provide("components/onebox/User",function(a){using("_","helpers","mixins/userActionable").as(function(b,_){var c=twttr.klass.component("twttr.components.onebox.User").initializer(function(a,b){this.items=[];var c=this.getUsers(a);if(!c)return;this.scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({section:"onebox"},{query:b}),this.$node.append((new twttr.views.CardAccountsOnebox(c,this.getViewAllPath(b))).html()),this.$node.css("visibility","hidden"),this.registerUserActionEvents()}).mixin(b.mixins.userActionable).statics({maxUsers:2}).deciderKey("user_onebox").methods({getTopicName:function(){return _("Top people")},getViewAllPath:function(a){var b={query:a};return twttr.isT1?twttr.router.userSearchPath(b):twttr.loggedIn?twttr.router.whoToFollowSearchPath(b):twttr.router.userSearchPath(b)},getUsers:function(a){var b=twttr.at("content.users",a),c=this;return!b||b.isEmpty()?null:(b.array=b.array.splice(0,twttr.components.onebox.User.maxUsers),b.each(function(a){c.items.push(a.idStr),a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)}),b)},render:function(){twttr.isT1?b.helpers.ellipsify(this.$find(".js-onebox-ellipsis")):b.helpers.ellipsify(this.$find(".bio"),!1,!0,null,{setTitle:"always",ellipsis:"&ellip;"}),this.$node.css("visibility","")}});a(c)})}),provide("components/onebox/Sports",function(a){using("_","helpers","mixins/profilePopupActionable").as(function(b,_,c){var d=twttr.klass.component("twttr.components.onebox.Sports").initializer(function(a,b){this._timerId=0,this._event=0;var c=this,d=c.getEvent(a);if(!d)return;if(d.sport!=="soccer")return;c._event=d,c.$node.append((new twttr.views.CardSoccerOnebox(d)).html()),d.events.getMatchState().current_status!=="final"&&c._startPolling(d),this.$node.css("visibility","hidden")}).deciderKey("sports_onebox").click({".team-logo":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"avatar"})},".fullname":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"screen_name"})},".follow-team":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"follow"})},".detail":function(a){trackClient({section:"onebox",component:"sports",action:"open_link"},{url:this._event.events.getMatchedEventData().preview_url})},".recap":function(a){trackClient({section:"onebox",component:"sports",action:"open_link"},{url:this._event.events.getMatchedEventData().recap_url})},".hashtag":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".ticker-event":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".matched-score":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".js-follow-news":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"news_link"})},".js-signup-callout":function(a){if(!twttr.loggedIn){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget).data("user-id");twttr.API.User.find(b,{success:function(a){twttr.dialogs.signinOrSignup({follow:a}).open()},error:function(a){twttr.errors.showErrorFromResponse(a)}})}}}).mixin(twttr.mixins.profilePopupActionable).methods({getEvent:function(a){return twttr.at("content",a)},_renderTicker:function(a){if(a.events.data().follow_news||a.events.getOtherMatchState().length>0)this.$node.find(".tickercontainer").size()===0&&this.$node.find(".js-onebox-soccer-item").append('<div class="tickercontainer"></div>'),this.$node.find(".tickercontainer").empty().append((new twttr.views.SoccerTicker(a)).html())},_renderMatchedEvent:function(a){this.$node.find(".matched-event").empty().append((new twttr.views.SoccerMatchedEvent(a)).html()),twttr.loggedIn||this.$find(".js-user-profile-link").removeClass("js-user-profile-link").addClass("js-signup-callout")},render:function(){this._event&&(this.$node.empty(),this.$node.append((new twttr.views.CardSoccerOnebox(this._event)).html()),this._renderMatchedEvent(this._event),this._renderTicker(this._event),this._event.events.getMatchState().current_status==="final"&&$(".score a").removeClass("live")),this.$node.css("visibility",""),trackClient({section:"onebox",component:"sports",action:"impression"}),this.$find(".ticker").length!==0&&this._tickerScroll(this.$find(".tickercontainer"))},_tickerScroll:function(a){function m(){var a=b.find("li")[l-1];$(a).animate({opacity:0},k,"linear"),b.animate({top:-l*100+"%"},k,"linear",function(){if(!j)return;++l,l-1>=b.find("li").length?(g._renderTicker(g._event),g._tickerScroll(g.$find(".tickercontainer"))):(clearTimeout(i),i=setTimeout(function(){m()},f))})}this._scrollStarted=!0;var b=$(a.children()[0]),c=0,d=0;b.find(".event-item").each(function(a){var b=$(this,a).outerHeight(!0);c+=b,d<b&&(d=b)}),a.height(d),b.height(c);var e=.03,f=2e3,g=this,i,j=!0,k=d/e,l=0;b.find("li").length===1?setTimeout(function(){g._renderTicker(g._event),g._tickerScroll(g.$find(".tickercontainer"))},f):(b.css("top",d),i=setTimeout(function(){m()},f),b.hover(function(){j=!1,clearTimeout(i)},function(){j=!0,i=setTimeout(function(){m()},f)}))},_getEventIds:function(a){var b=[];return $.each(a,function(a,c){b.push(a)}),b.join()},_startPolling:function(a){var b=this;b._timerId=setInterval(function(){var c={statuses:!1,stories:!0,is_t1:twttr.isT1,trim_user:!0,event_ids:b._getEventIds(a.events.items),success:function(a){if(a.stories.length()===0)return;var c=a.stories.get(0),d=$.extend(!0,b._event.events.data().items,b.getEvent(c).events.data().items);b._event.events.data().items=d,b._renderMatchedEvent(b._event),b.$find(".ticker").length===0&&b._renderTicker(b._event),b.$find(".ticker").length!==0&&!b._scrollStarted&&b._tickerScroll(b.$find(".tickercontainer")),b._event.events.getMatchState().current_status==="final"&&(clearInterval(b._timerId),$(".score a").removeClass("live"))}};$(b.$node).parents("body").size()===0||!twttr.decider.isAvailable("sports_onebox_polling")?clearInterval(b._timerId):new Date-a.events.getMatchedEventData().scheduled_start_time_utc>0&&twttr.API.Search.search(query,c)},3e4)}});a(d)})}),provide("components/onebox/Event",function(a){using("_","helpers").as(function(b,_){var c=twttr.klass.component("twttr.components.onebox.Event").initializer(function(a,b){this.scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({section:"onebox",component:"event"},{query:b});var c=a.content.events[0];c&&this.$node.append((new twttr.views.CardEventOnebox(c)).html())}).deciderKey("swift_events_reroute").click({".js-onebox-event-item":function(a){trackClient({section:"onebox",component:"event",action:"click"})}}).methods({render:function(){this.$node.css("visibility","")}});a(c)})}),provide("components/t1/EmptyTimelineRecommendations",function(a){using("components/UserRecommendations").as(function(b){twttr.klass("twttr.components.t1.EmptyTimelineRecommendations").subclassOf(twttr.components.UserRecommendations).initializer(function(a){var b=this;this.bucket=twttr.abdecider.chooseWithoutImpression("empty_timeline_176"),this.one("recommendationsLoaded.EmptyTimelineRecommendations",function(){using(">allCurrentUserDataLoaded",function(){twttr.currentUser.friends({success:function(a){b.friends=a,b.conditionallyEnableDoneButton(),twttr.API.User.bind("follow.EmptyTimelineRecommendations",function(a,c){b.friends.push(c);var d=b.$find('.js-list-item[data-user-id="'+c.id+'"]');d.length!==0&&(b.followEvent=!0,b.loadRecommendations(d)),b.conditionallyEnableDoneButton(),b.renderModuleHeaders()}),twttr.API.User.bind("unfollow.EmptyTimelineRecommendations",function(a,c){b.friends=b.friends.filter(function(a){return a.id!==c.id}),b.conditionallyDisableDoneButton(),b.renderModuleHeaders()})}})})}),this._superInitializer(a)}).destructor(function(){this.unbind(".EmptyTimelineRecommendations"),twttr.API.User.unbind(".EmptyTimelineRecommendations")}).statics({avatarLimit:5}).methods({forceNewSignup:!0,LIST_ITEM_SELECTOR:".js-empty-timeline .js-list-item",conditionallyEnableDoneButton:function(){this.friends.length()>twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1&&this.$find(".js-done").removeClass("disabled")},conditionallyDisableDoneButton:function(){this.friends.length()<twttr.components.t1.EmptyTimelineRecommendations.avatarLimit&&this.$find(".js-done").addClass("disabled")},renderItemView:function(a){var b=new twttr.views.BigAvatarListItem(a);return b.dismissable=!1,b},renderModuleView:function(a,b){var c=this,d={},e;d.following=this.setupFollowingContext(),d.avatar_limit=twttr.components.t1.EmptyTimelineRecommendations.avatarLimit,d.recommendations=[],b.each(function(a){var b=c.renderItemView(a);d.recommendations.push(b)}),(new twttr.views.EmptyTimelineRecommendationsModuleShort(d)).render(this.$node,"append")},getRecPosition:function(a){var b;return this.$find(".js-account-group").each(function(c,d){if(a.attr("data-user-id")==$(d).attr("data-user-id"))return b=c,!1}),b},renderModuleHeaders:function(){var a={},b=this.$find("h2"),c=this.$find("h3");a.following=this.setupFollowingContext(),b.length>0&&b.html((new twttr.views.EmptyTimelineTitle(a)).html()),c.length>0&&c.html((new twttr.views.EmptyTimelineSubtitle(a)).html())},setupFollowingContext:function(){if(twttr.currentUser.friendsCount!==0)return{goal:twttr.components.t1.EmptyTimelineRecommendations.avatarLimit,count:twttr.currentUser.friendsCount,follow_event:this.followEvent||!1,zero:twttr.currentUser.friendsCount===0,one:twttr.currentUser.friendsCount===1,two:twttr.currentUser.friendsCount===2,several:twttr.currentUser.friendsCount>=3&&twttr.currentUser.friendsCount<twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1,almost:twttr.currentUser.friendsCount===twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1,done:twttr.currentUser.friendsCount>=twttr.components.t1.EmptyTimelineRecommendations.avatarLimit}},_generateUserList:function(a){var b=this;return(new twttr.views.EmptyTimelineRecommendationsModuleFollowers({recommendations:a.map(function(a){return b.renderItemView(a)}).toArray()})).$html()}}).click({".js-done":function(a,b){if(b.hasClass("disabled"))return;twttr.mixins.emptyTimelineRecommendations.showing=!1,this.destroy()}}),a(twttr.components.t1.EmptyTimeline)})}),provide("components/t1/dashboard/AbstractDashboard",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.AbstractDashboard").subclassOf(twttr.components.Base).setBaseView(twttr.views.Module).initializer(function(a){var b=this;a=a||{},this.$sections={},this.$itemsContainer=this.$find(".js-items-container"),this.$itemsContainer.length||(this.$itemsContainer=this.$node),this.noSpacer=!0}).methods(twttr.EventProvider).methods({addSection:function(a){if(!a.id||!!this.$sections[a.id])return!1;a.tag=a.tag||"div",a.operation=a.operation||"append";var b=(new twttr.views.ModuleSection({tag:a.tag,id:a.id})).$html();return a.className&&b.addClass(a.className),this.$sections[a.id]=b,a.operation=a.operation||"append",this.$itemsContainer[a.operation](b),b},getSection:function(a){return this.$sections[a]?this.$sections[a]:!1},removeSection:function(a){if(!this.$sections[a])return!1;this.$sections[a].remove(),delete this.$sections[a]}});a(c)})}),provide("components/t1/dashboard/Tweetbox",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Tweetbox").subclassOf(twttr.components.t1.dashboard.AbstractDashboard).initializer(function(a){this.$node.html(a.addClass("flex-module"))});a(c)})}),provide("components/t1/dashboard/ProfileTweetbox",function(a){using("components/t1/dashboard/Tweetbox").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileTweetbox").subclassOf(b.components.t1.dashboard.Tweetbox).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/ProfileFollowCard",function(a){using("components/t1/dashboard/AbstractDashboard","mixins/userActionable","mixins/userUpdateable").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileFollowCard").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseViewOptions({class_name:"profile-card"}).mixin(b.mixins.userActionable,b.mixins.userUpdateable).initializer(function(a){function d(){b.registerUserActionEvents(),b.registerUserUpdateEvents(b.user),b.bind("userUpdated",function(a,c){b.user=c,b.renderStats()})}var b=this;this._superInitializer(),this.user=a;if(twttr.helpers.isCurrentUser(a)){var c=this.renderCard();(new twttr.views.ScreenNameFollowedBy({screen_name:a.screenName,is_current_user:!0})).render(c.$dom.find(".js-username")),d()}else this.getRelationship(a,function(c,e){b.updateUserAttributesFromRelationship(c);var f=b.renderCard();(new twttr.views.ScreenNameFollowedBy({screen_name:a.screenName,followed_by:c.followedBy})).render(f.$dom.find(".js-username")),b.renderUserProfileMenu(b.$find(".js-follow-combo"),b.$find(".js-action-profilemenu"),e),d()})}).methods({renderCard:function(){var a=this,b=new twttr.views.ProfileFollowCard(this.user),c=this.user.impressionId;return b.render(this.$node),setTimeout(function(){a.trigger("followCardRendered")},0),b},renderStats:function(){this.$find(".js-mini-profile-stats").remove(),(new twttr.views.MiniProfileStats(this.user)).render(this.$find(".js-profile-card-actions"),"append")}});a(c)})}),provide("components/t1/dashboard/Flex",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Flex").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.FlexModule).initializer(function(a){this._superInitializer(a)}).methods({addTitle:function(a){this.$itemsContainer.find(".flex-module-title").remove(),(new twttr.views.FlexModuleTitle({title:a.title,view_all_route:a.viewAllRoute})).render(this.$itemsContainer,"prepend")},addMoreLinks:function(a){this.$itemsContainer.find(".js-more-links").remove(),a.length&&(a[a.length-1].is_last=!0),(new twttr.views.FlexModuleMoreLinks({links:a})).render(this.$itemsContainer,"append")}});a(c)})}),provide("components/t1/dashboard/Nav",function(a){using("util").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Nav").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.$itemsContainer=this.$find(".js-items-container"),a.items&&(a.items=twttr.map(a.items,function(a){twttr.is.def(a.name)||(a.name=twttr.router.findMatchingRoute(a.route).name);if(a.type||a.name)a.element_term=b.util.underscore(a.type||a.name)+"_item";return twttr.merge({show_metadata_container:a.metadata,active:twttr.router.getCurrentRoute().name==a.name,count_commaized:a.count?b.util.formatNumber(a.count,twttr.pageLocale):"",visible:!0},a)})),(new twttr.views.Nav(a)).render(this.$node),this.afterRender(this.$node)}).methods({afterRender:$.noop});a(c)})}),provide("components/t1/dashboard/MiniHomeProfile",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass.component("twttr.components.t1.dashboard.MiniHomeProfile").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.MiniHomeProfile).initializer(function(a){var b=this;this._superInitializer(),this.showStats=!!a,this.user=twttr.currentUser,this.renderUser(),this.showStats&&(this.renderStats(),this.attachEvents()),using([twttr.bundleMore,"TweetBox"],function(){b.renderTweetBox()})}).methods({insertTweetbox:function(){if(this.tweetBox)return this.tweetBoxNode;var a=this,b=this.tweetBoxNode=$('<div class="tweet-box"/>');return this.tweetBox=new twttr.TweetBox(b.empty(),twttr.merge(this.getTweetBoxOptions(),{defaultContent:"",id:"main-tweet-box",condensed:!0,statusAction:"update",width:258,height:75,explainLinkShortening:!1,enableDraft:!0,enableAutoGrow:!0,template:{suppress_geo_text:!0,button_text:_("Tweet"),show_title:!1}})),this.tweetBox.bind("tweetSuccess",function(a,b){twttr.showMessage(_("Your Tweet has been sent!"))}),b},getTweetBoxOptions:function(){return{condensedContent:_("Compose new Tweet..."),autocompleteSuggestionLimit:5}},renderUser:function(){(new twttr.views.MiniCurrentUser(this.user)).render(this.$find(".js-profile-summary"),"append")},renderStats:function(){(new twttr.views.MiniProfileStats(this.user)).render(this.$find(".js-mini-profile-stats-container"))},renderTweetBox:function(){this.$tweetBox=this.insertTweetbox(),this.$find(".js-mini-profile-tweet-box").remove(),this.$itemsContainer.append(this.$tweetBox.addClass("tweet-user"))},tweetHandler:function(){twttr.currentUser.sync("statusesCount",twttr.currentUser.statusesCount+1),this.renderStats()},deleteTweetHandler:function(){twttr.currentUser.sync("statusesCount",twttr.currentUser.statusesCount-1),this.renderStats()},attachEvents:function(){var a=this;$(document).bind("currentUserUpdated",function(){a.renderStats()}),twttr.API.Status.bind("update retweet",function(){a.tweetHandler()}),twttr.API.Status.bind("delete unretweet",function(){a.deleteTweetHandler()})},_isCJK:function(){var a=twttr.pageLocale;return a==="ja"||a==="ko"||a==="zh-cn"||a==="zh-tw"}}).click({".js-profile-summary":function(){twttr.router.routeTo(twttr.router.profilePath({screen_name:this.user.screenName}))}});a(c)})}),provide("components/t1/dashboard/ConnectNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ConnectNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"connect-nav",items:[{title:_("Interactions"),route:twttr.router.connectPath(),visible:twttr.decider.isActivityEnabled(),type:"activity"},{name:"mentions",title:_("Mentions"),route:twttr.router.mentionsPath(),active:twttr.router.getCurrentRoute().name==="replies"||twttr.router.getCurrentRoute().name=="mentions",type:"mentions"}]})});a(c)})}),provide("components/t1/dashboard/ProfileNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"profile-nav",items:[{title:_("Tweets"),route:twttr.router.profilePath({screen_name:a.screenName})},{title:_("Following"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followingPath":"userFollowingPath"]({screen_name:a.screenName})},{title:_("Followers"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followersPath":"userFollowersPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="followers"||twttr.router.getCurrentRoute().name=="userFollowers"||twttr.router.getCurrentRoute().name=="followersYouFollow",show_metadata_container:!0},{title:_("Favorites"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"favoritesPath":"userFavoritesPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="favorites"||twttr.router.getCurrentRoute().name=="userFavorites"},{title:_("Requests"),route:twttr.router.followerRequestsPath({screen_name:a.screenName}),visible:twttr.helpers.isCurrentUser(a)&&a["protected"]},{title:_("Lists"),route:twttr.router.subscriptionsPath({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="subscriptions"||twttr.router.getCurrentRoute().name=="memberships"}]}),twttr.helpers.canViewUser(a)&&this.renderMedia()}).methods({renderMedia:function(){this.$find("ul").append((new twttr.components.UserMedia(twttr.profileUser,{view_all_href:twttr.router.userMediaGridPath({screen_name:twttr.profileUser.screenName}),renderHr:!0})).$node)}});a(c)})}),provide("components/t1/dashboard/SettingsNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SettingsNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"settings-nav",items:[{title:_("Accounts & Settings"),route:twttr.router.settingsPath()}]})});a(c)})}),provide("components/t1/dashboard/ListNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ListNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"list-nav",items:[{title:_("Tweets"),route:twttr.router.userListPath({screen_name:a.user.screenName,list_slug:a.slug})},{title:_("List members"),route:twttr.router.listMembersPath({screen_name:a.user.screenName,list_slug:a.slug})},{title:_("List subscribers"),route:twttr.router.listSubscribersPath({screen_name:a.user.screenName,list_slug:a.slug})}]})});a(c)})}),provide("components/t1/dashboard/SearchNav",function(a){using("components/t1/dashboard/Nav","components/SearchFacets").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._query=a,this._superInitializer.call(this,{name:"search-nav",items:[{title:_("Tweets"),route:twttr.router.searchResultsPath({query:a}),type:"tweets"},{title:_("People"),route:twttr.router.userSearchPath({query:a}),name:"userSearch",show_metadata_container:!0,type:"people"}]}),this.renderFacets(a)}).methods({loadUsers:function(a,b){var c=this,d={display_location:"search-component",pc:!1};twttr.API.User.search(a,twttr.merge(d,{success:function(a){var c=new twttr.components.t1.AvatarRow(a);b.find(".js-metadata").html(c.$node)}}))},afterRender:function(a){query=this._query.replace(/(^|\b)(from\:|to\:|near\:|source\:)/g,"");if(query.indexOf(":")!=-1)return;this.loadUsers(query,a)}}).methods({renderFacets:function(a){var c=this,d=!1;this.facets=new b.components.SearchFacets(a),this.facets.bind("urlsLoaded",function(a,b,e){b?d||(c.facets.$node.appendTo(c.$find(".js-items-container")),d=!0):e&&c.facets.$node.remove()})}});a(c)})}),provide("components/t1/dashboard/DiscoverNav",function(a){using("components/t1/dashboard/Nav","components/t1/AvatarRow").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.DiscoverNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"discover-nav",items:[{title:_("Stories"),route:twttr.router.discoverPath(),type:"discover"},{title:_("Activity"),route:twttr.router.networkActivityPath(),visible:twttr.decider.isActivityEnabled(),type:"activity"},{title:_("Who to follow"),route:twttr.router.whoToFollowSuggestionsPath(),show_metadata_container:!0,type:"suggestions"},{title:_("Find friends"),route:twttr.router.whoToFollowImportPath(),type:"import"},{title:_("Browse categories"),route:twttr.router.whoToFollowInterestsPath(),active:twttr.router.getCurrentRoute().name=="whoToFollowInterestsCategory"||twttr.router.getCurrentRoute().name=="whoToFollowInterests",type:"interests"}]}),twttr.loggedIn&&this.renderWTFFacePile()}).methods({renderWTFFacePile:function(){var a=this;twttr.currentUser.recommendedUsers2(function(b){var c=b.map(function(a){return a.user}),d=new twttr.components.t1.AvatarRow(c);a.$find('[data-name="whoToFollowSuggestions"] .js-metadata').html(d.$node)})}});a(c)})}),provide("components/t1/dashboard/ProfileSummary",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileSummary").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleProfileSummary).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/ListFollowCard",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass.component("twttr.components.t1.dashboard.ListFollowCard").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseViewOptions({class_name:"follow-card"}).initializer(function(a){this._superInitializer(),this.render(a),this._registerEvents(a)}).methods({render:function(a){(new twttr.views.ListFollowCard(a)).render(this.$node)},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"update follow unfollow add remove",function(c,d){d.id===a.id&&((c.type==="follow"||c.type==="unfollow")&&d.sync("following",c.type==="follow"),b.render(d))})}});a(c)})}),provide("components/t1/dashboard/SearchImages",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchImages").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleSearchImages).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/SearchVideos",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchVideos").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleSearchVideos).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/AvatarRow",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.AvatarRow").subclassOf(twttr.components.Base).initializer(function(a,b){var b=b||{};this.avatarLimit=b.avatarLimit||7,this.renderFacePile(a)}).methods({renderFacePile:function(a){var b=a.slice(0,this.avatarLimit);b.length()>0&&((new twttr.views.AvatarRow(b)).render(this.$node,"html"),this.$find(".js-user-tipsy").tipsy({gravity:"s"}))}});a(c)})}),provide("components/t1/SearchHeader",function(a){using("helpers").as(function(b){var c=twttr.klass("twttr.components.t1.SearchHeader").subclassOf(twttr.components.Base).mixin(twttr.mixins.i18nTweetBox).setBaseView(twttr.views.SearchHeader).initializer(function(a){this.setQuery(a),this.registerEvents(),this.registerSearchMenuAction(),twttr.search.isSavedSearch(a)&&this.toggleSavedSearchOn()}).methods({registerEvents:function(){var a=this;this.$find(".js-search-header-query").bind("keydown keypress keyup",function(b){a.markPunctuation(b,$(this))});var c=this.$find("form.js-search-form");b.helpers.addFormEvents(c,function(a,b){var c=b.q;c?(twttr.search.setLastQuerySource(twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.doSearch(c)):twttr.showMessage(_("Enter your query before submitting the search form!"))}),twttr.search.formifyLatestQuery(c)},toggleSavedSearchOn:function(){this.$find(".js-toggle-saved-search-link").html(_("Remove saved search")).addClass("saved").removeClass("not-saved"),this.$find(".js-search-title").html(_("Saved search results"))},toggleSavedSearchOff:function(){this.$find(".js-toggle-saved-search-link").html(_("Save search")).addClass("not-saved").removeClass("saved"),this.$find(".js-search-title").html(_("Search results"))},registerSearchMenuAction:function(){var a=this;this.$node.delegate(".js-search-dropdown-button","click",function(b){return a.toggleSearchMenu(),b.preventDefault(),b.stopPropagation(),!1})},showSearchMenu:function(a){var b=this;a.addClass("open"),$(document).bind("click.button",function(){b.hideSearchMenu(a)})},hideSearchMenu:function(a){a.removeClass("open"),$(document).unbind("click.button")},toggleSearchMenu:function(a){var b=this,c=this.$node.find(".js-search-dropdown");c.hasClass("open")?this.hideSearchMenu(c):this.showSearchMenu(c)},setQuery:function(a){this.$find(".js-search-header-query").val(a)},focusQuery:function(){this.$find(".js-search-header-query").focus()}});a(c)})}),provide("components/t1/PeopleSearchStreamHeader",function(a){using("helpers").as(function(b){var c=twttr.klass("twttr.components.t1.PeopleSearchStreamHeader").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},b.placeholder=b.placeholder||_("Search using a person’s full name or @username"),b.button_text=b.buttonText||_("Search Twitter"),this.searchRoute=b.searchRoute=a,(new twttr.views.StreamHeaderPeopleSearch(b)).render(this.$node,"append"),this.registerEvents()}).methods({registerEvents:function(){var a=this.$find("form.js-search-form"),c=this;b.helpers.addFormEvents(a,function(b,d){!a.find('input[name="q"]').hasClass("js-placeholded")&&d.q!=""&&(trackClient({component:"user_search_form",action:"search"},{query:d.q}),twttr.router.routeTo(c.searchRoute({query:d.q})))})}});a(c)})}),provide("components/t1/UserSimilaritiesList",function(a){using("_","mixins/userRecommendationsHelper","mixins/userActionable").as(function(b,_){var c=twttr.klass("twttr.components.t1.UserSimilaritiesList").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},this.profileUser=a,this.screenName=this.profileUser.screenName,this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.profileUser.id}),this.whotofollowComponentName="whotofollow_dropdown",this.ignoreScribeItemPosition=!0,this.initTime=+(new Date),this.userRecommendationsAvailable()?this.loadRecommendations():this.trigger("notRendered","darkmoded"),this.registerUserActionEvents(),this.registerUserRecommendationsActions()}).mixin(b.mixins.userRecommendationsHelper,b.mixins.userActionable).click({".js-close":function(a){a.preventDefault(),this.trigger("close")}}).methods({renderView:function(a){var b=(new twttr.views.UserSimilaritiesList).$html(),c=b.find(".js-users-list");a.map(function(a){var b=new twttr.views.StreamUser(a);(new twttr.views.StreamItem({item_html:b.html(),item_type:"user",item_class:"stream-item"})).render(c,"append")}),c.children(":last-child").addClass("stream-end-item"),this.$node.append(b)},loadRecommendations:function(a){this.fetch({limit:2,success:twttr.bind(this,function(a){var b=this.recsToUsers(a);this.trackImpressions(b,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:this.profileUser.id}),b.length()>0?(this.renderView(b),this.hasRendered(),this.trigger("recommendationsLoaded")):this.trigger("notRendered","noMoreRecommendations")}),error:twttr.bind(this,function(a){this.trackImpressions(null,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:this.profileUser.id,error_status:a.status}),this.trigger("notRendered",a)})})}});a(twttr.components.UserSimilaritiesList)})}),provide("components/pages/mixins/profileT1",function(a){using("_","components/t1/dashboard/ProfileNav","components/t1/dashboard/ProfileFollowCard","components/SignupCallOut").as(function(b,_){var c=twttr.klass.mixin("twttr.components.pages.mixins.profileT1",function(){this.view(twttr.views.PageProfile).methods({allLists:function(a){var b=this,c=this._defaultedScreenName(a.screen_name);this.getUserInfo(c,function(){twttr.helpers.canViewUser(b.profileUser)?(b.updatePageTitle(_("Twitter / {{screenName}}'s Subscriptions",{screenName:c})),b._highlightNavIfCurrentUser(c),b.selectCurrentSideNav(),b._switchToStream({screenName:c,stream:twttr.streams.AllSubscriptionsUser})):twttr.router.routeTo(twttr.router.profilePath({screen_name:c}))},{batch:!twttr.loggedIn,profiler:!0})},memberships:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Lists following {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.MembershipsUser})},with_replies:function(a,b){var c=this,d=a.screen_name.toLowerCase();this.loading(d),this.getUserInfo(d,function(){c.updatePageTitle(_("{{{fullName}}} ({{{screenName}}}) on Twitter",{fullName:c.profileUser.name,screenName:d})),c._highlightNavIfCurrentUser(d),c._switchToStream({screenName:d,stream:twttr.streams.User,tab:"tweets"}),c.selectSideNav("profile"),c.checkWithheld()},{batch:!twttr.loggedIn,profiler:!0},twttr.bind(this,this.noUserFoundCallback))},similarTo:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Similar to {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this.selectCurrentSideNav(),this._switchToStream({screenName:c,stream:twttr.streams.UserSimilaritiesStream})},getTweetBoxOptions:function(){return{width:258,height:75,explainLinkShortening:!1,condensedContent:"@"+this.profileUser.screenName+" ",dynamicTitle:!1,autoCompleteSuggestionLimit:5,template:{suppress_geo_text:!0,name:this.profileUser.name,button_text:_("Tweet")}}},getDashboardComponents:function(){var a=[],c=this;twttr.loggedIn||a.push(new b.components.SignupCallOut("profile",{profileUser:this.profileUser})),this.shouldShowTweetBox()&&a.push(new twttr.components.t1.dashboard.ProfileTweetbox(this.renderTweetbox()));var d=new twttr.components.UserRecommendations({screenName:twttr.profileUser.screenName});return d.bind("recommendationsLoaded",function(){"similarTo"===twttr.router.getCurrentRoute().name&&c.selectSideNav("similarTo")}),a.concat([new twttr.components.t1.dashboard.ProfileNav(this.profileUser),new twttr.components.JapaneseAd,d,new twttr.components.Footer])},addSimilarUsersDropdown:function(){var a=this,b=new twttr.components.t1.UserSimilaritiesList(this.profileUser);b.bind("recommendationsLoaded",function(){a.userSimilaritiesListComponent=b,(!$.browser.msie||$.browser.version!=7)&&b.$node.hide(),a.addContainerComponent(a.$find(".js-content-main"),b,"before"),(!$.browser.msie||$.browser.version!=7)&&b.$node.slideDown(300),twttr.router.one("routed",function(){a.removeSimilarUsersDropdown()})}),b.bind("notRendered",function(){b.destroy()}),b.bind("close",function(){a.removeSimilarUsersDropdown()})},removeSimilarUsersDropdown:function(){var a=this.userSimilaritiesListComponent;this.userSimilaritiesListComponent=null,a&&($.browser.msie&&$.browser.version==7?a.destroy():a.$node.slideUp(300,function(){a.destroy()}))},addBanner:function(){var a=this.bannerPreviewUrl||this.profileUser.profileBannerUrl;if(a){var b=(new twttr.views.ProfileBanner({banner_url:decodeURIComponent(a)})).html();this.$topContent.find(".profile-card").append(b)}},addImpressionData:function(a){a.profile_id=this.profileUser&&this.profileUser.id||twttr.profileUser&&twttr.profileUser.id}}).addAfterRender(function(){var a=this,c=new b.components.t1.dashboard.ProfileFollowCard(this.profileUser);c.bind("follow.user",function(){a.addSimilarUsersDropdown()}),c.bind("unfollow.user",function(){a.removeSimilarUsersDropdown()}),c.bind("followCardRendered",function(){a.addBanner()}),this.addTopContentComponent(c)}).addOnSwitchTo(function(){var a=this;$(document).bind("tweetSuccess",function(b,c){var d=a.streamManager.getCurrent().trigger("didTweet",[c])})}).addOnSwitchAway(function(){$(document).unbind("tweetSuccess")})});a(c)})}),provide("components/pages/mixins/profileP1",function(a){using("_","constants").as(function(b,_){var c=twttr.klass.mixin("twttr.components.pages.mixins.profileP1",function(){this.methods({getTweetBoxOptions:function(){return{width:482,condensedContent:_("Tweet to {{screen_name}}",{screen_name:"@"+this.profileUser.screenName}),template:{button_text:_("Tweet"),show_title:!1}}},getDashboardComponents:function(){var a=[];a.push(new twttr.components.JapaneseAd),this.renderTweetbox(),twttr.loggedIn||a.push(new twttr.components.SignupCallOut("profile",{profileUser:twttr.profileUser}));var c=twttr.helpers.userNoobLevel(twttr.currentUser),d=twttr.helpers.isProfileUser();return d&&c>=b.constants.noob.total?a=a.concat(this.getNoobDashboardComponents(c)):(a.push(new twttr.components.DashboardProfileStats(twttr.profileUser)),a.push(new twttr.components.UserMedia(twttr.profileUser,{renderHr:!0})),this._isSocialContextAvailable()&&a.push(new twttr.components.SocialContext),twttr.loggedIn&&twttr.decider.isAvailable("whotofollow_similarities")&&a.push(new twttr.components.UserRecommendations({screenName:twttr.profileUser.screenName})),twttr.loggedIn&&a.push(new twttr.components.RecentProfileActivity(twttr.profileUser)),twttr.API.User.bind("block",this.userWasBlocked)),a.push(new twttr.components.Footer),a},getNoobDashboardComponents:function(a){var c=[],d=twttr.profileUser;c.push(new twttr.components.DashboardProfileStats(d,this.dashStatsTitle()),new twttr.components.UserMedia(twttr.profileUser,{renderHr:!0}));var e=b.constants.noob;switch(a){case e.invited:case e.silent:case e.popular:case e.struggling:c.push(new twttr.components.RecentProfileActivity(d));break;case e.friendless:case e.lonely:c.push(new twttr.components.RecentlyFollowed);break;case e.total:case e.talking:default:}return c.push(new twttr.components.GettingStarted(a)),c},memberships:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Lists following {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.Memberships})}}).click({".stream-tab-lists":function(a,b){$(a.target).is(".tab-text, .tab-text *")&&twttr.viewHelpers.superListDropdown(twttr.profileUser,b,function(a){a.render(b,"append"),a.open()})},".stream-tab-following.dropdown-link":function(a,b){a.preventDefault();if(this._followingDropDown)return;var c=twttr.profileUser.screenName,d=[{name:_("View as list of people &rarr;"),href:twttr.router.userFollowingPath({screen_name:c})},{name:_("View as timeline &rarr;"),href:twttr.router.userFollowingTweetsPath({screen_name:c})}];$(a.target).hasClass("tab-text")&&(this._followingDropDown=new twttr.control.Dropdown(b,{itemView:"StreamLink",items:d}),this._followingDropDown.render(b,"append"),this._followingDropDown.open())},".stream-tab-followers.dropdown-link":function(a,b){if(!this._isSocialContextAvailable())return;var c=twttr.profileUser.screenName;if(this._followersDropDown)return;$(a.target).hasClass("tab-text")&&(this._followersDropDown=new twttr.control.Dropdown(b,{itemView:"StreamLink",items:[{name:_("All followers &rarr;"),href:twttr.router.userFollowersPath({screen_name:c})},{name:_("Followers you follow &rarr;"),href:twttr.router.followersYouFollowPath({screen_name:c})}]}),this._followersDropDown.render(b,"append"),this._followersDropDown.open())}})});a(c)})}),provide("components/t1/dashboard/ProfileNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"profile-nav",items:[{title:_("Tweets"),route:twttr.router.profilePath({screen_name:a.screenName})},{title:_("Following"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followingPath":"userFollowingPath"]({screen_name:a.screenName})},{title:_("Followers"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followersPath":"userFollowersPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="followers"||twttr.router.getCurrentRoute().name=="userFollowers"||twttr.router.getCurrentRoute().name=="followersYouFollow",show_metadata_container:!0},{title:_("Favorites"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"favoritesPath":"userFavoritesPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="favorites"||twttr.router.getCurrentRoute().name=="userFavorites"},{title:_("Requests"),route:twttr.router.followerRequestsPath({screen_name:a.screenName}),visible:twttr.helpers.isCurrentUser(a)&&a["protected"]},{title:_("Lists"),route:twttr.router.subscriptionsPath({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="subscriptions"||twttr.router.getCurrentRoute().name=="memberships"}]}),twttr.helpers.canViewUser(a)&&this.renderMedia()}).methods({renderMedia:function(){this.$find("ul").append((new twttr.components.UserMedia(twttr.profileUser,{view_all_href:twttr.router.userMediaGridPath({screen_name:twttr.profileUser.screenName}),renderHr:!0})).$node)}});a(c)})}),provide("components/pages/mixins/listT1",function(a){using("components/t1/dashboard/ListNav","components/t1/dashboard/ListFollowCard","components/NewestListMembers","components/MoreLists","components/Footer").as(function(b){var c=twttr.klass.mixin("twttr.components.pages.mixins.listT1",function(){this.view(twttr.views.Page).methods({_registerEvents:function(a){var c=this;twttr.API.List.bind("update",function(d,e){if(e.id===a.id){var f=c.$find(".list-nav").closest(".component"),g=c.$find(".dashboard > *").index(f);f.remove(),c.addDashboardComponent(new b.components.t1.dashboard.ListNav(e),g+1)}})},getDashboardComponents:function(a){return this.listFollowCard=new b.components.t1.dashboard.ListFollowCard(a),[this.listFollowCard,new b.components.t1.dashboard.ListNav(a),new b.components.NewestListMembers(a),new b.components.MoreLists(a),new b.components.Footer]},addImpressionData:function(a){a.profile_id=this.owner&&this.owner.id||twttr.profileUser&&twttr.profileUser.id,a.message=this._listSlug}})});a(c)})}),provide("multiGlobals/MessageManagerMonitor",function(a){using().as(function(a){if(twttr.isT1){var b;twttr.decider.isAvailable("phoenix_use_conversation_endpoint")?b=twttr.messageManager=new twttr.ConversationManager:b=twttr.messageManager=new twttr.MessageManager,b.bind("pendingThreads",function(){var a=b.hasPendingThreads();a?($("div.js-topbar li.js-session").addClass("new"),$("div.js-topbar span.js-direct-message-count").addClass("new").text(a)):($("div.js-topbar li.js-session").removeClass("new"),$("div.js-topbar span.js-direct-message-count").removeClass("new").text(""))}),b.setupContinuousPoll()}}),a()}),provide("google",function(a){using().as(function(b){using(twttr.bundleMore,function(){if(twttr.isTestEnv)return;jQuery.active>0?$(document).one("ajaxComplete",twttr.insertGAScriptElement):twttr.insertGAScriptElement()}),a()})}),provide("ttft_ajax",function(a){using().as(function(b){using(twttr.bundleMore,function(){var a=0,b=0,c=function(){++b>=a&&(window.ttft.ajaxComplete(a),$(document).unbind("ajaxComplete",c))};window.ttft&&$.active&&($(document).ajaxComplete(c),activeAjaxCount=$.active)}),a()})}),provide("mixins/ActivityViewHelpers",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.ActivityViewHelpers",function(){var a=3,b="sources",c="targets",d="target_objects",e="StreamTweet",f="ActivityItemTweet",g="StreamUser",i="StreamList",j="ActivityItemUser",k="ActivityItemTruncatedTweet",l="User",m="List",n="Status",o={User:{Status:["user"],List:["user"],User:[]},Status:{Status:[],User:["status"],List:[]},List:{Status:[],User:["user"],List:[]}},p={User:twttr.isT1?"ActivityUserLink":"UserLink",List:"ListLink"},q={your_activity:p,profile_activity:p,activity:p,dashboard:{User:"UserFullName",List:"ListLink"}},r={User:"screen_name",List:"list_title"};twttr.isT1&&(f="StreamTweet",j="UserAvatarLink24",k="LatestTweet");var s={your_activity:{favorite:{sources:{view:j,objectType:l,object:b,max:15,useTruncated:!0},targets:{view:k,objectType:n,object:c,max:1,useTruncated:!1}},mention:{view:e,objectType:n,object:d,max:1},reply:{view:e,objectType:n,object:c,max:1},retweet:{sources:{view:j,objectType:l,object:b,max:15,useTruncated:!0},targets:{view:k,objectType:n,object:d,max:1,useTruncated:!1}},follow:{view:j,objectType:l,object:b,max:15},list_member_added:{view:j,objectType:l,object:c,max:15},list_created:{view:i,objectType:m,object:c,max:1}},profile_activity:{favorite:{view:f,objectType:n,object:c,max:1},mention:{view:f,objectType:n,object:d,max:1},reply:{view:f,objectType:n,object:c,max:1},retweet:{view:f,objectType:n,object:d,max:1},follow:{view:g,objectType:l,object:c,max:12},list_member_added:{view:g,objectType:l,object:c,max:12},list_created:{view:i,objectType:m,object:c,max:1}},activity:{favorite:{primary:{view:f,objectType:n,object:c,max:1},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},mention:{view:f,objectType:n,object:d,max:1},reply:{view:f,objectType:n,object:c,max:1},retweet:{primary:{view:f,objectType:n,object:d,max:1},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},follow:{primary:{view:twttr.isT1?"StreamUser":"ActivityItemUser",objectType:l,object:c,max:twttr.isT1?10:12},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},list_member_added:{view:twttr.isT1?"StreamUser":"ActivityItemUser",objectType:l,object:c,max:10},list_created:{view:i,objectType:m,object:c,max:1}},dashboard:{favorite:{max:0},mention:{max:0},reply:{max:0},retweet:{max:0},follow:{max:0},list_member_added:{max:12},list_created:{max:1}}},t={sources:b,targets:c,target_objects:d},u={favorite:t,mention:t,reply:t,retweet:t,follow:t,list_member_added:t,list_created:t},v=[[[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]]],w=[[_("{{{sources_screen_name_0}}} created list {{{targets_list_title_0}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}} and {{{targets_list_title_1}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}}, {{{targets_list_title_1}}} and {{{targets_list_title_2}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others.</span>{{#link_targets_count}}</a>{{/link_targets_count}}")]],x={favorite:{your_activity:[[_("{{{sources_screen_name_0}}} favorited your Tweet"),_("{{{sources_screen_name_0}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited your Tweet"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited your Tweet"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited your Tweet"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited your Tweets")]],profile_activity:[_("{{{sources_screen_name_0}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:")],activity:[_("{{{sources_screen_name_0}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>favorited</span> <span class='dashboard-activity-item-entity'>{{full_targets_count}} Tweets</span>")],_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} <span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>")]},mention:{your_activity:[_("{{{sources_screen_name_0}}} mentioned you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} mentioned you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} mentioned you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;mentioned you")],profile_activity:null,activity:null},reply:{your_activity:[_("{{{sources_screen_name_0}}} replied to you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} replied to you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} replied to you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;replied to you")],profile_activity:null,activity:null},retweet:{your_activity:[_("{{{sources_screen_name_0}}} retweeted you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} retweeted you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} retweeted you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;retweeted you")],profile_activity:[_("{{{sources_screen_name_0}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:")],activity:[_("{{{sources_screen_name_0}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{target_objects_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{full_target_objects_count}} people</span>")],_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{target_objects_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{full_target_objects_count}}} people</span>")]},follow:{your_activity:[_("{{{sources_screen_name_0}}} followed you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} followed you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} followed you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;followed you")],profile_activity:[_("{{{sources_screen_name_0}}} followed:")],activity:[_("{{{sources_screen_name_0}}} followed:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} followed:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} followed:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;followed:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{full_targets_count}} people</span>")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} other</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} other</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{targets_count}} people</span>")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{targets_count}} people</span>")]]},list_member_added:{your_activity:[[[_("{{{sources_screen_name_0}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]]],profile_activity:v,activity:v,dashboard:[[[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to a list"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to {{#link_target_objects_count}}<span class='dashboard-activity-item-count'>{{/link_target_objects_count}}<span class='count-wrap'>{{full_target_objects_count}}</span>{{#link_target_objects_count}}</span>{{/link_target_objects_count}}&#32;lists")],[_("{{{sources_screen_name_0}}} added {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;to a list"),_("{{{sources_screen_name_0}}} added {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;to {{#link_target_objects_count}}<span class='dashboard-activity-item-count'>{{/link_target_objects_count}}<span class='count-wrap'>{{full_target_objects_count}}</span>{{#link_target_objects_count}}</span>{{/link_target_objects_count}}&#32;lists")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to a list"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists")]]]},list_created:{your_activity:null,profile_activity:w,activity:w,dashboard:[_("{{{sources_screen_name_0}}} made a list"),_("{{{sources_screen_name_0}}} made {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;lists")]}},y={your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:null},activity:{sourceClass:l,targetClass:l,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:null}},z={favorite:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:null},activity:{sourceClass:l,targetClass:l,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:null}},mention:y,reply:y,retweet:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:l},activity:{sourceClass:l,targetClass:l,targetObjectClass:l},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:l}},follow:y,list_member_added:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:m},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:m},activity:{sourceClass:l,targetClass:l,targetObjectClass:m},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:m}},list_created:{your_activity:null,profile_activity:{sourceClass:l,targetClass:m,targetObjectClass:null},activity:{sourceClass:l,targetClass:m,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:m,targetObjectClass:null}}},A={favorite:"activity-fav",mention:"activity-reply",reply:"activity-reply",retweet:"activity-rt",follow:"activity-follow",list_member_added:"activity-list",list_created:"activity-list"},B;twttr.isT1?B={favorite:[_("<span class='show-text'>{{hidden_count}} other favorite</span><span class='hide-text'>Hide other favorite</span>"),_("<span class='show-text'>{{hidden_count}} other favorites</span><span class='hide-text'>Hide other favorites</span>")],mention:null,reply:[_("<span class='show-text'>{{hidden_count}} other reply</span><span class='hide-text'>Hide other reply</span>"),_("<span class='show-text'>{{hidden_count}} other replies</span><span class='hide-text'>Hide other reply</span>")],retweet:[_("<span class='show-text'>{{hidden_count}} other retweet</span><span class='hide-text'>Hide other retweet</span>"),_("<span class='show-text'>{{hidden_count}} other retweets</span><span class='hide-text'>Hide other retweets</span>")],follow:null,list_member_added:null,list_created:null}:B={favorite:_("<span class='show-text'>View other favorited Tweets by {{screen_name}}</span><span class='hide-text'>Hide other favorited Tweets by {{screen_name}}</span>"),mention:null,reply:_("<span class='show-text'>View other replies by {{screen_name}}</span><span class='hide-text'>Hide other replies by {{screen_name}}</span>"),retweet:_("<span class='show-text'>View other retweets by {{screen_name}}</span><span class='hide-text'>Hide other retweets by {{screen_name}}</span>"),follow:null,list_member_added:null,list_created:null},this.statics({objectClasses:z,objectStrings:x,supplements:s,iconClasses:A,supplementViewAllSentences:B,lineItemObjects:u,maxQualifiedEntities:a,viewForObjectType:q,substitutionKeyForObjectType:r,translateToObjectType:o})}),a(twttr.mixins.ActivityViewHelpers)})}),provide("multiGlobals/more_views",function(a){using("_","util","constants").as(function(b,_){twttr.view("twttr.views.BaseAPIList",function(){var a=this;twttr.views.Base.apply(this,arguments),this.items=[];if(!this.obj)return;this.obj.each(function(b){a.items.push(new a.ItemView(b))})}).methods({ItemView:twttr.views.BaseAPI}),twttr.view("twttr.views.UserImage24").template(twttr.templates.user_image_24),twttr.view("twttr.views.UserAvatarLink24").template(twttr.templates.user_avatar_link_24),twttr.view("twttr.views.LinkSimpleList",function(a){this.links=a}),twttr.view("twttr.views.LinkList",function(a,b){var a=a.array||a,c=a.length-1;this.links=twttr.map(a,function(a,d){return twttr.merge({separator:d==c?!1:b},a)})}),twttr.view("twttr.views.SlideshowTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SimpleTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SimpleTweetLarge",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SingleTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>").find("a[data-twitter-media-url='true']").attr("target","").end();return b.html()},include_embed_link:function(){return twttr.decider.isAvailable("embed_code_dialog")&&twttr.app.isOnPage("permalink")&&!this.user["protected"]},is_permalink:function(){return twttr.app.isOnPage("permalink")}}),twttr.view("twttr.views.FollowingTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({show_follow_action:!0}),twttr.view("twttr.views.DiscoveryStreamTweet",function(){twttr.views.StreamTweet.apply(this,arguments)}).subclassOf(twttr.views.StreamTweet).template(twttr.templates.stream_tweet_discovery).statics({has:function(a,b){var c=b.hasOwnProperty(a)&&!twttr.is.falsy(b[a]);if(c&&twttr.is.array(b[a])){if(b[a].length==0)return!1;b[a][b[a].length-1].is_last=!0}return c}}).methods({show_follow_action:!0,has_retweeters:function(){return twttr.views.DiscoveryStreamTweet.has("retweeters",this.network_activity)},has_retweet_count:function(){return twttr.views.DiscoveryStreamTweet.has("retweet_count",this)}}),twttr.view("twttr.views.ActivityItemTweet",function(){twttr.views.StreamTweet.apply(this,arguments)}).subclassOf(twttr.views.StreamTweet).methods({should_callout_tweet_actions:function(){return!0}}),twttr.view("twttr.views.UnclickableTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>");return b.find("a").replaceWith(function(){return"<a>"+$(this).contents().text()+"</a>"}),b.html()}}),twttr.view("twttr.views.SemiClickableTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).template(twttr.templates.unclickable_tweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>");return b.find("a.pretty-link").each(function(){$(this).addClass("non-link").removeAttr("href")}),b.html()}}),twttr.view("twttr.views.LatestTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({full_timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0,!1,!0)}}),twttr.view("twttr.views.ActivityItemTruncatedTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.EmbeddedTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.DetailsPaneTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.InReplyTo",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.ProfilePane",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats).methods({impression_cookie:function(){if(!this.promoted_content)return;var a=[];return JSON.stringify([this.id,this.promoted_content.impression_id,this.promoted_content.disclosure_type,this.promoted_content.disclosure_text,a])}}),twttr.view("twttr.views.MessageThread",function(a){twttr.views.Base.apply(this,arguments),this.items=[];for(var b=0;b<a.length;b++)this.items.push(new twttr.views.Message(a[b]))}).subclassOf(twttr.views.Base),twttr.view("twttr.views.ConversationThread",function(a){twttr.views.Base.apply(this,arguments),this.items=[];var b=null;for(var c=0;c<a.messages.length;c++){var d=new twttr.views.Message(a.messages[c]);b&&b.time_ago()!==d.time_ago()&&(d.delimiter_text=d.time_ago()),this.items.push(d),b=d}}).subclassOf(twttr.views.Base).methods({screen_name:function(){return this.threadId}}),twttr.view("twttr.views.SmsFollow").methods({show_sms_prompt:function(){return $.inArray(twttr.pageLocale,["ja","ko"])==-1},sms_follow_text:function(){var a="<strong>follow "+this.screen_name+"</strong>";switch(twttr.requestFullCity.substr(0,2).toLowerCase()){case"us":var b="40404",c=_("the United States");break;case"ca":var b="21212",c=_("Canada");break;default:return _('Text {{{command}}} to <a href="#" class="sms-codes-link">your carrier\'s shortcode</a>',{command:a})}return _("Text {{{command}}} to {{{number}}} in {{{country}}}",{command:a,number:"<strong>"+b+"</strong>",country:'<a href="#" class="sms-codes-link">'+c+"</a>"})}}),twttr.view("twttr.views.PermalinkSignupCallOut").subclassOf(twttr.views.SmsFollow),twttr.view("twttr.views.ProfileActions").subclassOf(twttr.views.SmsFollow).methods({is_current_user:function(){return twttr.helpers.isCurrentUser(this.user)},can_view:function(){return twttr.helpers.canViewUser(this.user)},show_device_notifications:function(){return!this.is_current_user()&&this.following&&(twttr.currentUser.lang!="ja"||twttr.decider.isAvailable("email_device_settings"))},notifications_on_for_user:function(){return twttr.currentUser.deviceSetup&&this.notifications},is_admin:function(){return twttr.is.def(twttr.isAdmin)}}),twttr.view("twttr.views.MessageThreadPreview").methods({last_was_yours:function(){return twttr.helpers.isCurrentUser(this.last_message().sender)},message_count:function(){return this.messages.length},last_message:function(){return this._last_message?this._last_message:this._last_message=new twttr.views.Message(this.messages[0])},other_person:function(){return new twttr.views.User(this.last_was_yours()?this.last_message().recipient:this.last_message().sender)},has_new_message:function(){return this.obj.hasNewMessages()}}),twttr.view("twttr.views.ConversationThreadUser",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.ConversationThreadPreview",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({message_count:function(){return this.count},last_message_date:function(){return this.lastMessageDate},timestamp:function(){return twttr.helpers.timeAgo(this.lastMessageDate,!0,!0)},other_person:function(){return new twttr.views.ConversationThreadUser(this.user)}}),twttr.view("twttr.views.Message",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({linkified_text:function(){var a=b.util.linkify(this.text,{nofollow:!0});return a=b.util.linkifyEntities(a,this),a},timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0,!0)},time_ago:function(){return twttr.helpers.timeAgoRounded(this.actual_timestamp())},actual_timestamp:function(){return twttr.helpers.parseDateString(this.created_at)}}),twttr.view("twttr.views.ProfileSignupCallOut",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.DashboardProfileStats",function(a,b){twttr.views.BaseStats.apply(this,[a]),this.profileStatsTitle=b}).subclassOf(twttr.views.BaseStats).methods({profile_stats_title:function(){return this.profileStatsTitle||_("About @{{screen_name}}",{screen_name:this.obj.screenName})}}),twttr.view("twttr.views.UserStats",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.TrendItem",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({is_sponsored:function(){return!!this.promoted_content},promoted_badge_class:function(){return"badge-"+(this.promoted_content.disclosure_type||"promoted")},trend_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.TREND}}),twttr.view("twttr.views.LocalTrendLocation",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.LocalTrendLocationNew",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.FollowList").methods({follow_list:function(){return(new twttr.views.UserThumbList(this.users)).html()}}),twttr.view("twttr.views.LocalTrends",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({_sortPlaces:function(a){return a.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0})},country_locations:function(){var a=[],c;for(var d=0;d<this.items.length;d++){var e=this.items[d];if(e.placeType.code!==b.constants.placeTypes.city){if(e.placeType.code==19){c=e;continue}a.push(e)}}return a=this._sortPlaces(a),c&&a.unshift(c),a},city_locations:function(){var a=[];for(var c=0;c<this.items.length;c++){var d=this.items[c];d.placeType.code===b.constants.placeTypes.city&&a.push(d)}return a=this._sortPlaces(a),a}}),twttr.view("twttr.views.LocalTrendsNew",function(a,b){twttr.views.BaseAPIList.call(this,a),this.forceShowLocations=b}).subclassOf(twttr.views.BaseAPIList).methods({_sortPlaces:function(a){return a.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0})},breadcrumbs:function(){if(this.is_personalized())return null;var a=twttr.trendLocations.withFilterAncestors().reverse();if(twttr.decider.isAvailable("personalized_trends")){var b=twttr.trendLocations.current;a[a.length-1].woeid!=b.woeid&&a.push(b)}return a[a.length-1]=$.extend({is_last:!0},a[a.length-1]),a},is_personalized:function(){return twttr.decider.isAvailable("personalized_trends")&&twttr.trendLocations.current.isPersonalized},show_personalized:function(){return this.is_personalized()&&!this.forceShowLocations},locations:function(){var a=this._sortPlaces(twttr.trendLocations.currentChildren());return twttr.trendLocations.current.isPersonalized&&a.unshift(twttr.trendLocations.worldwide()),a},locationsFor:function(a){var b=this.locations(),c=Math.ceil(b.length/3);return b.slice(a*c,(a+1)*c)},locations0:function(){return this.locationsFor(0)},locations1:function(){return this.locationsFor(1)},locations2:function(){return this.locationsFor(2)}}),twttr.view("twttr.views.Dialog",function(a){this.options=a;var b=this.options.template||this.options;twttr.views.Base.call(this,b)}),twttr.view("twttr.views.TweetDialog",function(a){this.options=a,this.options.fixed=!0,twttr.views.Dialog.call(this,a)}).subclassOf(twttr.views.Dialog).template(twttr.templates.dialog).methods(twttr.EventProvider).methods({afterRender:function(a){var b={container_id:"tweetbox",condensed:!1,closeAfterSuccess:!1,template:{button_text:this.options.tweetButton||_("Tweet"),show_geo:this.options.template.show_geo,show_turkey:this.options.template.show_turkey},statusAction:this.options.statusAction||"update",data:this.options.data,defaultContent:this.options.defaultContent||"",height:56,width:452,origin:this.options.origin,enableDraft:this.options.enableDraft,enableAutoGrow:!0};this.tweetBox=new twttr.TweetBox(a.find(".twttr-dialog-content"),b),this.tweetBox.bind("ready",twttr.bind(this,function(){this.trigger("ready")}))}}),twttr.view("twttr.views.Footer",function(){twttr.views.Base.apply(this,arguments)}).methods({year:function(){return(new Date).getFullYear()}}),twttr.view("twttr.views.ReplyDialog",function(a){this.options=a,this.options.statusAction="reply",twttr.views.TweetDialog.call(this,this.options)}).subclassOf(twttr.views.TweetDialog).mixin(twttr.mixins.i18nTweet).template(twttr.templates.dialog).methods({afterRender:function(a){twttr.views.TweetDialog.prototype.afterRender.call(this,a);var c=this;twttr.API.Status.find(this.options.data.tweetId,twttr.bind(this,function(d){var e=new twttr.views.ReplyDialogFooter({screen_name:d.user.screenName,text:b.util.linkifyEntities(b.util.linkify(d.text,{nofollow:!0}),d),profile_image_url:d.user.profileImageUrl});e.render(a.find(".twttr-dialog-footer"),"append"),a.find("div.tweet").each(function(){c.updateRtlDisplay($(this))})}))}}),twttr.view("twttr.views.KeyboardShortcuts").methods({current_user_screen_name:function(){return twttr.currentUser.screenName}}),twttr.view("twttr.views.UserThumbList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.TweetActivityThumbList",function(){twttr.views.UserThumbList.apply(this,arguments),twttr.each(this.items.slice(this.constructor.max_items_to_show),function(a){a.is_hidden=!0})}).template(twttr.templates.user_thumb_list).subclassOf(twttr.views.UserThumbList).statics({max_items_to_show:5}),twttr.view("twttr.views.UserSmallListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserThumbListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserSmallList",function(a){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserSmallListItem}),twttr.view("twttr.views.UserDetailedListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserDetailedList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserDetailedListItem}),twttr.view("twttr.views.UserStaticListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserStaticList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserStaticListItem}),twttr.view("twttr.views.UserItemAction",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.RecentlyViewed",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.ContactImportMatchesStats",function(){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({follow_all_text:function(){return this.count<=1?_("Follow all"):_("Follow all {{count}}",{count:this.count-this.following_count})}}),twttr.view("twttr.views.DashboardContactImportMatchesStats",function(){twttr.views.ContactImportMatchesStats.apply(this,arguments)}).subclassOf(twttr.views.ContactImportMatchesStats),twttr.view("twttr.views.MatchedContactUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.InviteContacts",function(){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({select_all_text:function(){return this.contacts.length==1?_("Select all"):_("Select all {{count}}",{count:this.contacts.length})},preview_link_url:twttr.router.invitationEmailPreviewPath,truncate:function(){return function(a,b){var c=28,d=b(a);return twttr.helpers.truncate(d,c)}}}),twttr.view("twttr.views.FollowingPage").methods({following_header_string:function(){var a=this.friends_count;if(a==1)return this.is_current_user()?_("You follow 1 person"):_("{{user}} follows 1 person",{user:this.name});var c=b.util.formatNumber(a,twttr.pageLocale);return this.is_current_user()?_("You follow {{num}} people",{num:c}):_("{{user}} follows {{num}} people",{user:this.name,num:c})},following_count_commaized:function(){return b.util.formatNumber(this.friends_count,twttr.pageLocale)}}),twttr.view("twttr.views.FollowingSubtabs",function(){twttr.views.Base.apply(this,arguments),this["active_subtab_"+this.subtab]=1,this.screen_name=this.screenName}).subclassOf(twttr.views.Base),twttr.view("twttr.views.FollowersPage").methods({followers_header_string:function(){var a=this.followers_count;if(a==1)return this.is_current_user()?_("You have 1 follower"):_("{{user}} has 1 follower",{user:this.name});var c=b.util.formatNumber(a,twttr.pageLocale);return this.is_current_user()?_("You have {{num}} followers",{num:c}):_("{{user}} has {{num}} followers",{user:this.name,num:c})},followers_count_commaized:function(){return b.util.formatNumber(this.followers_count,twttr.pageLocale)}}),twttr.view("twttr.views.FollowersSubtabs",function(){twttr.views.Base.apply(this,arguments),this["active_subtab_"+this.subtab]=1,this.screen_name=this.screenName}).subclassOf(twttr.views.Base),twttr.view("twttr.views.WelcomeAmbassador",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.WelcomeLearnFlow",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser).methods({name:function(){return twttr.currentUser.name}}),twttr.view("twttr.views.RecentTweets",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.SimpleTweet,screen_name:function(){return this.items[0].user.screen_name}}),twttr.view("twttr.views.Replies",function(a,b,c){twttr.views.BaseAPI.apply(this,arguments),this.descendants=b||[],this.forks=c||[]}).subclassOf(twttr.views.BaseAPI).methods({_viewFor:function(a){return new twttr.views.StreamTweet(a)},_viewsFor:function(a){var b=this;return twttr.map(a,function(a){return b._viewFor(a)})},has_replies:function(){return!0},has_tweets:function(){return this.descendants.length>0||this.forks.length>0},descendant_tweet_views:function(){return this._viewsFor(this.descendants)},fork_tweet_views:function(){return this._viewsFor(this.forks)},on_permalink:function(){return twttr.app.isOnPage("permalink")}}),twttr.view("twttr.views.TweetActivity").methods({_list_for:function(a){return userList=new twttr.API.util.BaseCollection(a),(new twttr.views.TweetActivityThumbList(userList)).html()},_count_for:function(a,b){return(new twttr.views.TweetActivityCount({length:a,is_retweets:b==="retweeters",is_favorites:b==="favoriters",is_replies:b==="repliers"})).html()},_show_count:function(a){return a.length>twttr.views.TweetActivityThumbList.max_items_to_show},show_retweets_count:function(){return this._show_count(this.activities.retweeters)},show_replies_count:function(){return this._show_count(this.activities.repliers)},show_favorites_count:function(){return this._show_count(this.activities.favoriters)},favorites_list:function(){return this._list_for(this.activities.favoriters)},retweets_list:function(){return this._list_for(this.activities.retweeters)},replies_list:function(){return this._list_for(this.activities.repliers)},retweets_count:function(){return this._count_for(this.counts.retweeters_count,"retweeters")},favorites_count:function(){return this._count_for(this.counts.favoriters_count,"favoriters")},replies_count:function(){return this._count_for(this.counts.repliers_count,"repliers")},is_retweets_empty:function(){return this.activities.retweeters.length===0},is_favorites_empty:function(){return this.activities.favoriters.length===0},is_replies_empty:function(){return this.activities.repliers.length===0},is_activity_empty:function(){var a=this.is_favorites_empty()&&this.is_retweets_empty(),b=!this.in_permalink_page&&a,c=this.in_permalink_page&&this.is_replies_empty()&&a;return b||c}}),twttr.view("twttr.views.ActivityOfMeStreamTitle").methods({should_see_activity_filters:function(){return twttr.currentUser&&twttr.currentUser.followersCount>=2e3}}),twttr.view("twttr.views.ActivityItemUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.ActivityItem",function(){twttr.views.BaseAPI.apply(this,arguments),this.is_your_activity=this.for_stream==="your_activity",this.is_network_activity=this.for_stream==="activity"}).subclassOf(twttr.views.BaseAPI).template(twttr.templates.activity_item).mixin(twttr.mixins.ActivityViewHelpers).methods({_getSupplement:function(a){var b=this.constructor.supplements[this.for_stream][this.event];b.primary&&(b=a?b.secondary:b.primary);if(b.sources&&b.targets){var c=(this.is_retweet||this.is_favorite)&&this.sources.length===1&&this.targets.length>1;b=c?b.targets:b.sources}return b},_traverse:function(a,b,c){twttr.is.def(c)||(c=0);if(!b||c>=b.length)return a;var d=b[c];if(twttr.is.def(a[d])&&!twttr.is.nil(a[d]))return this._traverse(a[d],b,c+1)},_populateSubsWithObjects:function(a,b,c,d){if(!d)return;var e=this;return twttr.inject(a,b,function(a,b,f){var g=e.constructor.substitutionKeyForObjectType[d],i=twttr.API.Activity.classMap[e.event][c],j=e._traverse(f,e.constructor.translateToObjectType[d][i]);return a[c+"_"+g+"_"+b]=(new twttr.views[e.constructor.viewForObjectType[e.for_stream][d]](j)).html(),a})},_populateSubsWithCounts:function(a,b,c){var d=c+"_count",e=this[c+"_size"];return b["full_"+d]=e,b[d]=e-1,b},_activity_supplement:function(a){var b=this,c=this._getSupplement(a||!1),d=4,e=twttr.views[c.view],f=this[c.object],g=Math.min(c.max,f.length)-1,i=twttr.views.StreamUser===e;return twttr.map(f,function(c,f){var j;return a&&f==0?"":(c.embedded_by_activity=!0,c.is_your_activity=b.is_your_activity,c.is_network_activity=b.is_network_activity,c.for_activity=c.is_your_activity||c.is_network_activity,f>g&&(twttr.isT1?(c.hidden_by_activity=!0,c.hidden_stack_class_name=f<d?"stack-item-"+f:"stack-item-hidden"):c.hidden=!0),j=new e(c),i&&(b.is_your_activity?(j.avatar_size_class="size24",j.profile_image_url=j.mini_profile_image_url()):(j.avatar_size_class="size73",j.profile_image_url=j.bigger_profile_image_url())),twttr.isT1?Mustache.to_html("<div class='supplement{{#is_hidden_supplement}} hidden-supplement {{hidden_stack_class_name}}{{/is_hidden_supplement}}{{^is_hidden_supplement}} visible-supplement{{/is_hidden_supplement}}'>{{{supplement}}}</div>",{supplement:j.html(),is_hidden_supplement:c.hidden_by_activity,hidden_stack_class_name:c.hidden_stack_class_name}):j.html())}).join("")},icon_class:function(){return this.constructor.iconClasses[this.event]},should_show_first_actor:function(){return!this.is_your_activity||this.is_list_member_added},first_actor:function(){return new twttr.views.BaseUser(this.sources[0])},view_all_supplements_sentence:function(){var a=this.constructor.supplementViewAllSentences[this.event];if(!a)return"";var b;if(twttr.isT1){var c=this.hidden_supplements_count();a=a[Math.min(a.length,c)-1],b={hidden_count:c}}else b=this.sources[0];return Mustache.to_html(a,b)},has_secondary_supplement:function(){var a=this.sources.length>this.constructor.maxQualifiedEntities;return!this.is_your_activity&&a&&(this.is_follow||this.is_retweet&&this.target_objects.length===1||this.is_favorite&&this.targets.length===1)},has_hidden_supplements:function(){var a=this._getSupplement(),b=this[a.object];return b.length>a.max&&a.objectType==="Status"},hidden_supplements_count:function(){if(!this.has_hidden_supplements())return 0;var a=this._getSupplement(),b=this[a.object];return b.length-a.max},supplement_count:function(){var a=this._getSupplement(),b=this[a.object];return b.length},user_supplement_and_count_greater_than_two:function(){return(this.is_follow||this.is_list_member_added)&&this.supplement_count()>2},user_supplement_and_count_exactly_two:function(){return(this.is_follow||this.is_list_member_added)&&this.supplement_count()===2},should_show_truncated_tweet:function(){return this.is_your_activity&&(this.is_retweet||this.is_favorite)&&this._getSupplement().useTruncated},truncated_tweet:function(){var a;if(this.is_retweet)a=this.target_objects[0];else{if(!this.is_favorite)throw new Error("You shouldn't be using truncated_tweet() if not a retweet or favorite!");a=this.targets[0]}return(new twttr.views.LatestTweet(a)).html()},activity_supplement:function(){return this._activity_supplement()},activity_secondary_supplement:function(){return this._activity_supplement(!0)},activity_line:function(){var a=this,b={},c=this.constructor.objectClasses[this.event][this.for_stream],d=this.constructor.objectStrings[this.event][this.for_stream];(!d||!c)&&console.error("Should not have an activity item with this verb in this stream!",this);var e=this.constructor.lineItemObjects;b.position=this.min_position,this._populateSubsWithObjects(this[e[this.event].sources],b,"sources",c.sourceClass),this._populateSubsWithObjects(this[e[this.event].targets],b,"targets",c.targetClass),this._populateSubsWithObjects(this[e[this.event].target_objects],b,"target_objects",c.targetObjectClass),this._populateSubsWithCounts(this.sources,b,"sources"),this._populateSubsWithCounts(this.targets,b,"targets"),this._populateSubsWithCounts(this.target_objects,b,"target_objects");var f=this._getSupplement();if(this.is_your_activity&&this.sources.length>f.max||this.has_secondary_supplement())b.link_sources_count=!0;var g=d[Math.min(this.sources.length,d.length)-1];return twttr.is.array(g)&&(g=g[Math.min(this.targets.length,g.length)-1],twttr.is.array(g)&&(g=g[Math.min(this.target_objects.length,g.length)-1])),Mustache.to_html(g,b)},full_timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0)},actual_timestamp:function(){return twttr.helpers.parseDateString(this.created_at)},afterRender:function(a){twttr.isT1||this.is_your_activity&&setTimeout(function(){twttr.helpers.ellipsify(a.find(".stream-item-activity-line .tweet-row"))},0)}}),twttr.view("twttr.views.DashboardActivityItem",function(){twttr.views.ActivityItem.apply(this,arguments)}).subclassOf(twttr.views.ActivityItem),twttr.view("twttr.views.StreamUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.DashboardStreamUser",function(){this.constructor.uber.constructor.apply(this,arguments)}).subclassOf(twttr.views.StreamUser),twttr.view("twttr.views.StreamFollowerRequest",function(){this.constructor.uber.constructor.apply(this,arguments)}).subclassOf(twttr.views.StreamUser),twttr.view("twttr.views.ProfileUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.ProfileFollowCard",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.MiniProfileStats",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.List",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({is_public:function(){return this.mode==="public"||this.mode===undefined},is_own_list:function(){return twttr.helpers.isCurrentUser(this.user)},user_list_path:function(){return twttr.router.userListPath({screen_name:this.user.screen_name,list_slug:this.slug})},list_subscribers_path:function(){return twttr.router.listSubscribersPath({screen_name:this.user.screen_name,list_slug:this.slug})},list_members_path:function(){return twttr.router.listMembersPath({screen_name:this.user.screen_name,list_slug:this.slug})},full_name_sans_at:function(){return this.full_name.replace(/^[@＠]/,"")}}),twttr.view("twttr.views.ListLink",function(){twttr.views.List.apply(this,arguments)}).subclassOf(twttr.views.List),twttr.view("twttr.views.NewestListMembers").subclassOf(twttr.views.List),twttr.view("twttr.views.StreamList").subclassOf(twttr.views.List),twttr.view("twttr.views.ListStreamTitle").subclassOf(twttr.views.List),twttr.view("twttr.views.ListHeader").subclassOf(twttr.views.List),twttr.view("twttr.views.ListActions").subclassOf(twttr.views.List),twttr.view("twttr.views.ListStreamTabs").subclassOf(twttr.views.List),twttr.view("twttr.views.ListFollowCard").subclassOf(twttr.views.List),twttr.view("twttr.views.ListOfLists",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.List}),twttr.view("twttr.views.ListDialog").subclassOf(twttr.views.List),twttr.view("twttr.views.Retweeters",function(a){twttr.views.Base.apply(this,arguments),this.count=a.count,this.retweeters=a.retweeters.map(function(a){return new twttr.views.BaseUser(a)}).array}).methods({retweeted_by_count:function(){var a=this.tweet.retweetingStatus?new twttr.views.BaseUser(this.tweet.retweetingStatus.user):this.retweeters[0],b=Mustache.to_html('<a class="user-profile-link" data-user-id="{{id}}" href="{{path}}" >{{screen_name}}</a>',{id:a.id,path:twttr.router.profilePath({screen_name:a.screen_name}),screen_name:a.screen_name});return this.count===1?_("Retweeted by {{{user_link}}}",{user_link:b}):this.count===2?_("Retweeted by {{{user_link}}} and 1 other",{user_link:b}):this.count?_("Retweeted by {{{user_link}}} and {{count}} others",{user_link:b,count:this.count}):_("Retweeted by {{{user_link}}} and others",{user_link:b})}}),twttr.view("twttr.views.ProfilePage").methods({has_pending_requests:function(){return twttr.helpers.isProfileUser()&&twttr.currentUser["protected"]},is_withheld:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"},is_withheld_copyright:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"&&!!twttr.profileUser.withheldCopyright},is_current_user:function(){return twttr.helpers.isCurrentUser(twttr.profileUser.id)},render_withheld:function(){return this.is_withheld()&&!this.is_current_user()}}),twttr.view("twttr.views.StreamSuggestionCategory",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,2)):!1},category_name:function(){return this.obj.name}}),twttr.view("twttr.views.CardNewsOnebox").subclassOf(twttr.views.BaseAPI).methods({article_image:function(){return this.obj.getImage(twttr.isSSL())},article_url:function(){return this.obj.getExpandedUrl()},article_display_url:function(){return this.obj.getDisplayUrl()}}),twttr.view("twttr.views.CardEventOnebox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.CardAccountsOneboxItem").subclassOf(twttr.views.BaseUser).methods({is_onebox:!0}),twttr.view("twttr.views.CardAccountsOnebox",function(a,b){twttr.views.BaseAPIList.call(this,a),this.view_all_path=b}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.CardAccountsOneboxItem}),using(twttr.isT1?"multiGlobals/more_views_t1":"multiGlobals/more_views_p1",function(){twttr.views.makeDefaultViews(twttr.templates),a()})})}),provide("multiGlobals/more_views_t1",function(a){using("util","constants","mixins/t1/discoveryStoryHelpers").as(function(b){twttr.view("twttr.views.MiniProfileUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.MiniCurrentUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.Nav").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.AvatarRow",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.TypeaheadSearchItem",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({search_query_source:function(){return twttr.is.def(this.id)?twttr.search.searchQuerySource.SAVED_SEARCH:twttr.search.searchQuerySource.TYPEAHEAD}}),twttr.view("twttr.views.TypeaheadAccountsShortcut",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({search_query_source:function(){return twttr.search.searchQuerySource.TYPEAHEAD}}),twttr.view("twttr.views.ProtectedAncestorTweet").subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.CardNews",function(a){twttr.views.BaseAPI.call(this,a.content.articles.get(0)),this.position=a.position,this.social_proof=a.attributes.social_proof,this.scribeComponent="card_news"}).subclassOf(twttr.views.BaseAPI).mixin(twttr.mixins.discoverySearchHelper).methods({article_display_url:function(){return this.obj.getDisplayUrl()},article_image:function(){return this.obj.getImage(twttr.isSSL())},article_url:function(){return this.obj.getExpandedUrl()}}),twttr.view("twttr.views.CardTopic",function(a){twttr.views.BaseAPI.call(this,a.content),this.position=a.position,this.scribeComponent="card_topic";if(a.content.media&&a.content.media.length>0){var b=a.content.media[0];this.has_image=b.type==="photo"&&twttr.decider.isAvailable("t1d_topic_img"),this.has_video=b.type==="video"&&twttr.decider.isAvailable("t1d_topic_vid"),this.has_media=this.has_image||this.has_video,this.tweet=a.content.tweet,this.tweet&&this.tweet.user&&(this.tweet.user.profile_image_url=twttr.assets.getPathFromAbsoluteURL(this.tweet.user.profile_image_url,{isVersioned:!1})),this.has_media&&(this.mediaInstance=twttr.media.matchInstance(b.media_url),this.image_url=this.getImageUrl(["large","medium","original"]),this.has_media=!!this.image_url)}this.media_type=this.has_image?"image":this.has_video?"video":null}).subclassOf(twttr.views.BaseAPI).mixin(twttr.mixins.discoverySearchHelper,twttr.mixins.discoveryMediaRenderHelper).methods({getImageUrl:function(a){if(!this.media||this.media.length===0)return null;var b=this.media[0];for(var c=0;c<a.length;c++){var d=a[c];if(b.sizes[d]){var e=b.sizes[d].url;if(e){if(twttr.isSSL()){var f=b.sizes[d].url_https;return f?f:this.mediaInstance&&this.mediaInstance.constructor.ssl?e.replace(/^http:/,"https:"):e}return e}}}return null},tweet_text:function(){var a=this.text,b=this,c=this.entities&&this.entities.urls;c&&twttr.each(c,function(b){b.display_url&&(a=a.replace(h(b.url),h(b.display_url)))});var d=this.entities&&this.entities.media;return d&&twttr.each(d,function(c){var d=b.text.substring(c.indices[0],c.indices[1]);c.display_url&&(a=a.replace(h(d),h(c.display_url)))}),a},card_url:function(){return this.tweet?twttr.router.permalinkPath({screen_name:this.tweet.user.screen_name,id:this.tweet.id_str}):twttr.router.searchFacetsSlideshowPath({query:this.obj.query,mode:this.has_image?"photos":"videos"})+"?url="+encodeURIComponent(this.media[0].media_url)},attribution_url:function(){return this.mediaInstance?this.mediaInstance.domainUrl():""},attribution_img:function(){return this.mediaInstance?this.mediaInstance.iconUrl():""},attribution_name:function(){return this.mediaInstance?this.mediaInstance.attributionName():""},has_attribution:function(){return this.mediaInstance?this.mediaInstance.hasAttributionInDiscovery():!0}}),twttr.view("twttr.views.StreamInterestCategory").subclassOf(twttr.views.BaseAPI).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,7)):!1},interest_name:function(){return this.obj.name}}),twttr.view("twttr.views.DashboardStreamInterestCategory").subclassOf(twttr.views.StreamInterestCategory).template(twttr.templates.stream_interest_category).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,3)):!1}}),twttr.view("twttr.views.WelcomeLearnProfile").subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.StreamViewTogglerBase",function(){twttr.views.StreamViewToggler.apply(this,arguments)}),twttr.view("twttr.views.MentionsStreamViewToggler",function(a){twttr.views.StreamViewTogglerBase.call(this,{title1:_("All"),active1:!a,route1:twttr.router.connectPath(),title2:_("Mentions"),active2:a,route2:twttr.router.mentionsPath()})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ProfileStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("With Replies"),active1:a,route1:twttr.router.profileWithRepliesPath({screen_name:b.screenName}),title2:_("Without"),active2:!a,route2:twttr.router.profilePath({screen_name:b.screenName})})}).subclassOf(twttr.views.StreamViewTogglerBase).template(twttr.templates.stream_view_toggler),twttr.view("twttr.views.SearchStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Top"),active1:b=="relevance",route1:twttr.router.searchResultsPath({query:a}),tip1:"Find the most relevant tweets",title2:_("All"),active2:b=="tweets",tip2:"Find the most recent tweets",route2:twttr.router.searchRealtimePath({query:a}),title3:_("People you follow"),active3:b=="timeline",route3:twttr.router.searchTimelinePath({query:a}),tip3:"Find tweets from people you follow"})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ListsStreamViewToggler",function(a){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Subscribed to"),active1:!a,route1:twttr.router.listsYouFollowPath(),title2:_("Member of"),active2:a,route2:twttr.router.listsFollowingYouPath()})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.FollowersStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("All"),active1:!b,route1:twttr.router.userFollowersPath({screen_name:a}),title2:_("You know"),active2:b,route2:twttr.router.followersYouFollowPath({screen_name:a})})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ProfileListsStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Subscribed to"),active1:a,route1:twttr.router.subscriptionsPath(b),title2:_("Member of"),active2:!a,route2:twttr.router.membershipsPath(b)})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.StreamSavedSearch",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({saved_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.SAVED_SEARCH}}),twttr.view("twttr.views.DirectMessageDialogConversationList",function(){var a=this;twttr.views.Base.apply(a,arguments),a.items=[],twttr.each(a.threads,function(b){a.items.push(new twttr.views.DirectMessageDialogConversationListItem(b))})}).subclassOf(twttr.views.Base),twttr.view("twttr.views.DirectMessageDialogConversationListItem",function(){twttr.views.Base.apply(this,arguments),this.last_message=new twttr.views.Message(this.messages[0]),this.is_last_message_mine=twttr.helpers.isCurrentUser(this.last_message.sender)}).methods({is_unread:function(){return this.obj.hasNewMessages()},last_message_text:function(){var a=this.last_message,c=a.text;return a.entities&&a.entities.urls&&twttr.each(a.entities.urls,function(a){a.display_url&&(c=c.replace(new RegExp(b.util.escapeRegExpChars(h(a.url))),h(a.display_url)))}),c},last_message_timestamp:function(){return this.last_message.timestamp()},last_message_actual_timestamp:function(){return this.last_message.actual_timestamp()},is_replied:function(){return this.is_last_message_mine&&this.messages.length>1},other_person:function(){return this.last_message[this.is_last_message_mine?"recipient":"sender"]}}),twttr.view("twttr.views.DirectMessageDialogConversation",function(){var a=this;twttr.views.Base.apply(a,arguments),a.items=[];for(var b=a.messages.length-1;b>=0;b--)a.items.push(new twttr.views.DirectMessageDialogConversationItem(a.messages[b]))}).subclassOf(twttr.views.Base),twttr.view("twttr.views.DirectMessageDialogConversationItem",function(){twttr.views.Message.apply(this,arguments)}).subclassOf(twttr.views.Message).methods({sent_or_received:function(){return twttr.helpers.isCurrentUser(this.sender)?"sent":"received"}}),twttr.view("twttr.views.TweetDetails",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.Ancestors",function(a){twttr.views.BaseAPI.apply(this,arguments),this._ancestors=a||[]}).subclassOf(twttr.views.BaseAPI).methods({_viewFor:function(a){return new twttr.views.SimpleTweet(a)},_viewsFor:function(a){var b=this;return twttr.map(a,function(a){return b._viewFor(a)})},ancestors:function(){return this._ancestors.length?this._viewsFor(this._ancestors):null}}),twttr.view("twttr.views.TweetStats",function(a){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({replies_count:function(){return this.repliers&&this.repliers.length?this.repliers_count:!1},retweets_count:function(){return this.retweeters&&this.retweeters.length?this.retweeters_count:!1},favorites_count:function(){return this.favoriters&&this.favoriters.length?this.favoriters_count:!1}}),twttr.view("twttr.views.BigAvatarListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.WebPersonalizationResults",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BigAvatarListItem,has_recs:function(){return this.items&&this.items.length>0}}),twttr.view("twttr.views.GlobalNavSavedSearch").subclassOf(twttr.views.BaseAPI).methods({saved_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.SAVED_SEARCH}}),twttr.view("twttr.views.GlobalNavSavedSearches",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.GlobalNavSavedSearch}),twttr.view("twttr.views.GeoMapSmall").subclassOf(twttr.views.Base).methods({place_map_url:function(){return twttr.geo.getPlaceFullAddressAndMapLink(this).map_link}}),twttr.view("twttr.views.PageProfile").methods({is_withheld:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"},is_withheld_copyright:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"&&!!twttr.profileUser.withheldCopyright},is_current_user:function(){return twttr.helpers.isCurrentUser(twttr.profileUser.id)},render_withheld:function(){return this.is_withheld()&&!this.is_current_user()}}),twttr.view("twttr.views.InlineReplyBox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.SoccerMatchedEvent").subclassOf(twttr.views.BaseAPI).methods({_currentStatus:function(){return this.obj.events.getMatchState().current_status},_appendTeamPage:function(a){return a.user?a.team_page=twttr.router.profilePath({screen_name:a.user.screen_name}):a.team_page=a.landing_page_url,a},getEvents:function(){return this.obj.events},home_team:function(){return this._appendTeamPage(this.obj.events.getMatchedTeam(!0))},score:function(){if(this._currentStatus()==="scheduled")return null;var a=this.obj.events.getMatchState().score;return a.search_path=this.search_path(),a},away_team:function(){return this._appendTeamPage(this.obj.events.getMatchedTeam(!1))},match_state:function(){var a=this.obj.events.getMatchState();a.show_time_elapsed_time=!1;if(a.current_status==="inprogress"){a.show_time_elapsed_time=!0;var b=0,c=0,d=a.current_period_elapsed_time+1;return a.overtime?d>15?(b=a.current_period===2?120:105,c=d-15):b=(a.current_period===2?105:90)+d:d>45?(b=a.current_period===2?90:45,c=d-45):b=(a.current_period===2?45:0)+d,a.penalty_shootout?(a.current_period_string=_("PK"),a.current_period_elapsed_time_string=null):(a.current_period_elapsed_time_string=Mustache.to_html(_("{{minutes}} min{{#extra_time}} (+{{extra_time}}){{/extra_time}}",{minutes:b,extra_time:c})),a.overtime?a.current_period_string=_("ET"):a.current_period===1?a.current_period_string=_("1st half"):a.current_period_string=_("2nd half")),a}return a.current_status==="halftime"?(a.overtime?a.current_period_string=_("ET"):a.penalty_shootout?a.current_period_string=_("PK"):a.current_period_string=_("Halftime"),a):null},preview:function(){return this._currentStatus()==="scheduled"?{time:twttr.helpers.prettyTime(this.obj.events.getMatchedEventData().scheduled_start_time_utc,!0),url:this.obj.events.getMatchedEvent().preview_url,search_path:this.search_path()}:null},recap:function(){var a=this.obj.events.getMatchState();return a.current_status==="final"?{url:this.obj.events.getMatchedEvent().recap_url}:null},hashtag:function(){return this.obj.events.getMatchedEvent().event_data.match_hashtag},search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.obj.events.getMatchedEvent().event_data.match_hashtag)})},show_follow:function(){return!twttr.loggedIn}}),twttr.view("twttr.views.CardSoccerOnebox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.SoccerTicker").subclassOf(twttr.views.BaseAPI).methods({ticker_list:function(){return this.obj.events.getOtherMatchState()},preview:function(){return this.obj.events.getOtherMatchState().length===0?this.obj.events.data().follow_news:null}}),a()})}),provide("$lib/easyXDM.js",function(a){(function(a,b,c,d,e,f){function t(a,b){var c=typeof a[b];return c=="function"||c=="object"&&!!a[b]||c=="unknown"}function u(a,b){return typeof a[b]=="object"&&!!a[b]}function v(a){return Object.prototype.toString.call(a)==="[object Array]"}function w(a){try{var b=new ActiveXObject(a);return b=null,!0}catch(c){return!1}}function C(){C=j,z=!0;for(var a=0;a<A.length;a++)A[a]();A.length=0}function E(a,b){if(z){a.call(b);return}A.push(function(){a.call(b)})}function F(){var a=parent;if(n!=="")for(var b=0,c=n.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function G(b){return a.easyXDM=p,n=b,n&&(q="easyXDM_"+n.replace(".","_")+"_"),o}function H(a){return a.match(k)[3]}function I(a){var b=a.match(k),c=b[2],d=b[3],e=b[4]||"";if(c=="http:"&&e==":80"||c=="https:"&&e==":443")e="";return c+"//"+d+e}function J(a){a=a.replace(m,"$1/");if(!a.match(/^(http||https):\/\//)){var b=a.substring(0,1)==="/"?"":c.pathname;b.substring(b.length-1)!=="/"&&(b=b.substring(0,b.lastIndexOf("/")+1)),a=c.protocol+"//"+c.host+b+a}while(l.test(a))a=a.replace(l,"");return a}function K(a,b){var c="",d=a.indexOf("#");d!==-1&&(c=a.substring(d),a=a.substring(0,d));var e=[];for(var g in b)b.hasOwnProperty(g)&&e.push(g+"="+f(b[g]));return a+(s?"#":a.indexOf("?")==-1?"?":"&")+e.join("&")+c}function M(a){return typeof a=="undefined"}function N(){var a={},b={a:[1,2,3]},c='{"a":[1,2,3]}';return typeof JSON!="undefined"&&typeof JSON.stringify=="function"&&JSON.stringify(b).replace(/\s/g,"")===c?JSON:(Object.toJSON&&Object.toJSON(b).replace(/\s/g,"")===c&&(a.stringify=Object.toJSON),typeof String.prototype.evalJSON=="function"&&(b=c.evalJSON(),b.a&&b.a.length===3&&b.a[2]===3&&(a.parse=function(a){return a.evalJSON()})),a.stringify&&a.parse?(N=function(){return a},a):null)}function O(a,b,c){var d;for(var e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],typeof d=="object"?O(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a}function P(){var c=b.createElement("iframe");c.name=q+"TEST",O(c.style,{position:"absolute",left:"-2000px",top:"0px"}),b.body.appendChild(c),r=c.contentWindow!==a.frames[c.name],b.body.removeChild(c)}function Q(a){M(r)&&P();var c;r?c=b.createElement("<iframe name='"+a.props.name+"' frameborder='0' allowtransparency='false' tabindex='-1', role='presentation' scrolling='no' />"):(c=b.createElement("IFRAME"),c.name=a.props.name,c.setAttribute("frameborder","0"),c.setAttribute("allowtransparency","false"),c.setAttribute("tabindex","-1"),c.setAttribute("role","presentation"),c.setAttribute("scrolling","no")),c.id=c.name=a.props.name,delete a.props.name,a.onLoad&&x(c,"load",a.onLoad),typeof a.container=="string"&&(a.container=b.getElementById(a.container)),a.container||(c.style.position="absolute",c.style.top="-2000px",a.container=b.body);var d=a.props.src;return delete a.props.src,O(c,a.props),c.border=c.frameBorder=0,a.container.appendChild(c),c.src=d,a.props.src=d,c}function R(a,b){typeof a=="string"&&(a=[a]);var c,d=a.length;while(d--){c=a[d],c=new RegExp(c.substr(0,1)=="^"?c:"^"+c.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$");if(c.test(b))return!0}return!1}function S(d){var e=d.protocol,f;d.isHost=d.isHost||M(L.xdm_p),s=d.hash||!1,d.props||(d.props={});if(!d.isHost){d.channel=L.xdm_c,d.secret=L.xdm_s,d.remote=L.xdm_e,e=L.xdm_p;if(d.acl&&!R(d.acl,d.remote))throw new Error("Access denied for "+d.remote)}else d.remote=J(d.remote),d.channel=d.channel||"default"+i++,d.secret=Math.random().toString(16).substring(2),M(e)&&(I(c.href)==I(d.remote)?e="4":t(a,"postMessage")||t(b,"postMessage")?e="1":t(a,"ActiveXObject")&&w("ShockwaveFlash.ShockwaveFlash")?e="6":navigator.product==="Gecko"&&"frameElement"in a&&navigator.userAgent.indexOf("WebKit")==-1?e="5":d.remoteHelper?(d.remoteHelper=J(d.remoteHelper),e="2"):e="0");switch(e){case"0":O(d,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0);if(d.isHost){if(!d.local){var g=c.protocol+"//"+c.host,j=b.body.getElementsByTagName("img"),k,l=j.length;while(l--){k=j[l];if(k.src.substring(0,g.length)===g){d.local=k.src;break}}d.local||(d.local=a)}var m={xdm_c:d.channel,xdm_p:0};d.local===a?(d.usePolling=!0,d.useParent=!0,d.local=c.protocol+"//"+c.host+c.pathname+c.search,m.xdm_e=d.local,m.xdm_pa=1):m.xdm_e=J(d.local),d.container&&(d.useResize=!1,m.xdm_po=1),d.remote=K(d.remote,m)}else O(d,{channel:L.xdm_c,remote:L.xdm_e,useParent:!M(L.xdm_pa),usePolling:!M(L.xdm_po),useResize:d.useParent?!1:d.useResize});f=[new o.stack.HashTransport(d),new o.stack.ReliableBehavior({}),new o.stack.QueueBehavior({encode:!0,maxLength:4e3-d.remote.length}),new o.stack.VerifyBehavior({initiate:d.isHost})];break;case"1":f=[new o.stack.PostMessageTransport(d)];break;case"2":f=[new o.stack.NameTransport(d),new o.stack.QueueBehavior,new o.stack.VerifyBehavior({initiate:d.isHost})];break;case"3":f=[new o.stack.NixTransport(d)];break;case"4":f=[new o.stack.SameOriginTransport(d)];break;case"5":f=[new o.stack.FrameElementTransport(d)];break;case"6":d.swf||(d.swf="../../tools/easyxdm.swf"),f=[new o.stack.FlashTransport(d)]}return f.push(new o.stack.QueueBehavior({lazy:d.lazy,remove:!0})),f}function T(a){var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var d=0,e=a.length;d<e;d++)b=a[d],O(b,c,!0),d!==0&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function U(a){a.up.down=a.down,a.down.up=a.up,a.up=a.down=null}var g=this,i=Math.floor(Math.random()*1e4),j=Function.prototype,k=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,l=/[\-\w]+\/\.\.\//,m=/([^:])\/\//g,n="",o={},p=a.easyXDM,q="easyXDM_",r,s=!1,x,y;if(t(a,"addEventListener"))x=function(a,b,c){a.addEventListener(b,c,!1)},y=function(a,b,c){a.removeEventListener(b,c,!1)};else{if(!t(a,"attachEvent"))throw new Error("Browser not supported");x=function(a,b,c){a.attachEvent("on"+b,c)},y=function(a,b,c){a.detachEvent("on"+b,c)}}var z=!1,A=[],B;"readyState"in b?(B=b.readyState,z=B=="complete"||~navigator.userAgent.indexOf("AppleWebKit/")&&(B=="loaded"||B=="interactive")):z=!!b.body;if(!z){if(t(a,"addEventListener"))x(b,"DOMContentLoaded",C);else{x(b,"readystatechange",function(){b.readyState=="complete"&&C()});if(b.documentElement.doScroll&&a===top){var D=function(){if(z)return;try{b.documentElement.doScroll("left")}catch(a){d(D,1);return}C()};D()}}x(a,"load",C)}var L=function(a){a=a.substring(1).split("&");var b={},c,d=a.length;while(d--)c=a[d].split("="),b[c[0]]=e(c[1]);return b}(/xdm_e=/.test(c.search)?c.search:c.hash);O(o,{version:"2.4.12.108",query:L,stack:{},apply:O,getJSONObject:N,whenReady:E,noConflict:G}),o.DomHelper={on:x,un:y,requiresJSON:function(c){u(a,"JSON")||b.write('<script type="text/javascript" src="'+c+'"><'+"/script>")}},function(){var a={};o.Fn={set:function(b,c){a[b]=c},get:function(b,c){var d=a[b];return c&&delete a[b],d}}}(),o.Socket=function(a){var b=T(S(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){a.onReady&&a.onReady(b)}}])),c=I(a.remote);this.origin=I(a.remote),this.destroy=function(){b.destroy()},this.postMessage=function(a){b.outgoing(a,c)},b.init()},o.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];typeof d=="function"&&(b.local[c]={method:d})}var e=T(S(a).concat([new o.stack.RpcBehavior(this,b),{callback:function(b){a.onReady&&a.onReady(b)}}]));this.origin=I(a.remote),this.destroy=function(){e.destroy()},e.init()},o.stack.SameOriginTransport=function(a){var b,e,f,g;return b={outgoing:function(a,b,c){f(a),c&&c()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){g=I(a.remote),a.isHost?(O(a.props,{src:K(a.remote,{xdm_e:c.protocol+"//"+c.host+c.pathname,xdm_c:a.channel,xdm_p:4}),name:q+a.channel+"_provider"}),e=Q(a),o.Fn.set(a.channel,function(a){return f=a,d(function(){b.up.callback(!0)},0),function(a){b.up.incoming(a,g)}})):(f=F().Fn.get(a.channel,!0)(function(a){b.up.incoming(a,g)}),d(function(){b.up.callback(!0)},0))},init:function(){E(b.onDOMReady,b)}}},o.stack.FlashTransport=function(a){function m(a){d(function(){e.up.incoming(a,i)},0)}function p(d){var e=a.swf,f="easyXDM_swf_"+Math.floor(Math.random()*1e4),g=l+'easyXDM.Fn.get("flash_'+f+'_init")';o.Fn.set("flash_"+f+"_init",function(){o.stack.FlashTransport.__swf=j=k.firstChild,d()}),k=b.createElement("div"),O(k.style,{height:"1px",width:"1px",postition:"abosolute",left:0,top:0}),b.body.appendChild(k);var i="proto="+c.protocol+"&domain="+H(c.href)+"&init="+g;k.innerHTML="<object height='1' width='1' type='application/x-shockwave-flash' id='"+f+"' data='"+e+"'>"+"<param name='allowScriptAccess' value='always'></param>"+"<param name='wmode' value='transparent'>"+"<param name='movie' value='"+e+"'></param>"+"<param name='flashvars' value='"+i+"'></param>"+"<embed type='application/x-shockwave-flash' FlashVars='"+i+"' allowScriptAccess='always' wmode='transparent' src='"+e+"' height='1' width='1'></embed>"+"</object>"}var e,f,g,i,j,k,l=n?n+".":"";return e={outgoing:function(b,c,d){j.postMessage(a.channel,b),d&&d()},destroy:function(){try{j.destroyChannel(a.channel)}catch(b){}j=null,f&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){i=I(a.remote),j=o.stack.FlashTransport.__swf;var b=function(){a.isHost?o.Fn.set("flash_"+a.channel+"_onMessage",function(b){b==a.channel+"-ready"&&(o.Fn.set("flash_"+a.channel+"_onMessage",m),d(function(){e.up.callback(!0)},0))}):o.Fn.set("flash_"+a.channel+"_onMessage",m),j.createChannel(a.channel,a.remote,a.isHost,l+'easyXDM.Fn.get("flash_'+a.channel+'_onMessage")',a.secret),a.isHost?(O(a.props,{src:K(a.remote,{xdm_e:I(c.href),xdm_c:a.channel,xdm_s:a.secret,xdm_p:6}),name:q+a.channel+"_provider"}),f=Q(a)):(j.postMessage(a.channel,a.channel+"-ready"),d(function(){e.up.callback(!0)},0))};j?b():p(b)},init:function(){E(e.onDOMReady,e)}}},o.stack.PostMessageTransport=function(b){function j(a){if(a.origin)return I(a.origin);if(a.uri)return I(a.uri);if(a.domain)return c.protocol+"//"+a.domain;throw"Unable to retrieve the origin of the event"}function k(a){var c=j(a);c==i&&a.data.substring(0,b.channel.length+1)==b.channel+" "&&e.up.incoming(a.data.substring(b.channel.length+1),c)}var e,f,g,i;return e={outgoing:function(a,c,d){g.postMessage(b.channel+" "+a,c||i),d&&d()},destroy:function(){y(a,"message",k),f&&(g=null,f.parentNode.removeChild(f),f=null)},onDOMReady:function(){i=I(b.remote),b.isHost?(x(a,"message",function j(c){c.data==b.channel+"-ready"&&(g="postMessage"in f.contentWindow?f.contentWindow:f.contentWindow.document,y(a,"message",j),x(a,"message",k),d(function(){e.up.callback(!0)},0))}),O(b.props,{src:K(b.remote,{xdm_e:I(c.href),xdm_c:b.channel,xdm_p:1}),name:q+b.channel+"_provider"}),f=Q(b)):(x(a,"message",k),g="postMessage"in a.parent?a.parent:a.parent.document,g.postMessage(b.channel+"-ready",i),d(function(){e.up.callback(!0)},0))},init:function(){E(e.onDOMReady,e)}}},o.stack.FrameElementTransport=function(e){var f,g,i,j;return f={outgoing:function(a,b,c){i.call(this,a),c&&c()},destroy:function(){g&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){j=I(e.remote),e.isHost?(O(e.props,{src:K(e.remote,{xdm_e:I(c.href),xdm_c:e.channel,xdm_p:5}),name:q+e.channel+"_provider"}),g=Q(e),g.fn=function(a){return delete g.fn,i=a,d(function(){f.up.callback(!0)},0),function(a){f.up.incoming(a,j)}}):(b.referrer&&I(b.referrer)!=L.xdm_e&&(a.top.location=L.xdm_e),i=a.frameElement.fn(function(a){f.up.incoming(a,j)}),f.up.callback(!0))},init:function(){E(f.onDOMReady,f)}}},o.stack.NixTransport=function(e){var f,i,j,k,l;return f={outgoing:function(a,b,c){j(a),c&&c()},destroy:function(){l=null,i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){k=I(e.remote);if(e.isHost){try{t(a,"getNixProxy")||a.execScript("Class NixProxy\n    Private m_parent, m_child, m_Auth\n\n    Public Sub SetParent(obj, auth)\n        If isEmpty(m_Auth) Then m_Auth = auth\n        SET m_parent = obj\n    End Sub\n    Public Sub SetChild(obj)\n        SET m_child = obj\n        m_parent.ready()\n    End Sub\n\n    Public Sub SendToParent(data, auth)\n        If m_Auth = auth Then m_parent.send(CStr(data))\n    End Sub\n    Public Sub SendToChild(data, auth)\n        If m_Auth = auth Then m_child.send(CStr(data))\n    End Sub\nEnd Class\nFunction getNixProxy()\n    Set GetNixProxy = New NixProxy\nEnd Function\n","vbscript"),l=getNixProxy(),l.SetParent({send:function(a){f.up.incoming(a,k)},ready:function(){d(function(){f.up.callback(!0)},0)}},e.secret),j=function(a){l.SendToChild(a,e.secret)}}catch(m){throw new Error("Could not set up VBScript NixProxy:"+m.message)}O(e.props,{src:K(e.remote,{xdm_e:I(c.href),xdm_c:e.channel,xdm_s:e.secret,xdm_p:3}),name:q+e.channel+"_provider"}),i=Q(e),i.contentWindow.opener=l}else{b.referrer&&I(b.referrer)!=L.xdm_e&&(a.top.location=L.xdm_e);try{l=a.opener}catch(n){throw new Error("Cannot access window.opener")}l.SetChild({send:function(a){g.setTimeout(function(){f.up.incoming(a,k)},0)}}),j=function(a){l.SendToParent(a,e.secret)},d(function(){f.up.callback(!0)},0)}},init:function(){E(f.onDOMReady,f)}}},o.stack.NameTransport=function(a){function l(b){var d=a.remoteHelper+(c?"#_3":"#_2")+a.channel;e.contentWindow.sendMessage(b,d)}function m(){c?(++g===2||!c)&&b.up.callback(!0):(l("ready"),b.up.callback(!0))}function n(a){b.up.incoming(a,j)}function p(){i&&d(function(){i(!0)},0)}var b,c,e,f,g,i,j,k;return b={outgoing:function(a,b,c){i=c,l(a)},destroy:function(){e.parentNode.removeChild(e),e=null,c&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){c=a.isHost,g=0,j=I(a.remote),a.local=J(a.local),c?(o.Fn.set(a.channel,function(b){c&&b==="ready"&&(o.Fn.set(a.channel,n),m())}),k=K(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),O(a.props,{src:k+"#"+a.channel,name:q+a.channel+"_provider"}),f=Q(a)):(a.remoteHelper=a.remote,o.Fn.set(a.channel,n)),e=Q({props:{src:a.local+"#_4"+a.channel},onLoad:function b(){var c=e||this;y(c,"load",b),o.Fn.set(a.channel+"_load",p),function f(){typeof c.contentWindow.sendMessage=="function"?m():d(f,50)}()}})},init:function(){E(b.onDOMReady,b)}}},o.stack.HashTransport=function(b){function p(a){if(!m)return;var c=b.remote+"#"+k++ +"_"+a;(f||!n?m.contentWindow:m).location=c}function r(a){j=a,c.up.incoming(j.substring(j.indexOf("_")+1),o)}function s(){if(!l)return;var a=l.location.href,b="",c=a.indexOf("#");c!=-1&&(b=a.substring(c)),b&&b!=j&&r(b)}function t(){g=setInterval(s,i)}var c,e=this,f,g,i,j,k,l,m,n,o;return c={outgoing:function(a,b){p(a)},destroy:function(){a.clearInterval(g),(f||!n)&&m.parentNode.removeChild(m),m=null},onDOMReady:function(){f=b.isHost,i=b.interval,j="#"+b.channel,k=0,n=b.useParent,o=I(b.remote);if(f){b.props={src:b.remote,name:q+b.channel+"_provider"};if(n)b.onLoad=function(){l=a,t(),c.up.callback(!0)};else{var e=0,g=b.delay/50;(function p(){if(++e>g)throw new Error("Unable to reference listenerwindow");try{l=m.contentWindow.frames[q+b.channel+"_consumer"]}catch(a){}l?(t(),c.up.callback(!0)):d(p,50)})()}m=Q(b)}else l=a,t(),n?(m=parent,c.up.callback(!0)):(O(b,{props:{src:b.remote+"#"+b.channel+new Date,name:q+b.channel+"_consumer"},onLoad:function(){c.up.callback(!0)}}),m=Q(b))},init:function(){E(c.onDOMReady,c)}}},o.stack.ReliableBehavior=function(a){var b,c,d=0,e=0,f="";return b={incoming:function(a,g){var i=a.indexOf("_"),j=a.substring(0,i).split(",");a=a.substring(i+1),j[0]==d&&(f="",c&&c(!0)),a.length>0&&(b.down.outgoing(j[1]+","+d+"_"+f,g),e!=j[1]&&(e=j[1],b.up.incoming(a,g)))},outgoing:function(a,g,i){f=a,c=i,b.down.outgoing(e+","+ ++d+"_"+a,g)}}},o.stack.QueueBehavior=function(a){function n(){if(a.remove&&c.length===0){U(b);return}if(g||c.length===0||j)return;g=!0;var e=c.shift();b.down.outgoing(e.data,e.origin,function(a){g=!1,e.callback&&d(function(){e.callback(a)},0),n()})}var b,c=[],g=!0,i="",j,k=0,l=!1,m=!1;return b={init:function(){M(a)&&(a={}),a.maxLength&&(k=a.maxLength,m=!0),a.lazy?l=!0:b.down.init()},callback:function(a){g=!1;var c=b.up;n(),c.callback(a)},incoming:function(c,d){if(m){var f=c.indexOf("_"),g=parseInt(c.substring(0,f),10);i+=c.substring(f+1),g===0&&(a.encode&&(i=e(i)),b.up.incoming(i,d),i="")}else b.up.incoming(c,d)},outgoing:function(d,e,g){a.encode&&(d=f(d));var i=[],j;if(m){while(d.length!==0)j=d.substring(0,k),d=d.substring(j.length),i.push(j);while(j=i.shift())c.push({data:i.length+"_"+j,origin:e,callback:i.length===0?g:null})}else c.push({data:d,origin:e,callback:g});l?b.down.init():n()},destroy:function(){j=!0,b.down.destroy()}}},o.stack.VerifyBehavior=function(a){function f(){c=Math.random().toString(16).substring(2),b.down.outgoing(c)}var b,c,d,e=!1;return b={incoming:function(e,g){var i=e.indexOf("_");i===-1?e===c?b.up.callback(!0):d||(d=e,a.initiate||f(),b.down.outgoing(e)):e.substring(0,i)===d&&b.up.incoming(e.substring(i+1),g)},outgoing:function(a,d,e){b.down.outgoing(c+"_"+a,d,e)},callback:function(b){a.initiate&&f()}}},o.stack.RpcBehavior=function(a,b){function g(a){a.jsonrpc="2.0",c.down.outgoing(d.stringify(a))}function i(a,b){var c=Array.prototype.slice;return function(){var d=arguments.length,i,j={method:b};d>0&&typeof arguments[d-1]=="function"?(d>1&&typeof arguments[d-2]=="function"?(i={success:arguments[d-2],error:arguments[d-1]},j.params=c.call(arguments,0,d-2)):(i={success:arguments[d-1]},j.params=c.call(arguments,0,d-1)),f[""+ ++e]=i,j.id=e):j.params=c.call(arguments,0),a.namedParams&&j.params.length===1&&(j.params=j.params[0]),g(j)}}function k(a,b,c,d){if(!c){b&&g({id:b,error:{code:-32601,message:"Procedure not found."}});return}var e,f;b?(e=function(a){e=j,g({id:b,result:a})},f=function(a,c){f=j;var d={id:b,error:{code:-32099,message:a}};c&&(d.error.data=c),g(d)}):e=f=j,v(d)||(d=[d]);try{var i=c.method.apply(c.scope,d.concat([e,f]));M(i)||e(i)}catch(k){f(k.message)}}var c,d=b.serializer||N(),e=0,f={};return c={incoming:function(a,c){var e=d.parse(a);if(e.method)b.handle?b.handle(e,g):k(e.method,e.id,b.local[e.method],e.params);else{var i=f[e.id];e.error?i.error&&i.error(e.error):i.success&&i.success(e.result),delete f[e.id]}},init:function(){if(b.remote)for(var d in b.remote)b.remote.hasOwnProperty(d)&&(a[d]=i(b.remote[d],d));c.down.init()},destroy:function(){for(var d in b.remote)b.remote.hasOwnProperty(d)&&a.hasOwnProperty(d)&&delete a[d];c.down.destroy()}}},g.easyXDM=o})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),a()}),provide("libwrap/easyxdm",function(a){using("$lib/easyXDM.js",function(){a(easyXDM)})}),provide("lib/lazyload",function(a){a(function(a){function i(b,c){var d=a.createElement(b),e;for(e in c)c.hasOwnProperty(e)&&d.setAttribute(e,c[e]);return d}function j(a){var b=d[a],c,g;b&&(c=b.callback,g=b.urls,g.shift(),e=0,g.length||(c&&c.call(b.context,b.obj),d[a]=null,f[a].length&&l(a)))}function k(){var c=navigator.userAgent;b={async:a.createElement("script").async===!0},(b.webkit=/AppleWebKit\//.test(c))||(b.ie=/MSIE/.test(c))||(b.opera=/Opera/.test(c))||(b.gecko=/Gecko\//.test(c))||(b.unknown=!0)}function l(e,g,l,o,p){var q=function(){j(e)},r=e==="css",s=[],t,u,v,w,x,y;b||k();if(g){g=typeof g=="string"?[g]:g.concat();if(r||b.async||b.gecko||b.opera)f[e].push({urls:g,callback:l,obj:o,context:p});else for(t=0,u=g.length;t<u;++t)f[e].push({urls:[g[t]],callback:t===u-1?l:null,obj:o,context:p})}if(d[e]||!(w=d[e]=f[e].shift()))return;c||(c=a.head||a.getElementsByTagName("head")[0]),x=w.urls;for(t=0,u=x.length;t<u;++t)y=x[t],r?v=b.gecko?i("style"):i("link",{href:y,rel:"stylesheet"}):(v=i("script",{src:y}),v.async=!1),v.className="lazyload",v.setAttribute("charset","utf-8"),b.ie&&!r?v.onreadystatechange=function(){/loaded|complete/.test(v.readyState)&&(v.onreadystatechange=null,q())}:r&&(b.gecko||b.webkit)?b.webkit?(w.urls[t]=v.href,n()):(v.innerHTML='@import "'+y+'";',m(v)):v.onload=v.onerror=q,s.push(v);for(t=0,u=s.length;t<u;++t)c.appendChild(s[t])}function m(a){var b;try{b=!!a.sheet.cssRules}catch(c){e+=1,e<200?setTimeout(function(){m(a)},50):b&&j("css");return}j("css")}function n(){var a=d.css,b;if(a){b=g.length;while(--b>=0)if(g[b].href===a.urls[0]){j("css");break}e+=1,a&&(e<200?setTimeout(n,50):j("css"))}}var b,c,d={},e=0,f={css:[],js:[]},g=a.styleSheets;return{css:function(a,b,c,d){l("css",a,b,c,d)},js:function(a,b,c,d){l("js",a,b,c,d)}}}(window.document))}),provide("phoenix-more-css-wrapper",function(a){var b=[];if(!twttr.isTestEnv)if(twttr.isT1){var c=twttr.isRTL?".rtl":"";b.push(twttr.hasHoversInCss?"css!/t1/css/t1_more.bundle"+c+".css":"css!/t1/css/t1_more_no_hovers.bundle"+c+".css")}else b.push("css!/phoenix/css/phoenix_more.bundle.css");using(b,function(){a()})}),provide("$lib/jquery.ui.core.js",function(a){(function($,a){function b(a,b){var d=a.nodeName.toLowerCase();if("area"===d){var e=a.parentNode,f=e.name,g;return!a.href||!f||e.nodeName.toLowerCase()!=="map"?!1:(g=$("img[usemap=#"+f+"]")[0],!!g&&c(g))}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||b:b)&&c(a)}function c(a){return!$(a).parents().andSelf().filter(function(){return $.curCSS(this,"visibility")==="hidden"||$.expr.filters.hidden(this)}).length}$.ui=$.ui||{};if($.ui.version)return;$.extend($.ui,{version:"1.8.16",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),$.fn.extend({propAttr:$.fn.prop||$.fn.attr,_focus:$.fn.focus,focus:function(a,b){return typeof a=="number"?this.each(function(){var c=this;setTimeout(function(){$(c).focus(),b&&b.call(c)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return $.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.curCSS(this,"position",1))&&/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?$(document):a},zIndex:function(b){if(b!==a)return this.css("zIndex",b);if(this.length){var c=$(this[0]),d,e;while(c.length&&c[0]!==document){d=c.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){e=parseInt(c.css("zIndex"),10);if(!isNaN(e)&&e!==0)return e}c=c.parent()}}return 0},disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.each(["Width","Height"],function(b,c){function g(a,b,c,e){return $.each(d,function(){b-=parseFloat($.curCSS(a,"padding"+this,!0))||0,c&&(b-=parseFloat($.curCSS(a,"border"+this+"Width",!0))||0),e&&(b-=parseFloat($.curCSS(a,"margin"+this,!0))||0)}),b}var d=c==="Width"?["Left","Right"]:["Top","Bottom"],e=c.toLowerCase(),f={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+c]=function(b){return b===a?f["inner"+c].call(this):this.each(function(){$(this).css(e,g(this,b)+"px")})},$.fn["outer"+c]=function(a,b){return typeof a!="number"?f["outer"+c].call(this,a):this.each(function(){$(this).css(e,g(this,a,!0,b)+"px")})}}),$.extend($.expr[":"],{data:function(a,b,c){return!!$.data(a,c[3])},focusable:function(a){return b(a,!isNaN($.attr(a,"tabindex")))},tabbable:function(a){var c=$.attr(a,"tabindex"),d=isNaN(c);return(d||c>=0)&&b(a,!d)}}),$(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));$.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),$.support.minHeight=b.offsetHeight===100,$.support.selectstart="onselectstart"in b,a.removeChild(b).style.display="none"}),$.extend($.ui,{plugin:{add:function(a,b,c){var d=$.ui[a].prototype;for(var e in c)d.plugins[e]=d.plugins[e]||[],d.plugins[e].push([b,c[e]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if($(a).css("overflow")==="hidden")return!1;var c=b&&b==="left"?"scrollLeft":"scrollTop",d=!1;return a[c]>0?!0:(a[c]=1,d=a[c]>0,a[c]=0,d)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(a,b,c,d,e,f){return $.ui.isOverAxis(a,c,e)&&$.ui.isOverAxis(b,d,f)}})})(jQuery),a()}),provide("$lib/jquery.ui.widget.js",function(a){(function($,a){if($.cleanData){var b=$.cleanData;$.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)try{$(d).triggerHandler("remove")}catch(e){}b(a)}}else{var c=$.fn.remove;$.fn.remove=function(a,b){return this.each(function(){return b||(!a||$.filter(a,[this]).length)&&$("*",this).add([this]).each(function(){try{$(this).triggerHandler("remove")}catch(a){}}),c.call($(this),a,b)})}}$.widget=function(a,b,c){var d=a.split(".")[0],e;a=a.split(".")[1],e=d+"-"+a,c||(c=b,b=$.Widget),$.expr[":"][e]=function(b){return!!$.data(b,a)},$[d]=$[d]||{},$[d][a]=function(a,b){arguments.length&&this._createWidget(a,b)};var f=new b;f.options=$.extend(!0,{},f.options),$[d][a].prototype=$.extend(!0,f,{namespace:d,widgetName:a,widgetEventPrefix:$[d][a].prototype.widgetEventPrefix||a,widgetBaseClass:e},c),$.widget.bridge(a,$[d][a])},$.widget.bridge=function(b,c){$.fn[b]=function(d){var e=typeof d=="string",f=Array.prototype.slice.call(arguments,1),g=this;return d=!e&&f.length?$.extend.apply(null,[!0,d].concat(f)):d,e&&d.charAt(0)==="_"?g:(e?this.each(function(){var c=$.data(this,b),e=c&&$.isFunction(c[d])?c[d].apply(c,f):c;if(e!==c&&e!==a)return g=e,!1}):this.each(function(){var a=$.data(this,b);a?a.option(d||{})._init():$.data(this,b,new c(d,this))}),g)}},$.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,b){$.data(b,this.widgetName,this),this.element=$(b),this.options=$.extend(!0,{},this.options,this._getCreateOptions(),a);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(b,c){var d=b;if(arguments.length===0)return $.extend({},this.options);if(typeof b=="string"){if(c===a)return this.options[b];d={},d[b]=c}return this._setOptions(d),this},_setOptions:function(a){var b=this;return $.each(a,function(a,c){b._setOption(a,c)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,b,c){var d=this.options[a];b=$.Event(b),b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),c=c||{};if(b.originalEvent)for(var e=$.event.props.length,f;e;)f=$.event.props[--e],b[f]=b.originalEvent[f];return this.element.trigger(b,c),!($.isFunction(d)&&d.call(this.element[0],b,c)===!1||b.isDefaultPrevented())}}})(jQuery),a()}),provide("$lib/jquery.ui.mouse.js",function(a){(function($,a){var b=!1;$(document).mouseup(function(a){b=!1}),$.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===$.data(b.target,a.widgetName+".preventClickEvent"))return $.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(a){if(b)return;this._mouseStarted&&this._mouseUp(a),this._mouseDownEvent=a;var c=this,d=a.which==1,e=typeof this.options.cancel=="string"&&a.target.nodeName?$(a.target).closest(this.options.cancel).length:!1;if(!d||e||!this._mouseCapture(a))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=this._mouseStart(a)!==!1;if(!this._mouseStarted)return a.preventDefault(),!0}return!0===$.data(a.target,this.widgetName+".preventClickEvent")&&$.removeData(a.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),a.preventDefault(),b=!0,!0},_mouseMove:function(a){return!$.browser.msie||document.documentMode>=9||!!a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return $(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&$.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery),a()}),provide("$lib/jquery.ui.draggable.js",function(a){(function($,a){$.widget("ui.draggable",$.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var b=this.options;return this.helper||b.disabled||$(a.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(a),this.handle?(b.iframeFix&&$(b.iframeFix===!0?"iframe":b.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(a){var b=this.options;return this.helper=this._createHelper(a),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),b.containment&&this._setContainment(),this._trigger("start",a)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!b.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,a),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(a,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,a),!0)},_mouseDrag:function(a,b){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute");if(!b){var c=this._uiHash();if(this._trigger("drag",a,c)===!1)return this._mouseUp({}),!1;this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return $.ui.ddmanager&&$.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var b=!1;$.ui.ddmanager&&!this.options.dropBehaviour&&(b=$.ui.ddmanager.drop(this,a)),this.dropped&&(b=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,b)){var c=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",a)!==!1&&c._clear()})}else this._trigger("stop",a)!==!1&&this._clear();return!1},_mouseUp:function(a){return this.options.iframeFix===!0&&$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,a),$.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){var b=!this.options.handle||!$(this.options.handle,this.element).length?!0:!1;return $(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(b=!0)}),b},_createHelper:function(a){var b=this.options,c=$.isFunction(b.helper)?$(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return c.parents("body").length||c.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo),c[0]!=this.element[0]&&!/(fixed|absolute)/.test(c.css("position"))&&c.css("position","absolute"),c},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),$.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left"in a&&(this.offset.click.left=a.left+this.margins.left),"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top"in a&&(this.offset.click.top=a.top+this.margins.top),"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&$.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:$(window).scrollLeft())+$(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:$(window).scrollTop())+($(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var b=$(a.containment),c=b[0];if(!c)return;var d=b.offset(),e=$(c).css("overflow")!="hidden";this.containment=[(parseInt($(c).css("borderLeftWidth"),10)||0)+(parseInt($(c).css("paddingLeft"),10)||0),(parseInt($(c).css("borderTopWidth"),10)||0)+(parseInt($(c).css("paddingTop"),10)||0),(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt($(c).css("borderLeftWidth"),10)||0)-(parseInt($(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt($(c).css("borderTopWidth"),10)||0)-(parseInt($(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=b}else a.containment.constructor==Array&&(this.containment=a.containment)},_convertPositionTo:function(a,b){b||(b=this.position);var c=a=="absolute"?1:-1,d=this.options,e=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop())*c),left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*c)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(c[0].tagName),e=a.pageX,f=a.pageY;if(this.originalPosition){var g;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();g=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else g=this.containment;a.pageX-this.offset.click.left<g[0]&&(e=g[0]+this.offset.click.left),a.pageY-this.offset.click.top<g[1]&&(f=g[1]+this.offset.click.top),a.pageX-this.offset.click.left>g[2]&&(e=g[2]+this.offset.click.left),a.pageY-this.offset.click.top>g[3]&&(f=g[3]+this.offset.click.top)}if(b.grid){var j=b.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY;f=g?j-this.offset.click.top<g[1]||j-this.offset.click.top>g[3]?j-this.offset.click.top<g[1]?j+b.grid[1]:j-b.grid[1]:j:j;var k=b.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/b.grid[0])*b.grid[0]:this.originalPageX;e=g?k-this.offset.click.left<g[0]||k-this.offset.click.left>g[2]?k-this.offset.click.left<g[0]?k+b.grid[0]:k-b.grid[0]:k:k}}return{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():d?0:c.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():d?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(a,b,c){return c=c||this._uiHash(),$.ui.plugin.call(this,a,[b,c]),a=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,a,b,c)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.extend($.ui.draggable,{version:"1.8.16"}),$.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=$(this).data("draggable"),d=c.options,e=$.extend({},b,{item:c.element});c.sortables=[],$(d.connectToSortable).each(function(){var b=$.data(this,"sortable");b&&!b.options.disabled&&(c.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,e))})},stop:function(a,b){var c=$(this).data("draggable"),d=$.extend({},b,{item:c.element});$.each(c.sortables,function(){this.instance.isOver?(this.instance.isOver=0,c.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,d))})},drag:function(a,b){var c=$(this).data("draggable"),d=this,e=function(a){var b=this.offset.click.top,c=this.offset.click.left,d=this.positionAbs.top,e=this.positionAbs.left,f=a.height,g=a.width,i=a.top,j=a.left;return $.ui.isOver(d+b,e+c,i,j,f,g)};$.each(c.sortables,function(e){this.instance.positionAbs=c.positionAbs,this.instance.helperProportions=c.helperProportions,this.instance.offset.click=c.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(d).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return b.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",a),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",a),c.dropped=!1)})}}),$.ui.plugin.add("draggable","cursor",{start:function(a,b){var c=$("body"),d=$(this).data("draggable").options;c.css("cursor")&&(d._cursor=c.css("cursor")),c.css("cursor",d.cursor)},stop:function(a,b){var c=$(this).data("draggable").options;c._cursor&&$("body").css("cursor",c._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(a,b){var c=$(b.helper),d=$(this).data("draggable").options;c.css("opacity")&&(d._opacity=c.css("opacity")),c.css("opacity",d.opacity)},stop:function(a,b){var c=$(this).data("draggable").options;c._opacity&&$(b.helper).css("opacity",c._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(a,b){var c=$(this).data("draggable");c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"&&(c.overflowOffset=c.scrollParent.offset())},drag:function(a,b){var c=$(this).data("draggable"),d=c.options,e=!1;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!d.axis||d.axis!="x")c.overflowOffset.top+c.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:a.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed);if(!d.axis||d.axis!="y")c.overflowOffset.left+c.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:a.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed)}else{if(!d.axis||d.axis!="x")a.pageY-$(document).scrollTop()<d.scrollSensitivity?e=$(document).scrollTop($(document).scrollTop()-d.scrollSpeed):$(window).height()-(a.pageY-$(document).scrollTop())<d.scrollSensitivity&&(e=$(document).scrollTop($(document).scrollTop()+d.scrollSpeed));if(!d.axis||d.axis!="y")a.pageX-$(document).scrollLeft()<d.scrollSensitivity?e=$(document).scrollLeft($(document).scrollLeft()-d.scrollSpeed):$(window).width()-(a.pageX-$(document).scrollLeft())<d.scrollSensitivity&&(e=$(document).scrollLeft($(document).scrollLeft()+d.scrollSpeed))}e!==!1&&$.ui.ddmanager&&!d.dropBehaviour&&$.ui.ddmanager.prepareOffsets(c,a)}}),$.ui.plugin.add("draggable","snap",{start:function(a,b){var c=$(this).data("draggable"),d=c.options;c.snapElements=[],$(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var a=$(this),b=a.offset();this!=c.element[0]&&c.snapElements.push({item:this,width:a.outerWidth(),height:a.outerHeight(),top:b.top,left:b.left})})},drag:function(a,b){var c=$(this).data("draggable"),d=c.options,e=d.snapTolerance,f=b.offset.left,g=f+c.helperProportions.width,i=b.offset.top,j=i+c.helperProportions.height;for(var k=c.snapElements.length-1;k>=0;k--){var l=c.snapElements[k].left,m=l+c.snapElements[k].width,n=c.snapElements[k].top,o=n+c.snapElements[k].height;if(!(l-e<f&&f<m+e&&n-e<i&&i<o+e||l-e<f&&f<m+e&&n-e<j&&j<o+e||l-e<g&&g<m+e&&n-e<i&&i<o+e||l-e<g&&g<m+e&&n-e<j&&j<o+e)){c.snapElements[k].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,a,$.extend(c._uiHash(),{snapItem:c.snapElements[k].item})),c.snapElements[k].snapping=!1;continue}if(d.snapMode!="inner"){var p=Math.abs(n-j)<=e,q=Math.abs(o-i)<=e,r=Math.abs(l-g)<=e,s=Math.abs(m-f)<=e;p&&(b.position.top=c._convertPositionTo("relative",{top:n-c.helperProportions.height,left:0}).top-c.margins.top),q&&(b.position.top=c._convertPositionTo("relative",{top:o,left:0}).top-c.margins.top),r&&(b.position.left=c._convertPositionTo("relative",{top:0,left:l-c.helperProportions.width}).left-c.margins.left),s&&(b.position.left=c._convertPositionTo("relative",{top:0,left:m}).left-c.margins.left)}var t=p||q||r||s;if(d.snapMode!="outer"){var p=Math.abs(n-i)<=e,q=Math.abs(o-j)<=e,r=Math.abs(l-f)<=e,s=Math.abs(m-g)<=e;p&&(b.position.top=c._convertPositionTo("relative",{top:n,left:0}).top-c.margins.top),q&&(b.position.top=c._convertPositionTo("relative",{top:o-c.helperProportions.height,left:0}).top-c.margins.top),r&&(b.position.left=c._convertPositionTo("relative",{top:0,left:l}).left-c.margins.left),s&&(b.position.left=c._convertPositionTo("relative",{top:0,left:m-c.helperProportions.width}).left-c.margins.left)}!c.snapElements[k].snapping&&(p||q||r||s||t)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,a,$.extend(c._uiHash(),{snapItem:c.snapElements[k].item})),c.snapElements[k].snapping=p||q||r||s||t}}}),$.ui.plugin.add("draggable","stack",{start:function(a,b){var c=$(this).data("draggable").options,d=$.makeArray($(c.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(!d.length)return;var e=parseInt(d[0].style.zIndex)||0;$(d).each(function(a){this.style.zIndex=e+a}),this[0].style.zIndex=e+d.length}}),$.ui.plugin.add("draggable","zIndex",{start:function(a,b){var c=$(b.helper),d=$(this).data("draggable").options;c.css("zIndex")&&(d._zIndex=c.css("zIndex")),c.css("zIndex",d.zIndex)},stop:function(a,b){var c=$(this).data("draggable").options;c._zIndex&&$(b.helper).css("zIndex",c._zIndex)}})})(jQuery),a()}),provide("$lib/jquery.ui.progressbar.js",function(a){(function($,a){$.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),$.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===a?this._value():(this._setOption("value",b),this)},_setOption:function(a,b){a==="value"&&(this.options.value=b,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),$.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),$.extend($.ui.progressbar,{version:"1.8.16"})})(jQuery),a()}),provide("$lib/jquery.swfobject.js",function(a){(function(a,h,b){function c(a,b){var d=(a[0]||0)-(b[0]||0);return d>0||!d&&a.length>0&&c(a.slice(1),b.slice(1))}function d(a){if(typeof a!=g)return a;var b=[],c="";for(var e in a)c=typeof a[e]==g?d(a[e]):[e,i?encodeURI(a[e]):a[e]].join("="),b.push(c);return b.join("&")}function e(a){var b=[];for(var c in a)a[c]&&b.push([c,'="',a[c],'"'].join(""));return b.join(" ")}function f(a){var b=[];for(var c in a)b.push(['<param name="',c,'" value="',d(a[c]),'" />'].join(""));return b.join("")}var g="object",i=!0;try{var j=b.description||function(){return(new b("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}()}catch(k){j="Unavailable"}var l=j.match(/\d+/g)||[0];a[h]={available:l[0]>0,activeX:b&&!b.name,version:{original:j,array:l,string:l.join("."),major:parseInt(l[0],10)||0,minor:parseInt(l[1],10)||0,release:parseInt(l[2],10)||0},hasVersion:function(a){return a=/string|number/.test(typeof a)?a.toString().split("."):/object/.test(typeof a)?[a.major,a.minor]:a||[0,0],c(l,a)},encodeParams:!0,expressInstall:"expressInstall.swf",expressInstallIsActive:!1,create:function(a){if(!a.swf||this.expressInstallIsActive||!this.available&&!a.hasVersionFail)return!1;if(!this.hasVersion(a.hasVersion||1)){this.expressInstallIsActive=!0;if(typeof a.hasVersionFail=="function"&&!a.hasVersionFail.apply(a))return!1;a={swf:a.expressInstall||this.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:this.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:a.swf,type:"application/x-shockwave-flash",id:a.id||"flash_"+Math.floor(Math.random()*999999999),width:a.width||320,height:a.height||180,style:a.style||""},i=typeof a.useEncode!="undefined"?a.useEncode:this.encodeParams,a.movie=a.swf,a.wmode=a.wmode||"opaque",delete a.fallback,delete a.hasVersion,delete a.hasVersionFail,delete a.height,delete a.id,delete a.swf,delete a.useEncode,delete a.width;var b=document.createElement("div");return b.innerHTML=["<object ",e(attrs),">",f(a),"</object>"].join(""),b.firstChild}},a.fn[h]=function(b){var c=this.find(g).andSelf().filter(g);return/string|object/.test(typeof b)&&this.each(function(){var c=a(this),d;b=typeof b==g?b:{swf:b},b.fallback=this;if(d=a[h].create(b))c.children().remove(),c.html(d)}),typeof b=="function"&&c.each(function(){var c=this;c.jsInteractionTimeoutMs=c.jsInteractionTimeoutMs||0,c.jsInteractionTimeoutMs<660&&(c.clientWidth||c.clientHeight?b.call(c):setTimeout(function(){a(c)[h](b)},c.jsInteractionTimeoutMs+66))}),c}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject),a()}),provide("$lib/jquery.hotkeys.js",function(a){(function(a){function b(b){if(typeof b.data!="string"&&!a.isArray(b.data))return;var c=b.handler,d=a.isArray(b.data),e=0,f=b.data.length;b.handler=function(g){var i=b.data,j;d&&(i=i[e]),j=i.toLowerCase().split(" ");if(!(this===g.target||!/textarea|select/i.test(g.target.nodeName)&&g.target.type!=="text"))return;var k=g.type!=="keypress"&&a.hotkeys.specialKeys[g.which],l=String.fromCharCode(g.which).toLowerCase(),m,n="",o={};g.altKey&&k!=="alt"&&(n+="alt+"),g.ctrlKey&&k!=="ctrl"&&(n+="ctrl+"),g.metaKey&&!g.ctrlKey&&k!=="meta"&&(n+="meta+"),g.shiftKey&&k!=="shift"&&(n+="shift+"),k?o[n+k]=!0:(o[n+l]=!0,o[n+a.hotkeys.shiftNums[l]]=!0,n==="shift+"&&(o[a.hotkeys.shiftNums[l]]=!0));for(var p=0,q=j.length;p<q;p++)if(o[j[p]])return!d||e===f-1?(e=0,c.apply(this,arguments)):(e+=1,!0);if(d&&e!==0){j=b.data[0].toLowerCase().split(" ");for(var p=0,q=j.length;p<q;p++)if(o[j[p]])return e=1,!0;e=0}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})})(jQuery),a()}),provide("$lib/jquery.autoellipsis.js",function(a){(function($){function e(a,b){var c=a.data();c||(c={});var d=c.wrapperElement;d||(d=a.wrapInner("<div/>").find(">div"));var e=d.data(),j=e.originalContent;j?d=e.originalContent.clone(!0).data({originalContent:j}).replaceAll(d):d.data({originalContent:d.clone(!0)}),a.data({wrapperElement:d,containerWidth:a.innerWidth(),containerHeight:a.innerHeight()});var k=!1,l=d;b.selector&&(l=$(d.find(b.selector).get().reverse())),l.each(function(){var c=$(this),e=c.text(),j=!1;if(d.innerHeight()-c.innerHeight()>a.innerHeight())c.remove();else{i(c);if(c.contents().length){k&&(g(c).get(0).nodeValue+=b.ellipsis,k=!1);while(d.innerHeight()>a.innerHeight()){j=f(c);if(!j){k=!0,c.remove();break}i(c);if(!c.contents().length){k=!0,c.remove();break}g(c).get(0).nodeValue+=b.ellipsis}b.setTitle=="onEllipsis"&&j||b.setTitle=="always"?c.attr("title",e):b.setTitle!="never"&&c.removeAttr("title")}}})}function f(a){var b=g(a);if(b.length){var c=b.get(0).nodeValue,d=c.lastIndexOf(" ");return d>-1?(c=$.trim(c.substring(0,d)),b.get(0).nodeValue=c):b.get(0).nodeValue="",!0}return!1}function g(a){if(a.contents().length){var b=a.contents().last();return b.filter(j).length?b:g(b)}return a.append(""),a.contents().last()}function i(a){if(a.contents().length){var b=a.contents().last();if(b.filter(j).length){var c=b.get(0).nodeValue;return c=$.trim(c),c==""?(b.remove(),!0):!1}while(i(b));return b.contents().length?!1:(b.remove(),!0)}return!1}function j(){return this.nodeType===3}function k(c,d){a[c]=d,b||(b=window.setInterval(function(){m()},200))}function l(c){a[c]&&(delete a[c],a.length||b&&(window.clearInterval(b),b=undefined))}function m(){if(!c){c=!0;for(var b in a)$(b).each(function(){var c,d;c=$(this),d=c.data(),(d.containerWidth!=c.innerWidth()||d.containerHeight!=c.innerHeight())&&e(c,a[b])});c=!1}}var a={},b,c=!1,d={ellipsis:"...",setTitle:"never",live:!1};$.fn.ellipsis=function(a,b){var c,f;return c=$(this),typeof a!="string"&&(b=a,a=undefined),f=$.extend({},d,b),f.selector=a,c.each(function(){var a=$(this);e(a,f)}),f.live?k(c.selector,f):l(c.selector),this}})(jQuery),a()}),provide("mixins/tweetFlagging",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.tweetFlagging",function(a){a.methods({flagLinkClicked:function(a,b){var c=$(a.target),d=this,e=twttr.decider.isAvailable("flag_yourself_nsfw")&&twttr.helpers.isCurrentUser(b.user),f=b.possiblySensitive,g={isOurTweet:e,before:function(){if(e){var a=c.attr("alternateText");c.attr("alternateText",c.html()),c.html(a)}else{var b='&nbsp;<a target="_blank" href="'+twttr.router.flagTurkeySupportPath()+'">'+_("(learn more)")+"</a>";c.replaceWith("<span>"+_("Flagged")+b+"</span>")}}};f&&!e?twttr.dialogs.sensitiveFlagConfirmation(function(){b.flag(g)}).open():(e&&(b.sync("possiblySensitive",!b.possiblySensitive),g.possibly_sensitive=b.possiblySensitive),b.flag(g))},tweetFlaggable:function(a){return twttr.loggedIn&&twttr.decider.isAvailable("media_flagging")&&(!a||a.possiblySensitiveEditable!==!1)}})}),a(twttr.mixins.tweetFlagging)})}),provide("promptbird",function(a){using("util","components/Promptbird").as(function(b){twttr.promptbird=twttr.promptbird||{},twttr.promptbird.renderComponentFromPrompt=function(a){var c=b.util.camelize("Prompt_"+a.prompt.template_name);if(!twttr.components[c]){var d=new Error('Promptbird component "'+c+'" is undefined');twttr.isLocalhost&&console.log(d,d.stack||"error.stack is unavailable :(");return}var e=new twttr.components[c](a);return e.bind("destroyed",twttr.promptbird.destroyCallback),e},twttr.promptbird.destroyCallback=function(){delete twttr.promptbird.cache},twttr.promptbird.getPrompt=function(){var a=(new b.util.Location(location.href)).search;if(!twttr.decider.isAvailable("promptbird_phoenix")&&!/force_prompt_id/.test(a))return;if(!twttr.promptbird.cache)return;if(!twttr.promptbird.cache.prompt.template_name)return;return twttr.promptbird.cache},twttr.promptbird.getPromptByFormat=function(a){var b=twttr.promptbird.getPrompt();if(!b)return;for(var c=0;c<a.length;c++)if(b.prompt.format===a[c])return b},a(twttr.promptbird)})}),provide("MessageManager",function(a){using().as(function(b){twttr.klass("twttr.MessageThread",function(a,b){this.threadId=a,this.messages=b}).methods({hasNewMessages:function(){return twttr.app.caches.dmThreads.get(this.threadId)!==this.messages[0].id&&!twttr.helpers.isCurrentUser(this.messages[0].sender)}}),twttr.klass("twttr.MessageManager",function(){var a=this;if(!twttr.loggedIn)return;twttr.isT1||this.setupContinuousPoll(),twttr.isT1&&twttr.decider.isAvailable("t1_dm_poll")&&($(document).on("active",function(){a.poll(twttr.MessageManager.activePollInterval)}),$(document).on("inactive",function(){a.poll(twttr.MessageManager.inactivePollInterval)}))}).statics({activePollInterval:9e4,inactivePollInterval:3e5}).methods(twttr.EventProvider).methods({setupContinuousPoll:function(){var a=this;this._pollingState?this._pollingState=="running"&&this._fetchMessages():(this._pollingState="starting",this._fetchMessages(function(){a._sort(),a.bind("messagesArrived",function(b,c){if(twttr.isT1)for(var d=c.length()-1;d>=0;d--)a.addMessage(c.get(d));else c.each(function(b){a.addMessage(b)})}),!twttr.isT1||twttr.decider.isAvailable("t1_dm_poll")?a.poll(twttr.MessageManager.activePollInterval):a.stopContinuousPoll(),a._intializeThreadState(),a.trigger("firstMessagesReceived"),a.trigger("pendingThreads")}))},isContinuouslyPolling:function(){return!!this._pollingState&&this._pollingState!=="starting"},stopContinuousPoll:function(){this.isContinuouslyPolling()&&(clearInterval(this._pollId),delete this._pollId,this._pollingState=null)},poll:function(a){var b=this;b.stopContinuousPoll(),b.currentPollInterval=a,b._pollId=setInterval(function(){b._fetchMessages()},a),b._pollingState="running"},reset:function(){this.threads=[],this.sentMessages=null,this.receivedMessage=null,twttr.app.caches.dmThreads.clear()},getAllThreads:function(a){var b=this;this.threads?a(this.threads):this.one("firstMessagesReceived",function(){a(b.threads)})},getThread:function(a,b){var c=this;if(this.threads){for(var d=0;d<this.threads.length;d++)if(this.threads[d].threadId===a)return b(this.threads[d]);return b()}this.getAllThreads(function(d){c.getThread(a,b)})},addMessage:function(a,b){var c=this;this.getThread(a.threadId,function(d){if(d){if(twttr.helpers.isCurrentUser(a.sender))for(var e=0,f=d.messages,g=f.length;e<g;e++){var i=f[e].id;if(i<a.id)break;if(i===a.id)return}d.messages.unshift(a);for(var e=0,j=c.threads.length;e<j;e++)if(c.threads[e].threadId===d.threadId){c.threads.splice(e,1);break}}else d=new twttr.MessageThread(a.threadId,[a]);c.threads||(c.threads=[]),c.threads.unshift(d),b&&c._markMessageAsRead(a),c.trigger("updatedThread",[d,"new",{message:a}]),c.trigger("newMessage."+a.threadId,[a]),c.trigger("pendingThreads")})},deleteMessage:function(a,b){var c=this;this.getThread(b,function(d){if(d){for(var e=0,f=d.messages,g=f.length;e<g;e++)if(f[e].id===a){var i=f.splice(e,1)[0];i.destroy({error:function(){c.addMessage(i)},success:function(a){var b={};b[a.id+""]={item_type:twttr.constants.clientEvent.itemType.message,target_id:a.id},trackClient({component:"stream",action:"delete"},{item_ids:[a.id],item_details:b})}});break}if(d.messages.length===0){for(var j=0;j<c.threads.length;j++)if(c.threads[j].threadId===b){c.threads.splice(j,1);break}c.trigger("deletedThread",[b])}else c.trigger("updatedThread",[d,"delete",{messageId:a}])}c.trigger("deletedMessage."+b,[a]),c.trigger("pendingThreads")})},hasPendingThreads:function(){var a=0,b=this.threads;if(b)for(var c=0,d=b.length;c<d;c++)b[c].hasNewMessages()&&a++;return a},markThreadAsRead:function(a){var b=this;this.getThread(a,function(c){if(!c)return;b._markMessageAsRead(c.messages[0]),b.trigger("readThread",[a]),b.trigger("pendingThreads")})},_markMessageAsRead:function(a){twttr.app.caches.dmThreads.set(a.threadId,a.id)},_intializeThreadState:function(){if(!twttr.app.caches.dmThreads.get("##initialized")){twttr.app.caches.dmThreads.set("##initialized",!0);var a=this.threads;for(var b=0,c=a.length;b<c;b++)twttr.app.caches.dmThreads.set(a[b].threadId,a[b].messages[0].id);return!0}return!1},_fetchMessages:function(a){function e(){c++;if(c===2||!d)b.isFetching=!1,a&&a()}var b=this,c=0;if(this.isFetching)return;this.isFetching=!0;var d=!twttr.isT1||this._pollingState==="starting",f,g={count:50,success:function(a){a.length()>0&&(b.receivedMessages?b.receivedMessages.concat(a):b.receivedMessages=a,b.trigger("messagesArrived",[a]),b._receivedSinceID=a.first().id),f=a,e()},cancel:function(){},error:function(a,b){a.status===502&&b.retry()}};b._receivedSinceID&&(g.since_id=b._receivedSinceID),twttr.currentUser&&twttr.currentUser.receivedMessages(g);var i={count:50,success:function(a){a.length()>0&&(b.sentMessages?b.sentMessages.concat(a):b.sentMessages=a,b.trigger("messagesArrived",[a]),b._sentSinceID=a.first().id),e()},cancel:function(){},error:function(a,b){a.status===502&&b.retry()}};b._sentSinceID&&(i.since_id=b._sentSinceID),twttr.currentUser&&d&&twttr.currentUser.sentMessages(i)},_sort:function(){this.allMessages=[],this.sentMessages&&(this.allMessages=this.allMessages.concat(this.sentMessages.array)),this.receivedMessages&&(this.allMessages=this.allMessages.concat(this.receivedMessages.array)),this.allMessages.sort(function(a,b){return twttr.natcompare(b.id,a.id)});var a={},b=[];for(var c=0;c<this.allMessages.length;c++){var d=this.allMessages[c],e=d.threadId;a[e]||(a[e]=[],b.push(e)),a[e].push(d)}this.threads=[];for(var c=0;c<b.length;c++)this.threads.push(new twttr.MessageThread(b[c],a[b[c]]))}}),a(twttr.MessageManager)})}),provide("ConversationManager",function(a){using("constants").as(function(b){twttr.klass("twttr.ConversationThread",function(a){this.threadId=a.user.screenName,this.user=a.user,this.count=a.count,this.lastMessageDate=a.lastMessageDate,this.lastMessageId=a.lastMessageId,this.messages=[]}).methods(twttr.EventProvider).methods({sort:function(){this.messages.sort(function(a,b){return b.id-a.id})},addMessage:function(a){if($.inArray(a,this.messages)>-1)return;this.messages.push(a),this.sort(),a.id>this.lastMessageId&&(this.lastMessageDate=a.createdAt,this.lastMessageId=a.id,this.count++),this.trigger("newMessage",[a])},deleteMessage:function(a,b){var c=!1;this.messages=$.grep(this.messages,function(b,d){return b.id===a&&(b.destroy(),c=!0),b.id!==a});if(!c)return;if(this.messages.length>0){var d=this.messages[this.messages.length-1];d.id>this.lastMessageId&&(this.lastMessageDate=d.createdAt,this.lastMessageId=d.id)}this.count--,this.trigger("deletedMessage",[a]),b()},getMessages:function(a){var b=this,c={user_id:this.user.id,since_id:this.since_id||0,count:100,success:function(c){c.each(function(a){b.addMessage(a)}),a(b)}};twttr.currentUser.conversationWith(c)}}),twttr.klass("twttr.ConversationManager",function(){this.threads={},this.since_id=0}).methods(twttr.EventProvider).methods({_fetchMessages:$.noop,_sort:$.noop,setupContinuousPoll:function(){if(this._pollId)return;var a=this;this._pollId=setInterval(function(){a.getAllThreads($.noop)},b.constants.directMessagePollInterval)},isContinuouslyPolling:function(){return twttr.is.def(this._pollId)},stopContinuousPoll:function(){this.isContinuouslyPolling()&&(clearInterval(this._pollId),delete this._pollId)},getThread:function(a,b){var c=this.threads[a];return c?c.getMessages(b):b()},getAllThreads:function(a){function c(c){var d;for(var e=c.array.length-1;e>=0;e--){var f=c.array[e];b.threads[f.user.screenName]?(d=b.threads[f.user.screenName],d.getMessages($.noop)):(d=new twttr.ConversationThread(f),b.threads[d.threadId]=d),b.since_id=d.lastMessageId,b.trigger("updatedThread",[d,"new"])}a()}var b=this;twttr.currentUser.conversations({success:c,since_id:this.since_id,count:100})},addMessage:function(a){var b=this.threads[a.threadId];b?(b.addMessage(a),this.trigger("updatedThread",[b,"new"])):(b=new twttr.ConversationThread({threadId:a.threadId,user:a.user,count:1,lastMessageDate:a.createdAt,lastMessageId:a.id}),this.threads[b.threadId]=b)},deleteMessage:function(a,b){var c=this,d=this.threads[b];d&&d.deleteMessage(a,function(){c.trigger("updatedThread",[d,""]),d.count===0&&(c.trigger("deletedThread",[b]),delete c.threads[b])})}}),a(twttr.ConversationManager)})}),provide("externalOauthPopup",function(a){using().as(function(b){a(function(a){var b,c=a.url,d=c.indexOf("?")==-1?"?":"&";c+=d+"callback_hash="+encodeURIComponent(a.callbackUrl);var e=$(window),f=window.screenY||window.screenTop||0,g=window.screenX||window.screenLeft||0,i=(e.height()-500)/2+f,j=(e.width()-500)/2+g,a=["width="+(a.width?a.width:500),"height="+(a.height?a.height:500),"top="+i,"left="+j,"toolbar=no","location=yes"];window.open(c,"twitter_oauth",a.join(",")).focus()})})}),provide("mixins/photoBox",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.photoBox",function(a){a.methods({_initPhotobox:function(){var a=this;if(!twttr.decider.isAvailable("turkey")||this.options.statusAction==="directMessage"||this.options.template.show_turkey===!1)return;this.tweetBoxId=twttr.turkey.getTweetBoxId(),this.options.template.tweet_box_id=this.tweetBoxId,(new twttr.views.PhotoControl(this.options.template)).render(this.$find("div.tweet-button-container"),"prepend");var b=this._getTextLength;this._getTextLength=function(){var a=b.apply(this,arguments);return this.turkey&&this.turkey.hasItems()&&(a+=this.turkey.count()*(twttr.constants.tcoLength+1)),a};var c=this.makeRequest;this.makeRequest=function(a,b,d){this.turkey&&this.turkey.hasItems()?(this._sendingStatus=!0,this.turkey.tweet(b,d)):c.apply(this,[a,b,d])};var d=this.resetTweetContent;this.resetTweetContent=function(){d.apply(this,arguments),this.turkey&&this.turkey.reset()};var e=function(){a.createFunc(),a._registerPhotoboxEvents();if(a.options.origin&&(a.options.origin=="main_tweet_box"||a.options.origin=="new-tweet-titlebar-button")){var b={context:a.options.origin=="main_tweet_box"?"timeline":"popup",event_info:twttr.turkey.tweetboxMode()};trackClient({component:"tweetbox",action:"impression"},b)}};this.bind("open",e),(!this.options.condensed||!this.options.condensedContent&&this.options.defaultContent||this._getDraftTweet())&&e()},_registerPhotoboxEvents:function(){var a=this;this.turkey.bind("photoChanged",function(){a.editor.trigger("didChangeContent",[a.editor.content()])});var b=function(){a.turkey&&a.turkey.destroy()};this.bind("close",b),this.bind("destroy",b),this.bind("titleChanged",function(b,c,d){if(d=="dm")a.turkey&&a.turkey.disable(),a.$find(".turkey-control").hide();else if(d=="reply"||d=="mention"||d=="update")a.turkey&&a.turkey.enable(),a.$find(".turkey-control").show()})},createFunc:function(){this.turkey&&this.turkey.remove(),this.turkey=new twttr.turkey.PhotoThumbnails(this.editor,this.$find(".turkey-selected-files"),this.$find(".turkey-add-action"),this.tweetBoxId)}})}),a()})}),provide("mixins/profileStreamMixin",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.profileStreamMixin",function(){this.methods({beforeShowNewItems:function(){this.keepPromotedTweetsAtTop=!0,this.constructor.uber.beforeShowNewItems.apply(this,arguments),this.promotedTweetWasExpanded=this.promotedTweetIsExpanded(),this.collapsePromotedTweet(),this.movePromotedTweetToTop()},onShowNewItems:function(a){this.constructor.uber.onShowNewItems.apply(this,arguments),this.trigger("onShowNewItems"),this.promotedTweetWasExpanded&&this.expandPromotedTweet(),this.logPromotedImpressions(this.items.slice(0,this.newItemsCount))},onShowOldItems:function(a){this.constructor.uber.onShowOldItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(this.items.length-this.oldItemsCount))},afterFirstSwitchingTo:function(){this.constructor.uber.afterFirstSwitchingTo.apply(this,arguments),$(document).trigger("profileVisit",twttr.profileUser)},_getPromotedStreamTweet:function(){return this.$find("div.stream-items .promoted-tweet")},_collapseExpandPromotedTweet:function(a){var b=this._getPromotedStreamTweet();b.length&&twttr.app.currentPageName()==="profile"&&twttr.app.currentPage().send("showHide",[b,{autoExpanded:!0,forceClose:!a,noAnimation:!0,containerClass:".expanding-stream-item"}])},collapsePromotedTweet:function(){this._collapseExpandPromotedTweet(!1)},expandPromotedTweet:function(){this._collapseExpandPromotedTweet(!0)},domNodeSelector:function(){return this.streamManagerDomNodeSelector?this.streamManagerDomNodeSelector+" .profile-stream":null},_getStreamErrorComponent:function(a){return this._getUserStreamErrorComponent(a)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You haven't tweeted yet."):_("@{{screen_name}} hasn't tweeted yet.",{screen_name:this.screenName})},_updateSinceId:function(a){var b=a.length==1&&a[0].isPromoted(),c=a.length>1&&a[0].isPromoted()&&twttr.natcompare(a[0].id,a[1].id)>0;b||c?this._sinceId=a[0].id:this.constructor.uber._updateSinceId.apply(this,arguments)},wokeUp:function(){signal(">streamWokeUp")}}),twttr.isT1&&this.methods({_setTitle:function(a){a(_("Tweets"))},_setViewToggler:function(a){twttr.streams.Profile.shouldDisplay()&&a(new twttr.views.ProfileStreamViewToggler(!0,this.params))}})});a(c)})}),provide("streams/Mentions",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.Mentions").statics({isLoadingRelationships:!1}).setTitle(function(a){twttr.isT1?a(_("Mentions")):a(_("Tweets mentioning {{username}}",{username:"@"+twttr.currentUser.screenName}))}).update(function(a,b,c){var d=this;twttr.decider.isAvailable("activity_dark_read")&&!twttr.decider.isAvailable("activity_read")&&$.ajax({url:"/i/gooble.json",headers:{"X-PHX":"true"},xhr:function(){return new twttr.anywhere.remote.server.contentWindow.XMLHttpRequest},success:function(){}});if(twttr.secrets&&twttr.secrets.hideMentions){var e=a.success;a.success=function(b){e.apply(a,arguments);if(d.constructor.isLoadingRelationships)return;d.constructor.isLoadingRelationships=!0,setTimeout(function(){var a={user_a:twttr.currentUser.id,user_ids:b.map(function(a){return a.user.id}).join(",")};$.ajax({url:"/account/batch_followed_by",data:a,dataType:"jsonp",type:"get",success:function(a){var b=[];for(var c in a.relationships)a.relationships[c]||b.push(".stream-tweet[data-user-id="+c+"]");b.length>0&&$(b.join(",")).hide(),d.constructor.isLoadingRelationships=!1}})},10)}}twttr.currentUser.mentions(a)}).methods({_getEmptyStreamHtml:function(){return _("Tweets that mention you, or are in reply to you, appear here.")}}).deciderKey("tweet_stream_mentions").pollingDeciderKey("tweet_stream_mentions_polling"),a()})}),provide("streams/Favorites",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.Favorites",function(){twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this._registerEvents()}).setTitle(function(a){twttr.isT1?a(_("Favorites")):!this.screenName||this.stream_user_is_current_user()?a(_("Your Favorites")):a(_("{{username}}'s Favorites",{username:this.screenName}))}).update(function(a,b,c){this.screenName?twttr.API.User.find(this.screenName).favorites(a):twttr.currentUser.favorites(a)}).methods({_getEmptyStreamHtml:function(){return!this.screenName||this.stream_user_is_current_user()?_("Your favorite tweets get saved here. To favorite a tweet, hover over it and click: <span class='favorite-icon'></span> <strong>Favorite</strong>"):_("<b>@{{screen_name}}</b> hasn't favorited any Tweets yet.",{screen_name:this.screenName})},_registerEvents:function(){if(twttr.loggedIn){var a=function(a,b){return twttr.helpers.isProfileUser()?b:null};this._registerAddToStreamEvent(twttr.API.Status,"favorite",a),this._registerRemoveFromStreamEvent(twttr.API.Status,"unfavorite",a)}}}).deciderKey("tweet_stream_favorites").pollingDeciderKey("tweet_stream_favorites_polling"),a()})}),provide("streams/User",function(a){using().as(function(b){var c=twttr.tweetStream("twttr.streams.User",function(a){var b=this;twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this.one("onShowNewItems",function(){b.expandPromotedTweet()}),twttr.helpers.isCurrentUser(a.screenName)&&twttr.API.Status.bind("unretweet",function(a,c){b.$node.find("[data-item-id="+c.id+"][data-item-type=tweet]").remove()})}).mixin(twttr.mixins.profileStreamMixin).statics({_supportsPromotedContent:twttr.isT1}).update(function(a,b,d){a.cacheOptions={shouldCacheAssociated:!1},a.pc=!!c._supportsPromotedContent,a.include_rts=!this.params.noRetweets,this.params.canViewUser?twttr.API.User.find(this.params.screenName).timeline(a):d(this,twttr.streams.PROTECTED)}).deciderKey("tweet_stream_user").pollingDeciderKey("tweet_stream_user_polling");a(c)})}),provide("streams/Profile",function(a){using().as(function(b){var c=twttr.tweetStream("twttr.streams.Profile",function(a){var b=this;twttr.streams.TweetStream.apply(this,arguments),this.one("onShowNewItems",function(){b.expandPromotedTweet()})}).mixin(twttr.mixins.profileStreamMixin).statics({_supportsPromotedContent:!0,shouldDisplay:function(){return twttr.profileUser.verified&&twttr.loggedIn&&twttr.abdecider.choose("replies_stripped_on_verified_profiles_222")=="stripped_replies_on_verified"}}).update(function(a,b,d){a.cacheOptions={shouldCacheAssociated:!1},a.pc=!!c._supportsPromotedContent,a.include_rts=!this.params.noRetweets,this.params.canViewUser?twttr.API.User.find(this.params.screenName).profileTimeline(a):d(this,twttr.streams.PROTECTED)}).methods({_setViewToggler:function(a){a(new twttr.views.ProfileStreamViewToggler(!1,this.params))}}).statics({_supportsPromotedContent:!0}).deciderKey("tweet_stream_profile").pollingDeciderKey("tweet_stream_profile_polling");a(c)})}),provide("streams/FollowingTweets",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.FollowingTweets",function(){twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this.registerUserActionEvents()}).mixin(twttr.mixins.userActionable).update(function(a,b,c){a.cacheOptions={shouldCacheAssociated:!1},this.params.canViewUser?twttr.API.User.find(this.params.screenName).followingTweets(a):c(this,twttr.streams.PROTECTED)}).methods({itemViewClass:"FollowingTweet",onUserActionFollowSync:function(a){this._findTweetsAndUpdateFollowState(a,!0)},onUserActionUnfollowSync:function(a){this._findTweetsAndUpdateFollowState(a,!1)},onShowNewItems:function(a){this._addFollowButtonsToNewTweets(a),this.constructor.uber.onShowNewItems.apply(this,arguments),this.trigger("showedNewItems")},onShowOldItems:function(a){this._addFollowButtonsToNewTweets(a),this.constructor.uber.onShowOldItems.apply(this,arguments),this.trigger("showedOldItems")},selectedItemsByUserId:function(a){var b=".stream-item:has(.stream-item-content[data-user-id="+a+"])";return this.$streamItems().find(b)},_reRenderTweetsByUserId:function(a){var b=this;this.selectedItemsByUserId(a).each(function(a,c){var d=$(c),e=d.find(".stream-tweet").attr("data-tweet-id");twttr.API.Status.find(e,function(a){d.replaceWith(b._renderItemHtml(a))})})},_getStreamErrorComponent:function(a){return this._getUserStreamErrorComponent(a)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("The people you follow haven't tweeted anything recently."):_("The people that @{{screen_name}} follows haven't tweeted recently.",{screen_name:this.screenName})},_setTitle:function(){$("#following-page-context").html(_("Here&rsquo;s what they&rsquo;re tweeting right now."))},_findUserIds:function(a){var b=[];return a.find(".stream-item-content").each(function(a,c){b.push(parseInt($(c).attr("data-user-id"),10))}),b.slice(0,twttr.constants.users.maxLookupSize)},_addFollowButtonsToNewTweets:function(a){if(!twttr.loggedIn||a.length===0)return!1;var b=this,c=this._findUserIds(a);twttr.API.User.findAll(c,{reload:!0,success:function(a){a.each(function(a){(!a.following||twttr.loggedIn&&a.id!==twttr.currentUser.id)&&b._findTweetsAndUpdateFollowState(a.id,a.following?null:!1)})}})},_findTweetsAndUpdateFollowState:function(a,b){var c;twttr.is.nil(b)?c="":b?c=Mustache.to_html('<span class="follow-text-quiet">&middot; {{action}}</span>',{action:_("Following")}):c=Mustache.to_html('<span class="follow-text-quiet">&middot;</span> <a href="#" class="js-action-follow tweet-follow-action follow-action" data-user-id="{{id}}">{{action}}</a>',{id:a,action:_("Follow")});var d=this.selectedItemsByUserId(a);d.each(function(a,b){$(b).find(".tweet-user-follow").html(c)})}}).deciderKey("tweet_stream_following").pollingDeciderKey("tweet_stream_following_polling"),a()})}),provide("streams/List",function(a){using("components/AddPeople","components/NoListMembers","streams/TweetStream",function(b,c,d){twttr.tweetStream("twttr.streams.List",function(){d.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id},message:this.params.listSlug})}).setTitle(function(a){twttr.isT1?a((new twttr.views.ListStreamTitle({full_name:_("Tweets")})).html()):(twttr.merge(this.params,{full_name:_("@{{screenName}}/{{listSlug}}",this.params),slug:this.params.listSlug,user:{screen_name:this.params.screenName}}),a((new twttr.views.ListStreamTitle(this.params)).html()))}).update(function(a,b,c){this._getList(function(b){b.statuses(a)})}).methods({_getEmptyStreamComponent:function(){return twttr.helpers.isCurrentUser(this.screenName)?new b:new c},_getList:function(a){var b=this;this._fetchingCallbacks=this._fetchingCallbacks||[],this._fetchingCallbacks.push(a);if(this._fetching)return;this._fetching=!0,twttr.API.User.find(this.screenName,{success:function(a){a.lists.find(b.params.listSlug,function(a){if(!a){b.trigger("notFound");return}b.memberCount=a.memberCount;var c;while(c=b._fetchingCallbacks.pop())c(a);b._list=a,b._fetching=!1})},error:function(){b.trigger("notFound")}})}}).deciderKey("tweet_stream_list").pollingDeciderKey("tweet_stream_list_polling"),a(twttr.streams.List)})}),provide("streams/Search",function(a){using().as(function(b,c){var d=twttr.tweetStream("twttr.streams.Search",function(a){return twttr.is.def(a.pretty_query)||(a.pretty_query=a.query),twttr.streams.TweetStream.apply(this,arguments),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:a.query}),this}).setTitle(function(a){var b=this;if(this.params.hideTitle)return;var c=twttr.merge({top_mode:this.params.mode=="relevance",all_mode:this.params.mode=="tweets",timeline_mode:this.params.mode=="timeline",with_links_mode:this.params.mode=="links"},this.params);a((new twttr.views.SearchStreamTitle(c)).html());var d=$(".js-stream-title .stream-tab-dropdown"),e=new twttr.control.Dropdown(d,{items:[{label:_("Top"),handlers:this._getSearchHandlers("relevance")},{label:_("All"),handlers:this._getSearchHandlers("tweets")},{label:_("With links"),handlers:this._getSearchHandlers("links")}],direction:"left"});e.render(d,"append")}).update(function(a,b,c){var d=this;!twttr.is.def(a.since_id)&&this.items.length>0&&!twttr.is.def(a.max_id)&&(a.since_id="1");if(!a.since_id){var e=a.success;a.success=function(a,b){d.logSearchImpressions(a),d._next_page=b.response.next_page;var c=e.apply({},arguments);return!d._next_page&&!b.response.served_by_blender&&d.reachedTheEnd(),c}}a.max_id&&(a.page=d._next_page),this.params.debug&&(a.debug=this.params.debug);var f=twttr.util.params().promoted_location;f&&(a.promoted_location=f),this.params.experimentId&&(a.experimentId=this.params.experimentId),this.params.mode==="links"?a.filter="links":this.params.mode==="relevance"?a.mode="relevance":this.params.mode==="timeline"&&(a.mode="timeline"),this.search(this.params.query,a)}).methods({_shouldCache:!1,search:function(a,b){var c=this;if(this.inProgress)return;var d=function(a,b){return a=a||$.noop,function(){return c.inProgress=b,a.apply(this,arguments)}};b.before=d(b.before,!0),b.success=d(b.success,!1),b.error=d(b.error,!1),b.cancel=d(b.cancel,!1),b.query_source=twttr.search.getLastQuerySource(),twttr.API.Status.search(a,b)},_getSearchHandlers:function(a){var b=this;return{click:function(){b.params.mode=a,twttr.app.currentPage().send("getStreamManager",function(a){a.switchTo(twttr.streams.Search,b.params)})}}},scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{query:this.params.query,type:this.params.mode})},logSearchImpressions:function(a){var b=[],c=[],d=[],e=[];a.each(function(a){a.isPromoted()?(d.push(a.id),e.push(a.impressionId)):a.resultCategory==="popular"?c.push(a.id):b.push(a.id)}),scribble("integrated_search_impression",{mode:this.params.mode,query:this.params.query,pretty_query:this.params.pretty_query,top_tweets:c,promoted_tweets:d,impression_ids:e,tweet_count:a.length()})},_getEmptyStreamHtml:function(){if(this.params.mode==="links")return _("No Tweet results with links for <strong>{{pretty_query}}</strong>.",this.params);if(this.params.mode==="relevance"){var a={path:twttr.router.searchRealtimePath({query:this.params.query}),pretty_query:this.params.pretty_query};return twttr.router.routeTo(twttr.router.searchRealtimePath({query:this.params.query}))}return _("No Tweet results for <strong>{{pretty_query}}</strong>.",this.params)},_getStreamEndHtml:function(){if(this.params.mode==="links")return _("Older Tweet results with links for <strong>{{pretty_query}}</strong> are unavailable.",this.params);if(this.params.mode==="relevance"){var a={path:twttr.router.searchRealtimePath({query:this.params.query}),pretty_query:this.params.pretty_query};return _('You&rsquo;ve reached the end of the Top Tweets for <strong>{{pretty_query}}</strong>. <div><a href="{{path}}">View all Tweets</a>.</div>',a)}return _("Older Tweet results for <strong>{{pretty_query}}</strong> are unavailable.",this.params)},beforeShowNewItems:function(){this.constructor.uber.beforeShowNewItems.apply(this,arguments),this.movePromotedTweetToTop()},onShowNewItems:function(a){this.constructor.uber.onShowNewItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(0,this.newItemsCount))},onShowOldItems:function(a){this.constructor.uber.onShowOldItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(this.items.length-this.oldItemsCount))}}).deciderKey("tweet_stream_search").pollingDeciderKey("tweet_stream_search_polling");twttr.isT1&&d.methods({_setHeader:function(a,b){a((new twttr.views.TweetSearchStreamHeader(b)).$html())},_setTitle:function(a){a(_("Tweets"))},_setViewToggler:function(a){a(new twttr.views.SearchStreamViewToggler(this.params.query,this.params.mode))}}),a(d)})}),provide("streams/UserStream",function(a){using().as(function(b){twttr.stream("twttr.streams.UserStream",function(a,b,c){var d=this;twttr.streams.Stream.apply(this,arguments),this.scribbler=this.params.scribbler||twttr.Scribbler.clientEvent,this.isCursorPagination()?this.cursor=-1:this.page=0,this.registerUserActionEvents()}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.userActionable).methods({itemViewClass:"StreamUser",streamItemType:"user",IDS_PER_REQUEST:5e3,update:function(a){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("people_streams")||this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}var c={success:function(c,d){var e=b.isCursorPagination();b.push(c.array);var f=d&&d.fetchedFullPage||c.length()===b.PAGE_SIZE;e?b.cursor=d.response.next_cursor:f?b.page=b.page+1:b.page=-1,(e&&!b.cursor||!e&&b.page===-1)&&b.reachedTheEnd(),c.each(function(a){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)}),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR),b._scribeResults("error",[],{status_code:c.status})},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT),b._scribeResults("error",[],{status_code:502})}};c=twttr.merge(c,this.isCursorPagination()?{cursor:this.cursor}:{page:this.page+1}),this.update(c)},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},PAGE_SIZE:20,isCursorPagination:function(){return!0},_getStreamErrorComponent:function(a){return a===twttr.streams.PROTECTED?new twttr.components.ProtectedUser({screen_name:this.params.screenName}):twttr.streams.Stream.prototype._getStreamErrorComponent.apply(this,arguments)},_scribeResults:function(a,b,c){twttr.streams.Stream.prototype._scribeResults.apply(this,arguments);var b=b||[];c=c||{};if(a=="error"||a=="initial"&&!b.length)this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},twttr.merge(c,{item_count:0,event_value:0,cursor_or_page:this._cursorOrPage(),referring_event:a}));else if(b.length){var d=this,e=[],f;twttr.each(b,function(a,b){e.push(a.id);if(d.constructor._namespace.indexOf("UserRecommendations")!=-1||d.constructor._namespace.indexOf("PeopleSearch")!=-1){var c;a.promotedContent&&a.promotedContent.impression_id&&(c={item_type:twttr.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id}),c&&(f=f||{},c.item_position=b,f[a.id+""]=c)}}),f&&(c.item_details=f),this.scribbler.scribe({component:"stream",action:"results"},twttr.merge(c,{item_ids:e,item_count:e.length,event_value:e.length,cursor_or_page:this._cursorOrPage(),referring_event:a}))}},sortUsersByIds:function(a,b){var c=[],d={};return twttr.each(a,function(a){d[a.id]=a}),twttr.each(b,function(a){d[a]&&c.push(d[a])}),c},fetchUsersById:function(a,b){var c=this,d,e,f;twttr.API.User.find(this.screenName,function(d){if(!twttr.helpers.canViewUser(d)){c._showError(twttr.streams.PROTECTED),c.doneLoadingMore();return}e=c.page*c.PAGE_SIZE,f=c.fetchedIds&&e<c.IDS_PER_REQUEST,f?c.hydrateUsers(a):(c.page=0,d[b]({cursor:c.idsCursor,success:function(b,d){d.response.next_cursor&&(c.idsCursor=d.response.next_cursor),c.fetchedIds=b,c.hydrateUsers(a)}}))})},hydrateUsers:function(a){var b=this,c=this.fetchedIds,d=a.success;a.success=function(a){var c=b.sortUsersByIds(a.array,e);a.array=c,d.call(this,a,{fetchedFullPage:e.length==b.PAGE_SIZE})};var e=c.slice(this.page*this.PAGE_SIZE,(this.page+1)*this.PAGE_SIZE);twttr.decider.isAvailable("people_stream_fresh")?e.length?twttr.API.User.findAll(e,{success:a.success,reload:!0}):a.success(new twttr.anywhere.api.util.BaseCollection([])):twttr.API.User.findAll(e,a.success)}}),a(twttr.streams.UserStream)})}),provide("streams/Friends",function(a){using("_","util").as(function(b,_){var c=twttr.stream("twttr.streams.Friends",function(a,b){twttr.streams.UserStream.apply(this,arguments);var c=this;this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"}),this._registerEvents()}).subclassOf(twttr.streams.UserStream).methods({PAGE_SIZE:100,update:function(a){this.fetchUsersById(a,"friendIds")},isCursorPagination:function(){return!1},_countString:function(a){return a===1?_("You follow 1 person"):_("You follow {{friendsCount}} people",{friendsCount:b.util.formatNumber(a,twttr.pageLocale)})},_setTitle:function(a){$("#following-page-context").html(_("Here&rsquo;s more about them."));if(this.params.subtab){var b=new twttr.views.FollowingSubtabs(this.params);a(b.html())}},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following anyone yet."):_("@{{screen_name}} isn't following anyone yet.",{screen_name:this.screenName})},_registerEvents:function(){if(twttr.loggedIn){var a=function(a,b){return twttr.helpers.isProfileUser()?b:null};this._registerAddToStreamEvent(twttr.API.User,"follow",a),this._registerRemoveFromStreamEvent(twttr.API.User,"unfollow",a)}}}).statics({_deciderKey:"people_stream_friends"});twttr.isT1&&c.methods({_setTitle:function(a){a(_("Following"))}}),a(c)})}),provide("streams/FollowerRequests",function(a){using("_","mixins/protectedUserActionable").as(function(b,_){twttr.stream("twttr.streams.FollowerRequests",function(a,b){var c=this;this.constructor.uber.constructor.apply(this,arguments),this.cursor=0,this.oldItemsCount=-1,this.pending_users=[],this.getFollowerRequestCount=function(a){var b=this;b.oldItemsCount==-1?twttr.currentUser.friends.pending(function(c,d){b.oldItemsCount=c.length,b.pending_users=c,a(b.oldItemsCount)}):(b.oldItemsCount=b.pending_users.length,a(b.oldItemsCount))},this.registerProtectedUserActions()}).subclassOf(twttr.streams.UserStream).mixin(b.mixins.protectedUserActionable).methods({itemViewClass:"StreamFollowerRequest",streamItemType:"user",update:function(a){},_fetchItems:function(a){var b=this;b.getFollowerRequestCount(function(c){var d={success:function(d,e){b.push(d.array),b.cursor=b.cursor+b.constructor.PAGE_SIZE,b.cursor>=c&&b.reachedTheEnd(),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}};sliced_list=b.pending_users.slice(b.cursor,b.cursor+b.constructor.PAGE_SIZE),twttr.API.User.findAll(sliced_list,d)})},_setTitle:function(a){a(_("Your pending follower requests"))}}).statics({PAGE_SIZE:20,_deciderKey:"people_stream_follower_requests"}),a(twttr.streams.FollowerRequests)})}),provide("streams/Followers",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Followers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"}),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({PAGE_SIZE:100,update:function(a){this.fetchUsersById(a,"followerIds")},isCursorPagination:function(){return!1},_setTitle:function(a){if(this.params.subtab){var b=new twttr.views.FollowersSubtabs(this.params);a(b.html())}},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You don't have any followers yet."):_("@{{screen_name}} doesn't have any followers yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return!twttr.helpers.isProfileUser()&&c.screenName===a.screenName?twttr.currentUser:null};this._registerAddToStreamEvent(twttr.API.User,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.User,"unfollow",b)}}}).statics({_deciderKey:"people_stream_followers"});twttr.isT1&&c.methods({_setTitle:function(a){a(_("Followers"))},_setViewToggler:function(a,b){twttr.loggedIn&&!twttr.helpers.isProfileUser()&&a(new twttr.views.FollowersStreamViewToggler(b.screenName,!1))}}),a(c)})}),provide("streams/SocialContextStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.SocialContextStream",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.params=a;var c=a.socialContextType=="followsInCommonWith"?"following_social_context":"followers_social_context";this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile",event_info:c})}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){if(!twttr.helpers.canViewUser(c)){b._showError(twttr.streams.PROTECTED),b.doneLoadingMore();return}twttr.currentUser[b.params.socialContextType](twttr.profileUser.id,a)})},_getEmptyStreamHtml:function(){var a={user:twttr.profileUser.screenName};return this.params.socialContextType=="followsInCommonWith"?_("You and @{{user}} don't follow anyone in common.",a):_("You don't follow anyone who follows @{{user}}.",a)}}).statics({_deciderKey:"social_context"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Followers"))},_setViewToggler:function(a,b){twttr.loggedIn&&!twttr.helpers.isProfileUser()&&a(new twttr.views.FollowersStreamViewToggler(b.screenName,!0))}}):c.methods({_setTitle:function(a){if(this.params.socialContextType=="followsInCommonWith")var b=new twttr.views.FollowingSubtabs(this.params);else var b=new twttr.views.FollowersSubtabs(this.params);a(b.html())}}),a(twttr.streams.SocialContextStream)})}),provide("streams/SuggestionCategoriesStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoriesStreamT1":"","mixins/discoveryHelper").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoriesStream",function(a,b){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments),this.$node.addClass("suggestion-categories");var c=this;this.$node.delegate("div[data-item-type=suggestion_category]","click",function(a){var b=$(this).attr("data-item-id"),d={};return d[b]={item_position:$("div.js-stream-manager-container div.js-stream-item").index($(a.target).closest(".js-stream-item"))},b&&(trackClient({component:"suggestion_category",action:"click"},{step:"interests",query:b,item_details:d}),c.routePageTo(c.params.pathRoot,"InterestsCategory",{category:b})),!1})}).subclassOf(twttr.streams.Stream).statics({cacheCategories:function(a){this.CATEGORIES=a,this.CATEGORY_MAP=this.buildCategoryMap(a)},buildCategoryMap:function(a){return a.reduce({},function(a,b){return a[b.slug]=b,a})},filterTopTweetsCategories:function(a){var b=this.buildCategoryMap(a);return a.filter(function(a){if(a.slug.match(/^(.+)[_-]top-tweets$/i)){var c=b[RegExp.$1];return c&&(c.topTweetsCategory=a),!1}return!0})}}).methods({itemViewClass:"StreamSuggestionCategory",streamItemType:"suggestion_category",sampleSize:"",streamItemId:function(a){return a.slug},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},addTipsies:function(){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("suggestion_categories_streams")){a(this,twttr.streams.DECIDER);return}var c={sample_size:this.sampleSize,samples:!0,success:function(c){c=b.constructor.filterTopTweetsCategories(c),b.constructor.cacheCategories(c);var d=c.map(function(a){var c,d;return a.topTweetsCategory&&a.topTweetsCategory.sample&&(d=a.topTweetsCategory.sample.shift())&&(c=d.id),a.clone({category_link:b.pagePathFor(b.params.pathRoot,"InterestsCategory",{category:a.slug}),category_top_tweets_user_id:c,category_top_tweets_is_current_user:!!twttr.currentUser&&twttr.currentUser.id==c,following_category_top_tweets:a.topTweetsCategory?a.topTweetsCategory.followingTopTweets:null})});b.push(d.array),a(b,twttr.streams.SUCCESS),b.addTipsies(),b.reachedTheEnd();var e=c.map(function(a,b){return a.name});b.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length()})},error:function(){a(b,twttr.streams.ERROR)}};b.defaultOpts&&(c=twttr.merge(b.defaultOpts,c)),b.params.lang&&(c.lang=b.params.lang),b.params.country&&(c.country=b.params.country),b.params.city&&(c.city=b.params.city),c.top_tweets=!0,twttr.API.SuggestionCategory.getAll(c)},_setTitle:function(a){this.params.title!==undefined?a(this.params.title):a(_("Select the topics you are interested in. Find a few people you want to hear from, then follow them."))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(this.constructor.CATEGORIES,this.params.pathRoot)},_getStreamEndComponent:function(){return this._getHeaderComponent()}}).mixin(twttr.mixins.discoveryHelper);c&&d.mixin(c),a(d)})}),provide("streams/PeopleSearch",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.PeopleSearch",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.ignoreScribeItemPosition=!1}).subclassOf(twttr.streams.UserStream).methods({scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{name:"Search",query:this.params.query,type:"people"})},update:function(a){a.display_location="search-view-all-stream",a.pc=!0,twttr.API.User.search(this.params.query,a)},isCursorPagination:function(){return!1},_getEmptyStreamHtml:function(){return _("No people results for <strong>{{query}}</strong>.",{query:this.params.query})},getStreamEndHtml:function(){return _("No more people results for <strong>{{query}}</strong>.",{query:this.params.query})},_setHeader:function(a,b){this.header?a(this.header.$node):a((new twttr.views.StreamHeader(b)).$html())},_setTitle:function(a){twttr.isT1?a(_("People")):a(_("Results for: <strong>{{query}}</strong>",{query:this.params.query}))}}).statics({_deciderKey:"people_stream_people_search"}),a(twttr.streams.PeopleSearch)})}),provide("streams/t1/HeadlessPeopleSearch",function(a){using("_").as(function(a,_){twttr.klass("twttr.streams.HeadlessPeopleSearch",function(a,b){twttr.streams.PeopleSearch.apply(this,arguments);var c=new twttr.streams[a.headerStreamClass](a,b);this._setHeader=c._setHeader,this._setTitle=c._setTitle,this._setHeaderButton=c._setHeaderButton,this._updateHeaderFromStream=c._updateHeaderFromStream}).subclassOf(twttr.streams.PeopleSearch).methods({_setViewToggler:function(a,b){a(new twttr.views.BackLink(b.backLinkOptions))}})}),a(twttr.streams.HeadlessPeopleSearch)}),provide("streams/DashboardPeopleSearch",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardPeopleSearch",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",twttr.streams.PeopleSearch.apply(this,arguments)}).subclassOf(twttr.streams.PeopleSearch).methods({scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{name:"Search",query:this.params.query,type:"people"})},update:function(a){a.display_location="search-view-all-stream",a.pc=!1,twttr.API.User.search(this.params.query,a)},_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a()})}),provide("streams/DashboardTopPeopleSearch",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardTopPeopleSearch",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b={is_t1:twttr.isT1,statuses:!1,stories:!0,related_queries:!1,spelling_corrections:!1,query_source:twttr.search.searchQuerySource.TYPED_QUERY};twttr.merge(b,a);var c=this,d=b.success||$.noop;b.success=function(a,b){var e=new twttr.anywhere.api.util.BaseCollection;a.stories.each(function(a){a.type=="user"&&(e=e.concat(a.content.users))}),d(e,b),c.trigger("results",[e])},twttr.API.Search.search(this.params.query,b)},_setHeader:function(a,b){a("")},_getStreamEndComponent:function(){return new twttr.components.TopPeopleStreamEnd(this.params.query)},itemViewClass:"DashboardStreamUser"}),twttr.klass("twttr.components.TopPeopleStreamEnd").subclassOf(twttr.components.Base).initializer(function(a){(new twttr.views.TopPeopleStreamEnd({query:a})).render(this.$node,"append")}),a()})}),provide("streams/ListFollowers",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ListFollowers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName).lists(function(c){c.find(function(a){return a.slug===b.params.listSlug}).followers(a)})},_setTitle:function(a){twttr.isT1?a(_("List subscribers")):a(_("People following this list"))},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return c.slug===a.listSlug?twttr.currentUser:null};this._registerAddToStreamEvent(twttr.API.List,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"unfollow",b)}}}).statics({_deciderKey:"people_stream_list_followers"}),a(twttr.streams.ListFollowers)})}),provide("streams/ListMembers",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ListMembers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName).lists(function(c){c.find(function(a){return a.slug===b.params.listSlug}).members(a)})},_setTitle:function(a){twttr.isT1?a(_("List members")):a(_("People this list follows"))},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c,d){return c.slug===a.listSlug?d:null};this._registerAddToStreamEvent(twttr.widget.ListMembershipDialog,"addListMember",b),this._registerRemoveFromStreamEvent(twttr.widget.ListMembershipDialog,"removeListMember",b)}}}).statics({_deciderKey:"people_stream_list_members"}),a(twttr.streams.ListMembers)})}),provide("streams/Discover",function(a){using("_","util","mixins/t1/cardActionable","helpers","constants").as(function(b,_){twttr.klass("twttr.streams.Discover",function(a,b){var c=this;twttr.streams.Stream.apply(c,arguments),this.scribbler=twttr.Scribbler.clientEvent,c.registerCardActions(),this.registerTweetActionEvents(),this.initComponentEvents(),c.$find(".js-user-tipsy").tipsy({gravity:"s"}),twttr.API.CurrentUser.bind("changedLocation.discovery",function(){jQuery.contains(document.body,c.$node[0])?c._fetchItems($.noop):c._lastUpdate=null})}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.cardActionable,twttr.mixins.componentEvents,twttr.mixins.tweetActionable).statics({discoveryRefreshRate:3e5}).methods({streamItemType:"story",_expandable:!0,itemViewClass:function(a){return twttr.views["Card"+b.util.capitalize(a.type)]},streamItemId:function(a){return a.getId()},addTipsies:function(){this.$find(".js-user-tipsy").tipsy({gravity:"s"})},afterFirstSwitchingTo:function(a){this._fetchItems(a)},afterSwitchingToAgain:function(a){!this._lastUpdate||this._lastUpdate+twttr.streams.Discover.discoveryRefreshRate<=this.now()?this._fetchItems(a):a&&a()},now:function(){return(new Date).getTime()},reset:function(){this.$streamItems().empty(),this.items=[],this.itemIds=null,this.$find(".js-discovery-error").remove()},_setTitle:function(a){a(_("Stories"))},_fetchItems:function(a){var b=this;!this.items.length&&this.showLoadingSpinner();var c=function(){b.reset(),b._lastUpdate=null,b.hideLoadingSpinner(),(new twttr.views.DiscoveryStreamError).$html().appendTo(b.dom()),a(b,twttr.streams.ERROR)},d=function(d){if(d.stories.isEmpty()){c();return}b.reset(),b.hideLoadingSpinner(),b._lastUpdate=b.now(),$.each(d.stories.array,function(a,b){b.position=a+1}),b.push(d.stories.array),b.newItemsCount=d.stories.length(),b.render(),b.ellipsify(),b.addTipsies(),a&&a(b,twttr.streams.SUCCESS),b.reachedTheEnd()};twttr.API.Discovery.discovery({success:d,error:c,include_entities:!0,tweet_count:0})},ellipsify:function(){b.helpers.ellipsify(this.$find("h3.js-story-title,p.js-metadata")),b.helpers.ellipsify(this.$find("p.js-news-snippet, h4.js-news-headline"),!1,!0,null,{ellipsis:"&ellip;"})},_scribeResults:function(a,c,d){this._scribeEmptyResults(a,c,d);if(c.length){var e=[],f={};twttr.each(c,function(a,c){var d,g=a.content&&a.content.articles&&a.content.articles.array[0];g?d=g.query:a.content&&(d=a.content.query),d&&(e.push(d),f[d]={item_type:b.constants.clientEvent.itemType.story,item_position:c,item_description:a.type})}),this.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length,event_value:e.length,item_details:f,referring_event:a})}}}).click({".story-social-new-tweet":function(a,b){a.stopPropagation(),a.preventDefault();var c=b.data("url");(new twttr.widget.TweetDialog({draggable:!0,template:{title:_("Tweet this link")},defaultContent:c,origin:"discovery-story-tweet-button"})).open().focus()}}),a(twttr.streams.Discover)})}),provide("streams/SavedSearches",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.SavedSearches",function(a,b){twttr.streams.Stream.apply(this,arguments),this.oldItemsCount=-1,this.scribbler=twttr.Scribbler.clientEvent}).subclassOf(twttr.streams.Stream).methods({itemViewClass:"StreamSavedSearch",streamItemType:"saved_search",streamItemId:function(a){return a.id}}).methods({afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_setTitle:function(a){a("Saved searches")},_fetchItems:function(a){var b=this;twttr.currentUser.savedSearches(function(c){b.items=c.array,b.oldItemsCount==-1&&(b.oldItemsCount=b.items.length),a(b,twttr.streams.SUCCESS),b.reachedTheEnd()})},_scribeResults:function(a,b,c){this._scribeEmptyResults(a,b,c);if(b.length){var d=twttr.map(b,function(a){return a.query});this.scribbler.scribe({component:"stream",action:"results"},{item_names:d,item_count:d.length,event_value:d.length,referring_event:a})}}}),a(twttr.streams.SavedSearches)})}),provide("mixins/SinceMaxPagination",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.SinceMaxPagination",function(){this.statics({deciderKey:function(a){return this._deciderKey=a,this}}),this.methods({_fetchItems:function(a){this.fetcher(!0,a)},fetcher:function(a,b,c){var d=this;twttr.is.fn(a)&&(c=b,b=a,a=!1);if(this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){b(this,twttr.streams.DECIDER);return}var e=a?this._optionsForOld(b):this._optionsForNew(b);c=c||{},e=twttr.merge(c,e),this.excludeEntities||(e.include_entities=1),this.update(e,this.params,b)},fetchUntilScreenIsFull:function(){var a=this;!this.noMoreOldItems&&this._isInDOM()&&this._shorterThanWindow()&&this.getMoreOldItems(function(b,c){c!==twttr.streams.SUCCESS?a._showError(c):a.fetchUntilScreenIsFull()})},_isInDOM:function(){return jQuery.contains(document.body,this.$node[0])},_shorterThanWindow:function(){return this.$node.height()<$(window).height()},_optionsForNew:function(a){var b=this,c={success:function(c){c instanceof twttr.API.util.BaseCollection&&(c=c.array),c.length&&(b._updateIds(c),b.unshift(c)),a&&a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)}};return this.items.length&&(c.since_id=this._sinceId),c},_optionsForOld:function(a){var b=this,c={success:function(d){c.max_id&&(d=d.slice(1)),d instanceof twttr.API.util.BaseCollection&&(d=d.array),d.length?(b._updateIds(d),b.push(d)):b.reachedTheEnd(),a&&a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}};return this.items.length?(c.max_id=this._maxId,c.count=this.PAGE_SIZE+1):c.count=this.PAGE_SIZE,c},_updateIds:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));var b=a[0],c=a[a.length-1],d,e;this._idForItem?(d=this._idForItem(b,"first"),e=this._idForItem(c,"last")):(d=b.id,e=c.id);if(!this._sinceId||twttr.natcompare(d,this._sinceId)>0)this._sinceId=d;if(!this._maxId||twttr.natcompare(e,this._maxId)<0)this._maxId=e}})}),a(twttr.mixins.SinceMaxPagination)})}),provide("mixins/PollingStream",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.PollingStream",function(){var a={ACTIVE:3e4,INACTIVE:9e4},b=!0,c=a.ACTIVE;$(window).focus(function(){c=a.ACTIVE,b=!0}),$(window).blur(function(){c=a.INACTIVE,b=!1}),this.statics({pollingDeciderKey:function(a){return this._pollingDeciderKey=a,this}}),this.methods({_getInterval:function(){return this.timeouts?b?this.timeouts.ACTIVE:this.timeouts.INACTIVE:c},_pollFetch:function(){var a={headers:{"X-Twitter-Polling":!0}};this.fetcher(twttr.bind(this,function(a){var b=a.newItemsCount;b>0&&(this.showNewItems(b,!0),this.trigger("newItems",[a,b]))}),a)},startPeriodicFetcher:function(){if(this.periodicUpdater||this.constructor._pollingDeciderKey&&!twttr.decider.isAvailable(this.constructor._pollingDeciderKey))return;this.periodicUpdater=setTimeout(twttr.bind(this,this.fetchNewItemsThenPoll),this._getInterval())},stopPeriodicFetcher:function(){this.periodicUpdater&&(clearTimeout(this.periodicUpdater),this.periodicUpdater=null)},fetchNewItemsThenPoll:function(){var a=!0;this._pollShouldFetch&&(a=this._pollShouldFetch()),a&&this._pollFetch(),this.restartFetcher()},restartFetcher:function(){this.stopPeriodicFetcher(),this.startPeriodicFetcher()}})}),a(twttr.mixins.PollingStream)})}),provide("mixins/activityStreamEvents",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.activityStreamEvents",function(){var a;twttr.isT1?a="div.stream-item-activity-me div.activity-supplement img.avatar,     div.stream-item-activity-network div.follow-more-than-two img.avatar,     div.stream-item-activity-network.stream-item-list_member_added img.avatar,     div.stream-item-activity-network div.activity-secondary-supplement img.user-profile-link":a=".stream-item-activity-me .sub-stream-item img.user-content-image,     .stream-item-activity-network .follow-more-than-two img.user-content-image,     .stream-item-activity-network.stream-item-list_member_added img.user-content-image,     .stream-item-activity-network .activity-secondary-supplement .user-profile-link",$(a).tipsy({live:!0,gravity:"s"})}),a(twttr.mixins.activityStreamEvents)})}),provide("mixins/inviteFriends",function(a){using("util","constants").as(function(b){twttr.klass.mixin("twttr.mixins.inviteFriends",function(){this.methods({sendInvitesByEmailSuccess:function(a){var b=a.invited&&a.invited.length;b?(this.scribbler.scribe({section:"dashboard",component:"invite_friends",action:"invited"},{event_value:b,item_count:b}),twttr.showMessage(b>1?_("OK, we will send invites to your {{count}} friends!",{count:b}):_("OK, we will send an invite to {{email}}!",{email:a.invited[0]})),this.$textarea.val("")):twttr.showError(_("Something is wrong, nobody was invited :-(")),this.$textarea.removeAttr("disabled").blur()},sendInvitesByEmailError:function(a){var b=twttr.helpers.extractEmailAddresses(this.$textarea.val()),c=b.length===1?b[0].split(","):b.length,d=twttr.API.util.RemoteRequest.apiErrorCodeFromResponse(a)||a.status;this.scribbler.scribe({component:"invite_friends",action:"error"},{status_code:d,item_count:c});switch(d){case 47:twttr.showError(_("We couldn't send invitations to any of those addresses."));break;case 37:twttr.showError(_("There was an error emailing your friends. Please try again later."));break;default:twttr.showMessage(_("OK, we will send invites to your friends!"))}this.$textarea.removeAttr("disabled").focus()},formSubmitCallback:function(){if(this.$textarea.attr("disabled"))return;var a=twttr.helpers.extractEmailAddresses(this.$textarea.val());if(a.length){this.$textarea.attr("disabled","disabled").val(a.join(", "));var b=this;twttr.API.AddressBook.sendInvitesByEmail(a,{source:"invite_friends",success:twttr.bind(this,this.sendInvitesByEmailSuccess),error:twttr.bind(this,this.sendInvitesByEmailError)})}else twttr.showError(_("Please check the address you entered."))},addFormEvents:function(a){this.scribbler=a||new twttr.Scribbler,this.$textarea=this.$textarea||this.$find("textarea"),this.$textarea.bind("keyup",function(a){var c=$(this);(a.which==b.constants.keyCodes.enter||c.val().indexOf(",")>0)&&c.addClass("expanded")}),twttr.helpers.addFormEvents(this.$find("form"),twttr.bind(this,this.formSubmitCallback))}})}),a(twttr.mixins.inviteFriends)})}),provide("mixins/newStreamItemsBar",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.newStreamItemsBar",function(){this.methods({showNewStreamItemsBar:function(a){var b=this.$find(".js-new-tweets-bar"),c;this.newStreamItemsBarPhrase?c=this.newStreamItemsBarPhrase(a):c=a==1?_("1 new item"):_("{{count}} new items",{count:a}),b.length>0?b.html(c):(b=$((new twttr.views.NewTweetsBar({tweets_count_phrase:c,is_tweet:!1})).html()),b.hide().prependTo(this.dom()).slideDown())}})}),a(twttr.mixins.newStreamItemsBar)})}),provide("mixins/typeaheadScribing",function(a){using().as(function(b,_){var c=twttr.klass.mixin("twttr.mixins.typeaheadScribing",function(){return this.methods({startStatsTimer:function(){this._statsTimerStart||(this._statsTimerStart=+(new Date)),this._lastTimerEvent="start"},pauseStatsTimer:function(){this._statsTimerStart!==0&&this._lastTimerEvent=="start"&&(this._statsCumulativeTime+=+(new Date)-this._statsTimerStart,this._statsTimerStart=0),this._lastTimerEvent="pause"},resetStatsTimer:function(){this._statsCumulativeTime=0,this._statsTimerStart=0,this._lastTimerEvent="pause"},addLocalLatency:function(a,b){this._localLatencies.push(b)},addRemoteLatency:function(a,b){this._remoteLatencies.push(b)},medianAndStdDev:function(a){var b=twttr.reduce(a,0,function(a,b,c){return a+c}),c=a.length,d=b/c,e=twttr.reduce(a,0,function(a,b,c){return a+(c-d)*(c-d)}),f=Math.sqrt(e/c);return{median:d,stdDev:f}},scribe:function(a,b){twttr.is.def(this._scribbler)||(this._scribbler=twttr.Scribbler.global.spawn({context:"typeahead"}),this._scribbler.component={}),this._scribbler.scribe(a,b)},browserInfo:function(){var a="unknown";return $.browser.webkit?a="webkit":$.browser.msie?a="msie":$.browser.mozilla?a="mozilla":$.browser.opera&&(a="opera"),{browser:a,version:$.browser.version}},scribeLocalStorageLatency:function(a,b,c){var d=this.browserInfo();this.scribe("typeahead_localstorage_latency",{type:b,latency:c,browser:d.browser,version:d.version})},scribeSelect:function(a,b,c){var d=this._statsCumulativeTime,e=a.type==="click"?"click":"enter",f=c.length>0,g=c.data("remote")===!0,i="unknown";c.data("query")?i="saved search":c.find("a").data("search-query")?i="query suggestion":c.data("user-id")&&(i="users");var j=this.$node.find(".js-selectable").index(c)+1||0,k=this.medianAndStdDev(this._localLatencies),l=this.medianAndStdDev(this._remoteLatencies),m=twttr&&twttr.users&&twttr.users.typeahead?twttr.users.typeahead.length:0,n;try{n=JSON.stringify(localStorage).length}catch(o){n=0}this.scribe("typeahead_select",{time_to_completion:d,keystrokes_to_completion:this._keystrokes,item_count:f.toString(),item_details:i,index:j,query:b,was_remote:g.toString(),local_latency_median:k.median,local_latency_std_dev:k.stdDev,remote_latency_median:l.median,remote_latency_std_dev:l.stdDev,click_or_enter:e,local_storage_size:n,users_in_local_storage:m,people_from_api:twttr.caches.User.get("typeahead_people_from_api")||0,people_followed:twttr.caches.User.get("typeahead_people_followed"),profile_visits:twttr.caches.User.get("typeahead_profile_visits"),people_blocked:twttr.caches.User.get("typeahead_people_blocked"),people_unblocked:twttr.caches.User.get("typeahead_people_unblocked")}),this.resetStatsTimer(),this._keystrokes=0}}),this});a(c)})}),provide("mixins/discoveryHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.discoveryHelper",function(a){return a.methods({pagePathFor:function(a,b,c){return twttr.router[a+(b||"")+"Path"](c)},routePageTo:function(a,b,c){twttr.router.routeTo(this.pagePathFor(a,b,c))},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a}}),a}),a(twttr.mixins.discoveryHelper)})}),provide("mixins/usesRelatedResults",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.usesRelatedResults",function(a){return a.methods({_conversationRoleFor:function(a){return a.annotations.ConversationRole},tweetsForConversationRole:function(a,b){var c=this,d=twttr.filter(a.results.array,function(a){return c._conversationRoleFor(a)===b});return twttr.map(d,function(a){return a.value})},_groupNamed:function(a,b){return twttr.filter(a.array,function(a){return a.groupName===b})[0]},conversationGroupFor:function(a){return this._groupNamed(a,"TweetsWithConversation")},withRelatedResults:function(a,b,c){var d=this;twttr.API.Status.related(a.id,{include_entities:1,success:function(b){d._logResultGroups(b,a),c.success(b)},error:c.error||function(){}})},_logResultGroups:function(a,b){var c=this,d=(new Date).getTime()+"-"+(twttr.currentUser?twttr.currentUser.id:"guest")+"-"+b.id,e=[],f={related_impression_id:d,groups:e},g;$.each(a.array,function(a,b){var f=[],i=[];e.push(c._scribeDataFor(b,a)),g||(g=c._abDataFor(b)),b.sync("relatedImpressionId",d)}),scribble("show-related-tweets",f),g&&scribble("show-related-tweets",g,"www_ab_testing")},_scribeDataFor:function(a,b){var c={pos:b,groupName:a.groupName,resultType:a.resultType,annotations:this._annotationsFor(a),tweets:this._tweetsFor(a)};return a.sync("relatedGroupName",a.groupName),c},_abDataFor:function(a){var b;for(var c in a.annotations)c=="abData"&&(b||(b=a.annotations[c]));if(b)for(var d in b)a.sync("ab_data_"+d,b[d]);return b},_annotationsFor:function(a){var b=[],c="";for(var d in a.annotations)if(d!="abData"){var e={type:d,value:a.annotations[d]};b.push(e),c+=a.annotations[d]+" "}return c.length>0&&(c=c.substring(0,c.length-1)),a.sync("relatedAnnotations",c),b},_tweetsFor:function(a){var b=[];return $.each(a.results.array,function(c,d){a.resultType=="Tweet"&&b.push(d.value.id)}),b}}),a}),a(twttr.mixins.usesRelatedResults)})}),provide("mixins/profileHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.profileHelper",function(a){return a.methods({getUserInfo:function(a,b,c,d){c=c||{},this._screenName=a?a.toLowerCase():a;var e;c.batch===!0&&twttr.decider.isAvailable("profile_combined_api")?e=twttr.API.User.findForProfile:e=twttr.API.User.find,e.call(twttr.API.User,this._screenName,{success:twttr.bind(this,function(a){this.profileUser=twttr.profileUser=a,b&&b()}),error:twttr.bind(this,function(a){signal(">wokeUp"),a.status==403?twttr.isT1?twttr.app.switchToPage("403").send("suspendedUser"):twttr.Router.performRedirect(twttr.router.suspendedPath()):this.trigger("notFound"),d&&d()})})},_isSocialContextAvailable:function(){return twttr.decider.isAvailable("social_context")&&twttr.loggedIn&&twttr.currentUser.id!=twttr.profileUser.id},_defaultedScreenName:function(a){return!a&&twttr.loggedIn?twttr.currentUser.screenName:a},_addPromotedData:function(){twttr.promotedAccountStore.hasAccount()&&twttr.promotedAccountStore.getAccount().id==this.profileUser.id&&(this.profileUser=twttr.API.util.PromotedStore.getPromotedUserInstance(this.profileUser,twttr.promotedAccountStore.getAccount().impressionId),twttr.promotedAccountStore.clear())},noAutoRender:!0}).addViewData(function(){return{profile_user:new twttr.views.ProfileUser(twttr.profileUser)}}),a}),a(twttr.mixins.profileHelper)})}),provide("mixins/commonDashboardClickHandlers",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.commonDashboardClickHandlers",function(a){return a.click({".title-link":function(b,c){var d={input:"click",component:"dashboard",subcomponent:a._name,target:"dashboard_title",item:c.find(".dashboard-component-title").html()};scribble("dashboard_click",d)},".user-profile-link":function(b,c){var d=c.is("img")||c.find("img")[0],e=c.attr("data-user-id")||c.closest("a").attr("data-user-id"),f={input:"click",component:"dashboard",subcomponent:a._name,target:"user_profile_link",target_type:d?"image":"link",profile_id:e};scribble("dashboard_click",f)}}),a}),a(twttr.mixins.commonDashboardClickHandlers)})}),provide("mixins/t1/cardActionable",function(a){using("constants").as(function(b){var c=twttr.klass.mixin("twttr.mixins.cardActionable",function(){this.methods({registerCardActions:function(){var a=this;a.$node.delegate(".js-action-card-search","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("search","card_"+a._getElementCardType(this),{query:a._getCardQuery(this),item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-news","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("open_link","card_news",{url:$(this).attr("href"),query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)}),b.stopPropagation()}),a.$node.delegate(".js-action-card-expandtweets","simpleExpandoContract",function(b){var c=a._getCardQuery(this);a._scribeCardAction("deselect","card_news",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-expandtweets","simpleExpandoExpand",function(b){var c=a._getCardQuery(this);a._scribeCardAction("select","card_news",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-tweetlink","click",function(b){var c=a._getCardQuery(this),d=a._getStreamItemId(this);a._scribeCardAction("compose_tweet","card_news",{url:d,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-permalink","click",function(b){var c=a._getCardTweetId(this);a._scribeCardAction("permalink","card_tweet",{item_count:1,item_ids:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-profile","click",function(b){var c=a._getCardTweetId(this);a._scribeCardAction("profile_click","card_tweet",{item_count:1,item_ids:[c],item_details:a._getCardItemDetails(this,c,a._getElementUserId(this))})}),a.$node.delegate(".js-action-card-media","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("click",a._getCardMediaType(this)+"_card_topic",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})})},_scribeCardAction:function(a,b,c){trackClient({action:a,component:b},c)},_getCardAttribute:function(a,b){var c=$(a).closest(".js-story-item");return c.attr(b)},_getElementUserId:function(a){var b=$(a).closest(".js-actionable-tweet");return b.attr("data-user-id")},_getCardTweetId:function(a){return this._getCardAttribute(a,"data-tweet-id")},_getCardQuery:function(a){return this._getCardAttribute(a,"data-query")},_getStreamItemId:function(a){var b=$(a).closest(".js-stream-item");return b.attr("data-item-id")},_getElementCardType:function(a){return this._getCardAttribute(a,"data-story-type")},_getCardMediaType:function(a){return this._getCardAttribute(a,"data-card-media-type")},_getCardItemPosition:function(a,b){var c=$(a).closest("div.js-stream-items"),d;return c.length&&c.find("[data-query]").each(function(a){var c=$(this),e=c.attr("data-query");if(b+""==e)return d=a,!1}),d},_getCardItemDetails:function(a,c,d){var e={},f={item_type:b.constants.clientEvent.itemType.story,item_description:this._getElementCardType(a),item_position:this._getCardItemPosition(a,c)};return d&&(f.target_id=d),e[""+c]=f,e}})});a(c)})}),provide("mixins/t1/discoveryStoryHelpers",function(a){using("_","constants","util").as(function(b){var c=twttr.klass.mixin("twttr.mixins.discoverySearchHelper",function(a){this.methods({formatted_tweet_count_text:function(){return _("{{count}} Tweets",{count:b.util.formatNumber(this.tweet_count,twttr.pageLocale)})},story_name:function(){return this.name||this.query},is_hashtag:function(){return this.story_name().substring(0,1)==="#"},search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.TREND}})}),d=twttr.klass.mixin("twttr.mixins.discoveryMediaRenderHelper",function(a){this.methods({escaped_query:function(){return escape(this.id||this.query)},afterHtml:function(){if(!this.has_media)return;var a=this;setTimeout(function(){var b=(new Date).getTime(),c=a.escaped_query(),d=$("div.js-story-item[data-query='"+c+"']");d.find("div.js-story-load-status").show();var e=d.find("img.js-story-media").error(function(b){twttr.decider.isAvailable("t1d_scribe_errors")&&a._scribe("error",{id:c,url:a.image_url}),d.removeClass("js-loading loading"),d.addClass("js-nomedia nomedia")}).load(function(){twttr.decider.isAvailable("t1d_scribe_times")&&a._scribe("complete",{id:c,time:(new Date).getTime()-b,url:a.image_url}),d.removeClass("js-loading loading")});e.attr("src",a.image_url)},0)},_scribe:function(a,b){trackClient({action:a,component:this.scribeComponent},b)}})});a(c,d)})}),provide("mixins/UserSimilaritiesStreamT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.UserSimilaritiesStreamT1",function(){this.methods({_setTitle:function(a){twttr.helpers.isCurrentUser(twttr.profileUser.screenName)?a(_("Similar to you")):a(_("Similar to {{full_name}}",{full_name:twttr.profileUser.name}))}})});a(c)})}),provide("mixins/SuggestionCategoriesStreamT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.SuggestionCategoriesStreamT1",function(){this.methods({itemViewClass:"StreamInterestCategory",sampleSize:"large",addTipsies:function(){this.$find(".js-user-tipsy").tipsy({gravity:"s"})},_setHeader:function(a,b){b.header_help=_("Select topics you&rsquo;re interested in. Follow people you want to hear from."),b.placeholder=_("Search for a topic, full name, or @username");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowInterestsSearchPath,b);a(c.$node)},_setTitle:function(a){a(_("Browse categories"))},_getStreamEndComponent:function(){return new twttr.components.StreamEnd(this._getStreamEndHtml(),this._getStreamEndShowBird())}})});a(c)})}),provide("mixins/SuggestionCategoryMembersStreamT1",function(a){using("helpers","mixins/hasGovernmentSearchHeader").as(function(b){var c=twttr.klass.mixin("twttr.mixins.SuggestionCategoryMembersStreamT1",function(){this.mixin(b.mixins.hasGovernmentSearchHeader),this.methods({_setTitle:function(a){a(this.category.name)},_setViewToggler:function(a){var b={route:twttr.router.whoToFollowInterestsPath(),name:_("View all categories")};a(new twttr.views.BackLink(b))},_getStreamEndComponent:function(){return new twttr.components.StreamEnd(this._getStreamEndHtml(),this._getStreamEndShowBird())},_showGovernmentSearchHeader:function(){return twttr.abdecider.choose("government_sul_your_reps_195")!=="show_in_government_sul"?!1:this.category.slug===(twttr.isLocalhost?"celebrities":"government")}})});a(c)})}),provide("mixins/UserRecommendationsT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.UserRecommendationsT1",function(){this.methods({getRecPosition:function(a){var b;return this.$find(".js-account-summary").each(function(c,d){if(a.attr("data-user-id")==$(d).attr("data-user-id"))return b=c,!1}),b},LIST_ITEM_SELECTOR:".js-recommended-followers > .js-actionable-user",_generateUserList:function(a){return $('<div class="js-recommended-followers flex-module-inner" data-section-id="wtf">'+(new twttr.views.UserSmallList(a)).html()+"</div>")},_removeRefreshLink:function(){this.$find("a.js-refresh-suggestions").parent("span").remove()},_getModuleViewName:function(){return this.screenName?"DashboardUserSimilarities":"DashboardUserRecommendations"},_shouldHaveSpacer:function(){return!1}})});a(c)})}),provide("mixins/hasGovernmentSearchHeader",function(a){using("helpers").as(function(b){var c=twttr.klass.mixin("twttr.mixins.hasGovernmentSearchHeader",function(){this.methods({_setHeader:function(a){var c=this;if(this._showGovernmentSearchHeader()){var d=(new twttr.views.GovernmentAccountSearch({zip_code:this.params&&this.params.zipCode||""})).$html();b.helpers.addFormEvents(d.find(".js-government-account-search"),function(a,b){c.trigger("governmentSearch",[b.zip])}),a(d)}else a()},_showGovernmentSearchHeader:function(){return!0}})});a(c)})}),provide("mixins/prefollowingStream",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.prefollowingStream",function(a){return a.methods({deferredFollows:{},preFollows:{},userActionPrefollow:function(a){var b=twttr.helpers.getUserId(a);this.preFollows[b]=!0,this.userActionFollow(a)},userActionFollow:function(a){var b=this,c=twttr.helpers.getUserId(a);this.deferFollows?(this.deferredFollows[c]=!0,twttr.API.User.trigger("prefollow_before"),twttr.API.User.find(c,function(c){b.updateButtonFollow(a,c["protected"]),twttr.API.User.trigger(c["protected"]?"prefollow_request_success":"prefollow_success",c)})):this.constructor.uber.userActionFollow.apply(this,arguments)},userActionUnfollow:function(a){var b=twttr.helpers.getUserId(a);this.deferFollows&&this.deferredFollows[b]?(delete this.deferredFollows[b],twttr.API.User.trigger("unprefollow_before"),twttr.API.User.find(b,function(a){twttr.API.User.trigger("unprefollow_success",a)}),this.preFollows[b]&&(delete this.preFollows[b],this.scribbler.scribe({action:"unprefollow"},{item_ids:[""+b],item_count:1}))):this.constructor.uber.userActionUnfollow.apply(this,arguments)},commitPrefollows:function(a){var b=this,c=[],d=[],e=0;for(var f in this.deferredFollows)c.push(f);for(var f in this.preFollows)d.push(f);if(c.length==0){a();return}this.scribbler.scribe({action:"prefollow"},{item_ids:d,item_count:d.length}),twttr.currentUser.friends.followAll(c,{stringifiedIds:!0,success:function(_,c){for(var d=0;d<c.response.length;++d){var e=c.response[d];b.scribbler.scribe({action:"follow"},{item_ids:[""+e.id],item_count:1})}a()},error:function(){twttr.currentUser.friendsCount+=c.length,a()}}),this.deferFollows=!1,this.deferredFollows={},this.preFollows={}}}),a}),a(twttr.mixins.prefollowingStream)})}),provide("streams/StarterList",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.StarterList",function(a,b){twttr.streams.ListMembers.apply(this,arguments)}).subclassOf(twttr.streams.ListMembers).mixin(twttr.mixins.discoveryHelper).methods({update:function(a){this.params.list.members(a)},_setTitle:function(a){a(_("{{name}} suggests you also follow these accounts:",this.params.list.user.attributes))},_getEmptyStreamHtml:function(){return _("Sorry, {{name}} doesn't recommend anybody in particular.<br />Find users by <a href='{{url}}'>Interests</a>.",{url:this.pagePathFor(this.params.pathRoot,"Interests"),name:this.params.list.user.name})}}),a(twttr.streams.StarterList)})}),provide("streams/StarterFriends",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.StarterFriends",function(){twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){if(!twttr.helpers.canViewUser(c)){b._showError(twttr.streams.PROTECTED),b.doneLoadingMore();return}c.friends(a)})},_setTitle:function(a){a(_("@{{screen_name}} follows these accounts:",{screen_name:this.screenName}))}}).statics({_deciderKey:"people_stream_friends"}),a(twttr.streams.StarterFriends)})}),provide("streams/UserRecommendationsStream",function(a){using("_","streams/UserStream","mixins/userRecommendationsHelper","mixins/userActionable").as(function(b,_){var c=twttr.klass("twttr.streams.UserRecommendationsStream",function(a,c,d){b.streams.UserStream.call(this,a,c),c&&(this._processLoadedUsers(c),a.cursor&&(this.cursor=a.cursor)),this.whotofollowComponentName="whotofollow_stream",this.registerUserRecommendationsActions()}).subclassOf(b.streams.UserStream).mixin(b.mixins.userRecommendationsHelper,b.mixins.userActionable).methods({afterFirstSwitchingTo:function(a){this.items&&this.items.length?(a(this,twttr.streams.SUCCESS),this.render()):this.getMoreOldItems(a)},_processLoadedUsers:function(a,b){a&&this.doneLoadingMore();var c="whotofollow_view_all_recommended_users",d=this.params.inWelcomeFlow?"welcome_flow":"find_users",e={tracking_context:d};return b&&(e.error_status=b.status),this.trackImpressions(a,c,e),a},loadRecommendedUsers:function(a){a.personalized=a.personalized||this.params.personalized||!1,a.force_bq=a.personalized,a.algorithm=a.algorithm||this.params.algorithm||"",a.connections=!0;if(this.params.inWelcomeFlow){var b=twttr.abdecider.choose("wtf_welcome_persistent_100"),c=b&&b.match(/bucket(\d+)/),d=c?c[1]:0;a.high_timeout=!0,a.display_location="welcome-flow-recommendations",a.bucket_id=d}twttr.decider.isAvailable("wtf_visited_users")&&(a.related_users=twttr.recentlyViewedUsers.stack.concat(twttr.loggedOutViewedUsers.stack)),a.cursor===undefined&&(a.cursor=-1);var e=this,f=a.success;a.success=function(a,b){e.hadBqResults=b.response.had_bq_results;var c=e.recsToUsers(a);f(c,b)},twttr.loggedIn?twttr.currentUser.recommendedUsers2(a):twttr.API.User.recommendedUsers2(a)},update:function(a){var b=this,c=a.success,d=a.error,e=function(){var a={success:function(a,d){a=b._processLoadedUsers(a),c(a,d)}};b.params.lang&&(a.lang=b.params.lang),b.params.country&&(a.country=b.params.country),b.params.city&&(a.city=b.params.city),a.bypass_cache=!0,twttr.API.SuggestionCategory.randomSample(a),b.sulFallback=!0,b._streamManager&&b._streamManager.setTitle(b)};a.success=function(a,d){a=b._processLoadedUsers(a);if(!a.length()){if(twttr.decider.isAvailable("whotofollow_random_sample")&&b.params.useSulFallback!==!1&&(!b.params.inWelcomeFlow||b.params.useSulFallback)){e();return}b.trigger("noMoreRecommendations")}b.sulFallback=!1,c(a,d),b._streamManager&&b._streamManager.setTitle(b)},a.error=function(a){b._processLoadedUsers(null,a),d&&d(a)},a.cursor==-1&&twttr.decider.isAvailable("promoted_accounts_in_whotofollow_viewall")&&!b.params.inWelcomeFlow&&(a.pc=!b.params.noPromotedContent,a.display_location="wtf-view-all-stream"),this.params.sulWithNoFollows&&twttr.currentUser.friendsCount==0?e():this.loadRecommendedUsers(a)},setStreamManager:function(a){this._streamManager=a},_setTitle:function(a){if(this.params.invisibleWhenEmpty&&(!this.items||this.items.length==0)){a("");return}if(twttr.is.def(this.params.title)){a(this.params.title);return}if(twttr.isT1){a(_("Who to follow"));return}this.params.inWelcomeFlow?a(_("Follow these people to get started:")):this.params.inHomePage?(this.$find(".stream-title").css("border-bottom","1px solid #EBEBEB"),a(_('<div class="wtf-timeline-title"><div class="wtf-timeline-text">It looks like you aren&#39;t following anyone yet.<br /><b>Go ahead and follow some people!</b></div><button class="done-right button selected" type="button">Done following</button></div>'))):this.sulFallback?a(_('We&#39;re building a list of personalized suggestions for you. In the meantime, here are some other <a href="{{url}}">interesting accounts</a> to follow.',{url:twttr.router.whoToFollowInterestsPath()})):a(_("Twitter accounts suggested for you based on who you follow and more."))},_getEmptyStreamHtml:function(){return this.params.invisibleWhenEmpty&&(!this.items||this.items.length==0)?"":this.params.personalizedOnly?_("We&#39;re sorry, Twitter does not have any personalized suggestions to show you at this time. You can browse our regular <a href='{{url}}'>Who to Follow</a> list.",{url:twttr.router.whoToFollowPath()}):_("Sorry, we&#39;ve temporarily run out of recommendations for you. We're out there looking for more right now. Please check back soon!")},_getStreamEndHtml:function(){return this.params.inHomePage?_('<button class="done-right button selected" type="button">Done following</button></div>'):_("<a href='#' class='back-to-top'>Back to top &uarr;</a>")},_getStreamEndShowBird:function(){return this.params.inHomePage?!1:!0},_trackNewImpressions:function(){}});twttr.isT1&&c.methods({_setHeader:function(a,b){b.header_help=_("Twitter accounts suggested for you based on who you follow and more.");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowSuggestionsSearchPath,b);a(c.$node)}}),a(twttr.streams.UserRecommendationsStream)})}),provide("streams/UserRecommendationsDashboardStream",function(a){using().as(function(b){twttr.klass("twttr.streams.UserRecommendationsDashboardStream",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",this.deferFollows=!!a.deferFollows,twttr.streams.UserRecommendationsStream.call(this,a,b)}).subclassOf(twttr.streams.UserRecommendationsStream).mixin(twttr.mixins.prefollowingStream).methods({_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a(twttr.streams.UserRecommendationsDashboardStream)})}),provide("streams/UserSimilaritiesStream",function(a){using("_",twttr.isT1?"mixins/UserSimilaritiesStreamT1":"").as(function(b,_,c){var d=twttr.klass("twttr.streams.UserSimilaritiesStream",function(a,b){twttr.streams.UserStream.call(this,a,b),this.registerUserRecommendationsActions(),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"})}).subclassOf(twttr.streams.UserStream).mixin(twttr.mixins.userRecommendationsHelper).methods({update:function(a){var b=this,c=a.success,d=a.error,e="whotofollow_view_all_similar_users",f="similar_to";a.success=function(a,d){var g=b.recsToUsers(a);b.trackImpressions(g,e,{tracking_context:f}),c(g,d)},a.error=function(a){b.trackImpressions(null,e,{tracking_context:f,error_status:a.status}),d&&d(a)},a.connections=!1,a.pc=!0,a.display_location="st-view-all-stream",twttr.profileUser.similarUsers(a)},setStreamManager:function(a){this._streamManager=a},_setTitle:function(a){a(_("Accounts similar to @{{screen_name}}:",{screen_name:this.params.screenName}))},_getEmptyStreamHtml:function(){return _("Sorry, we've temporarily run out of users similar to @{{screen_name}}. We're out there looking for more right now. Please check back soon!",{screen_name:this.params.screenName})},_trackNewImpressions:function(){}});c&&d.mixin(c),a(twttr.streams.UserSimilaritiesStream)})}),provide("streams/ContactImportMatches",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.streams.ContactImportMatches",function(a,b,c){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.UserStream.apply(this,arguments),this.$node.addClass("contact-import-matches"),a.noBigImages||(this.$node.addClass("contact-import-images"),this.itemViewClass="MatchedContactUser"),this._loadedMatches=!1,this._loadingCount=0,this._loadingComponent=new twttr.views.ContactImportLoading,this._followingCount=0,this._showFollowing=!1,this.$headerNode=this.getHeaderContainer();var d=this;this.$headerNode.delegate(".js-toggle-following","click",function(a){return d._toggleFollowing(),!1})}).subclassOf(twttr.streams.UserStream).mixin(twttr.mixins.discoveryHelper).methods({streamViewClass:"ContactImportMatches",afterSwitchingToAgain:function(a){this.afterFirstSwitchingTo(a)},afterFirstSwitchingTo:function(a){twttr.API.User.bind("follow.ContactImportMatches",twttr.bind(this,this._incrementFollowingCount)),twttr.API.User.bind("follow_request.ContactImportMatches",twttr.bind(this,this._incrementFollowingCount)),twttr.API.User.bind("unfollow.ContactImportMatches",twttr.bind(this,this._decrementFollowingCount)),this._loadedMatches||this.getMoreOldItems(a)},beforeSwitchingAway:function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),twttr.API.User.unbind(".ContactImportMatches")},update:function(a){this._loadingError=!1;var b=this,c=a.success,d=a.error;a.success=function(a,d){var e=!b._loadedMatches;b._loadedMatches="users"in d.response;if(b._loadedMatches){delete b._loadingComponent;if(d.response.count){b.showInviteesPopup=!!d.response.others_count&&b.params.pathRoot=="welcome";var f=twttr.merge(d.response,{retry_service_path:b.pagePathFor(b.params.pathRoot,"Import")});d.response.following_count==d.response.count&&(f.following_count=0,b._showFollowing=!0),e&&b.scribbler.scribe({component:"stream",action:"matches"}),b._followingCount=d.response.following_count,b._othersCount=d.response.others_count,b._matchesHeaderComponent=new twttr.components.ContactImportMatchesStats(b,f)}else e&&b.scribbler.scribe({component:"stream",action:"no_matches"}),d.response.others_count?b._inviteOthersInline():window.setTimeout(function(){b.routePageTo(b.params.pathRoot,"Import"),twttr.showMessage(_("There was no one in your address book"))},0)}c(a,d),b._loadedMatches&&b._followingCount&&b.$node.parents(".dashboard").length==0&&Math.abs(twttr.$doc.scrollTop()+twttr.windowHeight-twttr.$doc.height())<500&&b.getMoreOldItems(),b._loadedMatches||(b._loadingCount++<b.constructor._retryCount?b._scheduleRetry():(b.scribbler.scribe({component:"stream",action:"timeout"}),b._loadingCount=0,b._showError(twttr.streams.TIMEOUT)))},a.error=function(a,c){if(a.error=="denied"){b.routePageTo(b.params.pathRoot,"Import"),twttr.showMessage(_("Authorization to access your contacts was denied"));return}a.error&&(b._loadingError=!0),b.trigger("error"),d(a,c)},twttr.API.AddressBook.contactsMatches(a)},_scribeResults:function(a,b,c){if(a=="initial"&&!this._loadedMatches)return;c=c||{},c.message=""+this._othersCount,twttr.streams.UserStream.prototype._scribeResults.apply(this,[a,b,c])},_toggleFollowing:function(){this._showFollowing=!this._showFollowing;for(var a=0;a<this.items.length;++a){var b=this.items[a];if(b.following||b.followRequestSent){var c=this.$node.find(this.itemSelector(b.id));this._showFollowing?c.fadeIn():c.fadeOut()}}this._updateFollowingToggle()},_incrementFollowingCount:function(a,b){this._updateFollowing(b,!0)},_decrementFollowingCount:function(a,b){this._updateFollowing(b,!1)},_updateFollowing:function(a,b){for(var c=0;c<this.items.length;++c){var d=this.items[c];if(d.id==a.id){this.items[c]=a;break}}this._followingCount=Math.max(0,this._followingCount+(b?1:-1)),this._showFollowing&&this._updateFollowingToggle()},_updateFollowingToggle:function(){var a={following_count:this._followingCount},b;this._showFollowing?b=_("Hide {{following_count}} following",a):b=_("Show {{following_count}} following",a),this.$headerNode.find(".js-toggle-following").text(b)},_followAll:function(a){var b=this;if(a.hasClass("disabled"))return;a.addClass("disabled");var c={success:function(c,d){a.removeClass("disabled");var e="";switch(c.followed_ids.length){case 0:e=_("Requests were sent to everybody.");break;case 1:e=_("Congratulations! You are now following 1 more user.");break;default:e=_("Congratulations! You are now following {{count}} more users.",{count:c.followed_ids.length})}twttr.showMessage(e),twttr.API.User.startBulkFollowing();var f=0;twttr.API.User.findAllCached(c.followed_ids).each(function(a){a.data("following",!0),a.following=!0;var b={requestParameters:[{user_id:a.id}]};twttr.API.User.trigger("follow_before",b),twttr.API.User.trigger("follow_success",a),f++}),twttr.API.User.findAllCached(c.requested_ids).each(function(a){a.data("follow_request_sent",!0),a.followRequestSent=!0;var b={requestParameters:[{user_id:a.id}]};twttr.API.User.trigger("follow_request_before",b),twttr.API.User.trigger("follow_request_success",a),f++}),twttr.API.User.stopBulkFollowing(),b.scribbler.scribe({component:"stream_header",action:"follow"},{item_count:c.followed_ids.length,item_ids:c.followed_ids,event_value:c.followed_ids.length,event_info:"follow_all",context:"import"}),b.scribbler.scribe({component:"stream_header",action:"follow_all"},{item_count:c.followed_ids.length,event_value:c.followed_ids.length,context:"import"}),b._followingCount+=c.followed_ids.length+c.requested_ids.length-f,this._showFollowing&&this._updateFollowingToggle()},error:function(b){a.removeClass("disabled"),twttr.showError(_("There was an error following your contacts."))}};twttr.API.AddressBook.followAllContacts(c)},_saveAsList:function(){var a=this;(new twttr.widget.ListDialog({template:{content:(new twttr.views.ListDialog({name:_("Friends"),mode:"private"})).html()},onSuccess:function(b){options={success:function(b,c){twttr.API.User.findAllCached(b).each(function(b){a.isDuplicate(b)&&a.rerenderItem(b.id,b)}),a.scribbler.scribe({component:"stream_header",action:"save_list"},{event_value:b.length,item_count:b.length})},error:function(){twttr.showError(_("There was an error adding your contacts to the list."))}},twttr.API.AddressBook.addContactsToList(b.id,options)}})).open()},inviteOthers:function(a){a||this.scribbler.scribe({component:"invite_contacts_link",action:"click"}),this.showInviteesPopup=!1;var b=this,c={success:function(c,d){b.scribbler.scribe({component:"invite_contacts_dialog",action:"open"}),b.inviteDialog=(new twttr.widget.InviteContactsDialog(d.response,{css:{},onSuccess:function(){this.close()},scribbler:b.scribbler,routeToHome:a})).open()}};twttr.API.AddressBook.contactsOthers(c)},_inviteOthersInline:function(){this.showInviteesPopup=!1,this._suppressStreamEnd=!0;var a=this,b={success:function(b,c){a.doneLoadingMore();var d=new twttr.components.InviteContacts(c.response,{scribbler:a.scribbler});a.scribbler.scribe({component:"invite_contacts",action:"impression"}),a.$node.find("div.stream-items").append(d.$node),a._renderInviteHeader(b.length),a.reachedTheEnd()},error:function(b){a.doneLoadingMore(),a._loadingError=!0,a._showError(twttr.streams.ERROR)}};twttr.API.AddressBook.contactsOthers(b),window.setTimeout(function(){a._loadingComponent=new twttr.views.ContactImportLoading,a.showLoadingSpinner()},0)},_scheduleRetry:function(){var a=this;this._timeout=window.setTimeout(function(){a._timeout=null,a._loadingComponent=new twttr.views.ContactImportLoading,a.getMoreOldItems()},5e3),this.showLoadingSpinner()},_renderItemHtml:function(a){var b=twttr.streams.UserStream.prototype._renderItemHtml.call(this,a);return!this._showFollowing&&(a.following||a.followRequestSent)&&!this.selectedItem(a.id).length&&(b=b.replace(/^<div /,"<div style='display:none' ")),b},_getStreamLoadingComponent:function(){return this._loadingComponent||twttr.streams.UserStream.prototype._getStreamLoadingComponent.call(this)},_getStreamErrorComponent:function(a){var b=this._loadingError?_("There was an error loading your contacts."):_("Loading seems to be taking a while."),c=new twttr.components.ContactImportErrorEnd(b),d=this;return c.bind("tryImportAgain",function(a){d.routePageTo(d.params.pathRoot,"Import")}),c},_getHeaderComponent:function(){return this._matchesHeaderComponent}}).statics({_deciderKey:"contact_import_stream",_retryCount:13});twttr.isT1?c.methods({_setHeader:function(a,b){if(this.header)a(this.header.$node);else{var c=new twttr.views.ContactImportMatchesHeader(b);a(c.html())}},_updateHeaderFromStream:function(a){this._matchesHeaderComponent&&(this.header=this._matchesHeaderComponent,a.html(this._matchesHeaderComponent.$node))},_renderInviteHeader:function(a){this.$headerNode.find(".js-contact-import-header-placeholder").html((new twttr.views.InviteContactsHeader({count:a})).html())},getHeaderContainer:function(){return this.streamManager?this.streamManager.$headerContainer():null},_setTitle:function(a){a(_("Find friends"))},_setViewToggler:function(a){a(new twttr.views.BackLink({route:twttr.router.whoToFollowImportPath(),name:_("Try another service")}))}}):c.methods({getHeaderContainer:function(){return this.$node},_setTitle:function(a){a("")},_renderInviteHeader:function(a){(new twttr.views.InviteContactsHeader({count:a})).render(this.$find(".invite-contacts-component"),"prepend"),twttr.helpers.handlePopupLinks(this.$node)}}),a(twttr.streams.ContactImportMatches)})}),provide("streams/DashboardContactImportMatches",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardContactImportMatches",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",a.noBigImages=!0,twttr.streams.ContactImportMatches.apply(this,arguments)}).subclassOf(twttr.streams.ContactImportMatches).methods({_setHeader:function(a,b){this.header?a(this.header.$node):a("")},_updateHeaderFromStream:function(a){twttr.streams.ContactImportMatches.prototype._updateHeaderFromStream.apply(this,arguments),$(window).trigger("resize")},itemViewClass:"DashboardStreamUser",customHeaderView:"DashboardContactImportMatchesStats"}),a()})}),provide("streams/ContactImportServices",function(a){using("externalOauthPopup",twttr.isT1?"mixins/ContactImportServicesT1":"").as(function(b,c,d){twttr.klass("twttr.streams.ContactImportServices",function(a,c){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments);var d=this;this.$node.addClass("contact-import-services"),this.$node.delegate(".js-wipe-addressbook","click",function(a){(new twttr.widget.Prompt({modal:!0,draggable:!0,template:{container_id:"wipe-addressbook",title:_("Are you sure you want to remove your contacts? Who To Follow suggestions may become less relevant.")},callback:function(a){a&&$.ajax({type:"POST",dataType:"json",url:"/users/wipe_addressbook.json",headers:{"X-PHX":!0},data:{authenticity_token:twttr.API.getConfig().postAuthenticityToken},success:function(){twttr.showMessage(_("Your contacts have been removed."))},error:function(){twttr.showMessage(_("Oops, we couldn't remove your contacts at this time."))}})}})).open()}),this.$node.delegate("div.service-button, .js-service-row","click",function(c){var e=$(this),f=e.find(".js-service-name").attr("data-service-id"),g={query:f};e.hasClass("selected")&&(g.event_info="selected"),d.scribbler.scribe({component:"stream",action:"launch_service"},g),e.attr("data-popup")==="true"?b.externalOauthPopup({url:e.attr("data-url"),width:e.attr("data-width"),height:e.attr("data-height"),callbackUrl:d.pagePathFor(a.pathRoot,"ImportMatches")}):window.open(e.attr("data-url"),"_blank").focus(),d._matchesStreamKey?d._streamManager.clearKeyFromCache(d._matchesStreamKey):d._streamManager.clearFromCache(twttr.streams.ContactImportMatches,{pathRoot:a.pathRoot}),c.preventDefault()})}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.discoveryHelper).methods({setStreamManager:function(a){this._streamManager=a},setMatchesStreamKey:function(a){this._matchesStreamKey=a},update:function(a){this.params.lang&&(a.lang=this.params.lang),this.params.country&&(a.country=this.params.country),this.params.context&&(a.context=this.params.context),twttr.API.AddressBook.contactsServices(a)},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_fetchItems:function(a){var b=this;if(this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}var c={success:function(c,d){b.push(c),b.reachedTheEnd();var e,f=twttr.map(c,function(a,b){return a.matched_email&&(e=a.matched_email),a.id}),g={item_names:f,item_count:f.length};e&&(g.message=e),b.scribbler.scribe({component:"stream",action:"results"},g),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)}};this.update(c)},_renderItemsHtml:function(a){var b=null;for(var c=0;c<a.length;++c){a[c].matched_email&&(b=a[c]);var d=a[c].name_template;d&&twttr.views[d]&&(a[c].html_name=(new twttr.views[d]).html())}return this.params.onlyMatched&&b&&(a=[b]),(new twttr.views.ContactImportServicesVertical({services:a,matched_service:b,matched_service_name:(b||{}).name,in_welcome_flow:this.params.inWelcomeFlow})).html()},_setTitle:function(a){a(_("Search the services you use to discover which of your friends are already using Twitter. Follow any of the friends you find to add their Tweets to your timeline."))},_getStreamEndComponent:function(){return null}}).statics({_deciderKey:"contact_import_stream"}),d&&twttr.streams.ContactImportServices.mixin(twttr.mixins.ContactImportServicesT1),a(twttr.streams.ContactImportServices)})}),provide("mixins/ContactImportServicesT1",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.ContactImportServicesT1",function(){this.methods({_setHeader:function(a,b){b.header_help=_("Search your contacts for friends already on Twitter, or invite them via email.");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowImportSearchPath,b);a(c.$node)},_setTitle:function(a){a(_("Find friends"))},_getStreamEndComponent:function(){return new twttr.components.StreamEndInviteFriends(this._getStreamEndHtml(),this._getStreamEndShowBird())}})}),a(twttr.streams.ContactImportServicesT1)})}),provide("streams/DashboardContactImportServices",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardContactImportServices",function(a,b){a=a||{},twttr.streams.ContactImportServices.call(this,a,b)}).subclassOf(twttr.streams.ContactImportServices).methods({_setHeader:function(a,b){a("")}}),a()})}),provide("StoredUserStack",function(a){using().as(function(b){twttr.klass("twttr.StoredUserStack",function(a,b){this.storageKey=a,b||(b=twttr.caches.User);var c=b.get(this.storageKey);this.cache=c?c.index:{},this.stack=c?c.stack:[],this.timestamps=c&&c.timestamps?c.timestamps:{}}).methods(twttr.EventProvider).statics({MAX_SIZE:10}).methods({push:function(a){if(!twttr.helpers.isCurrentUser(a)){var b=a.id||a.toString();twttr.is.def(this.cache[b])&&(this.stack=twttr.filter(this.stack,function(a){return a!=b})),this.cache[b]=this.stack.push(b),this.timestamps[b]=(new Date).getTime();if(this.size()>twttr.StoredUserStack.MAX_SIZE){var c=this.stack.shift();delete this.timestamps[c],delete this.cache[c]}this.trigger("push",b)}return this.save()},save:function(){return twttr.caches.User.set(this.storageKey,{index:this.cache,stack:this.stack,timestamps:this.timestamps}),this.size()},clear:function(){this.cache={},this.stack=[],this.timestamps={},this.save()},size:function(){return this.stack.length},getLatestUserId:function(){var a=this.size();return a?this.stack[a-1]:null},getLastPushTime:function(a){return this.timestamps[a]},findAll:function(a){twttr.API.User.findAll(this.stack.reverse(),a)}}),twttr.app.waitForSignal("init",function(){twttr.recentlyViewedUsers=new twttr.StoredUserStack("recentlyViewedUsers"),twttr.loggedOutViewedUsers=new twttr.StoredUserStack("recentlyViewedUsers",new twttr.cache.local.User($.cookie("guest_id")))}),a(twttr.StoredUserStack)})}),provide("PasswordStrength",function(a){using().as(function(b){twttr.PasswordStrength=function(){function a(a){return typeof a=="function"}function b(a,b){var c="";for(var d=0;d<b.length;d++){var e=!0;for(var f=0;f<a&&f+d+a<b.length;f++)e=e&&b.charAt(f+d)==b.charAt(f+d+a);f<a&&(e=!1),e?(d+=a-1,e=!1):c+=b.charAt(d)}return c}return{check:function(c,d){var e=0,d=d||{};if(c.length<(d.minlength||6))return{score:0,msgClass:"tooshort"};var f=c.toLowerCase();if(d.username&&f==(a(d.username)?d.username():d.username).toLowerCase())return{score:0,msgClass:"obvious"};if($.inArray(f,twttr.BANNED_PASSWORDS||[])!=-1)return{score:0,msgClass:"banned"};if(c.match(/^\s*$/))return{score:0,msgClass:"whitespace"};if(d.requireStrong){var g="# ` ~ ! @ $ % ^ & * ( ) - _ = + [ ] { }  | ; : ' \" , . < > / ?".split(" ");g=$.map(g,function(a){return"\\"+a}).join("");var i=["\\d","[a-z]","[A-Z]","["+g+"]"],j=$.map(i,function(a){return"(?=.*"+a+")"}).join("");if(!c.match(new RegExp("("+j+"){10,}")))return{score:0,msgClass:"tooweak"}}e+=c.length*4,e+=(b(1,c).length-c.length)*1,e+=(b(2,c).length-c.length)*1,e+=(b(3,c).length-c.length)*1,e+=(b(4,c).length-c.length)*1,c.match(/(.*[0-9].*[0-9].*[0-9])/)&&(e+=5),c.match(/(.*[!@#$%^&*?_~].*[!@#$%^&*?_~])/)&&(e+=5),c.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(e+=10),c.match(/([a-zA-Z])/)&&c.match(/([0-9])/)&&(e+=15),c.match(/([!@#$%^&*?_~])/)&&c.match(/([0-9])/)&&(e+=15),c.match(/([!@#$%^&*?_~])/)&&c.match(/([a-zA-Z])/)&&(e+=15);if(c.match(/^\w+$/)||c.match(/^\d+$/))e-=10;return e<0&&(e=0),e>100&&(e=100),e<34?{score:e,msgClass:"weak"}:e<50?{score:e,msgClass:"good"}:e<75?{score:e,msgClass:"strong"}:{score:e,msgClass:"verystrong"}}}}(),a(twttr.PasswordStrength)})}),provide("mixins/urlShortener",function(a){using("_","util","constants").as(function(b,_){twttr.klass.mixin("twttr.mixins.urlShortener",function(a){a.mixin(twttr.mixins.caretHelper).statics({matchers:{tco:/^https?:\/\/t.co\/\w+$/}}).methods({_registerUrlShortenerEvents:function(){this._explainLinkShortening&&this.editor.bind("didChangeContent",twttr.bind(this,this._showCounterTipsy)),this.$counterText=$('<span class="tweetbox-counter-tipsy"></span>'),this.$counter.before(this.$counterText),this.$counterText.css("opacity",0),this.$links=[],this._a=!1,this._isTipShowing=!1,this._oldLinkLen=0;var a=this._getTextLength;this._getTextLength=function(c){var d=a.apply(this,arguments),e=twttr.txt.extractUrls(c);return d-=e.join("").length,twttr.each(e,function(a){d+=b.constants.tcoLength,a.match(/https:/)&&(d+=1)}),d}},_getLinkCounterText:function(a){var b=_("Links will appear shortened"),c=_("Link will appear shortened");return a>1?b:c},_showCounterTipsy:function(){var a=this,b,c,d=15;a._linkLen=a._extractUrls().length,a._linkLen&&a._linkLen!==a._oldLinkLen?(a.$counterText.html(a._getLinkCounterText(a._linkLen)),c=a.$container.find("div.tweet-button-container"),b=c.width(),c.children().each(function(){b-=$(this).outerWidth(!0)}),twttr.helpers.ellipsify(a.$container.find(".geo-text").width(function(a,c){return b<0||!c?c+b-d:c}),!0),a.$counterText.animate({opacity:1},100),a._isTipShowing=!0):a._isTipShowing&&!a._linkLen&&(a.$counterText.animate({opacity:0},100,function(){a.$counterText.html(""),twttr.helpers.ellipsify(a.$container.find(".geo-text").width(""),!0)}),a._isTipShowing=!1),a._oldLinkLen=a._linkLen},_showCounterFade:function(){if(twttr.txt.extractUrls(this.getCurrentWord(this.getCaret())).length){this.$counter.css({color:"green"});if(!this._a){var a=this.$counter.clone(),b=this.$counter.position();a.css({left:b.left,top:b.top}),a.addClass("tweet-counter-proxy"),this.$counter.after(a);function c(){a.remove()}a.animate({fontSize:"40px",opacity:0,marginTop:-20,marginLeft:-Math.round(a.width()/2)},200,c),this._a=!0}}else this.$counter.css({color:""}),this._a&&(this._a=!1)},_tweetReady:function(){this.lock(),this.callTalon(this._extractUrls(),twttr.bind(this,function(a){this.setTweetContent(this.replaceWithTalonUrls(a)),this.unlock(),this.tweet()}))},_extractUrls:function(){return this.filterInvalidLinks(twttr.txt.extractUrls(this.editor.content()))},replaceWithTalonUrls:function(a){var b=this.editor.content();return twttr.each(a,function(a){b=this.replaceContent(b,a)},this),b},callTalon:function(a,b){a.length?twttr.API.Urls.shortenMultiple(a,b):b([])},replaceContent:function(a,b){return a.replace(b.expanded_url,b.url)},filterInvalidLinks:function(b){return twttr.filter(b,function(b){return!b.match(a.matchers.tco)})},_mousemove:function(a){var b=a.pageX,c=a.pageY;twttr.each(this.$links,function(a){var d=$(a),e=d.offset(),f=d.attr("data-mouse-entered");if(b>=e.left&&b<=e.left+d.width()&&c>=e.top&&c<=e.top+d.height()){if(!f||f==="false")d.attr("data-mouse-entered","true"),d.trigger("mouseenter");return!1}f==="true"&&(d.attr("data-mouse-entered","false"),d.trigger("mouseleave"))})},_matchUrls:function(){setTimeout(twttr.bind(this,function(){this.$links=this.$find("a.twitter-timeline-link"),this.$links.tipsy({html:!0,gravity:"n",offset:3,"class":"tweetbox-tipsy",title:function(){return'<span class="tweetbox-tipsy-text">'+_("Link will be displayed as {{url}}",{url:twttr.helpers.displayUrl(this.href)})+"</span>"}})}),0)}})}),a(twttr.mixins.urlShortener)})}),provide("mixins/caretHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.caretHelper",function(){return this.statics({spaceBoundary:/\s|$/,wordEnd:/\S+$/}).methods({init:function(){this.$input.bind("blur",twttr.bind(this,function(a){setTimeout(twttr.bind(this,function(){this.hide()}),1e3)})).bind("mouseup",twttr.bind(this,function(a){setTimeout(twttr.bind(this,function(){this.getCaret()}),0)})).bind("focus",twttr.bind(this,function(a){this.getCaret()}))},getCurrentText:function(){return this.$input.val()},setCaretPosition:function(a){var b=this.$input[0];if(b.setSelectionRange)b.focus(),b.setSelectionRange(a,a);else if(b.createTextRange){var c=b.createTextRange();c.collapse(!0),c.moveEnd("character",a),c.moveStart("character",a),c.select()}this.lastCaret=a},getCaret:function(){var a=this.$input[0],b=0;if(document.selection){try{a.focus()}catch(c){}var d=document.selection.createRange();if(d==null)return this.lastCaret=0,0;var e=a.createTextRange(),f=e.duplicate();e.moveToBookmark(d.getBookmark()),f.setEndPoint("EndToStart",e),b=f.text.length}else if(a.selectionStart||a.selectionStart=="0")b=a.selectionStart;return this.lastCaret=b,b},insertOrReplaceSelection:function(a,b){var c=this.$input[0],d=this.getCaret(),e=d+a.length;if(document.selection){c.focus();var f=document.selection.createRange();f.text=a;if(b){var g=c.createTextRange();g.collapse(!0),g.moveEnd("character",e),g.moveStart("character",d),g.select()}else this.setCaretPosition(e)}else if(c.selectionStart||c.selectionStart=="0"){var i=c.selectionStart,j=c.selectionEnd,k=c.scrollTop;c.value=c.value.substring(0,i)+a+c.value.substring(j,c.value.length),c.focus(),c.selectionStart=b?d:e,c.selectionEnd=e,c.scrollTop=k}else c.value+=a,this.setCaretPosition(e),c.focus();this.lastCaret=e,this.$input.change()},getCurrentWord:function(a){var b=this.getCurrentText(),c=b.slice(0,a),d=b.slice(a,b.length),e=b.charAt(a-1);if(!e||e===" ")return"";this.leftBoundary=c.search(this.constructor.wordEnd);var f=c.slice(this.leftBoundary,c.length),g=d.slice(0,d.search(this.constructor.spaceBoundary)),i=f.concat(g);return this.rightBoundary=this.leftBoundary+i.length,i},replaceCurrentWord:function(a){var b=this.getCurrentText().split("");this.oldValueArray=b;var c=b.slice(0,this.leftBoundary),d=b.slice(this.rightBoundary,b.length);if(d.length<1||!d[0].match(/\s/))a+=" ";var e=(c.join("")+a).length+1;return{value:c.join("")+a+d.join(""),cursor:e}}}),this}),a(twttr.mixins.caretHelper)})}),provide("geo",function(a){using("_","util").as(function(b,_){twttr.provide("twttr.geo",{LOG_VERSION:3,UI_VERSION:2,LOCATION_CACHE_INTERVAL:3e4,BROWSER_GEO_BANNER_APPEAR_DELAY:500,BROWSER_GEO_BANNER_DISAPPEAR_INTERVAL:100,PLACE_SEARCH_AUTOCOMPLETE_DELAY:250,MAX_NEARBY_PLACES:12,MAX_NEARBY_NEIGHBORHOODS:5,MAX_PLACE_SEARCH_RESULTS:50,MAX_PLACE_AUTOCOMPLETE_RESULTS:8,PLACE_SEARCH_RESULTS_PER_PAGE:5,PLACE_CREATION_DEFAULT_ZOOM_LEVEL:15,SIMILAR_PLACES_MAX_ZOOM_LEVEL:17,ACCEPTABLE_LOCATION_ACCURACY:1e3,ACCEPTABLE_LOCATION_TIMEOUT:5e3,LOCATION_TIMEOUT:15e3,LOCATION_MAXIMUM_AGE:6e4,MAX_SIMILAR_PLACES:5,TARGET_POI_NAME_LENGTH:40,TARGET_PLACE_NAME_LENGTH:50,POI_MARKER_SIZE:{width:43,height:32},POI_MARKER_HOTSPOT:{x:14,y:33},POI_MAP_DEAD_ZONE:{left:4,top:24,right:6,bottom:0},geoEnabled:null,currentLocation:{},mapsTimeout:1e4,mapsListeners:[],Exceptions:{GeoSupportException:function(){this.msg=_("This browser does not support GeoLocation")}},mapsInitialized:function(){while(twttr.geo.mapsListeners.length){var a=twttr.geo.mapsListeners.shift();a()}},loadMaps:function(a){if(twttr.geo.mapsAvailable())a();else{twttr.geo.mapsListeners.push(a);if(twttr.geo.mapsListeners.length==1){var b=window.location.protocol==="https:"?"https://maps-api-ssl.google.com":"http://maps.google.com";b+="/maps/api/js?v=3.4&sensor=false&callback=twttr.geo.mapsInitialized",window.location.hostname.match(/^(.+\.)?twitter\.com$/)&&(b+="&client=free-twitter");var c=document.createElement("script");c.type="text/javascript",c.src=b,document.body.appendChild(c),setTimeout(twttr.geo.mapsInitialized,twttr.geo.mapsTimeout)}}},mapsAvailable:function(){return typeof google!="undefined"&&google.maps!==undefined},getBestContainer:function(a){if(!a)return{name:"",full_name:"",contained_within:[],place_type:"city",bounding_box:{type:"Polygon",coordinates:[[[-122.51368188,37.70813196],[-122.35845384,37.70813196],[-122.35845384,37.83245301],[-122.51368188,37.83245301]]]}};var b={name:a.part_of_name||"",full_name:a.part_of_name||"",contained_within:[],place_type:"city"};return a.contained_within&&twttr.every(a.contained_within,function(a){return b=a,a.place_type!="city"}),b},getPlaceFullAddressAndMapLink:function(a){var b=[twttr.geo.getPlaceAttribute(a,"street_address"),a.contained_within&&a.contained_within.length>0?a.contained_within[0].full_name:null];b=twttr.filter(b,function(a){return a}).join(", ");var c=a.place_type=="poi"?b:a.name+", "+b;return{full_address:b,map_link:"http://maps.google.com/maps?"+$.param({q:c})}},placesFromApi:function(a){var b=[];return a.each(function(a){b.push(a.data())}),b},getPlaceAttribute:function(a,b){return a.attributes&&a.attributes[b]||""},getPlaceDetails:function(a){var b=twttr.geo.getPlaceAttribute(a,"street_address");if(b)return b;switch(a.place_type){case"city":return _("a city");case"neighborhood":return _("a neighborhood");case"country":return _("a country");case"admin":return _("a state or province");default:return twttr.geo.getBestContainer(a).name}},getFullPlace:function(a){return $.extend({},a,{address:twttr.geo.getPlaceAttribute(a,"street_address"),container:twttr.geo.getBestContainer(a).full_name,phone:twttr.geo.getPlaceAttribute(a,"phone"),place_id:a.id,place_name:a.full_name},twttr.geo.getPlaceFullAddressAndMapLink(a))}}),a(twttr.geo)})}),provide("components/Autocomplete",function(a){using("_","util","constants").as(function(b,_){twttr.provide("twttr.users",{autocompleted:[]}),twttr.klass("twttr.components.Autocomplete",function(a){var c={limit:5,textarea:!1,preselect:!0};this.options=twttr.merge({},c,a),this.$input=$(this.options.input),this.$container=$('<ul class="autocomplete-container"></ul>').insertAfter(this.options.input),this._isCompletionsOpen=!1,twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_autocomplete")||b.util.params().autocomplete)&&this.registerEvents(),this.init()}).mixin(twttr.mixins.caretHelper).statics({cache:{},regCache:new twttr.cache.Simple,hashtagCache:{},_isCompletionsOpen:!1,nextCursor:-1,cursorCount:0,requestedUsers:!1,getAutocompletedUsers:function(a){!!twttr.currentUser;var c=this;if(twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_autocomplete")||b.util.params().autocomplete)){function d(a){return twttr.map(a,function(a,b){return[a.id,a.screenName,a.name,a.profileImageUrl]})}if(!this.requestedUsers){this.requestedUsers=!0;var e=twttr.caches.User.get("autocomplete_friends");e?(twttr.users.autocompleted=e,a&&a()):function(){function b(e){++c.cursorCount<=5&&twttr.currentUser?twttr.currentUser.friends({count:100,cursor:e,success:twttr.bind(c,function(c,e){twttr.components.Autocomplete.invalidateCache();if(c.isEmpty()){a&&a();return}c=d(c.toArray()),twttr.users.autocompleted.push.apply(twttr.users.autocompleted,c),twttr.components.Autocomplete.resetStorageCache(),e.response.next_cursor?b(e.response.next_cursor):a&&a()})}):a&&a()}twttr.currentUser&&twttr.components.Autocomplete.addToList([twttr.currentUser.id,twttr.currentUser.screenName,twttr.currentUser.name,twttr.currentUser.profileImageUrl]),b(twttr.components.Autocomplete.nextCursor)}()}else a&&a()}}}).methods(twttr.EventProvider).statics({username:/^[@＠]([a-zA-Z0-9_]{1,20})$/,hashtag:/^[#＃]([a-zA-Z0-9_]+)/,transformAvatar:/(.+)(?:_normal)\.(\w+)$/,_matchesContiguously:function(a,b){var c=twttr.components.Autocomplete,d=c._matchesContiguouslyCaches.matchers=c._matchesContiguouslyCaches.matchers||{},e=c._matchesContiguouslyCaches.results=c._matchesContiguouslyCaches.results||{};return e[a]&&e[a][b]!==undefined?e[a][b]:(d[a]=d[a]||new RegExp("^"+a,"i"),e[a]=e[a]||{},e[a][b]=d[a].test(b.replace(/\W/,"")),e[a][b])},_matchesConsecutively:function(a,b){var c=twttr.components.Autocomplete,d=c._matchesConsecutivelyCaches.matchers=c._matchesConsecutivelyCaches.matchers||{},e=c._matchesConsecutivelyCaches.results=c._matchesConsecutivelyCaches.results||{};return e[a]&&e[a][b]!==undefined?e[a][b]:(d[a]=d[a]||new RegExp(a.split("").join(".*"),"i"),e[a]=e[a]||{},e[a][b]=d[a].test(b),e[a][b])},levenSorter:function(a,c){var d=twttr.components.Autocomplete._currentPrefix,e=b.util.leven(a,d),f=b.util.leven(c,d);return e<f?-1:e>f?1:0},sorter:function(a,c){var d=twttr.components.Autocomplete._matchesContiguously,e=twttr.components.Autocomplete._matchesConsecutively,f=twttr.components.Autocomplete._currentPrefix;if(d(f,a[1])&&!d(f,c[1]))return-1;if(!d(f,a[1])&&d(f,c[1]))return 1;if(d(f,a[2])&&!d(f,c[2]))return-1;if(!d(f,a[2])&&d(f,c[2]))return 1;if(e(f,a[1])&&!e(f,c[1]))return-1;if(!e(f,a[1])&&e(f,c[1]))return 1;if(e(f,a[2])&&!e(f,c[2]))return-1;if(!e(f,a[2])&&e(f,c[2]))return 1;var g=b.util.leven(a[1],f),i=b.util.leven(c[1],f);if(g<i)return-1;if(g>i)return 1;var j=b.util.leven(a[2],f),k=b.util.leven(c[2],f);return j<k?-1:j>k?1:0},_htmlEscapeAndStrongifyMatches:function(a,b){return h(a.replace(b,"<strong>$1</strong>")).replace(/&lt;(\/?strong)&gt;/g,"<$1>")}}).statics({_matchesContiguouslyCaches:{results:{},matchers:{}},_matchesConsecutivelyCaches:{results:{},matchers:{}}}).statics({invalidateCache:function(a){if(!a){this.cache={},twttr.components.Autocomplete._matchesConsecutivelyCaches.results={},twttr.components.Autocomplete._matchesConsecutivelyCaches.matchers={},twttr.components.Autocomplete._matchesContiguouslyCaches.results={},twttr.components.Autocomplete._matchesContiguouslyCaches.matchers={};return}var b="";a=a.split("");for(var c=a.length-1;c>=0;c--)b+=a.shift(),delete this.cache[b],delete twttr.components.Autocomplete._matchesConsecutivelyCaches.results[b],delete twttr.components.Autocomplete._matchesConsecutivelyCaches.matchers[b],delete twttr.components.Autocomplete._matchesContiguouslyCaches.results[b],delete twttr.components.Autocomplete._matchesContiguouslyCaches.matchers[b]},resetStorageCache:function(){var a=[],b=0;twttr.users.autocompleted.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0});for(var c=0,d=twttr.users.autocompleted.length;c<d;c++){if(twttr.users.autocompleted[c+1]&&twttr.users.autocompleted[c][0]==twttr.users.autocompleted[c+1][0])continue;a[b++]=twttr.users.autocompleted[c]}twttr.users.autocompleted=a,twttr.caches.User.set("autocomplete_friends",twttr.users.autocompleted,2592e5)},addToList:function(a){var b=!1;for(var c=0,d=twttr.users.autocompleted.length;c<d;++c)if(twttr.users.autocompleted[c][1]===a[1]){b=!0;break}b||twttr.users.autocompleted.push(a),twttr.components.Autocomplete.invalidateCache(a[1]),this.resetStorageCache()}}).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.bind("close",twttr.bind(this,function(){this.hide()}));var b="keypress"+($.browser.webkit||$.browser.msie?" keydown":"");this.$input.bind("keyup click",twttr.bind(this,this.keyup)),this.$input.bind("change",twttr.bind(this,this.change)),this.$input.bind(b,twttr.bind(this,this.keypress)),this.$container.delegate("li.selectable","mouseenter",function(b){a.$container.find("li.selected").removeClass("selected"),$(this).addClass("selected")}).delegate("li.selectable","click",twttr.bind(this,function(a){a.preventDefault();if($(a.target).hasClass("twttr-follow-notice"))return;$(a.target).addClass("selected").siblings(".selected").removeClass("selected"),this.select(),this.focus()})),this.$input.bind("keydown",function(b){if(b.ctrlKey)return;if(!a._isCompletionsOpen&&b.which==twttr.constants.keyCodes.escape)return;b.stopPropagation()}),this.position()},focus:function(){this.$input.focus()},set:function(a){if(this.options.textarea){var b=this.replaceCurrentWord(a);this.$input.val(b.value),this.setCaretPosition(b.cursor)}else this.$input.val(a);this.$input.change()},hide:function(){setTimeout(twttr.bind(this,function(){this.$container.css("visibility","hidden"),this._isCompletionsOpen&&this.trigger("hide"),this._isCompletionsOpen=!1,this.constructor._isCompletionsOpen=!1}),0)},show:function(){this.$container.css("visibility","visible"),this.constructor._isCompletionsOpen=!0,this._isCompletionsOpen=!0},keypress:function(a){if(a.ctrlKey)return;switch(a.keyCode){case b.constants.keyCodes.tab:case b.constants.keyCodes.enter:case b.constants.keyCodes.escape:if(!this._isCompletionsOpen)return;a.preventDefault();break;case b.constants.keyCodes.upArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.previous(),a.preventDefault());break;case b.constants.keyCodes.downArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.next(),a.preventDefault())}a.stopPropagation(),setTimeout(twttr.bind(this,this.change),0)},keyup:function(a){if(a.ctrlKey)return;a.stopPropagation();if(a&&(a.keyCode===b.constants.keyCodes.tab||a.keyCode===b.constants.keyCodes.shift)&&!this._isCompletionsOpen)return;var c="",d=!1;if(this.options.textarea){var e=this.getCaret();c=this.getCurrentWord(e).replace(twttr.constants.regexps.dirMark,""),c.match(this.constructor.username)?(c=RegExp.$1,this.autocompleteType="username",d=!0):c.match(this.constructor.hashtag)&&(c=RegExp.$1,this.autocompleteType="hashtag",d=!0)}else this.autocompleteType="username",c=this.$input.val(),d=!0;if(c.length&&d)switch(a.keyCode){case b.constants.keyCodes.escape:this.hide(),a.stopPropagation();break;case b.constants.keyCodes.upArrow:case b.constants.keyCodes.downArrow:break;case b.constants.keyCodes.tab:case b.constants.keyCodes.enter:!a.shiftKey&&this._isCompletionsOpen&&this.select();break;default:this.autocompleteType=="hashtag"?this.lookUpHashtag(c):this.lookUpUser(c)}else this.hide()},select:function(){var a=this.$container.find("li.selected"),b=a.find("b").text(),c=a.find("img").attr("src");this.set(b),this.hide();if(this.autocompleteType==="username"){var d=a.attr("data-user-screenname"),e=a.attr("data-user-id");this.trigger("select",[this.autocompleteType,b,c,d,e])}else this.trigger("select",[this.autocompleteType,b,c])},change:function(){var a=this.getCurrentText(),b=this.lastText||"";if(a===b)return;var c=0,d=a.length,e=b.length,f=Math.min(d,this.getCaret());for(var g=0;g<f;g++){if(b.charAt(g)!==a.charAt(g))break;c+=1}var i=0;for(var g=1;g<=d-c;g++){if(b.charAt(e-g)!==a.charAt(d-g))break;i+=1}var j=c+i;this.lastText=a,this.trigger("substitution",[c,e-j,d-j,a])},sanitize:function(a){return this.constructor._currentPrefix=a.replace(/ /g,""),this.constructor._currentPrefix},appendNotice:function(a){return twttr.currentUser&&twttr.currentUser.friendsCount>500&&(a+='<li class="twttr-follow-notice">'+_("<em>Showing most recent 500 you're following</em>")+"</li>"),a},lookUpHashtag:function(a){var b=this;a=this.sanitize(a);var c=this.constructor.hashtagCache[a];if(c){this.$container.html(c),this.$container.find("li.selectable:first").addClass("selected"),this.show();return}var d=function(a){if(a.match(b.regexPrefix))return a},e=twttr.merge({},this.getFilteredResults(a,twttr.suggestedHashtags||[],d,this.constructor.levenSorter),!0),f=this.getItemTemplate(e,function(a,c){return'<li class="hashtag-completion selectable"><b>#'+b.constructor._htmlEscapeAndStrongifyMatches(a,c)+"</b></li>"}).slice(0,this.options.limit);if(f.length>0){var g=f.join("");this.constructor.hashtagCache[a]=g,this.$container.html(g),this.$container.find("li.selectable:first").addClass("selected"),this.show()}else this.hide()},lookUpUser:function(a){var b=this;a=this.sanitize(a);var c=this.constructor.cache[a];if(c){this.$container.html(c),this.options.preselect&&this.$container.find("li.selectable:first").addClass("selected"),this.show();return}var d=function(a){if(a[1].match(b.regexPrefix))return a;if(a[2].replace(/ /g,"").match(b.regexPrefix))return a},e=twttr.merge({},this.getFilteredResults(a,twttr.users.autocompleted,d,this.constructor.sorter),!0),f=this.getItemTemplate(e,function(a,c){var d=a[3].replace(b.constructor.transformAvatar,"$1_mini.$2");return'<li data-user-id="'+h(a[0])+'" data-user-screenname="'+h(a[1])+'" class="selectable"><img src="'+h(d)+'"/> <span><b>@'+b.constructor._htmlEscapeAndStrongifyMatches(a[1],c)+"</b> <em>"+b.constructor._htmlEscapeAndStrongifyMatches(a[2],c)+"</em></span></li>"}).slice(0,this.options.limit);this.options.defaultResults&&twttr.each(this.options.defaultResults,function(b){(!b.show||b.show(a,e))&&f.splice(f.length,0,b.format(a))});if(f.length>0){var g=f.join("");g=this.appendNotice(g),this.constructor.cache[a]=g,this.$container.html(g),this.options.preselect&&this.$container.find("li.selectable:first").addClass("selected"),this.show()}else this.hide()},position:function(){setTimeout(twttr.bind(this,function(){if(this.$input.offsetParent().length){var a=this.$input.position(),b=Math.round(a.top+this.$input.innerHeight()+1),c=Math.round(a.left);this.$container.css({top:b,left:c})}}),0),this.$container.css({width:this.$input.innerWidth()})},getItemTemplate:function(a,b){var c=new RegExp("("+this.constructor._currentPrefix.split("").join("|")+")","gi");return twttr.map(a,twttr.bind(this,function(a,d){return b(a,c)}),null,"array")},getFilteredResults:function(a,b,c,d){var e=this,f,g=this.constructor.regCache.get(a);if(g)this.regexPrefix=g;else{var i=a.split(""),j="^"+i.join("\\w*");this.regexPrefix=new RegExp(j,"i"),this.constructor.regCache.set(a,this.regexPrefix)}var k=twttr.filter(b,c);return d?k.sort(d):k},next:function(){var a=this.$container.find("li.selected");if(!a.length){this.$container.find("li.selectable:first").addClass("selected");return}a=a.removeClass("selected").nextAll("li.selectable:first"),a.length?a.addClass("selected"):this.$container.find("li.selectable:first").addClass("selected")},previous:function(){var a=this.$container.find("li.selected");if(!a.length){this.$container.find("li.selectable:last").addClass("selected");return}a=a.removeClass("selected").prevAll("li.selectable:first"),a.length?a.addClass("selected"):this.$container.find("li.selectable:last").addClass("selected")}}),a(twttr.components.Autocomplete)})}),provide("components/Typeahead",function(a){using("constants","mixins/typeaheadScribing").as(function(b,c,d){var e=twttr.klass.component("twttr.components.Typeahead",function(a){var b=this,c={pauseInterval:300,closeDelay:500,select:$.noop};this.options=twttr.merge({},c,a),this.datasources=this.options.datasources,this._select=this.options.select,this.val=this._val="",this.typingPauseDetectionTimeoutId=null,this.$input=$(this.options.input),this.$inputHint=$(this.options.inputHint),this.$node=$((new twttr.views.Typeahead).html()).insertAfter(this.$inputHint),this._isCompletionsOpen=this._wasCompletionsOpen=!1,this._keystrokes=0,this._localLatencies=[],this._remoteLatencies=[],this._lastTimerEvent="none",this._statsTimerStart=0,this._statsCumulativeTime=0,this._resultsDirty=!1,this._lastHint="",this._placeholder=this.$input.attr("placeholder"),this.resizeTimer=null,this.heightLimit={1:0,2:1,3:2,4:3,5:5,6:6};var d=twttr.abdecider.choose("typeahead_271");this.inBucket=d!=="control"&&(d==="typeahead"||twttr.decider.isAvailable("swift_typeahead")),this.registerTypeaheadEvents();if(twttr.loggedIn&&(twttr.decider.isAvailable("typeahead")||this.inBucket)){var e=this.$find(".js-typeahead-results");twttr.each(this.datasources,function(a){a.bind("show",function(a,c){c===b._val&&b.$input.hasClass("focus")&&b.show()}),a.bind("scribeLocalStorageLatency",twttr.bind(b,b.scribeLocalStorageLatency)),a.bind("localLatency",twttr.bind(b,b.addLocalLatency)),a.bind("remoteLatency",twttr.bind(b,b.addRemoteLatency)),a.bind("resultsDirty",twttr.bind(b,b.resultsDirty)),a.bind("hint",twttr.bind(b,b.hint)),a.init(),e.append(a.$node)}),this.bind("hint",twttr.bind(this,this.hint)),this.resizeHeight(),this.executeQueryIfAlreadyFocused()}}).deciderKey("typeahead").mixin(d).methods({registerTypeaheadEvents:function(){var a=this,b="keypress"+($.browser.webkit||$.browser.msie?" keydown":"");this.$input.bind("keyup click",twttr.bind(this,this.keyup)),this.$input.bind(b,twttr.bind(this,this.keypress)),this.$node.delegate(".js-selectable","mouseenter",function(b){a.$find(".selected").removeClass("selected"),$(this).addClass("selected");var c=$(this).data("hint");c=c?c:"",a.trigger("hint",[c,a.$input.val()])}).delegate(".js-selectable","click",twttr.bind(this,function(a){this.select(a)})),this.$input.bind("keydown",function(b){b.keyCode===27&&(a.$input.removeClass("focus"),a.$inputHint.removeClass("focus"),a.hide(),a.$input.trigger("blur")),clearTimeout(a.typingPauseDetectionTimeoutId)}),this.$input.bind("focus",twttr.bind(this,this.focus)),this.$input.bind("blur",twttr.bind(this,this.blur)),this.$node.bind({mouseenter:function(){a.mouseOverDropDown=!0},mouseleave:function(){a.mouseOverDropDown=!1}}),twttr.widget.Dialog.bind("close",twttr.bind(this,function(){this.hide()})),$(window).resize(function(){clearTimeout(a.resizeTimer),a.resizeTimer=setTimeout(twttr.bind(a,a.resizeHeight),100)}),$(document).click(function(b){a.$node.parent().find($(b.target))||a.hide()}),$(document).bind("searchPlaceholderUpdate",function(b,c){a._placeholder=c})},hint:function(a,b,c){if(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket){var d=this.$input.val();d.toLowerCase()===c.toLowerCase()&&this.inputIsFocused()&&this.$input[0].scrollWidth<=this.$input.width()?this.$inputHint.val(d+b.slice(d.length)):this.$inputHint.val(""),c===""&&b!==""&&this.$input.attr("placeholder",""),this.$inputHint.css("direction",this.$input.css("direction"))}},resultsDirty:function(){this._resultsDirty=!0;if(this.$input.hasClass("focus")){var a=this.$input.val();this.queryLocalData(a),this.queryRemoteData(a)}},executeQueryIfAlreadyFocused:function(){this.inputIsFocused()&&(this.$input.addClass("focus"),this.$inputHint.addClass("focus"),this.focus())},focus:function(a){var b=this.$input.val();b===this._val&&this._wasCompletionsOpen&&!this._resultsDirty?(this.show(),this._lastHint!==""&&(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket)&&(this.$inputHint.val(this._lastHint),this.$input.attr("placeholder",""))):setTimeout(twttr.bind(this,function(){this.queryLocalData(b),this.typingPauseDetectionTimeoutId=setTimeout(twttr.bind(this,function(){this.queryRemoteData(b)}),this.options.pauseInterval)}),0),this.startStatsTimer()},blur:function(a){this._lastHint=this.$inputHint.val();if(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket)this.$inputHint.val(""),this.$input.attr("placeholder",this._placeholder);!this.mouseOverDropDown&&!twttr.search.mouseOverMagnifying&&setTimeout(twttr.bind(this,function(){this.hide()}),this.options.closeDelay),this.pauseStatsTimer()},inputIsFocused:function(){return this.$input.is(":focus")||this.$input[0]==document.activeElement},resizeHeight:function(){var a=$(window).height(),b=Math.ceil(a/100),c=b in this.heightLimit?this.heightLimit[b]:b<2?1:6;twttr.each(this.datasources,function(a){a.trigger("newLimit",c)})},autocompleteHint:function(a){if(this._isCompletionsOpen&&!a.shiftKey&&this.isCursorAtEnd()){var c=this.$input.css("direction")==="rtl";if(c&&a.keyCode===b.constants.keyCodes.rightArrow||!c&&a.keyCode===b.constants.keyCodes.leftArrow)return;var d=this.$node.find(".js-selectable.selected[data-hint]:visible").first();if(d.length===0&&this.$node.find(".js-selectable.selected").length===1)return;d.length===0&&(d=this.$node.find(".js-selectable[data-hint]:visible").first()),this.$input.val(d.data("hint")),a.preventDefault()}},isCursorAtEnd:function(){var a;return document.selection?(this.$input.focus(),a=document.selection.createRange(),a.moveStart("character",-this.$input[0].value.length),this.$input.val().length-a.text.length===0):typeof this.$input[0].selectionStart=="number"?this.$input.val().length-this.$input[0].selectionStart===0:!0},hide:function(){setTimeout(twttr.bind(this,function(){this._isCompletionsOpen&&(this.$node.hide(),this._wasCompletionsOpen=this._isCompletionsOpen,this._isCompletionsOpen&&this.trigger("hide"),this._isCompletionsOpen=!1)}),0)},show:function(){this.$find(".js-selectable").length>0&&(this.$node.show(),this._isCompletionsOpen=!0)},keypress:function(a){a.stopPropagation();switch(a.keyCode){case b.constants.keyCodes.enter:if(this.inputIsFocused()&&!a.shiftKey&&a.type==="keypress"||this.inputIsFocused()&&!a.shiftKey&&a.type==="keydown"&&(a.metaKey||a.ctrlKey))a.preventDefault(),this.select(a);break;case b.constants.keyCodes.escape:this._isCompletionsOpen&&a.preventDefault();break;case b.constants.keyCodes.rightArrow:if(a.charCode===39)break;case b.constants.keyCodes.leftArrow:case b.constants.keyCodes.tab:this.autocompleteHint(a);break;case b.constants.keyCodes.upArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.previous(),a.preventDefault());break;case b.constants.keyCodes.downArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.next(),a.preventDefault())}},keyup:function(a){a.type!=="click"&&(a.stopPropagation(),a.keyCode!==b.constants.keyCodes.enter&&this._keystrokes++);if(a&&(a.keyCode===b.constants.keyCodes.tab||a.keyCode===b.constants.keyCodes.shift)&&!this._isCompletionsOpen)return;val=this.$input.val();var c=this;if(val!==this._val||this._resultsDirty)this.hide(),setTimeout(twttr.bind(this,function(){this.queryLocalData(val),this.typingPauseDetectionTimeoutId=setTimeout(function(){c.queryRemoteData(val)},this.options.pauseInterval)}),0),this._resultsDirty=!1},queryLocalData:function(a){twttr.loggedIn&&(twttr.decider.isAvailable("typeahead_local_queries")||this.inBucket)&&(this._val=a,twttr.each(this.datasources,function(b){b.localQueryAndRenderResults(a)}))},queryRemoteData:function(a){var b=this;twttr.loggedIn&&(twttr.decider.isAvailable("typeahead_remote_queries")||this.inBucket)&&twttr.each(b.datasources,function(b){b.remoteQueryAndRenderResults(a)})},select:function(a){var b=this.$find(".selected"),c=this.$input.val();if(c===""&&b.length===0)return;var d=a.metaKey||a.ctrlKey;this.$input.val(""),this.$inputHint.val(""),this.hide(),this.$input.blur(),trackClient({section:"top_nav",component:"searchbox",action:"search"},{query:c}),this.scribeSelect(a,c,b,d),this._select(a,c,b,d)},next:function(){var a=this.$find(".selected").removeClass("selected"),b=this.$find(".js-selectable:visible"),c=b.index(a),d=c===b.length?0:c+1;d!==b.length&&$(b[d]).addClass("selected");var e=d===b.length,f=$(b[d]),g=$(b[0]);this.hintForNextOrPreviousItem(e,f,g)},previous:function(){var a=this.$find(".selected").removeClass("selected"),b=this.$find(".js-selectable:visible"),c=b.index(a),d=c===-1?b.length-1:c-1;d!==-1&&$(b[d]).addClass("selected");var e=d===-1,f=$(b[d]),g=$(b[0]);this.hintForNextOrPreviousItem(e,f,g)},hintForNextOrPreviousItem:function(a,b,c){var d=this.$input.val(),e=b.data("hint"),f="";e?f=e:a&&(f=c.data("hint")),this.trigger("hint",[f,d])}});a(e)})}),provide("components/TypeaheadDatasource",function(a){using().as(function(b,_){var c=twttr.klass.component("twttr.components.TypeaheadDatasource").methods({init:$.noop,localQueryAndRenderResults:$.noop,remoteQueryAndRenderResults:$.noop,inBucket:function(){var a=twttr.abdecider.choose("typeahead_271");return a!=="control"&&(a==="typeahead"||twttr.decider.isAvailable("swift_typeahead"))},tokenizeName:function(a){return $.trim(a.replace(/[@#]/,"")).toLowerCase().split(/[\s-_]+/)},tokenizeScreenName:function(a){return $.trim(a).toLowerCase().split(/_/)},tokenizeText:function(a){return $.trim(a).toLowerCase().split(/[\s-_]+/)},queryTopicAndAccountRemoteApi:function(a,b,c){twttr.API.User.typeaheadGlobal(a,{count:b,success:function(b){$(document).trigger("accountResults",[a,c,b.users]),$(document).trigger("topicResults",[a,c,b.topics])}})},updateStorageCache:function(){var a=2592e5;twttr.caches.User.set("typeahead_friends",twttr.users.typeahead,a),twttr.caches.User.set("typeahead_people_from_api",twttr.users.typeahead.length-1||0)},reset:function(){twttr.caches.User.reset()},get:function(a){twttr.caches.User.get(a)},set:function(a,b,c){var d=2592e5;c=c||d,twttr.caches.User.set(a,b,c)},update:function(a,b){twttr.caches.User.update(a,b)},"delete":function(a){twttr.caches.User.set(a,null,-1)}});a(c)})}),provide("components/TypeaheadSearchQueryDatasource",function(a){using("components/TypeaheadDatasource").as(function(b,_){var c=twttr.klass("twttr.components.TypeaheadSearchQueryDatasource",function(a){var b={limit:6};this.options=twttr.merge({},b,a),this.$node=(new twttr.views.TypeaheadSavedSearches).render(),this.$results=this.$find("ul"),this.savedSearches=[],this._version=10,this._lastQuery=""}).subclassOf(b.components.TypeaheadDatasource).deciderKey("typeahead_saved_searches").methods({init:function(){var a=this;this.$node.hide(),this._version!==twttr.caches.User.get("saved_searches_version")&&(twttr.caches.User.set("saved_searches",null,-1),twttr.caches.User.set("saved_searches_version",this._version)),this.cacheSavedSearches(),twttr.API.SavedSearch.bind("create",function(b,c){b.type==="create"&&(($.inArray(c),a.savedSearches)&&a.savedSearches.push(c),twttr.caches.User.update("saved_searches",a.savedSearches),a.savedSearches.length===1&&$(".global-nav .js-search-form").addClass("has-saved-searches"),a.updateOrDirtyResults())}),twttr.API.SavedSearch.bind("delete",function(b,c){b.type==="delete"&&(a.savedSearches=a.savedSearches.filter(function(a){return a.query!=c.query}),twttr.caches.User.update("saved_searches",a.savedSearches),a.savedSearches.length===0&&$(".global-nav .js-search-form").removeClass("has-saved-searches"),a.updateOrDirtyResults())}),this.bindLimitBasedOnWindowHeight(),this.bindRemoteApiListener()},bindRemoteApiListener:function(){var a=this;(twttr.decider.isAvailable("typeahead_searches")||this.inBucket())&&$(document).bind("topicResults",function(b,c,d,e){var c=a._lastQuery,f="",g=[];if(c==="")g=a.savedSearches;else{e.length&&twttr.each(e,function(b){var c=b.topic,d=b.rounded_score;a.isSavedSearch(c)||g.push(a.mapQuerySuggestionsToApiSearchItem(c,d))});if(twttr.decider.isAvailable("typeahead_new_style_saved_searches")||a.inBucket())g=g.concat(twttr.filter(a.savedSearches,twttr.bind(a,a.matcher(c))));g=g.slice(0,Math.min(4,a.options.limit))}f=g.length>0?g[0].name:"",a.trigger("hint",[f,c]),a.render(g,c);var i=new Date-d;a.trigger("remoteLatency",i)})},bindLimitBasedOnWindowHeight:function(){this.bind("newLimit",twttr.bind(this,function(a,b){this.options.limit=b}))},updateOrDirtyResults:function(){this.$node.is(":visible")?this.localQueryAndRenderResults(this._lastQuery):this.trigger("resultsDirty")},cacheSavedSearches:function(){var a=this;savedSearches=twttr.caches.User.get("saved_searches"),savedSearches?a.savedSearches=savedSearches:twttr.currentUser.savedSearches(function(b){a.savedSearches=b.array,$(".global-nav .js-search-form").addClass("has-saved-searches");var c=36e5;twttr.caches.User.set("saved_searches",a.savedSearches,c),a.trigger("resultsDirty")})},mapQuerySuggestionsToApiSearchItem:function(a,b){return{debug_info:twttr.decider.isAvailable("typeahead_debug_info")?' title="score = '+b+'"':"",search_results_path:twttr.router.searchResultsPath({query:a}),query:a,name:a,search_query_source:"typeahead_click"}},localQueryAndRenderResults:function(a){if(twttr.decider.isAvailable("typeahead_saved_searches")||this.inBucket()){var b=new Date;this._lastQuery=a;var c=twttr.filter(this.savedSearches,twttr.bind(this,this.matcher(a)));this.render(c,a);var d=c[0]?c[0].name:"";this.trigger("hint",[d,a]);var e=new Date-b;this.trigger("localLatency",e)}},remoteQueryAndRenderResults:$.noop,matcher:function(a){return function(b){if(b.name.toLowerCase().indexOf(a.toLowerCase())===0)return b}},ranker:function(a){return function(b,c){return a.length/c.length+c.matched_count-(a.length/b.length+b.matched_count)}},renderSearch:function(a){return(new twttr.views.TypeaheadSearchItem(a)).html()},render:function(a,b){this.$results.attr("data-search-query",b.toLowerCase());var c=twttr.map(a,this.renderSearch);if(c.length>0){var d=c.join("");this.$results.html(d),this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b)}else this.$results.empty(),this.$node.hide(),this.$node.removeClass("has-results")},isSavedSearch:function(a){for(var b=0,c=this.savedSearches.length;b<c;b++)if(this.savedSearches[b].name.toLowerCase()===a)return!0}});a(c)})}),provide("components/TypeaheadAccountsDatasource",function(a){using("components/TypeaheadDatasource").as(function(b,_){twttr.provide("twttr.users",{typeahead:{adjacencyList:{},userHash:{},length:0}});var c=twttr.klass.component("twttr.components.TypeaheadAccountsDatasource",function(a){var b={limit:6};this.options=twttr.merge({},b,a),this.$node=(new twttr.views.TypeaheadAccounts).render(),this.$results=this.$find("ul"),this.weights={PROFILE_VISIT_BOOST:10,UNCACHED_PROFILE_VISIT:75,FOLLOW:100,UNBLOCK:50,SELF:250},this.IE8_ACCOUNT_LIMIT=1e3,this.ACCOUNT_LIMIT=2500,this.addUsersQueue=[],this.blocks={},this.userIdsCurrentlyRendered={},this._version=66,this.isFullySupportedBrowser=!($.browser.msie&&parseInt($.browser.version,10)<8)}).subclassOf(b.components.TypeaheadDatasource).deciderKey("typeahead_people").methods({init:function(){this.$node.hide(),this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_local_queries")||this.inBucket())&&(this.clearCacheIfNewVersion(),this.bindRemoteApiListener(),this.bindProfileVisitHandler(),this.bindFollowEventHandler(),this.bindBlockEventHandler(),this.bindUnblockEventHandler(),this.bindLimitBasedOnWindowHeight(),this.getTypeaheadUsers(),this.userIdsCurrentlyRendered={})},clearCacheIfNewVersion:function(){this._version!==twttr.caches.User.get("typeahead_people_version")&&(twttr.caches.User.set("typeahead_friends",null,-1),twttr.caches.User.set("blocks",null,-1),twttr.caches.User.set("typeahead_people_version",this._version),twttr.caches.User.set("typeahead_people_from_api",0),twttr.caches.User.set("typeahead_people_followed",0),twttr.caches.User.set("typeahead_profile_visits",0),twttr.caches.User.set("typeahead_people_blocked",0),twttr.caches.User.set("typeahead_people_unblocked",0))},mapJavaScriptUser:function(a,b){return{id:a.id,screen_name:a.screenName,name:a.name,profile_image_url:a.profileImageUrl,profile_image_url_https:a.profileImageUrlHttps,verified:a.verified,tokens:a.tokens||this.tokenizeJavascriptUserObject(a),weight:b||a.weight||0}},mapApiUser:function(a,b){return{id:a.id,screen_name:a.screen_name,name:a.name,profile_image_url:a.profile_image_url,profile_image_url_https:a.profile_image_url_https,verified:a.verified,tokens:a.tokens,weight:b||parseFloat(a.rounded_graph_weight)||0}},bindRemoteApiListener:function(){$(document).bind("accountResults",twttr.bind(this,function(a,b,c,d){if(this.$results.attr("data-query")===b.toLowerCase()){d=twttr.filter(d,twttr.bind(this,this.filterBlockedUsers)),d=twttr.filter(d,twttr.bind(this,this.filterAlreadyDisplayedUsers)),this.renderRemoteUsers(d,b);var e=new Date-c;this.trigger("remoteLatency",e)}}))},bindProfileVisitHandler:function(){var a=this;$(document).bind("profileVisit",function(b,c){if(!c.screenName)return;var d=a.removeFromList(a.mapJavaScriptUser(c));d?(d.tokens=a.tokenizeJavascriptUserObject(d),a.addToList(a.mapApiUser(d,d.weight+a.weights.PROFILE_VISIT_BOOST))):(c.tokens=a.tokenizeJavascriptUserObject(c),a.addToList(a.mapJavaScriptUser(c,a.weights.UNCACHED_PROFILE_VISIT)));var e=a.get("typeahead_profile_visits")||0;a.set("typeahead_profile_visits",e+1)})},bindFollowEventHandler:function(){var a=this;twttr.API.User.bind("follow",function(b,c){a.addToList(a.mapJavaScriptUser(c,a.weights.FOLLOW)),a.set("typeahead_people_followed",a.get("typeahead_people_followed")+1),a.trigger("resultsDirty")})},bindBlockEventHandler:function(){var a=this;twttr.API.User.bind("block",function(b,c){a.blocks[c.id]=c,a.update("blocks",a.blocks),a.removeFromList(a.mapJavaScriptUser(c)),a.set("typeahead_people_blocked",a.get("typeahead_people_blocked")+1),a.trigger("resultsDirty")})},bindUnblockEventHandler:function(){var a=this;twttr.API.User.bind("unblock",function(b,c){delete a.blocks[c.id],a.update("blocks",a.blocks),a.addToList(a.mapJavaScriptUser(c,a.weights.UNBLOCK)),a.set("typeahead_people_unblocked",a.get("typeahead_people_unblocked")+1),a.trigger("resultsDirty")})},bindLimitBasedOnWindowHeight:function(){this.bind("newLimit",twttr.bind(this,function(a,b){this.options.limit=b}))},localQueryAndRenderResults:function(a){this.userIdsCurrentlyRendered={},this.$results.attr("data-query",a.toLowerCase());if(this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_local_queries")||this.inBucket())){var b=new Date,c;a.length&&twttr.users.typeahead?(processedQuery=this.processQuery(a),c=this.getPossiblyMatchingAccounts(processedQuery),c=twttr.filter(c,twttr.bind(this,this.matcher(processedQuery,twttr.users.typeahead.length))),c=twttr.filter(c,twttr.bind(this,this.filterBlockedUsers)),c=c.sort(this.ranker),c=c.slice(0,this.options.limit)):c=[],this.renderLocalUsers(c,a);var d=new Date-b;this.trigger("localLatency",d)}},remoteQueryAndRenderResults:function(a){var b=this;if(this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_remote_queries")||this.inBucket())){var c=new Date,d;a.length&&this.queryTopicAndAccountRemoteApi(a,this.options.limit+2,c)}},processQuery:function(a){var b=this.tokenizeText(a);return{raw:a,length:a.length,terms:twttr.map(this.tokenizeText(a),function(a){return{val:a}})}},getUserObjectsFromIds:function(a){var b=[],c=twttr.users.typeahead.userHash;for(var d=0,e=a.length;d<e;d++)$.inArray(c[a[d]],b)===-1&&b.push(c[a[d]]);return b},getPossiblyMatchingAccounts:function(a){var b={},c={};for(var d=0,e=a.terms.length;d<e;d++){var f=a.terms[d],g=f.val[0],i=twttr.users.typeahead.adjacencyList[g];f&&i&&!b[g]&&(b[g]=!0,twttr.map(i,function(a){c[a]=!0}))}var j=[];return $.each(c,function(a){j.push(a)}),this.getUserObjectsFromIds(j)},matcher:function(a,b){return function(b){var c=b.tokens,d=[];for(var e=0,f=c.length;e<f;e++)for(var g=0,i=a.terms.length;g<i;g++)c[e].token.indexOf(a.terms[g].val)===0&&d.push(g);b.matchedCount=$.unique(d).length;if(b.matchedCount===a.terms.length)return b}},ranker:function(a,b){return b.weight-a.weight},renderLocalUsers:function(a,b){var c=twttr.map(a,twttr.bind(this,this.renderAccount));b&&a.length&&c.push((new twttr.views.TypeaheadAccountsShortcut({query:b})).html()),this.$results.html(c.join("")),c.length>0?(this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b)):(this.$node.hide(),this.$node.removeClass("has-results"))},renderRemoteUsers:function(a,b){var c=this.$results.find('li a[data-shortcut="true"]').length,d=this.$results.find("li").length-c;a=a.slice(0,Math.max(0,this.options.limit-d));var e=twttr.map(a,twttr.bind(this,this.renderAccount));b&&c===0&&a.length?(e.push((new twttr.views.TypeaheadAccountsShortcut({query:b})).html()),this.$results.html(e.join(""))):$(e.join("")).insertBefore(this.$results.find(".js-shortcut")),e.length>0&&(this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b))},tokenizeJavascriptUserObject:function(a){var b=this.tokenizeScreenName(a.screenName).concat(["@"+a.screenName],this.tokenizeName(a.name));return twttr.map(b,function(a){return{token:a}})},mapApiUsers:function(a){var b=this;return twttr.map(a,function(a,c){return b.mapApiUser(a)})},addCurrentUser:function(){if(twttr.currentUser){var a=twttr.currentUser;a.tokens=this.tokenizeJavascriptUserObject(a),this.addToList(this.mapJavaScriptUser(twttr.currentUser,this.weights.SELF))}},getTypeaheadUsers:function(){if(twttr.decider.isAvailable("typeahead_local_queries")||this.inBucket())if(!this.requestedUsers){var a=this;this.requestedUsers=!0;var b=twttr.caches.User.get("typeahead_people_from_api"),c=+(new Date);twttr.users.typeahead=twttr.caches.User.get("typeahead_friends"),b&&b!==0&&!!twttr.users.typeahead?(this.trigger("scribeLocalStorageLatency",["load",+(new Date)-c]),this.processQueuedUsers(),this.trigger("resultsDirty")):twttr.API.User.typeaheadSocial(twttr.currentUser.id,{count:$.browser.msie&&parseInt($.browser.version,10)===8?a.IE8_ACCOUNT_LIMIT:a.ACCOUNT_LIMIT,success:function(b){b.length&&(b=a.mapApiUsers(b),a.getBlockedUsers(function(){b=a.filterBlockedUsers(b);var c=twttr.is.def(twttr.users.typeahead)?twttr.users.typeahead:{adjacencyList:{},userHash:{},length:0};twttr.users.typeahead=a.preprocessUsers(b,c),a.addCurrentUser();var d=+(new Date);a.updateStorageCache(),a.trigger("scribeLocalStorageLatency",["save",+(new Date)-d]),a.trigger("resultsDirty")}),a.processQueuedUsers())}})}},preprocessUsers:function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];for(var f=0,g=e.tokens.length;f<g;f++){var i=e.tokens[f].token[0];if(!i)break;b.adjacencyList[i]||(b.adjacencyList[i]=[]),$.inArray(e.id,b.adjacencyList[i])===-1&&b.adjacencyList[i].push(e.id)}b.userHash[a[c].id]=a[c]}return b.length=b.length+a.length,b},getBlockedUsers:function(a){var b=this;blocks=b.get("blocks"),blocks?a(blocks):twttr.currentUser.blocks(function(c){c=c.array;for(var d=0,e=c.length;d<e;d++)b.blocks[c[d].id]=c[d];var f=36e5;b.set("blocks",b.blocks,f),a(b.blocks)})},filterBlockedUsers:function(a){if(!twttr.is.def(this.blocks[a.id]))return a},filterAlreadyDisplayedUsers:function(a){if(!twttr.is.def(this.userIdsCurrentlyRendered[a.id]))return a},renderAccount:function(a){this.userIdsCurrentlyRendered[a.id]=a;var b=twttr.isSSL()?a.profile_image_url_https:a.profile_image_url;return a.avatar=twttr.helpers.transformProfileImageUrl(b,"mini"),a.verified=a.verified?' <i class="verified"></i>':"",twttr.decider.isAvailable("typeahead_debug_info")?(isUserLocal=twttr.is.def(a.weight),a.debug_info=twttr.util.supplant(' title="{datasource} user, weight/score: {score}"',{datasource:isUserLocal?"local":"remote",score:isUserLocal?a.weight:a.rounded_score})):a.debug_info="",(new twttr.views.TypeaheadAccountItem(a)).html()},processQueuedUsers:function(){for(var a=0,b=this.addUsersQueue.length;a<b;a++)this.addToList(this.addUsersQueue[a])},addToList:$.noop,removeFromList:function(a){return a}});a(c)})}),provide("components/GlobalNavTypeahead",function(a){using("constants","components/Typeahead","components/TypeaheadSearchQueryDatasource","components/TypeaheadAccountsDatasource").as(function(b,c,_){var d=twttr.klass("twttr.components.GlobalNavTypeahead",function(a){var c={input:$("#search-query"),inputHint:$("#search-query-hint"),datasources:[new b.components.TypeaheadSearchQueryDatasource,new b.components.TypeaheadAccountsDatasource],select:function(a,b,c,d){var e=c.find("a").attr("data-shortcut"),f=c.attr("data-user-screenname"),b=c.find("a").attr("data-search-query")||b,g=c.find("a").attr("data-query-source")==="saved_search_click",i=g?twttr.search.searchQuerySource.SAVED_SEARCH_CLICK:twttr.search.searchQuerySource.TYPEAHEAD_CLICK;!c.find("a").attr("data-search-query")&&!f&&(i=twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.setLastQuerySource(i);var j;e?j=c.find("a")[0].href:f?j=twttr.router.profilePath({screen_name:f}):(twttr.search.$searchQuery.val(b),j=twttr.router.searchResultsPath({query:b})),d?window.open(j):twttr.router.routeTo(j),a.preventDefault()}},a=twttr.merge({},c,a);(twttr.decider.isAvailable("typeahead_global_nav")||twttr.abdecider.choose("typeahead_271")==="typeahead")&&b.components.Typeahead.call(this,a)}).subclassOf(b.components.Typeahead);a(d)})}),provide("components/Editor",function(a){using("util","constants").as(function(b){twttr.klass("twttr.components.Editor",function(a,b){var c=this;this.$container=$(a),this.$container.addClass("twttr-editor"),this.options=b||{},this._defaultContent=this.options.defaultContent||"",this._enableAutoGrow=this.options.enableAutoGrow||!1,this._isIE7()&&(this._enableAutoGrow=!1),this._autoGrowMinHeight=this.options.height||75;var d=this.options.width||"100%",e=this.options.height||"auto";this.$editor=$("<textarea/>").addClass("twitter-anywhere-tweet-box-editor").css({width:d,height:e}).val(this._defaultContent),this.options.condensed&&this.$container.addClass("condensed"),this.css={width:$.browser.mozilla?d-2:d,height:e,"min-height":e},this.$container.append(this.$editor),this._enableAutoGrow&&(this.$editor.css("overflow","hidden"),this.$shadow=this._createShadowForTextArea(this.$editor),this.$shadow.appendTo(this.$editor.parent())),this._registerEvents()}).methods(twttr.EventProvider).methods({moveCursorToEnd:function(){var a=this.$editor[0];setTimeout(function(){try{if(a.createTextRange){var b=a.createTextRange();b.collapse(!0),b.moveStart("character",a.value.length),b.moveEnd("character",a.value.length),b.select()}else a.selectionStart=a.value.length}catch(c){}},0)},content:function(){return this.$editor.val().replace(twttr.constants.regexps.dirMark,"")},setContent:function(a){a=a||"",this.$editor.val(a),this.trigger("didChangeContent",[a])},height:function(a){this.$editor.css("height",a)},width:function(a){this.$editor.css("width",a)},focus:function(){this.$editor.focus(),this.moveCursorToEnd()},blur:function(){this.$editor.blur()},toggle:function(){this.$editor.toggle()},reset:function(){this.setContent("")},_tryAutoGrow:function(){var a=this._autoGrowMinHeight,b=150,c="xyz",d=this.$editor;this._copyCssPropertiesFromTextArea(this.$shadow,d),this.$shadow.text(d.val()+c);var e=this.$shadow.height();e>a&&e<=b?(d.css("overflow","hidden"),d.height(e)):e<a?(d.css("overflow","hidden"),d.height(a)):e>b&&d.css("overflow","auto")},_isIE7:function(){return $.browser.msie&&parseInt($.browser.version,10)===7},_copyCssPropertiesFromTextArea:function(a,b){var c=["font-family","font-size","font-weight","line-height","padding-bottom","padding-left","padding-right","padding-top","white-space","width","word-wrap"];$.each(c,function(c,d){a.css(d,b.css(d))})},_createShadowForTextArea:function(a){var b=$("<div />").css("display","none");return this._copyCssPropertiesFromTextArea(b,a),b},_registerEvents:function(){var a=this;this.$editor.bind("focus blur",function(b){a.trigger(b.type,Array.prototype.slice.call(arguments,1))}),this.$editor.bind("keypress",function(a){if(a.ctrlKey)return;a.stopPropagation()}),this.$editor.bind("keydown",function(c){if(c.ctrlKey)return;switch(c.keyCode){case b.constants.keyCodes.tab:c.preventDefault(),a.trigger("blurFromTab",[c]);break;case b.constants.keyCodes.esc:c.preventDefault(),a.trigger("blurFromEscape");break;default:c.stopPropagation()}}),$.browser.mozilla?this.$editor.bind("input mousedown mouseup",twttr.bind(this,this._keyEvents)):this.$editor.bind("keydown keyup paste change mousedown mouseup input",twttr.bind(this,this._keyEvents)),this._enableAutoGrow&&this.$editor.bind("change cut keyup paste",twttr.bind(this,this._tryAutoGrow))},_keyEvents:function(a){!$.browser.webkit||a.type!="paste"&&a.type!="keydown"?this._inputCallback(a):setTimeout(twttr.bind(this,function(){this._inputCallback(a)}),0)},_inputCallback:function(a){this.trigger("didChangeContent",[this.content(),a])}}),twttr.klass("twttr.components.RichEditor",function(a,c){function e(a){var b=d.$editor.offset();d.$proxy=$(a.contentWindow.document.body),twttr.i18n&&twttr.i18n.rtl&&(d.$proxy[0].dir="rtl"),d.$proxy.append("<style>"+d.constructor.css+"</style>"),d._$proxyWrapper=$('<pre class="proxy-wrapper"></pre>').appendTo(d.$proxy),d._applyStyles(),d._queue.flush()}var d=this;this.supr=twttr.components.Editor,this.supr.apply(this,arguments),this._queue=new b.util.WaitQueue,this._$proxyWrapper={length:0},this.$iframe=$('<iframe allowtransparency="false" src="../../receiver.html" frameborder="0" tabindex="-1" role="presentation" scrolling="no"/>'),this.$iframe.insertBefore(this.$editor),this.$iframe.bind("load",function(){e(this)}),this.$iframe.addClass("proxy-editor"),this.$container.addClass("rich-editor"),this._tweetBoxHeight=0,$('<div class="tweet-meta"><div class="tweetbox-media-icon"/></div>').appendTo(this.$container),this.$mediaicon=this.$container.find(".tweetbox-media-icon"),this._foundMedia=!1,this.bind("didChangeContent",twttr.bind(this,this._proxyLinkify))}).subclassOf(twttr.components.Editor).statics({css:'body {        margin: 0;        width: 482px;        height: 56px;        color: #222;        overflow-x: hidden;        overflow-y: hidden;      }      .proxy-wrapper {        margin: 0;        padding: 0;        font: 14px/18px "Helvetica Neue", Arial, sans-serif;        white-space: pre-wrap;        word-wrap: break-word;      }      a {        color: #0084b4;        text-decoration: none;      }      a.twitter-timeline-link {        background-color: #bedff8;        -moz-border-radius: 5px;        -webkit-border-radius: 5px;        border-radius: 5px;      }      em {        font-style: normal;        display: inline-block;        width: 2px;      }'}).methods({_applyStyles:function(){this.$editor.css("min-height",this.css.height),this.$proxy.css("width",this.css.width),this.$iframe.css("width",this.css.width)},_growTweetBox:function(){var a=this._$proxyWrapper.height();$.browser.webkit&&(a+=10),a!==this._tweetBoxHeight&&(this.$editor.height(a),this.$iframe.height(a),this.trigger("heightChange")),this._tweetBoxHeight=a},_replaceAndys:function(a){return a.replace(/&amp;/g,"&")},_proxyLinkify:function(){this._queue.add(twttr.bind(this,function(){var a=b.util.linkify(this._replaceAndys(h(this.content())))+"<em>&nbsp;</em>";this._$proxyWrapper.html(a),this._growTweetBox(),this._showMediaIcon()}))},_showMediaIcon:function(){var a=twttr.txt.extractUrls(this.content()),b;for(var c=0;c<a.length;c++){var d=a[c];b=twttr.media.matchInstance(d);if(b){var e=twttr.is.fn(b.icon)?b.icon():b.icon;this.$mediaicon.addClass(e),this._foundMedia=!0;return}}!b&&this._foundMedia&&(this.$mediaicon[0].className="tweetbox-media-icon",this._foundMedia=!1)},reset:function(){this.supr.prototype.reset.apply(this,arguments),this._$proxyWrapper.html(""),this._applyStyles()}}),a(twttr.components.Editor)})}),provide("TweetBox",function(a){using("_","util","constants","components/TweetboxAutocomplete","mixins/urlShortener","mixins/photoBox").as(function(b,_){var c={condensed:!0,condensedContent:"",closeAfterSuccess:!0,defaultContent:!1,width:560,height:56,autocomplete:!0,autocompleteSuggestionLimit:10,displayError:!0,template:{show_geo:!0,show_title:!0,title:_("What’s happening?"),button_text:_("Tweet"),api_url:window.location.protocol+"//"+twttr.domains.upload},enableDraft:!1,statusAction:"update",draggable:!0},d=1,e={},f={update:"Status",reply:"Status",dm:"DirectMessage",directMessage:"DirectMessage"},g=/^(?:d|m|dm)\s+[@＠]?([a-zA-Z0-9_]{1,20}) /;twttr.klass("twttr.TweetBox",function(a,f){var g=this;c.template.title=_("What’s happening?"),c.template.button_text=_("Tweet"),c.template.post_authenticity_token=twttr.API.getConfig().postAuthenticityToken,this.options=twttr.merge({},c,f||{},!0),this.places=[],this._explainLinkShortening=twttr.is.def(this.options.explainLinkShortening)?this.options.explainLinkShortening:!0,this._isButtonEnabled=!1,this._hasWarned=!0,this._hasSuperWarned=!1,this._hasNoWarned=!1;var i={defaultContent:this._getDraftTweet()||this.options.condensedContent||this.options.defaultContent,width:this.options.width,height:this.options.height,enableAutoGrow:this.options.enableAutoGrow||!1};this.id=this.options.id||d++,e[this.id]=this,this.$container=$(a),this.view=(new twttr.views.TweetBox(this.options.template)).render(a,"append");var j=twttr.decider.isAvailable("phoenix_tweetbox_talon")&&twttr.decider.isAvailable("phoenix_rich_editor")&&!$.browser.msie,k=j?"RichEditor":"Editor";this.editor=new twttr.components[k](this.$container.find(".text-area-editor"),i),this.$counter=this.$find(".tweet-counter"),this.$tweetButton=this.$container.find(".tweet-button"),this.$title=this.$container.find("h2"),this.options.autocomplete&&(this.autocomplete=new b.components.TweetboxAutocomplete(this)),this._updateDraftTweet=twttr.bind(this,this._updateDraftTweet),!this.options.condensed||!this.options.condensedContent&&this.options.defaultContent||i.defaultContent!==(this.options.condensedContent||this.options.defaultContent)?this.open():this.editor.blur(),twttr.is.def(this.options.dynamicTitle)&&(this._dynamicTitle=this.options.dynamicTitle),this._registerUrlShortenerEvents(),this.registerEvents(),this._initPhotobox(),this._toggleCounterState(null,i.defaultContent||"")}).mixin(twttr.mixins.i18nTweetBox,twttr.mixins.urlShortener,twttr.mixins.photoBox).statics({focus:function(a){e[a].editor.focus()},_getDefaultContentForReply:function(a,b,c){var d=!1,e=a?a.find("a.twitter-atreply"):[],f="@"+b+" ";if(e.length){d=!0;var g=[];e.each(function(a,d){var e=$(this).text().replace("@","");!e.match(new RegExp("^"+b+"$"),"i")&&!twttr.is.inArray(e,g)&&!e.match(new RegExp("^"+c+"$","i"))&&g.push(e)}),g.unshift(b),f=twttr.map(g,function(a){return"@"+a+" "}).join("")}return{defaultContent:f,multiple:d}}}).statics(twttr.EventProvider).methods(twttr.EventProvider).methods({$find:function(a){return this.$container.find(a)},_locked:!1,_dynamicTitle:!0,lock:function(){this._locked=!0},unlock:function(){this._locked=!1},focus:function(){this.editor.focus(),this.editor.moveCursorToEnd()},_getTextLength:function(a){var c=b.util.displayLength(a);return c},_noPhotosPresent:function(){return!this.turkey||this.turkey&&!this.turkey.hasItems()},_toggleButtonState:function(a,b){var c=this._getTextLength(b),d=this.options.defaultContent||"";(c>140||$.trim(this.getTweetContent())==$.trim(d))&&this._noPhotosPresent()?this._isButtonEnabled&&(this._isButtonEnabled=!1,this.$tweetButton.addClass("disabled").removeClass("primary-btn")):this._isButtonEnabled||(this._isButtonEnabled=!0,this.$tweetButton.removeClass("disabled").addClass("primary-btn"))},_toggleCounterState:function(a,b){var c=this._getTextLength(b);this._updateCounter(c),c>120&&c<130?this._hasWarned||(this._hasWarned=!0,this._hasSuperWarned=!1,this._hasNoWarned=!1,this.$counter.addClass("warn").removeClass("superwarn")):c>=130?this._hasSuperWarned||(this._hasSuperWarned=!0,this._hasWarned=!1,this._hasNoWarned=!1,this.$counter.addClass("superwarn").removeClass("warn")):this._hasNoWarned||(this._hasNoWarned=!0,this._hasSuperWarned=!1,this._hasWarned=!1,this.$counter.removeClass("superwarn").removeClass("warn"))},_updateCounter:function(a){this.$counter.val(140-a)},open:function(){var a=this;if(this._isOpen)return;this._isOpen=!0,this.$container.find(".tweet-box").removeClass("condensed");var b=this._getDraftTweet();b?this.setTweetContent(b):twttr.is.string(this.options.defaultContent)&&this.setTweetContent(this.options.defaultContent),this.editor.bind("didChangeContent",this._updateDraftTweet),this.trigger("open");var c={};twttr.audit.currentPage()=="profile"&&(c.profile_id=twttr.profileUser.id);var d=a.options.statusAction==="directMessage"||a.editor.content().match(g);d||(twttr.profileUser&&twttr.profileUser.verified&&twttr.app.currentPageName()=="profile"&&twttr.abdecider.track("replies_stripped_on_verified_profiles_222","compose_tweet"),trackClient({component:"tweetbox",action:"compose_tweet"},c))},close:function(){if(!this._isOpen)return;this.options.condensed&&this.$container.find(".tweet-box").addClass("condensed"),this.editor.unbind("didChangeContent",this._updateDraftTweet),this.turkey&&this.turkey.reset(),this.trigger("close"),this._isOpen=!1},disable:function(){this.close(),this.editor.$editor.val(""),this.editor.$editor.bind("keypress",function(a){a.preventDefault()})},getTweetContent:function(){return this.editor.content()},setTweetContent:function(a){this._setDraftTweet(a),this.editor.setContent(a)},resetTweetContent:function(){this.editor.reset(),this._setDraftTweet(null),this.$container.find("textarea").val(this.options.condensedContent)},_tweet:function(){this.trigger("readyToTweet"),this.tweet()},tweet:function(){var a=this._shouldTweet();a.shouldTweet&&(this.setTweetBoxToBusyState(),this._setDraftTweet(null),this.trigger("sendingTweet",{action:this.options.statusAction}),this.makeRequest.apply(this,a.args)),a.msg&&(this.options.displayError&&twttr.showError(a.msg),this.trigger("error",[a.msg])),a.redirectToProfile&&twttr.router.routeTo(twttr.router.profilePath({screen_name:a.redirectToProfile}))},_getDraftTweet:function(){return this.options.enableDraft?twttr.app.caches.draftTweets.get(this.options.enableDraft===!0?window.location.href:this.options.enableDraft):null},_setDraftTweet:function(a){if(this.options.enableDraft){var b=this.options.enableDraft===!0?window.location.href:this.options.enableDraft;a?twttr.app.caches.draftTweets.set(b,a,864e5):twttr.app.caches.draftTweets.remove(b)}},_updateDraftTweet:function(){this._setDraftTweet(this.getTweetContent())},_shouldTweet:function(){var a=[],c=this.options.statusAction,d=f[c],e=$.trim(this.editor.content());if((this.options.condensedContent&&e==$.trim(this.options.condensedContent)||this.options.defaultContent&&e==$.trim(this.options.defaultContent))&&this._noPhotosPresent())return{shouldTweet:!1};if(this._sendingStatus||this._locked)return{shouldTweet:!1};var g=this.turkey&&this.turkey.hasItems();if(c==="update"&&this.editor.content().match(b.constants.regexps.usernameWithSpace)&&!g){var i=RegExp.$1;return this.$container.find(".tweet-spinner").show(),this.$container.find(".tweet-counter").hide(),{shouldTweet:!1,redirectToProfile:i}}if(this._getTextLength(e)>140)return{shouldTweet:!1,msg:(new twttr.views.TooLongErrorMessage({is_dm:c==="directMessage"})).html()};if(this._getTextLength(e)===0)return{shouldTweet:!1};if(c=="directMessage")if(!twttr.is.def(this.options.data.getUser())||twttr.is.blank(this.options.data.getUser()))return{shouldTweet:!1,msg:_("Whoops! You forgot to type in a username.")};var j=this,k=this._getRequestOptions();this.options.inReplyToStatusId&&twttr.merge(k,{in_reply_to_status_id:this.options.inReplyToStatusId});if(twttr.geo.location){var l=twttr.geo.location.isLocationOn()&&twttr.geo.location.cityId();l&&(k.place_id=l)}twttr.decider.isAvailable("geo_place_entities_write")&&this.places.length&&(k.places=JSON.stringify(this.places)),k.timeout=function(a){a.retry()};switch(c){case"update":a=[this.getTweetContent(),k];break;case"reply":k.impression_id=this.options.data.impressionId,a=[this.options.data.tweetId,this.getTweetContent(),k];break;case"directMessage":c="send",a=[this.options.data.getUser(),this.getTweetContent(),k]}return{shouldTweet:!0,args:[d,c,a]}},setTweetBoxToBusyState:function(){this.$container.find(".tweetbox-counter-tipsy").hide(),this.$container.find(".tweet-spinner").show(),this.$container.find(".tweet-counter").hide(),this.$tweetButton.addClass("disabled")},unSetTweetBoxToBusyState:function(){this.$container.find(".tweet-spinner").hide(),this.$container.find(".tweet-counter").show(),this.$container.find(".tweetbox-counter-tipsy").show(),this.$tweetButton.removeClass("disabled")},_getRequestOptions:function(){var a=this,b=a.options.statusAction==="directMessage"||a.editor.content().match(g);return{complete:function(){a.unSetTweetBoxToBusyState(),a._sendingStatus=!1},success:function(c,d){var e="";a.options.closeAfterSuccess&&a.close(),b||(a.trigger("tweetSuccess",[c,a.options.statusAction]),a.constructor.trigger("tweetSuccess",[c,a.options.statusAction]),e=a.options.inReplyToStatusId||c.text.indexOf("@")==0?"send_reply":"send_tweet"),a.editor.reset(),a.places=[],delete a.options.inReplyToStatusId;var f={item_ids:[c.id]};twttr.profileUser&&(f.profile_id=twttr.profileUser.id);var g=a.options.id||"unspecified-tweetbox";g.indexOf("send-message-box")!=-1&&(g="send-message-box"),b?(a.trigger("dmSuccess",[c,a.options.statusAction]),trackClient({component:"direct_message",action:"send_dm"},f)):trackClient({component:g,action:e},f),a.options.condensed&&a.$container.find(".tweet-box").addClass("condensed"),a.resetTweetContent()},error:function(c){a.$tweetButton.removeClass("disabled");if(twttr.isT1&&b)var d=twttr.errors.errorCodeFromResponse(c);else var d=twttr.helpers.showErrorFromResponse(c,b?"dm":"tweet");a.trigger(b?"dmError":"tweetError",[d])}}},makeRequest:function(a,b,c){this._sendingStatus=!0,twttr.API[a][b].apply(twttr.API[a],c)},destroy:function(){this.trigger("destroy")},collapseOnBlur:function(){if(this.preventBlur)return;var a=this.editor.content(),b=a===this.options.defaultContent||a==="";b&&this._noPhotosPresent()&&(this.close(),this.editor.setContent(this.options.condensedContent||this.options.defaultContent||""),$(document).unbind("click.tweetbox"))},registerEvents:function(){var a=this;this.$tweetButton.addClass("disabled"),this.editor.bind("focus",function(b){setTimeout(function(){a.open(),twttr.geo.location&&twttr.geo.location.onFocusTweetBox(a.$container)},0)}),twttr.isT1&&(this.editor.bind("blur",function(){a.collapseOnBlur()}),this.editor.bind("focus",function(){$(document).unbind("click.tweetbox"),$(document).bind("click.tweetbox",function(b){$(b.target).is(".tweet-box, .tweet-box *")||a.collapseOnBlur()})}),this.$container.bind("mouseenter",function(){a.preventBlur=!0}),this.$container.bind("mouseleave",function(){a.preventBlur=!1})),this.editor.bind("didChangeContent",twttr.bind(this,this._toggleButtonState)),this.editor.bind("didChangeContent",twttr.bind(this,this._toggleCounterState)),this.registerTextDirEvents(),this.editor.bind("blurFromTab",function(b,c){twttr.components.Autocomplete._isCompletionsOpen||a.$container.find(".tweet-button").focus()}),this.editor.bind("blurFromEscape",function(b){twttr.components.Autocomplete._isCompletionsOpen||(a.preventBlur=!1,a.editor.blur(),a.trigger("blurFromEscape"))}),!this.options.condensedContent&&this.options.defaultContent.length>0&&(this.editor.trigger("didChangeContent",[this.options.defaultContent]),setTimeout(twttr.bind(this,function(){this.open(),this.focus(),this.editor.$editor.trigger(jQuery.Event("keyup"))}),0)),this.$tweetButton.bind("keypress",twttr.bind(this,function(a){a.stopPropagation();if(a.keyCode===b.constants.keyCodes.enter||a.charCode===b.constants.charCodes.space)return this._tweet(),a.preventDefault(),this.blur(),!1})).bind("click",function(b){a._tweet(),this.blur(),b.preventDefault()});var d,e,f,i;if(this.options.statusAction=="update"||this.options.statusAction=="reply")this.bind("titleChanged",function(b,c,d){a.$tweetButton[0].childNodes[0].nodeValue=d=="dm"?_("Send Message"):_("Tweet")}),this._dynamicTitle&&this.editor.bind("didChangeContent",twttr.bind(this,function(a,j){if(j.match(g)){if(!d){d=!0,e=f=i=!1;var k=RegExp.$1,l=_("Message {{username}}",{username:k});this.$title.html(l),this.trigger("titleChanged",[l,"dm"])}}else if(this.options.statusAction=="reply"&&j.match(new RegExp("[@＠]"+this.options.data.screenName+" "))){if(!e){e=!0,d=f=i=!1;var l=_("Reply to @{{username}}",{username:this.options.data.screenName});this.$title.html(l),this.trigger("titleChanged",[l,"reply"])}}else if(j.match(b.constants.regexps.usernameWithAt)){if(!f){f=!0,d=e=i=!1;var l=_("Tweet to {{username}}",{username:RegExp.$1});this.$title.html(l),this.trigger("titleChanged",[l,"mention"])}}else i||(i=!0,d=e=f=!1,this.$title.html(c.template.title),this.trigger("titleChanged",[c.template.title,"update"]))}));twttr.geo.location&&twttr.geo.location.onRegisterTweetBox(this.$container,this.options.whenGeoPopupOpens),this.trigger("ready")}}),a(twttr.TweetBox)})}),provide("components/TweetboxAutocomplete",function(a){using().as(function(){twttr.klass("twttr.components.TweetboxAutocomplete").subclassOf(twttr.components.Base).initializer(function(a){var b=this;this.tweetbox=a,this.places=a.places,this.autocomplete=new twttr.components.Autocomplete({input:a.editor.$editor,textarea:!0,limit:a.options.autocompleteSuggestionLimit}),this.autocomplete.bind("select",function(a){b.tweetbox.editor.trigger("didChangeContent",[b.tweetbox.editor.content()])}),this.tweetbox.editor.bind("heightChange",twttr.bind(this.autocomplete,this.autocomplete.position)),a.bind("open",function(a){twttr.components.Autocomplete.getAutocompletedUsers(),b.autocomplete.position()}),a.$container.delegate(".geo-insert-place-button","click",twttr.bind(this,function(a){return this.autocomplete.insertPlace(),!1}))}),a(twttr.components.TweetboxAutocomplete)})}),provide("shortcuts_t1",function(a){using("_","constants").as(function(b,_){twttr.shortcuts={delegateToApp:function(){$(document).bind("keypress",function(a){return twttr.app.currentPage().send("onkeypress",[a])}),$(document).bind("keyup",function(a){return twttr.app.currentPage().send("onkeyup",[a])}),$(document).bind("keydown",function(a){return twttr.app.currentPage().send("onkeydown",[a])})},focusSearchBox:function(a){a.preventDefault(),$("#search-query").focus(),scribble("search-box-focus",{input:"keyboard"})},initCombos:function(){twttr.shortcuts.currentKey=null;var a=[],b={65:"a",67:"c",68:"d",71:"g",76:"l",85:"u",82:"r",83:"s",80:"p",72:"h",70:"f",86:"v",88:"x",77:"m"};$(document).keydown(function(a){if(twttr.helpers.isModifier(a))return;twttr.shortcuts.verify(a)&&$(a.target).is(":not(input)")?a.preventDefault():twttr.shortcuts.currentKey=null}),twttr.augmentString("twttr.shortcuts.combo",function(b,c){a.push({keys:b,fn:c})}),twttr.augmentString("twttr.shortcuts.verify",function(c){var d=c.keyCode,e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(b[d]===g.keys[0]){e=!0,twttr.shortcuts.currentKey=b[d];break}if(b[d]===g.keys[1]&&twttr.shortcuts.currentKey===g.keys[0]){e=!0,twttr.shortcuts.currentKey=null,g.fn();break}}return e}),twttr.shortcuts.combo(["g","u"],function(){scribble("open-goto-user-dialog",{input:"keyboard"}),twttr.components.Autocomplete.getAutocompletedUsers(),twttr.dialogs.goToUser().open()});if(twttr.loggedIn){function c(){scribble("switch-stream",{input:"keyboard",toStream:"connect"}),twttr.router.routeTo(twttr.router.connectPath())}function d(){scribble("switch-stream",{input:"keyboard",toStream:"activity"}),twttr.router.routeTo(twttr.router.networkActivityPath())}function e(){scribble("switch-stream",{input:"keyboard",toStream:"mentions"}),twttr.router.routeTo(twttr.router.mentionsPath())}twttr.decider.isActivityEnabled()?(twttr.shortcuts.combo(["g","a"],d),twttr.shortcuts.combo(["g","c"],c),twttr.shortcuts.combo(["g","r"],e)):twttr.shortcuts.combo(["g","r"],e),twttr.shortcuts.combo(["g","d"],function(){scribble("switch-page",{input:"keyboard",toPage:"discover"}),twttr.router.routeTo(twttr.router.discoverPath())}),twttr.shortcuts.combo(["g","l"],function(){scribble("switch-stream",{input:"keyboard",toPage:"lists"}),twttr.router.routeTo(twttr.router.listsPath())}),twttr.shortcuts.combo(["g","p"],function(){scribble("switch-page",{input:"keyboard",toPage:"profile"}),twttr.router.routeTo(twttr.router.profilePath({screen_name:twttr.currentUser.screenName}))}),twttr.shortcuts.combo(["g","m"],function(){scribble("switch-page",{input:"keyboard",toPage:"messages"}),twttr.dialogs.directMessage({origin:"message-dialog-hotkey"}).open().switchToConversationListView()}),twttr.shortcuts.combo(["g","h"],function(){scribble("switch-stream",{input:"keyboard",toStream:"home"}),twttr.router.routeTo(twttr.router.homePath())}),twttr.shortcuts.combo(["g","f"],function(){scribble("switch-stream",{input:"keyboard",toStream:"favorites"}),twttr.router.routeTo(twttr.router.favoritesPath())}),twttr.shortcuts.combo(["g","s"],function(){scribble("switch-page",{input:"keyboard",toPage:"settings"}),twttr.router.routeTo(twttr.router.settingsPath())}),twttr.decider.isAvailable("phoenix_facets")&&(twttr.shortcuts.combo(["s","p"],function(){scribble("open-search-facets-dialog",{input:"keyboard",facetsType:"photos"}),twttr.dialogs.searchFacets("photos").open()}),twttr.shortcuts.combo(["s","v"],function(){scribble("open-search-photos-dialog",{input:"keyboard",facetsType:"videos"}),twttr.dialogs.searchFacets("videos").open()})),twttr.shortcuts.combo(["g","x"],function(){twttr.decider.isAvailable("muteUsers")&&(twttr.components.Autocomplete.getAutocompletedUsers(),(new twttr.widget.MuteDialog).open())})}},initSecrets:function(){twttr.loggedIn&&(twttr.provide("twttr.secrets"),twttr.secrets.secretSauce=function(a,b){$(document).bind("keydown",b.split("->"),function(b){twttr.decider.isAvailable(a)&&(twttr.secrets[a]=!twttr.secrets[a])})},twttr.secrets.secretSauce("hideMentions","x->o"),twttr.secrets.secretSauce("allMedia","x->i"))},openDialogs:function(a){if(!twttr.loggedIn||twttr.shortcuts.currentKey)return;if(twttr.helpers.isModifier(a)||$(a.target).is("input"))return;a.keyCode===77?(twttr.dialogs.directMessage({origin:"message-dialog-hotkey"}).open().switchToNewMessageView(),scribble("dialog-direct-message",{input:"keyboard"}),a.preventDefault()):a.keyCode===78&&((new twttr.widget.TweetDialog({draggable:!0,template:{title:_("What’s happening?")},origin:"new-tweet-hotkey"})).open().focus(),scribble("dialog-new-tweet",{input:"keyboard"}),a.preventDefault())},closeDialogs:function(a){a.keyCode===b.constants.keyCodes.escape&&twttr.widget.Dialog.currentModal&&twttr.widget.Dialog.currentModal.options.closable&&(twttr.widget.Dialog.close(),a.stopPropagation(),a.preventDefault())},openKeyboardDialog:function(a){a.which===b.constants.charCodes.questionMark&&(a.preventDefault(),twttr.dialogs.keyboardShortcuts().toggle(),scribble("shortcut-dialog",{input:"keyboard"}))}},twttr.app.waitForSignal("init",function(){$(document).bind("keydown",twttr.shortcuts.openDialogs),$(document).bind("keydown",twttr.shortcuts.closeDialogs),$(document).bind("keypress","/",twttr.shortcuts.focusSearchBox),$(document).bind("keypress",twttr.shortcuts.openKeyboardDialog),twttr.shortcuts.delegateToApp(),twttr.shortcuts.initCombos(),twttr.shortcuts.initSecrets(),$("a.js-keyboard-shortcut-trigger").live("click",function(a){a.preventDefault(),twttr.dialogs.keyboardShortcuts().open()})}),a(twttr.shortcuts)})}),provide("stork",function(a){using("util").as(function(b){function c(a){return function(b){if(twttr.stork.isEnabled())return a("stork."+b)}}twttr.provide("twttr.stork",twttr.merge({init:function(){twttr.isT1&&twttr.decider.isAvailable("stork_guidance")&&(this.EXPIRE_TIME=12096e5,twttr.caches.User.set("stork.enabled",!0,this.EXPIRE_TIME),$.each(twttr.stork.STORKS,function(a,b){twttr.caches.User.set("stork."+b.counter,0,twttr.stork.EXPIRE_TIME)}))},STORKS:[{id:"expand_photo",counter:"expand_tweet",icon:"stork-help",matcher:function(a){return a.find(".js-sm-icon.sm-image").length>0},promptHtml:_("There’s a photo in this Tweet. Check it out."),explainHtml:_("<p>You’ll also find music, videos, and replies inside Tweets, so keep expanding them.</p>"),promptHighlight:".original-tweet .js-view-details",explainHighlight:"remove",explainOn:"expanded.tweet",dismissOn:"collapsed.tweet"},{id:"expand_video",counter:"expand_tweet",icon:"stork-help",matcher:function(a){return a.find(".js-sm-icon.sm-video").length>0},promptHtml:_("There’s a video in this Tweet. Check it out."),explainHtml:_("You’ll also find photos, music, and replies inside Tweets, so keep expanding them."),promptHighlight:".original-tweet .js-view-details",explainHighlight:"remove",explainOn:"expanded.tweet",dismissOn:"collapsed.tweet"},{id:"retweet_profile",counter:"retweet_profile",icon:"stork-help",matcher:function(a){return a.find("[data-retweet-id]").length>0},explainHtml:_("<p>A <strong>retweet</strong> is a Tweet that was shared by someone you’re following.</p> <p>The author of that Tweet may be someone you don’t follow, so it’s a great way to check out somebody new.</p>"),explainHighlight:".stream-item-footer .context .js-retweet-text",explainOn:"expanded.tweet",dismissOn:"profile_popup.tweet collapsed.tweet"},{id:"hashtag",counter:"hashtag",icon:"stork-help",matcher:function(a){return a.find(".original-tweet .js-tweet-text .twitter-hashtag").length>0},explainHtml:_("<p>The # symbol makes this word a <strong>hashtag</strong>. People add hashtags to their Tweets to give them topics.</p> <p>Click on it to find other Tweets with the same hashtag.</p>"),explainHighlight:".original-tweet .js-tweet-text .twitter-hashtag",explainOn:"expanded.tweet",dismissOn:{selector:".js-tweet-text .twitter-hashtag",event:"click"}},{id:"mention",counter:"mention",icon:"stork-help",matcher:function(a){return a.find(".original-tweet .js-tweet-text .twitter-atreply").length>0},explainHtml:_("<p>The @ symbol is used to <strong>mention</strong> another person by username. Mentions call attention to someone and can start a conversation.</p> <p>Click on it to see that user’s profile.</p>"),explainHighlight:".original-tweet .js-tweet-text .twitter-atreply",explainOn:"expanded.tweet",dismissOn:{selector:".js-tweet-text .twitter-atreply",event:"click"}}],getValue:c(function(a){return twttr.caches.User.get(a)||0}),incrValue:c(function(a){var b=twttr.caches.User.get(a)||0;twttr.caches.User.set(a,b+1,twttr.stork.EXPIRE_TIME)}),isEnabled:function(){return twttr.isT1&&twttr.caches.User.get("stork.enabled")},storkifyTweets:function(a){if(!this.isEnabled())return;var b=[];$.each(twttr.stork.STORKS,function(a,c){twttr.stork.getValue(c.counter)==0&&b.push(c)});var c=a.find(".js-stream-item").slice(0,10),d=!!c.find(".js-pip").length;if(d)return;c.each(function(a,c){var d=$(c),e=!1;if(d.attr("data-promoted")||d.find("[data-promoted]").length>0)return;$.each(b,function(a,b){if(b.matcher(d)){var c=new twttr.components.StorkPip(d,b);return e=!0,!1}});if(e)return!1})}},twttr.EventProvider)),a(twttr.stork)})}),provide("streams/ActivityStream",function(a){using().as(function(b){twttr.stream("twttr.streams.ActivityStream",function(a,b){twttr.streams.Stream.apply(this,arguments),this.page=0,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.registerTweetActionEvents(),this.registerUserActionEvents(),this.updateI18nDisplay(),this.initComponentEvents()}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.componentEvents,twttr.mixins.SinceMaxPagination,twttr.mixins.PollingStream,twttr.mixins.tweetActionable,twttr.mixins.i18nTweet,twttr.mixins.userActionable,twttr.mixins.activityStreamEvents,twttr.mixins.streamablePageWithInlineMedia).deciderKey(function(){return twttr.decider.isActivityEnabled()}).pollingDeciderKey(function(){return twttr.decider.isActivityEnabled()}).methods({PAGE_SIZE:20,timeouts:{ACTIVE:15e3,INACTIVE:9e4},itemViewClass:"ActivityItem",streamItemType:"activity",additionalStreamItemClass:function(a){return"js-activity js-activity-"+a.event},_idForItem:function(a,b){return b==="first"?a.maxPosition:a.minPosition},_pollShouldFetch:function(){var a=$(".stream-container").offset().top,b=$(window).scrollTop();return b<=a},streamItemId:function(a){return[a.minPosition,a.maxPosition,a.event,a.timestamp].join("_")},update:function(){},beforeSwitchingAway:function(){this.stopPeriodicFetcher()},afterFirstSwitchingTo:function(a){var b=this;this.startPeriodicFetcher(),this._loadedStreamOnce=!0,this.isLoadingMore(),this.fetcher(!0,function(c,d){c.render(),c.doneLoadingMore(),d!==twttr.streams.SUCCESS?(b._scribeResults("error",[],{status_code:502}),b._showError(d)):b.fetchUntilScreenIsFull(),a?a():$.noop}),twttr.isT1&&this.addInlineMediaIcons(this.$node)},afterSwitchingToAgain:function(a){this.fetcher(twttr.bind(this,function(b){var c=this.newItemsCount;this.newItemsCount>0&&this.showNewItems(this.newItemsCount),this.restartFetcher(),a?a():$.noop}))},showNewItems:function(a,b){this._showNewItems()},_showNewItems:function(a){var b=this.$streamItems();this.beforeShowNewItems(),this.newItemsCount>this.NEW_ITEMS_COUNT_MAX&&(b.empty(),this.items=this.items.slice(0,this.NEW_ITEMS_COUNT_CUTOFF),this.newItemsCount=this.NEW_ITEMS_COUNT_CUTOFF);var c=this.items.slice(0,this.newItemsCount),d=this._renderItems(c);!a&&this.newItemsCount>0&&this.onGotNewItems(c),a&&this.onGotInitialResults(this.items);var e=d.children();e.hide(),b.prepend(d),e.fadeIn(),this.newItemsCount=0,this.onShowNewItems(d),this.trigger("newItemsCountChanged",[0])},onShowNewItems:function(a){twttr.isT1&&this.addInlineMediaIcons(a),twttr.streams.Stream.prototype.onShowNewItems.apply(this,arguments),this.updateI18nDisplay(),this.trigger("onShowNewItems",a)},onShowOldItems:function(a){twttr.isT1&&this.addInlineMediaIcons(a),twttr.streams.Stream.prototype.onShowOldItems.apply(this,arguments),this.updateI18nDisplay(),this.trigger("onShowOldItems",a)},unshift:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));for(var b=0,c=a.length;b<c;++b)a[b].sync("for_stream",this.constructor.activityType);twttr.streams.Stream.prototype.unshift.call(this,a)},push:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));for(var b=0,c=a.length;b<c;++b)a[b].sync("for_stream",this.constructor.activityType);twttr.streams.Stream.prototype.push.call(this,a)},_getStreamErrorComponent:function(a){return a===twttr.streams.PROTECTED?new twttr.components.ProtectedUser({screen_name:this.params.screenName}):twttr.streams.Stream.prototype._getStreamErrorComponent.apply(this,arguments)},_scribeResults:function(a,b,c){var d=[],e=[];twttr.each(b,function(a){var b=[a.minPosition,a.maxPosition,a.event,a.timestamp].join("_");e.push(b),d.push(a.position||a.minPosition)});if(a=="error"||a=="initial"&&!d.length){var f={item_count:0,event_value:0,cursor_or_page:this._sinceId,referring_event:a};a=="error"&&c&&c.status_code&&(f.status_code=c.status_code),this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},f)}else a!="initial"&&this.scribbler.scribe({component:"stream",action:a},{item_count:d.length,cursor_or_page:this._sinceId});d.length&&this.scribbler.scribe({component:"stream",action:"results"},{item_ids:d,item_names:e,item_count:d.length,event_value:d.length,cursor_or_page:this._sinceId,referring_event:a})},showActivitySupplements:function(a){var b=a.closest(".stream-item");b.find(".hidden-supplement").removeClass("hidden-supplement").addClass("hidden-supplement-expanded"),b.find(".sub-stream-item-hidden").removeClass("sub-stream-item-hidden").addClass("sub-stream-item-showing"),b.find(".view-all-supplements").removeClass("show").addClass("hide")},hideActivitySupplements:function(a){var b=a.closest(".stream-item");b.find(".hidden-supplement-expanded").removeClass("hidden-supplement-expanded").addClass("hidden-supplement"),b.find(".sub-stream-item-showing").removeClass("sub-stream-item-showing").addClass("sub-stream-item-hidden"),b.find(".view-all-supplements").removeClass("hide").addClass("show")},oldShowActivitySupplements:function(a){var b=a.closest(".stream-item"),c=b.find(".sub-stream-item"),d=c.filter(".sub-stream-item-hidden"),e=b.find(".stream-item-activity"),f=c.length,g=d.length;a.removeClass("show").addClass("hide"),b.addClass("parent");var i;for(var j=f-g;j<f;++j)i=b.clone(),i.find(".view-all-supplements").remove(),i.addClass("expanded"),i.find(".activity-supplement > div").each(function(a,b){var c=$(b);a!=j?c.remove():c.removeClass("sub-stream-item-hidden")}),b.after(i)},oldHideActivitySupplements:function(a){var b=a.closest(".stream-item"),c=b.find(".stream-item-activity");b.removeClass("parent"),b.nextUntil(".stream-item:not('.expanded')").remove(),a.removeClass("hide").addClass("show")}}).click({".stream-item-activity .activity-count":function(a,b){var c=b.closest(".stream-item");return c.find(".sub-stream-item-hidden").removeClass("sub-stream-item-hidden"),c.find(".activity-secondary-supplement").show(),b.find("span").unwrap(),!1},".stream-item-activity-network .stream-item-activity-header":function(a,b){if(!twttr.isT1)return;var c=b.find(".view-all-supplements");c.get(0)&&(c.hasClass("show")?this.showActivitySupplements(c):this.hideActivitySupplements(c))},"div.js-activity .view-all-supplements":function(a,b){return twttr.isT1?b.hasClass("show")?this.showActivitySupplements(b):this.hideActivitySupplements(b):b.hasClass("show")?this.oldShowActivitySupplements(b):this.oldHideActivitySupplements(b),a.stopPropagation(),a.preventDefault(),!1},".js-activity .hidden-supplement":function(a,b){this.showActivitySupplements(b)}}),a(twttr.streams.ActivityStream)})}),provide("streams/ActivityByUserStream",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ActivityByUserStream").subclassOf(twttr.streams.ActivityStream).statics({activityType:"profile_activity"}).methods({update:function(a){twttr.API.User.find(this.params.screenName).activity(a)},_setTitle:function(a){a(_("Activity by {{screen_name}}",{screen_name:this.params.screenName}))}}),a(twttr.streams.ActivityByUserStream)})}),provide("streams/ActivityByNetworkStream",function(a){using("streams/ActivityStream").as(function(b){twttr.stream("twttr.streams.ActivityByNetworkStream").subclassOf(b.streams.ActivityStream).statics({activityType:"activity"}).methods({afterFirstSwitchingTo:function(){b.streams.ActivityStream.prototype.afterFirstSwitchingTo.apply(this,arguments)},onShowNewItems:function(a){b.streams.ActivityStream.prototype.onShowNewItems.apply(this,arguments)},onShowOldItems:function(a){b.streams.ActivityStream.prototype.onShowOldItems.apply(this,arguments)},_getEmptyStreamHtml:function(){return _("Favorites, follows, retweets, and more by people you follow will appear here.")},update:function(a){twttr.currentUser.networkActivity(a)},_setTitle:function(a){twttr.isT1?a(_("Activity")):a(_("Favorites, follows, retweets, and more by people you follow"))}}),a(twttr.streams.ActivityByNetworkStream)})}),provide("streams/ActivityOfMeStream",function(a){using().as(function(b){twttr.stream("twttr.streams.ActivityOfMeStream").subclassOf(twttr.streams.ActivityStream).mixin(twttr.mixins.newStreamItemsBar).statics({activityType:"your_activity"}).methods({itemForRender:function(a){return a.isMention?a.targetObjects.get(0):a.isReply?a.targets.get(0):a},additionalStreamItemClass:function(a){var b=twttr.streams.ActivityStream.prototype.additionalStreamItemClass.apply(this,arguments);return twttr.isT1&&(a.isReply||a.isMention)&&(b+=" expanding-stream-item"),b},itemViewClass:function(a){return a.isMention||a.isReply?twttr.views.StreamTweet:twttr.views.ActivityItem},_getEmptyStreamHtml:function(){return _("@mentions, favorites, follows and more on you and your Tweets will appear here.")},_afterItemsRendered:function(a){twttr.helpers.ellipsify(a.find(".activity-truncated-tweet .tweet-row"))},onShowNewItems:function(a){twttr.streams.ActivityStream.prototype.onShowNewItems.apply(this,arguments),this.$find(".js-new-tweets-bar").remove(),this._afterItemsRendered(a)},onShowOldItems:function(a){twttr.streams.ActivityStream.prototype.onShowOldItems.apply(this,arguments),this._afterItemsRendered(a)},update:function(a){!twttr.isT1&&$.cookie("should_filter_mentions")&&(a.filter=["mention","reply"]),twttr.currentUser.inboundActivity(a)},newStreamItemsBarPhrase:function(a){return a==1?_("1 New interaction"):_("{{count}} New interactions",{count:a})},_setTitle:function(a){twttr.isT1?a(_("Interactions")):a((new twttr.views.ActivityOfMeStreamTitle({})).html())},showNewItems:function(a,b){b?this.showNewStreamItemsBar(a):this._showNewItems()},afterSwitchingToAgain:function(a){twttr.streams.ActivityStream.prototype.afterSwitchingToAgain.apply(this,arguments),this.afterSwitchingTo()},afterFirstSwitchingTo:function(a){twttr.streams.ActivityStream.prototype.afterFirstSwitchingTo.apply(this,arguments);var b=this;this._attachedTweetBarEvent||(this._attachedTweetBarEvent=!0,this.dom().delegate(".js-new-tweets-bar","click",function(){b._showNewItems()})),this.afterSwitchingTo()},afterSwitchingTo:function(){this.updateI18nDisplay();var a=this,b=this.$node.closest(".stream-manager").find("#show_mentions_only"),c=!!$.cookie("should_filter_mentions");b.attr("checked",c?"checked":null),setTimeout(function(){b.one("click",function(){return c=!c,$.cookie("should_filter_mentions",c||null,{expires:3650}),b.attr("checked",c?"checked":null),trackClient({component:"mentions_filter",action:c?"select":"deselect"}),a.trigger("reloadCurrentStream",[a.constructor]),!1})},0)}}),a(twttr.streams.ActivityOfMeStream)})}),provide("streams/AllSubscriptions",function(a){using("_","streams/ListStream").as(function(b,_){twttr.stream("twttr.streams.AllSubscriptions",function(a,b){twttr.streams.ListStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"allLists",_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!1))},_setHeaderButton:function(a,b){twttr.helpers.isCurrentUser(b.screenName)&&a(new twttr.views.CreateListButton)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following any lists yet."):_("@{{screen_name}} isn't following any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"create follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"delete unfollow",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}),a()})}),provide("streams/AllSubscriptionsUser",function(a){using("_","streams/AllSubscriptions").as(function(b,_){twttr.stream("twttr.streams.AllSubscriptionsUser",function(a,b){twttr.streams.AllSubscriptions.apply(this,arguments)}).subclassOf(twttr.streams.AllSubscriptions).methods({_setViewToggler:function(a,b){a(new twttr.views.ProfileListsStreamViewToggler(!0,{screen_name:b.screenName}))}}),a()})}),provide("media",function(a){using().as(function(b){twttr.provide("twttr.media");var c={};twttr.aug(twttr.media,{match:function(a){if(twttr.is.nil(a))return;var b,d,e;return(d=c[a])?d.mediaType:($.each(twttr.media.types,function(b,f){if(!f.isEnabled())return!0;$.each(f.matchers,function(b,g){d=twttr.is.regex(g)?a.match(g):g(a);if(d)return c[a]={mediaType:f,matchLabel:b,match:RegExp.$1},e=f,!1});if(d)return!1}),e)},matchInstance:function(a,b){var d=this.match(a);if(d)return new d({url:a,matchLabel:c[a].matchLabel,slug:c[a].match,tweet:b})},expand:function(a,b){twttr.urlResolver.expand(a,function(a){b(a)})},mediaTypes:function(a,b){var c=[],d={},e=function(a,b){var e=twttr.media.match(b);if(e){d[b]=e;return}c.push(a)};$.each(a,e);if(c.length===0){b(d);return}twttr.media.expand(c,function(a){$.each(a,e),b(d)})},extractUrls:function(a){var b={};return a.entities?(a.entities.urls&&$.each(a.entities.urls,function(a,c){c.url&&(b[c.url]=c.expanded_url||c.url)}),twttr.media.extractMedia(a,b),b):($.each(twttr.txt.extractUrls(a.text),function(a,c){b[c]||(b[c]=c)}),b)},extractMedia:function(a,b){return a.entities&&a.entities.media&&$.each(a.entities.media,function(a,c){c.type&&c.type=="photo"&&c.display_url&&(b[c.display_url]=c.display_url)}),b},hasMedia:function(a){var b=a.entities&&a.entities.media&&a.entities.media.length,c=twttr.Cards.prototype.hasCards(a);return b||c},resolveImageUrl:function(a,b,c,d){var e=this;c=c||{};var f=twttr.media.matchInstance(a,c.tweet),g=c.error?c.error:$.noop;if(f&&f.getImageURL){if(c.filter&&c.filter(f)!==!0){g("your filter function filtered out this media");return}f.getImageURL(b,function(a){!twttr.is.nil(a)&&twttr.is.def(a)?c.success(a):g("getImageUrl did not return a resolvedURL")},d)}else g("url did not match any media types")},iconType:function(a,b){var d=new b({url:a,matchLabel:c[a].matchLabel,slug:c[a].match});return d.icon()},getViewMediaCookie:function(){var a=$.cookie("show_all_inline_media");return!!a},setViewMediaCookie:function(){$.cookie("show_all_inline_media",!0)},matchCache:c}),a(twttr.media)})}),provide("media/Iconifier",function(a){using("media").as(function(b){twttr.provide("twttr.media");var c=twttr.klass("twttr.media.Iconifier",function(a,b){var c=this,d=$(a);d.attr("media",!0),twttr.isT1&&c.iconifyGeo(d),twttr.decider.isAvailable("platform_enable_cards")&&(c.iconifyNativeMedia(d.find(".js-stream-tweet.has-native-media")),c.iconifyCards(d.find(".js-stream-tweet.has-cards:not(.iconified)"))),c.iconify(d.find(".js-stream-tweet a.twitter-timeline-link").get(),!0,b)});c.methods({expand:function(a,c){var d=[],e=[];$.each(a,function(a,b){d.push(b.href)}),b.media.expand(d,function(b){var d;$.each(a,function(a,c){d=b[c.href],d&&(c.setAttribute("data-ultimate-url",d),e.push(c))}),c(e)})},iconifyGeo:function(a){var b=this,c=a.find('div.js-stream-tweet[data-geo="true"] span.js-icon-container'),d=(new twttr.views.InlineMediaIcon({is_geo:!0})).html();c.each(function(){var a=$(this);a.append(d),b.updateHandleText(a,"geo")})},iconifyNativeMedia:function(a){var b=this;a.each(function(){var a=$(this),c=a.find("span.js-icon-container"),d="photo";b.updateHandleText(a,d),b.addSmallIcon(c,d,d),a.addClass("iconified")})},iconifyCards:function(a){var b=this;a.each(function(){var a=$(this),c=a.find("span.js-icon-container"),d=a.data("card-type");b.updateHandleText(a,d),b.addSmallIcon(c,d,d),a.addClass("iconified")})},preloadTwimgs:function(a){if(twttr.decider.isAvailable("phoenix_preload_twimgs")){var b=a.closest("div.js-stream-tweet").attr("data-item-id");twttr.API.Status.find(b,function(b){b.entities&&b.entities.media&&twttr.each(b.entities.media,function(b){var c=new Image;c.src=twttr.isSSL()?b.media_url_https:b.media_url,a.trigger("preloadedImage",[c])})})}},iconify:function(a,c,d){var e=this,f=[];$.each(a,function(a,d){var g=$(d),i=g.closest("div.js-stream-tweet"),j=d.getAttribute("data-ultimate-url")||d.getAttribute("data-expanded-url")||d.href,k=b.media.match(j);if(twttr.abdecider.choose("long_tweet_urls_248")==="long"){var l=j.replace(/^https?:\/\//,"");l.length>32&&(l=l.slice(0,29)+"..."),g.html(l)}if(k||!c){var m=0;switch(twttr.abdecider.choose("long_tweet_urls_2_259")){case"p25":m=.25;break;case"p50":m=.5;break;case"p75":m=.75;break;case"p100":m=1;break;case"control":default:m=0}if(m&&Math.random()<=m){var l=j.replace(/^https?:\/\//,"");l.length>32&&(l=l.slice(0,29)+"..."),g.attr("data-long_tweet_urls_2_259","expanded"),g.html(l)}}if(!k){f.push(d);return}var n=!!g.parents().filter(function(a,b){return $(b).hasClass("js-old-content")}).length;if(n)return;g.data("media-type",k);var o=b.media.iconType(j,k),p=i.find(".js-icon-container");p.find('[data-media-class="'+o+'"]').length===0&&(!g.closest(".js-stream-tweet:not(.iconified)").length||(e.addSmallIcon(p,o,k._name.toLowerCase()),e.updateHandleText(p,o)),k._name.toLowerCase()==="CopiedTwimg"&&e.preloadTwimgs(p))}),c&&f.length>0?this.expand(f,function(a){e.iconify(a,!1,d)}):d&&d()},addSmallIcon:function(a,b,c){(new twttr.views.InlineMediaIcon({icon:b,media_name:c,is_image:b==="photo",is_video:b==="video"||b==="player",is_audio:b==="song"||b==="album",is_summary:b==="summary",is_embed:b==="generic"||b==="software"||b==="tweet"})).render(a,"append")},updateHandleText:function(a,b){if(!twttr.decider.isExpando())return;var c=a.data("placename");c?(c=_("from {{placename}}",{placename:c}),c=[c,c]):c=[_("View location"),_("Hide location")];var d={photo:[_("View photo"),_("Hide photo")],video:[_("View video"),_("Hide video")],generic:[_("View media"),_("Hide media")],song:[_("View song"),_("Hide song")],album:[_("View album"),_("Hide album")],software:[_("View app"),_("Hide app")],tweet:[_("View tweet"),_("Hide tweet")],geo:c,player:[_("View media"),_("Hide media")],summary:[_("View summary"),_("Hide summary")]}[b],e="tweet_anatomy_hide_view_179",f=twttr.abdecider.choose(e);f!=="hide"&&(f==="always"?(d||(d=[_("View details"),_("Hide details")]),d&&a.show().parent().find("span.js-view-details").html(d[0]).end().find("span.js-hide-details").html(d[1])):d&&a.show().parent().find("span.js-view-details").html(d[0]).end().find("span.js-hide-details").html(d[1]))}}),a(c)})}),provide("media/Embedder",function(a){using("media").as(function(b){var c=twttr.klass("twttr.media.Embedder",function(a,b){this.tweet=a,this.options=b||{},this.options.preProcess=this.options.preProcess||function(a,b){b()},this.options.postProcess=this.options.postProcess||function(){},this.options.beforeRender=this.options.beforeRender||function(a,b){b({shouldRender:!0})},this.options.afterRender=this.options.afterRender||function(){}});c.mixin(twttr.mixins.tweetFlagging),c.methods({expand:function(a,c){var d=[];b.media.expand(a,function(a){$.each(a,function(a,b){d.push(b)}),c(d)})},render:function(a){var c=this,d=twttr.Cards.prototype;if(d.hasCardPhotoEntities(this.tweet))$(this.tweet.entities.media).each(function(a,b){c.embed(b.url,twttr.media.types.nativePhoto,b)});else if(d.hasPhotos(this.tweet))c.embed(this.tweet.cards.photos[0].url,twttr.media.types.photo,this.tweet.cards);else if(d.hasPlayers(this.tweet))c.embed(this.tweet.cards.players[0].url,twttr.media.types.player,this.tweet.cards);else if(d.hasSummaries(this.tweet))c.embed(this.tweet.cards.summaries[0].url,twttr.media.types.summary,this.tweet.cards);else{var e=b.media.extractUrls(this.tweet),f=this.embedMatchedAndReturnUnmatched(e);f.length&&this.expand(f,function(a){c.embedMatchedAndReturnUnmatched(a)})}a&&a()},embedMatchedAndReturnUnmatched:function(a){var c=this,d=[];return $.each(a,function(a,e){var f=b.media.match(e);f?c.embed(e,f):d.push(a)}),d},embedThumbnail:function(a){var c=this,d=b.media.match(a);if(!d)return;var e=new d({url:a,matchLabel:b.media.matchCache[a].matchLabel,slug:b.media.matchCache[a].match,size:this.options.size});e.process(function(){e.renderThumbnail(c.options.DOMContainer)})},embed:function(a,c,d){var e=this,f;d?f=new c({url:a,tweet:this.tweet,mediaEntity:d}):f=new c({url:a,matchLabel:b.media.matchCache[a].matchLabel,slug:b.media.matchCache[a].match,tweet:this.tweet}),e.options.preProcess(f,function(b){f.process(function(){e.options.postProcess(f,b||{}),e.options.beforeRender(f,function(b){var c=(new twttr.views.MediaTypeContainer({url:a,media_type:f.constructor._name,media_type_class:f.constructor._name.toLowerCase()})).$html(),d=c.data("url-id");e.options.DOMContainer.find('div[data-url-id="'+d+'"]').remove().end().append(c),f.render(c);if(!f.data||!f.data.is_card)e.tweetFlaggable(e.tweet)&&c.append(f.flaggable()),c.append(f.attribution());setTimeout(function(){c.closest(".tweet").delegate(".flaggable","click",function(a){e.flagLinkClicked(a,e.tweet)})},0),e.options.afterRender(f,b||{}),twttr.images.addPrivacyCover(c.find("a img"))})},b||{},d)})}}),a(c)})}),provide("media/mediaType",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.media.MediaType",function(a){this.url=a.url,this.matchLabel=a.matchLabel,this.slug=a.slug,this.tweet=a.tweet||null,this.options=a||{},this.location=new b.util.Location(this.url),this.data={}}),twttr.mediaType=function(a,c){var d="twttr.media.types."+a,e=twttr.klass(d,function(){twttr.media.MediaType.apply(this,arguments)});e.subclassOf(twttr.media.MediaType).statics({partnerName:a,domain:c.domain||"",attributionName:c.attributionName||a,skipAttributionInDiscovery:c.skipAttributionInDiscovery||!1,title:c.title||null,_icon:c.icon||"generic",deciderKey:c.deciderKey||null,screenName:c.screenName||null,aspectRatio:c.aspectRatio||b.constants.videos.fullscreen,height:c.height,ssl:c.ssl||!1,isEnabled:function(){return this.deciderKey?twttr.decider&&twttr.decider.isAvailable(this.deciderKey):!0},attributionTemplate:c.attributionTemplate||"MediaAttribution",validActions:$.extend({resizeFrame:!0},c.validActions),enableAPI:c.enableAPI||!1,addMatchers:function(a){for(var c in a)this.matchers[c]=b.util.regexSupplant(a[c])},flagActionTemplate:c.flagActionTemplate||"<span class='flag-container'><a href='#' class='flaggable' alternateText='"+_("Un-flag this media")+"'>"+_("Flag this media")+"</a></span>"}).methods({process:c.process||function(){},content:c.content||function(){},getImageURL:c.getImageURL||function(){},partnerName:a,metadata:function(a){if(twttr.is.fn(c.metadata))return c.metadata.apply(this,[a])},calcHeight:function(a,b){b||(b=this.constructor.aspectRatio);var c=parseInt(b.split(":")[0],10),d=parseInt(b.split(":")[1],10),e=30;return Math.round(a*(d/c))+e},resizeHtmlEmbed:function(a,b,c,d){if(a&&b&&b.maxwidth&&b.maxwidth<c){var e=Math.round(b.maxwidth*d/c);a=a.replace(new RegExp('width=("?)'+c+"(?=\\D|$)","g"),"width=$1"+b.maxwidth).replace(new RegExp('height=("?)'+d+"(?=\\D|$)","g"),"height=$1"+e)}return a},useOpaqueModeForFlash:function(a){return a.replace(/(<\/object>)/,'<param name="wmode" value="opaque">$1').replace(/(<embed .*?)(\/?>)/,'$1 wmode="opaque"$2')},icon:function(){return twttr.is.fn(this.constructor._icon)?this.constructor._icon.call(this,this.url):this.constructor._icon},flaggable:function(){return!twttr.loggedIn||!c.flaggable||!twttr.decider.isAvailable("media_flagging")?!1:$(Mustache.to_html(this.constructor.flagActionTemplate))},attribution:function(){return c.attribution&&twttr.is.fn(c.attribution)?c.attribution.call(this):(new twttr.views[this.constructor.attributionTemplate]({url:this.domainUrl(),icon_url:this.iconUrl(),title:this.data.attribution_title||this.constructor.title||this.constructor._name,media_type:this.constructor._name})).html()},iconUrl:function(){return this.data.attribution_icon||twttr.assets.path("/images/partner-favicons/"+this.constructor._name+".png")},domainUrl:function(){return this.data.attribution_url||this.constructor.domain},attributionName:function(){return this.constructor.attributionName},hasAttributionInDiscovery:function(){return!this.constructor.skipAttributionInDiscovery},render:function(a){if(c.render&&twttr.is.fn(c.render))return c.render.call(this,a);var b=this.content();if($.browser.msie&&$.browser.version<=8)$(a).html(b);else{b="<div class='tweet-media'>"+b+"</div>";var d=new twttr.platform.SandboxedApplication(this.constructor,{tweet:this.tweet,originalUrl:this.url}),e={DOMContainer:a,htmlContent:b,height:this.data.height,width:this.data.width,security:this.constructor.ssl};d.run(e)}},content:function(){return c.content&&twttr.is.fn(c.content)?c.content.call(this):""},renderThumbnail:function(a){var b=this;this.metadata(function(c){c.alt=b.constructor.title;var d=Mustache.to_html('<img src="{{image}}" alt="{{alt}}" title="{{title}}" />',c);$(a).append(d)})},renderIframe:function(a,b){t="<iframe src='{{url}}' width='{{width}}' height='{{height}}'></iframe>",$(a).append(Mustache.to_html(t,$.extend({url:b},this.data)))},renderEmbeddedApplication:function(a,b){var c=new twttr.platform.EmbeddedApplication(this.constructor,{tweet:this.tweet,originalUrl:this.url}),d={DOMContainer:a,height:this.data.height,width:this.data.width};c.run(b,d)}}),e.matchers=c.matchers||{};for(var f in e.matchers)(function(){var a=f;e.matchers[a]=b.util.regexSupplant(e.matchers[a])})();return e},a(twttr.mediaType)})}),provide("media/expandodo",function(a){using("util","constants").as(function(b){function e(a){return a.expanded_url.replace(/^https?:\/\//,"//")+"/large"}function f(a){a&&(a.profile_path="/"+a.screen_name)}function g(a){var b=["players","summaries","photos"],c,d,e,g;for(c=0;c<b.length;c++){g=a[b[c]];if(g&&g.length)for(d=0;d<g.length;d++)e=g[d],f(e.author_user),f(e.site_user)}}function i(a,b,c){this.data=c,this.data.is_card=!0,g(this.data),a()}function j(a,b,c){var d=this;c&&c.source_status_id_str?twttr.API.Status.find(c.source_status_id_str,function(e){k(c,e.user,function(c){i.apply(d,[a,b,c])})}):k(c,!1,function(c){i.apply(d,[a,b,c])})}function k(a,b,f){var g=l(a.sizes.medium.w,a.sizes.medium.h,d,c),i={photos:[{url:e(a),title:!1,description:!1,images:{web:{image_url:a.media_url_https+":medium",width:g.width,height:g.height}},twimg_attribution:!0,permalink_continuity:!0}]};b&&(i.photos[0].author_user={id_str:b.id,screen_name:b.screenName,name:b.name,profile_image_url:b.profileImageUrl,profile_image_url_https:b.profileImageUrlHttps}),f(i)}function l(a,b,c,d){return b>=a&&b>d?(a*=d/b,b=d):a>b&&a>c&&(b*=c/a,a=c),{width:Math.ceil(a),height:Math.ceil(b)}}function m(a){$(a).append(Mustache.to_html(twttr.templates.cards_base,this.data,twttr.templates))}var c=375,d=435;twttr.mediaType("photo",{icon:"photo",process:i,render:m}),twttr.mediaType("nativePhoto",{icon:"photo",attribute:!1,process:j,render:m}),twttr.mediaType("summary",{icon:"summary",process:i,render:m}),twttr.mediaType("player",{icon:"player",process:i,render:m}),a()})}),provide("platform/BaseApplication",function(a){using("_").as(function(b,_){(function(){function a(a){var b=twttr.platform.runningApplications[a];b&&(b.stop(),delete twttr.platform.runningApplication[a])}twttr.platform||(twttr.platform={}),twttr.platform.application_types={embedded:"embedded"},twttr.platform.runningApplications={};var b=50,c=36e5,d={trends:!0,"geo/nearby_places":!0,"statuses/retweets/:id":!0,"followers/ids":!0,"geo/id/:id":!0,"geo/search":!0,"lists/statuses":!0,"users/suggestions":!0,"friendships/show":!0,"statuses/show":!0,"trends/current":!0,"geo/similar_places":!0,"statuses/user_timeline":!0,"friends/ids":!0,"trends/:woeid":!0,"statuses/followers":!0,"statuses/friends":!0,"statuses/public_timeline":!0,"users/show":!0},e={"users/search":!0,"users/typeahead":!0,":user/lists/subscriptions":!0,"statuses/network_timeline":!0,"statuses/friends_timeline":!0,":user/:list_id/members":!0,":user/lists/memberships":!0,"statuses/:id/retweeted_by/ids":!0,":user/lists":!0,"statuses/mentions":!0,"geo/reverse_geocode":!0,"friendships/exists":!0,":user/:list_id/members/:id":!0,search:!0,"statuses/retweeted_to_me":!0,"statuses/retweets_of_me":!0,"statuses/retweeted_by_me":!0,":user/:list_id/subscribers":!0,":user/:list_id/subscribers/:id":!0,"favorites/:id":!0,"statuses/:id/retweeted_by":!0,"account/verify_credentials":!0,"users/lookup":!0,"trends/weekly":!0,"trends/daily":!0,"statuses/home_timeline":!0,"lists/show":!0};twttr.platform.events={resize:function(){var a=this;$(window).bind("resize."+this.config._name,function(){var b=$("div.details-pane.opened");b.length!==0&&a.socket.trigger("resize",b.width())})}},twttr.platform.interfaceActions={openTab:function(a){window.open(a.url,"_blank")},openProfile:function(a,b){twttr.app.currentPage().send("loadUserInDetailsPane",[this.config.screenName,{}],function(){a(!0)},function(){b("Profile pane not available or no registered screen name")})},tweet:function(a,b,c){(new twttr.widget.TweetDialog({defaultContent:a,draggable:!0,template:{title:_("What’s happening?")},origin:"new-tweet-titlebar-button"})).open().focus()},notify:function(a,b){twttr.Notifications.notify(a.type,a.subject,a.message,a.icon,function(){b(a)})},resizeFrame:function(a){this.DOMContainer.firstChild.style.height=a+"px"},bind:function(a,b,c){var d=twttr.platform.events[a];d?(d.call(this),b(!0)):c("You tried to bind to an event that is not bindable")},unbind:function(a,b,c){var d=twttr.platform.events[a];d?($(window).unbind(a+"."+this.config._name),b(!0)):c("You tried to unbind from an event that is not bindable")}};var f=0,g=twttr.klass("twttr.platform.BaseApplication",function(a){this.limiter=0,this.interval=(new Date).getTime(),this.socket=null,this.config=a,this.minimized=!1,this.id=++f});g.methods({run:function(a,b){var c=this;this.options=b||{},this.url=a;var d=b.DOMContainer||$(document.body);d instanceof jQuery&&(this.DOMContainer=d[0]),this.socket=new easyXDM.Rpc({remote:this.url,container:this.DOMContainer,props:{width:b.width||"100%",height:b.height||0},onReady:function(){twttr.platform.runningApplications[c.id]=c,c.limiter=0,c.interval=(new Date).getTime();var a=c.initialData();c.socket.initialize(a),b.loaded&&b.loaded.call(c)}},{local:{api:twttr.bind(this,this.api),ui:twttr.bind(this,this.ui),log:twttr.bind(this,this.log)},remote:{trigger:{},initialize:{}}})},initialData:function(){var a={},b=$("div.details-pane.opened");return b.length!==0&&(a.size=b.width()),twttr.currentUser&&twttr.currentUser.profileLinkColor&&(a.styles=[["a",["color","#"+twttr.currentUser.profileLinkColor]]]),a},stop:function(){this.socket.destroy()},maximize:function(){this.minimized&&(this.minimized=!1,this.run(this.url,this.options))},minimize:function(){this.stop(),this.attribution=$(this.DOMContainer).find(".media-attribution").detach(),this.minimized=!0},isRateLimited:function(){var a=(new Date).getTime();return a-this.interval>c?(this.limiter=0,this.interval=a,!1):this.limiter>=b},isPermitted:function(){return!0},isProtectedEndpoint:function(a){return twttr.currentUser["protected"]&&!this.isPermitted(this.socket.origin)?!0:!d[a]&&!e[a]?!0:!1},log:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b=b||{},c=c||$.noop,d=d||$.noop;if(this.minimized)return d("You cannot log information while your application is minimized");scribble("partner_event",{partner:this.config._name,origin:this.socket.origin,eventName:a,data:b}),c(!0)},api:function(a,b,c,d){d=d||$.noop;if(this.minimized)return d("You cannot access the API while your application is minimized");if(!this.config.enableAPI)return d("You do not have API Access");if(!!this.isRateLimited())return d("You have been rate-limited.");this.limiter++;if(this.isProtectedEndpoint(a))return d("You do not have access to that endpoint.");twttr.is.fn(b)&&(d=c,c=b,b=[]),twttr.API.util.makeRemoteRequest(a,b,{success:function(a){c&&c(a)},error:function(a){d&&d(a)}})},ui:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b=b||{},c=c||$.noop,d=d||$.noop;if(!this.config.validActions[a])return d("This is not a valid UI action.");if(this.minimized)return d("You cannot access interface components while your application is minimized");scribble("partner_ui_action",{partner:this.config._name,origin:this.socket.origin,actionName:a,data:b}),twttr.platform.interfaceActions[a].apply(this,[b,c,d])}})})(),a(twttr.platform.BaseApplication)})}),provide("platform/EmbeddedApplication",function(a){using().as(function(b){var c=twttr.klass("twttr.platform.EmbeddedApplication",function(a,b){b=b||{},twttr.platform.BaseApplication.apply(this,arguments),this.tweet=b.tweet||null,this.originalUrl=b.originalUrl||null,this.applicationType=twttr.platform.application_types.embedded});c.subclassOf(twttr.platform.BaseApplication),c.methods({initialData:function(){var a=twttr.platform.BaseApplication.prototype.initialData.call(this);return a},log:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b.original_url=this.originalUrl,twttr.platform.BaseApplication.prototype.log.apply(this,arguments)}}),a(c)})}),provide("platform/SandboxedApplication",function(a){using().as(function(b){twttr.klass("twttr.platform.SandboxedApplication",function(a,b){twttr.platform.EmbeddedApplication.apply(this,arguments)}).subclassOf(twttr.platform.EmbeddedApplication).statics({remoteUrl:function(a){var b=twttr.domains.local.match(/localhost/),c="/details_pane_content_sandbox.html";return b?"http://localhost:3000"+c:twttr.assets.path(c,{isSSL:twttr.isSSL()&&a})}}).methods({run:function(a){twttr.platform.EmbeddedApplication.prototype.run.call(this,twttr.platform.SandboxedApplication.remoteUrl($.browser.msie||a.security),a)},initialData:function(){var a=twttr.platform.EmbeddedApplication.prototype.initialData.call(this);return twttr.currentUser&&twttr.currentUser.profileLinkColor&&a.styles.push([".sandboxed-media a",["color","#"+twttr.currentUser.profileLinkColor]]),$.extend({},a,{htmlContent:this.options.htmlContent})}}),a(twttr.platform.SandboxedApplication)})}),provide("sandboxedAjax",function(a){using().as(function(b){twttr.klass("twttr.AjaxSandboxer",function(){this._nextRequestId=0,this._requests={},this._sockets=[null,null]}).statics({TIMEOUT:5e3}).methods({send:function(a){a.timeout||(a.timeout=twttr.AjaxSandboxer.TIMEOUT),this._useSandbox()?this._sendWithSandbox(a):this._sendWithoutSandbox(a)},_useSandbox:function(){return twttr.isSSL()},_sendWithSandbox:function(a){security=!!(a.url.match(/^https:/)||twttr.isSSL()&&a.url.match(/^\/\//)),$.browser.msie&&(security=1),index=security?0:1,this._sockets[index]||(this._sockets[index]=this._generateSocket(this._remoteUrl(security)));var b=this._generateSandboxRequest(a);this._sockets[index].postMessage(JSON.stringify(b))},_sendWithoutSandbox:function(a){$.ajax(a)},_generateSandboxRequest:function(a){var b=++this._nextRequestId;a=twttr.merge({},a);var c={id:b,callbacks:{success:a.success,error:a.error,before:a.before,complete:a.complete},request:{id:b,data:a}};return delete a.success,delete a.error,delete a.complete,delete a.before,this._requests[b]=c,c.request},_remoteUrl:function(a){var b="/jsonp_sandbox.html";return twttr.domains.local.match(/localhost/)?"http://localhost:3000"+b:twttr.assets.path(b,{isSSL:a})},_generateSocket:function(a){var b=this;return new easyXDM.Socket({remote:a,onMessage:function(a,c){var d=JSON.parse(a),e=b._requests[d.id];e&&e.callbacks[d.callbackName]&&e.callbacks[d.callbackName].apply(null,d.callbackArgs),d.callbackName==="complete"&&delete b._requests[d.id]}})}}),twttr.sandboxedAjax=new twttr.AjaxSandboxer,a(twttr.sandboxedAjax)})}),provide("media/types",function(a){using("util","constants").as(function(b){function c(a){return twttr.isSSL()?a.replace(/^http:/,"https:"):a}twttr.provide("twttr.regexps",{protocol:/(?:https?\:\/\/)/,protocol_no_ssl:/(?:http\:\/\/)/,optional_protocol:/(?:(?:https?\:\/\/)?(?:www\.)?)/,protocol_subdomain:/(?:(?:https?\:\/\/)?(?:[\w\-]+\.))/,optional_protocol_subdomain:/(?:(?:https?\:\/\/)?(?:[\w\-]+\.)?)/,wildcard:/[a-zA-Z0-9_#\.\-\?\&\=\/]+/,itunes_protocol:/(?:https?\:\/\/)?(?:[a-z]\.)?itunes\.apple\.com(?:\/[a-z][a-z])?/}),twttr.mediaType("Youtube",{title:"YouTube",icon:"video",domain:"//www.youtube.com",ssl:!0,flaggable:!0,height:359,matchers:{tinyUrl:/^#{optional_protocol}?youtu\.be\/([a-zA-Z0-9_\-\?\&\=\/]+)/i,standardUrl:/^#{optional_protocol}?youtube\.com\/watch[a-zA-Z0-9_\-\?\&\=\/]+/i},process:function(a,b){this.data.width=b&&b.maxwidth||390,this.data.height=b&&b.maxwidth?this.calcHeight(b.maxwidth):307,this.url.match(this.constructor.matchers.tinyUrl)?(this.data.id=this.location.pathname.replace(/\//g,""),a()):this.location.search.match(/[\?\&]v\=([\w\-]+)(?:\&|$)/)&&(this.data.id=this.location.query("v"),a())},metadata:function(a){var c={image:b.util.supplant("//img.youtube.com/vi/{id}/0.jpg",this.data)};a(c)},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},render:function(a){this.renderIframe(a,twttr.proto+"://www.youtube.com/embed/"+this.data.id+"?wmode=opaque")}}),twttr.mediaType("Twitter",{icon:"tweet",domain:"//twitter.com",ssl:!0,skipAttributionInDiscovery:!0,matchers:{permalink:/^#{optional_protocol}?twitter\.com\/(?:#!?\/)?\w{1,20}\/status\/(\d+)[\/]?$/i},process:function(a){var b=this;twttr.API.Status.find(this.slug,function(c){b.data.tweet=c,twttr.isT1?using("//platform.twitter.com/js/vendor/twt/dist/twt.all.min.js","css!//platform.twitter.com/twt/twt.css",function(){if(!window.twt)return;for(var c=twttr.languages.length;c--;)if(twttr.languages[c].current){twt.settings.lang=twttr.languages[c].code;break}var d=twt.tweet(b.data.tweet.attributes);b.tweetHtml=d.html(),a()}).load():a()})},render:function(a){if(!twttr.isT1)$(a).append((new twttr.views.EmbeddedTweet(this.data.tweet)).html());else{var b=this;$(a).append(Mustache.to_html("<div class='tweet-embed'>{{{tweet}}}</div>",{tweet:b.tweetHtml}))}}}),twttr.mediaType("CopiedTwimg",{icon:"photo",domain:"//twitter.com",ssl:!0,flaggable:!0,deciderKey:"photo_copy_paste_inception",skipAttributionInDiscovery:!0,attributionTemplate:"PhotobucketAttribution",matchers:{media:/^#{optional_protocol}?twitter\.com\/(?:#!?\/)?\w{1,20}\/status\/(\d+)\/photo\/\d*$/i},getImageURL:function(){twttr.media.types.Twimg.prototype.getImageURL.apply(this,arguments)},metadata:function(){twttr.media.types.Twimg.prototype.metadata.apply(this,arguments)},process:function(a){var b=this;twttr.API.Status.find(this.slug,function(c){b.data.tweet=c,c.entities&&c.entities.media&&$.each(c.entities.media,function(a,c){if(c.expanded_url.indexOf(b.slug)>-1)return b.foundMedia=c,!1});var d;twttr.isSSL()?d=b.foundMedia.media_url_https:d=b.foundMedia.media_url,b.data.src=d,b.data.url=b.foundMedia.expanded_url,b.data.name=b.constructor._name,a()})},render:function(a){var b=this.data.tweet;if(!this.foundMedia)return;var c={name:"copied-twimg",time_ago:twttr.helpers.timeAgo(twttr.helpers.parseDateString(b.createdAt),!0),url:this.foundMedia.url,media_url:twttr.isSSL()?this.foundMedia.media_url_https:this.foundMedia.media_url,screen_name:b.user.screenName},d=$(a);d.append((new twttr.views.CopiedTwimg(c)).html()),d.find(".inline-media-image img").bind("load",function(){$(this).closest(".media-instance-container").width(this.width)}),twttr.app.isOnPage("permalink")&&d.find(".user-profile-link").click(function(){return twttr.router.routeTo(twttr.router.profilePath({screen_name:$(this).data("screen-name")})),!1})}}),twttr.mediaType("Twimg",{icon:"photo",domain:"//twitter.com",attributionName:"Twitter",flaggable:!0,ssl:!0,skipAttributionInDiscovery:!0,matchers:{twimg:/^#{optional_protocol}?p\.twimg\.com\/[a-zA-Z0-9_-]+\.(?:jpg|png|gif)$/i,media:/^#{optional_protocol}?pic\.twitter\.com\/[a-zA-Z0-9]+$/i},attributionTemplate:"PhotobucketAttribution",getImageURL:function(a,c){var d=this;this.process(function(){d.metadata(function(d){if(d&&d.image){var e=d.image;a==b.constants.imageSizes.small?e+=":thumb":a==b.constants.imageSizes.large&&(e+=":large"),c(e)}else c(null)})})},metadata:function(a){a({image:this.data.src,name:this.data.name,expandedUrl:this.data.url})},process:function(a,b){var d=twttr.media.types.Twimg.matchers,e=this,f,g;if(this.url.match(d.twimg))this.data.src=c(this.url),this.data.url=c(this.url),this.data.displayUrl=this.url,this.data.name=this.constructor._name;else{if(!this.tweet||!this.tweet.entities.media){a();return}var i=$.map(this.tweet.entities.media,function(a){return a.display_url});if($.inArray(this.url,i)<0){a();return}$.each(this.tweet.entities.media,function(){if(this.display_url==e.url){g=this;return}});if(!g){a();return}twttr.isSSL()?f=g.media_url_https:f=g.media_url,this.data.src=f,this.data.url=b&&b.linkLarge===!0?g.expanded_url+"/large":g.url,this.data.displayUrl=g.display_url,this.data.name=this.constructor._name}a()},render:function(a){var b='<div class="twimg">                <a class="inline-media-image" data-inline-type="{{name}}" href="{{url}}" target="_blank" title="{{displayUrl}}">                  <img src="{{src}}" alt="{{displayUrl}}"/>                 </a>              </div>';$(a).append(Mustache.to_html(b,this.data))}}),twttr.mediaType("Ustream",{icon:"video",domain:"http://ustream.tv",ssl:!1,flaggable:!0,matchers:{recorded:/^#{optional_protocol}?ustream\.tv\/(recorded\/(?:\d+))/i,channel:/^#{optional_protocol}?ustream\.tv\/(channel\/(?:[\w\-]+)\/?)/i},metadata:function(a){var b=null;this.data&&this.data.imageUrl&&this.data.imageUrl.small&&(b=this.data.imageUrl.small),a({title:this.data.title,description:this.data.description?twttr.helpers.truncate(this.data.description,255,"..."):"",image:b})},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){b(a.image)})})},process:function(a,b){var c=this;this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),(this.slug.match(this.constructor.re.channel)||this.slug.match(this.constructor.re.video))&&twttr.sandboxedAjax.send({url:"http://api.ustream.tv/json/channel/"+RegExp.$1+"/getInfo",dataType:"jsonp",data:{key:this.constructor.API_KEY,maxwidth:this.data.width},success:function(b){b!==null&&(c.data.type="channel",c.data.embed=c.useOpaqueModeForFlash(b.embedTag),c.data.imageUrl=b.imageUrl),a()}})},content:function(){return this.data.type==="channel"?this.data.embed:Mustache.to_html(this.constructor.templates[this.data.type],this.data)}}).statics({API_KEY:"12ab548e85128e0d3182ba3a346c3428",re:{video:/^recorded\/(\d+)/,channel:/^channel\/([\w\-]+)\/?/},templates:{video:'        <object width="{{width}}" height="{{height}}">          <param name="flashvars" value="autoplay=false&amp;vid={{videoId}}&amp;"/>          <param name="allowfullscreen" value="true"/>          <param name="allowscriptaccess" value="always"/>          <param name="wmode" value="opaque"/>          <param name="src" value="http://www.ustream.tv/flash/video/{{videoId}}"/>          <embed            flashvars="loc=%2F&amp;autoplay=false&amp;vid={{videoId}}&amp;"            width="{{width}}"            height="{{height}}"            allowfullscreen="true"            allowscriptaccess="always"            wmode="opaque"            src="http://www.ustream.tv/flash/video/{{videoId}}"            type="application/x-shockwave-flash" />        </object>'}}),twttr.mediaType("Vevo",{icon:"video",domain:"http://vevo.com",ssl:!1,flaggable:!0,matchers:{standardVideo:/^#{optional_protocol}?vevo\.com\/watch\/[\w-]+\/[\w-]+\/([a-zA-Z0-9_]+)/i},process:function(a,b){this.data.id=this.slug,this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),a()},content:function(){var a='<object width="{{width}}" height="{{height}}">                <param name="movie" value="http://www.vevo.com/VideoPlayer/Embedded?videoId={{id}}&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961&playerType=embedded"/>                <param name="bgcolor" value="#000000"/>                <param name="allowFullScreen" value="true"/>                <param name="allowScriptAccess" value="always"/>                <param name="wmode" value="opaque"/>                <embed                  src="http://www.vevo.com/VideoPlayer/Embedded?videoId={{id}}&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961&playerType=embedded"                   type="application/x-shockwave-flash"                   allowfullscreen="true"                   allowscriptaccess="always"                   wmode="opaque"                   width="{{width}}"                   height="{{height}}"                   bgcolor="#000000" />              </object>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Flickr",{icon:"photo",favicon:twttr.isSSL()?"https://secure.flickr.com/favicon.ico":"http://www.flickr.com/favicon.ico",domain:twttr.isSSL()?"https://secure.flickr.com":"http://www.flickr.com",deciderKey:"phoenix_flickr_details",flaggable:!0,matchers:{profile:/^#{optional_protocol}?flickr\.com\/(?:photos|people)\/([\w\@\-]+)\/?$/i,photo:/^#{optional_protocol}?flickr\.com\/photos\/[\w\@\-]+\/(\d+)\/?/i,sets:/^#{optional_protocol}?flickr\.com\/photos\/(?:[\w\@\-]+)\/sets\/(\d+)\/?(?:show\/?)?$/i,galleries:/^#{optional_protocol}?flickr\.com\/photos\/([\w\@\-]+)\/galleries\/(\d+)\/?$/i,pool:/^#{optional_protocol}?flickr\.com\/groups\/([\w\@\-]+)\/?(?:pool\/|discuss\/)?$/i},ssl:!0,metadata:function(a){var b;this.data.photos&&this.data.photos.length>=1?(b=this.data.photos[0],a({image:Mustache.to_html("//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}.jpg",b),title:this.data.title,description:this.data.description,author:{name:this.data.author_name,url:this.data.author_url}})):a(null)},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},process:function(a,b){this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),this.data.domain=this.constructor.domain;var c=twttr.media.types.Flickr.matchers,d=this,e=this.url;if(e.match(c.photo)){var f=RegExp.$1;this.makeRequest({data:{method:"flickr.photos.getInfo",photo_id:f},success:function(b){b.photo&&(d.data.author_name=b.photo.owner.realname,d.data.author_url=d.constructor.domain+"/photos/"+b.photo.owner.nsid,b.photo.media&&b.photo.media=="video"&&(d.data.isVideo=!0),d.data.photos=[b.photo]),a()}})}else e.match(c.sets)?this._makeSetRequest(RegExp.$1,a):e.match(c.profile)?this.lookUpUserPhotos(RegExp.$1,this.slug,a):e.match(c.pool)?this._makeGroupRequestByName(RegExp.$1,a):e.match(c.galleries)&&this.makeRequest({data:{method:"flickr.urls.lookupGallery",url:"flickr.com/photos/"+RegExp.$1+"/galleries/"+RegExp.$2},success:function(b){var c=b.gallery.id;d.makeRequest({data:{method:"flickr.galleries.getPhotos",gallery_id:c},success:function(b){d.data.photos=b.photos.photo.slice(0,16),d.data.isGallery=1,a()}})}});return},content:function(){var a="",b=twttr.media.types.Flickr;if(this.data.photos.length==1)if(this.data.isVideo){var c=this.data.photos[0];c.domain=this.data.domain,a+=Mustache.to_html(b.templates.video,c)}else this.data.photos[0].href=this.data.photos[0].urls.url[0]._content,a+=Mustache.to_html(b.templates.photo,this.data.photos[0]);else{a='<div class="flickr-group">'+this.createThumbList(this.data.photos)+"</div>";if(this.data.isGallery)return a;var d;this.data.set_id?d=b.photoSetFlashVars:this.data.group_id?d=b.photoGroupFlashVars:d=b.photoUserFlashVars,d=twttr.merge({},b.defaultSlideshowFlashVars,d,!0);var e=[];jQuery.each(d,function(a,b){e.push(a+"="+b)}),e=Mustache.to_html(e.join("&"),this.data),a+=Mustache.to_html(b.templates.slideshow,{flashvars:e,domain:this.data.domain})}return a}}).statics({API_KEY:"2a56884b56a00758525eaa2fee16a798",SECRET:"7c794fe3256175b6",REST_DOMAIN:"//widgets.platform.twitter.com",defaultSlideshowFlashVars:{lang:"en-us",offsite:!0,minH:100,minW:100},templates:{video:'<object width="{{width}}" height="{{height}}"                   type="application/x-shockwave-flash"                   data="{{domain}}/apps/video/stewart.swf?v=71377"                   classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">                   <param name="flashvars" value="intl_lang=en-us&photo_secret={{secret}}&photo_id={{id}}"/>                   <param name="movie" value="{{domain}}/apps/video/stewart.swf?v=71377"/>                   <param name="bgcolor" value="#000000"/>                   <param name="allowFullScreen" value="true"/>                   <param name="wmode" value="opaque"/>                   <embed                     type="application/x-shockwave-flash"                     src="{{domain}}/apps/video/stewart.swf?v=71377"                     bgcolor="#000000"                     allowfullscreen="true"                     wmode="opaque"                     flashvars="intl_lang=en-us&photo_secret={{secret}}&photo_id={{id}}"                     height="{{height}}"                     width="{{width}}" />                 </object>',photo:'<div class="flickr-photo">                   <a href="{{href}}" target="_blank">                     <img src="//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}.jpg"/>                   </a>                 </div>',set:'<a href="{{href}}" style="text-decoration:none;" target="_blank">                <img class="flickr-thumb" src="//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}_s.jpg"/>              </a>',slideshow:'<embed type="application/x-shockwave-flash"                             src="{{domain}}/apps/slideshow/show.swf?v=107931"                             width="{{width}}"                             height="{{height}}"                             id="slideShowMovie"                             bgcolor="#000000"                             quality="high"                             allowfullscreen="true"                             allowscriptaccess="always"                             wmode="opaque"                             flashvars={{flashvars}} />'},photoUserFlashVars:{user_id:"{{user_id}}",page_show_back_url:"/photos/{{user_name}}/",page_show_url:"/photos/{{user_name}}/show/"},photoGroupFlashVars:{group_id:"{{group_id}}",page_show_url:"/groups/{{group_id}}/pool/show/",page_show_back_url:"/groups/{{group_id}}/pool/"},photoSetFlashVars:{set_id:"{{set_id}}",page_show_back_url:"/photos/{{user_name}}/sets/{{set_id}}/",page_show_url:"/photos/{{user_name}}/sets/{{set_id}}/show/"}}).methods({base58:function(a){var b="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",c=a.length,d=0,e=1;for(var f=c-1;f>=0;f--)d+=e*b.indexOf(a[f]),e*=b.length;return d},lookUpUserPhotos:function(a,b,c){var d=this;this.makeRequest({data:{method:"flickr.urls.lookupUser",url:"flickr.com/photos/"+a},success:function(b){if(b.stat==="fail"){c();return}var e=b.user.id,f=b.user.username._content;d.makeRequest({data:{method:"flickr.people.getPublicPhotos",user_id:e},success:function(b){d.data.photos=b.photos.photo.slice(0,16),d.data.user_id=e,d.data.user_name=a,d.data.author_name=f,d.data.author_url=d.constructor.domain+"/photos/"+e,c()}})}})},createThumbList:function(a){var b="http://www.flickr.com/photos",c=this;return $.map(a,function(a,c){return a.href=[b,a.owner,a.id].join("/"),Mustache.to_html(twttr.media.types.Flickr.templates.set,a)}).join("")},_makeGroupRequestByName:function(a,b){this.makeRequest({data:{method:"flickr.urls.lookupGroup",url:"flickr.com/groups/"+a},success:twttr.bind(this,function(a){this._makeGroupRequestById(a.group.id,b)})})},_makeGroupRequestById:function(a,b){this.makeRequest({data:{method:"flickr.groups.pools.getPhotos",group_id:a},success:twttr.bind(this,function(c){this.data.photos=c.photos.photo.slice(0,16),this.data.group_id=a,b()})})},_makeSetRequest:function(a,b){this.makeRequest({data:{method:"flickr.photosets.getPhotos",photoset_id:a},success:twttr.bind(this,function(a){var c=a.photoset.owner;this.data.photos=a.photoset.photo.slice(0,16),twttr.each(this.data.photos,function(a){a.owner=c}),this.data.set_id=a.photoset.id,this.data.user_name=c,this.data.author_name=a.photoset.ownername,this.data.author_url=this.constructor.domain+"/photos/"+a.photoset.owner,b()})})},makeRequest:function(a){var b={url:twttr.media.types.Flickr.REST_DOMAIN+"/services/rest",dataType:"jsonp",jsonp:"jsoncallback",data:{format:"json",api_key:twttr.media.types.Flickr.API_KEY},success:function(a){}};twttr.sandboxedAjax.send(twttr.merge({},b,a,!0))}}),twttr.mediaType("DeviantArt",{title:"deviantART",icon:"photo",domain:"http://deviantart.com",flaggable:!0,matchers:{canonical:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/art\/(?:[\w\@-]+))/i,oldStyle:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/deviation\/(?:[\w\@-]+))/i,gallery:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/gallery\/#\/d(?:[\w\@-]+))/i,favMe:/^(#{protocol}?fav\.me\/(?:[\w\@-]+))/i,oldView:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/view\/(?:[\w\@-]+))/i},process:function(a,b){b=b||{},twttr.sandboxedAjax.send({url:"http://backend.deviantart.com/oembed",data:{url:this.slug,format:"jsonp",maxwidth:b.maxwidth},dataType:"jsonp",success:twttr.bind(this,function(b){this.data.href=this.url,this.data.name=this.constructor._name,this.data.src=b.thumbnail_url,this.data.author_name=b.author_name,this.data.author_url=b.author_url,a()})})},attribution:function(){var a="         <div class='media-attribution'>           <span>via</span>            <a target='_blank' class='media-attribution-link' href='{{author_url}}'>{{author_name}}</a>            from <img src='{{icon_url}}'/>           <a target='_blank' data-media-type='{{media_type}}' class='media-attribution-link' href='{{url}}'>{{title}}</a>         </div>";return Mustache.to_html(a,{url:this.constructor.domain,icon_url:twttr.assets.path("/partner-favicons/DeviantArt.ico"),title:this.constructor.title||this.constructor._name,media_type:this.constructor._name,author_name:this.data.author_name,author_url:this.data.author_url})},content:function(){var a='<div class="deviantart">                <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                  <img src="{{src}}"/>                </a>              </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Vimeo",{icon:"video",domain:"//vimeo.com",ssl:!0,flaggable:!0,height:150,matchers:{video:/^#{optional_protocol}?vimeo\.com\/(\d+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.thumbnail_url?b(c.data.thumbnail_url):b(null)})},process:function(a,b){var c=this;b=b||{},this.data.video_id=this.slug,twttr.sandboxedAjax.send({url:"//vimeo.com/api/oembed.json",dataType:"jsonp",data:{url:"http://vimeo.com/"+this.slug,width:b.maxwidth||446},success:function(b){c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a()}})},render:function(a){this.renderIframe(a,"//player.vimeo.com/video/"+this.data.video_id.replace(/[^0-9]/g,""))}}),twttr.mediaType("Etsy",{icon:"photo",domain:"http://etsy.com",ssl:!1,matchers:{itemListing:/^#{optional_protocol}?etsy\.com\/listing\/(\d+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.images&&c.data.images.length>0?b(c.data.images[0].url_170x135):b(null)})},process:function(a,b){var c=this;b=b||{},this.data.itemId=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,twttr.sandboxedAjax.send({url:"http://openapi.etsy.com/v2/public/listings/"+this.slug+".js",dataType:"jsonp",data:{detail_level:"high",api_key:"qev732j7b8j44eg5pqsb38k4",includes:"Images(url_170x135):6",fields:"listing_id,title,price,currency_code,quantity",maxwidth:b.maxwidth},success:function(b){var d=b.results[0];c.data.title=d.title;switch(d.currency_code){case"USD":c.data.price=d.quantity+" for $"+(d.price||0);break;default:c.data.price=d.quantity+" for "+(d.price||0)+" "+d.currency_code}c.data.images=d.Images;var e=$.map(d.Images,function(a,b){return'<a class="inline-media-image" data-inline-type="{{name}}" target="_blank" href="{{href}}">                      <img class="thumb" src="'+a.url_170x135+'"/>                    </a>'}).join(""),f='            <div class="etsy">              <h3>{{title}}</h3>              <p>{{price}}</p>              <p>'+e+"</p>            </div>";c.data.html=Mustache.to_html(f,c.data),a()}})},content:function(){return this.data.html}}),twttr.mediaType("Photozou",{icon:"photo",domain:"http://photozou.jp",flaggable:!0,matchers:{photo:/^#{optional_protocol}?photozou\.(?:com|jp)\/photo\/show\/\d+\/(\d+)/i},ssl:!1,getImageURL:function(a,c,d){var e=this;this.process(function(){e.data&&e.data.src?d&&d<120||a==b.constants.imageSizes.small?c(e.data.smallSrc):c(e.data.src):c(null)})},process:function(a){this.data.src="http://photozou.jp/p/img/"+this.slug,this.data.smallSrc="http://photozou.jp/p/thumb/"+this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="photozou">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("TwitPic",{icon:"photo",domain:"//twitpic.com",flaggable:!0,matchers:{media:/^#{optional_protocol}?twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i},ssl:!0,process:function(a){this.data.src=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},getImageURL:function(a,c){if(this.slug){var d="";a==b.constants.imageSizes.medium?d="//twitpic.com/show/thumb/"+this.slug:a=="small"?d="//twitpic.com/show/mini/"+this.slug:d="//twitpic.com/show/iphone/"+this.slug,c(d)}else c(null)},content:function(){var a='<div class="twitpic">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="//twitpic.com/show/large/{{src}}"/>                 </a>              </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Twitgoo",{icon:"photo",domain:"http://twitgoo.com",ssl:!1,flaggable:!0,matchers:{image:/^#{optional_protocol}?twitgoo\.com\/(?!a\/)([a-zA-Z0-9\-\?\=]+)/i},getImageURL:function(a,c){this.slug?c(b.util.supplant("http://twitgoo.com/{src}/img",{src:this.slug})):c(null)},process:function(a){this.data.src=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="twitgoo">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="http://twitgoo.com/{{src}}/img"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("DailyBooth",{icon:"photo",domain:"//dailybooth.com",ssl:!0,matchers:{photo1:/^#{optional_protocol}?dailybooth\.com\/(u\/\w+)/i,photo2:/^#{optional_protocol}?dailybooth\.com\/(\w+\/\w+)/i},getImageURL:function(a,c){var d=this;this.process(function(){d.data?a===b.constants.imageSizes.original?c(d.data.src):c(d.data.smallImage):c(null)})},process:function(a){var b=this;this.data.href=c(this.url),this.data.name=this.constructor._name;if(this.slug.match(/^u\/(\w+)/))var d=parseInt(RegExp.$1,36),e=this.getBaseTen(d);else{var e=this.slug.match(/\w+\/(\w+)/);if(!e){a();return}e=e[1]}twttr.sandboxedAjax.send({url:"//api.dailybooth.com/v1/picture/"+e+".json",dataType:"jsonp",type:"get",success:function(d){b.data.src=c(d.urls.large),b.data.smallImage=c(d.urls.small),a()}})},content:function(){var a='<div class="dailybooth">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}).methods({getBaseTen:function(a){if(Number.prototype.toFixed)a=a.toFixed(5),a=parseFloat(a);else{var b=Math.floor(a),c=a-b;a=b+Math.round(c*1e14)/1e14}return a}}),twttr.mediaType("YFrog",{domain:"//yfrog.com",ssl:!0,flaggable:!0,icon:function(a){var b=this.slug.charAt(this.slug.length-1);switch(b){case"j":case"p":case"b":case"t":case"g":return"photo";case"z":case"f":case"s":return"video"}},matchers:{media:/^#{optional_protocol}?yfrog\.(?:com|ru|com\.tr|it|fr|co\.il|co\.uk|com\.pl|pl|eu|us)\/(\w+)/i},getImageURL:function(a,c){this.slug?this.icon()==="video"?c(b.util.supplant("//yfrog.com/{id}:frame",{id:this.slug})):a===b.constants.imageSizes.small?c(b.util.supplant("//yfrog.com/{id}:twthumb",{id:this.slug})):c(b.util.supplant("//yfrog.com/{id}:tw1",{id:this.slug})):c(null)},process:function(a){this.data.media_id=this.slug,this.data.href=this.url.replace(/\/$/,""),this.data.name=this.constructor._name,a()},content:function(){var a,b=this.data.media_id.charAt(this.data.media_id.length-1);if(b=="j"||b=="p"||b=="b"||b=="t"||b=="g")a='<div class="yfrog">               <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                 <img src="//yfrog.com/{{media_id}}:iphone">               </a>             </div>';else if(b=="z"||b=="f"||b=="s")a='<embed                src="//yfrog.com/{{media_id}}:embed"                width="100%"                allowFullScreen="true"                wmode="transparent"                type="application/x-shockwave-flash"/>';return a||(a=""),Mustache.to_html(a,this.data)}}),twttr.mediaType("Lockerz",{icon:"photo",domain:"//www.lockerz.com",ssl:!0,matchers:{tweetphoto:/^#{optional_protocol}?tweetphoto\.com\/(\d+)/i,plixi:/^#{protocol}?(?:(?:m|www)\.)?plixi\.com\/p\/(\d+)/i,lockerz:/^#{protocol}?(?:(?:m|www)\.)?lockerz\.com\/s\/([0-9\?\=\- ]+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.src?b(c.data.src):b(null)})},process:function(a){this.data.src="//api.plixi.com/api/tpapi.svc/imagefromurl?size=medium&url="+encodeURIComponent(this.url),this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="lockerz">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}" />                 </a>              </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Kiva",{icon:"generic",domain:"http://www.kiva.org",ssl:!1,matchers:{project:/^#{optional_protocol}?kiva\.org\/lend\/(\d+)/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.kiva.org/services/oembed",dataType:"jsonp",jsonp:"jsonp",data:{url:"http://www.kiva.org/lend/"+this.slug,format:"jsonp",maxwidth:b.maxwidth},success:function(b){c.data.html=b.html,a()}})},content:function(){return this.data.html}}),twttr.mediaType("TwitVid",{icon:"video",domain:"//www.twitvid.com",ssl:!0,flaggable:!0,favicon:"//www.twitvid.com/favicon.ico",matchers:{video:/^#{optional_protocol}?twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i},process:function(a,b){this.data.media_id=this.slug,this.data.width=b&&b.maxwidth||425,this.data.height=this.calcHeight(this.data.width),a()},metadata:function(a){a({image:b.util.supplant("//www.twitvid.com/{media_id}:largethumb",this.data)})},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},render:function(a){this.renderIframe(a,twttr.proto+"://www.twitvid.com/embed.php?autoplay=0&guid="+this.data.media_id)}}),twttr.mediaType("GoogleVideo",{icon:"video",domain:"http://video.google.com",ssl:!1,flaggable:!0,matchers:{video:/^#{optional_protocol}video\.google\.com\/([a-zA-Z0-9_\-\?\=\&\#]+)/i},process:function(a,b){this.data.width=400,this.data.height=326,b&&b.maxwidth&&b.maxwidth<this.data.width&&(this.data.width=b.maxwidth,this.data.height=Math.round(b.maxwidth*326/400)),this.slug.match(/#docid=(\-?\d+)/)?(this.data.doc_id=RegExp.$1,a()):this.slug.match(/\?docid=(\-?\d+)/)&&(this.data.doc_id=RegExp.$1,a())},content:function(){var a='         <embed type="application/x-shockwave-flash"                 id="VideoPlayback"                 src="http://video.google.com/googleplayer.swf?docid={{doc_id}}&hl=en&fs=true"                 style="width:{{width}}px;height:{{height}}px"                 allowFullScreen="true"                 allowScriptAccess="always"                wmode="opaque" />';return Mustache.to_html(a,this.data)}}),twttr.mediaType("JustinTV",{icon:"video",domain:"http://justin.tv",ssl:!1,flaggable:!0,matchers:{embed:/^#{protocol_no_ssl}([a-zA-Z0-9_\-\?\=]*\.)?justin\.tv\/[a-zA-Z0-9]+(\/b\/\d+)?\/?(\?\w*?)?(#\w*)?$/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.thumbnail_url?b(c.data.thumbnail_url):b(null)})},process:function(a,b){var c=this,d=400,e=300;twttr.sandboxedAjax.send({url:"http://api.justin.tv/api/embed/from_url.json",dataType:"jsonp",jsonp:"jsonp",data:{url:c.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),f.thumbnail_url&&(c.data.thumbnail_url=f.thumbnail_url),a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Kickstarter",{icon:"generic",domain:"//kickstarter.com",ssl:!0,matchers:{project:/^#{optional_protocol}?(kickstarter\.com\/projects\/[a-zA-Z0-9_\-]+\/[a-zA-Z0-9_\-]+)/i},process:function(a){this.data.height="380px",this.data.width="220px",a()},render:function(a){var b=this.slug;b.slice(-1)!=="/"&&(b+="/"),b+="widget/card.html",this.renderIframe(a,twttr.proto+"://www."+b)}}),twttr.mediaType("MTV",{icon:"video",domain:"http://mtv.com",ssl:!1,matchers:{video:/^#{optional_protocol}?mtv\.com\/videos\/([a-z0-9\-\_]+\/)+[0-9]+\/[a-z0-9\-\_]+\.jhtml(#[a-z0-9\=\&]+)?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.mtv.com/videos/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.url=b.url,b.width>315?(c.data.width=315,c.data.height=Math.floor(b.height*315/b.width)):(c.data.height=b.height,c.data.width=b.width),a())}})},content:function(){var a='<object width="{{width}}" height="{{height}}">                <param name="movie" value="{{url}}"/>                <param name="allowFullScreen" value="true"/>                <param name="allowscriptaccess" value="always"/>                <param name="wmode" value="opaque"/>                <embed src="{{url}}"                        type="application/x-shockwave-flash"                        allowscriptaccess="always"                        allowfullscreen="true"                        wmode="opaque"                        width="{{width}}"                        height="{{height}}"/>              </object>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("WashingtonPost",{icon:"video",domain:"http://washingtonpost.com",matchers:{video:/(^(?:#{protocol}?(?:[\w\-\_]+\.))?washingtonpost\.com\/wp-dyn\/content\/video\/\d{4}\/\d{2}\/\d{2}\/VI\d+\.html(#{wildcard})?)/i},ssl:!1,process:function(a,b){var c=this,d=400,e=225;twttr.sandboxedAjax.send({url:"http://specials.washingtonpost.com/tv/info.json",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("MSNBC",{icon:"video",domain:"http://msnbc.com",ssl:!1,matchers:{video:/(^(?:#{protocol}?(?:[\w\-\_]+\.))?msnbc\.msn\.com\/id\/\d{1,8}\/vp\/\d{1,8}(#{wildcard})?)/i},process:function(a,b){var c=this,d=420,e=245;twttr.sandboxedAjax.send({url:"http://www.polls.newsvine.com/_labs/twitter/oembed",type:"GET",dataType:"jsonp",data:{format:"jsonp",url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.resizeHtmlEmbed(f.html,b,d,e),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("CNN",{icon:"video",domain:"http://cnn.com",title:"CNN Video",ssl:!1,deciderKey:"phoenix_cnn_details",matchers:{video:/(^(?:#{protocol}?(?:(?:www|edition|us)\.)?)?cnn\.com\/video\/[\?|#]\/#{wildcard})/i},process:function(a,b){var c=this,d=this.url,e=416,f=374,g=d.split("?");g.length>2&&(g.pop(),d=g.join("?")),twttr.sandboxedAjax.send({url:"http://newspulse.cnn.com/widget/json/twitter-video",type:"GET",dataType:"jsonp",data:{format:"jsonp",maxwidth:b&&b.maxwidth||e,url:d},success:function(d){d.error||(c.data.embed=c.resizeHtmlEmbed(d.html,b,e,f),c.data.attribution_url="http://cnn.com/video",c.data.width=d.width,c.data.height=d.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Apple",{icon:twttr.isT1?function(){switch(this.matchLabel){case"song":return"song";case"album":return"album";case"music_video":case"video":case"movie":case"tv":return"video";case"software":return"software";case"event":case"preorder":case"playlist":case"ping_playlist":case"podcast":case"book":default:return"generic"}}:"song",domain:"http://itunes.apple.com",deciderKey:"phoenix_apple_itunes",matchers:{song:/^#{itunes_protocol}(?:\/album)\/.*\?i=/i,album:/^#{itunes_protocol}(?:\/album)\//i,event:/^#{itunes_protocol}\/event\//i,music_video:/^#{itunes_protocol}(?:\/music-video)\//i,video:/^#{itunes_protocol}(?:\/video)\//i,software:/^#{itunes_protocol}(?:\/app)\//i,playlist:/^#{itunes_protocol}(?:\/imix)\//i,ping_playlist:/^#{itunes_protocol}(?:\/imixes)\?/i,preorder:/^#{itunes_protocol}(?:\/preorder)\//i},ssl:!1,getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.src?b(c.data.src):b(null)})},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://itunes.apple.com/WebObjects/MZStore.woa/wa/remotePreview",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,c.data.attribution_icon=b.attribution_icon,c.data.attribution_url=b.attribution_url,c.data.attribution_title="iTunes",b.favicon&&(c.data.attribution_icon=b.favicon),b.faviconLink&&(c.data.attribution_url=b.faviconLink),b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}});var d={_queue:[],push:function(a,b){b===!0?this._queue.unshift(a):this._queue.push(a),this._process()},_process:function(){var a=this;if(this._isProcessing)return;this._isProcessing=!0,setTimeout(function(){var b=a._queue.shift();a._isProcessing=!1,b&&(b(),a._process())},200)}};twttr.mediaType("Instagram",{icon:"photo",domain:"//instagr.am",title:"Instagram",deciderKey:"phoenix_instagram_and_friends",ssl:!0,height:301,matchers:{video:/^#{optional_protocol_subdomain}?(?:instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+\/?)/i},getImageURL:function(a,c){var d=this;this.process(function(){if(d.data&&d.data.href){var e=b.constants.imageSizes;a===e.small||a===e.medium?c(d.data.smallSrc):c(d.data.src)}else c(null)},{size:a})},process:function(a,c){this.data.href=Mustache.to_html("{{domain}}/p/{{slug}}",{domain:this.constructor.domain,slug:this.slug}),this.data.src=b.util.joinPath(this.data.href,"media/?size=l"),this.data.smallSrc=b.util.joinPath(this.data.href,"media/?size=t"),this.data.name=this.constructor._name,d.push(a,c&&c.size===b.constants.imageSizes.large)},content:function(){var a='        <div class="instagram">          <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">            <img src="{{src}}"/>          </a>        </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Rdio",{icon:"song",domain:"//rdio.com",ssl:!0,matchers:{rdio:/^#{optional_protocol}(?:rd\.io|rdio\.com)\/#{wildcard}/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//rdio.com/api/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth||390},success:function(b){b.error||(c.data.embed=c.resizeHtmlEmbed(b.html),a())}})},content:function(){return this.data.embed},getImageURL:function(a,b){var c=this;this.process(function(){b(this.url)},{maxwidth:500})}}),twttr.mediaType("Dipdive",{domain:"http://dipdive.com",ssl:!1,deciderKey:"phoenix_dipdive_details",matchers:{photos:/^#{optional_protocol_subdomain}?dipdive\.com\/(((?:member\/[a-zA-Z0-9\-]+\/)?pictures\/([0-9]+))|(v\/[a-zA-Z0-9]+))/i,videos:/^#{optional_protocol_subdomain}?dipdive\.com\/(((?:member\/[a-zA-Z0-9\-]+\/)?media\/([0-9]+))|(v\/[a-zA-Z0-9]+))/i},icon:function(a){return this._icon?this._icon:(this.url.match(/pictures/)?this._icon="photo":this._icon="video",this._icon)},process:function(a,b){var c=this,d=425,e=385;b=b||{},twttr.sandboxedAjax.send({url:"http://api.dipdive.com/oembed.jsonp",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(f.type==="photo"?(c.data.type="photo",c.data.href=f.url,c.data.name=c.constructor._name):(c.data.embed=c.resizeHtmlEmbed(f.html,b,d,e),c.data.width=f.width,c.data.height=f.height),a())}})},content:function(){var a;return this.data.type==="photo"?(a='<div class="dipdive">               <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                 <img src="{{href}}"/>               </a>             </div>',Mustache.to_html(a,this.data)):this.data.embed},flaggable:!0}),twttr.mediaType("SlideShare",{icon:"generic",domain:"http://slideshare.com",ssl:!0,deciderKey:"phoenix_instagram_and_friends",matchers:{slides:/^#{optional_protocol}?slideshare\.(?:com|net)\/[a-zA-Z0-9\.]+\/[a-zA-Z0-9-]+\/?#{wildcard}?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"https://www.slideshare.net/api/oembed/2",type:"GET",dataType:"jsonp",data:{url:this.url,format:"json",maxwidth:b.maxwidth||390},success:function(b){b.error||(c.data.embed=c.resizeHtmlEmbed(b.html),c.data.attribution_url=b.author_url,c.data.attribution_title=b.author_name,a())}})},content:function(){return this.data.embed},flaggable:!0}),twttr.mediaType("BlipTV",{icon:"video",domain:"//blip.tv",flaggable:!0,title:"blip.tv",ssl:!1,deciderKey:"phoenix_instagram_and_friends",matchers:{videos:/^#{optional_protocol}?blip\.tv\/(?:(?:file\/[\w-]+)|(?:(?:[\w-]+\/)?[\w-]+-(?:\d+)))\/?/i},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.thumbnail_url)})},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//blip.tv/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Livestream",{icon:"video",domain:"http://www.livestream.com",ssl:!1,flaggable:!0,matchers:{wwwlivestream:/^#{optional_protocol}?livestream\.com\/[\w_]+(\/#{wildcard})?/i,livestream:/^#{protocol}?livestre\.am\/[\w_]+(\/#{wildcard})?/i,twitcam:/^#{protocol}?twitcam\.(?:livestream\.)com\/[\w_]+(\/#{wildcard})?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.livestream.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("WallStreetJournal",{icon:"video",domain:"http://online.wsj.com",title:"The Wall Street Journal Digital Network",ssl:!1,matchers:{video:/^#{protocol}?online\.wsj\.com\/video\/[A-Z0-9a-z\-]+\/[A-Z0-9a-z\-]+\.html/i},process:function(a,b){var c=this,d=450,e=344;b=b||{},twttr.sandboxedAjax.send({url:"http://online.wsj.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Hulu",{icon:"video",domain:"http://www.hulu.com",ssl:!1,height:253,matchers:{video:/^#{optional_protocol}?hulu\.com\/w(atch)?\/([a-zA-Z0-9]+)/i},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.thumbnail_url)})},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.hulu.com/api/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=c.useOpaqueModeForFlash(b.html),c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("NHL",{icon:"video",domain:"http://www.nhl.com",ssl:!1,matchers:{video:/^#{protocol}?video\.([a-z]{4,11}\.)?nhl\.com\/videocenter\/console\?(((catid=-?\d+&)?id=\d+)|(hlg=\d{8},\d,\d{1,4}(&event=[A-Z0-9]{4,6})?)|(hlp=\d{5,10}(&event=[A-Z0-9]{4,6})?))/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://video.nhl.com/videocenter/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=c.useOpaqueModeForFlash(b.html),c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Meetup",{icon:"generic",domain:"//www.meetup.com",deciderKey:"phoenix_local_meetup",ssl:!0,matchers:{anevent:/^#{protocol_no_ssl}?(?:(((www|dev)\.){0,2}?meetup.com)|meetu.ps)\/(?:u\/)?[\w\-]{3,}(?:[a-zA-Z0-9_#\.\-\?\&\=\/]+)/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//api.meetup.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.html=b.html,a())}})},content:function(){return this.data.html}}),twttr.mediaType("Plancast",{icon:"generic",domain:"//plancast.com",deciderKey:"phoenix_local_plancast",ssl:!0,matchers:{anevent:/^#{protocol}?(?:[a-z0-9]+\.)?plancast\.com\/p\/(?:[a-z0-9]+)\/?$/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var d=this;b=b||{},twttr.sandboxedAjax.send({url:"//plancast.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(d.data.src=c(b.src),b.height&&(d.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Gowalla",{icon:"generic",domain:"//www.gowalla.com",deciderKey:"phoenix_local_gowalla",ssl:!0,matchers:{anevent:/^#{protocol}?(((go)?wal.la)\/([chpnt])\/\w+\/?|gowalla.com\/(trips|challenges|checkins|pins)\/\d+\/?)/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//gowalla.com/api/twitter_oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Foursquare",{icon:"generic",domain:"//www.foursquare.com",deciderKey:"phoenix_local_foursquare",ssl:!0,matchers:{anevent:/^#{optional_protocol}?foursquare\.com\/([a-zA-Z0-9\-]+)\/checkin\/(#{wildcard})/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"https://api.foursquare.com/services/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Amazon",{icon:"generic",domain:"//www.amazon.com",deciderKey:"phoenix_amazon_details",ssl:!0,matchers:{review:/^#{protocol}?www\.amazon\.(com|de|fr|ca|it|(?:co\.(?:jp|uk)))(?:(?!(\/[^\/]*)?\/[bs][\/\?]|\/gp\/browse\.html|\/aw\/ri\/|\/gp\/search|\/search|\/gp\/feature|\/gp\/goldbox|\/gp\/registry))(?:#{wildcard}?)/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=twttr.media.types.Amazon.matchers,d=this,e=this.url;b=b||{},matches=e.match(c.review),matches[1]&&twttr.sandboxedAjax.send({url:"//www.amazon."+matches[1]+"/gp/twitter/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(d.data.src=b.src,b.height&&(d.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("AolVideo",{icon:"video",domain:"http://www.aol.com",title:"Aol",deciderKey:"phoenix_aol_video",matchers:{video:/^#{protocol_no_ssl}?share\.aolvideo\.com\/twitter\.php\?video\=(#{wildcard})/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://share.aolvideo.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Photobucket",{icon:"photo",domain:"http://photobucket.com",flaggable:!0,matchers:{user_groups:/^#{protocol}?(?:g?(?:i|s)(?:\d+|mg))\.photobucket\.com\/(?:albums|groups)\/(?:#{wildcard})/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://photobucket.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url.replace(/^([^?]*[^/])(?=\?)/,"$1/"),maxwidth:b.maxwidth},success:function(b){b.error||(c.data.href=b.url,c.data.name=c.constructor._name,a())}})},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.href)})},render:function(a){var b='        <div class="photobucket">          <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">            <img src="{{href}}"/>          </a>        </div>';$(a).append(Mustache.to_html(b,this.data))}}),twttr.mediaType("With",{icon:"photo",domain:twttr.isSSL()?"https://with.me":"http://with.me",ssl:!0,deciderKey:"phoenix_withme_details",matchers:{project:/^#{optional_protocol}?with\.me[\/\?]\??[a-zA-Z0-9]+$/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//with.me/services/oembed",dataType:"jsonp",type:"GET",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){!b.error&&b.hasOwnProperty("url")&&(c.data.href=c.url,c.data.src=b.url,c.data.title=b.title,a())}})},content:function(){var a='           <div class="with-me">             <a class="inline-media-image" href="{{href}}" target="_blank">               <img src="{{src}}"/>             </a>           </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Facebook",{icon:"photo",domain:twttr.isSSL()?"https://facebook.com":"http://facebook.com",ssl:!0,deciderKey:"phoenix_facebook_details",matchers:{project:/^#{optional_protocol}?facebook\.com\/([a-zA-Z0-9_#\.\-\?\&\=\/])*pid=(#{wildcard})/i},process:function(a,b){var c="https://www.facebook.com/twitter/photo/?id={{id}}&l={{l}}&pid={{pid}}",d=this;d.data.href=this.url;var e=twttr.util.paramsFromUrl(this.url);e&&e.id&&e.l&&e.pid&&(d.data.src=Mustache.to_html(c,e),a())},getImageURL:function(a,b){var c=this;this.process(function(){c.data.src?b(c.data.src):b(null)})},content:function(){var a='            <div class="facebook-dp">              <a class="inline-media-image" href="{{href}}" target="_blank">                <img src="{{src}}"/>              </a>            </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("WordPress",{icon:"generic",domain:"//wordpress.com",ssl:!0,deciderKey:"phoenix_wordpress_details",matchers:{tinyUrl:/^#{optional_protocol}?(?:[a-z0-9]+\.)?wp\.me[\/\?][a-zA-Z0-9_#\.\-\?\&\=\/]+$/i,standardUrl:/^#{optional_protocol}?(?:[a-z0-9]+\.)?wordpress\.com[\/\?][a-zA-Z0-9_#\.\-\?\&\=\/]+$/i},process:function(a,b){var c=this;b=b||{};var d="//public-api.wordpress.com/oembed/1.0/?for=twitter.com&as_article=true",e={url:this.url};twttr.app.isOnPage("permalink")||(e.maxwidth=433),twttr.sandboxedAjax.send({url:d,dataType:"jsonp",type:"GET",data:e,success:function(b){!b.error&&b.title&&(c.data.href=c.url,b.thumbnail_url&&b.thumbnail_url.indexOf("http:")>=0&&(b.thumbnail_url=b.thumbnail_url.replace("http","https")),c.data=twttr.merge(c.data,b),a())}})},content:function(){var a='                  <div id="wp-details" class="component"><div class="wp-inset">                  <a href="{{href}}" class="wp-link" target="_blank">                  <h1 class="wp-news-headline">{{title}}</h1></a>                  <p class="wp-news-description">{{{body}}}</p>                  {{#thumbnail_url}}                  <div><a class="inline-media-image" href="{{href}}" target="_blank">                  <img class="wp-img" src="{{thumbnail_url}}"/>                  </a></div>                  {{/thumbnail_url}}                  </div></div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("WhoSay",{domain:"//www.whosay.com",ssl:!0,flaggable:!0,deciderKey:"phoenix_whosay_details",icon:"photo",matchers:{media:/^#{optional_protocol}?whosay\.com\/[^\/\s]+\/photos\/(\d+)/i},getImageURL:function(a,c){if(this.slug){if(a===b.constants.imageSizes.medium)return c(b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_melt.jpg",{id:this.slug}));if(a===b.constants.imageSizes.large)return c(b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_lalt.jpg",{id:this.slug}))}c(null)},process:function(a){this.data.href=this.url,this.data.name=this.constructor._name,this.data.src=b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_melt.jpg",{id:this.slug}),a()},content:function(){var a='<div class="whosay">                  <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                    <img alt="" src="{{src}}">                  </a>                </div>';return Mustache.to_html(a,this.data)}}),a()})}),provide("geo/Map",function(a){using().as(function(b){twttr.klass("twttr.geo.Map",function(a,b){var c=this;if(!twttr.geo.mapsAvailable())return;var d={mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,scrollwheel:!1,navigationControl:!0,navigationControlOptions:{position:google.maps.ControlPosition.TOP_LEFT,style:google.maps.NavigationControlStyle.SMALL}};c.map=new google.maps.Map(a.get(0),twttr.merge(d,b)),c.bounds=new google.maps.LatLngBounds,c.initialized=!0,c.$canvas=a,c.addListener("tilesloaded",function(){c.resize()})}).methods({addListener:function(a,b){google.maps.event.addListener(this.map,a,b)},createOverlay:function(a){function c(){this.setMap(b.map)}var b=this;c.prototype=new google.maps.OverlayView,c.prototype.onAdd=function(){},c.prototype.onRemove=function(){},c.prototype.draw=function(){a&&(setTimeout(a,0),a=null)},b.mapOverlay=new c},getProjection:function(){var a=this.mapOverlay;return a&&a.getProjection()},latLngToContainerPoint:function(a){var b=this;a=b.normalizeLatLng(a);var c=b.getProjection();return c?c.fromLatLngToContainerPixel(a):null},latLngToOverlayPoint:function(a){var b=this;a=b.normalizeLatLng(a);var c=b.getProjection();return c?c.fromLatLngToDivPixel(a):null},containerPointToLatLng:function(a,b){return this.getProjection().fromContainerPixelToLatLng(new google.maps.Point(a,b))},extendBounds:function(a){this.bounds.extend(a)},normalizeLatLng:function(a){return $.isArray(a)?new google.maps.LatLng(a[1],a[0]):a},addPoint:function(a,b){var c=this;a=c.normalizeLatLng(a),c.extendBounds(a);var d=twttr.geo.POI_MARKER_SIZE,e=twttr.geo.POI_MARKER_HOTSPOT,f=new google.maps.MarkerImage("/phoenix/img/pin.png",new google.maps.Size(d.width,d.height),null,new google.maps.Point(e.x,e.y));c.marker=new google.maps.Marker({flat:!0,icon:f,map:c.map,position:a,clickable:!1,zIndex:2});if(b){var g=new google.maps.MarkerImage(b,null,null,new google.maps.Point(13,32),new google.maps.Size(24,24));c.avatar=new google.maps.Marker({flat:!0,icon:g,map:c.map,position:a,zIndex:3})}},addPoi:function(a,b){var c=twttr.is.fn(b);a=this.normalizeLatLng(a),this.extendBounds(a);var d=new google.maps.MarkerImage("/phoenix/img/poi-pin.png",null,null,new google.maps.Point(twttr.geo.POI_MARKER_HOTSPOT.x,twttr.geo.POI_MARKER_HOTSPOT.y)),e=new google.maps.Marker({flat:!0,icon:d,map:this.map,position:a,draggable:c,clickable:c,zIndex:2});return c&&google.maps.event.addListener(e,"position_changed",function(){var a=e.getPosition();b(a.lat(),a.lng())}),e},addFocusablePoint:function(a,b,c){var d=this;a=d.normalizeLatLng(a),d.extendBounds(a);var e=new google.maps.MarkerImage("/phoenix/img/place-minor10x.png",new google.maps.Size(10,10),new google.maps.Point(10,0),new google.maps.Point(5,5)),f=new google.maps.MarkerImage("/phoenix/img/place-minor10x.png",new google.maps.Size(10,10),null,new google.maps.Point(5,5)),g=new google.maps.Marker({flat:!0,icon:f,map:d.map,position:a,clickable:b!==undefined,zIndex:2});return b&&(google.maps.event.addListener(g,"mouseover",function(c){b(!0,d.latLngToContainerPoint(a))}),google.maps.event.addListener(g,"mouseout",function(c){b(!1,d.latLngToContainerPoint(a))})),c&&google.maps.event.addListener(g,"click",function(a){c()}),function(a){a?(g.setIcon(e),g.setZIndex(3)):(g.setIcon(f),g.setZIndex(2))}},extendBoundsToIncludeCircle:function(a,b){if(b<200)return;var c=new google.maps.Circle({map:null,center:this.normalizeLatLng(a),radius:b,clickable:!1,fillColor:"#0040FF",fillOpacity:.08,strokeColor:"#2929D4",strokeOpacity:.7,strokeWeight:.5,zIndex:1}),d=c.getBounds();this.extendBounds(d.getNorthEast()),this.extendBounds(d.getSouthWest())},addPlacePolygon:function(a){a=a[0];var b=[];for(var c=0;c<a.length;c++){var d=this.normalizeLatLng(a[c]);b.push(d),this.extendBounds(d)}new google.maps.Polygon({path:b,strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:.5,fillColor:"#FF0000",fillOpacity:.2,map:this.map})},isEmpty:function(){return this.bounds.isEmpty()},adjustBounds:function(a,b){var c=this;if(this.isEmpty())return;c.fitBounds(c.bounds,a,b)},MIN_LAT:-85.05113,MAX_LAT:85.05113,X_FROM_LNG:256/360,Y_FROM_RADIANS:-256/(2*Math.PI),DEGREES_FROM_RADIANS:180/Math.PI,MAX_CONTENT_WIDTH_RATIO:.9,MAX_CONTENT_HEIGHT_RATIO:.9,_worldXFromLng:function(a){return a*this.X_FROM_LNG},_worldYFromLat:function(a){var b=this;a=Math.max(b.MIN_LAT,Math.min(b.MAX_LAT,a));var c=Math.sin(a/b.DEGREES_FROM_RADIANS);return Math.log((1+c)/(1-c))*.5*b.Y_FROM_RADIANS},_lngFromWorldX:function(a){return a/this.X_FROM_LNG},_latFromWorldY:function(a){var b=2*Math.atan(Math.exp(a/this.Y_FROM_RADIANS));return(b-.5*Math.PI)*this.DEGREES_FROM_RADIANS},_zoomFromPixelDelta:function(a,b,c){var d=Math.floor(Math.log(Math.abs(a/b))/Math.LN2);return isNaN(d)?c:Math.max(0,Math.min(c,d))},fitBounds:function(a,b,c){var d=this;d.bounds=a;var e=a.getNorthEast(),f=a.getSouthWest(),g=d._worldXFromLng(f.lng()),i=d._worldXFromLng(e.lng()),j=d._worldYFromLat(e.lat()),k=d._worldYFromLat(f.lat()),l=d._zoomFromPixelDelta(d.$canvas.width()*d.MAX_CONTENT_WIDTH_RATIO,i-g,b),m=d._zoomFromPixelDelta(d.$canvas.height()*d.MAX_CONTENT_HEIGHT_RATIO,k-j,b);d.map.setZoom(Math.min(l,m));if(!c){var n=d._latFromWorldY((j+k)*.5);c=new google.maps.LatLng(n,a.getCenter().lng())}d.map.setCenter(d.normalizeLatLng(c))},getCenter:function(){return this.map.getCenter()},resize:function(){google.maps.event.trigger(this.map,"resize")}}),a(twttr.geo.Map)})}),provide("geo/Location",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.geo.Location",function(){var a=this;a.$empty=a.$fakeFocus=a.$dropdown=a.$input=a.$helpText=$([]),a.clearLocation(),a.closeDropdownClick=function(b){var c=a.$dropdown.get(0);c&&b.target!==c&&!$.contains(c,b.target)&&a.closeDropdown()}}).statics({GEO_WEBCLIENT_COOKIE:"geo_webclient",MS_WAIT_BETWEEN_GET_LOCATIONS:9e5,LOCATION_URL:"/account/location.json"}).methods({onRegisterTweetBox:function(a,b){var c=this,d=a.find(".geo-control");c.showGeoState(),d.find("a.geo-location").click(function(a){a.preventDefault(),d.find(".geo-location-dropdown").length||setTimeout(function(){$(".geo-control .geo-icon").tipsy("hide"),c.isLocationOn()?(c.openDropdown(d),b&&b()):c.isGeoEnabled()?c.turnLocationOn():(new twttr.widget.GeoPromoDialog).show()},0)}),d.find(".geo-icon").tipsy({gravity:"nw",offset:5,fade:!0,opacity:.9,title:function(){return c.isLocationOn()?"":h(_("Add your location"))}})},onFocusTweetBox:function(a){this.isLocationOn()&&!this.isUpdatingLocation()&&(!this.cityId()||this.now()-this.lastLocationTime>=this.constructor.MS_WAIT_BETWEEN_GET_LOCATIONS)&&this.updateLocation()},clearLocation:function(){this.location={},this.cache={},this.searchKeyShowing=null,this.$dropdown.remove(".override-location"),this.lastMessage="",this.lastFetchId=null},isUpdatingLocation:function(){return!!this.lastFetchId},updateLocation:function(a){var c=this;if(!c.isGeoUiAllowed()){c.processNewLocation(null);return}c.isUpdatingLocation()||(c.clearLocation(),c.showGeoState(a?_("Changing location..."):_("Getting location...")));var d={};c.lastFetchId=d,twttr.currentUser.geoLocation({override_place_id:a,spoof_ip:b.util.params().spoof_ip,success:function(a){c.lastFetchId===d&&c.processNewLocation(a)},error:function(a){if(c.lastFetchId===d){var b=a.status&&a.status===503;c.processNewLocation(b?{status:"busy"}:null)}}})},places:function(){return this.location&&this.location.places||[]},place:function(){return this.places()[0]||{}},cityId:function(){var a=this.place();return a.full_name&&a.id||""},cityName:function(){var a=this.place();return a.id&&a.full_name||""},isGeoUiAllowed:function(){return twttr.decider.isAvailable("geo_ui")&&twttr.decider.isAvailable("geo_location")},isGeoEnabled:function(){return twttr.currentUser&&twttr.currentUser.geoEnabled},isLocationOn:function(){return this.isGeoEnabled()&&!!$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE)},turnLocationOn:function(){$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE,"1",{expires:3650}),this.updateLocation()},turnLocationOff:function(){$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE,null),this.clearLocation(),this.showGeoState()},processNewLocation:function(a){var b=this;b.lastFetchId=null;var c=a&&a.status;if(c==="busy"||c==="ok")b.lastLocationTime=this.now();b.location=a,b.cache={},b.showGeoState(b.cityName()||c==="unresolved"&&_("Unknown location")||_("Location service unavailable")),b.inputChanged(),b.showPlaceSuggestions()},now:function(){return(new Date).getTime()},showGeoState:function(a){var b=this.isLocationOn();this.lastMessage=b&&(a||this.lastMessage)||"";var c=this.lastMessage!=="";$("span.geo-control span.geo-icon").toggleClass("geo-icon-on",b).toggleClass("geo-icon-ok",b&&!!this.cityId()),twttr.helpers.ellipsify($("span.geo-control span.geo-text").html(h(this.lastMessage)),!0),$("span.geo-control span.geo-dropdown-icon").toggle(c).css("visibility","visible")},openDropdown:function(a){var b=this;b.closeDropdown(),$(document).add("textarea").bind("click",b.closeDropdownClick);var c=(new twttr.views.GeoLocationDropdown).$html();b.$dropdown=c,b.$input=c.find("input"),b.$helpText=c.find(".help-text"),b.$helpText.click(function(a){a.preventDefault(),a.stopPropagation(),b.$input.focus()}),c.find(".geo-turn-off-item a").bind("select",function(){b.closeDropdown(),b.turnLocationOff()}).click(function(a){a.preventDefault(),$(this).trigger("select")}),c.find(".glass").click(function(a){a.stopPropagation(),b._updateSearchResults(!0)}),c.delegate(".override-location a","select",function(){b.updateLocation($(this).attr("data-place-id")),b.closeDropdown()}).delegate(".override-location a","click",function(a){a.preventDefault(),$(this).trigger("select")}).delegate(".focusable","mousemove",function(){b.setFakeFocus($(this))}).delegate(".focused","mouseout",function(){b.setFakeFocus(b.$empty)});var d=a.find(".geo-icon"),e=d.position(),f=Math.round(e.top+d.outerHeight());c.css({left:e.left,top:f}),b.searchKeyShowing=null,b.showPlaceSuggestions(),b.setupInput(),a.append(c),b.$input.focus().select()},closeDropdown:function(){this.$dropdown.remove(),this.$fakeFocus=this.$empty,$(document).add("textarea").unbind("click",this.closeDropdownClick)},showSearchError:function(a){this.$dropdown.find(".location-error").text(a)},showPlaceSuggestions:function(){var a=this.$dropdown,b=(new twttr.views.GeoLocationDropdownItems({places:this.places()})).html();a.find(".override-location").remove(),a.find(".geo-turn-off-item").before(b),a.find(".override-location:first").addClass("checked-item padding-above"),this.updateMenuSeparators()},updateMenuSeparators:function(){var a=this.$dropdown;a.find(".location-search-result:first").addClass("padding-above"),a.find(".override-location:last,").addClass("separator-below"),a.find(".location-search-result:last").addClass("separator-below"),a.find("li:last").removeClass("separator-below")},setupInput:function(){var a=this;a.$input.click(function(a){a.stopPropagation()}).keydown(function(c){c.stopPropagation();if(c.keyCode===b.constants.keyCodes.escape)a.closeDropdown();else switch(c.keyCode){case b.constants.keyCodes.upArrow:a.arrowUp(),a.arrowKeyDownEvent=!0,c.preventDefault();break;case b.constants.keyCodes.downArrow:a.arrowDown(),a.arrowKeyDownEvent=!0,c.preventDefault();break;case b.constants.keyCodes.enter:a.hasFakeFocus()?a.$fakeFocus.find("a").trigger("select"):a.updateSearchResults(!0);default:a.inputChanged()}}).keypress(function(c){c.stopPropagation();if(c.charCode===0&&!a.arrowKeyDownEvent)switch(c.keyCode){case b.constants.keyCodes.upArrow:a.arrowUp(),c.preventDefault();break;case b.constants.keyCodes.downArrow:a.arrowDown(),c.preventDefault()}a.arrowKeyDownEvent=!1}).keyup(function(a){a.stopPropagation()}).change(function(){a.inputChanged()}).mousedown(function(){a.setFakeFocus(a.$empty)}).focus(function(){a.setFakeFocus(a.$empty)})},arrowUp:function(){var a=this.$fakeFocus.prevAll(".focusable:first");a.length||(a=this.$dropdown.find(".focusable:last")),this.setFakeFocus(a)},arrowDown:function(){var a=this.$fakeFocus.nextAll(".focusable:first");a.length||(a=this.$dropdown.find(".focusable:first")),this.setFakeFocus(a)},hasFakeFocus:function(){return!!this.$fakeFocus.length},setFakeFocus:function(a){this.$fakeFocus.removeClass("focused"),this.$fakeFocus=a.addClass("focused")},inputChanged:function(){var a=this;setTimeout(function(){(a.$input.val()||"")!==""&&a.$helpText.hide(),setTimeout(function(){a.updateSearchResults(!1)},0)},0)},updateSearchResults:function(a){var b=this,c=b.$input.val()||"";a&&c?b.enterQuery=c:c!==b.enterQuery&&(b.enterQuery=null);if(b.isUpdatingLocation())return;var d=!b.enterQuery,e=(d?"~":"=")+c;e!=b.searchKeyShowing&&b.setFakeFocus(b.$empty);if(b.searchKeyShowing===e||b.searchKeySearching===e||d&&b.searchKeySearching)return;var f=c?b.cache[e]:[];f?b.showSearchResults(f,e):b.search(e)},centroid:function(){var a=this.place();if(!a.bounding_box||a.bounding_box.type!=="Polygon"||!a.bounding_box.coordinates)return null;var b=a.bounding_box.coordinates[0];return!b||b.length!==4?null:{lat:(b[0][1]+b[2][1])*.5,lon:(b[0][0]+b[2][0])*.5}},search:function(a){var b=this,c=a.charAt(0)==="~",d=a.substr(1);b.$dropdown.addClass("geo-location-dropdown-searching"),b.searchKeySearching=a,b.showSearchError(_("Searching places...")),twttr.API.Place.search(twttr.merge({max_results:5,granularity:"neighborhood",autocomplete:c?"true":"false",query:d,full_geom:"false",success:function(c){var d=twttr.geo.placesFromApi(c);b.cache[a]=d,b.searchKeySearching===a&&(b.searchKeySearching=null,b.showSearchError("")),b.$dropdown.removeClass("geo-location-dropdown-searching"),b.updateSearchResults()},error:function(){b.$dropdown.removeClass("geo-location-dropdown-searching"),b.searchKeySearching===a?(b.showSearchError(_("Location service unavailable")),b.searchKeySearching=null):b.updateSearchResults()}},b.centroid()))},showSearchResults:function(a,b){this.searchKeyShowing=b,a.length===0&&b.length>1&&this.showSearchError(_("No search results")),this.$dropdown.find(".location-search-result").remove();var c=(new twttr.views.GeoLocationDropdownItems({places:a,for_search_results:!0})).html();this.$dropdown.find(".query-location").after(c),this.updateMenuSeparators()}}),twttr.app.waitForSignal("init",function(a){twttr.geo.location=new twttr.geo.Location}),a(twttr.geo.Location)})}),provide("control/Dropdown",function(a){using().as(function(b){(function(){var a={view:"Control"};twttr.klass("twttr.control.Base",function(b){this.options=$.extend({},a,b),this.itemView=twttr.views.DefaultDropdownItem,this.options.itemView&&(this.itemView=twttr.is.string(this.options.itemView)?twttr.views[this.options.itemView]:this.options.itemView)}).methods(twttr.EventProvider).methods({render:function(a,b){var c=this.viewData();this.view=new twttr.views[this.options.view](c),this.$dropdown=this.view.$html(),$(a)[b](this.$dropdown)},viewData:function(){return this.options}}),twttr.augmentString("twttr.helpers.control",function(a,b){var c=twttr.klass("twttr.control."+a,b);return c.subclassOf(twttr.control.Base),c}),function(){var a={direction:"left",view:"Dropdown"},b=[];twttr.helpers.control("Dropdown",function(c,d){b.push(this),this.$controller=$(c);var d=$.extend({},a,d);this.items=d.items||[],twttr.control.Dropdown.uber.constructor.call(this,d),this.registerEvents()}).statics({_registeredHtmlClick:!1,caches:{},createCache:function(a){this.caches[a]={}},closeAll:function(){twttr.each(b,function(a){a.close()})}}).methods({defaultDividerView:twttr.views.DefaultDropdownDivider,registerEvents:function(){this.$controller.bind("click",twttr.bind(this,function(a){this.toggle()}))},applyDirection:function(){this.$dropdown.css({left:this.options.direction=="left"?"0":"auto",right:this.options.direction=="right"?"0":"auto"})},flushItems:function(){this.$dropdown.empty(),this.items=[]},setItemsFromCallback:function(){var a=this;a.flushItems(),a.itemsCallback(function(b){a.addItems(b),a.registerItemHandlers()})},disable:function(){this.close(),this.$controller.unbind("click")},enable:function(){this.registerEvents()},open:function(a){this.constructor.closeAll(),this.itemsCallback&&this.setItemsFromCallback(),this.$controller.addClass("open").addClass("button-active"),this.$dropdown.css({top:this.$container?this.$container.outerHeight():this.$controller.outerHeight(),visibility:"visible"}),a&&this.$dropdown.css({opacity:0}).animate({opacity:1},{duration:500,queue:!1});var b=twttr.bind(this,function(a){this.$controller.get(0)!==a.target&&!$.contains(this.$controller.get(0),a.target)&&($("#doc").unbind("click",b),this.close())});$("#doc").bind("click",b)},close:function(a){if(a){var b=this;this.$dropdown.animate({opacity:0},500,function(){b.$controller.removeClass("open").removeClass("button-active"),b.$dropdown.css("visibility","hidden"),b.$dropdown.css("opacity",1)})}else this.$controller.removeClass("open").removeClass("button-active"),this.$dropdown.css("visibility","hidden")},toggle:function(){this.$controller.hasClass("open")?this.close():this.open()},addItem:function(a,b,c){b=b||"appendTo",this.items.push(a);var d=this.getItemView(a).$html();return b=="insertBefore"||b=="insertAfter"?d[b](c):d[b](this.$dropdown),d},addItems:function(a){var b=this;b.items=b.items.concat(a);var c=twttr.map(b.items,function(a){return b.getItemView(a).html()});$(c.join("")).appendTo(b.$dropdown)},itemsFrom:function(a){this.itemsCallback=a},registerItemHandlers:function(){var a=this.$dropdown.children();for(var b=0;b<this.items.length;b++){var c=this.items[b];if(!c.handlers)continue;$.each(c.handlers,function(c,d){var e=$(a[b]),f=[c];twttr.is.array(d)?f=f.concat(d):f.push(d),e.bind.apply(e,f)})}},render:function(a,b,c){if(b==="before"||b==="after")this.$controller.parent().hasClass("drop-down-container")?this.$container=this.$controller.parent():this.$container=this.$controller.wrap('<div class="drop-down-container"/>').parent();return twttr.control.Base.prototype.render.apply(this,arguments),c&&(this.constructor.caches[c.key]||(this.constructor.caches[c.key]={}),this.constructor.caches[c.key][c.id]=!0),this.registerItemHandlers(),this.applyDirection(),this},getItemView:function(a){return a.itemView?new twttr.views[a.itemView](a):a.divider?new this.defaultDividerView:new this.itemView(a)},viewData:function(){var a=this,b=twttr.map(this.items,function(b,c){return a.getItemView(b).html()});return{items:b.join("")}}})}()})(),a(twttr.control.Dropdown)})}),provide("widget/Dialog",function(a){using("constants","util").as(function(b){twttr.provide("twttr.dialogs"),twttr.dialogs.defaultOptions={modal:!1,stackPreviousModal:!1,draggable:!1,closable:!0,closeOnClickOutside:!1,closeOnNavigate:!1,destroyOnClose:!0,css:{width:500,height:"auto"},fixed:!0,template:{container_id:null,title:null,footer:null,content:null}};var c=!1,d=function(){c=!0;var a=$("<div>",{height:100,width:100,position:"absolute",top:-300,left:-300}).prependTo($("body")),b=$("<div>",{height:200}).appendTo(a);a.css("overflow-y","scroll");var d=a.width()-b.width();a.remove(),$("head").append("<style>          .modal-enabled,          .modal-enabled .global-nav-inner {            margin-right: "+d+"px        } </style>")},e=twttr.klass("twttr.widget.Dialog",function(a){var c=this;this.options=twttr.merge({},twttr.dialogs.defaultOptions,a||{},!0),this.options.template.closable=this.options.closable,this._isOpen=!1,this.view=new twttr.views[this.options.view||this.constructor._name](this.options),twttr.isT1?(this.options.modal=!0,this.$container=this.view.render(this.options.node||$(".twttr-dialog-wrapper"),"append")):this.$container=this.view.render(this.options.node||"body","append"),this.$dialog=this.$container.find(".twttr-dialog"),this.$title=this.$container.find(".twttr-dialog-header h3"),twttr.isT1?this.$container.css(twttr.merge({top:$(".js-banners").height()},this.options.css)):this.$dialog.css(this.options.css),this.$dialog.attr("data-component-term",b.util.underscore(this.constructor._name)),twttr.is.nil(c.options.template.footer)&&this.$container.find(".twttr-dialog-footer").hide(),this.options.draggable&&this.applyDraggability(),this.options.modal&&(this.$overlay=$('<div class="twttr-dialog-overlay"></div>').appendTo($("body"))),this._escKeyHandler=function(a){c.options.closable&&a.keyCode===b.constants.keyCodes.esc&&(c.close(),a.stopPropagation())};if(this.options.closeOnClickOutside||this.options.modal)this._clickOutsideHandler=function(a){!$.contains(c.$container.get(0),a.target)&&($.contains(document.body,a.target)||document.body===a.target)&&(c.close(),c.options.modal||(a.preventDefault(),a.stopPropagation()))};if(this.options.closeOnNavigate){var d=twttr.bind(this,this.close);twttr.router.bind("routeFollowed",d),this.bind("close",function(){twttr.router.unbind("routeFollowed",d)})}this.registerEvents()}).statics(twttr.EventProvider).statics({currentModal:!1,close:function(){var a=0;while(this.currentModal&&a++<8)this.currentModal.close()}}).methods(twttr.EventProvider).methods({$find:function(a){return this.$container.find(a)},registerEvents:function(){var a=this;this.$find("textarea, input[type=text], input[type=password]").bind("keydown keypress keyup",function(c){twttr.components.Autocomplete._isCompletionsOpen||(c.stopPropagation(),c.type==="keydown"&&c.keyCode===b.constants.keyCodes.esc&&a.close())}),this.$container.delegate(".twttr-dialog-close","click",function(b){b.preventDefault(),b.stopPropagation(),a.close()}),twttr.router.bind("urlChanged",this.urlChangedListener=function(b,c){a.close()});if($.browser.mozilla&&$.browser.version.slice(0,1)=="8"){var c=null;this.bind("close",function(){twttr.$win.scrollTop(c)}),this.bind("open",function(){c=twttr.$win.scrollTop()})}},applyDraggability:function(){var a=this;this.$container.addClass("draggable").draggable({cursor:"move",handle:this.$container.find(".js-twttr-dialog-draggable"),start:function(){a.$container.addClass("unselectable"),$("#doc").addClass("unselectable")},stop:function(){a.$container.removeClass("unselectable"),$("#doc").removeClass("unselectable")},cancel:":input,option,.js-twttr-dialog-not-draggable"})},toggle:function(){return this[this._isOpen?"close":"open"](),this},open:function(){c||d();var a=this;return twttr.widget.Dialog.currentModal&&(this.options.stackPreviousModal&&this.options.modal?(this.previousModal=twttr.widget.Dialog.currentModal,this.previousModal._close()):twttr.widget.Dialog.close()),this.options.modal&&(twttr.widget.Dialog.currentModal=this,this.$overlay.show(),$("body").addClass("modal-enabled")),this.position(),this.$container.css({visibility:"visible",display:"block"}),this.trigger("open"),twttr.widget.Dialog.trigger("open"),this._isOpen=!0,twttr.$win.bind("keydown",this._escKeyHandler),this._clickOutsideHandler&&setTimeout(function(){$("body").bind("click",a._clickOutsideHandler)},0),this},_close:function(){return this.options.modal&&(twttr.widget.Dialog.currentModal=!1,this.$overlay.hide(),$("body").removeClass("modal-enabled")),document.activeElement&&$.contains(this.$container.get(0),document.activeElement)&&$(document.activeElement).blur(),this.$container.css({visibility:"hidden",display:"none"}),$(".tipsy").remove(),this.trigger("close"),twttr.widget.Dialog.trigger("close"),this._isOpen=!1,twttr.$win.unbind("keydown",this._escKeyHandler),this._clickOutsideHandler&&$("body").unbind("click",this._clickOutsideHandler),this.previousModal&&(this.previousModal.open(),delete this.previousModal),this},show:function(){return this.open()},hide:function(){return this._close()},setFooterText:function(a){this.$find(".twttr-dialog-footer").html(a)},setError:function(a){this.$find(".twttr-dialog-error").show().html(_("<p>{{message}}</p>",{message:a}))},clearError:function(){this.$find(".twttr-dialog-error").hide().empty()},position:function(){this.options.fixed||this.$container.addClass("static");var a=$(window).scrollTop(),b=this.$container.innerHeight(),c=$(window).height(),d=Math.round(c/2-b/2);this.options.fixed||(d+=a);var e=this.$container.innerWidth(),f=$(window).width(),g=twttr.i18n&&twttr.i18n.rtl?"right":"left",i=Math.round(f/2-e/2);d=this.options.positioning&&this.options.positioning.top?this.options.positioning.top:d,i=this.options.positioning&&this.options.positioning.left?this.options.positioning.left:i;var j={top:d};return j[g]=i,this.$container.css(j),this},destroy:function(){return this._close(),this.remove(),this},remove:function(){return this.$container.unbind().remove(),this.$overlay&&this.$overlay.unbind().remove(),this._isOpen=!1,this},close:function(){return this[this.options.destroyOnClose?"destroy":"_close"]()},isOpen:function(){return this._isOpen}});twttr.isT1&&e.methods({position:twttr.util.noopInT1}),a(e)})}),provide("dialogs",function(a){using("_","constants").as(function(b,_){twttr.aug(twttr.dialogs,{reply:function(a,b){var c=a.dataFields||twttr.TweetBox._getDefaultContentForReply(a.$tweet,a.screenName,twttr.currentUserScreenName),d={multiple:c.multiple,modal:!0,draggable:!0,defaultContent:c.defaultContent,template:{title:_("Reply to @<strong>{{screen_name}}</strong>",{screen_name:a.screenName}),footer:""},data:a,origin:a.origin};return b?d:new twttr.widget.ReplyDialog(d)},directMessage:function(a){if(twttr.isT1)var b=twttr.widget.DirectMessageDialog.views.newConversation;else var c=twttr.assets.path("sticky/default_profile_images/default_profile_6_mini.png",{isVersioned:!1}),b={modal:!1,draggable:!0,basic:!1,template:{title:_("Message")+' <div><img class="avatar" src="'+c+'"/> <input class="twttr-directmessage-input" type="text"/></div> <span class="twttr-dm-check"/>',footer:_("Tip: you can send a message to anyone who follows you")},origin:a.origin};return new twttr.widget.DirectMessageDialog(b)},dmSingle:function(a){return twttr.isT1?new twttr.widget.DirectMessageDialog(twttr.widget.DirectMessageDialog.views.conversation,a.user.screenName):(twttr.merge(a,{draggable:!0,basic:!1,template:{title:'<img src="'+a.user.profile_image_url+'"/> '+_("<strong>Send <b>{{user_name}}</b> a message</strong>",{user_name:a.user.name})}}),new twttr.widget.DirectMessageDialogSingle(a))},keyboardShortcuts:function(){return twttr.dialogs._keyboardShortcuts=twttr.dialogs._keyboardShortcuts||new twttr.widget.Dialog({css:{width:twttr.loggedIn?600:300},modal:!0,draggable:!0,destroyOnClose:!1,template:{title:_("Keyboard shortcuts"),content:(new twttr.views.KeyboardShortcuts).html()}}),twttr.dialogs._keyboardShortcuts},discoverable:function(){var a=twttr.currentUser,b={help_url:twttr.router.helpDiscoveryPath(),email_checked:!a.emailDiscoverabilitySet||a.discoverableByEmail,phone_checked:!a.mobilePhoneDiscoverabilitySet||a.discoverableByMobilePhone};return new twttr.widget.DiscoveryDialog(twttr.merge(b,a.attributes))},verifyEmail:function(a){return new twttr.widget.VerifyEmailDialog(a,twttr.currentUser)},retweet:function(a,b,c){var d,e,f=twttr.isT1&&twttr.currentUser&&new Date(2012,6,3)<new Date(twttr.currentUser.createdAt)&&twttr.abdecider.choose("change_deutsch_verbs_229")==="change_verbs";f?(d="Diesen Tweet mit Deinen Followern teilen?",e="Teilen"):(d=_("Retweet this to your followers?"),e=_("Retweet"));var g={modal:!0,draggable:!0,callback:c,template:{title:d,container_id:"retweet-dialog",footer:"",content:(new twttr.views.Prompt({ok:e,cancel:_("Cancel")})).html()},data:{tweetId:a},tweetText:b,css:{width:500}};return new twttr.widget.RetweetDialog(g)},deleteMessage:function(a){var b={modal:!0,stackPreviousModal:!0,draggable:!0,callback:a,template:{title:_("Are you sure you want to delete this message?")},css:{width:450}};return new twttr.widget.Prompt(b)},deleteSavedSearch:function(a){return new twttr.widget.Prompt({modal:!0,template:{title:_("Are you sure you want to delete this search?"),content:(new twttr.views.Prompt({ok:_("Yes"),cancel:_("No")})).html()},callback:a})},goToUser:function(){var a={modal:!0,draggable:!0,template:{title:_("Go to a person's profile"),content:'<input class="twttr-goto-user-input" type="text"/>'},css:{width:450},positioning:{top:75}},c=new twttr.widget.Dialog(a),d=c.$find(".twttr-goto-user-input"),e=function(a){c.close(),twttr.router.one("routed",function(){$('<input type="text"/>').css({position:"absolute",top:0,left:0}).appendTo("body").focus().remove()});var b=a.replace("@","").split("/");b.length===1?(screen_name=b[0],twttr.API.User.find(screen_name,{success:function(a){twttr.router.routeTo(twttr.router.profilePath({screen_name:screen_name}))},error:function(a){twttr.router.routeTo(twttr.router.userSearchPath({query:screen_name}))}})):twttr.router.routeTo(twttr.router.userListPath({screen_name:b[0],list_slug:b[1]}))},f=new twttr.components.Autocomplete({limit:8,input:d,type:"username",preselect:!0,defaultResults:[{format:function(a){return(new twttr.views.CurrentTextUserAutocompleteItem({screenname:a.charAt(0)==="@"?a.substring(1):a})).html()},show:function(a,b){for(var c in b)if(b[c][1]===a)return!1;return!0}}]});return f.bind("select",function(a,b,c,d,f,g){e(f)}),d.bind("keypress",function(a){a.keyCode===b.constants.keyCodes.enter&&!f._isCompletionsOpen&&(a.preventDefault(),e(d.val()))}),c.bind("open",function(){d.focus()}),c},searchFacets:function(a){if(!twttr.decider.isAvailable("phoenix_facets"))return!1;var c={modal:!0,draggable:!0,template:{title:a==="photos"?_("Search photos"):_("Search videos"),content:'<input class="twttr-search-facets-input" type="text"/>'},css:{width:450},positioning:{top:75}},d=new twttr.widget.Dialog(c),e=d.$find(".twttr-search-facets-input");return e.bind("keypress",function(c){c.keyCode===b.constants.keyCodes.enter&&(c.preventDefault(),d.close(),twttr.router.one("routed",function(){$('<input type="text"/>').css({position:"absolute",top:0,left:0}).appendTo("body").focus().remove()}),twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:e.val(),mode:a})))}),d.bind("open",function(){e.focus()}),d},_trendsOptions:function(){return options={draggable:!0,css:{width:520},template:{title:_("Choose a trend location")}}},trends:function(){return arguments.callee._ret=arguments.callee._ret||new twttr.widget.TrendsDialog(this._trendsOptions())},signinOrSignup:function(a){a=a||{};var c=a.follow?a.follow.screenName:!1,d={screen_name:c,signup_source:twttr.audit.currentPage()};if(c)d.redirect_after_login=twttr.router.profilePath(d);else if(twttr.audit.currentPage()==="permalink"||twttr.audit.currentPage()==="profile"||twttr.audit.currentPage()==="search")d.redirect_after_login=twttr.audit.currentPath();var e=c?_("Sign in to Twitter &amp; follow @{{screen_name}}",d):_("Sign in to Twitter");a.justSignup&&(d.is_signup_only=!0,d.guest_modal=!0,d.signup_source=twttr.audit.currentPage(),e=c?_("Sign up for Twitter &amp; follow @{{screen_name}}",d):_("Sign up for Twitter"));var f=new twttr.widget.Dialog({css:{width:500},modal:!0,draggable:!0,template:{title:e,content:(new twttr.views.SigninOrSignup(d)).html()}}),g=f.$find("form.signin"),i=g.find(".textbox input");return a.justSignup&&f.$dialog.addClass("signup-only-dialog"),twttr.helpers.addHoldingInputEvents(g),twttr.helpers.addFormEvents(g),i.bind("keypress",function(a){a.keyCode===b.constants.keyCodes.enter&&$(this).val()&&(a.preventDefault(),g.submit())}),f.bind("open",function(){i.first().focus();var b={section:"auth_dialog",component:a.follow?"unauth_follow":"unauth_action",action:"open"};trackClient(b,twttr.audit.currentPage())}),f.$find("form").bind("submit",function(){setTimeout(function(){f.close(),trackClient({section:"auth_dialog",component:"signup_form",action:"signup_click"},twttr.audit.currentPage())},0)}),f},signupModalDialogGuest:function(a,b){var c=[],d=[],e=0;for(var f=0;f<a;f++)twttr.API.User.find(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-f-1],{success:function(f){c.push({name:f.name,screen_name:f.screenName,profile_image_url:f.profileImageUrl,id:f.id,description:"@"+f.screenName,count_num:e}),d.push(f.screenName),e++;if(e==a){var g={screen_names:d.join(","),signup_source:twttr.audit.currentPage(),user_data_list:c,guest_modal:!0},i=new twttr.widget.Dialog({css:{width:575},modal:!0,draggable:!0,template:{title:_("Follow your interests on Twitter!"),content:(new twttr.views.GuestModalSignup(g)).html()}});$signup=i.$find("form.signup-btn"),$inputs=$signup.find(".textbox input"),twttr.helpers.addFormEvents($signup),twttr.helpers.addHoldingInputEvents($signup),i.bind("open",function(){$inputs.first().focus()});var j=i.$find("input[type=checkbox]");j.bind("click",function(a){var b=i.$find("input[type=checkbox]:checked"),c=$.map(b,function(a,b){return a.value}).join(",");$signup.find("input[name=follows]").val(c)}),i.$find("form").bind("submit",function(){i.close(),trackClient({section:"profiles_viewed_dialog",component:"signup_form",action:"signup_click"},twttr.audit.currentPage())}),b(i)}}})},searchOperators:function(){return twttr.dialogs._searchOperators=new twttr.widget.Dialog({css:{width:600},modal:!1,draggable:!0,template:{title:_("Search Operators"),content:(new twttr.views.SearchOperators).html()}}),twttr.dialogs._searchOperators},smsCodes:function(){return twttr.dialogs._smsCodes=twttr.dialogs._smsCodes||new twttr.widget.Dialog({modal:!1,draggable:!0,template:{title:_("Two-way (sending and receiving) short codes:"),content:(new twttr.views.SmsCodes).html()}}),twttr.dialogs._smsCodes},sensitiveFlagConfirmation:function(a){var b=new twttr.widget.Prompt({modal:!1,draggable:!0,template:{title:_("Flag this media"),content:(new twttr.views.SensitiveFlagConfirmation).html()},callback:function(c){c&&(b.$find("#sensitive-settings-checkbox").attr("checked")&&twttr.currentUser.updateViewPossiblySensitive(!1,{success:function(){twttr.showMessage(_("Your media display settings have been changed."))},error:function(a){twttr.showError(_("Couldn't set inline media settings."))}}),b.$find("#sensitive-illegal-checkbox").attr("checked")&&a())}});return b},embedCode:function(a){return new twttr.widget.EmbedDialog(a)}}),a(twttr.dialogs)})}),provide("widget/TweetDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.TweetDialog",function(a){a=twttr.merge({basic:!0,modal:!0,fixed:!0},a),a.template=twttr.merge({show_geo:!0,container_id:"tweet_dialog"},a&&a.template),a=$.extend(!0,{basic:!0,template:{show_geo:!0,container_id:"tweet_dialog"}},a),twttr.widget.TweetDialog.uber.constructor.call(this,a),this._ready=!1}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.view.bind("ready",twttr.bind(this,function(){this._ready=!0,setTimeout(twttr.bind(this,function(){this.onReady()}),0)})),this.view.tweetBox.bind("tweetSuccess",twttr.bind(this,function(a,b,c){c==="reply"&&b.inReplyToScreenName?twttr.showMessage(_("Your Tweet to @{{username}} has been sent!",{username:b.inReplyToScreenName})):(twttr.showMessage(_("Your Tweet was posted!")),$(document).trigger("tweetSuccess",b)),this.destroy()})),this.view.tweetBox.bind("dmSuccess",twttr.bind(this,function(b,c){twttr.is.def(twttr.messageManager)&&twttr.messageManager.addMessage(c),twttr.showMessage(_("Your message was sent!")),a.close()})),this.view.tweetBox.bind("dmFail",twttr.bind(this,function(b,c){a.close()})),this.options.basic&&this.view.tweetBox.bind("titleChanged",twttr.bind(this,function(a,b){this.$title.html(b||this.options.template.title)}))},onReady:function(){var a=[];return function(b){b?a.push(b):(twttr.each(a,function(a){a()}),a=[])}}(),open:function(){return twttr.widget.Dialog.prototype.open.call(this),this.onReady(twttr.bind(this,function(){setTimeout(twttr.bind(this,function(){this.options.defaultContent&&(this.focus(),this.setContent(this.options.defaultContent))}),0)})),this},setContent:function(a){return this.view.tweetBox.editor.setContent(a),this},setCaretPosition:function(a,b){b=b||a;var c=this.view.tweetBox.editor.$editor[0];if(c.setSelectionRange)c.focus(),c.setSelectionRange(a,b);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveStart("character",a),d.moveEnd("character",b),d.select()}},focus:function(){if(this.options.defaultContent){var a=this.view.tweetBox.editor.$editor.val().length;this.setCaretPosition(a)}else this.view.tweetBox.editor.focus();return this}}),a(twttr.widget.TweetDialog)})}),provide("widget/Prompt",function(a){using("_","constants").as(function(b,_){var c=twttr.isT1?"primary-btn":"selected";twttr.klass("twttr.widget.Prompt",function(a){var b={view:"Dialog",template:{content:(new twttr.views.Prompt({ok:_("Yes"),cancel:_("No")})).html()}};this.options=twttr.merge({},b,a,!0),twttr.widget.Prompt.uber.constructor.call(this,this.options)}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this),this.$ok=this.$container.find(".js-prompt-ok"),this.$cancel=this.$container.find(".js-prompt-cancel"),this.$ok.addClass(c).bind("click",twttr.bind(this,function(a){a.preventDefault(),this.close(),this.options.callback(!0)})),this.$cancel.bind("click",twttr.bind(this,function(a){a.preventDefault(),this.options.callback(!1),this.close()})),this.$container.bind("keypress",twttr.bind(this,function(a){a.stopPropagation();if(a.metaKey)return;if(a.keyCode===b.constants.keyCodes.tab)this.$cancel.toggleClass(c),this.$ok.toggleClass(c);else if(a.keyCode===b.constants.keyCodes.enter||a.keyCode===b.constants.keyCodes.spacebar)a.preventDefault(),this.options.callback(this.$ok.hasClass(c)),this.close()})),this._$tabInput=$('<input type="text" class="twttr-hidden-input"/>').appendTo(this.$dialog).bind("keypress",function(a){a.preventDefault()})},open:function(){return twttr.widget.Dialog.prototype.open.call(this),setTimeout(twttr.bind(this,function(){this._$tabInput.focus()}),10),this}}),a(twttr.widget.Prompt)})}),provide("widget/DeviceSetupDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.DeviceSetupDialog",function(a){a=twttr.merge({modal:!0,draggable:!0,css:{width:550,height:"auto"},positioning:{top:80},template:{title:_("Get notifications and Tweet via SMS"),content:(new twttr.views.DeviceSetupDialog).html()}},a||{},!0),a.view="Dialog",this._fetchStatus();var b=this;this._carriers=twttr.API.Device.carriers({success:function(a){b._carriers=a}}),twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).statics({POLLING_DELAY:15e3}).methods({close:function(){this._clearDelayedStatusFetch(),twttr.widget.Dialog.prototype.close.call(this)},_fetchStatus:function(){this._clearDelayedStatusFetch();var a=this;twttr.API.Device.list({success:twttr.bind(this,this._updateStatus),error:function(b){a.close(),twttr.showError(b.response.error.message)}})},_fetchStatusDelayed:function(){this._fetchTimeout=window.setTimeout(twttr.bind(this,this._fetchStatus),twttr.widget.DeviceSetupDialog.POLLING_DELAY)},_clearDelayedStatusFetch:function(){this._fetchTimeout&&(window.clearTimeout(this._fetchTimeout),this._fetchTimeout=null)},_updateStatus:function(a){if(a.length==0)this._showCreate();else{var b=a[0];b.verified?this._showVerified(b):this._showWaiting(b)}},_showCreate:function(){var a=this,b=this.$container.find(".twttr-dialog-device-setup"),c=new twttr.views.DeviceSetupDialogCreate;b.empty().append('<div class="loading"></div>'),this._carriers.get(function(d){b.empty();var e=c.render(b,"append"),f=e.find("select.country-or-region"),g=e.find("select.country-in-region"),i=e.find("select.carrier"),j=e.find("select.language"),k=!1;for(var l=0;l<d.regionsAndCountryCodes.length;++l){var m=d.regionsAndCountryCodes[l];m[0]=="-------------"?$('<option disabled="disabled">').text(m[0]).val(m[1]).appendTo(f):$("<option>").text(m[0]).val(m[1]).appendTo(f)}var n=function(){var a=$(this),b=a.find("option:selected"),c=b.text(),f=b.val();if(d.countries[c]){var l=c;g.empty();var m=d.countries[l];for(var o=0;o<m.length;++o){var p=m[o];$("<option>").text(p[0]).val(p[1]).appendTo(g)}g.parents(".field").first().show(),n.call(g.get(0));return}var q=c;e.find(".country-code").text(f),a.hasClass("country-or-region")&&(g.empty(),g.parents(".field").first().hide()),i.empty(),j.empty();var r=d.carriers[q],s=d.languages[q];k=!1;if(d.countries[_("Satellite")])for(var o=0;o<d.countries[_("Satellite")].length;o++)if(d.countries[_("Satellite")][o][0]==q){k=!0;break}if(r){for(var o=0;o<r.length;++o){var t=r[o];$("<option>").text(t.display).val(t.value).appendTo(i)}k?i.parents(".field").first().hide():i.parents(".field").first().show()}else i.parents(".field").first().hide();if(s){for(var o=0;o<s.length;++o){var u=s[o];$("<option>").text(u.display).val(u.value).appendTo(j)}j.parents(".field").first().show()}else j.parents(".field").first().hide()};f.change(n),g.change(n),n.call(f.get(0)),twttr.helpers.addFormEvents(e.find("form"),function(b,c){var d=$(this);c.device_country_intl_prefix=d.find(".country-code").text(),d.find(".error").removeClass("error"),d.find(".error-text").remove(),d.addClass("submitting"),twttr.API.Device.create(c,{success:function(b){d.removeClass("submitting");var e=b.devices[0];b.duplicate?a._showDuplicate(e,c):b.errors?a._showCreateErrors(d,b.errors):(k||(e.carrier_name=i.find(":selected").text()),a._showWaiting(e))},error:function(a){d.removeClass("submitting");var b=a.response.errors;b&&b.length&&b[0].message?twttr.showError(b[0].message):twttr.showError(_("Whoops! Something went wrong. Please try again!"))}})})})},_showCreateErrors:function(a,b){var c=b.device;for(var d=0;d<c.length;++d){var e=c[d],f=a.find("input[name='device["+e[0]+"]']"),g=f.parents(".field").first();$error=$("<div>").addClass("error-text").text(e[1]),g.addClass("error"),g.find(".label").first().append($error)}},_showDuplicate:function(a,b){this._updateDeviceForRendering(a);var c=this,d=this.$container.find(".twttr-dialog-device-setup");d.empty();var e=(new twttr.views.DeviceSetupDialogDuplicate(a)).render(d,"append");e.find(".retry").click(function(a){a.preventDefault();var d=$(this);if(d.hasClass("disabled"))return;d.addClass("disabled"),twttr.API.Device.create(b,{success:function(a){d.removeClass("disabled"),a.duplicate||(a.errors?c._showCreate():c._showWaiting(a.devices[0]))},error:function(){d.removeClass("disabled")}})}),e.find(".cancel-instructions a").click(function(a){a.preventDefault(),c._showCreate()})},_showWaiting:function(a){this._fetchStatusDelayed();var b=this,c=this.$container.find(".twttr-dialog-device-setup"),d=c.find(".twttr-dialog-device-setup-waiting");if(d.length)return;c.empty(),this._updateDeviceForRendering(a),d=(new twttr.views.DeviceSetupDialogWaiting(a)).render(c,"append"),d.find(".refresh a").click(function(a){a.preventDefault(),b._fetchStatus()}),d.find(".cancel-instructions a").click(function(c){c.preventDefault(),b._clearDelayedStatusFetch(),twttr.API.Device.destroy(a.id,{success:twttr.bind(b,b._showCreate)})})},_showVerified:function(a){var b=this.$container.find(".twttr-dialog-device-setup");b.empty(),this._updateDeviceForRendering(a),(new twttr.views.DeviceSetupDialogVerified(a)).render(b,"append")},_updateDeviceForRendering:function(a){a.address_without_country_code=a.address.replace("+"+a.country_code,""),a.stop_command="Stop",a.go_command="Go"}}),a(twttr.widget.DeviceSetupDialog)})}),provide("widget/InviteContactsDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.InviteContactsDialog",function(a,b){b=b||{},this.routeToHome=b.routeToHome,b.template=b.template||{},b.template.title=b.template.title||_("Invite your friends who aren't on Twitter"),b.template.content=b.template.content||"",defaultOptions={modal:!0,draggable:!0},b=twttr.merge({},defaultOptions,b,!0),b.view="Dialog",twttr.widget.Dialog.call(this,b);var c=b.onSuccess||$.noop,d=this,e={onSuccess:function(){c.call(d)},onSubmit:function(){d.clearError()},showError:function(a){d.setError(a)},scribbler:b.scribbler,clientEventComponent:"invite_contacts_dialog"},f=new twttr.components.InviteContacts(a,e);this.$container.find(".twttr-dialog-content").append(f.$node),this.$container.find(".twttr-dialog-footer").remove()}).subclassOf(twttr.widget.Dialog).methods({close:function(){this.constructor.uber.close.call(this),this.routeToHome&&twttr.router.routeTo(twttr.router.homePath())}}),a(twttr.widget.InviteContactsDialog)})}),provide("widget/ListDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.ListDialog",function(a){a=a||{},a.template=a.template||{},a.template.title=a.template.title||a.list?_("Edit list details"):_("Create a new list"),a.template.content=a.template.content||(new twttr.views.ListDialog(a.list)).html(),twttr.is.def(a.modal)||(a.modal=!0),twttr.is.def(a.draggable)||(a.draggable=!0),a.view="Dialog",twttr.is.fn(a.onSuccess)||(a.onSuccess=function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:a.slug}))}),twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).methods({open:function(){twttr.widget.Dialog.prototype.open.call(this),this.$container.find("input[name=name]").focus()},registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this);var b=this.$container.find(".update-list-button");this.$container.find(".field .text").bind("focus blur keyup",function(a){this.value.length?b.removeClass("disabled"):b.addClass("disabled")}),b.click(function(b){if($(this).hasClass("disabled"))return;$(this).addClass("disabled");var c={name:a.$container.find("[name=name]").val(),description:a.$container.find("[name=description]").val(),mode:a.$container.find("[name=mode]:checked").val(),error:function(b){twttr.helpers.showErrorFromResponse(b),$(a).removeClass("disabled")},complete:function(b){a.close()}};a.options.list?a.options.list.update(twttr.merge(c,{success:function(b){twttr.showMessage(_("List updated!")),a.options.onSuccess(b)}})):twttr.currentUser.lists.create(c.name,twttr.merge(c,{success:function(b){twttr.showMessage(_("List created!")),a.options.onSuccess(b)}}))})},close:function(){this.constructor.uber.close.call(this),this.remove()}}),a(twttr.widget.ListDialog)})}),provide("components/t1/DirectMessageDialog",function(a){using("widget/Dialog","constants","TweetBox",function(b,c,d){var e=twttr.klass("twttr.widget.DirectMessageDialog",function(a,b,c){twttr.messageManager._fetchMessages(),c=c||{},d=c.tweetBox||d,twttr.widget.Dialog.call(this,{modal:!0,draggable:!0,view:"DirectMessageDialog",closeOnNavigate:!0,template:{footer:!0},positioning:{top:55}}),this.initComponentEvents(this.$container);var e=this;twttr.messageManager.bind("updatedThread",function(a,b,c,d){e._updateConversation(b,c,d)}),twttr.messageManager.bind("deletedThread",function(a,b){e._deleteThread(b)}),this._hideTweetBox(),this.tweetBox=new d(".twttr-dialog-container .js-dm-tweetbox",{data:{getUser:twttr.bind(this,this._getRecipient)},closeAfterSuccess:!1,condensed:!1,width:450,height:56,statusAction:"directMessage",displayError:!1,template:{button_text:_("Send message"),show_geo:!1,show_turkey:!1,show_title:!1}}),this.tweetBox.bind("dmSuccess",function(a,b,c){twttr.messageManager.addMessage(b,!0),e.switchToConversationView(b.threadId)}),this.tweetBox.bind("dmError",function(a,b){var b=twttr.errors.getViewForErrorCode(b,"dm").html();e._showError($("<span>").html(b))}),this.tweetBox.bind("error",function(a,b){e._showError(b)});var e=this;a=a||twttr.widget.DirectMessageDialog.views.conversationList,this.bind("close",function(){twttr.messageManager.unbind("updatedThread"),twttr.messageManager.unbind("deletedThread")}),this.bind("open",function(){switch(a){case twttr.widget.DirectMessageDialog.views.newConversation:e.switchToNewMessageView(b),e._trackClientDialogImpression("dm_new_conversation");break;case twttr.widget.DirectMessageDialog.views.conversation:e.switchToConversationView(b),e._trackClientDialogImpression("dm_existing_conversation");break;case twttr.widget.DirectMessageDialog.views.conversationList:default:e.switchToConversationListView(),e._trackClientDialogImpression("dm_conversation_list")}})}).subclassOf(b).mixin(twttr.mixins.componentEvents,twttr.mixins.i18nTweet).statics({views:{conversationList:1,conversation:2,newConversation:3}}).methods({_getRecipient:function(){var a=this.$find(".js-dm-conversation[data-thread-id]").attr("data-thread-id");return a||this.$find(".js-dm-user-autocomplete").val()},_trackClientDialogImpression:function(a){trackClient({component:a,action:"open"},{})},_trackClientDelete:function(a){trackClient({component:"direct_message",action:"delete"},{item_ids:[a],item_count:1})},switchToConversationListView:function(){var a=this;this._updateHeader({conversation_list:!0}),this._hideTweetBox(),twttr.messageManager.getAllThreads(function(b){a._updateContent("DirectMessageDialogConversationList",{threads:b}),a.$find("div.dm-thread-content").each(function(){a.updateRtlDisplay($(this))})})},switchToConversationView:function(a){var b=this;twttr.messageManager.getThread(a,function(c){if(!c){b.switchToNewMessageView(a);return}var d=c.messages[0],e=twttr.helpers.isCurrentUser(d.recipient)?d.sender:d.recipient;b._updateHeader({conversation:!0,name:e.name}),b._updateContent("DirectMessageDialogConversation",c),b.$find("div.dm-content").each(function(){b.updateRtlDisplay($(this))}),b._showTweetBox(a),b.tweetBox.focus(),b.$find("a.js-dm-delete").tipsy({gravity:"s"});var f=b.$find(".js-dm-conversation");f.scrollTop(f[0].scrollHeight),twttr.messageManager.markThreadAsRead(c.threadId)})},switchToNewMessageView:function(a){var b=this;this._updateHeader({new_dm:!0}),this._updateContent("DirectMessageDialogNew",{}),twttr.components.Autocomplete.getAutocompletedUsers(function(){b.autocomplete=new twttr.components.Autocomplete({limit:8,input:b.$find(".js-dm-user-autocomplete")}),b.autocomplete.bind("select",function(a,c,d,e,f,g){b._setProfileImageUrl(e),b.switchToConversationView(f),b.tweetBox.focus()}),b.autocomplete.bind("hide",function(){!b.$find(".js-dm-user-autocomplete:focus").length&&b._verifyUser()}),b._setProfileImageUrl(),b.autocomplete.focus(),a&&(b.autocomplete.set(a),b._verifyUser())}),this._showTweetBox()},_updateConversation:function(a,b,c){var d=this._getCurrentView();switch(d){case twttr.widget.DirectMessageDialog.views.conversationList:this._updateConversationListView(a,b);break;case twttr.widget.DirectMessageDialog.views.conversation:this._updateConversationView(a,b,c)}},_deleteThread:function(a){this.$find(".js-dm-threads .js-dm-thread[data-thread-id="+a+"]").remove(),this.$find(".js-dm-conversation[data-thread-id="+a+"]").empty()},_updateConversationListView:function(a,b){var c=this.$find(".js-dm-threads"),d=c.find(".js-dm-thread[data-thread-id="+a.threadId+"]"),e=$((new twttr.views.DirectMessageDialogConversationListItem(a)).html());d.length>0&&d.replaceWith(e),d=e,b==="new"&&c.find(".js-dm-thread-list").prepend(d)},_updateConversationView:function(a,b,c){var d=this.$find(".js-dm-conversation[data-thread-id="+a.threadId+"]");if(d.length>0){var e=d.find(".js-dm-item[data-message-id="+c.messageId+"]");switch(b){case"new":if(e.length)break;d.append((new twttr.views.DirectMessageDialogConversationItem(c.message)).html()),d.animate({scrollTop:d.attr("scrollHeight")},500);break;case"delete":e.remove()}twttr.messageManager.markThreadAsRead(a.threadId)}},_getCurrentView:function(){return this.$find(".js-dm-threads").length>0?twttr.widget.DirectMessageDialog.views.conversationList:this.$find(".js-dm-conversation").length>0?twttr.widget.DirectMessageDialog.views.conversation:this.$find(".js-dm-new").length>0?twttr.widget.DirectMessageDialog.views.newConversation:null},_updateHeader:function(a){return this._replaceDivWithView(".js-dm-header","DirectMessageDialogHeader",a)},_setProfileImageUrl:function(a){a=a||twttr.assets.path("sticky/default_profile_images/default_profile_6_mini.png",{isVersioned:!1}),this.$find("img.js-dm-avatar").attr("src",a)},_updateContent:function(a,b){return this._replaceDivWithView(".js-dm-content",a,b)},_replaceDivWithView:function(a,b,c){return this.$find(a).html((new twttr.views[b](c)).html())},_hideTweetBox:function(){this.$find(".js-dm-tweetbox").hide()},_showTweetBox:function(a){this.tweetBox.resetTweetContent(),this.$find(".js-dm-tweetbox").show()},_showError:function(a){var b=this.$find(".js-dm-error");b.find(".dm-error-text").html(a),b.show()},_hideError:function(){this.$find(".js-dm-error").hide()},_verifyUser:function(){var a=this,b=this.$find(".js-dm-user-autocomplete").val();this._hideError();if(!b||twttr.is.blank(b))return;if(!b.match(c.regexps.username)){a._setProfileImageUrl(),a._showError(_("Whoops! That's not a valid username."));return}twttr.API.User.find(b,{success:function(b){twttr.currentUser.relationshipWith(b.screenName,function(c){c.canDM?a._setProfileImageUrl(b.profileImageUrl):a._showError(_("You can't send a message to a user who is not following you."))})},error:function(b){a._setProfileImageUrl(),a._showError(_("Whoops! That user does not exist."))}})}}).click({".js-dm-thread-link":function(a){var b=$(a.currentTarget).attr("data-thread-id");this.switchToConversationView(b),a.preventDefault()},".js-dm-header-title":function(a){this.switchToConversationListView(),a.preventDefault()},".js-dm-header-new":function(a){this.switchToNewMessageView(),a.preventDefault()},".js-dm-delete":function(a){this.$find(".js-dm-delete").tipsy("hide"),$("div.js-dm-tweetbox").addClass("dm-deleting");var b=$(a.currentTarget).attr("data-message-id"),c=".js-dm-delete-confirm";this._replaceDivWithView(c,"DirectMessageDeleteConfirm",{messageId:b}),$(c).show(),a.preventDefault()},".js-dm-delete-confirm .js-prompt-ok":function(a){var b=$(a.currentTarget).attr("data-message-id"),c=this.$find(".js-dm-conversation").attr("data-thread-id");this.$find(".js-dm-item[data-message-id="+b+"]").remove(),this.$find(".js-dm-item").length==0&&this.switchToConversationListView(),$("div.js-dm-tweetbox").removeClass("dm-deleting"),twttr.messageManager.deleteMessage(b,c),this._trackClientDelete(b),a.preventDefault()},".js-dm-delete-confirm .js-prompt-cancel":function(a){var b=$(a.currentTarget).attr("data-message-id");this.$find(".js-dm-item[data-message-id="+b+"]").hide(),$("div.js-dm-tweetbox").removeClass("dm-deleting"),a.preventDefault()},".js-dm-error .js-dismiss":function(a){this._hideError(),a.preventDefault()}}).focus({".twitter-anywhere-tweet-box-editor":function(a){this._getCurrentView()===twttr.widget.DirectMessageDialog.views.newConversation&&(this._verifyUser(),this.autocomplete&&this.autocomplete.hide())}});a(e)})}),provide("widget/MuteDialog",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.widget.MuteDialog",function(){this.peoples=twttr.caches.User.get("muted"),this.peoples||(this.peoples={});var a={fixed:!1,draggable:!0,modal:!1,view:"Dialog",template:{title:_("Mute a User"),content:(new twttr.views.MuteUsers).html()}};twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.autocomplete=new twttr.components.Autocomplete({input:this.$find(".mute-input"),limit:10}),this.currentSelection={},this.autocomplete.bind("select",function(b,c,d,e,f,g){a.currentSelection.screenName=f,a.currentSelection.userId=g,a.currentSelection.profileImageUrl=e}),this.$dialog.delegate(".remove-muted-person","click",function(b){var c=$(this).parent(),d=c.attr("data-user-id");delete a.peoples[d],twttr.caches.User.set("muted",a.peoples),c.remove()}),this.$find(".mute-input,.twttr-dialog").bind("keydown",function(c){c.keyCode===b.constants.keyCodes.enter&&!twttr.components.Autocomplete._isCompletionsOpen&&(c.stopPropagation(),a.fetchUser())}),this.$find(".button").bind("click",function(b){a.fetchUser()}),this.populateUsers()},fetchUser:function(){var a=this.$find("input[type=text]");twttr.API.User.find(a.val().toString(),twttr.bind(this,function(b){a.val(""),$(".stream-tweet[data-user-id="+b.id+"]").parent().hide();var c={screenName:b.screenName,userId:b.id,profileImageUrl:twttr.helpers.transformProfileImageUrl(b.profileImageUrl,"mini")};this.peoples[b.id]=c,twttr.caches.User.set("muted",this.peoples),this.populateUsers()}))},populateUsers:function(){var a=[];for(var b in this.peoples)a.push('<li data-user-id="'+this.peoples[b].userId+'" data-user-screenname="'+this.peoples[b].screenName+'">                  <img width="24" height="24" src="'+this.peoples[b].profileImageUrl+'"/> '+this.peoples[b].screenName+' <span class="remove-muted-person">&times;</span></li>');a=a.join(""),this.$find(".muted-user-list").html(a)},open:function(){return twttr.widget.Dialog.prototype.open.call(this),this.$find("input[type=text]").focus(),this},close:function(){return twttr.widget.Dialog.prototype.close.call(this),this.remove(),this}}),a(twttr.widget.MuteDialog)})}),provide("widget/DiscoveryDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.DiscoveryDialog",function(a){twttr.widget.Dialog.call(this,twttr.merge({modal:!0,draggable:!1,css:{width:530}},a))}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this);var a=this,b=this.$find("form"),c=function(){b.find("input, textarea").attr("disabled","disabled"),b.find(".button").addClass("disabled")},d=function(){twttr.Router.performRedirect(twttr.router.homePath())};twttr.helpers.addFormEvents(b,function(e,f){if(b.find(".button").hasClass("disabled"))return;c(),twttr.currentUser.updateDiscoverability(f,{success:function(b){twttr.currentUser.sync("name",b.name),twttr.currentUser.sync("description",b.description),twttr.currentUser.sync("location",b.location),twttr.currentUser.sync("email_discoverability_set",b.email_discoverability_set),twttr.currentUser.sync("mobile_phone_discoverability_set",b.mobile_phone_discoverability_set),twttr.currentUser.sync("discoverable_by_email",b.discoverable_by_email),twttr.currentUser.sync("discoverable_by_mobile_phone",b.discoverable_by_mobile_phone),a.destroy(),d()},error:function(b){twttr.showError(_("Whoops! Something went wrong. Please try again!")),a.destroy()}})}),this.$find(".button.cancel").bind("click",function(){c(),d()})}}),a(twttr.widget.DiscoveryDialog)})}),provide("widget/GeoPromoDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.GeoPromoDialog",function(){twttr.widget.Dialog.call(this,{template:{title:_("Add a location to your tweets"),content:(new twttr.views.GeoPromoDialog).html()},view:"Dialog",modal:!0,stackPreviousModal:!0})}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.$find("#geo_turn_location_on").click(function(){a.enableGeoForCurrentUser()}),this.$find(".geo_dialog_close").click(function(b){b.preventDefault(),a.destroy()})},enableGeoForCurrentUser:function(){var a=this,b=$("#geo_promo_dialog_content .geo-progress"),c=$("#geo_promo_dialog_content .geo-unable-to-turn-location-on");if(b.hasClass("geo-spinner"))return;b.addClass("geo-spinner"),c.hide(),twttr.currentUser.setGeoEnabled(!0,{success:function(){twttr.geo.geoEnabled=!0,a.destroy(),twttr.geo.location.turnLocationOn()},error:function(){b.removeClass("geo-spinner"),c.show()}})}}),a(twttr.widget.GeoPromoDialog)})}),provide("widget/RetweetDialog",function(a){using().as(function(b){twttr.klass("twttr.widget.RetweetDialog",function(a){twttr.widget.RetweetDialog.uber.constructor.call(this,a),this.$dialog.attr("type","retweet"),this.$container.find(".twttr-dialog-footer").hide(),twttr.API.Status.find(this.options.data.tweetId,twttr.bind(this,function(b){var c=new twttr.views.ReplyDialogFooter({screen_name:b.user.screenName,text:a.tweetText,profile_image_url:b.user.profileImageUrl});c.render(this.$container.find(".twttr-dialog-content"),"prepend")}))}).subclassOf(twttr.widget.Prompt),a()})}),provide("widget/TrendsDialog",function(a){using().as(function(b){var c=twttr.klass("twttr.widget.TrendsDialog",function(a){var b=this,a=twttr.merge({view:"Dialog",destroyOnClose:!1,template:{container_id:"trends_dialog"}},a,!0);a.template.title=twttr.decider.isAvailable("personalized_trends")?_("Trends"):_("Choose a trend location"),twttr.widget.Dialog.call(b,a),b.resetChangeCount(),b.bind("close",function(){b.logClose()}),b.bind("open",function(){trackClient({section:"trends_location_dialog",action:"open"}),b.rerender()}),this.initComponentEvents(this.$container),b.position()}).subclassOf(twttr.widget.Dialog).mixin(twttr.mixins.componentEvents).methods({resetChangeCount:function(){this.changeCount=0},logClose:function(){scribble("close-trend-location-dialog",{woeid:twttr.trendLocations.current.woeid,change_count:this.changeCount,input:"click"}),this.resetChangeCount()},updateFooter:function(a){var b=this.$find(".twttr-dialog-footer");twttr.decider.isAvailable("personalized_trends")&&!twttr.trendLocations.current.isPersonalized||a?(b.html((new twttr.views.TrendsDialogFooter).html()),b.show()):b.hide()},rerender:function(a){var b=this.$container.find(".twttr-dialog-content");b.empty(),this.updateFooter(a),(new twttr.views.LocalTrendsNew(twttr.trendLocations.all,a)).render(b,"append"),this.markLocation()},registerEvents:function(){var a=this;twttr.widget.TrendsDialog.uber.constructor.prototype.registerEvents.call(a),a.$container.delegate("li a","click",function(b){a.changeCurrentLocation($(this),"dialog"),b.preventDefault()}),a.$container.delegate("a.trend-breadcrumb-location","click",function(b){a.changeCurrentLocation($(this),"dialog-breadcrumb"),b.preventDefault()})},position:function(){this.options.fixed||this.$dialog.addClass("static");var a=twttr.app.currentPage().$find(".dashboard");if(twttr.isT1||a.length===0)var b=($(document).width()+this.$dialog.outerWidth())/2;else var b=Math.max(a.offset().left,this.$dialog.outerWidth());var c=$(window).scrollTop(),d=this.$dialog.innerHeight(),e=$(window).height(),f=Math.round(e/2-d/2);f=Math.max(f,$("#top-stuff").innerHeight()+1),this.options.fixed||(f+=c),this.$container.css({left:b-this.$dialog.outerWidth(),top:f})},changeCurrentLocation:function(a,b){if(a){a.closest(".twttr-dialog-content").find(".selected").removeClass("selected"),a.addClass("selected");var c=parseInt(a.attr("data-woeid"),10)}twttr.trendLocations.setCurrent({isPersonalized:!c,woeid:c,origin:b}),this.changeCount+=1},markLocation:function(){var a=twttr.trendLocations.current;if(!a.isPersonalized){var b=a&&a.woeid||1;this.$container.find("[data-woeid="+b+"]").addClass("selected")}}}).click({".customize-by-location":function(){this.rerender(!0)},"button.done":function(){this.close()},".select-personalized":function(){this.changeCurrentLocation(null,"dialog"),this.close()}});twttr.isT1&&c.methods({position:twttr.util.noopInT1}),a(c)})}),provide("widget/ReplyDialog",function(a){using().as(function(b){twttr.klass("twttr.widget.ReplyDialog",function(a){var a=twttr.merge({},twttr.dialogs.defaultOptions,a,{},!0);twttr.widget.ReplyDialog.uber.constructor.call(this,a),this.$dialog.attr("type","reply")}).subclassOf(twttr.widget.TweetDialog).statics({openReplyDialog:!1}).methods({open:function(){return this.constructor.openReplyDialog&&this.constructor.openReplyDialog.close(),twttr.widget.TweetDialog.prototype.open.call(this),this.constructor.openReplyDialog=this,this.focus(),this},focus:function(){var a=this.view.tweetBox.editor.$editor.val().length,b=this.view.tweetBox.editor.$editor.val().length;this.options.multiple&&(a=this.options.data.screenName.length+2),this.setCaretPosition(a,b)}}),a(twttr.widget.ReplyDialog)})}),provide("widget/ListMembershipDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.ListMembershipDialog",function(a,b){b=twttr.merge({view:"Dialog",modal:!0,draggable:!0,css:{width:340,height:"auto"},positioning:{top:80},template:{container_id:"list_membership_dialog",title:_("Your lists"),content:(new twttr.views.AddToListDialog({screen_name:a.screenName})).html()}},b||{},!0),this.makeListItems(a),twttr.widget.Dialog.call(this,b),this.addSpinner()}).subclassOf(twttr.widget.Dialog).methods({makeListItems:function(a){var b=this;this.getListDialogItems(a,function(a){b.spinner&&b.spinner.hide(),a.length>1&&b.$container.find(".add-to-list-prompt").show(),b.renderItems(a),b.attachHandlers(a)})},addSpinner:function(){this.spinner=$("<span class='spinner' title='{{_i}}Loading...{{/i}}'></span>"),this.spinner.appendTo(this.$container.find(".twttr-dialog-body"))},attachHandlers:function(a){var b=this.$container.find(".list-membership-container").children();for(var c=0;c<a.length;c++){var d=a[c];if(!d.handlers)continue;$.each(d.handlers,function(a,d){var e=$(b[c]),f=[a,d];e.bind.apply(e,f)})}},renderItems:function(a){var b=twttr.map(a,function(a){return(new twttr.views.CheckboxListItem(a)).html()});$(b.join("")).appendTo(this.$container.find(".list-membership-container"))},getListDialogItems:function(a,b){var c=this;twttr.currentUser.lists({count:twttr.currentUser.listsLimit,success:function(d){var e=[],f={},g=function(f){d.each(function(a){e.push(i(a))}),e.push({label:_("Create a list"),icon:"list",className:"btn create-a-list",handlers:{click:function(){c.destroy(),(new twttr.widget.ListDialog({onSuccess:function(b){b.add(a,{success:function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:b.slug}))},error:function(a){twttr.helpers.showErrorFromResponse(a)}})}})).open()}}}),b(e)},i=function(b){return{label:h(b.name),id:b.id,user_is_member:f[b.id],is_private:b.mode==="private",handlers:{click:c.handler(b,a)}}};d.length()?a.memberships({filter_to_owned_lists:!0,success:function(a){a.each(function(a,b){f[a.id]=!0}),g()}}):g()}})},handler:function(a,b){return function(c){c.stopPropagation(),c.preventDefault();var d=$(this).find("input[type=checkbox]"),e=d.attr("data-is-checked"),f=!!e&&e==="true",g=$(this).find("img");d.hide(),g.show();var i=f?"remove":"add";a[i](b,{success:function(){twttr.widget.ListMembershipDialog.trigger(i+"ListMember",[a,b]),d.attr("data-is-checked",!f),d.attr("checked",!f)},error:function(){d.attr("data-is-checked",f),d.attr("checked",f),twttr.showError(_("There was an error updating the list"))},complete:function(){g.hide(),d.show()}})}}}),a(twttr.widget.ListMembershipDialog)})}),provide("widget/MiniProfileDialog",function(a){using("components/ProfilePane","components/RecentTweets",function(b,c){twttr.klass("twttr.widget.MiniProfileDialog",function(a,d){var e=this;d=d||!1;var f="";d&&(f=" js-unclickable unclickable"),twttr.widget.Dialog.call(this,{modal:!0,draggable:!0,view:"Dialog",closeOnNavigate:!0,template:{container_id:"mini-profile",title:twttr.isT1?null:"@"+a.screenName,content:"<div class='expando-profile-popup expanding-stream-item js-expando-profile-popup"+f+"'/>"},css:{width:400},positioning:{top:95}});var g=new b(a),i=new c(a);this.$find(".js-expando-profile-popup").append(g.$node).append(i.$node),this.$dialog.delegate(".js-unclickable, .js-unclickable a","click",function(a){!$(a.target).hasClass("js-action-follow")&&!$(a.target).hasClass("js-action-unfollow")&&!$(a.target).hasClass("twttr-dialog-close")&&(a.stopPropagation(),a.preventDefault())}).delegate(".js-mini-profile-user","click",function(){setTimeout(function(){e.close()},0)})}).subclassOf(twttr.widget.Dialog),a(twttr.widget.MiniProfileDialog)})}),provide("widget/EmbedDialog",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.widget.EmbedDialog",function(a){return this.status=a,twttr.widget.Dialog.call(this,{modal:!0,fixed:!1,draggable:!1,destroyOnClose:!0,positioning:{top:$(window).scrollTop()+100},view:"Dialog",template:{title:_("Embed this Tweet"),content:(new twttr.views.EmbedDialog).html()}})}).subclassOf(twttr.widget.Dialog).methods({open:function(){function n(a){setTimeout(function(){l.select()},0),x()}function o(){using("//platform.twitter.com/js/vendor/twt/dist/twt.all.min.js","css!//platform.twitter.com/twt/twt.css",function(){if(!window.twt)return;twt.settings.lang=f;var b=twt.tweet(a.status.attributes,{expandMedia:!0});a.status.isReply?a.status.inReplyTo({success:function(a){m.html(b.inReplyTo(a.attributes).html())},error:function(){m.html(b.html())}}):m.html(b.html())}).load()}function p(a,b){var c=b.find(".active");if(c[0]==a[0])return;c.removeClass("active"),a.addClass("active")}function q(a){p($(this).prev(),$(a.delegateTarget)),y($("input:checked",i).val()),u()}function r(a){a.preventDefault();var b=$(this);p(b,$(a.delegateTarget));var c=b.data().target;y(c),u()}function s(){var a={lang:f,target:$(".active",j).data().target,align:$("input:checked",i).val()},b=t(a);return a.success=v(b),a}function t(a){return a.lang+a.target+a.align}function u(){var b=s(),f=t(b),g={html:"https://twitter.com/"+a.status.user.screenName+"/statuses/"+a.status.id+""};e++||l.addClass(c).attr(c,c);if(d[f])return b.success(d[f]);if(b.target=="link")return b.success(g);a.status.oembed(b)}function v(a){return function(f){var g=s();d[a]=f,--e||l.val(d[t(g)].html).removeClass(c).removeAttr(c),b&&(b=!1,n())}}function w(){var a={section:"embed_code_dialog",component:"embed_tweet_code",action:"open"};trackClient(a,twttr.audit.currentPage())}function x(){var a={section:"embed_code_dialog",component:"embed_tweet_code",action:"focus"};trackClient(a,twttr.audit.currentPage())}function y(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"target_"+a};trackClient(b,twttr.audit.currentPage())}function z(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"align_"+a};trackClient(b,twttr.audit.currentPage())}function A(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"language_"+a};trackClient(b,twttr.audit.currentPage())}var a=this,b=!0,c="disabled",d={},e=0,f;twttr.widget.Dialog.prototype.open.call(this);for(var g=twttr.languages.length;g--;)if(twttr.languages[g].current){f=twttr.languages[g].code;break}var i=this.$container,j=i.find(".embed-target"),k=i.find(".embed-alignment"),l=i.find("textarea"),m=i.find(".embed-preview");return u(),o(),w(),A(f),j.delegate("a","click",r),k.delegate("input","click",q),l.focus(n),this},destroy:function(){twttr.widget.Dialog.prototype.destroy.call(this),twttr.router.unbind("urlChanged",this.urlChangedListener),twttr.router.routeTo(twttr.router.permalinkPath({screen_name:this.status.user.screenName,id:this.status.id}))}}),a(twttr.widget.EmbedDialog)})}),provide("components/pages/mixins/searchT1",function(a){using("mixins/sideNavigationT1","components/t1/SearchHeader","components/t1/dashboard/SearchNav","components/SignupCallOut").as(function(b){var c=twttr.klass.mixin("twttr.components.pages.mixins.searchT1",function(){this.mixin(b.mixins.sideNavigationT1).view(twttr.views.SearchPage).addOnSwitchAway(function(){this.removeSearchHeader(),this.removeSearchAssistance()}).addOnSwitchTo(function(){this.registerSearchAssistanceDecider(),this.$node.find(".js-search-header").length||this.addSearchHeader()}).addAfterRender(function(){this.isNewSearchHeaderAvailable()?(this.setQuery(this._query),this.focusQuery()):(this.addSearchHeader(),$("#search-query").val(""))}).methods({getDashboardComponents:function(){var a=[];return twttr.loggedIn||a.push(new b.components.SignupCallOut("search",{query:this._query})),this._nav=new b.components.t1.dashboard.SearchNav(this._query),this.trendsComponent=this.trendsComponent||new twttr.components.Trends,a.concat([this._nav,this.trendsComponent,new twttr.components.Footer])},noAutoRender:!0,people:function(a,c){var d=a.query||c.q,e=this._query!==d;this._query=d;if(!d)return this.routePageTo(this.PATH_ROOT);this.streamManager||this.render({query:d,pretty_query:d,has_relevance_search:!1,top_mode:!1,all_mode:!1,timeline_mode:!1,with_links_mode:!1}),this.streamManager.switchTo(twttr.streams.PeopleSearch,{query:d,pathRoot:this.PATH_ROOT,hideTitle:!1});if(e){var f=new b.components.t1.dashboard.SearchNav(this._query);this._nav.$node.replaceWith(f.$node),delete this._nav,this._nav=f}this.setQuery(d),this.focusQuery(),this.selectCurrentSideNav(),this.removeOnebox(),this.removeSearchAssistance(),this.updatePageTitle(_("Twitter / User Search"))},registerSearchAssistanceDecider:function(){if(twttr.decider.isAvailable("search_assistance")){this._isNewSearchHeaderAvailable=!0,this._isSearchAssistanceAvailable=!0;return}var a=twttr.abdecider.choose("search_assistance_192");this._isNewSearchHeaderAvailable=a==="no_header_no_assistance"||a==="no_header_with_assistance",this._isSearchAssistanceAvailable=a==="no_header_with_assistance"},isNewSearchHeaderAvailable:function(){return!!this._isNewSearchHeaderAvailable},isSearchAssistanceAvailable:function(){return!!this._isSearchAssistanceAvailable},renderRelatedQueries:function(a){if(!$.isArray(a)||!a.length)return;var b=a.length,c=[],d=[];for(var e=0;e<b;e++)c[e]={search_query_source:twttr.search.searchQuerySource.RELATED_QUERY,query:this._query,related_query:a[e].query,url:twttr.router.searchResultsPath({query:a[e].query}),delimiter:e<b-1?", ":""},d[e]=a[e].query;this.$find(".js-search-header").append((new twttr.views.RelatedQueries({related_queries:c})).html()),trackClient({section:"search",component:"related_queries",action:"impression"},{query:this._query,item_count:d.length,item_names:d})},renderSpellingCorrections:function(a){if(!$.isArray(a)||!a.length)return;var b=a[0].query,c=[];if(a[0].indices&&a[0].indices.length){var d=a[0].indices,e=0,f=b.length;for(var g=0;g<d.length;g++)c[g]={nonhighlighted:b.substring(e,d[g][0]),highlighted:b.substring(d[g][0],d[g][1])},e=d[g][1];c[d.length]={nonhighlighted:b.substring(e,f),highlighted:""}}else c[0]={nonhighlighted:"",highlighted:b};this.$find(".js-stream-header").before((new twttr.views.SpellingCorrections({query:this._query,correction:b,partitions:c,url:twttr.router.searchResultsPath({query:b}),search_query_source:twttr.search.searchQuerySource.SPELLING_CORRECTION})).html()),trackClient({section:"search",component:"spelling_corrections",action:"impression"},{query:this._query,item_count:a.length,item_names:a})},removeSearchAssistance:function(){this.$find(".js-spelling-corrections").remove(),this.$find(".js-related-queries").remove()},addSearchHeader:function(){this.isNewSearchHeaderAvailable()||(this._header=new b.components.t1.SearchHeader(this._query),this.$node.prepend(this._header.$node))},removeSearchHeader:function(){this.isNewSearchHeaderAvailable()||this._header&&this._header.destroy()},setupSavedSearchAction:function(){var a=twttr.search.isSavedSearch(this._query);a?this.toggleSavedSearchOn(a):this.toggleSavedSearchOff()},toggleSavedSearchOn:function(a){this.isNewSearchHeaderAvailable()?(this.$find(".js-toggle-saved-search-link").html(_("Remove saved search")).addClass("saved").removeClass("not-saved"),this.$find(".js-search-title").html(Mustache.to_html(_('Saved search: <strong class="search-query">{{query}}</strong>'),{query:this._query}))):this._header.toggleSavedSearchOn(),this._savedSearch=a},toggleSavedSearchOff:function(){this.isNewSearchHeaderAvailable()?(this.$find(".js-toggle-saved-search-link").html(_("Save search")).addClass("not-saved").removeClass("saved"),this.$find(".js-search-title").html(Mustache.to_html(_('Results for <strong class="search-query">{{query}}</strong>'),{query:this._query}))):this._header.toggleSavedSearchOff(),this._savedSearch=null},showSearchMenu:function(a){var b=this;a.addClass("open"),$(document).bind("click.button",function(){b.hideSearchMenu(a)})},hideSearchMenu:function(a){a.removeClass("open"),$(document).unbind("click.button")},toggleSearchMenu:function(a){var b=this.$node.find(".js-search-dropdown");b.hasClass("open")?this.hideSearchMenu(b):this.showSearchMenu(b)},setQuery:function(a){this.isNewSearchHeaderAvailable()?$("#search-query").val(a):this._header.setQuery(a)},focusQuery:function(){this.isNewSearchHeaderAvailable()?($("#search-query").addClass("focus"),$("#search-query").blur()):this._header.focusQuery()},addDropdownMenu:twttr.util.noopInT1,renderPeopleResults:twttr.util.noopInT1,renderOneboxContainer:function(a){this.$find(".js-onebox-container").html(a.$node)},removeOnebox:function(){this.$find(".js-onebox-container").empty()},addImpressionData:function(a){a.query=this._query}}).click({"a.js-toggle-saved-search-link":function(a,b){this._savedSearch?twttr.dialogs.deleteSavedSearch(twttr.bind(this,function(a){if(a){var b=this._savedSearch;this._savedSearch.destroy({before:twttr.bind(this,this.toggleSavedSearchOff),error:twttr.bind(this,function(){this.toggleSavedSearchOn(b),twttr.showError(_("Error deleting search"))})})}})).open():twttr.currentUser.savedSearches.create(this._query,{before:twttr.bind(this,this.toggleSavedSearchOn),error:twttr.bind(this,function(){this.toggleSavedSearchOff(),twttr.showError(_("Error saving search"))})}),a.preventDefault()},"button.js-search-dropdown-button":function(a,b){return this.toggleSearchMenu(),a.preventDefault(),a.stopPropagation(),!1},"div.js-related-queries a":function(a,b){trackClient({section:"search",component:"related_queries",action:"search"},{query:b.data("query"),item_names:[b.data("search-assistance")]})},"div.js-spelling-corrections a":function(a,b){trackClient({section:"search",component:"spelling_corrections",action:"search"},{query:b.data("query"),item_names:[b.data("search-assistance")]})},"div.js-spelling-corrections div.js-action-dismiss":function(a,b){this.$find(".js-spelling-corrections").animate({opacity:"0"},250).slideUp(),trackClient({section:"search",component:"spelling_corrections",action:"dismiss"},{query:b.data("query"),item_names:[b.data("search-assistance")]})}})});a(c)})}),provide("components/pages/ProfileAbstract",function(a){using().as(function(b){var c=twttr.klass.page("twttr.components.pages.ProfileAbstract").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage,twttr.mixins.profileHelper).methods({_addAdminTools:function(){if(twttr.admin&&!twttr.helpers.isCurrentUser(this.profileUser)){var a=this;using(">defaultViews",function(){twttr.admin.addToolsFor(a.profileUser.screenName,a.profileUser.id)})}},_highlightNavIfCurrentUser:function(a){twttr.app.highlightGlobalNav("profile",twttr.helpers.isCurrentUser(a))},_switchToStream:function(a,b){var c=this;this.unfocusStreamItem(),this.loading(a.screenName),this.getUserInfo(a.screenName,function(){c._addPromotedData(),!c._renderedScreenName||c._renderedScreenName.toLowerCase()!==a.screenName?c._renderPage():twttr.themes.loadUserStyleFor(c.profileUser),c.streamManager.switchTo(a.stream,twttr.merge({canViewUser:twttr.helpers.canViewUser(c.profileUser)},a),b),twttr.components.JapaneseAd.refreshAds(),c.trigger("switchedToStream")},{batch:!twttr.loggedIn},twttr.bind(this,this.noUserFoundCallback)),this.focusStreamTab(a.tab),twttr.isT1||trackClient({action:"impression"},{profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"})},loading:function(a){a=a.toLowerCase();if(this.preRendered){this.preRenderedScreenName=this.$find("div.profile-header").attr("data-screen-name").toLowerCase();if(this.preRenderedScreenName==a)return}if(!this._renderedScreenName||this._renderedScreenName.toLowerCase()!==a)this.streamManager&&this.streamManager.getCurrent()&&this.streamManager.getCurrent().$node.detach(),this.$node.children().empty(),$("div.tipsy").remove()},_renderPage:function(){this.profileUser.screenName.toLowerCase()!==this.preRenderedScreenName&&twttr.themes.loadUserStyleFor(this.profileUser),this._addAdminTools(),this.render({can_view:twttr.helpers.canViewUser(this.profileUser),screen_name:this.profileUser.screenName,social_context:this._isSocialContextAvailable()}),this._renderedScreenName=this.profileUser.screenName,this.renderUserInfo(),this._followingDropDown=null,this._followersDropDown=null},noAutoRender:!0});twttr.isT1?c.methods({renderUserInfo:twttr.util.noopInT1}):c.methods({renderUserInfo:function(){var a=this,b=this.profileUser;this.panes.push(new twttr.views.Dashboard("profile.dashboard",b.attributes));var c=new twttr.components.ProfileActions(b);c.$node.appendTo(this.$find(".profile-actions-container"))}}),a(c)})}),provide("components/pages/Search",function(a){using("_",twttr.isT1?"components/pages/mixins/searchT1":"components/pages/mixins/searchP1","util","constants").as(function(b,_,c){var d=twttr.klass("twttr.components.pages.Search").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).view(twttr.views.SearchPage).addOnSwitchAway(function(){twttr.search.clear(),this.trendsComponent&&this.trendsComponent.stopUpdatePolling()}).addOnSwitchTo(function(){twttr.themes.loadCurrentUserStyle(),this.trendsComponent&&this.trendsComponent.startUpdatePolling()}).addAfterRender(function(){this.addDashboardComponents(this.getDashboardComponents()),this.trendsComponent&&this.trendsComponent.registerEventHandlers()}).statics({addSearchClickLogging:function(a,b){if(a.length){var c={};b.tweet_click_info=c,c.tweet_id=a.attr("data-tweet-id"),c.pos=a.closest(".stream-item").prevAll(".stream-item").length,c.type=a.is(".promoted-tweet")?"promoted":a.is(".top-tweet")?"popular":"recent"}}}).methods({realtime:function(a,b){var c=a.query||b.q;twttr.decider.isAvailable("phoenix_search_relevance")?this.updatePageTitle(_("Twitter / Search - {{{query}}} - All Tweets",{query:c})):this.updatePageTitle(_("Twitter / Search - {{{query}}}",{query:c})),this.enterMode(c,"tweets")},timeline:function(a,b){var c=a.query||b.q;this.updatePageTitle(_("Twitter / Timeline Search - {{{query}}}",{query:c})),this.enterMode(c,"timeline")},links:function(a,b){var c=a.query||b.q;if(!c)return this.search({query:"links"});this.updatePageTitle(_("Twitter / Search - {{{query}}} - Tweets with links",{query:c})),this.enterMode(c,"links")},searchShow:function(a,b){if(twttr.decider.isAvailable("swift_events")&&twttr.decider.isAvailable("swift_events_search")){var c=twttr.griffin.isEvent(a.query);twttr.griffin.setNoRedirectOnSearch(c,!0)}this.search(a,b)},search:function(a,b){if(!twttr.currentUser&&!twttr.decider.isAvailable("phoenix_search_relevance_logged_out")||twttr.currentUser&&!twttr.decider.isAvailable("phoenix_search_relevance")){this.realtime(a,b);return}b&&b.partner=="mozilla"&&b.source=="desktop-search"&&(a.query=a.query.replace(/\+/g," ")),this.query=a.query||b.q,this.query===!0&&(this.query=!1);if(twttr.decider.isAvailable("swift_events")&&twttr.decider.isAvailable("swift_events_search")){var c=twttr.griffin.isEvent(this.query);twttr.griffin.isEuroSearchTakeover(this.query)&&(c="euro2012");if(twttr.griffin.redirectOnSearch(c))return}this.updatePageTitle(_("Twitter / Search - {{{query}}}",{query:this.query})),this.enterMode(this.query,"relevance",b)},placeTweetSearch:function(a){var b=a.place_name,c=a.place_id;this.updatePageTitle(_("Twitter / Tweets at {{placeName}}",{placeName:b})),this._placeName=b,this.enterMode("place:"+c,"placeTweetSearch")},noAutoRender:!0,enterMode:function(a,b,c){twttr.search.latestQuery=a,c=c||{};if(!a){twttr.router.redirectTo(twttr.router.searchHomePath());return}twttr.isT1||trackClient({action:"impression"},{query:a}),this.unfocusStreamItem(),twttr.SearchAPI.flushCache();var d=this;d._mode=b;if(a!==this._query){this._query=a,!twttr.isT1&&twttr.loggedIn&&(this.setupSavedSearchAction(),this.registerSavedSearchListeners()),this.streamManager&&this.streamManager.$node.detach();var e=!1;twttr.currentUser?e=twttr.decider.isAvailable("phoenix_search_relevance"):e=twttr.decider.isAvailable("phoenix_search_relevance_logged_out");var f=b=="placeTweetSearch";this.render({query:a,pretty_query:f&&this._placeName||a,has_relevance_search:e,top_mode:b=="relevance",all_mode:b=="tweets",timeline_mode:b=="timeline",with_links_mode:b=="links"})}else twttr.decider.isAvailable("phoenix_search_dropdown")&&this.$find(".stream-tabs").empty().append((new twttr.views.SearchPageTabs({top_mode:b=="relevance",all_mode:b=="tweets",timeline_mode:b=="timeline",with_links_mode:b=="links"})).html());twttr.decider.isAvailable("phoenix_search_dropdown")&&this.addDropdownMenu(this._query,this.$find(".stream-tab-dropdown")),this.streamManager.switchTo(twttr.streams.Search,{query:a,pretty_query:this._placeName||a,mode:b,hideTitle:!0,debug:c.debug,experimentId:c.experimentId,is_new_search_header_available:this.isNewSearchHeaderAvailable()}),this.focusStreamTab(b),this.focusQuery(a),twttr.router.getCurrentRoute().name==="searchRealtime"?this.selectSideNav("searchResults"):this.selectCurrentSideNav(),twttr.isT1&&twttr.loggedIn&&(this.setupSavedSearchAction(),this.registerSavedSearchListeners()),this.addSearchExtras(),this.renderPeopleResults()},focusQuery:function(a){twttr.search.focusQuery(a)},isNewSearchHeaderAvailable:function(){return!1},isSearchAssistanceAvailable:function(){return!1},removeSearchAssistance:$.noop,isOneboxAvailable:function(){return!!this._query&&twttr.decider.isAvailable("onebox")},renderOnebox:function(a){if(a.length()===0)return;var c,d=a.get(0),e=twttr.components.onebox[b.util.capitalize(d.type)];if(!e)return;var c=new e(d,this._query);if(!c||c.$node.children().size()==0)return;this.renderOneboxContainer(c,d),this.$find("div.onebox").show(),c.render();var f=c.items||[];trackClient({section:"onebox",component:d.type,action:"impression"},{item_count:f.length,item_ids:f,query:this._query})},addSearchExtras:function(){var a=this,b=a.isSearchAssistanceAvailable(),c=a.isOneboxAvailable();if(!c&&!b)return;c&&this.$find("div.onebox").hide();var d=twttr.search.getLastQuerySource(),e={is_t1:twttr.isT1,statuses:!1,stories:c,related_queries:b,spelling_corrections:b,query_source:d,success:function(d){a.removeSearchAssistance(),c&&a.renderOnebox(d.stories),b&&(d.spellingCorrections&&a.renderSpellingCorrections(d.spellingCorrections),!d.spellingCorrections.length&&d.relatedQueries&&a.renderRelatedQueries(d.relatedQueries))}};this._query&&twttr.API.Search.search(this._query,e)},setupSavedSearchAction:function(){var a=this;twttr.currentUser.savedSearches(function(b){var c=b.filter(function(b){return b.query===a._query});c.length()?a.toggleSavedSearchOn(c.first()):a.toggleSavedSearchOff()})},registerSavedSearchListeners:function(){var a=this;twttr.API.SavedSearch.bind("create",function(b,c){c.query==a._query&&a.toggleSavedSearchOn(c)}),twttr.API.SavedSearch.bind("delete",function(b,c){c.query==a._query&&a.toggleSavedSearchOff()})},_getSearchHandlers:function(a,b){return{click:function(){twttr.router.routeTo(twttr.router[b]({query:a}))}}}});d.mixin(c),a(d)})}),provide("components/pages/SearchHome",function(a){using("_").as(function(b,_){twttr.klass.page("twttr.components.pages.SearchHome").view(twttr.views.SearchHome).click({".operators a:not(.advanced-search)":function(a){a.preventDefault(),twttr.dialogs.searchOperators().open()},".operators a.advanced-search":function(a){twttr.search.latestQuery=this.$find("input:text[name=q]").val()}}).addAfterRender(function(){this.$find(".bottompart").append((new twttr.components.Footer).$node)}).addOnSwitchTo(function(){twttr.themes.clear()}).methods({noAutoRender:!0,initSearchForm:function(){var a=this.$find(".search form"),b=a.is(".advanced-search form");twttr.helpers.addFormEvents(a,function(a,c){var d=$(this),e=b?twttr.search.serializeAdvancedForm(d):c.q;e?(twttr.search.setLastQuerySource(twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.doSearch(e)):twttr.showMessage(_("Enter your query before submitting the search form!"))}),twttr.search.formifyLatestQuery(a);if(b){var c=a.find("input[name=near]"),d=a.find("fieldset.geo div.sel");c.val()?d.show():c.one("keyup change",function(){d.slideDown()})}},languages:function(){return this.searchLanguages().sort(function(a,b){return a=a.localized_name.toLowerCase(),b=b.localized_name.toLowerCase(),a==b?0:a<b?-1:1})},searchLanguages:function(){return[{code:"am",localized_name:_("Amharic"),name:"አማርኛ"},{code:"ar",localized_name:_("Arabic"),name:"العربية"},{code:"bg",localized_name:_("Bulgarian"),name:"Български"},{code:"bn",localized_name:_("Bengali"),name:"বাংলা"},{code:"bo",localized_name:_("Tibetan"),name:"བོད་སྐད"},{code:"chr",localized_name:_("Cherokee"),name:"ᏣᎳᎩ"},{code:"da",localized_name:_("Danish"),name:"Dansk"},{code:"de",localized_name:_("German"),name:"Deutsch"},{code:"dv",localized_name:_("Maldivian"),name:"ދިވެހި"},{code:"el",localized_name:_("Greek"),name:"Ελληνικά"},{code:"en",localized_name:_("English"),name:"English"},{code:"es",localized_name:_("Spanish"),name:"Español"},{code:"fa",localized_name:_("Persian"),name:"فارسی"},{code:"fi",localized_name:_("Finnish"),name:"Suomi"},{code:"fr",localized_name:_("French"),name:"Français"},{code:"gu",localized_name:_("Gujarati"),name:"ગુજરાતી"},{code:"iw",localized_name:_("Hebrew"),name:"עברית"},{code:"hi",localized_name:_("Hindi"),name:"हिंदी"},{code:"hu",localized_name:_("Hungarian"),name:"Magyar"},{code:"hy",localized_name:_("Armenian"),name:"Հայերեն"},{code:"in",localized_name:_("Indonesian"),name:"Bahasa Indonesia"},{code:"is",localized_name:_("Icelandic"),name:"Íslenska"},{code:"it",localized_name:_("Italian"),name:"Italiano"},{code:"iu",localized_name:_("Inuktitut"),name:"ᐃᓄᒃᑎᑐᑦ"},{code:"ja",localized_name:_("Japanese"),name:"日本語"},{code:"ka",localized_name:_("Georgian"),name:"ქართული"},{code:"km",localized_name:_("Khmer"),name:"ខ្មែរ"},{code:"kn",localized_name:_("Kannada"),name:"ಕನ್ನಡ"},{code:"ko",localized_name:_("Korean"),name:"한국어"},{code:"lo",localized_name:_("Lao"),name:"ລາວ"},{code:"lt",localized_name:_("Lithuanian"),name:"Lietuvių"},{code:"ml",localized_name:_("Malayalam"),name:"മലയാളം"},{code:"my",localized_name:_("Myanmar"),name:"မြန်မာဘာသာ"},{code:"ne",localized_name:_("Nepali"),name:"नेपाली"},{code:"nl",localized_name:_("Dutch"),name:"Nederlands"},{code:"no",localized_name:_("Norwegian"),name:"Norsk"},{code:"or",localized_name:_("Oriya"),name:"ଓଡ଼ିଆ"},{code:"pa",localized_name:_("Panjabi"),name:"ਪੰਜਾਬੀ"},{code:"pl",localized_name:_("Polish"),name:"Polski"},{code:"pt",localized_name:_("Portuguese"),name:"Português"},{code:"ru",localized_name:_("Russian"),name:"Русский"},{code:"si",localized_name:_("Sinhala"),name:"සිංහල"},{code:"sv",localized_name:_("Swedish"),name:"Svenska"},{code:"ta",localized_name:_("Tamil"),name:"தமிழ்"},{code:"te",localized_name:_("Telugu"),name:"తెలుగు"},{code:"th",localized_name:_("Thai"),name:"ไทย"},{code:"tr",localized_name:_("Turkish"),name:"Türkçe"},{code:"ur",localized_name:_("Urdu"),name:"ﺍﺭﺩﻭ"},{code:"vi",localized_name:_("Vietnamese"),name:"Tiếng Việt"},{code:"zh",localized_name:_("Chinese"),name:"中文"}]},index:function(){this.updatePageTitle(_("Twitter / Search")),this.render(),this.initSearchForm(),this.$find("input").focus();var a=new twttr.components.Trends;this.$find(".trends-container").append(a.$node)},advanced:function(){if(!twttr.decider.isAvailable("advanced_search"))return twttr.router.routeTo(twttr.router.searchHomePath());this.updatePageTitle(_("Twitter / Advanced Search")),this.render({languages:this.languages(),is_advanced:!0}),this.initSearchForm()}}),a(twttr.components.pages.SearchHome)})}),provide("components/pages/Front",function(a){using("_").as(function(b,_){var c=twttr.klass.page("twttr.components.pages.Front",function(){twttr.components.Page.apply(this,arguments)}).methods({$find:function(a){return $("#front-container").find(a)}}).view(twttr.views.Nothing).addAfterRender(function(){var a=twttr.abdecider.choose("lohp_video_experiment_258");a==="video"&&this.$find(".front-welcome").click(function(){if($(this).hasClass("playing"))return;var a=['type="text/html"','width="520" height="293"','src="http://www.youtube.com/embed/1xgLJpBbdDE?showinfo=0&rel=0&modestbranding=1&controls=0&autohide=1&autoplay=1&origin='+window.location.protocol+"//"+window.location.host+'"','frameborder="0"'];$(this).append("<iframe "+a.join(" ")+"></iframe>").addClass("playing"),trackClient({component:"video",element:"play_button",action:"click"});var b=1,c=setInterval(function(){trackClient({component:"video",element:"second"+b*10,action:"impression"}),b++},1e4);setTimeout(function(){clearInterval(c)},9e4)});var b=twttr.abdecider.choose("nascar_homepage_276");b!="homepage_off"&&this.$find('a[href="/hashtag/nascar"]').click(function(){trackClient({page:"front",section:"",action:"click"},"nascar")}),twttr.pageLocale==="ja"?(twttr.abdecider.choose("japanese_signup_text_214"),twttr.abdecider.choose("localized_tagline_loggedout_front_page_244")):twttr.pageLocale==="de"&&twttr.abdecider.choose("localized_image_germany_loggedout_front_page_294");var c=this.$find(".js-front-signup form");c.find("input[type=text], input[type=password]").focus(function(){trackClient({section:"signup_callout",component:$(this).attr("name").split(/[\[|\]]/)[1],action:"focus_field"})}),c.submit(function(){trackClient({section:"signup_callout",component:"form",action:"signup_click"})}),twttr.helpers.addFormEvents(c);var d=this.$find(".js-front-signin form"),e=c.data("front_page_full_signup_256");e&&(d=$(".global-nav .js-front-signin form")),(!e||e&&!$("form input.focused").length)&&d.find(".email-input").focus(),d.submit(function(){trackClient({section:"login_callout",component:"form",action:"login_click"})}),twttr.helpers.addFormEvents(d),e&&(twttr.helpers.addHoldingInputEvents(d),d.find(".placeholding-input .placeholder").each(function(){var a=$(this);a.text(twttr.helpers.truncate(a.text(),20,"...")),a.show()}))}).addOnSwitchAway(function(){twttr.themes.loadDefaultTheme()}).methods({index:function(a,b){if(b.in_reply_to_status_id){twttr.router.routeTo(twttr.router.loginRedirectPath({redirect_after_login:"/"+window.location.search}));return}window._scribedFrontImpression?window._scribedFrontImpression=!1:$(".front-image-nascar").length>0?trackClient({page:"front",section:"",action:"impression"},"nascar"):trackClient({page:"front",section:"",action:"impression"},"front"),this.updatePageTitle(_("Twitter")),twttr.themes.loadFrontPageTheme()}});twttr.isT1?c.addAfterRender(function(){var a=$(".js-front-language form");a.submit(function(){trackClient({section:"language_dropdown",component:"form",action:"select"},{event_info:this.lang.value})})}):c.addAfterRender(function(){this.$find(".bottompart").empty().append((new twttr.components.LanguageLinks).$node.fadeIn()).append((new twttr.components.CountrySelect).$node.fadeIn()).append((new twttr.components.Footer).$node)}).addOnSwitchTo(function(){twttr.$elements.page.css("padding-top","")}),a(c)})}),provide("components/pages/Login",function(a){using("_","constants").as(function(b,_,c){var d=twttr.abdecider.choose("remember_me_checked_by_default_287")=="checked",e=jQuery.cookie("remember_checked")=="1"||jQuery.cookie("remember_checked")==null&&d,f=twttr.klass.page("twttr.components.pages.Login").view(twttr.views.LoginPage).addBeforeRender(function(){this.updatePageTitle(_("Sign in to Twitter")),twttr.themes.clear()}).addAfterRender(function(){if(twttr.loggedIn)twttr.showMessage(_("You are already logged in!")),twttr.router.routeTo(twttr.router.homePath());else{twttr.helpers.addFormEvents(this.$find("form.js-signin")),this.$find("p.js-forgot a[title]").tipsy({gravity:"se"});var a=this.$find(".js-bottompart");twttr.isT1?twttr.helpers.addHoldingInputEvents(this.$find("form")):a.append((new twttr.components.LanguageLinks).$node).append((new twttr.components.CountrySelect).$node),a.append((new twttr.components.Footer).$node);var b=this.$find(".username input").focus();setTimeout(function(){b.focus()},1)}}).addOnSwitchTo(function(){twttr.themes.loadDefaultTheme()}).methods({noAutoRender:!0,index:function(a,b){this.render({redirect_after_login:a.redirect_after_login||b.redirect_after_login,password_reset_title:_("If you remember your password, try logging in with your email"),remember_checked:e}),trackClient({section:"",component:"",action:"impression"},"login")},error:function(a,b){this.render({redirect_after_login:a.redirect_after_login||b.redirect_after_login,username_or_email:b.username_or_email,remember_checked:e}),twttr.loggedIn||(a.error=="captcha"?(this._addCaptcha(),twttr.showMessage(_("We gotta check... are you human?")),trackClient({section:"form",component:"captcha",action:"show"},"login")):(twttr.showError(_("Wrong Username/Email and password combination.")),trackClient({section:"form",component:"username_password",action:"validation_error"},"login")))},loginRequired:function(){twttr.router.routeTo(twttr.router.loginRedirectPath({redirect_after_login:twttr.Router.getCurrentPath()})),twttr.showMessage(_("You must log in to do that!"))},_addCaptcha:function(){var a=this;using(b.constants.recaptcha.srcUrl).load().then(function(){Recaptcha.create(b.constants.recaptcha.publicKey,a.$find(".js-signin .js-captcha")[0],{lang:twttr.pageLocale,theme:"white"})})}});a(twttr.components.pages.Login)})}),provide("components/pages/Logout",function(a){using("_").as(function(b,_){twttr.klass.page("twttr.components.pages.Logout").view(twttr.views.LogoutPage).addAfterRender(function(){twttr.helpers.addFormEvents(this.$find("form.signout")),this.$find(".cancel").click(function(){return twttr.router.routeTo(twttr.router.homePath()),!1});var a=this.$find(".bottompart");twttr.isT1||a.append((new twttr.components.LanguageLinks).$node).append((new twttr.components.CountrySelect).$node),a.append((new twttr.components.Footer).$node)}).methods({index:function(a,b){if(!twttr.loggedIn)return twttr.decider.isAvailable("mobile_download_gallery_logged_out")?twttr.router.routeTo("/download?logged_out=1"):twttr.router.routeTo(twttr.router.homePath());this.updatePageTitle(_("Twitter / Sign out of Twitter")),twttr.themes.loadCurrentUserStyle()}}),a(twttr.components.pages.Logout)})}),provide("components/pages/Profile",function(a){using("_",twttr.isT1?"components/pages/mixins/profileT1":"components/pages/mixins/profileP1",twttr.isT1?"mixins/t1/emptyTimelineRecommendations":"mixins/emptyTimelineRecommendations","constants").as(function(b,_,c,d){var e=twttr.klass("twttr.components.pages.Profile").subclassOf(twttr.components.pages.ProfileAbstract).view(twttr.views.ProfilePage).containerCssClass("profile-container").mixin(c,d).methods({checkWithheld:function(){twttr.decider.isAvailable("phoenix_pctd")&&twttr.profileUser&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope==="user"&&!twttr.helpers.isCurrentUser(twttr.profileUser.id)?this.renderWithheld():this.renderNotWithheld()},renderWithheld:function(){$("#page-container").removeClass("profile-container").addClass("wrapper-permalink permalink-container withheld")},renderNotWithheld:function(){$("#page-container").addClass("profile-container").removeClass("wrapper-permalink permalink-container withheld")},userWasBlocked:function(a,b){b.screenName===twttr.profileUser.screenName&&$(".profile-actions-container a.js-direct-message-action, .profile-actions-container div.js-direct-message-action").remove()},getUserInfo:function(a,b,c){if(this.profileUser&&a==this.profileUser.screenName){twttr.profileUser=this.profileUser,twttr.is.def(this.profileUser.promotedContent)&&(twttr.promotedAccount={id:this.profileUser.id,impressionId:this.profileUser.promotedContent.impression_id}),b&&b();return}var d=this.preRendered?this.$find("div.profile-header").attr("data-user"):null;if(d){data=JSON.parse(d),this.profileUser=twttr.profileUser=new twttr.anywhere.api.models.User(data),b&&b();return}return twttr.components.pages.ProfileAbstract.prototype.getUserInfo.apply(this,arguments)},profile:function(a,b){var c=this,d=a.screen_name.toLowerCase().replace(/^@/,"");this.loading(d),!twttr.loggedIn&&twttr.pageLocale==="ja"&&twttr.abdecider.choose("japanese_signup_text_profile_232"),this.getUserInfo(d,function(){c.updatePageTitle(_("{{fullName}} ({{screenName}}) on Twitter",{fullName:c.profileUser.name,screenName:d})),c._highlightNavIfCurrentUser(d),c.selectCurrentSideNav(),b.banner_preview_url&&twttr.helpers.isCurrentUser(c.profileUser)&&(c.bannerPreviewUrl=b.banner_preview_url),c._switchToStream({screenName:d,stream:c.initialProfileStream(),tab:"tweets"}),c.checkWithheld()},{batch:!twttr.loggedIn,profiler:!0},twttr.bind(this,this.noUserFoundCallback))},message:function(a){this.profile(a),a=a||{},twttr.API.User.find(a.screen_name,function(b){twttr.dialogs.dmSingle({user:{screenName:a.screen_name,user_id:b.attributes.id,name:b.attributes.name,profile_image_url:b.attributes.profile_image_url},origin:a.origin}).open()})},favorites:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Favorites",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.Favorites,tab:"favorites"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},profile_activity:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Activity",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.ActivityByUserStream,tab:"activity"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},followers:function(a){var b=this._defaultedScreenName(a.screen_name);this.updatePageTitle(_("Twitter / People who follow {{screenName}}",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.Followers,tab:"followers"})},following:function(a){var b=this._defaultedScreenName(a.screen_name);this.updatePageTitle(_("Twitter / People {{screenName}} is following",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this.one("switchedToStream",twttr.bind(this,this.insertEmptyTimeline)),this._switchToStream({screenName:b,stream:twttr.streams.Friends,tab:"following"})},youBothFollow:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){this.updatePageTitle(_("Twitter / People you and @{{screenName}} both follow",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.SocialContextStream,socialContextType:"followsInCommonWith",tab:"following"})}))},followersYouFollow:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){this.updatePageTitle(_("Twitter / People you follow who follow @{{screenName}}",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectSideNav("userFollowers"),this._switchToStream({screenName:b,stream:twttr.streams.SocialContextStream,socialContextType:"followingFollowersOf",tab:"followers"})}))},lists:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Lists",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.OwnLists,tab:"lists"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},subscriptions:function(a){var b=a.screen_name;this.updatePageTitle(_("Twitter / Lists {{screenName}} is following",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.Subscriptions,tab:"lists"})},followerRequests:function(a){var b=twttr.util.params().uid;b&&!twttr.helpers.isCurrentUser(+b)&&twttr.router.redirectTo("/?badLinkRecipient="+b);var c=this._defaultedScreenName(a.screen_name);if(!twttr.helpers.isCurrentUser(c))twttr.router.routeTo(twttr.router.profilePath({screen_name:c}));else{this.updatePageTitle(_("Twitter / My follower requests")),this.selectCurrentSideNav(),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.FollowerRequests,tab:"pending"});if(!this.didBindUserBlockedEvent){this.didBindUserBlockedEvent=!0;var d=this;twttr.API.User.bind("block",function(){d.streamManager.resetCache()})}}},listDeleted:function(a){this.streamManager.getCurrent().remove(a.uri)},dashStatsTitle:function(){return twttr.helpers.isProfileUser()?_("About you"):null},shouldShowTweetBox:function(){return twttr.loggedIn&&!twttr.helpers.isProfileUser()&&twttr.decider.isAvailable("profile_tweetbox")},renderTweetbox:function(){if(this.tweetBox&&this._renderedScreenName===twttr.profileUser.screenName)return this.tweetBoxNode;var a=this;this.$find("div.profile-tweet-box-placeholder").remove();if(this.shouldShowTweetBox()){var b=this.tweetBoxNode=$('<div class="profile-tweet-box"/>'),c="@"+this.profileUser.screenName;this.$find(".profile-actions-container").addClass("preceeding-profile-tweet-box").after(b),this.tweetBox=new twttr.TweetBox(b.empty(),twttr.merge({defaultContent:c+" ",id:"profile-tweet-box",condensed:!0,enableDraft:twttr.isT1,enableAutoGrow:twttr.isT1,statusAction:"update"},this.getTweetBoxOptions())),this.tweetBox.bind("tweetSuccess",function(a,b){b.inReplyToScreenName?twttr.showMessage(_("Your Tweet to @{{username}} has been sent!",{username:b.inReplyToScreenName})):twttr.showMessage(_("Your Tweet was posted!"))})}return b},getTweetbox:function(){return this.tweetBox},initialProfileStream:function(){return twttr.isT1&&twttr.streams.Profile.shouldDisplay()?twttr.streams.Profile:twttr.streams.User},noUserFoundCallback:function(){this._renderedScreenName=null,this.streamManager&&(this.streamManager.switchOut(),this.streamManager.setCurrent(null))}}).addOnSwitchAway(function(){twttr.admin&&twttr.admin.removeTools(),this.renderNotWithheld(),twttr.API.User.unbind("block",this.userWasBlocked)}).addAfterRender(function(){if(!window.location.hash)return;var a=twttr.util.paramsFromUrl(window.location.hash);a&&a.protected_redirect&&(window.location.hash=window.location.hash.replace("?protected_redirect=true",""),twttr.showError(_("Sorry, you are not authorized to see this status.")))}).addAfterRender(function(){this.preRendered&&!this.didEmptyDashboard&&(this.$find("div.dashboard").empty(),this.didEmptyDashboard=!0),this.addDashboardComponents(this.getDashboardComponents())});a(e)})}),provide("components/pages/List",function(a){using("_","util",twttr.isT1?"components/pages/mixins/listT1":"components/pages/mixins/listP1","streams/List","streams/ListMembers","streams/ListFollowers","components/SignupCallOut",function(_,b,c,d,e,f,g){var i=twttr.klass("twttr.components.pages.List").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).methods(twttr.EventProvider).methods({list:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}}",a)),this.switchToStream(d,a),this.selectCurrentSideNav(),this.focusStreamTab("tweets")},members:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}} - Following",a)),this.switchToStream(e,a),this.selectCurrentSideNav(),this.focusStreamTab("members")},followers:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}} - Followers",a)),this.switchToStream(f,a),this.selectCurrentSideNav(),this.focusStreamTab("followers")},noAutoRender:!0,listDeleted:function(a){twttr.showMessage(_("List deleted")),twttr.router.routeTo(twttr.router.homePath())},listUpdated:function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:a.slug}))},_getList:function(a){var b=this;if(!this.listOwnerName||!this.listId)throw"You tried to use _getList before defining .listOwnerName and .listId";twttr.API.User.find(this.listOwnerName,function(c){c.lists.find(b.listId,function(b){a(b,c)})})},switchToStream:function(a,b){var c=this,d=function(){c.trigger("notFound")};this.loading(b.screenName,b.listSlug),twttr.API.User.find(b.screenName,{success:function(e){twttr.profileUser=e,e.lists.find(b.listSlug,{success:function(d){c.listId=d.id,c.listOwnerName=d.user.screenName,c._listSlug=d.slug,c.fullName=d.fullName;var e=new twttr.views.List(d);twttr.themes.loadUserStyleFor(d.user),c._renderedListId!==d.id&&(c.render({list:e}),c._registerEvents(d),c._renderedListId=d.id),c.streamManager.switchTo(a,b)},error:d})},error:d})},loading:function(a,b){this.unfocusStreamItem(),this._listSlug!==b&&this.listOwnerName!==a&&this.$node.children().empty()}}).addAfterRender(function(){var a=this;this._getList(function(b,c){a.owner=c,twttr.loggedIn||a.addDashboardComponent(new g("list",{profileUser:c})),a.addDashboardComponents(a.getDashboardComponents(b)),a.owner&&!twttr.isT1&&trackClient({action:"impression"},{profile_id:a.owner.id,message:b.slug})})}).mixin(c);a(i)})}),provide("components/pages/Permalink",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.pages.Permalink").subclassOf(twttr.components.Page).view(twttr.views.PermalinkPage).addOnSwitchAway(function(){twttr.$elements.page.css("padding-top",""),twttr.widget.Dialog.close()}).methods({permalink:function(a){this.loadPage(a)},loadPage:function(a,b){var c=this;twttr.widget.Dialog.close();if(this._renderedTweetId==a.id)return b&&b.call(this);this._renderedTweetId=a.id,this.loading();var d=function(b){b.status==403?twttr.router.routeTo(twttr.router.profilePath({screen_name:a.screen_name})):c.trigger("notFound")},e=function(d){c.tweetComponent=new twttr.components.PermalinkTweet(d),c.tweetComponent.$node.appendTo(c.$find(".components-middle")),c.tweetComponent.bind("deleted",function(){twttr.app.isOnPage("permalink")&&twttr.router.routeTo(twttr.router.homePath())});if(a.photo_index&&!twttr.decider.isAvailable("phoenix_turkey_permalink")){c.trigger("notFound");return}var e=c.$find(".permalink");if(c.tweetComponent.renderWithheld())e.addClass("withheld");else{c.tweetComponent.renderCreatorWithheld()?e.addClass("withheld-creator"):e.removeClass("withheld-creator");var f=c.$find("div.js-tweet-media-container");c.mediaComponent=new twttr.components.Media(d,f.width(),{linkLarge:!0}),c.mediaComponent.$node.appendTo(f);var g=new twttr.components.InReplyTo(d),i=new twttr.components.TweetGeoSmall(d),j=new twttr.components.Footer("slim"),k=new twttr.components.MachineTranslatedTweet(d);g.$node.appendTo(c.$find(".components-above"));if(!twttr.isT1){var l=new twttr.components.MentionedInTweet(d);l.$node.appendTo(c.$find(".components-below"))}c.renderActivity(d),i.$node.appendTo(c.$find(twttr.isT1?".components-middle .permalink-inner":".components-below")),c.renderReplies(d),j.$node.appendTo(c.$find(".permalink-footer")),k.$node.appendTo(c.$find("div.js-machine-translated-tweet-container")),e.removeClass("withheld"),b&&b.call(c)}if(!twttr.loggedIn){var m=new twttr.components.SignupCallOut("permalink",{profileUser:d.user});twttr.isT1?m.$node.prependTo(c.$find(".permalink-footer")):m.$node.appendTo(c.$find(".permalink-header")),twttr.$elements.page.css("padding-top","30px")}};twttr.API.Status.find(a.id,{success:function(a){c.status=a,c.updatePageTitle(_("Twitter / @{{screenName}}: {{{truncatedText}}} ...",{screenName:a.user.screenName,truncatedText:a.text.slice(0,26)})),twttr.themes.loadUserStyleFor(a.user),c.render(),twttr.loggedIn?twttr.currentUser.relationshipWith(a.user.screenName,{success:function(b){a.user.following=b.following,a.user.attributes.following=b.following,a.attributes.user.following=b.following,e(a)},error:d}):(a.user.following=!1,a.user.attributes.following=!1,a.attributes.user.following=!1,e(a)),trackClient({component:"tweet",action:"results"},{item_ids:[a.id],item_count:1,event_value:1})},error:d}),trackClient({action:"impression"})},loading:function(){this.$find(".permalink").empty()}}).methods({noAutoRender:!0}).click({".js-tweets-at-this-place":function(a,b){var c=b.attr("data-place-id"),d=b.attr("data-place-name");return c&&d&&twttr.router.routeTo(twttr.router.placeTweetSearchPath({place_id:c,place_name:d})),a.stopPropagation(),a.preventDefault(),!1},"a[data-twitter-media-url='true']":function(a){a.stopPropagation()}}).keydown({f:function(a){$(a.target).is(":not(input)")&&this.tweetComponent.faveTweet("keyboard")},r:function(a){$(a.target).is(":not(input)")&&(this.tweetComponent.replyTweet("keyboard"),a.preventDefault())},t:function(a){$(a.target).is(":not(input)")&&this.tweetComponent.retweetTweet("keyboard")}});twttr.isT1?c.containerCssClass("wrapper-permalink").methods({renderReplies:function(a){var b=this;new twttr.components.Conversation(a,null,function(c){var d=new twttr.components.Replies(a,null,c.resultGroups);d.$node.appendTo(b.$find(".components-below")),new twttr.components.InlineReplyBox(b.tweetComponent.$node.find(".tweet"),b.$find(".components-below"),d.$node,481,425)})},permalinkWithEmbedDialog:function(a){this.loadPage(a,this.showEmbedDialog)},showEmbedDialog:function(){twttr.decider.isAvailable("embed_code_dialog")&&twttr.dialogs.embedCode(this.status).open()},renderActivity:twttr.util.noopInT1}).click({"a.embed-link":function(a){a.preventDefault(),a.stopPropagation(),twttr.router.routeTo(twttr.router.embedDialogPermalinkPath({screen_name:this.status.user.screenName,id:this.status.id}))}}):c.containerCssClass("permalink-container").methods({permalinkWithEmbedDialog:twttr.util.noopInP1,showEmbedDialog:twttr.util.noopInP1,renderReplies:twttr.util.noopInP1,renderActivity:function(a){var b=twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_social_context"),c=new twttr.components[b?"TweetActivity":"Retweeters"](a);c.$node.appendTo(this.$find(".components-below"))}}),a(c)})}),provide("components/pages/WhoToFollow",function(a){using("_","constants","streams/SuggestionCategoryMembersStream").as(function(b,_){twttr.klass.page("twttr.components.pages.WhoToFollow",function(){twttr.components.Page.apply(this,arguments),this.dashboardNeedsToBeCreated=!1}).mixin(twttr.mixins.streamablePage).mixin(twttr.mixins.discoveryHelper).view(twttr.views.WhoToFollow).addAfterRender(function(){this._rendered=!0;var a=this;this._createDashboard(!0),twttr.helpers.addFormEvents(this.$find(".who-to-follow-header form"),function(){var b=twttr.audit.currentAction(),c=this.q.value,d;twttr.audit.currentPage()=="welcome"?d=twttr.components.pages.Welcome.ROUTES_TO_STEP[b]:d=twttr.components.pages.WhoToFollow.ROUTES_TO_STEP[b],c!=""&&(trackClient({component:"user_search_form",action:"search"},{step:d,query:c}),a.routePageTo(a.PATH_ROOT,"Search",{query:c}))})}).addOnSwitchTo(function(){this._createDashboard(),trackClient({section:"",component:"",action:"impression"})}).addOnSwitchAway(function(){twttr.API.User.unbind("follow.RecentlyFollowedComponent"),twttr.recentlyViewedUsers.unbind("push.RecentlyViewedComponent"),this.dashboardNeedsToBeCreated=!0,this._rendered=!1,this.$find(".dashboard > .component").remove()}).statics({ROUTES_TO_STEP:{whoToFollow:"suggestions",suggestions:"suggestions",interests:"interests",category:"interests","import":"import",matches:"import",search:"search"}}).methods({switchToStream:function(){var a=this.streamManager.switchTo.apply(this.streamManager,arguments);return a},search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo(this.PATH_ROOT);this._switchTabAndRender("search",c),this.updatePageTitle(_("Twitter / User Search")),trackClient({action:"impression"},{context:"search",query:c});var d=twttr.Scribbler.clientEvent.spawn({context:"search",query:c});this.switchToStream(twttr.streams.PeopleSearch,{query:c,scribbler:d,pathRoot:this.PATH_ROOT})},suggestions:function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("suggestions"),this.updatePageTitle(_("Twitter / Who to follow / Suggestions")),trackClient({action:"impression"},"suggestions");var c=twttr.Scribbler.clientEvent.spawn({context:"suggestions"});if(twttr.decider.isAvailable("whotofollow_recommendations")){var d=this.switchToStream(twttr.streams.UserRecommendationsStream,{scribbler:c,pathRoot:this.PATH_ROOT});d&&d.setStreamManager(this.streamManager)}else twttr.router.redirectTo(twttr.router.whoToFollowInterestsPath())},interests:function(a,b){this._switchTabAndRender("interests"),this.updatePageTitle(_("Twitter / Who to follow / Interests")),trackClient({action:"impression"},"interests");var c=twttr.Scribbler.clientEvent.spawn({context:"interests"}),d={scribbler:c,pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.SuggestionCategoriesStream,this.localizeQuery(d,b))},category:function(a,c){var d=this,e=function(a){if(!a)return d.routePageTo(d.PATH_ROOT,"Interests");var e=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});d._switchTabAndRender("interests"),d.updatePageTitle(_("Twitter / Who to follow / Interests / {{category}}",{category:a.name})),d.switchToStream(b.streams.SuggestionCategoryMembersStream,d.localizeQuery({category:f,suggestionCategory:a,scribbler:e,pathRoot:d.PATH_ROOT},c))},f=a.category||c.category;trackClient({action:"impression"},{query:f,context:"interests"});var g=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;g?e(g[f]):twttr.API.SuggestionCategory.getAll(this.localizeQuery({success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[f];e(b)}},c))},"import":function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("import","","services"),this.updatePageTitle(_("Twitter / Who to follow / Find friends")),trackClient({action:"impression"},"import");var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:this.PATH_ROOT},b),e=this.switchToStream(twttr.streams.ContactImportServices,d);e&&e.setStreamManager(this.streamManager)},matches:function(){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("import","","matches"),this.updatePageTitle(_("Twitter / Who to follow / Find friends / Results")),trackClient({action:"impression"},"import");var a=twttr.Scribbler.clientEvent.spawn({context:"import"});this.switchToStream(twttr.streams.ContactImportMatches,{scribbler:a,pathRoot:this.PATH_ROOT})},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a},PATH_ROOT:"whoToFollow",noAutoRender:!0,_createDashboard:function(a){if(a||this.dashboardNeedsToBeCreated)this.addDashboardComponents(this._dashboardComponents()),this.dashboardNeedsToBeCreated=!1},_dashboardComponents:function(){var a=twttr.Scribbler.clientEvent.spawn({context:function(){var a=twttr.audit.currentAction();return twttr.audit.currentPage()=="welcome"?twttr.components.pages.Welcome.ROUTES_TO_STEP[a]:twttr.components.pages.WhoToFollow.ROUTES_TO_STEP[a]}});if(!twttr.loggedIn)return[new twttr.components.SignupCallOut("who_to_follow"),new twttr.components.Footer];var b=twttr.abdecider.choose("wtf_with_less_122"),c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer];return b=="empty_dashboard"?c=[]:b=="no_recent_follow"?c=[new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_recent_view"?c=[new twttr.components.RecentlyFollowed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_invite_friends"?c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_related_services"?c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.Footer]:b=="invite_friends_only"&&(c=[new twttr.components.InviteFriends(a)]),c},_switchTabAndRender:function(a,b,c){this._rendered||this.render();var d=this.$find(".who-to-follow-header form input");b?d.val(b).addClass("actasfocused").focus():d.val("").removeClass("actasfocused").blur(),this.focusStreamTab(a,c),this.$find(".who-to-follow-stream").removeClass().addClass("who-to-follow-stream who-to-follow-"+a+"-stream"),twttr.themes.loadDefaultTheme()}}),a(twttr.components.pages.WhoToFollow)})}),provide("components/pages/WebPersonalizationPreview",function(a){using("_","constants","components/WebPersonalizationSettings","components/Footer").as(function(b,_){var c=twttr.klass.page("twttr.components.pages.WebPersonalizationPreview").view(twttr.views.WebPersonalizationPreview).containerCssClass("wrapper-narrow").methods({preview:function(a,c){if(!twttr.decider.isAvailable("personalization_preview")&&!c.force_bq)return twttr.router.redirectTo(twttr.router.whoToFollowInterestsPath());this.updatePageTitle(_("Twitter / Web Personalization Preview")),twttr.inEU&&trackClient({element:"eu",action:"impression"}),twttr.doNotTrack&&trackClient({element:"dnt",action:"impression"}),twttr.themes.loadDefaultTheme(),this.$node.empty();var d=new b.components.WebPersonalizationSettings;d.$node.appendTo(this.$node),d.bind("disallow",function(a){twttr.router.routeTo(twttr.router.homePath())}),(new b.components.Footer("slim")).$node.appendTo(this.$node)}});a(c)})}),provide("components/pages/404",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.404").subclassOf(twttr.components.Page).view(twttr.views["404Page"]).containerCssClass("error-page").methods({notFound:function(a){this.render(),this.updatePageTitle(_("Twitter / ?")),twttr.themes.loadCurrentUserStyle()}}).methods({noAutoRender:!0}).addAfterRender(function(){var a=this,b=new twttr.components.Footer("slim");this.$find("div.four-oh-four-footer").remove(),b.$node.appendTo(this.$find(".four-oh-four")),twttr.helpers.addFormEvents(this.$find(".user-search-form"),function(){var a=this.q.value;a!=""&&(twttr.isT1?twttr.router.routeTo(twttr.router.userSearchPath({query:a})):twttr.router.routeTo(twttr.router.whoToFollowSearchPath({query:a})))}),a.$find(".user-search-form").addClass("ready")}),a(twttr.components.pages[404])})}),provide("components/pages/403",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.403").subclassOf(twttr.components.Page).view(twttr.views.SuspendedUserPage).containerCssClass("error-page").methods({suspendedUser:function(a){this.render(),this.updatePageTitle(_("Twitter / Suspended")),twttr.themes.loadCurrentUserStyle()}}).methods({noAutoRender:!0}),a(twttr.components.pages[403])})}),provide("components/pages/PlaceT1",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.pages.PlaceT1",function(){twttr.components.Page.apply(this,arguments)}).subclassOf(twttr.components.Page).methods({tweets:function(a){var b=this;twttr.API.Place.find(a.place_id,{success:function(a){twttr.router.redirectTo(twttr.geo.getPlaceFullAddressAndMapLink(a.data()).map_link)},error:function(a){b.trigger("notFound")}})},noAutoRender:!0});a(c)})}),provide("components/pages/RateLimit",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.RateLimit").subclassOf(twttr.components.Page).view(twttr.views.RateLimitPage).methods({tooMuch:function(a){this.render(),this.updatePageTitle(_("Twitter / Error")),twttr.themes.loadDefaultTheme()}}).methods({noAutoRender:!0}).containerCssClass("four-twenty-container"),a(twttr.components.pages.RateLimit)})}),provide("components/pages/mixins/welcomeLearnFlowT1",function(a){using().as(function(){twttr.klass.mixin("twttr.components.pages.mixins.welcomeLearnFlowT1",function(){return this.click({".js-account-group":function(a,b){a.stopPropagation(),a.preventDefault(),this.showMiniProfile(b.closest(".js-actionable-user").data("user-id")),twttr.scribbles.logViewProfileDetails.call(b,a)},".js-who-to-follow-search .js-submit":function(){trackClient({component:"user_search_form",element:"search_button",action:"click"})}}).methods({showMiniProfile:function(a){twttr.API.User.find(a,function(a){using("widget/MiniProfileDialog",function(b){(new b(a,!0)).open()})})},_slideDrawer:function(a,b){a?$(".js-welcome-dashboard").show():$(".js-welcome-dashboard").hide(),b&&b()},_customRenderStep:function(a){a=="matches"?this.$find(".js-back-to-import").show():this.$find(".js-back-to-import").hide()},_pulseFollowButton:function(){},_resizeFlow:function(){var a=$(window).height()-$(".js-flow-step").outerHeight()-$(".js-welcome-stream-header").outerHeight()-$("div.js-stream-header").outerHeight()-($(".js-back-to-import:visible").outerHeight()||0)-114;a>100&&$(".stream-manager-container").css("max-height",a);var b=$(window).height()-$(".js-welcome-faux-tweet-stream").height()-$(".js-content-header").height()-153+30;b>20&&$(".route-welcome .content-main .stream-end-inner").css("padding-bottom",b)},_getNextButtonText:function(a){return a?_("Done"):_("Next")},_setTheme:function(){twttr.themes.loadDefaultTheme()}}).addOnSwitchTo(function(){twttr.cache.local.shownWelcomeFlow=!0})}),a()})}),provide("components/pages/WelcomeLearnFlow",function(a){using("streams/SuggestionCategoryMembersDashboardStream","stork").as(function(b){twttr.klass.page("twttr.components.pages.WelcomeLearnFlow",function(){twttr.components.Page.apply(this,arguments),this._steps=this._firstStep=null;var a=twttr.Router.getCurrentQueryStringParams();this._resurrect=!!a.resurrect;var b=[];for(var c=0;c<b.length;++c){var d=twttr.abdecider.choose(b[c]);if(d!="")break}d||(this._bucket=a.welcomeBucket),this._showIntro=!0,this._showProgress=!0,this.PROFILE_SIZE_LIMIT=716800}).subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).mixin(twttr.mixins.discoveryHelper).mixin(twttr.mixins.welcomeScribing).mixin(twttr.isT1?twttr.components.pages.mixins.welcomeLearnFlowT1:twttr.components.pages.mixins.welcomeLearnFlowP1).view(twttr.views.WelcomeLearnFlow).click({".user-content-image, .display-name, .screen-name":function(a){$(a.target).closest(".stream-item-content").find(".more-info").slideDown()},".glass .submit":function(a){$(a.target).closest("form").submit()},".js-image-error .js-dismiss":function(){this._hideImageError()},".js-back-to-stream .js-button":function(){this.$find(".js-welcome-search input[type='text']").val("");var a=this._steps[this._currentSearchStepId].route;twttr.router.routeTo(a)},".js-full-results-link":function(a){var b=$(a.target).data("query")||"";trackClient({section:"search",element:"full_results_link",action:"click"},{query:b}),this.routePageTo(this.PATH_ROOT,"Search",{query:b})},".js-skip-link":function(a){var b=this,c=$(a.target),d=this._steps[this._currentStepId],e=function(){b._scribeStepCompletion("skip"),b._isOnLastStep()?b.finish():twttr.router.routeTo(c.attr("href"))};return d&&d.skip_handler?d.skip_handler(e):window.setTimeout(e,0),!1},".js-next-btn":function(a){var b=this,c=$(a.target);if(c.is(".disabled"))return!1;var d=this._steps[this._currentStepId],e=function(){b._scribeStepCompletion("done"),b._isOnLastStep()?b.finish():twttr.router.routeTo(c.attr("href"))},f;return b._lastStream&&b._lastStream.deferFollows?f=function(){d.suppress_follow_progress=!0,b._addNextDisableReason("prefollowing"),b._lastStream.commitPrefollows(function(){d.suppress_follow_progress=!1,e()})}:f=e,d&&d.next_handler?d.next_handler(f):window.setTimeout(f,0),!1}}).addOnSwitchTo(function(){this.updatePageTitle(_("Twitter / Welcome")),twttr.app.resetPadding(),this.setWelcomeSkipCookie(),this._setSteps(),twttr.abdecider.choose("growth_stork_persistent_239")!="no_stork"&&twttr.stork.init(),twttr.decider.isAvailable("welcome_timeline_stats")&&(twttr.streams.Home.scribeTweetDensity=!0,twttr.components.pages.Home.scribeScroll=!0);var a=this;twttr.API.User.bind("follow_request.WelcomeLearnFlow prefollow_request.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(1)}}),twttr.API.User.bind("follow.WelcomeLearnFlow prefollow.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(1)},success:function(b,c){a._previewFollow(c)}}),twttr.API.User.bind("unfollow.WelcomeLearnFlow unprefollow.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(-1)},success:function(b,c){a._previewUnfollow(c)}}),$(window).bind("resize.WelcomeLearnFlow",twttr.bind(this,this._resizeFlow))}).addOnSwitchAway(function(){twttr.app.recalculatePadding(),this._steps=this._firstStep=null,twttr.API.User.unbind(".WelcomeLearnFlow"),$(window).unbind("resize.WelcomeLearnFlow"),this._profileImageInterval&&(window.clearInterval(this._profileImageInterval),this._profileImageInterval=null),twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=$.noop}).addAfterRender(function(){var a=this;this._rendered=!0,this.streamManager.noInfiniteScroll=!0,this.$find(".welcome-dashboard div.js-stream-manager-container").bind("scroll",function(b){var c=$(this);Math.abs(c.scrollTop()+c.height()-c.children().height())<100&&a.streamManager.getMoreOldItems(function(a){scribble("stream-scrolled",{page:a._page,stream:a._cacheKey,focused_tweet_id:a.focusedItemId||""})})}),twttr.helpers.addFormEvents(a.$find(".js-welcome-search form"),function(b,c){var d=c.q;if(d!=""){var e=function(){trackClient({component:"user_search_form",action:"search"},{query:d});var b=twttr.abdecider.choose("welcome_top_people_286")=="top_people"?"SearchTop":"Search";a.routePageTo(a.PATH_ROOT,b,{query:d})};a._lastStream&&a._lastStream.deferFollows?a._lastStream.commitPrefollows(e):e()}})}).statics({ROUTES_TO_STEP:{intro:"intro",interests:"interests",category:"interests","import":"import",matches:"import",search:"search",starter:"starter",recommendations:"recommendations",profile:"profile"}}).methods({PATH_ROOT:"welcome",noAutoRender:!0,_addressBookAvailable:function(){return twttr.decider.isAvailable("wtf_signup_suggestions")},_previewFollow:function(a){var b=this,c=this.$find('.js-tweet-preview-container .js-unclickable-tweet[data-user-id="'+a.idStr+'"]');if(c.length){c.slideDown();return}var d=function(a){var c=new twttr.views.UnclickableTweet(a),d=$(c.html()).hide();b.$find(".js-tweet-preview-container").prepend(d),d.slideDown()};a.status&&!a.status.inReplyToUserId&&!a.status.attributes.was_retweeted?(a.status.attributes.user=a.attributes,d(a.status)):a.timeline({count:25,exclude_replies:!0,success:function(a){a.length()&&d(a.first())}})},_previewUnfollow:function(a){var b=this,c=this.$find(".js-tweet-preview-container .js-unclickable-tweet[data-user-id="+a.id+"]");c.slideUp()},_setSteps:function(){var a=this;this._steps={intro:{route:twttr.router.welcomeIntroPath(),title:_("Welcome, {{{name}}}.",twttr.currentUser),subtitle:_("Get started in less than 60 seconds."),next_step:"recommendations",show_progress:!1,show_search:!1,next_enabled:!0,no_drawer:!0,show_intro_text:!1},recommendations:{route:twttr.router.welcomeRecommendationsPath(),title:_("Build your timeline."),subtitle:_("Follow people to get their Tweets."),next_step:"interests",show_search:!0,show_progress:!0,initial_progress_copy:_("Start by following 5"),min_progress:3,suggested_progress:5,next_enabled:!1,show_intro_text:!0},"import":{route:twttr.router.welcomeImportPath(),title:_("Find people you know."),subtitle:_("Add your contacts securely."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:2,suggested_progress:5,next_enabled:!1,show_intro_text:!0},matches:{route:twttr.router.welcomeImportMatchesPath(),title:_("Find people you know."),subtitle:_("Add your contacts securely."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:2,suggested_progress:5,next_enabled:!1,show_intro_text:!0},interests:{route:twttr.router.welcomeInterestsPath(),title:_("See who’s here."),subtitle:_("Find and follow well-known people."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:3,suggested_progress:5,next_enabled:!1,show_intro_text:!0},profile:{route:twttr.router.welcomeProfilePath(),title:_("Add character."),subtitle:_("Upload a photo and describe yourself.",twttr.currentUser),next_step:"finish",show_search:!1,show_progress:!1,min_progress:1,suggested_progress:1,next_enabled:twttr.abdecider.choose("hide_skip_in_profile_welcome_step_288")==="skip_disabled",skip_disabled:twttr.abdecider.choose("hide_skip_in_profile_welcome_step_288")==="skip_disabled",next_handler:function(b){a._handleProfileNext(b)},show_intro_text:!0}},this._firstStep=this._showIntro?"intro":"recommendations";var b="interests",c;this._resurrect&&(this._steps["import"].min_progress=0),twttr.abdecider.choose("welcome_prefollow_213")=="prefollow"&&(this._steps.recommendations.subtitle+=" "+_("Here are 3 accounts to get you started.")),twttr.abdecider.choose("welcome_email_import_copy_change_264")=="nospam"&&(this._steps["import"].subtitle=_("We won't email your contacts without your permission."),this._steps.matches.subtitle=_("We won't email your contacts without your permission.")),twttr.decider.isAvailable("contact_import")&&(c=this._steps[b],c.next_step="import",b="import"),twttr.decider.isAvailable("welcome_profile")&&twttr.decider.isAvailable("avatar_upload")&&!this._resurrect&&(c=this._steps[b],c.next_step="profile",b="profile"),twttr.decider.isAvailable("welcome_ad_track")&&(this._steps.intro.ad_referal=$.cookie("ad_partner")=="adparlor",this._steps.intro.ad_parlor=$.cookie("ad_partner")=="adparlor"),this._currentSearchStepId=this._steps.intro.next_step,this._steps.matches.next_step=this._steps["import"].next_step},_addAmbassadorList:function(a,b){twttr.currentUser.friendsCount>0?twttr.currentUser.friends().first(function(c){if(!c){b();return}c.lists(function(c){var d=c.find(function(a){return a.description.match(/\#WelcomeToTwitter/i)});if(d){var e=[],f=-1,g=function(){d.members({cursor:f,success:function(c,d){e=e.concat(c.toArray()),d.response.next_cursor?(f=d.response.next_cursor,g()):(a.unshift(e),a.render(),b())}})};g()}else b()})}):b()},_routeToFirstStep:function(){var a=this;window.setTimeout(function(){a._steps?twttr.router.routeTo(a._steps[a._firstStep].route):twttr.router.routeTo(twttr.router.welcomePath())},0)},welcome:function(a,b){this._steps?(trackClient({action:"impression"}),this._welcomeSetupSpinner&&(this._welcomeSetupSpinner.detach(),this._welcomeSetupSpinner=null),this._routeToFirstStep()):(this.render(),this.$find(".js-welcome-search").hide(),this.streamManager.setTitle({_setTitle:function(a){a(_("Please wait…"))}}),this._welcomeSetupSpinner=(new twttr.views.StreamLoading).render(this.$find(".js-who-to-follow-stream .stream-container"),"html"))},_recommendationsStreamOptions:function(){var a={inWelcomeFlow:!0,pathRoot:this.PATH_ROOT,title:"",scribbler:this._createScribbler("recommendations_stream",{context:"starter"})};return a},recommendations:function(a,b){var c=new twttr.streams.UserRecommendationsStream(this._recommendationsStreamOptions()),d=this,e=function(){return twttr.router.routeTo(d._nextRoute(d._steps.recommendations))};if(!this._addressBookAvailable()){e();return}c.loadRecommendedUsers({success:function(a,b){if(a.length()>0){c.scribbler.scribe({action:"found_results",section:"recommendations"}),d._renderStep("recommendations"),d.bqPrefollow&&d.$find(".js-welcome-faux-tweet-stream").hide();var f=d._recommendationsStreamOptions();f.initialItems=a,f.cursor=b.response.next_cursor;var g=d.switchToStream(twttr.streams.UserRecommendationsDashboardStream,f);d.bqPrefollow&&g.reachedTheEnd(),twttr.decider.isAvailable("welcome_warm_signup")&&!d.bqPrefollow?d._addAmbassadorList(g,function(){d._loadedRecommendations(g)}):d._loadedRecommendations(g),g.bind("rendered_recs.WelcomeLearnFlow",function(){d._pulseFollowButton()}),f.scribbler.scribe({action:"impression"})}else c.scribbler.scribe({action:"not_found_results",section:"recommendations"}),e()},error:function(a){e()}})},_loadedRecommendations:function(a){twttr.abdecider.choose("welcome_prefollow_213")=="prefollow"&&twttr.currentUser.friendsCount<=1&&this._prefollow(a,3),this.bqPrefollow&&this._prefollow(a,100)},_prefollow:function(a,b){var c=this,d=this._steps[this._currentStepId];a.deferFollows=!0,window.setTimeout(function(){c.$find(".js-welcome-dashboard .js-stream-item .js-follow-combo").each(function(c,d){if(c>=b)return!1;a.userActionPrefollow($(d),"prefollow.user")}),d.next_enabled||window.setTimeout(function(){c._addNextDisableReason("progress")},0)},0)},intro:function(a,b){trackClient({action:"impression"}),this._renderStep("intro"),this.switchToStream(null)},resurrect:function(a,b){var c=twttr.router.welcomeRecommendationsPath();trackClient({action:"impression"},"resurrect"),c="/?resurrect=1"+c.slice(1),window.location.href=c},"import":function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._renderStep("import"),trackClient({action:"impression"},"import");var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:this.PATH_ROOT,onlyMatched:twttr.abdecider.choose("welcome_flow_no_choice_contact_import_160")=="no_choice_contact_import",inWelcomeFlow:!0,context:"welcome"},b),e=this.switchToStream(twttr.streams.DashboardContactImportServices,d);e&&(e.setStreamManager(this.streamManager),e.setMatchesStreamKey(this._lastMatchesStreamKey))},matches:function(){if(!twttr.loggedIn)return this.trigger("loginRequired");this._renderStep("matches"),trackClient({action:"impression"},"import");var a=twttr.Scribbler.clientEvent.spawn({context:"import"}),b={scribbler:a,pathRoot:this.PATH_ROOT},c=this.switchToStream(twttr.streams.DashboardContactImportMatches,b),d=this;c.bind("error.WelcomeLearnFlow",function(){d._removeNextDisableReason("progress")}),this._lastMatchesStreamKey=c._cacheKey},interests:function(a,b){var c=this;this._renderStep("interests"),trackClient({action:"impression"});var d=twttr.Scribbler.clientEvent.spawn({context:"interests"}),e={scribbler:d,noHeaderFooter:!0,title:"",pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.SuggestionCategoriesDashboardStream,this.localizeQuery(e,b))},category:function(a,c){var d=this,e=function(a){if(!a)return d.routePageTo(d.PATH_ROOT,"Interests");var e=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});d._renderStep("interests"),d.$find(".js-back-to-stream .js-dashboard-stream-title").text(a.name),d.$find(".js-back-to-stream").show(),d._resizeFlow();var g=d.localizeQuery({category:f,suggestionCategory:a,scribbler:e,noHeaderFooter:!0,title:a.name+" ("+a.size+")",pathRoot:d.PATH_ROOT},c);d.switchToStream(b.streams.SuggestionCategoryMembersDashboardStream,g)},f=a.category||c.category;trackClient({action:"impression"},{query:f,context:"interests"});var g=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;g?e(g[f]):twttr.API.SuggestionCategory.getAll(this.localizeQuery({success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[f];e(b)}},c))},switchToStream:function(a){return this._lastStream&&(this._lastStream.unbind(".WelcomeLearnFlow"),this._lastStream=null),a?this._lastStream=this.streamManager.switchTo.apply(this.streamManager,arguments):(this.streamManager.switchOut(),this.streamManager.setCurrent(null),this.streamManager.$moreButton&&this.streamManager.$moreButton.hide()),this._lastStream},search:function(a,b){var c=a.query||b.q;if(!c)return twttr.router.routeTo(this._steps[this._currentSearchStepId].route);this._renderStep(this._currentSearchStepId);var d=this.$find(".js-back-to-stream");d.find("h3").html(_("Results for: <strong>{{query}}</strong>",{query:""})).find("strong").text(c),d.show(),this.$find('.js-welcome-search input[type="text"]').focus();var e=this._createScribbler({section:"search",component:"full_stream"},{context:"search",query:c});e.scribe({action:"impression"});var f={query:c,scribbler:e,pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.DashboardPeopleSearch,f)},searchTop:function(a,b){var c=a.query||b.q;if(!c)return twttr.router.routeTo(this._steps[this._currentSearchStepId].route);this._renderStep(this._currentSearchStepId);var d=this.$find(".js-back-to-stream");d.find("h3").html(_("Top results for: <strong>{{query}}</strong>",{query:""})).find("strong").text(c),this.$find('.js-welcome-search input[type="text"]').focus();var e=this._createScribbler({section:"search",component:"top_stream"},{context:"search",query:c});e.scribe({action:"impression"});var f={query:c,scribbler:e,pathRoot:this.PATH_ROOT},g=this,i=this.switchToStream(twttr.streams.DashboardTopPeopleSearch,f);i.bind("results.WelcomeLearnFlow",function(a,b){b.isEmpty()?g.routePageTo(g.PATH_ROOT,"Search",{query:c}):d.show()})},profile:function(a,b){var c=this;trackClient({action:"impression"});var d=twttr.currentUser.profileImageUrl;d.indexOf("default_profile_image")!=-1&&(d=twttr.assets.path("t1/img/upload_placeholder.png"));var e={description:twttr.currentUser.description,location:twttr.currentUser.location,url:twttr.currentUser.url,profile_image_url:d,api_url:"//"+twttr.domains.remote,post_authenticity_token:twttr.API.getConfig().postAuthenticityToken};this._renderStep("profile"),this.switchToStream(null),(new twttr.views.WelcomeLearnProfile(e)).render(this.$find(".js-content-container"),"html");var f=this.$find(".js-profile-image-input"),g=this.$find(".js-profile-form"),i=this.$find(".js-bio-count");f.bind("change",function(){c._uploadProfileImage()}),twttr.helpers.addFormEvents(g,$.noop),g.find("input, textarea").bind("change keypress",function(){c._removeNextDisableReason("error_"+$(this).attr("name")),c._updateProfileProgress()}),this._updateProfileProgress();var j=function(){var a=$(this);window.setTimeout(function(){var b=a.is(".js-placeholded")?0:a.val().length;i.text(""+b),i.removeClass("warn superwarn"),b>150?i.addClass("superwarn"):b>140&&i.addClass("warn"),b>160?c._addNextDisableReason("bio"):c._removeNextDisableReason("bio")},0)};g.find("textarea").bind("keyup change",j).each(j)},_enableProfileImageUploadControls:function(){var a=this.$find(".js-current-profile-picture-wrapper"),b=this.$find(".js-upload-form");a.removeClass("loading"),b.find(".btn").removeClass("disabled"),b.find('input[type="file"]').attr("disabled",null)},_showImageError:function(a){this.$find(".js-image-error .js-image-error-text").text(a).parent().fadeIn()},_hideImageError:function(a){this.$find(".js-image-error").fadeOut()},_uploadProfileImage:function(){this._hideImageError(),this.$find(".js-current-profile-picture-wrapper").addClass("loading");if(twttr.turkey.hasFileReader()){var a=this.$find(".js-profile-image-input").get(0);if(a.files&&a.files[0]){var b=a.files[0];if(!twttr.turkey.validatePhoto(a.value)){this._showImageError(_("Profile pictures must be JPG, GIF or PNG")),this._enableProfileImageUploadControls(),trackClient({section:"profile",component:"picture",action:"error"}),trackClient({section:"profile",component:"picture",action:"error_format"});return}if(!twttr.is.def(b.size)||b.size>=this.PROFILE_SIZE_LIMIT){this._showImageError(_("Profile pictures must be smaller than 700K")),this._enableProfileImageUploadControls(),trackClient({section:"profile",component:"picture",action:"error"}),trackClient({section:"profile",component:"picture",action:"error_size"});return}}}this._submitProfileImageForm()},_submitProfileImageForm:function(){var a=this,b=this.$find(".js-upload-form");twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=function(b){twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=$.noop,b.error?(trackClient({section:"profile",component:"picture",action:"error"}),a._showImageError(b.error),a._enableProfileImageUploadControls()):(trackClient({section:"profile",component:"picture",action:"success"}),a._uploadProfileImageCallback())},b[0].submit(),b.find(".btn").addClass("disabled"),b.find('input[type="file"]').attr("disabled","disabled")},_uploadProfileImageCallback:function(){var a=this,b=/profile_images\/.*/,c=twttr.currentUser.profileImageUrl.match(b)[0],d=0,e=function(){a._enableProfileImageUploadControls(),window.clearInterval(a._profileImageInterval),a._profileImageInterval=null};a._profileImageInterval=window.setInterval(function(){if(d++>20){e();return}twttr.currentUser.profileImage(twttr.currentUser.screenName,{size:"normal",zx:Math.random(),ssl:!0,success:function(d){var f=d.profile_image_url,g=f.match(b)[0];g!=c&&(a._updateProfileImageUrl(f),e())},error:function(){e()}})},5e3)},_updateProfileImageUrl:function(a){twttr.currentUser.profileImageUrl=a,twttr.currentUser.profileImageUrlHttps=a,twttr.currentUser.attributes.profile_image_url=a,twttr.currentUser.attributes.profile_image_url_https=a,$(".js-mini-current-user img").each(function(){$(this).attr("src",a)});var b=twttr.helpers.transformProfileImageUrl(a,"reasonably_small");this.$find(".js-current-profile-picture-wrapper").find("img").attr("src",b),this._updateProfileProgress()},_handleProfileNext:function(a){var b=this,c=this.$find('.js-profile-form input[type="text"], .js-profile-form textarea'),d=this.$find(".js-profile-form .control-group"),e={success:function(){c.each(function(){var a=$(this);a.val()&&a.val().length>1&&trackClient({section:"profile",component:a.attr("name"),action:"complete"})}),a()},error:function(a){var c=twttr.showError(_('Sorry, we weren’t able to update your profile. Try again or <a class="js-skip-link" href="#">skip this step</a>.'));c.$dom.find(".js-skip-link").click(function(){b.$find(".js-skip-link").click()})}};if(c.length==0){a();return}c.each(function(){var a=$(this);a.is(".js-placeholded")||(e[a.attr("name")]=a.val())}),d.removeClass("error").find(".js-error-msg").remove(),twttr.currentUser.update(e)},_nextRoute:function(a){var b=this._steps[a.next_step].route;return this._resurrect&&(b="/?resurrect=1"+b.slice(1)),b},_updateProfileProgress:function(){var a=0;this.$find('.js-profile-form input[type="text"], .js-profile-form textarea').each(function(){var b=$(this);b.val()&&!b.is(".js-placeholded")&&a++}),this.$find(".js-current-profile-picture").attr("src").indexOf("upload_placeholder.png")==-1&&a++,a>0&&this._removeNextDisableReason("progress"),this._setProgress(a)},_addNextDisableReason:function(a){this._nextDisableReasons[a]||(this._nextDisableReasons[a]=!0,this._nextDisableReasons._reasonCount++),this._setNextButton(!1)},_removeNextDisableReason:function(a){this._nextDisableReasons[a]&&(delete this._nextDisableReasons[a],this._nextDisableReasons._reasonCount--,this._setNextButton(this._nextDisableReasons._reasonCount==0))},_setProgress:function(a){var b=this._steps[this._currentStepId];this.$find(".js-progressbar").progressbar({value:1+Math.floor(100*a/b.suggested_progress)})},_updateProgress:function(a){var b=this._steps[this._currentStepId];b._currentProg||(b._currentProg=0),b._currentProg+=a,b._currentProg<0&&(b._currentProg=0),this._setProgress(b._currentProg),b._currentProg>=b.min_progress&&this._removeNextDisableReason("progress"),b._currentProg>=b.suggested_progress?this.$find(".js-progress-label").html(_("Great!")):b._currentProg==0?this.$find(".js-progress-label").html(b.initial_progress_copy):b.progress_copy_function?this.$find(".js-progress-label").html(b.progress_copy_function(b.suggested_progress-b._currentProg)):this.$find(".js-progress-label").html(_("Follow {{count}} more!",{count:b.suggested_progress-b._currentProg}))},_setNextButton:function(a){a?(this.$find(".js-next-btn").toggleClass("disabled",!1).fadeIn().toggleClass("selected",!0),this.$find(".js-progressbar").closest("td").width("99%")):(this.$find(".js-next-btn").toggleClass("disabled",!0).hide().toggleClass("selected",!1),this.$find(".js-progressbar").closest("td").width("100%")),this.$find(".js-save-btn").toggleClass("primary-btn",a)},_isOnLastStep:function(){var a=this._steps[this._currentStepId];return a&&a.next_step=="finish"},finish:function(){this.clearWelcomeSkipCookie(),trackClient({section:"finished",action:"impression"}),this._slideDrawer(!1,function(){twttr.router.routeTo(twttr.router.homePath())})},_scribeStepCompletion:function(a){var b=this.constructor.ROUTES_TO_STEP[this._currentStepId];trackClient({section:b,action:"complete"}),trackClient({section:b,component:"progress",action:a})},_renderStep:function(a){this._rendered||this.render(),this._setTheme();var b=this._steps[a];this.$find(".js-content-container").empty(),this._customRenderStep(a),this.$find(".js-welcome-search").toggle(b.show_search),this.$find(".js-back-to-stream").hide(),this._currentStepId=a,a!="search"&&(this._currentSearchStepId=this._currentStepId);var c;a=="matches"||a=="import"?c=_("Find people by name..."):c=_("Search for..."),this.$find(".js-who-to-follow-search input").attr("placeholder",c),this._slideDrawer(!b.no_drawer),this.$find(".js-welcome-intro").hide(),this.$find(".js-welcome-dashboard-footer").show();var d=b.next_step=="finish",e={last_step:d,button_text:this._getNextButtonText(d),continue_route:d?twttr.router.homePath():this._nextRoute(b),show_progress:b.show_progress,next_enabled:b.next_enabled,stream_arrow:!b.no_drawer};twttr.merge(e,b),(new twttr.views.WelcomeLearnHeader(e)).render(this.$find(".js-flow-step"),"html");var f=this.$find(".js-next-btn"),g=this.$find(".js-skip-link");f.attr("href",e.continue_route),g.attr("href",e.continue_route).toggle(!b.next_enabled),a=="intro"?this.$find(".js-intro-tweet").show():this.$find(".js-intro-tweet").hide(),this._nextDisableReasons={_reasonCount:0},b.next_enabled||(this._addNextDisableReason("progress"),this._updateProgress(0)),b.skip_disabled&&this.$find(".js-welcome-dashboard-footer").hide(),this._resizeFlow();var i=this.$find(".example-tweet-info");b.show_intro_text?i.show():i.hide()},_createScribbler:function(a,b){twttr.is.string(a)&&(a={component:a});var c=function(b){var c=twttr.Scribbler.clientAppDefaultTerms();return b=twttr.merge({},b,a),twttr.Scribbler.clientAppEventNameGenerator(b,c)};return twttr.Scribbler.clientEvent.spawn(b,c)},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a}}),a()})}),provide("components/pages/Welcome",function(a){using("boot/bootstrap_data").as(function(b){var c=twttr.components.pages.WelcomeLearnFlow,d=twttr.Router.getCurrentQueryStringParams();if(d.welcomePage&&d.welcomePage.match(/^Welcome/)&&twttr.components.pages[d.welcomePage])c=twttr.components.pages[d.welcomePage];else if(!twttr.isT1){var e=[];for(var f=0;f<e.length;++f){var g=e[f][0],i=e[f][1],j=twttr.abdecider.choose(g,!0);if(j){j!="control"&&(c=i);break}}}twttr.components.pages.Welcome=c,a(twttr.components.pages.Welcome)})}),provide("components/pages/AbstractMediaGallery",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.components.pages.AbstractMediaGallery").subclassOf(twttr.components.Page).addAfterRender(function(){}).view(twttr.views.MediaGalleryPage).addOnSwitchAway(function(){$("#page-container").show(),$(twttr.isT1?".js-topbar":"#top-stuff").show(),$("body").removeClass("has-media-gallery"),this.$gallery.remove(),this.$gallery=null,this.$content=null,this._query=null,this._viewMode=null}).addOnSwitchTo(function(){$("#page-container").hide(),$(twttr.isT1?".js-topbar":"#top-stuff").hide(),this.$gallery=(new twttr.views.MediaGalleryPage).$html().appendTo("#doc"),this.$content=this.$gallery.find(".media-gallery-content"),$("body").addClass("has-media-gallery")}).keydown({left:function(){this._grid&&this._grid.showPrev&&this._grid.showPrev()},right:function(){this._grid&&this._grid.showNext&&this._grid.showNext()},esc:function(){this.closeGalleryAction()}}).methods({showSlideshowLoading:function(){this.addClass("loading loadingTweet loadingMedia")},showLoading:function(){this.addClass("loading")},hideTweetLoading:function(){this.removeClass("loading loadingTweet")},hideMediaLoading:function(){this.removeClass("loading loadingMedia")},hideLoading:function(){this.removeClass("loading loadingTweet loadingMedia")},addClass:function(a){this.$content&&this.$content.addClass(a)},removeClass:function(a){this.$content&&this.$content.removeClass(a)},grid:function(a,b){if(twttr.decider.isAvailable("disable_gallery_grid")){this.slideshow(a,b);return}this.setup(a,b),this._viewMode="grid";if(this.deciderKey&&!twttr.decider.isAvailable(this.deciderKey)){this.trigger("notFound");return}this.buildGrid(a,b),this.scribbler.scribe({component:this._mode,action:"impression"})},buildGrid:function(){throw new Exception("buildGrid is an abstract method that must be implemented in your subclass.")},completeGridRender:function(a){a.generateItemHref=twttr.bind(this,this.generateItemHref),a.provider=this._provider,a.scribbler=this.scribbler,this._renderControls("grid"),this._grid&&(this._grid.$node.remove(),this._grid=null),this.showLoading(),this.$content.addClass("grid"),this._grid=new twttr.components.TheGrid(a,this.$content.width()),this._grid.$node.appendTo(this.$content),this._mode=="videos"&&this._grid.$node.addClass("grid-videos"),this._grid.bind("showLoading",twttr.bind(this,this.showLoading)),this._grid.bind("hideLoading",twttr.bind(this,this.hideLoading)),b.util.lazyBind(window,"resize",twttr.bind(this,this.resizeGrid))},slideshow:function(a,b){if(this.alreadySlideshow(a))return;this.setup(a,b),this._viewMode="slideshow",this._displayMode="slideshow";if(this.deciderKey&&!twttr.decider.isAvailable(this.deciderKey)){this.trigger("notFound");return}this._renderControls("detail");var c={width:this.$content.width(),height:$(window).height()-300,thumbContainerWidth:880,url:b.url||null,mode:this._mode};this._grid&&(this._grid.$node.remove(),this._grid=null),this.buildSlideshow(a,b,c),this.$content.removeClass("grid"),this.scribbler.scribe({component:this._mode,action:"impression"})},buildSlideshow:$.noop,completeSlideshowRender:function(a){a.generateItemHref=twttr.bind(this,this.generateItemHref),a.provider=this._provider,a.scribbler=this.scribbler,this._grid=new twttr.components.MediaSlideshow(a),this._grid.$node.appendTo(this.$content),this._grid.bind("showSlideshowLoading",twttr.bind(this,this.showSlideshowLoading)),this._grid.bind("hideTweetLoading",twttr.bind(this,this.hideTweetLoading)),this._grid.bind("hideMediaLoading",twttr.bind(this,this.hideMediaLoading)),this.showLoading(),b.util.lazyBind(window,"resize",twttr.bind(this,this.resizeSlideshow)),this._grid.bind("mediaRendered",twttr.bind(this,this.resizeSlideshow))},resizeGrid:function(){if(this._viewMode=="slideshow"||!this.$content)return;var a=this.$content.width();this._grid.setCols(a)},resizeSlideshow:function(){var a=this;if(this._viewMode!="slideshow"||!this.$content)return;var c=this._mode=="photos"?b.constants.slideshow.photoMinHeight:b.constants.slideshow.videoMinHeight,h=$(window).height()-(twttr.decider.isAvailable("disable_gallery_thumbs")?220:300),d=this.$content.width();h=Math.max(h,c),this._grid.resizePicture(h,d),this._grid._thumbnailViewer&&(this.resizeThumbnailViewerTimer&&clearTimeout(this.resizeThumbnailViewerTimer),this.resizeThumbnailViewerTimer=setTimeout(function(){a._grid._thumbnailViewer&&a._grid._thumbnailViewer.updateWidth()},500))},_renderControls:function(a){this._controls&&(this._controls.$node.remove(),this._controls=null);var b=$.extend(this.getControlsOptions(),{view:a});this._controls=new twttr.components.MediaGalleryControls(b),this._controls.$node.appendTo(this.$content),this._controls.bind("close",twttr.bind(this,this.closeGalleryAction)),this._controls.bind("detailViewSelected",twttr.bind(this,this.detailViewSelected)),this._controls.bind("gridViewSelected",twttr.bind(this,this.gridViewSelected)),$("div.tipsy").remove(),this._controls.$node.find(".detailview, .gridview").tipsy({gravity:"s",fade:!0})},closeGalleryAction:$.noop,detailViewSelected:$.noop,gridViewSelected:$.noop}),a(twttr.components.pages.AbstractMediaGallery)})}),provide("components/pages/UserMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.UserMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a){this.type="userMedia",this.screenName=a.screen_name,this.deciderKey="phoenix_user_media_gallery",this._mode="photos",this._provider=new twttr.media.provider.UserMedia({screenName:this.screenName}),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id},event_info:this._mode}),this.filter=function(a){return!a||!a.mediaType?!1:a.mediaType.icon()===twttr.constants.media.photoIcon}},getControlsOptions:function(){return{type:this.type,screenName:this.screenName,profilePath:twttr.router.profilePath({screen_name:this.screenName}),mode:this._mode}},generateItemHref:function(a){return twttr.router.userMediaSlideshowPath({screen_name:this.screenName})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this.updatePageTitle(_("Twitter / Recent images by @{{screen_name}}",{screen_name:this.screenName})),this.completeGridRender({type:this.type,screenName:this.screenName,generateItemHref:twttr.bind(this,this.generateItemHref),filter:this.filter}),this.updateBackButton();var c=this;this._grid.$node.delegate("a","click",function(){c.scribbler.scribe({component:c._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){this.updatePageTitle(_("Twitter / Recent images by @{{screen_name}}",{screen_name:this.screenName})),c.type=this.type,c.screenName=this.screenName,c.filter=this.filter,this.completeSlideshowRender(c),this.updateBackButton()},alreadySlideshow:function(a){return this.$content&&a.screen_name===this.screenName&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.userMediaSlideshowPath({screen_name:this.screenName})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.userMediaGridPath({screen_name:this.screenName})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(this.pathBack),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})},updateBackButton:function(){var a=twttr.audit.trail(),b=null;this.pathBack=twttr.router.profilePath({screen_name:this.screenName});if(a.length>1)for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e.page!=="userMediaGallery"){b=e.page,this.pathBack=e.path;break}var f=e.path.split("/")[2];if(f!==this.screenName){b="profile";break}}var g=this._controls.$find(".media-gallery-back-nav span"),i="";switch(b){case"home":i=_("Back to Home");break;case"permalink":i=_("Back to Tweet page");break;case"profile":twttr.helpers.isCurrentUser(this.screenName)?i=_("Back to your profile",{screen_name:this.screenName}):i=_("Back to @{{screen_name}}'s profile",{screen_name:this.screenName});break;case"list":var j=this.pathBack.split("/");i=_("Back to @{{screen_name}}'s list '{{list_name}}'",{screen_name:j[2],list_name:j[3]});break;case"search":i=_("Back to search results");break;default:i=_("@{{screen_name}}'s profile",{screen_name:this.screenName})}g.text(i)}}),a(twttr.components.pages.UserMediaGallery)})}),provide("components/pages/FacetsMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.FacetsMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a,b){var c=this;this.type="search",this.deciderKey="phoenix_facets",this._mode=a.mode,this._query=a.query||b.q,this._provider=new twttr.media.provider.Search,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:this._query,event_info:this._mode})},getControlsOptions:function(){return{type:this.type,mode:this._mode,query:this._query}},slideshow:function(){twttr.components.pages.AbstractMediaGallery.prototype.slideshow.apply(this,arguments)},generateItemHref:function(a){return twttr.router.searchFacetsSlideshowPath({query:this._query,mode:this._mode})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this._mode!="videos"&&this._mode!="photos"&&twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:this._query,mode:"photos"})),this.updatePageTitle(_("Twitter / Gallery - {{{query}}}",{query:this._query}));var c={query:this._query,mode:this._mode,type:this.type};this._mode=="videos"&&(c.imageWidth=200,c.imageHeight=150,c.margin=10),this.completeGridRender(c);var d=this;this._grid.$node.delegate("a","click",function(){d.scribbler.scribe({component:d._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){var d=b.url||null;if(this._query&&this._mode!="videos"&&this._mode!="photos"){var e=twttr.router.searchFacetsSlideshowPath({query:this._query,mode:"photos"});d&&(e=e+"?url="+encodeURIComponent(d)),twttr.router.routeTo(e);return}this._mode=="videos"&&twttr.merge(c,{thumbHeight:48,thumbWidth:64,thumbDisplayWidth:66,thumbDisplayHeight:48}),this.updatePageTitle(_("Twitter / Gallery - {{{query}}}",{query:this._query})),c.type=this.type,c.query=this._query,this.completeSlideshowRender(c)},alreadySlideshow:function(a){return this.$content&&a.query===this._query&&a.mode===this._mode&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.searchFacetsSlideshowPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(twttr.router.searchResultsPath({query:this._query})),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})}}),a(twttr.components.pages.FacetsMediaGallery)})}),provide("components/pages/EventsMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.EventsMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a,b){var c=this;this.type="search",this._mode="photos",this._query=a.query||b.q,this._eventId=this._query,twttr.griffin.isEvent(this._eventId)||twttr.router.routeTo(twttr.router.homePath()),this._provider=new twttr.media.provider.Search,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:this._query,event_info:"events"})},getControlsOptions:function(){return{type:this.type,mode:this._mode,query:this._query,eventId:this._eventId}},slideshow:function(){twttr.components.pages.AbstractMediaGallery.prototype.slideshow.apply(this,arguments)},generateItemHref:function(a){return twttr.router.eventsSlideshowPath({query:this._query,mode:this._mode})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this._mode!="videos"&&this._mode!="photos"&&twttr.router.routeTo(twttr.router.eventsGridPath({query:this._query,mode:"photos"})),this.updatePageTitle(_("Twitter / Events - {{{query}}}",{query:this._query}));var c={query:this._query,mode:this._mode,type:this.type};this._mode=="videos"&&(c.imageWidth=200,c.imageHeight=150,c.margin=10),c.isEvent=!0,this.completeGridRender(c);var d=this;this._grid.$node.delegate("a","click",function(){d.scribbler.scribe({component:d._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){var d=b.url||null;if(this._query&&this._mode!="videos"&&this._mode!="photos"){var e=twttr.router.eventsSlideshowPath({query:this._query,mode:"photos"});d&&(e=e+"?url="+encodeURIComponent(d)),twttr.router.routeTo(e);return}this._mode=="videos"&&twttr.merge(c,{thumbHeight:48,thumbWidth:64,thumbDisplayWidth:66,thumbDisplayHeight:48}),this.updatePageTitle(_("Twitter / Events - {{{query}}}",{query:this._query})),c.type=this.type,c.query=this._query,c.showFirstOnFail=!0,c.isEvent=!0,this.completeSlideshowRender(c)},alreadySlideshow:function(a){return this.$content&&a.query===this._query&&a.mode===this._mode&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.eventsSlideshowPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.eventsGridPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(twttr.router[this._query+"StaticPath"]()),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})}}),a(twttr.components.pages.EventsMediaGallery)})}),provide("components/pages/BigPhotoPermalink",function(a){using().as(function(b){var c=twttr.components.pages.AbstractMediaGallery.prototype;twttr.klass("twttr.components.pages.BigPhotoPermalink").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({permalink:function(a){var b=this;this.$content.empty(),this.index=a.photo_index,twttr.API.Status.find(a.id,{success:twttr.bind(this,this.renderTweet),error:function(){b.trigger("notFound")}})},renderTweet:function(a){this.updatePageTitle(_("Twitter"));if(!a.entities||!a.entities.media||!a.entities.media[this.index-1]){this.trigger("notFound");return}this.$content.addClass("big-photo-permalink media-slideshow-tweet"),(new twttr.views.SlideshowTweet(a)).render(this.$content,"append");var b=a.entities.media[this.index-1];this.dimensions=b.sizes.large;var c=twttr.isSSL()?b.media_url_https:b.media_url;c+=":large",this.loadImage(c)},loadImage:function(a){this.$image=$("<img/>",{"class":"large",src:a,height:this.dimensions.h,width:this.dimensions.w}).appendTo(this.$content),this.refit(),twttr.util.lazyBind(window,"resize",twttr.bind(this,this.refit),200)},refit:function(){var a=twttr.$win.width(),h=twttr.$win.height()-this.$content.find(".tweet").height()-40;this.$image.css({top:Math.max(0,Math.round((h-this.dimensions.h)/2)),left:Math.max(0,Math.round((a-this.dimensions.w)/2))})}}),a()})}),provide("components/pages/Discover",function(a){using(twttr.isT1?"mixins/t1/emptyTimelineRecommendations":"mixins/emptyTimelineRecommendations","components/t1/dashboard/DiscoverNav","components/UserRecommendations","components/Trends","components/Footer","streams/Discover","streams/SuggestionCategoriesStream","mixins/streamablePage","mixins/discoveryHelper").as(function(b,c){var d=twttr.klass("twttr.components.pages.Discover").subclassOf(twttr.components.Page).mixin(b.mixins.streamablePage,b.mixins.discoveryHelper,c).view(twttr.views.Page).methods({setupPage:function(a,b){b=b||{},this.updatePageTitle(a),twttr.themes.loadCurrentUserStyle(),b.sideNavRoute?this.selectSideNav(b.sideNavRoute):this.selectCurrentSideNav()},discover:function(a,c){this.setupPage(_("Twitter / Discover")),this.streamManager.switchTo(b.streams.Discover,{})},networkActivity:function(a,b){this.setupPage(_("Twitter / Activity")),this.streamManager.switchTo(twttr.streams.ActivityByNetworkStream,{}),this.insertEmptyTimeline()},suggestions:function(a,b){this.setupPage(_("Twitter / Who to follow / Suggestions"),{sideNavRoute:"whoToFollowSuggestions"}),this.streamManager.switchTo(twttr.streams.UserRecommendationsStream,{})},suggestions_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowSuggestions");this.setupPage(_("Twitter / Who to follow / Search"),{sideNavRoute:"whoToFollowSuggestions"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"UserRecommendationsStream",backLinkOptions:{route:twttr.router.whoToFollowSuggestionsPath(),name:_("View suggestions")},query:c})},find_friends:function(a,b){this.setupPage(_("Twitter / Find Friends"));var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:"whoToFollow"},b),e=this.streamManager.switchTo(twttr.streams.ContactImportServices,d);e&&e.setStreamManager(this.streamManager)},matches:function(a,b){this.setupPage(_("Twitter / Find Friends / Results"),{sideNavRoute:"whoToFollowImport"});var c=twttr.Scribbler.clientEvent.spawn({context:"import"});this.streamManager.switchTo(twttr.streams.ContactImportMatches,{scribbler:c,pathRoot:"whoToFollow"})},find_friends_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowImport");this.setupPage(_("Twitter / Find Friends / Search"),{sideNavRoute:"whoToFollowImport"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"ContactImportServices",backLinkOptions:{route:twttr.router.whoToFollowImportPath(),name:_("View services")},query:c})},interests:function(a,b){this.setupPage(_("Twitter / Categories"));var c=twttr.Scribbler.clientEvent.spawn({context:"interests"}),d={scribbler:c,pathRoot:"whoToFollow"};d=this.localizeQuery(d,b),this.streamManager.switchTo(twttr.streams.SuggestionCategoriesStream,d)},interests_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowInterests");this.setupPage(_("Twitter / Categories / Search"),{sideNavRoute:"whoToFollowInterests"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"SuggestionCategoriesStream",backLinkOptions:{route:twttr.router.whoToFollowInterestsPath(),name:_("View categories")},query:c})},government_by_zip:function(a,b){this.setupPage(_("Twitter / Government Search"),{sideNavRoute:"whoToFollowInterests"}),this.streamManager.switchTo(twttr.streams.GovernmentSearchStream,{zipCode:a.zipCode})},category:function(a,b){var c=this,d=function(a){if(!a)return c.routePageTo("whoToFollow","Interests");var d=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});c.setupPage(_("Twitter / Categories / {{category}}",{category:a.name}),{sideNavRoute:"whoToFollowInterests"});var f={category:e,suggestionCategory:a,scribbler:d,pathRoot:"whoToFollow"};f=c.localizeQuery(f,b),c.streamManager.switchTo(twttr.streams.SuggestionCategoryMembersStream,f)},e=a.category||b.category;this._category=e;var f=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;if(f)d(f[e]);else{var g={success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[e];d(b)}};g=this.localizeQuery(g,b),twttr.API.SuggestionCategory.getAll(g)}},renderDashboard:function(){this.trendsComponent=new b.components.Trends,this.addDashboardComponents([new b.components.t1.dashboard.DiscoverNav,new twttr.components.JapaneseAd,this.trendsComponent,new b.components.Footer])},addImpressionData:function(a){var b=twttr.audit.currentAction();switch(b){case"find_friends":case"matches":a.context="import";break;case"interests":a.context="interests";break;case"category":a.context="interests",a.query=this._category}}}).addAfterRender(function(){this.renderDashboard()}).addOnSwitchTo(function(){this.trendsComponent&&this.trendsComponent.startUpdatePolling()}).addOnSwitchAway(function(){this.trendsComponent&&this.trendsComponent.stopUpdatePolling()});a(d)})}),provide("components/pages/Connect",function(a){using("_","components/t1/dashboard/MiniHomeProfile","components/t1/dashboard/ConnectNav","components/Trends","components/UserRecommendations","components/Footer","mixins/streamablePage","multiGlobals/more_views").as(function(b){var c=twttr.klass("twttr.components.pages.Connect",function(){twttr.components.Page.apply(this,arguments)}).subclassOf(twttr.components.Page).mixin(b.mixins.streamablePage).view(twttr.views.Page).methods({connect:function(a,b){this.updatePageTitle(_("Twitter / Interactions")),twttr.themes.loadCurrentUserStyle(),this.selectCurrentSideNav(),this.streamManager.switchTo(twttr.streams.ActivityOfMeStream,{})},mentions:function(a,b){this.updatePageTitle(_("Twitter / Mentions")),this.selectSideNav("mentions"),twttr.themes.loadCurrentUserStyle(),this.streamManager.switchTo(twttr.streams.Mentions,{})},renderDashboard:function(){this.addDashboardComponents([new b.components.t1.dashboard.ConnectNav,new twttr.components.JapaneseAd,new twttr.components.UserRecommendations({screenName:null,showLinks:!0}),new b.components.Footer])}}).addAfterRender(function(){this.renderDashboard()});a(c)})}),provide("widget/Banner",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.widget.Banner",function(a){this.$node=$("<div/>"),this.view=new twttr.views[a.view](a),this.$node.delegate(".pane-close","click",twttr.bind(this,this.remove)),this.$node.attr("data-component-term",b.util.underscore(a.view)),this.newBanner=a.newBanner}).methods(twttr.EventProvider).methods({insert:function(){this.view.render(this.$node),$(this.newBanner?".new-js-banners":".js-banners").append(this.$node),twttr.app.recalculatePadding()},remove:function(){this.$node.remove(),twttr.app.recalculatePadding(),this.trigger("closed")}}),twttr.provide("twttr.banners",twttr.augmentObject({pending_new:0,pending_changed:1,pending_bouncing:2,stacked:3,nonStacked:4,display:function(){twttr.currentUser&&twttr.profileUser&&twttr.currentUser!=twttr.profileUser&&twttr.currentUser.isAdmin&&twttr.profileUser.suspended&&this.viewing_suspended_user().insert();if(twttr.currentUser&&twttr.currentUser.states){var a=[],b=!1,c=twttr.currentUser.states;twttr.is.falsy(c.pending_email)||(b=this.pending_new),c.bouncing_email&&(a=twttr.is.array(c.bouncing_email)?c.bouncing_email:[c.bouncing_email]),b!==!1&&twttr.currentUser.emailAddress&&(b=this.pending_changed),b!==!1&&$.inArray(c.pending_email,a)>=0&&(b=this.pending_bouncing);if(twttr.currentUser.emailAddress&&$.inArray(twttr.currentUser.emailAddress,a)>=0){var d=b!==!1?this.stacked:this.nonStacked;this.bouncingEmail(d,twttr.currentUser.emailAddress).insert()}if(b!==!1){var e=twttr.abdecider.choose("email_verification-18",!0);(!e||e=="control")&&this.verifyEmail(b,c.pending_email).insert()}c.detached_email&&this.detachedEmail().insert(),c.suspended&&this.suspended(twttr.currentUser.screenName).insert(),$.cookie("show_reactivated_"+twttr.currentUser.id)&&this.reactivated().insert()}},detachedEmail:function(){return new twttr.widget.Banner({view:"DetachedEmailBanner",newBanner:!0})},verifyEmail:function(a,b){var c=new twttr.widget.Banner({view:"VerifyEmailBanner",pending_email:b,pending_new:a==this.pending_new,pending_changed:a==this.pending_changed,pending_bouncing:a==this.pending_bouncing,newBanner:!0});return c.$node.delegate(".resend-confirmation-email-link","click",function(a){twttr.currentUser.emailResendConfirmation({success:function(a){twttr.showMessage(a.messageForFlash)},error:function(a){twttr.showError(_("Oops!  There was an error sending the confirmation email."))}})}),c},bouncingEmail:function(a,b){var c=new twttr.widget.Banner({view:"BouncingEmailBanner",current_email:b,stacked:a==this.stacked,newBanner:!0});return c.$node.delegate(".reset-bounce-link","click",function(a){twttr.currentUser.emailBounceReset(function(a){twttr.showMessage(_("Your email notifications should resume shortly.")),c.$node.fadeOut("fast",function(){c.remove()})})}),c},suspended:function(a){return new twttr.widget.Banner({view:"SuspendedBanner",screen_name:a,newBanner:!0})},reactivated:function(){var a=new twttr.widget.Banner({view:"ReactivatedBanner"});return a.bind("closed",function(){$.cookie("show_reactivated_"+twttr.currentUser.id,null)}),a.$node.delegate("a.reactivate-settings-link","click",function(b){b.preventDefault(),a.trigger("closed"),window.location.href=b.target}),a},emailAlreadyVerified:function(){var a;for(var b=0;b<twttr.currentUser.email.length;b++)twttr.currentUser.email[b].current&&(a=twttr.currentUser.email[b]);return new twttr.widget.Banner({view:"EmailAlreadyVerifiedBanner",already_verified_message:_("Someone has already confirmed the email {{email}}",{email:a.address})})},welcomeToPhoenix:function(){return new twttr.widget.Banner({view:"WelcomeToPhoenixBanner",welcome_search_results_path:twttr.router.searchResultsPath({query:"#NewTwitter"})})},becameUser:function(){return new twttr.widget.Banner({view:"BecameUserBanner"})}},twttr.EventProvider)),twttr.app.waitForSignal("init",function(){twttr.banners.display()}),a(twttr.widget.Banner)})}),provide("components/Promo",function(a){using().as(function(b){twttr.klass("twttr.components.Promo").subclassOf(twttr.components.Base).initializer(function(){twttr.API.Promo.random({promo_type:"",limit:1},twttr.bind(this,function(a){$.isEmptyObject(a)||((new twttr.views.DashboardPromo({promo:a[0]})).render(this.$node,"append"),this.hasRendered())}))}).click({".promo .definition":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"promo",target:"definition",definition:b.find("strong").html()};scribble("dashboard_click",c)}}).deciderKey("promo_component"),a(twttr.components.Promo)})}),provide("components/Promptbird",function(a){using("_","multiGlobals/more_views","mixins/inviteFriends","mixins/userActionable","constants").as(function(b,_){twttr.klass("twttr.components.Promptbird").subclassOf(twttr.components.Base).initializer(function(a){if(!twttr.views[this.constructor._name]){var b=new Error('Promptbird view "'+this.constructor._name+'" is undefined');twttr.isLocalhost&&console.log(b,b.stack||"error.stack is unavailable :(");return}var c={action:"impression",section:"promptbird_"+a.prompt.prompt_id};trackClient(c),this.prompt=a,this.$node.addClass("promptbird");var d="promptbird-"+a.prompt.format.replace(/_/g,"-");this.$node.addClass(d),a.data.promptId=a.prompt.prompt_id;var e=(new twttr.views[this.constructor._name](a.data)).html();this.$node[0].innerHTML=e,"below_black_bar"===a.prompt.format&&(this.noSpacer=!0),this.hasRendered()}).click({".js-dismiss":function(a){a.stopImmediatePropagation();var b={prompt_id:this.prompt.prompt.prompt_id},c={success:function(a){}};return twttr.API.Promptbird.dismissPrompt(b,c),this.destroy(),!1},".call-to-action":function(a){var b=this,c={action:"click",section:"promptbird_"+this.prompt.prompt.prompt_id};trackClient(c);if($(a.currentTarget).data("preserve-prompt"))return;var d={prompt_id:this.prompt.prompt.prompt_id},e={success:function(a){}};twttr.API.Promptbird.dismissPrompt(d,e),this.destroy()}}),twttr.klass("twttr.components.PromptbirdLanguage").subclassOf(twttr.components.Promptbird).initializer(function(a){this._superInitializer(a),this.$find(".call-to-action").one("click",function(){var b=a.prompt.template_name.split("_");b.shift();var c=b.join("-"),d={success:function(){window.location.reload()}};twttr.currentUser.setLanguage(c,d)})}),twttr.klass("twttr.components.PromptLanguageDe").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageEs").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageHi").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageFr").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageFil").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageId").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageIt").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageJa").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageKo").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageMsa").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageNl").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguagePt").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageRu").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageTr").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageZhCn").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageZhTw").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptImport").subclassOf(twttr.components.Promptbird),twttr.klass("twttr.components.PromptVitDe").subclassOf(twttr.components.Promptbird).initializer(function(a){this.registerUserActionEvents(),a.data.id=16181559,this.constructor.uberclass._initializer.apply(this,arguments),this.$find(".js-action-follow").addClass("call-to-action")}).mixin(b.mixins.userActionable),twttr.klass("twttr.components.PromptOneClickImport").subclassOf(twttr.components.Promptbird).initializer(function(a){this._superInitializer(a),this.$find(".call-to-action").one("click",function(a){var b=$(this);using("externalOauthPopup").as(function(a){var c=window.location.protocol+"//"+twttr.domains.local+"/invitations/oauth_launch?email="+encodeURIComponent(b.attr("data-email"));a.externalOauthPopup({url:c,callbackUrl:twttr.router.whoToFollowImportMatchesPath()})})})}),twttr.klass("twttr.components.PromptImportInline").subclassOf(twttr.components.Promptbird).initializer(function(a){this.constructor.uberclass._initializer.apply(this,arguments);var b=new twttr.components.ContactImportLauncher,c=this;b.bind("servicesLoaded",function(){b.$find(".service-button").addClass("call-to-action").data("preserve-prompt","true"),c.$find(".import-inline").append(b.$node)}),b.trigger("addedToPage")}),twttr.klass("twttr.components.PromptProfile").subclassOf(twttr.components.Promptbird),twttr.klass("twttr.components.PromptMobile").subclassOf(twttr.components.Promptbird).initializer(function(a){var b=twttr.router.mobileGalleryPath(),c=twttr.pageLocale==="en"?"":"?lang="+twttr.pageLocale;a.data.android_path=b+"/android"+c,a.data.blackberry_path=b+"/blackberry"+c,a.data.iphone_path=b+"/iphone"+c,a.data.ipad_path=b+"/ipad"+c,a.data.wp7_path=b+"/wp7"+c,a.data.mobile_gallery_path=b+c,this.constructor.uberclass._initializer.call(this,a)}),twttr.klass("twttr.components.PromptInvite").subclassOf(twttr.components.Promptbird).mixin(twttr.mixins.inviteFriends).initializer(function(a){this.constructor.uberclass._initializer.apply(this,arguments),this.addFormEvents(),twttr.helpers.handlePopupLinks(this.$node);if(twttr.isT1)this.$find(".js-submit").data("preserve-prompt",!0);else{var b=new twttr.components.InviteFriends;b.$find(".js-submit").addClass("call-to-action").data("preserve-prompt",!0),this.$find(".invite").append(b.$node)}}),twttr.klass("twttr.components.PromptFacebookDe").subclassOf(twttr.components.Promptbird),a(twttr.components.Promptbird)}),twttr.klass("twttr.components.PromptbirdDashboardPlaceholder").subclassOf(twttr.components.Base).initializer(function(){this.$node.attr("id","js-promptbird-dashboard-narrow-hook")})}),provide("components/RelatedServices",function(a){using().as(function(b){twttr.klass("twttr.components.RelatedServices").subclassOf(twttr.components.Base).initializer(function(){var a=this;twttr.API.Promo.random({promo_type:"related_service",limit:2},function(b){$.isEmptyObject(b)||((new twttr.views.DashboardRelatedServices({promos:b})).render(a.$node,"append"),a.hasRendered())})}).deciderKey("promo_component"),a(twttr.components.RelatedServices)})}),provide("TrendLocations",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.TrendLocations",function(a){this.getLocation(a)}).statics({LOGGED_OUT_TREND_LOCATION_COOKIE:"trend_location",install:function(a){twttr.trendLocations?twttr.trendLocations.getLocation(a):twttr.trendLocations=new twttr.TrendLocations(a)}}).methods({getLocation:function(a){var b=this;twttr.API.Trend.locations({lang:twttr.pageLocale,success:function(c){b.all=c;if(twttr.currentUser)twttr.currentUser.trendLocation().first(function(c){c?b.current=c:b.current=b.worldwide(),a(b.current)});else{var d=parseInt($.cookie(b.constructor.LOGGED_OUT_TREND_LOCATION_COOKIE),10);b.current=b.locationForWoeid(d)||b.worldwide(),a(b.current)}}})},allLocations:function(){return this.all.array},ancestorsOf:function(a){if(!a.parentid)return[];var b=this.locationForWoeid(a.parentid);return[b].concat(this.ancestorsOf(b))},withAncestorsOf:function(a){return[a].concat(this.ancestorsOf(a))},currentAncestors:function(){return this.ancestorsOf(this.current)},withCurrentAncestors:function(){return this.withAncestorsOf(this.current)},withFilterAncestors:function(){return this.withAncestorsOf(this.currentFilter())},childrenOf:function(a){return twttr.filter(this.allLocations(),function(b){return b.parentid===a.woeid})},currentChildren:function(){return this.current.isPersonalized?this.childrenOf(this.currentFilter(this.worldwide())):this.childrenOf(this.currentFilter())},locationForWoeid:function(a){return a?twttr.filter(this.allLocations(),function(b){return b.woeid==a})[0]:null},locationsForWoeids:function(a){var b=this;return twttr.map(a,function(a){return b.locationForWoeid(a)})},worldwide:function(){return this.locationForWoeid(1)},currentFilter:function(a){var c=a||this.current;return c.placeType.code===b.constants.placeTypes.city||this.childrenOf(c).length===0?this._currentFilterWoeid=c.parentid:this._currentFilterWoeid=c.woeid,this.locationForWoeid(this._currentFilterWoeid)},setPersonalized:function(a){this.current=$.extend(this.current,{isPersonalized:a})},setCurrent:function(a){this.current=this.locationForWoeid(a.woeid)||this.current,this.setPersonalized(a.isPersonalized),twttr.currentUser?twttr.currentUser.setTrendLocation(a.woeid,a.isPersonalized):(twttr.API.CurrentUser.trigger("changedLocation_success"),$.cookie(this.constructor.LOGGED_OUT_TREND_LOCATION_COOKIE,a.woeid)),scribble("switch-trend-location",{woeid:a.woeid,input:"click",origin:a.origin})}}),a(twttr.TrendLocations)})}),provide("components/PeopleResults",function(a){using("constants").as(function(b){twttr.klass("twttr.components.PeopleResults").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(a){a=a.replace(/(^|\b)(from\:|to\:|near\:|source\:)/g,""),this.scribbler=twttr.Scribbler.clientEvent.spawn({query:a,context:"user_search"});if(a.indexOf(":")!=-1)return;var b={reputable:!0,display_location:"search-component",pc:!0},c=this,d=4;twttr.API.User.search(a,b).first(d,function(b){c._readyToRender?c._renderNow(b,a):c._result={users:b,query:a}})}).methods({_renderNow:function(a,c){var d=this;a.length()>0&&(a=a.map(twttr.bind(this,function(a,b){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id),a.socialContext=a.socialContext||[];var c=d.makeSocialContextHtml(a,!1);return a.clone({socialcontext:c})})),d.$node.empty(),(new twttr.views.PeopleResults({query:c})).subview("found_people",new twttr.views.UserSmallList(a)).render(d.$node,"append"),d.$find("a.view-all").click(function(a){d.scribbler.scribe({component:d._getScribeComponentName(),action:"view_all"})}),twttr.helpers.ellipsify(d.$find("div.bio")),d.registerUserActionEvents(),d.hasRendered());var e=[],f;a.each(function(a,c){e.push(a.id);if(a.promotedContent&&a.promotedContent.impression_id){var d={target_id:a.id,item_type:b.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id,item_position:c};f=f||{},f[a.id+""]=d}}),d.scribbler.scribe({component:d._getScribeComponentName(),action:"results"},{item_ids:e,item_count:e.length,item_details:f})},render:function(){var a=this._result;a?this._renderNow(a.users,a.query):this._readyToRender=!0}}).deciderKey("onebox_user_search"),a(twttr.components.PeopleResults)})}),provide("components/ProfileActions",function(a){using("_","constants","mixins/serverRenderableObject",twttr.isT1?"mixins/t1/genericComboButton":[]).as(function(b,_,c,d,f){twttr.klass("twttr.components.ProfileActions",function(a,b,c){this.profileUser=a,this.inProfilePane=!!c,this.$node=this.$domNode(function(){return $("<div />")}),twttr.components.Base.prototype.constructor.apply(this,arguments)}).subclassOf(twttr.components.Base).initializer(function(a,b){var c=this;this.similarUser=a,this.screenName=a.screenName,this.currentRecommendations=[],this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.profileUser.id}),this.whotofollowComponentName="whotofollow_dropdown",this.ignoreScribeItemPosition=!0,twttr.recentlyViewedUsers.push(a);if(twttr.loggedIn){var d=twttr.bind(this,function(b){this._data={user:a,id:a.id,screen_name:a.screenName,notifications:b.notifications,following:b.following,followed_by:b.followedBy,blocking:b.blocking,follow_request_sent:a.followRequestSent,want_retweets:b.wantRetweets,can_dm:b.canDM&&twttr.currentUser.id!=a.id,reported:!1},this._applyMuteMethods(b,a),this._renderActions(),this.registerEvents(),this.wokeUp()});b?d(b):twttr.currentUser.relationshipWith(this.profileUser,d)}else{this._data={user:a,id:a.id,screen_name:a.screenName},this._renderActions(),this._registerFollowEvents();var e=twttr.abdecider.choose("signup_with_profiles_viewed-73",!0);if(twttr.recentlyViewedUsers.size()>=2){var f=(new Date).getTime()-864e5;e=="two_profiles"&&(twttr.recentlyViewedUsers.size()==2||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-3])<f)?twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-2])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(2,function(a){a.open()})):e=="three_profiles"&&(twttr.recentlyViewedUsers.size()==3||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-4])<f)?twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-3])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(3,function(a){a.open()})):e=="four_profiles"&&(twttr.recentlyViewedUsers.size()==4||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-5])<f)&&twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-4])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(4,function(a){a.open()}))}this.wokeUp()}this.registerUserActionEvents(),this.registerUserRecommendationsActions(".user-rec-dropdown")}).mixin(twttr.mixins.userRecommendationsHelper,twttr.mixins.userActionable,d).methods({domNodeSelector:function(){var a=this.inProfilePane?"div.details-pane ":"";return a+"div.profile-actions-container[data-user-id="+this.profileUser.id+"] div.profile-actions-component"},_renderActions:function(){if(!this.preRendered||this.didInitialRenderActions)this._deregisterTipsy(),this.$node.empty(),(new twttr.views.ProfileActions(this._data)).render(this.$node,"append");this.didInitialRenderActions=!0,this.scribeComponentName=this.$node.closest("div.details-pane").length?"mini_profile_actions":"profile_actions",this.$userProfileActionController=this.$find(".user-profile-actions-button"),this.userProfileActionsDropdown=null,this._registerTipsy()},wokeUp:function(){using(">streamWokeUp",function(){signal(">wokeUp")})},_applyMuteMethods:function(a,b){var c=this;if(!twttr.decider.isAvailable("muteUsers"))return;this.$node.delegate(".mute-action","click",function(a){var d=$(this);d.hasClass("is-muted")?(d.removeClass("is-muted"),d.text(_("Mute")),$(".stream-tweet[data-user-id="+b.id+"]").parent().show(),c._removeFromMuteList(b.id)):(d.addClass("is-muted"),d.text(_("Unmute")),$(".stream-tweet[data-user-id="+b.id+"]").parent().hide(),c._addToMuteList(b))}),twttr.merge(this._data,{show_mute:function(){return a.following&&twttr.decider.isAvailable("muteUsers")},is_muted:function(){var a=twttr.caches.User.get("muted");if(!a)return!1;for(var c in a)if(b.id==c)return!0}})},_addToMuteList:function(a){var b={screenName:a.screenName,userId:a.id,profileImageUrl:twttr.helpers.transformProfileImageUrl(a.profileImageUrl,"mini")},c=twttr.caches.User.get("muted")||{};c[a.id]=b,twttr.caches.User.set("muted",c)},_removeFromMuteList:function(a){var b=twttr.caches.User.get("muted")||{};delete b[a],twttr.caches.User.set("muted",b)},renderSimilarUsers:function(){if(!twttr.decider.isAvailable("whotofollow_similarities"))return;var a=this;a.profileUser.similarUsers({limit:2,success:function(b){var c=a.recsToUsers(b);a.trackImpressions(c,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:a.profileUser.id});if(c.length()){var d=(new twttr.views.UserRecommendationsDropdown({user:a.profileUser.name})).subview("recommended_followers",new twttr.views.UserSmallList(c)).render(a.$find(".profile-actions"),"after");a.attachUserRecommendationHideEvents("whotofollow_dropdown_hide",d),twttr.helpers.ellipsify(a.$find(".profile-actions div.bio")),d.slideDown(300)}},error:function(b){a.trackImpressions(null,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:a.profileUser.id,error_status:b.status})}})},registerEvents:function(){if(this.$node.attr("did-register-events"))return;this.$node.attr("did-register-events",!0),this.$node.delegate(".js-direct-message-action","click",twttr.bind(this,function(a){a.preventDefault(),twttr.decider.isExpando()&&$(".twttr-dialog-close").click(),twttr.dialogs.dmSingle({user:{screenName:this.profileUser.screenName,user_id:this.profileUser.attributes.id,name:this.profileUser.attributes.name,profile_image_url:this.profileUser.attributes.profile_image_url},origin:"profile-actions-direct-message"}).open(),this.scribbler.scribe({component:this.scribeComponentName,action:"dm"},{item_ids:[this.profileUser.attributes.id],item_details:this._itemDetails()})})),this._registerDeviceEvents(),this._registerRetweetEvents(),this._registerFollowEvents(),this._registerUnblockEvents(),this._registerAPIListeners()},_registerTipsy:function(){this.$find(".mute-action").tipsy({gravity:"s",delayIn:150,delayOut:500,fade:!0}),this.$find(".device-notifications").tipsy({gravity:"s",html:!0,title:function(){var a=$(this).hasClass("notifying")?_("Tweets from this user are sent to your mobile phone."):_("Tweets from this user are not sent to your mobile phone.");return(new twttr.views.Tipsy({title:a})).html()}}),this.$find(".retweet-setting").tipsy({gravity:"s",html:!0,title:function(){var a=$(this).hasClass("including")?_("Retweets from this user will appear in your timeline."):_("Retweets from this user won't appear in your timeline.");return(new twttr.views.Tipsy({title:a})).html()}})},_deregisterTipsy:function(){this.$find(".device-notifications").tipsy({stopThat:!0}),this.$find(".retweet-setting").tipsy({stopThat:!0}),this.$find(".mute-action").tipsy({stopThat:!0})},_registerDeviceEvents:function(){var a,b,c,d=this;this.$node.delegate(".js-device-notifications","click",function(e){e.preventDefault();if(!twttr.currentUser.deviceSetup){!twttr.currentUser.deviceVerified&&(!twttr.currentUser.pushTweetsDecidered||!twttr.currentUser.pushDevice)?(a={title:_("Setup mobile notifications"),content:(new twttr.views.PhoneSetupPrompt({screen_name:d._data.screen_name,ok:_("Set up phone"),cancel:_("Cancel")})).html()},b=twttr.router.devicesPath()):(a={title:_("Enable mobile notifications for Tweets"),content:(new twttr.views.PhoneTweetsOffPrompt({screen_name:d._data.screen_name,ok:_("Enable Tweet notifications"),cancel:_("Close")})).html()},twttr.currentUser.pushDevice&&twttr.currentUser.pushTweetsDecidered?b=twttr.router.pushHelpPath():b=twttr.router.devicesPath()),(new twttr.widget.Prompt({modal:!0,callback:function(a){a&&(c=function(){twttr.router.routeTo(b)},twttr.API.User.bind("subscribe",c),d.profileUser.setNotificationsOn())},template:a})).open();return}var f=$(this),g=f.hasClass("notifying")?"setNotificationsOff":"setNotificationsOn";d.profileUser[g]()})},_registerRetweetEvents:function(){var a=this;this.$node.delegate(".js-retweet-setting","click",function(b){var c=$(this);b.preventDefault();var d=c.hasClass("including"),e=d?"setWantRetweetsOff":"setWantRetweetsOn";a.profileUser[e]()})},_registerFollowEvents:function(){var a=this;this.$node.delegate(".js-follow, .profile-follow-button, .follow-request-button","click",function(b){var c=a.profileUser.impressionId;twttr.loggedIn?a.profileUser.follow({before:function(){a._showTweetsFromUserOnHome()},success:function(){a.renderSimilarUsers(),trackClient({component:a.scribeComponentName,action:"follow"},{profile_id:a.profileUser.id,item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"follow"})},error:function(b){a._hideTweetsFromUserOnHome(),twttr.helpers.showErrorFromResponse(b,"follow")},impression_id:c}):twttr.dialogs.signinOrSignup({follow:a.profileUser,justSignup:!0}).open(),b.preventDefault()}),this.$node.delegate(".js-unfollow, .profile-unfollow-link, .cancel-request-link","click",function(b){if(a.$node.find(".follow-state").hasClass("just-followed")&&!!b.clientX)return;var c=a.profileUser.impressionId;a.profileUser.unfollow({before:function(){a._hideTweetsFromUserOnHome()},success:function(){trackClient({component:a.scribeComponentName,action:"unfollow"},{profile_id:a.profileUser.id,item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"unfollow"})},error:function(b){a._showTweetsFromUserOnHome(),twttr.helpers.showErrorFromResponse(b,"unfollow")},impression_id:c}),b.preventDefault()}),this.$node.delegate(".just-followed .profile-unfollow-link","mouseleave",function(b){a.$node.find(".follow-state").removeClass("just-followed")})},_registerUnblockEvents:function(){var a=this;this.$node.delegate(".js-unblock","click",function(b){a.profileUser.unblock({before:twttr.bind(a,a._showStreamForBlockedUser),success:function(){a.scribbler.scribe({component:a.scribeComponentName,action:"unblock"},{item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"unblock"})},error:function(b){a._hideStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(b,"unblock")}}),b.preventDefault()}),this.$node.delegate(".js-block","click",function(b){a.profileUser.block({timeout:function(a){a.retry()},before:twttr.bind(a,a._hideStreamForBlockedUser),error:function(){a._showStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(b,"block")}})})},_updateDisplay:function(a,b){var c=this,d=!b,e=!!b;switch(a){case"follow":c._data.following=d,c._data.want_retweets=d,c._data.just_followed=d;break;case"unfollow":case"cancel_request":c._data.following=e,c._data.follow_request_sent=e,c._data.just_followed=e;break;case"follow_request":c._data.follow_request_sent=d;break;case"block":b?c._data.following=!!c._data.was_following:(c._data.was_following=c._data.following,c._data.following=!1),c._data.blocking=d,c._data.reported=e;break;case"unblock":c._data.following=e,c._data.blocking=e,c._data.reported=e,c._data.followed_by=!1;break;case"report":b?c._data.following=!!c._data.was_following:(c._data.was_following=c._data.following,c._data.following=!1),c._data.blocking=d,c._data.reported=d;break;case"subscribe":c._data.notifications=d;break;case"unsubscribe":c._data.notifications=e;break;case"does_want_retweets":c._data.want_retweets=d;break;case"doesnt_want_retweets":c._data.want_retweets=e}$(["following","blocking","followRequestSent","reported","notifications","wantRetweet"]).each(function(a,b){c._data.user.sync(b,c._data[b])}),c._renderActions()},_registerAPIListeners:function(){var a=this,b={before:function(b,c){var d=c.requestParameters[0],e=d.user_id||d.user_ids;e===a._data.id&&a._updateDisplay(b.type,!1)},error:function(b,c,d){var e=d.requestParameters[0],f=e.user_id||e.user_ids;f===a._data.id&&a._updateDisplay(b.type,!0)}};twttr.API.User.bind("follow",b),twttr.API.User.bind("unfollow",b),twttr.API.User.bind("follow_request",b),twttr.API.User.bind("cancel_request",b),twttr.API.User.bind("block",b),twttr.API.User.bind("unblock",b),twttr.API.User.bind("report",b),twttr.API.User.bind("subscribe",b),twttr.API.User.bind("unsubscribe",b),twttr.API.User.bind("does_want_retweets",b),twttr.API.User.bind("doesnt_want_retweets",b)},_getHomeTimeline:function(a){var b=twttr.app.getPage("home");b&&b.send("getStreamManager",function(b){if(b){var c=b.getStream(twttr.streams.Home);c&&a(c.$node)}})},_streamItemsForUserId:function(a,b){return a.find('.stream .stream-item[data-item-type="user"][data-item-id="'+b+'"]').add('.stream .stream-tweet[data-user-id="'+b+'"]',a).add('.stream .stream-tweet[data-retweeter-id="'+b+'"]',a).closest(".stream-item")},_hideTweetsFromUserOnHome:function(){var a=this,b=this.profileUser.id,c=this._getHomeTimeline(function(c){a._streamItemsForUserId(c,b).hide()})},_showTweetsFromUserOnHome:function(){var a=this,b=this.profileUser.id;this._getHomeTimeline(function(c){a._streamItemsForUserId(c,b).show()})},_hideStreamForBlockedUser:function(){this._streamItemsForUserId($(document.body),this.profileUser.id).hide()},_showStreamForBlockedUser:function(){this._streamItemsForUserId($(document.body),this.profileUser.id).show()},_getActionsDropdown:function(a){var b=this,c=[];return c.push({label:_("Mention {{screen_name}}",this._data),icon:"mention",handlers:{click:function(){(new twttr.widget.TweetDialog({template:{title:"Mention "+b.profileUser.screenName},draggable:!0,defaultContent:"@"+b.profileUser.screenName+" ",origin:"profile-actions-dropdown-metion"})).open().focus()}}}),this._data.blocking?c.push({label:_("Unblock {{screen_name}}",this._data),icon:"block",handlers:{click:function(){b.profileUser.unblock({before:function(){$('.stream .stream-tweet[data-user-id="'+b.profileUser.id+'"]').closest(".stream-item").show()}})}}}):c.push({label:_("Block {{screen_name}}",this._data),icon:"block",handlers:{click:function(){b.profileUser.block({timeout:function(a){a.retry()},before:twttr.bind(b,b._hideStreamForBlockedUser),error:function(){b._showStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(e,"block")}})}}}),this._data.blocking||c.push({label:_('Report <span class="truncate">{{screen_name}}</span> for spam',this._data),icon:"spam",handlers:{click:function(){b.profileUser.report({before:function(){$('.stream .stream-tweet[data-user-id="'+b.profileUser.id+'"]').closest(".stream-item").hide()}})}}}),new twttr.control.Dropdown(a,{items:c,direction:"right"})},_itemDetails:function(){var a={},c=this.profileUser.impressionId;return a[""+this.profileUser.id]={item_token:c,target_id:this.profileUser.id,item_type:b.constants.clientEvent.itemType[c?"promotedUser":"user"]},a}}),twttr.control.Dropdown.createCache("lists"),f&&twttr.components.ProfileActions.mixin(f),a(twttr.components.ProfileActions)})}),provide("components/RecentTweets",function(a){using().as(function(b){twttr.klass("twttr.components.RecentTweets").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet).initializer(function(a){var b=this,c=twttr.$win.height()<600?2:3;a.timeline().first(c,function(a){a.length()>0&&((new twttr.views.RecentTweets(a)).render(b.$node,"append"),b.registerTweetActionEvents(),b.updateI18nDisplay(),b.hasRendered())})}).deciderKey("recent_tweets_component"),a(twttr.components.RecentTweets)})}),provide("components/RecentlyFollowed",function(a){using().as(function(b){twttr.klass("twttr.components.RecentlyFollowed").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable,twttr.mixins.userRecommendationsHelper).initializer(function(a){function c(a,c){var d=function(a){return a.screenName==c.screenName};b._userCollection&&!b._userCollection.find(d)&&(b._userCollection.unshift(c),b.rememberHeight(),b.deferredCreateView())}function d(a,c){var d=function(a){return a.screenName!=c.screenName};b._userCollection&&(b._userCollection=b._userCollection.filter(d),b.rememberHeight(),b.deferredCreateView())}if(!twttr.currentUser)return;this.inWelcomeFlow=a,this._maxFollowersCount=10,this._maxSimilarsCount=2;var b=this;twttr.currentUser.friends({count:this._maxFollowersCount,success:function(c){b._userCollection=c,(a||!c.isEmpty())&&b.createView(),b.registerUserActionEvents(),b.registerUserRecommendationsActions()}}),this.$node.delegate(".followed li a.dynsims","click",function(a){var c=$(this);if(c.parent().hasClass("active"))return;var d=c.attr("data-user-id"),e=b._userCollection.find(function(a,b){if(a.id.toString()==d)return a});return e&&twttr.decider.isAvailable("whotofollow_similarities")&&(b.rememberHeight(),b.showSimilarUsers(e)),a.preventDefault(),a.stopPropagation(),!1}),twttr.API.User.bind("follow.RecentlyFollowedComponent",c),twttr.API.User.bind("unfollow.RecentlyFollowedComponent",d),twttr.app.bind("fakeFollow.RecentlyFollowedComponent",c),twttr.app.bind("fakeUnfollow.RecentlyFollowedComponent",d)}).destructor(function(){twttr.app.unbind(".RecentlyFollowedComponent"),twttr.API.User.unbind(".RecentlyFollowedComponent")}).methods({rememberHeight:function(){var a=this.$find(".recently-followed-users");a.css("height",a.height()+"px")},autoHeight:function(){this.$find(".recently-followed-users").css("height","")},deferredCreateView:function(){this._createViewTimeout&&(clearTimeout(this._createViewTimeout),this._createViewTimeout=null);var a=this;this._createViewTimeout=setTimeout(function(){a.createView(),a._createViewTimeout=null},1)},createView:function(){var a=this._userCollection.first();(new twttr.views.RecentlyFollowed({user:new twttr.views.BaseStats(twttr.currentUser),latest_friends:new twttr.views.UserThumbList(this._userCollection.slice(0,this._maxFollowersCount)),latest_friend:a?a.screenName:!1,welcome_flow:!!this.inWelcomeFlow,screen_name:twttr.currentUser.screenName,following_count:twttr.currentUser.friendsCount,following_10:twttr.currentUser.friendsCount>=10})).render(this.$node,"html");var b=this.$find(".followed ul");if(a&&twttr.decider.isAvailable("whotofollow_similarities")){b.find("li a").addClass("dynsims").removeClass("user-profile-link").attr("href","#");var c=this.$find(".recently-followed-users .suggestions");this.showSimilarUsers(a)}else this.autoHeight();if(this.inWelcomeFlow){var d=b.find("li").length+1;for(var e=d;e<=10;e++)b.append('<li><span class="welcome-placeholder">'+e+"</span></li>")}this.hasRendered()},showSimilarUsers:function(a){var b=this.$find(".followed ul"),c=this.$find(".suggestions").css({opacity:0});b.find("li").removeClass("active"),a.similarUsers({limit:this._maxSimilarsCount,complete:twttr.bind(this,function(){this.autoHeight()}),success:twttr.bind(this,function(d){this.similarUser=a,this.screenName=a.screenName;var e=this.recsToUsers(d).slice(0,this._maxSimilarsCount);"florian"==a.screenName&&(e=new twttr.API.util.BaseCollection),this.trackImpressions(e,"recently_followed_view_similarities",{to_user_id:a.id,tracking_context:"recently_followed",similar_to_user:a.id}),e.length()?((new twttr.views.UserDetailedList(e)).render(c.find("ul"),"html"),b.find("li a[data-user-id="+a.id+"]").parent("li").addClass("active"),c.find("p span").text(a.name),c.animate({opacity:1},200,function(){$(this).show()})):c.hide()}),error:twttr.bind(this,function(b){this.trackImpressions(null,"recently_followed_view_similarities",{to_user_id:a.id,tracking_context:"recently_followed",similar_to_user:a.id,error_status:b.status})})})}}),a(twttr.components.RecentlyFollowed)})}),provide("components/RecentlyViewed",function(a){using().as(function(b){twttr.klass("twttr.components.RecentlyViewed").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(){this.createView(),this.registerEvents()}).methods({registerEvents:function(){var a=this;this.$node.delegate("h2 .clear-all","click",function(b){b.preventDefault(),twttr.recentlyViewedUsers.clear(),a.$node.slideUp("fast",function(){a.$node.empty().show()})}),twttr.recentlyViewedUsers.bind("push.RecentlyViewedComponent",function(b,c){a.$find('li[data-user-id="'+c+'"]').size()||a.createView()}),a.registerUserActionEvents(),a.$node.delegate(".user-profile-link, .follow-action","click",function(){var a=$(this),b=a.hasClass("user-profile-link")?"profile_click":"follow";trackClient({section:"dashboard",component:"recently_viewed",action:b},{item_ids:[parseInt(a.attr("data-user-id"))],item_count:1})})},createView:function(){var a=this;twttr.recentlyViewedUsers.findAll({success:function(b){b=b.filter(function(a){return!a.following}).slice(0,6),b.length()?(trackClient({section:"dashboard",component:"recently_viewed",action:"results"},{item_ids:b.map(function(a){return a.id}),item_count:b.length()}),(new twttr.views.RecentlyViewed(b)).render(a.$node,"html"),twttr.helpers.ellipsify(a.$find("div.bio")),a.hasRendered()):a.trigger("notRendered","noRecentlyViewedUsers")}})}}),a(twttr.components.RecentlyViewed)})}),provide("components/InviteContacts",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.InviteContacts").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},this.scribbler=b.scribbler||new twttr.Scribbler,this.clientEventComponent=b.clientEventComponent||"invite_contacts";var c;for(var d=0;d<a.contacts.length;++d)c=a.contacts[d],c.index=d,c.truncated_email=twttr.helpers.truncate(c.email),c.truncated_name=twttr.helpers.truncate(c.name);(new twttr.views.InviteContacts(a)).render(this.$node,"append"),twttr.helpers.handlePopupLinks(this.$node);var e=this.$node.find("#select-all-contacts"),f=this.$node.find(".invite-contacts-button"),g=this.$node.find(".contacts .checkbox input");e.change(function(a){return g.attr("checked",this.checked),this.checked?f.removeClass("disabled"):f.addClass("disabled"),!0}),f.addClass("disabled"),g.change(function(a){var b=!0;return g.each(function(){b=b&&this.checked}),e.attr("checked",b),this.checked?f.removeClass("disabled"):g.filter(":checked").length==0&&f.addClass("disabled"),!0});var i=b.onSuccess||$.noop,j=b.onSubmit||$.noop,k=b.showError||function(a){twttr.showError(a)},l=this;f.click(function(a){if($(this).hasClass("disabled"))return;j();var b=g.filter(":checked").map(function(){var a=l.$node.find('label[for="'+this.id+'"]').text();return a==this.value?this.value:'"'+a+'" <'+this.value+">"}).get();f.addClass("disabled");var c={source:"contact_import",success:twttr.bind(this,function(a){var b=a.invited&&a.invited.length;twttr.showMessage(_("We let {{count}} of your contacts know about Twitter.",{count:b})),l.scribbler.scribe({component:l.clientEventComponent,action:"invited"},{event_value:b,item_count:b}),l.scribbler.scribe({component:l.clientEventComponent,action:"invitable"},{item_count:g.length}),i()}),error:function(a){f.removeClass("disabled");var c=twttr.API.util.RemoteRequest.apiErrorCodeFromResponse(a)||a.status;l.scribbler.scribe({component:l.clientEventComponent,action:"error"},{status_code:c,item_count:b.length});switch(c){case 47:k(_("We couldn't send invitations to any of those addresses."));break;case 37:k(_("There was an error emailing your contacts. Please try again later."));break;default:twttr.showMessage(_("We let your contacts know about Twitter.")),i()}}};twttr.API.AddressBook.sendInvitesByEmail(b,c)}),this.hasRendered()}),a(twttr.components.InviteContacts)})}),provide("components/InviteFriends",function(a){using("_","constants","mixins/inviteFriends").as(function(b,_){twttr.klass("twttr.components.InviteFriends").subclassOf(twttr.components.Base).mixin(twttr.mixins.inviteFriends).initializer(function(a){(new twttr.views.InviteFriends).render(this.$node,"append"),twttr.helpers.handlePopupLinks(this.$node),this.addFormEvents(a),this.hasRendered()}),a(twttr.components.InviteFriends)})}),provide("components/Retweeters",function(a){using().as(function(b){twttr.klass("twttr.components.Retweeters").subclassOf(twttr.components.Base).initializer(function(a,b,c){var d=this;a.retweeters({count:b||15,success:function(b){if(b.length()){var c=a.retweetCount,e=c>50?"50+":c;(new twttr.views.TweetStats({retweeters:b.array,retweeters_count:e,retweeters_length_one:c==1,retweeters_length_other:c!=1})).render(d.$node,"append");var f=b.map(function(a){return new twttr.views.BaseUser(a)});(new twttr.views.FacePile({users:f.array})).render(d.$find(".js-face-pile-container"),"append"),d.$find(".js-user-tipsy").tipsy({gravity:"s"}),d.hasRendered()}}})}).deciderKey("retweeters_component"),a(twttr.components.Retweeters)})}),provide("components/TweetActivity",function(a){using().as(function(b){twttr.klass("twttr.components.TweetActivity").subclassOf(twttr.components.Base).initializer(function(a){this.tweet=a,this.tweet.activities&&this.loadUsersAndRenderActivity()}).methods({loadUsersAndRenderActivity:function(){var a=this,b=33,c=[],d={favoriters:{},retweeters:{},repliers:{}},e={favoriters:[],retweeters:[],repliers:[]};for(var f in e){var g=this.tweet.activities[f];for(var i=0;i<g.length;i++)c=c.concat(g.slice(0,b)),d[f][g[i]]=!0}twttr.API.User.findAll(twttr.util.arrayUniq(c),{stringifiedIds:!0,success:function(b){b.each(function(a){for(var b in e)d[b][a.id]&&e[b].push(a)}),(new twttr.views.TweetActivity({counts:{favoriters_count:a.tweet.activities.favoriters_count,retweeters_count:a.tweet.activities.retweeters_count,repliers_count:a.tweet.activities.repliers_count},activities:e})).render(a.$node,"append")}})}}).click({".tweet-activity-view-all":function(a,b){b.closest(".activity-list-container").find("li.hidden").show(),b.closest(".tweet-activity-count-container").remove(),a.preventDefault()}}).deciderKey(function(){return twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_social_context")}),a(twttr.components.TweetActivity)})}),provide("components/ConversationThread",function(a){using().as(function(b){twttr.klass("twttr.components.ConversationThread").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.ConversationThread(a)).render(this.$node,"append"),a.bind("newMessage",function(a,c){(new twttr.views.Message(c)).render(b.$find(".messages-pane-header"),"after")}),a.bind("deletedMessage",function(a,c){b.$find(".js-message[data-message-id="+c+"]").remove()}),this.hasRendered()}),a(twttr.components.ConversationThread)})}),provide("components/InReplyTo",function(a){using().as(function(b){twttr.klass("twttr.components.InReplyTo").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet).initializer(function(a){var b=this;a.isReply&&a.inReplyTo(function(a){(new twttr.views.InReplyTo(a)).render(b.$node,"append"),b.registerTweetActionEvents(),b.updateI18nDisplay(),b.hasRendered()})}).deciderKey("in_reply_to_component").methods({noSpacer:!0}),a(twttr.components.InReplyTo)})}),provide("components/InlineReplyBox",function(a){using().as(function(b){twttr.klass("twttr.components.InlineReplyBox").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable).mixin(twttr.mixins.streamablePageWithInlineMedia).mixin(twttr.mixins.i18nTweet).initializer(function(a,b,c,d,e){if(!twttr.decider.hasInlineReplies())return null;this.registerTweetActionEvents(),b.addClass("with-inline-reply");var f=this.tweetActionReply(a,"expand",!0);f=twttr.dialogs.reply(f,!0);var g=(new twttr.views.InlineReplyBox({profile_image_url:twttr.currentUser.profileImageUrl,profile_image_size:e?"48":"32"})).$html();this.tweetbox=new twttr.TweetBox(g.prependTo(b),twttr.merge(f,{condensed:!0,condensedContent:_("Reply to @{{username}}",{username:f.defaultContent.slice(1)}),width:d,statusAction:"reply",whenGeoPopupOpens:function(){b.parent().scrollTop(0).css("overflow","visible")}}));var i=this;this.tweetbox.bind("open",function(){g.addClass("shifted").find(".inline-reply-user-image").show(),e&&i.tweetbox.$find("textarea").width(e)}),this.tweetbox.bind("close",function(){g.removeClass("shifted").find(".inline-reply-user-image").hide(),e&&i.tweetbox.$find("textarea").width(d)}),this.tweetbox.bind("tweetSuccess",function(a,b){var d=c.show().find(".tweets-wrapper");d.length||(d=c),(new twttr.views.SimpleTweet(b)).render(d,"prepend"),i.addInlineMediaIcons(d),i.updateI18nDisplay()}),this.tweetbox.bind("sendingTweet",function(c,d){i.trigger("reply.tweet",[a,b,"reply"])})}).methods({focus:function(){this.tweetbox.focus()}}),a(twttr.components.InReplyTo)})}),provide("components/Conversation",function(a){using().as(function(b){twttr.klass("twttr.components.Conversation").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.usesRelatedResults,twttr.mixins.i18nTweet,twttr.mixins.streamablePageWithInlineMedia).initializer(function(a,b,c){var d=this;d._tweetId=a.id;var e=function(a){if(a.length>1){var b=$("div.inner-pane").filter("div.active").find("div.pane-components"),c=b.find("div.conversation-last-ancestor-tweet");c.length>0&&b.animate({scrollTop:c.position().top-50},800)}},f=function(b){var f=twttr.isT1?new twttr.views.Ancestors(b):new twttr.views.Conversation(d.conversationGroup,a,b);f.render(d.$node,"append"),d.registerTweetActionEvents(),d.updateI18nDisplay(),twttr.isT1&&d.addInlineMediaIcons(d.$node),d.hasRendered(),twttr.isT1&&!b.length&&d.$node.hide(),c(d),twttr.decider.isExpando()||e(b)},g=function(a){twttr.API.User.find(a,function(a){twttr.helpers.canViewUser(a)||((new twttr.views.Ancestors({protected_ancestor:{user:new twttr.views.BaseUser(a)}})).render(d.$node,"append"),c(d))})};d.withRelatedResults(a,b,{success:function(b){d.resultGroups=b,d.conversationGroup=d.conversationGroupFor(b);var c=d.conversationGroup&&d.tweetsForConversationRole(d.conversationGroup,"Ancestor");c&&c.length?f(c):a.inReplyTo({success:function(a){f(a?[a]:[])},error:function(){twttr.isT1&&a.inReplyToUserId?g(a.inReplyToUserId):f([])}})},error:function(){f([])}})}).methods({onTweetActionDelete:function(a){a===this._tweetId&&this.trigger("deleted")},noSpacer:!0}),a(twttr.components.Conversation)})}),provide("components/Replies",function(a){using().as(function(b){twttr.klass("twttr.components.Replies").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.usesRelatedResults,twttr.mixins.i18nTweet,twttr.mixins.profilePopupActionable,twttr.mixins.streamablePageWithInlineMedia).initializer(function(a,b,c,d){if(!c)return;var e=this,f=function(a,b,c){b=e.filterRetweets(b);if(twttr.decider.isExpando()){var f=a.length;f>5?a=a.slice(0,5):b.length+f>5&&(b=b.slice(0,5-f))}a.length+b.length>0?((new twttr.views.Replies(c,a,b)).render(e.$node,"append"),e.registerTweetActionEvents(),e.updateI18nDisplay(),e.hasRendered(),twttr.isT1&&e.addInlineMediaIcons(e.$node),d&&d.apply(e)):twttr.decider.hasInlineReplies()&&((new twttr.views.Replies(c,a,b)).render(e.$node,"append"),e.$node.hide(),e.registerTweetActionEvents(),d&&d.apply(e))},g=[],i=[],j=e.conversationGroupFor(c);j&&(g=e.tweetsForConversationRole(j,"Descendant"),i=e.tweetsForConversationRole(j,"Fork")),f(g,i,j)}).methods({filterRetweets:function(a){var b={};for(var c=a.length-1;c>=0;c--){var d=a[c].id;a[c].attributes.retweeting_status?b[d]===undefined&&(b[d]=!1):b[d]=!0}for(var c=a.length-1;c>=0;c--){var d=a[c].id;a[c].attributes.retweeting_status&&b[d]===!0?a.splice(c,1):a[c].attributes.retweeting_status&&b[d]===!1&&(b[d]=!0)}return a}}).deciderKey("conversations"),a(twttr.components.Replies)})}),provide("components/MoreLists",function(a){using().as(function(b){twttr.klass("twttr.components.MoreLists").subclassOf(twttr.components.Base).initializer(function(a){this.render(a),this._registerEvents(a)}).deciderKey("more_lists_component").methods({render:function(a){var b=this;a.user.lists(function(c){c.length()&&((new twttr.views.MoreLists({user:new twttr.views.BaseUser(a.user),lists:new twttr.views.ListOfLists(c),create_list_button:{link_only:!0}})).render(b.$node),b.hasRendered())})},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"update",function(c,d){d.id===a.id&&b.render(d)})}}),a(twttr.components.MoreLists)})}),provide("geo/TweetGeo",function(a){using("_").as(function(b,_){twttr.klass("twttr.geo.TweetGeo",function(a,b,c,d){this.opts=d,this.placeId=b,this.render(a,c)}).methods({render:function(a,b){var c=this;c.$target=b;var d=$.extend({},a.data());d.tweet_id=a.id,c.avatarUrl=a.user.profileImageUrl.replace(/(.+)(?:_normal)\.(\w+)$/,"$1_mini.$2"),d.coordinates&&(c.coordinates=d.coordinates.coordinates),d.is_from=!c.placeId;var e=c.placeId||a.place&&a.place.id;if(e){if(!d.place||d.place.id!=e)d.place={id:e,name:_("A Place")};twttr.API.Place.find(e,{success:function(a){var b=a.data();d.place=twttr.geo.getFullPlace(b),c.finishRendering(d)},error:function(){d.place.place_id=e,c.finishRendering(d)}})}else delete d.place,c.finishRendering(d)},finishRendering:function(a){var b=this,c=!!b.coordinates,d=!(!a.place||!a.place.geometry&&!a.place.bounding_box);a.show_map=c||d;if(a.show_map||a.place){var e=(new twttr.views[b.opts.viewName](a)).$html();$.browser.safari&&!navigator.userAgent.match(/Chrome/)&&(e.find(".map_canvas").addClass("notransform"),b.opts.mapOptions.draggable=!1),b.$target.append(e)}if(a.show_map){b.drawMap(e.find(".map_canvas"),a.place);var f={},g=a.tweet_id+"";f[g]={item_type:twttr.constants.clientEvent.itemType.tweet},trackClient({component:"tweet",action:"show",element:"map"},{event_info:"dynamic",item_details:f,item_ids:[g],item_count:1})}},drawMap:function(a,b){var c=this;twttr.geo.loadMaps(function(){c.geoMap=new twttr.geo.Map(a,c.opts.mapOptions);if(!c.geoMap.initialized)return;var d=!1;if(b)if(b.geometry){var e=b.geometry.coordinates;b.geometry.type=="Polygon"?c.geoMap.addPlacePolygon(e):b.geometry.type=="MultiPolygon"?twttr.each(e,function(a){c.geoMap.addPlacePolygon(a)}):b.geometry.type=="Point"&&(c.geoMap.addPoi(e),d=!0)}else{var e=b.bounding_box.coordinates,f=e[0][0],g=e[0][2];f[0]==g[0]&&f[1]==g[1]?(c.geoMap.addPoi(e[0][0]),d=!0):c.geoMap.addPlacePolygon(e)}!d&&c.coordinates&&c.geoMap.addPoint(c.coordinates,c.avatarUrl),c.geoMap.adjustBounds(13,!d&&c.coordinates),a.bind("refreshMap",function(){c.geoMap.resize()})})}}),a(twttr.geo.TweetGeo)})}),provide("components/MachineTranslationBackend",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.components.MachineTranslationBackend",function(){}).statics({getBackend:function(){return new twttr.components.BingMTBackend}}).methods({translationTextEqual:function(a,b){return a===b?!0:(global_spaces=RegExp(twttr.txt.regexen.spaces.toString().slice(1,-1),"g"),a.replace(/[MHL]T\d*KEN/g,"").replace(global_spaces,"").toLowerCase()===b.replace(/[MHL]T\d*KEN/g,"").replace(global_spaces,"").toLowerCase()?!0:!1)},shouldShowTranslation:function(a,b,c,d){return c==d?!1:this.translationTextEqual(a,b)?!1:!0}}),twttr.klass("twttr.components.BingMTBackend",function(){}).subclassOf(twttr.components.MachineTranslationBackend).methods({attribution:function(){return _('Translation powered by <a href="http://bing.com/translator" target="_new">Bing Translator</a>')},translate:function(a,b,c){var d=this;$.ajax({url:window.location.protocol+"//api.microsofttranslator.com/v2/ajax.svc/GetTranslations?oncomplete=?",dataType:"jsonp",data:{appId:"2ADD5BC2C5139FA743F612F9CE8ECD783FCB899F",text:a,to:b,maxTranslations:1},success:twttr.bind(this,function(b){if(b&&b.Translations){var e=b.Translations[0].TranslatedText,f=b.From;this.shouldShowTranslation(a,e,f,d.destLocale)&&c(e,f)}})})}}),twttr.klass("twttr.components.MachineTranslatedTweet").subclassOf(twttr.components.Base).initializer(function(a){this._initTranslation(a,twttr.pageLocale||$("html").attr("lang")||"en")}).deciderKey("machine_translated_tweets").methods({_initTranslation:function(a,b){a.user["protected"]||(this.destLocale=b,this.fetchTranslation(a,this.destLocale))},_preProcessTweetText:function(a){var b=a,c=function(a){return a&&a.replace&&a.replace(/^\s+|\s+$/g,"")};this._mentions=a.match(twttr.txt.regexen.extractMentions)||[];for(i in this._mentions)this._mentions[i]=c(this._mentions[i]),b=b.replace(this._mentions[i],"<M"+i+"></M"+i+">");this._hashtags=a.match(twttr.txt.regexen.autoLinkHashtags)||[];for(i in this._hashtags)this._hashtags[i]=c(this._hashtags[i]),b=b.replace(this._hashtags[i],"<H"+i+"></H"+i+">");this._links=a.match(twttr.txt.regexen.extractUrl)||[];for(i in this._links)this._links[i]=this._links[i],b=b.replace(this._links[i],"<L"+i+"></L"+i+">");return b},_postProcessTweetText:function(a){var c=a;if(this._mentions&&this._mentions.length>0)for(var d=0;d<this._mentions.length;d++)c=c.replace(new RegExp("<M"+d+">\\s?</M"+d+">","i"),this._mentions[d]);if(this._hashtags&&this._hashtags.length>0)for(var d=0;d<this._hashtags.length;d++)c=c.replace(new RegExp("<H"+d+">\\s?</H"+d+">","i"),this._hashtags[d]);if(this._links&&this._links.length>0)for(var d=0;d<this._links.length;d++)c=c.replace(new RegExp("<L"+d+">\\s?</L"+d+">","i"),this._links[d]);return b.util.linkify(c)},fetchTranslation:function(a,b){var c=this;this.sourceText=this._preProcessTweetText(a.text);var d=twttr.components.MachineTranslationBackend.getBackend();d.translate(this.sourceText,b,function(b,e){(new twttr.views.MachineTranslatedTweet({translated_text:c._postProcessTweetText(b),attribution:d.attribution()})).render(c.$node,"append"),eventTerms={client:"web",page:"home",section:"timeline",component:"tweet",action:"translate"},eventDetails={item_ids:[a.id],i18n_details:{source_lang:e,source_length:c.sourceText.length,translation_lang:c.destLocale,translation_length:b.length}},trackClient(eventTerms,eventDetails),c.hasRendered()})}}),a(twttr.components.MachineTranslationBackend)})}),provide("components/TweetGeoSmall",function(a){using().as(function(b){twttr.klass("twttr.components.TweetGeoSmall").subclassOf(twttr.components.Base).initializer(function(a,b){if(!b&&!a.showGeoMap)return;if(a.geo||a.place&&a.place.id||b||a.coordinates)new twttr.geo.TweetGeo(a,b,this.$node,{viewName:"GeoMapSmall",mapOptions:twttr.isT1?{}:{draggable:!1,disableDoubleClickZoom:!0,navigationControl:!1}}),this.hasRendered()}).deciderKey("tweet_geo_component"),a(twttr.components.TweetGeoSmall)})}),provide("components/NewestListMembers",function(a){using().as(function(b){twttr.klass("twttr.components.NewestListMembers").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(a){this.render(a),this._registerEvents(a)}).deciderKey("newest_list_members_component").methods({render:function(a){var b=this;a.members().first(4,function(c){(new twttr.views.NewestListMembers({list:a.attributes})).render(b.$node),c.length()&&(c.each(function(a){var c=new twttr.views.UserSmallListItem(a);c.is_withheld()||c.render(b.$find(".js-recent-members"),"append")}),twttr.helpers.ellipsify(b.$find("div.bio")),b.hasRendered(),b.registerUserActionEvents())})},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"add remove",function(c,d){d.id===a.id&&b.render(d)})}}),a(twttr.components.NewestListMembers)})}),provide("components/StorkPip",function(a){using().as(function(b){twttr.klass("twttr.components.StorkPip").subclassOf(twttr.components.Base).initializer(function(a,b){var c=this;this._opts=b,this._state="icon",this._$streamItem=a,this._scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({component:"stork",element:b.id}),this.constructor.allPips[b.id]||(this.constructor.allPips[b.id]=[]),this.constructor.allPips[b.id].push(this),(new twttr.views.StorkPipIcon({icon:b.icon})).render(this.$node),this.$node.hide().prependTo(a).fadeIn("fast"),b.iconHighlight&&this.highlight(b.iconHighlight),this._scribbler.scribe({action:"impression"});var d=a.closest(".js-stream-items");if(b.explainOn){twttr.is.string(b.explainOn)&&(b.explainOn={event:b.explainOn});var e=b.explainOn.selector?d.find(b.explainOn.selector):d;this._registerEvent(e,b.explainOn.event,function(a){var d=$(a.target).closest(".js-stream-item");if(d.length&&(!b.matcher||b.matcher(d))){if(d[0]!=c._$streamItem[0]&&d.find(".js-pip").length)return;if(c._state=="icon")c._scribbler.scribe({action:"show"});else{if(c._state!="prompt")return;c._scribbler.scribe({action:"success"})}c.showState("explain",d)}})}if(b.dismissOn){twttr.is.string(b.dismissOn)&&(b.dismissOn={event:b.dismissOn});var e=b.dismissOn.selector?d.find(b.dismissOn.selector):d;this._registerEvent(e,b.dismissOn.event,function(a){var d=$(a.target).closest(".js-stream-item");d.length&&(!b.matcher||b.matcher(d))&&(d[0]==c._$streamItem[0]&&c._state=="explain"&&c._scribbler.scribe({action:"complete"}),c.dismissAll())})}}).click({".js-pip":function(){this._state=="icon"?(this.showState("prompt"),this._scribbler.scribe({action:"open"})):this._state=="explain"&&(this.dismissAll(),this._scribbler.scribe({action:"dismiss"}))},".js-dismiss":function(){this.dismissAll(),this._scribbler.scribe({action:"dismiss"})}}).statics({allPips:{},openPip:null}).methods({showState:function(a,b){function e(a){var b=new twttr.views.StorkPipText({contents:a,dismiss:!1});b.render(d.$node,"append"),d.$node.fadeIn("fast")}if(a=="prompt"&&!this._opts.promptHtml)return this.showState("explain",b);b=b||this._$streamItem;if(this._state==a)return;this._state=="icon"&&(a=="prompt"||a=="explain")&&twttr.stork.incrValue(this._opts.counter);if(a!="icon"){var c=this.constructor.openPip;c&&c!=this&&(c._state=="prompt"?c.showState("icon"):c._state=="explain"&&c.dismiss()),this.constructor.openPip=this}a=="explain"&&this.dismissOthers(),this._$streamItem[0]!=b[0]&&this.unhighlight(),this._state=a,this._$streamItem=b;var d=this;this.$find(".js-pip").prependTo(this.$node.parent()).fadeOut("fast",function(){$(this).remove();if(a=="icon"){var b=(new twttr.views.StorkPipIcon({icon:d._opts.icon})).render(d.$node);d.$node.fadeIn("fast")}else{var c=d._opts[a+"Html"],f=d._opts[a+"Highlight"];twttr.is.fn(c)?c(d._$streamItem,e):e(c),f&&f!="remove"?d.highlight(f):d.unhighlight(f=="remove")}}),this.$node.hide().prependTo(b)},highlight:function(a){this._$streamItem.find(a).is(".stork-highlighted")||(this.unhighlight(),this._$streamItem.find(a).each(function(){var a=$(this),b=$("<span>").addClass("stork-highlight-background"),c=$("<span>").addClass("stork-highlight-container").css({width:a.outerWidth(),height:a.outerHeight()});a.wrap(c).before(b).addClass("stork-highlighted"),b.fadeIn()}))},unhighlight:function(a){this._$streamItem.find(".stork-highlighted").each(function(){var b=$(this),c=b.parent().find(".stork-highlight-background"),d=function(){c.remove(),b.unwrap()};b.removeClass("stork-highlighted"),a?d():c.fadeOut(d)})},dismissOthers:function(){for(var a=0;a<this.constructor.allPips[this._opts.id].length;++a){var b=this.constructor.allPips[this._opts.id][a];b!=this&&b.dismiss()}this.constructor.allPips[this._opts.id]=[this]},dismissAll:function(){var a=this.$node.closest(".js-stream-items");for(var b=0;b<this.constructor.allPips[this._opts.id].length;++b){var c=this.constructor.allPips[this._opts.id][b];c.dismiss()}this.constructor.allPips[this._opts.id]=[],twttr.stork.storkifyTweets(a)},dismiss:function(){var a=this;this._$streamItem&&this.unhighlight(),this.$node.fadeOut(function(){a.destroy()}).find(".js-pip").removeClass("js-pip")}}),a(twttr.components.StorkPip)})}),provide("components/StreamEnd",function(a){using().as(function(b){twttr.klass("twttr.components.StreamEnd").subclassOf(twttr.components.Base).initializer(function(a,b){(new twttr.views.StreamEnd({show_stream_end_bird:b===undefined?!0:b,end_text:a})).render(this.$node,"append")}),a(twttr.components.StreamEnd)})}),provide("components/StreamEndInviteFriends",function(a){using().as(function(b){twttr.klass("twttr.components.StreamEndInviteFriends").subclassOf(twttr.components.StreamEnd).initializer(function(a,b){var c=new twttr.components.InviteFriends;c.$node.addClass("stream-item"),this.$node.append(c.$node),this._superInitializer.apply(this,arguments)}),a(twttr.components.StreamEndInviteFriends)})}),provide("components/StreamWhaleEnd",function(a){using().as(function(b){twttr.klass("twttr.components.StreamWhaleEnd").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.StreamWhaleEnd({stream_fail_header:a})).render(this.$node,"append"),this.$node.delegate(".try-again-after-whale","click",function(a){a.preventDefault(),b.trigger("tryAgain")})}),a(twttr.components.StreamWhaleEnd)})}),provide("components/ContactImportErrorEnd",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.ContactImportErrorEnd").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.StreamWhaleEnd({stream_fail_header:a})).render(this.$node,"append"),this.$node.delegate(".try-again-after-whale","click",function(a){b.trigger("tryImportAgain")})}),a(twttr.components.ContactImportErrorEnd)})}),provide("components/EmptyHome",function(a){using().as(function(b){var c=twttr.klass("twttr.components.EmptyHome").subclassOf(twttr.components.Base).initializer(function(){this.render(),this.hasRendered()}).methods({render:function(){var a=twttr.currentUser;(new twttr.views.EmptyHome({screen_name:a.screenName,protected_account:a["protected"]})).render(this.$node.empty(),"append")}});twttr.isT1&&c.methods({render:function(){(new twttr.views.EmptyHome({show_stream_end_bird:!0,end_text:(new twttr.views.EmptyTimelineMessage).html()})).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/AddPeople",function(a){using().as(function(b){var c=twttr.klass("twttr.components.AddPeople").subclassOf(twttr.components.Base).initializer(function(){this.render();var a=twttr.isT1?"userSearchPath":"whoToFollowSearchPath";twttr.helpers.addFormEvents(this.$find(".js-search-for-list-people"),function(){var b=this.q.value;b!=""&&(twttr.router.routeTo(twttr.router[a]({query:b})),trackClient({component:"empty_list_stream",action:"search"},"list"),_scribble("search-for-people",{input:"click"}))}),this.hasRendered()});twttr.isT1?c.methods({render:twttr.util.noopInT1}).setBaseView(twttr.views.AddPeople):c.methods({render:function(){(new twttr.views.AddPeople).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/NoListMembers",function(a){using().as(function(b){var c=twttr.klass("twttr.components.NoListMembers").subclassOf(twttr.components.Base).initializer(function(){var a=this;this.render(),this.hasRendered()});twttr.isT1?c.methods({render:twttr.util.noopInT1}).setBaseView(twttr.views.NoListMembers):c.methods({render:function(){(new twttr.views.NoListMembers).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/Media",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.components.Media").subclassOf(twttr.components.Base).initializer(function(a,b,c){this.tweet=a,this.urls=twttr.media.extractUrls(a),this.$node.prepend($('<div class="tweet-media"/>')),this.$mediaNode=this.$node.find("div.tweet-media"),this.width=b,this.options=c||{},this.hasCalledHasRendered=!1,this.notDisplayedClass=".media-not-displayed";var d=this;this.checkForMedia(function(a){a&&(d.$mediaNode.bind("hideMedia",function(){$("div.tweet-media").empty()}),d.$mediaNode.bind("showMedia",function(){d.restrictedMedia()?twttr.loggedIn?d.loggedInBehavior():d.loggedOutBehavior():d.renderMedia()}),d.$mediaNode.trigger("showMedia"))})}).deciderKey("inline_media_component").statics({restrictedCategories:{photo:!0,video:!0},dashboardThumbnailOptions:{itemWidth:66,itemHeight:66,itemDisplayWidth:70,width:276,viewClass:twttr.views.ThumbnailViewerFacet,thumbnailViewClass:twttr.views.ThumbnailFacet}}).methods({checkForMedia:function(a){var c=this;if(b.util.objKeys(this.urls).length===0&&!twttr.media.hasMedia(this.tweet)){a(!1);return}var d=c.tweet;twttr.Cards.prototype.hasCards(d)?(this.mediaTypes=[],a(!0)):twttr.media.mediaTypes(this.urls,function(d){c.mediaTypes=d;if(b.util.objKeys(c.mediaTypes).length===0){a(!1);return}a(!0)})},onProfilePage:function(){return twttr.profileUser&&twttr.profileUser.id==this.tweet.user.id},restrictedMedia:function(){var a=!1;return $.each(this.mediaTypes,function(b,c){var d=twttr.media.iconType(b,c);!twttr.components.Media.restrictedCategories[d]||(a=!0)}),a},_getUser:function(){return this.tweet.retweetingStatus?this.tweet.retweetingStatus.user:this.tweet.user},loggedInBehavior:function(){var a=this,b=this._getUser();if(twttr.helpers.isCurrentUser(b)||this.hasClickedShowMedia){this.renderMedia();return}this.checkPossiblySensitive()},_isPossiblySensitive:function(){return!!this.tweet.possiblySensitive},checkPossiblySensitive:function(){this._isPossiblySensitive()?this.possiblySensitiveBehavior():this.renderMedia()},checkNotFollowing:function(){var a=this,b=this._getUser();twttr.currentUser.relationshipWith(b,function(c){b.sync("following",c.following),a.renderMedia()})},possiblySensitiveBehavior:function(){var a=this;twttr.currentUser.viewPossiblySensitive({success:function(b){b?a.checkNotFollowing():a.renderBlockedMessage({possibly_sensitive:!0})}})},loggedOutBehavior:function(){this.onProfilePage()&&!this._isPossiblySensitive()?this.renderMedia():this._isPossiblySensitive()&&!twttr.media.getViewMediaCookie()?this.renderBlockedMessage({possibly_sensitive:!0}):this.renderMedia()},renderMedia:function(){var a=this,b=(new twttr.media.Embedder(this.tweet,{DOMContainer:a.$mediaNode,preProcess:function(b,c){c(twttr.aug(a.options,{maxwidth:a.width}))},afterRender:function(b,c){a.hasCalledHasRendered||(a.hasRendered(),a.hasCalledHasRendered=!0),a.options.afterRender&&a.options.afterRender(b)}})).render()},buildNotDisplayedView:function(a){return new twttr.views.MediaNotDisplayed(a)},renderBlockedMessage:function(a){var b=this;b.hasCalledHasRendered||(b.hasRendered(),b.hasCalledHasRendered=!0);if(this.$node.find(this.notDisplayedClass+":visible").get(0))return;this.buildNotDisplayedView(a).render(this.$node,"prepend"),this.options.whenNotDisplayed&&this.options.whenNotDisplayed(this.$node);var c=twttr.bind(this,function(a){this.renderMedia(),this.$node.find(this.notDisplayedClass).hide(),twttr.loggedIn?this.hasClickedShowMedia=!0:twttr.media.setViewMediaCookie(),a.stopPropagation()});this.$node.find(".display-this-media").click(c),this.$node.find(".always-display-media").click(function(a){twttr.currentUser.updateViewPossiblySensitive(!0,{success:function(){twttr.showMessage(_("Your media display settings have been changed.")),c(a)},error:function(a){twttr.showError(_("Couldn't set inline media settings."))}})})}}),a(twttr.components.Media)})}),provide("components/ProfilePane",function(a){using("mixins/userActionable",twttr.isT1?["mixins/userUpdateable","mixins/profilePopupActionable"]:[]).as(function(b){var c=twttr.klass("twttr.components.ProfilePane").subclassOf(twttr.components.Base).initializer(function(a){this.user=a,this.renderPane(),twttr.loggedIn&&this.$node.append((new twttr.components.ProfileActions(this.user,undefined,!0)).$node),this.hasRendered()}).methods({renderPane:function(){var a=new twttr.views.ProfilePane(this.user);a.render(this.$node)},renderStats:function(){var a=new twttr.views.MiniProfileStats(this.user);a.render(this.$node.find(".js-mini-profile-stats"),"replaceWith")}});twttr.isT1&&c.mixin(b.mixins.userActionable,b.mixins.userUpdateable,b.mixins.profilePopupActionable).initializer(function(a){var b=this,c=a.impressionId;this.user=a,this.renderPane(),this.registerUserActionEvents(),twttr.loggedIn&&(this.registerUserUpdateEvents(this.user),this.bind("userUpdated",function(a,d){b.user=d,c&&(b.user=twttr.API.util.PromotedStore.getPromotedUserInstance(b.user,c)),b.renderStats()})),this.hasRendered()}).methods({renderPane:function(){var a=this;this.getRelationship(this.user,function(b,c){a.updateUserAttributesFromRelationship(b);var d=new twttr.views.ProfilePane(a.user);d.render(a.$node),a.showFollowOrUnfollow(a.user),twttr.helpers.canViewUser(a.user)&&a.showMiniSocialProof(a.user),a.renderUserProfileMenu(a.$find(".js-follow-combo"),a.$find(".js-action-profilemenu"),c)})}}),a(c)})}),provide("components/JapaneseAd",function(a){using("constants").as(function(b){twttr.klass("twttr.components.JapaneseAd").subclassOf(twttr.components.Base).initializer(function(){if(twttr.components.JapaneseAd.shouldBeHidden()){this.$node.hide();return}(new twttr.views.JapaneseAd).render(this.$node,"append");if(twttr.decider.isAvailable("japanese_new_ad_provider"))this.constructor.getJapanAd()?this.constructor.refreshAds():this.constructor.createIframeAd(this.$node);else if(!this.constructor.loadedOnce){this.constructor.loadedOnce=!0;var a="loadedJsCallBack"+parseInt(Math.random()*1e5,10);twttr.components.JapaneseAd.callbacks[a]=function(b){delete twttr.components.JapaneseAd.callbacks[a],twttr.components.JapaneseAd.loadedJsCallback(b)},$.ajax({cache:!0,url:window.location.protocol+b.constants.japaneseAdUrl+a,dataType:"script"})}else this.constructor.refreshAds()}).statics({shouldBeHidden:function(){var a=["japan_olympic","akiko_lawson","docomo","mhamura","warnerjp","aquarius_sports"];return twttr.pageLocale!=="ja"||twttr.app.currentPageName()==="profile"&&$.inArray(twttr.profileUser.screenName.toLowerCase(),a)!=-1},callbacks:{},loadedJsCallback:function(a){this.etologyAdSrc=a[0];if(typeof renderAd=="function"){var b=renderAd;renderAd=function(a){document.getElementById(a.spaceTag)&&b.apply(this,arguments)}}this.refreshAds()},createIframeAd:function(a){$(a).append($('<iframe id="j_ad" src="'+b.constants.japaneseAdIframeUrl+'" width="300" height="185" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>')),trackClient({component:"japanese_ad",action:"impression"},{url:b.constants.japaneseAdIframeUrl})},getJapanAd:function(){return $("#j_ad")[0]},refreshAds:function(){var a="t="+(new Date).getTime();twttr.decider.isAvailable("japanese_new_ad_provider")?this.getJapanAd()&&($("#j_ad").attr("src",b.constants.japaneseAdIframeUrl+"&"+a),trackClient({component:"japanese_ad",action:"refresh"},{url:b.constants.japaneseAdIframeUrl})):this.etologyAdSrc&&(trackClient({section:"dashboard",component:"japanese_ad",action:"refresh"},{url:this.etologyAdSrc}),_scribble("japanese-ad-refresh",{adSource:this.etologyAdSrc}),$.getScript(this.etologyAdSrc+"?"+a))}}).deciderKey("japanese_ad_component"),a(twttr.components.JapaneseAd)})}),provide("components/ProtectedUser",function(a){using().as(function(b){twttr.klass("twttr.components.ProtectedUser").subclassOf(twttr.components.Base).initializer(function(a){(new twttr.views.ProtectedUser(a)).render(this.$node,"append")}),a(twttr.components.ProtectedUser)})}),provide("components/TweetStats",function(a){using().as(function(b){var c=twttr.klass("twttr.components.TweetStats").subclassOf(twttr.components.Base).initializer(function(a,b,c){this.maxUsersToShow=b;var d=this;a.summary(function(b){d.shouldRender(b)&&($.extend(b,{screen_name:a.user.screenName,id:a.id,retweeters_length:b.retweeters.length,favoriters_length:b.favoriters.length,has_retweets:!!parseInt(b.retweeters_count,10),has_favorites:!!parseInt(b.favoriters_count,10)}),(new twttr.views.TweetStats(b)).render(d.$node,"append"),d.$node.closest(".js-stream-tweet").addClass("with-social-proof"),d.getFacePile(b),c&&c())})}).methods({shouldRender:function(a){return a.retweeters.length+a.favoriters.length>0},getFacePile:function(a){var b=this,c=twttr.util.arrayUniq(a.retweeters.concat(a.favoriters));c=c.slice(0,this.maxUsersToShow),twttr.API.User.findAll(c,function(a){var d={};a.each(function(a){d[a.id]=a});var e=new twttr.anywhere.api.util.BaseCollection($.map(c,function(a){return d[a]})),f=e.map(function(a){return new twttr.views.BaseUser(a)});(new twttr.views.FacePile({users:f.array})).render(b.$find(".js-face-pile-container"),"append"),b.$node.closest(".js-stream-tweet").addClass("with-social-proof"),b.$find(".js-user-tipsy").tipsy({gravity:"s"})})}}).deciderKey(function(){return twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_status_summary")});a(c)})}),provide("components/PermalinkTweet",function(a){using().as(function(b){twttr.klass("twttr.components.PermalinkTweet").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet,twttr.mixins.userActionable,twttr.mixins.profilePopupActionable).initializer(function(a){this.view=new twttr.views.SingleTweet(a),this.view.render(this.$node,"append"),this._tweetId=a.id,this.registerTweetActionEvents(),this.updateI18nDisplay(),this.hasRendered(),this.scribeComponentName="tweet";if(twttr.isT1){var b=twttr.loggedIn?"TweetStats":"Retweeters",c=new twttr.components[b](a,9);this.$find("div.js-tweet-stats-container").append(c.$node)}this.registerUserActionEvents()}).methods({renderWithheld:function(){return this.view.render_withheld()},renderCreatorWithheld:function(){return this.view.is_withheld()&&this.view.is_current_user()},faveTweet:function(a){this.tweetActionFavorite(this.$find(".tweet"),a)},replyTweet:function(a){this.tweetActionReply(this.$find(".tweet"),a)},retweetTweet:function(a){this.tweetActionRetweet(this.$find(".tweet"),a)},onTweetActionDelete:function(a){a===this._tweetId&&this.trigger("deleted")}}).click({"img.user-profile-link":function(a,b){this.trigger("avatar_click.tweet",[b.closest(".js-actionable-tweet"),"avatar",b])},".tweet-user-block-screen-name":function(a,b){this.trigger("screen_name_click.tweet",[b.closest(".js-actionable-tweet"),"screen_name",b])},".stats .js-stat-count a":function(a,b){a.stopPropagation(),a.preventDefault()}}),a(twttr.components.PermalinkTweet)})}),provide("components/NoUserExists",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.NoUserExists").subclassOf(twttr.components.Base).initializer(function(){this.$node.append("<p class='no-user tweet-text tweet-text-large'>"+_("This user does not exist.")+"</p>"),this.hasRendered()}),a(twttr.components.NoUserExists)})}),provide("components/SignupCallOut",function(a){using().as(function(b){twttr.klass("twttr.components.SignupCallOut").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{};var c;if(b.profileUser){var d=twttr.merge({signup_source:a},b.profileUser.attributes);a=="permalink"?c=new twttr.views.PermalinkSignupCallOut(d):c=new twttr.views.ProfileSignupCallOut(d)}else c=new twttr.views.NewSignupCallOut({signup_source:a,query:b.query});c.render(this.$node.empty(),"append"),this.$node.delegate("form.signup-btn","submit",function(){trackClient({section:"signup_callout",component:"form",action:"signup_click"})});if(b.profileUser||twttr.isT1){var e=this.$find("form");twttr.helpers.addFormEvents(e),twttr.helpers.addHoldingInputEvents(e)}this.$node.delegate(".profile-subpage-call-out-button","click",function(){trackClient({section:"signup_callout",component:"discover_link",action:"click"},{profile_id:twttr.profileUser.id,context:"profile"})}),this.hasRendered()}),a(twttr.components.SignupCallOut)})}),provide("components/SuggestionCategoriesList",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.SuggestionCategoriesList").subclassOf(twttr.components.Base).initializer(function(a,b,c){var d=this.categoriesToLinks(a,b,c);(new twttr.views.LinkList(d,"&middot;")).render(this.$node,"append"),this.$find("ul").addClass("categories-list")}).mixin(twttr.mixins.discoveryHelper).methods({categoriesToLinks:function(a,b,c){var d=this;return a?a.map(function(a,e){var f={text:a.name};if(c==a.slug)return f;var g=d.pagePathFor(b,"InterestsCategory",{category:a.slug});return twttr.merge(f,{href:g})}).array:[]}}),a(twttr.components.SuggestionCategoriesList)})}),provide("components/ContactImportMatchesStats",function(a){using().as(function(b){twttr.klass("twttr.components.ContactImportMatchesStats").subclassOf(twttr.components.Base).initializer(function(a,b){var c=a.customHeaderView||"ContactImportMatchesStats";(new twttr.views[c](b)).render(this.$node,"append"),this.$node.delegate(".js-action-follow-all","click",function(b){a._followAll($(this)),b.preventDefault()}),this.$node.delegate(".save-as-list","click",function(b){a._saveAsList($(this)),b.preventDefault()}),this.$node.delegate(".invite-contacts","click",function(b){a.inviteOthers(),b.preventDefault()})}),a(twttr.components.ContactImportMatchesStats)})}),provide("components/media/Base",function(a){using().as(function(b){twttr.klass("twttr.components.media.Base").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.options=a,this.size=a.size||"medium",this.count=this.count||a.count||100,this.offset=this.offset||a.offset||0,this.score=a.score||!0,this.isDataReady=!1,this._urls=[]}).methods(twttr.EventProvider).methods({render:function(){throw new Error("You should implement this.")},dataReady:function(a,b){this._urls=a,this.isDataReady=!0,this.trigger("urlsLoaded",[this._urls,!!b])}}),a(twttr.components.media.Base)})}),provide("components/media/profile",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.media.profile.Images").subclassOf(twttr.components.media.Base).initializer(function(a){var b=this;this._superInitializer.apply(this,arguments),this.user=a.user,this.provider=new twttr.media.provider.UserMedia({user:this.user}),this.options=a||{},this._fetchedMedia=null,this.viewTemplate=twttr.views.FacetMedia,this.filter=a.filter||function(){return!0},this.thumbnailViewerOptions=$.extend({},{width:340,itemWidth:83,itemHeight:83,itemDisplayWidth:85,generateItemHref:function(a){return twttr.router.userMediaSlideshowPath({screen_name:b.user.screenName})+"?url="+encodeURIComponent(a)}},this.options),this.noSpacer=!!this.options.noSpacer}).methods({fetchImages:function(){var a=this;this.provider.fetch({count:this.count,page:this.offset,filter:this.filter,success:function(b){a._fetchedMedia=b;var c=!1;a.dataReady($.map(b,function(a){return c=c||a&&a.tweet&&a.tweet.possiblySensitive,a.url}),c)}})},render:function(){var a=this;if(!this.isDataReady)return;var b=4,c=this._urls.length>b;this.viewAllHref=twttr.router.userMediaGridPath({screen_name:a.user.screenName});if(this._urls.length>0){var d=(new this.viewTemplate({title:_("Recent images"),view_all_href:this.viewAllHref,show_view_all:c})).$html();this.$node.append(d),this.thumbnailViewer=new twttr.components.ThumbnailViewer(this._urls,this.thumbnailViewerOptions,this._fetchedMedia),this.thumbnailViewer.renderWithIndex(0),this.thumbnailViewer.bind("nextPage prevPage",function(a,b){trackClient({section:"dashboard",component:"photos_user_media",action:"page"},{event_info:"photos",cursor_or_page:b,profile_id:twttr.profileUser&&twttr.profileUser.id})}),this.thumbnailViewer.bind("allFailed",function(){a.trigger("failed")}),this.$find(".js-media-images").replaceWith(this.thumbnailViewer.$node)}this.hasRendered()}}),a(twttr.components.media.profile)})}),provide("components/media/facets/Base",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Base").subclassOf(twttr.components.media.Base).initializer(function(a){this._superInitializer(a)}).methods(twttr.EventProvider).methods({render:function(){throw new Error("You should implement this.")}});a(c)})}),provide("components/media/facets/Media",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Media").subclassOf(twttr.components.media.facets.Base).methods({render:function(){var a=this;if(!this.isDataReady)return;var b=a._type==="images"?4:3,c=this._urls.length>b;if(this._urls.length>0){var d=(new this.viewTemplate({title:this.title,view_all_href:!twttr.isT1||c?this.view_all_href:this.view_slideshow_href,show_view_all:c})).$html();this.$node.append(d);var e={imageSize:this.imageSize,cacheSize:this.cacheSize,width:340,itemWidth:this.itemWidth||83,itemHeight:this.itemHeight||83,itemDisplayWidth:this.itemDisplayWidth||85,delayLoading:!0,generateItemHref:function(b){return twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:a._type==="images"?"photos":a._type})+"?url="+encodeURIComponent(b)},containsVideos:a._type!=="images"?!0:!1};twttr.isT1&&twttr.aug(e,twttr.components.Media.dashboardThumbnailOptions),this.thumbnailViewer=new twttr.components.ThumbnailViewer(this._urls,e),this.thumbnailViewer.renderWithIndex(0),this.thumbnailViewer.bind("nextPage prevPage",function(b,c){var d=a._type=="images"?"photos":a._type;trackClient({section:"dashboard",component:d+"_search_facets",action:"page"},{event_info:d,query:a.options.query,page_or_cursor:c})}),this.thumbnailViewer.bind("failedToLoad",function(c,d){var e=$.inArray(d,a._urls);e>-1&&a._urls.splice(e,1),a._urls.length<=b&&a.hideViewAll()}),this.thumbnailViewer.bind("allFailed",function(){a.trigger("failed")}),this.$find(".js-media-images").replaceWith(this.thumbnailViewer.$node)}this.afterRender(),this.hasRendered()},hideViewAll:function(){this.$find(".view-all-link").remove()},afterRender:function(){},viewTemplate:twttr.views.FacetMedia});a(c)})}),provide("components/media/facets/Images",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Images").subclassOf(twttr.components.media.facets.Media).initializer(function(){var a=this;this.title=_("Top images"),this._type="images",this._superInitializer.apply(this,arguments),this.view_all_href=twttr.router.searchFacetsGridPath({query:a.options.query,mode:"photos"}),this.view_slideshow_href=twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:"photos"}),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"photos_search_facets",action:"view_all"},{query:a.options.query,event_info:"photos"}),scribble("facets_view_all_click",{mode:"images",query:a.options.query,userId:twttr.currentUser?twttr.currentUser.id:null})}),this.$node.delegate(".media-thumbnail","click",function(b){trackClient({section:"dashboard",component:"photos_search_facets",action:"click"},{query:a.options.query,event_info:"photos",url:$(this).attr("data-url")})}),twttr.SearchAPI.getImageFacets(this.options.query,{experimentId:this.options.expId,count:100,success:function(b){var c=$.map(b,function(a){return a.url});a.dataReady(c,!1)}})}).methods({scribeComponentName:"photos_search_facets"}).deciderKey("phoenix_facets_images");a(c)})}),provide("components/media/facets/Videos",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Videos").subclassOf(twttr.components.media.facets.Media).initializer(function(){var a=this;this.itemWidth=112,this.itemDisplayWidth=114,this.title=_("Top videos"),this._type="videos",this._superInitializer.apply(this,arguments),this.view_all_href=twttr.router.searchFacetsGridPath({query:a.options.query,mode:"videos"}),this.view_slideshow_href=twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:"videos"}),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"videos_search_facets",action:"view_all"},{query:a.options.query,event_info:"videos"})}),this.$node.delegate(".media-thumbnail","click",function(b){trackClient({section:"dashboard",component:"videos_search_facets",action:"click"},{query:a.options.query,event_info:"videos",url:$(this).attr("data-url")})}),twttr.SearchAPI.getVideoFacets(this.options.query,{experimentId:this.options.expId,count:100,success:function(b){var c=$.map(b,function(a){return a.url});a.dataReady(c,!1)}})}).methods({scribeComponentName:"videos_search_facets"}).deciderKey("phoenix_facets_videos");a(c)})}),provide("components/ThumbnailViewer",function(a){using("constants").as(function(b){var c=twttr.klass("twttr.components.ThumbnailViewer").subclassOf(twttr.components.Base).initializer(function(a,b,c){b?(this.imageSize=b.imageSize||this.imageSize,this.cacheSize=b.cacheSize||this.cacheSize,this.itemWidth=b.itemWidth||60,this.itemHeight=b.itemHeight||60,this.itemDisplayWidth=b.itemDisplayWidth||this.itemWidth,this.itemDisplayHeight=b.itemDisplayHeight||this.itemHeight,this.containsVideos=b.containsVideos||!1,this.width=b.width||304,this.viewClass=b.viewClass||twttr.views.ThumbnailViewer,this.thumbnailViewClass=b.thumbnailViewClass||twttr.views.Thumbnail,this.scribbler=b.scribbler||twttr.Scribbler.clientEvent,this.noRender=b.noRender,this.atEnd=!1,this.firstVisibleIndex=0,twttr.is.def(b.fadeOutNav)?this.fadeOutNav=b.fadeOutNav:this.fadeOutNav=!0,this.generateItemHref=b.generateItemHref||function(a){return a}):this.scribbler=twttr.Scribbler.clientEvent,this.originalCount=a.length,this.urls=a,this.embeddedMedia=c,(new this.viewClass).render(this.$node,"append"),this.thumbSetup(),this._registerEventHandlers(),this.updatePageNavigation()}).methods({animateTo:function(a){a<0&&(a=0);var b=this.getFullyVisibleThumbsPerPage();this.firstVisibleIndex=a-a%b;var c=this.determineLeftPosition(a,b),d=Modernizr.csstransitions?"animateWithCss":"animate";twttr.isRTL?this.$thumbs[d]({right:-c},400,"swing"):this.$thumbs[d]({left:-c},400,"swing"),this.loadSurroundingImages(a,b),this.updatePageNavigation()},determineLeftPosition:function(a,b){var c=this.firstVisibleIndex*this.itemDisplayWidth,d=this.getThumbsWidth(),e=a*this.itemDisplayWidth,f=this.getThumbsVisibleWidth(),g=c+f-d;if(g>=0&&this.firstVisibleIndex>=b)c-=g,this.atEnd=!0;else{var i=d-e;this.atEnd===!0&&i<f?(c-=g,this.atEnd=!0,this.firstVisibleIndex=this.urls.length-b):this.atEnd=!1}return c},loadNextImages:function(a,b){if(this.noRender)return;this.$thumbs.children().slice(a,b).trigger("loadImage")},loadSurroundingImages:function(a,b){var c=a-b;c<0&&(c=0),this.loadNextImages(c,a+b*2)},thumbSetup:function(){this.$thumbs=this.$find(".js-thumbnail-viewer-images"),this.$container=this.$find(".js-thumbnail-viewer-container"),this.$thumbs.width(this.getThumbsWidth()),this.generateThumbs(this.urls)},getThumbsWidth:function(){return this.urls.length*this.itemDisplayWidth},getThumbsVisibleWidth:function(){return this.$container.width()||this.width},getThumbsPerPage:function(){return Math.ceil(this.getThumbsVisibleWidth()/this.itemDisplayWidth)},getFullyVisibleThumbsPerPage:function(){var a=this.getThumbsVisibleWidth()/this.itemDisplayWidth;return a-Math.floor(a)>.95?Math.ceil(a):Math.floor(a)},renderWithIndex:function(a){a=this.resetIndex(a),this.animateTo(a)},removeUrl:function(a){var b=$.inArray(a,this.urls);b!==-1&&(this.urls.splice(b,1),this.trigger("failedToLoad",a),this.updatePageNavigation()),this.urls.length==0&&this.trigger("allFailed")},selectByUrl:function(a){var b=$.inArray(a,this.urls);return b==-1?!1:(this.renderWithIndex(b),this._select(this.getThumbnailByUrl(a)),!0)},selectByIndex:function(a){a=this.resetIndex(a),this.renderWithIndex(a);var b=this.$thumbs.find(".media-thumbnail");this._select($(b[a]))},resetIndex:function(a){return a>this.urls.length?0:a},getThumbnailByUrl:function(a){return this.$thumbs.find(".media-thumbnail[data-url='"+a+"']").first()},generateThumbs:function(a){var c=this;if(a.length===0)return;var d=b.constants.imageSizes,e=$(),f={width:this.itemWidth,height:this.itemHeight,dimension:Math.max(this.itemWidth,this.itemHeight),size:this.itemWidth<80&&this.itemHeight<80?d.small:d.medium,scalingMode:"trim",delayLoading:!0,thumbnailViewClass:this.thumbnailViewClass,componentName:this._namespace.split(".").pop()};this.embeddedMedia?e=twttr.images.renderProviderMedia(this.embeddedMedia,f):e=twttr.images.renderMediaUrls(a,f);if(e.length){var g=this.getFullyVisibleThumbsPerPage(),i=0,j=0,k=g*2,l=k;function m(){i+j===l&&j<=g&&(c.loadNextImages(j,j+k),l+=k)}e.addClass("thumbnail-image-wrapper").bind("failedToResolve failedToLoad",function(a,b){var d=$(this).attr("data-url");twttr.images.scribeImageFailure(c.scribbler,"photos_thumbnails",d),c.removeUrl(d),$(this).remove(),i++,m()}).bind("loaded",function(){twttr.images.animateImageFadeIn($(this).find("img"),500),j++,m()}),e.append('<div class="thumbnail-active-border"><div class="thumbnail-active-border-inner"></div></div>'),twttr.isT1||e.append('<div class="media-play-button"></div>'),this.containsVideos&&e.addClass("video"),e.each(function(){var a=$(this);a.attr("href",c.generateItemHref(a.attr("data-url")))}),this.$thumbs.append(e)}},updateWidth:function(a){this.width=a||this.$node.width(),this.animateTo(this.getActiveThumbnail().index()),this.updatePageNavigation()},prevPage:function(){var a=this.getFullyVisibleThumbsPerPage();this.animateTo(this.firstVisibleIndex-a),this.trigger("prevPage",Math.round(this.firstVisibleIndex/a)+1)},nextPage:function(){var a=this.getFullyVisibleThumbsPerPage();this.animateTo(this.firstVisibleIndex+a),this.trigger("nextPage",Math.round(this.firstVisibleIndex/a)+1)},updatePageNavigation:function(){var a=this.$find(".thumbnail-viewer-prev");this.firstVisibleIndex===0?a.addClass("disabled"):a.removeClass("disabled");var b=this.$find(".thumbnail-viewer-next");this.atEnd===!0?b.addClass("disabled"):b.removeClass("disabled");var c=this.$find(".thumbnail-viewer-nav");this.getFullyVisibleThumbsPerPage()>=this.urls.length?c.hide():c.css("display","")},deselect:function(){this.$node.find(".media-thumbnail").removeClass("media-thumbnail-active")},_select:function(a){if(a.length===0)return;this.deselect(),a.addClass("media-thumbnail-active"),this.selectedUrl=a.attr("data-url"),this.trigger("select",[{url:this.selectedUrl,index:a.prevAll().length+1,hasPrev:a.prev().length>0,hasNext:a.next().length>0}])},prev:function(){this.shiftOne("prev")},next:function(){this.shiftOne("next")},shiftOne:function(a){var b=this.getActiveThumbnail()[a]();b.length>0&&(this._select(b),this.trigger(a,[b.prevAll().length+1]),twttr.router.routeTo(b.attr("href")))},getActiveThumbnail:function(){return this.$find(".media-thumbnail-active")},_registerEventHandlers:function(){var a=this;this.$node.delegate(".media-thumbnail","click",function(b){a._select($(this))}),this.$node.delegate(".thumbnail-viewer-prev","click",function(b){a.prevPage()}),this.$node.delegate(".thumbnail-viewer-next","click",function(b){a.nextPage()});if(this.fadeOutNav){this.$nav=this.$find(".thumbnail-viewer-nav").css("opacity",0);var b=Modernizr.csstransitions?"animateWithCss":"animate";this.$node.hover(function(){a.fadeTimer&&clearTimeout(a.fadeTimer),a.$nav[b]({opacity:1},400,"swing")},function(){a.fadeTimer=window.setTimeout(function(){a.$nav[b]({opacity:0},400,"swing")},200)})}}});a(c)})}),provide("components/TheGrid",function(a){using("constants").as(function(b){twttr.klass("twttr.components.TheGrid").subclassOf(twttr.components.Base).initializer(function(a,b){(new twttr.views.TheGrid).render(this.$node,"append"),this.$grid=this.$find(".the-grid"),this.media=[],this.totalCount=0,this.imageWidth=a.imageWidth||150,this.imageHeight=a.imageHeight||150,this.margin=a.margin||10,this.chunksize=a.chunksize||100,this.gridCols=6,this.isEvent=a.isEvent||!1,this.generateItemHref=a.generateItemHref||$.noop,this.provider=a.provider,this.query=a.query,this.mode=a.mode,this.type=a.type,this.screenName=a.screenName,this.filter=a.filter,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.provider.fetch({count:100,score:!0,offset:0,mode:this.mode,query:this.query,is_event:this.isEvent,filter:this.filter,success:twttr.bind(this,this._loadMedia),error:twttr.bind(this,this.renderNoResults)}),this.setCols(b),this._registerEventHandlers()}).methods({setCols:function(a){var b=this.mode==="videos"?this._getWidthVideos(a):this._getWidthPhotos(a);this.$grid.width(b)},_getWidthPhotos:function(a){var b=960;return a>=640&&a<800?b=640:a>=800&&a<960&&(b=800),b},_getWidthVideos:function(a){var b=840;return a>=630&&a<840&&(b=630),b},decrementLoaded:function(){this.totalCount--,this.totalCount==0&&this.trigger("hideLoading")},_doLoad:function(a){var c=this,d=a.length,e=$(),f={width:this.imageWidth,height:this.imageHeight,size:b.constants.imageSizes.medium,scalingMode:"trim",componentName:this._namespace.split(".").pop()};a&&(e=twttr.images.renderProviderMedia(a,f)),e.length&&(e.addClass("grid-square").bind("failedToResolve failedToLoad",function(a,b){var e=$(this).attr("data-url");twttr.images.scribeImageFailure(c.scribbler,"photos",e),$(this).remove(),d--,d==0&&c.renderAndResolve(),c.decrementLoaded()}),this.mode=="videos"&&e.addClass("video").append('<div class="media-play-button"></div>'),e.each(function(){var a=$(this);a.attr("href",c.generateItemHref(a.attr("data-url")))}),e.bind("loaded",function(){d--,d==0&&c.renderAndResolve(),c.decrementLoaded(),twttr.images.animateImageFadeIn($(this).find("img"))}),this.mode=="videos"&&e.addClass("video").append('<div class="media-play-button"></div>'),this.$find(".the-grid").prepend(e))},renderAndResolve:function(){var a=this,b=this.media.splice(0,this.chunksize);b.length>0?this._doLoad(b):this.trigger("hideLoading")},_loadMedia:function(a){this.media=a,this.totalCount=this.media.length,this.$find(".the-grid").empty(),this.media.length>0?this.renderAndResolve():this.renderNoResults()},renderNoResults:function(){(new twttr.views.MediaGalleryNoResults({is_search:this.type==="search",is_usermedia:this.type==="userMedia",query:this.query,mode_photos:this.mode==="photos",mode_videos:this.mode==="videos",screen_name:this.screenName})).render(this.$find(".the-grid"),"append"),this.trigger("hideLoading")},_registerEventHandlers:function(){var a=this;setTimeout(function(){a.trigger("hideLoading")},1e4)}}),a(twttr.components.TheGrid)})}),provide("components/MediaGalleryControls",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.MediaGalleryControls").subclassOf(twttr.components.Base).initializer(function(a){this._options=a||{},this._eventId=a.eventId||!1,this._isEvent=!!this._eventId,this._type=a.type||"search",this._view=a.view||"grid",this._mode=a.mode||"photos",this._query=a.query||"",this.screenName=a.screenName,this._render(),this._registerEvents()}).methods({_registerEvents:function(){var a=this;this.$node.delegate(".media-gallery-back-nav","click",function(b){a.trigger("close")}),this.$detailView=this.$find(".toggle-button.detailview"),this.$gridView=this.$find(".toggle-button.gridview"),this.$detailView.bind("click",function(b){a.setMode("detail")}),this.$gridView.bind("click",function(b){a.setMode("grid")})},setMode:function(a){if(this._view==a)return;a=="grid"?(this.$gridView.addClass("selected"),this.$detailView.removeClass("selected"),this.trigger("gridViewSelected")):(this.$gridView.removeClass("selected"),this.$detailView.addClass("selected"),this.trigger("detailViewSelected")),this._view=a},_render:function(){(new twttr.views.MediaGalleryControls({is_search:this._type==="search",is_usermedia:this._type==="userMedia",screen_name:this.screenName,is_grid_view:this._view==="grid",is_detail_view:this._view==="detail",mode_photos:this._mode==="photos",mode_videos:this._mode==="videos",disable_grid:twttr.decider.isAvailable("disable_gallery_grid"),disable_thumbs:twttr.decider.isAvailable("disable_gallery_thumbs"),back_text:this._isEvent?_("Back to #{{event}}",{event:this._query}):_("Back to search results"),query:this._query})).render(this.$node,"append")}}),a(twttr.components.MediaGalleryControls)})}),provide("components/MediaSlideshow",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.components.MediaSlideshow").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.tweetFlagging,twttr.mixins.profilePopupActionable).initializer(function(a){var b=this;a=a||{},this._media=[],this.options=a,this.width=a.width||530,this.height=a.height||530,this.thumbContainerWidth=a.thumbContainerWidth||494,this.thumbHeight=a.thumbHeight||48,this.thumbWidth=a.thumbWidth||48,this.thumbDisplayWidth=a.thumbDisplayWidth||50,this.thumbDisplayHeight=a.thumbDisplayHeight||48,this.type=a.type,this.screenName=a.screenName,this.options.mode=this.options.mode||"photos",this.showFirstOnFail=this.options.showFirstOnFail||!1,this.arrowOutOpacity=twttr.decider.isAvailable("disable_gallery_thumbs")?.6:0,this.isEvent=a.isEvent||!1,this.generateItemHref=a.generateItemHref||$.noop,this.provider=a.provider,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.scribeComponentName=this.options.mode+"_tweet",this.render(),this.registerTweetActionEvents(),this.provider.fetch({count:100,score:!0,mode:this.options.mode,query:this.options.query,is_event:this.isEvent,filter:a.filter,success:function(a){b.addMedia(a),b.addMediaComplete()},error:twttr.bind(this,this.renderNoResults)})}).methods(twttr.EventProvider).methods({render:function(){(new twttr.views.MediaSlideshow).render(this.$node,"append"),this.$thumbnails=this.$find(".media-slideshow-thumbnails"),this.$bigPicture=this.$find(".media-slideshow-picture"),this.$bigPictureWrapper=this.$find(".media-slideshow-pictures"),this.$mediaContainer=this.$find(".media-slideshow-media-container"),this.$prevButton=this.$find(".media-control-button.prev"),this.$nextButton=this.$find(".media-control-button.next"),this.$nextButton=this.$find(".media-control-button.next"),this.$flagcontainer=$('<div class="flag-container"/>'),this.$bigPicture.css({height:this.height,width:this.width}),this._registerEventHandlers()},renderNoResults:function(){this.$node.empty(),(new twttr.views.MediaGalleryNoResults({is_search:this.type==="search",is_usermedia:this.type==="userMedia",query:this.options.query,mode_photos:this.options.mode==="photos",mode_videos:this.options.mode==="videos",screen_name:this.screenName})).render(this.$node,"append"),this.trigger("hideLoading")},addMediaComplete:function(){var a=this;if(this._media.length>1){var b={itemWidth:this.thumbWidth,itemHeight:this.thumbHeight,itemDisplayWidth:this.thumbDisplayWidth,itemDisplayHeight:this.thumbDisplayHeight,width:this.thumbContainerWidth,generateItemHref:this.generateItemHref,noRender:twttr.decider.isAvailable("disable_gallery_thumbs")};this.options.mode=="videos"&&(b.containsVideos=!0),this._thumbnailViewer=new twttr.components.ThumbnailViewer(this._mediaUrls(),b,this._media),this._thumbnailViewer.$node.appendTo(this.$thumbnails),twttr.decider.isAvailable("disable_gallery_thumbs")&&this._thumbnailViewer.$node.hide(),this._thumbnailViewer.bind("select",function(b,c){a.showPicture(a._findMedia(c.url,c.index),c.hasPrev,c.hasNext,c.index)}),this._thumbnailViewer.bind("failedToLoad",function(b,c){a.removeUrl(c)}),this._thumbnailViewer.bind("next prev",function(b,c){a.scribbler.scribe({component:a.options.mode,action:"page"},{cursor_or_page:c})}),this._thumbnailViewer.bind("nextPage prevPage",function(b,c){a.scribbler.scribe({component:a.options.mode+"_thumbnails",action:"page"},{cursor_or_page:c})}),this.selectUrl(this.options.url)}else this._media.length==1?this.showPicture(a._media[0],!1,!1,1):this.renderNoResults()},_registerEventHandlers:function(){var a=this;this.$nextButton.bind("click",twttr.bind(this,this.showNext)),this.$prevButton.bind("click",twttr.bind(this,this.showPrev)),this.$flagcontainer.delegate(".flaggable","click",function(b){a.flagLinkClicked(b,a.tweet)}),this.$nav=this.$find(".media-control-button").css("opacity",this.arrowOutOpacity);var b=Modernizr.csstransitions?"animateWithCss":"animate";this.$bigPictureWrapper.hover(function(){a.fadeTimer&&clearTimeout(a.fadeTimer),a.$nav[b]({opacity:.6},400,"swing")},function(){a.fadeTimer=window.setTimeout(function(){a.$nav[b]({opacity:this.arrowOutOpacity},400,"swing")},2e3)}),this.$nav=this.$find(".media-control-button").css("opacity",this.arrowOutOpacity),this.$bigPictureWrapper.mouseenter(twttr.bind(this,this._attachMouseMove)),this.$bigPictureWrapper.mouseleave(twttr.bind(this,this._detachMouseMove))},_mouseMoveHandler:function(){var a=this;clearTimeout(this.fadeOutTimer),this.fadeOutTimer=setTimeout(twttr.bind(this,this._fadeOutArrows),b.constants.slideshow.fadeOutArrowTimeout);if(this.fadeInTimer)return;this.fadeInTimer=setTimeout(function(){a._fadeInArrows(.6)},b.constants.slideshow.fadeInArrowTimeout)},_attachMouseMove:function(){var a=this;this.$bigPictureWrapper.bind("mousemove",twttr.bind(this,this._mouseMoveHandler)),a.fadeInTimer=setTimeout(function(){a._fadeInArrows(.6)},b.constants.slideshow.fadeInArrowTimeout)},_detachMouseMove:function(){this.$bigPictureWrapper.unbind("mousemove"),this.fadeInTimer&&(clearTimeout(this.fadeInTimer),this.fadeInTimer=undefined),this._fadeOutArrows()},_fadeInArrows:function(a){var c=Modernizr.csstransitions?"animateWithCss":"animate";this.$nav[c]({opacity:a},b.constants.slideshow.fadeAnimationTime,"swing"),clearTimeout(this.fadeInTimer),this.fadeInTimer=undefined},_fadeOutArrows:function(){var a=Modernizr.csstransitions?"animateWithCss":"animate";this.$nav[a]({opacity:this.arrowOutOpacity},b.constants.slideshow.fadeAnimationTime,"swing")},addMedia:function(a){this._media=this._media.concat(a)},_findMedia:function(a,b){var c=this._media[b-1];if(c&&c.url==a)return c;var d=this._mediaUrls(),e=$.inArray(a,d);return e>=0?this._media[e]:!1},_mediaUrls:function(){return twttr.map(this._media,function(a){return a.url})},selectUrl:function(a){a=a||this._mediaUrls()[0];var b=this._thumbnailViewer.selectByUrl(a);b||(this.showFirstOnFail?this._thumbnailViewer.selectByIndex(0):(this._showNotFound(a),this._thumbnailViewer.deselect(),this._thumbnailViewer.animateTo(0),this._updateArrows(!1,!1)))},removeUrl:function(a){for(var b=0;b<this._media.length;b++)if(this._media[b].url===a){this._media.splice(b,1);break}this.currentUrl===a&&(b==0&&this._mediaUrls().length?this._thumbnailViewer.selectByUrl(this._mediaUrls()[0]):this._showNotFound())},_showNotFound:function(a){this._resetMediaContainer(),(new twttr.views.MediaSlideshowNotFound({})).render(this.$mediaContainer,"append"),this.$mediaContainer.addClass("not-found"),this.trigger("hideLoading")},_resetMediaContainer:function(){return this._removeTweet(),this.$flagcontainer.detach(),this.$mediaContainer.css({top:null}).empty()},_updateArrows:function(a,b){a?this.$prevButton.addClass("enabled"):this.$prevButton.removeClass("enabled"),b?this.$nextButton.addClass("enabled"):this.$nextButton.removeClass("enabled")},showPicture:function(a,b,c,d){if(a&&this.currentUrl!=a.url){this.currentUrl=a.url,this.trigger("showSlideshowLoading"),this.$mediaContainer.removeClass("not-found"),this.options.mode=="photos"?this.renderPicture():this.renderVideo();if(this.tweetFlaggable(a.tweet)){this.$flagcontainer.html("<a href='#' class='flaggable'>"+_("Flag this media")+"</a>");var e=this.$flagcontainer.find(".flaggable");a.tweetId&&e.attr("tweet-id",a.tweetId)}}this._renderMedia(a),this._updateArrows(b,c),this.scribbler.scribe({component:this.options.mode+"_slide",action:"impression"},{url:a.url,cursor_or_page:d})},_removeTweet:function(){this.$find(".media-slideshow-tweet").empty().addClass("loading")},_renderMedia:function(a){var b=this;a.tweet&&a.tweet.entities?this._renderTweet(a.tweet,a.url):a.tweetId&&(this.tweetId=a.tweetId,twttr.API.Status.find(a.tweetId,{success:function(c,d){b._renderTweet(c,a.url)},error:function(){b.trigger("hideLoading")}}))},_renderTweet:function(a,b){this.tweet=a,this._removeTweet(),twttr.isT1?(a.attributes.is_slideshow=!0,(new twttr.views.SimpleTweet(a)).render(this.$find(".media-slideshow-tweet"),"append")):(new twttr.views.SlideshowTweet(a)).render(this.$find(".media-slideshow-tweet"),"append"),this.$find(".media-slideshow-tweet").removeClass("loading");var c=this,d=twttr.media.types.Twimg.matchers.twimg,e=twttr.media.types.Twimg.matchers.media;if(b&&(b.match(d)||b.match(e))&&a&&a.entities&&a.entities.media){var f=a.entities.media.length,g=b.split("/").pop().split(".")[0];for(var i=0;i<f;i++){var j=a.entities.media[i];if(j.display_url.indexOf(g)>=0||j.media_url.indexOf(g)>=0){c.$imageDiv.attr("href",j.url);break}}}this.scribbler.scribe({component:this.options.mode+"_tweet",action:"impression"},{url:a.url,item_ids:[a.id]}),this.trigger("hideTweetLoading")},renderVideo:function(){var a=this,c=twttr.media.matchInstance(this.currentUrl);this._resetMediaContainer();if(!c){this._showNotFound(this.currentUrl);return}c.process(function(){c.render(a.$mediaContainer),setTimeout(function(){a.trigger("mediaRendered"),a.trigger("hideMediaLoading"),a._renderAttribution(a.currentUrl)},1)},{maxwidth:b.constants.slideshow.videoMaxWidth})},renderPicture:function(){var a=this,c;this._resetMediaContainer();var d=twttr.filter(this._media,function(b){if(a.currentUrl==b.url)return b});d&&(d=[d[0]]),this.$imageDiv=twttr.images.renderProviderMedia(d,{width:this.width,height:this.height,size:b.constants.imageSizes.large,scalingMode:"fit",divMode:"snap",componentName:this._namespace.split(".").pop()}).bind("failedToResolve failedToLoad",function(b,c){var d=$(this).attr("data-url");twttr.images.scribeImageFailure(a.scribbler,"photos_slide",d),$(this).remove(),a._showNotFound(a.currentUrl)}).bind("loaded",function(){a.trigger("mediaRendered"),a.trigger("hideMediaLoading"),a._renderAttribution(a.currentUrl),a.renderTwimgAttribution()}).attr("target","_blank"),this.$mediaContainer.append(this.$imageDiv)},_renderAttribution:function(a){var b=twttr.media.matchInstance(a);if(b){var c=$("<div class='media-attribution-and-flag'/>"),d=$(b.attribution()).appendTo(c);if(this.tweetFlaggable(this.tweet)){var e=$(twttr.at(b._namespace).flagActionTemplate);this.$flagcontainer.html(e.html());var f=this.$flagcontainer.find(".flaggable");this.tweetId&&f.attr("tweet-id",this.tweetId),this.$flagcontainer.appendTo(c)}c.appendTo(this.$mediaContainer)}},renderTwimgAttribution:function(){var a=this,b=this.currentUrl.match(twttr.media.types.CopiedTwimg.matchers.media);if(b&&b[1]){var c=b[1];twttr.API.Status.find(c,function(b){var c=b.user.screenName,d=new twttr.views.CopiedTwimgAttribution({screen_name:c,time_ago:twttr.helpers.timeAgo(twttr.helpers.parseDateString(b.createdAt),!0)});a.$imageDiv.append(d.html()).find(".attribution-wrapper").css("display","none").fadeIn("fast"),a.$imageDiv.find(".user-profile-link").click(function(){return twttr.router.routeTo(twttr.router.profilePath({screen_name:c})),!1})})}},resizePicture:function(h,a){var b,c;this.$bigPicture.css({height:h,width:a});if(this.options.mode=="photos")twttr.images.resizeImageInDiv(this.$imageDiv,{width:a,height:h,size:"large",scalingMode:"fit",divMode:"snap"}),b=this.$imageDiv.find("img").width(),c=this._offset(h,this.$imageDiv.height());else{var d=this.$mediaContainer.children().first();b=d.width(),c=this._offset(h,d[0].height)}this.$mediaContainer.css({width:b,top:c})},_offset:function(a,b){return Math.max(0,Math.floor((a-b)/2))},showNext:function(){this._thumbnailViewer&&this._thumbnailViewer.next()},showPrev:function(){this._thumbnailViewer&&this._thumbnailViewer.prev()}}),a(twttr.components.MediaSlideshow)})}),provide("components/SearchFacets",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.SearchFacets").subclassOf(twttr.components.Base).initializer(function(a,b){this.query=a,this.shouldShowBlockMessage=!0,this.darkMode=!1;if(twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_facets_dark")||twttr.decider.isAvailable("phoenix_facets"))||!twttr.loggedIn&&twttr.decider.isAvailable("phoenix_facets_logged_out"))twttr.loggedIn&&!twttr.decider.isAvailable("phoenix_facets")&&twttr.decider.isAvailable("phoenix_facets_dark")&&(this.darkMode=!0),this.renderFacets()}).methods({renderFacets:function(){var a=this,b=twttr.Router.getCurrentQueryStringParams().experimentId;if(!this.darkMode){this.facetsImages=new twttr.components.media.facets.Images({query:this.query,expId:b}),this.facetsVideos=new twttr.components.media.facets.Videos({query:this.query,expId:b}),this.registerEventTracker(),this.facetsImages.bind("urlsLoaded",function(b,c){if(!c||c.length==0){a._scribeResults("photos",c);return}a.facetsImages.$node.appendTo(a.$node),a.shouldShowBlockMessage?a.showBlockedMessage():a.facetsImages.render(),a._scribeResults("photos",c)}),this.facetsImages.bind("failed",function(){a.facetsImages.$node.hide(),a._scribeResults("photos")}),this.facetsVideos.bind("urlsLoaded",function(b,c){if(!c||c.length==0){a._scribeResults("videos",c);return}a.facetsVideos.$node.appendTo(a.$node),a.shouldShowBlockMessage?a.showBlockedMessage():a.facetsVideos.render(),a._scribeResults("videos",c)}),this.facetsVideos.bind("failed",function(){a._scribeResults("videos"),a.facetsVideos.$node.hide()});if(twttr.loggedIn)a.shouldShowBlockMessage=!1,a.hideBlockedMessage();else{var c=twttr.media.getViewMediaCookie();c?(a.renderFacetsMedia(),a.shouldShowBlockMessage=!1):(a.shouldShowBlockMessage=!0,a.renderBlockedMessage())}}},renderFacetsMedia:function(){if(this.darkMode)return;this.facetsImages.render(),this.facetsVideos.render()},showBlockedMessage:function(){this.$notDisplayed||this.renderBlockedMessage(),this.$notDisplayed.show()},hideBlockedMessage:function(){this.$notDisplayed&&this.$notDisplayed.hide()},_scribeResults:function(a,b){var c=b&&b.length?"results":"no_results",d=a+"_search_facets";b=b||[],trackClient({section:"dashboard",component:d,action:c},{item_names:b.slice(0,4),item_count:b.length,event_info:a,query:this.query})},registerEventTracker:function(){function e(e,f){e?b=!0:c=!0,d=d||f&&f.length,allLoaded=b&&c,(b||c)&&a.trigger("urlsLoaded",[!!d,!!allLoaded])}var a=this,b=!1,c=!1,d=!1;this.facetsImages.one("urlsLoaded failed",function(a,b){e(!0,b)}),this.facetsVideos.one("urlsLoaded failed",function(a,b){e(!1,b)})},renderBlockedMessage:function(){var a=this;if(this.$notDisplayed||this.darkMode)return;(new twttr.views.FacetsMediaNotDisplayed).render(this.$node),this.$notDisplayed=this.$node.find(".facets-media-not-displayed"),this.$notDisplayed.hide();var b=twttr.bind(this,function(){this.renderFacetsMedia(),this.$notDisplayed.hide(),twttr.loggedIn||twttr.media.setViewMediaCookie()});this.$node.delegate(".display-this-media","click",b)}});a(c)})}),provide("components/FollowerRequestLink",function(a){using("_","components/Base","multiGlobals/more_views").as(function(b,_){var c=twttr.klass("twttr.components.FollowerRequestLink").subclassOf(b.components.Base).initializer(function(){twttr.currentUser&&twttr.currentUser["protected"]&&twttr.currentUser.friends.pending({success:twttr.bind(this,function(a){this.pendingFriendRequests=a,this.renderRequestButton()}),error:function(a){}}),this.noSpacer=!0,this.hasRendered()}).methods({renderRequestButton:function(){if(!this.pendingFriendRequests||this.pendingFriendRequests.length===0){this.destroy();return}var a;this.pendingFriendRequests.length===1?a=_("{{num}} new follower request",{num:this.pendingFriendRequests.length}):a=_("{{num}} new follower requests",{num:this.pendingFriendRequests.length}),(new twttr.views.DashboardFollowerRequestLink({button_label:a,screen_name:twttr.currentUser.screenName})).render(this.$node,"append")}});twttr.isT1&&c.setBaseView(twttr.views.Module),a(c)})}),provide("components/WebPersonalizationSettings",function(a){using("_","components/Base","mixins/userActionable","mixins/profilePopupActionable").as(function(b,_){var c=twttr.klass("twttr.components.WebPersonalizationSettings").subclassOf(b.components.Base).mixin(b.mixins.userActionable,b.mixins.profilePopupActionable).initializer(function(){var a=this;twttr.inEU||twttr.doNotTrack?(a._render({in_eu:twttr.inEU,do_not_track:!0}),a.trigger("disallow")):twttr.loggedIn?(a._hasAllowed=!1,a._render({loading:!0}),twttr.currentUser.personalizationSettings({success:function(b){!b.cookie_personalization_prompt_displayed||!b.use_cookie_personalization?a._render({show_results:!1}):(a._render({show_results:!0,results_loading:!0}),a._displayResults())},error:function(){twttr.showError(_("We can&#8217;t show you tailored suggestions at this time. Please try again later.")),a.trigger("disallow")}})):a._render({show_results:!1}),this.registerUserActionEvents()}).methods({_render:function(a){a=a||{},a.users&&(a.results=new twttr.views.WebPersonalizationResults(a.users)),(new twttr.views.WebPersonalizationSettings(a)).render(this.$node.empty())},_allow:function(){var a=this;a._render({show_results:!0,results_loading:!0}),a._hasAllowed=!0,this._updateSettings(!0,function(b){b?(twttr.showError(_("We&#8217;re not able to set your preference at this time. Please try again later.")),a._render({show_results:!1})):a._displayResults()})},_disallow:function(){var a=this;twttr.loggedIn?twttr.showError(_("Thanks. We&#8217;ve set your preference. This will go into effect on other browsers once you log into Twitter on that browser.")):twttr.showMessage(_("Thanks. We&#8217;ve set your preference.")),a._render({show_results:!1}),this._updateSettings(!1,function(b){b?(twttr.showError(_("We&#8217;re not able to set your preference at this time. Please try again later.")),a._render({show_results:a._hasAllowed,results_loading:!a._users,users:a._users})):a.trigger("disallow")})},_displayResults:function(){var a=this;this._render({show_results:!0,results_loading:!0}),twttr.API.User.recommendedUsers2({personalized:!0,force_bq:!0,limit:60,success:function(b,c){var d=b.map(function(a){return a.user});a._users=d,a._render({users:d,show_results:!0}),trackClient({component:"user_recommendations",element:"initial",action:"results"},{item_count:d.length()||0}),d.length()||trackClient({component:"user_recommendations",element:"initial",action:"no_results"},{item_count:0})},error:function(){twttr.showError(_("We can&#8217;t show you tailored suggestions at this time. Please try again later."))}})},_updateSettings:function(a,b){twttr.loggedIn?twttr.currentUser.updatePersonalizationSettings({use_cookie_personalization:a,cookie_personalization_prompt_displayed:!0},{error:function(){b("error :(")},complete:function(){b()}}):a?b():$.ajax({type:"POST",dataType:"json",url:"/account/turn_off_cookie_personalization.json",data:{authenticity_token:twttr.API.getConfig().postAuthenticityToken},complete:function(){b()},error:function(){b("error :(")}})}}).click({".js-web-personalization-allow":function(a,b){this._allow(),trackClient({element:"allow",action:"click"})},".js-web-personalization-disallow":function(a,b){this._disallow(),trackClient({element:"disallow",action:"click"})},".js-web-personalization-turnoff":function(a,b){this._disallow(),trackClient({element:"turnoff",action:"click"})},".js-web-personalization-signup .signup-btn":function(a,b){trackClient({section:"signup_callout",component:"form",action:"signup_click"})}});a(c)})}),provide("photo/turkey",function(a){using().as(function(b){twttr.provide("twttr.turkey",{tweetBoxId:1,imageMaxDim:2048,turkeyCallbacks:{},swfCallbacks:{},swfErrorCallbacks:{},swfPath:"/phoenix/flash/PhotoHelper.swf",swfPreloaded:!1,errorTypes:{tooLarge:"tooLarge",notImage:"notImage",ioError:"ioError",maxFiles:"maxFiles",dupe:"duplicate"},getTweetBoxId:function(){return twttr.turkey.preloadSwf(),"tweetbox_"+this.tweetBoxId++},getFileName:function(a){if(a.indexOf("/")==-1&&a.indexOf("\\")==-1)return a;var b=a.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/);return b[2]},validatePhoto:function(a){return/(.*)\.(jpg|jpeg|png|gif)/i.test(a)},getThumbnailOffsets:function(h,a,b){var c={};if(a==h)return{height:b,width:b,left:0,top:0};if(h<b||a<b)h<b&&a<b?(c.top=(b-h)/2,c.left=(b-a)/2):a>h?c.top=(b-h)/2:c.left=(b-a)/2;else if(a>h){var d=b/h*a;c={height:b,width:d,left:-(d-b)/2,top:0}}else if(h>a){var e=b/a*h;c={height:e,width:b,top:-(e-b)/2,left:0}}return c},hasFileReader:function(){try{return twttr.is.object(new FileReader)}catch(a){return!1}},resizeImage:function(a,b){var c=new FileReader;c.onerror=function(){b(!1)},c.onload=function(a){var c=new Image,d=document.createElement("canvas"),e=d.getContext("2d");c.onload=function(){if(c.width<twttr.turkey.imageMaxDim&&c.height<twttr.turkey.imageMaxDim){b(a.target.result.split(";base64,")[1]);return}var f,h;c.width>c.height?(f=twttr.turkey.imageMaxDim,h=c.height/c.width*twttr.turkey.imageMaxDim):(h=twttr.turkey.imageMaxDim,f=c.width/c.height*twttr.turkey.imageMaxDim),d.width=f,d.height=h,e.drawImage(c,0,0,f,h);var g=d.toDataURL("image/jpeg");b(g.split("data:image/jpeg;base64,")[1])},c.onerror=function(){b(!1)},c.src=a.target.result},c.readAsDataURL(a)},hasFlash:function(){try{return $.flash.available&&$.flash.hasVersion(10)}catch(a){return!1}},shouldUseFlash:function(){return!twttr.turkey.hasFileReader()&&twttr.turkey.hasFlash()&&twttr.decider.isAvailable("phoenix_turkey_flash")},tweetboxMode:function(){return twttr.turkey.hasFileReader()?"html5":twttr.turkey.shouldUseFlash()?"flash":"html4"},preloadSwf:function(){if(twttr.turkey.swfPreloaded||!twttr.turkey.shouldUseFlash())return;$node=twttr.turkey.loadSwf($("#flash-object-container"),0),setTimeout(function(){$node&&$node.remove()},1e3)},loadSwf:function(a,b){return a.flash({swf:twttr.turkey.swfPath,height:25,width:28,wmode:"transparent",AllowScriptAccess:"sameDomain",flashvars:{tweetBoxId:b}}),a.find("object")},shouldShowTurkeyPrompt:function(){return twttr.promptbird.getPromptByFormat(["modal"])},dismissShowTurkeyPrompt:function(a){var b={prompt_id:a},c={success:$.noop};twttr.API.Promptbird.dismissPrompt(b,c),delete twttr.promptbird.cache},showFirstTimeTurkey:function(){if(twttr.loggedIn){var a=this;using("boot/bootstrap_data",function(b){var c=a.shouldShowTurkeyPrompt();if(c&&c.prompt.format==="modal"&&c.prompt.template_name=="first_time_turkey"){a.dismissShowTurkeyPrompt(c.prompt.prompt_id);var d=600,e=new twttr.widget.Dialog({view:"FirstTimeTurkey",modal:!0,draggable:!1,css:{width:530},positioning:{top:twttr.$win.height()<=d?20:150}});e.$container.find(".button.ok-thanks").bind("click",function(a){a.preventDefault(),a.stopPropagation(),e.destroy()}),e.open()}})}}}),a(twttr.turkey)})}),provide("photo/photo_thumbnails",function(a){using("_").as(function(b,_){twttr.klass("twttr.turkey.PhotoThumbnails").subclassOf(twttr.components.Base).deciderKey("turkey").initializer(function(a,b,c,d){this.FILE_SIZE_LIMIT=3145728,this.TIMEOUT_BY_BYTES=10240,this.defaultTimeoutDelay=12e4,this.timeoutDelay=this.defaultTimeoutDelay,this.maxFiles=1,this.useIframe=!1,this.enabled=!0,this.files=[],this.$selectedFiles=b,this.$camera=c,this.$swf=this.$camera.find(".swf"),this.tweetBoxId=d,this.editor=a,this.$thumbsWrapper=$("<div/>").addClass("twitter-media-thumbs"),this.$thumbsWrapper.appendTo(this.editor.$container),this.thumbnailsMessage=_("Images will appear as links"),this.thumbnailMessage=_("Image will appear as a link"),this.$thumbnailMessage=$("<div/>").addClass("media-thumbnails-message"),this.$thumbnailMessage.appendTo(this.$thumbsWrapper),this.maxPhotosMessage=_("Maximum number of images reached."),this.addPhotoMessage=_("Add an image"),this.hasFileReader=twttr.turkey.hasFileReader(),this.shouldUseFlash=twttr.turkey.shouldUseFlash(),this.html4Mode=!this.hasFileReader&&!this.shouldUseFlash,this.$editorTextarea=this.editor.$container.find("textarea"),this.textareaPaddingBottom=this.$editorTextarea.css("padding-bottom"),this.createThumbnails(),this.createTipsy()}).methods(twttr.EventProvider).methods({animateShow:function(a){var b=this;this.html4Mode?(this.$editorTextarea.css("padding-bottom",a),this.editor.$container.addClass("has-thumbnails"),this.$camera.addClass("has-turkeys"),this.$thumbsWrapper.show()):(this.$camera.addClass("has-turkeys"),this.$editorTextarea.animate({paddingBottom:a},300,"linear",function(){b.editor.$container.addClass("has-thumbnails"),b.$thumbsWrapper.show()}))},animateHide:function(a,b){var c=this;this.editor.$container.removeClass("has-thumbnails").addClass("closing"),!this.html4Mode&&!b?(this.$camera.removeClass("has-turkeys"),this.$editorTextarea.animate({paddingBottom:a},200,"linear",function(){c.editor.$container.removeClass("has-thumbnails").removeClass("closing")})):(this.$editorTextarea.css("padding-bottom",a),this.$camera.removeClass("has-turkeys")),this.$thumbsWrapper.hide()},updateEmptyFeedback:function(){this.inst.$feedback.text()==""&&this.updateFeedback()},tweet:function(a,b){var c=this,d={};this.useIframe&&(d.iframe_callback="window.top.twttr.turkey.turkeyCallbacks."+this.tweetBoxId);switch(a){case"update":d.status=b[0],$.extend(d,b[1]);break;case"reply":d.status=b[1],d.in_reply_to_status_id=b[0],$.extend(d,b[2])}this.useIframe?this.tweetIframe(d):this.tweetAjax(d)},tweetAjax:function(a){var b=this;a["media_data[]"]=this.files[0].input.val(),a.timeout=$.noop;var c=a.error;a.error=function(a){c(a),b.scribeEvent("failure",{message:"serverError"})};var d=a.success;a.success=function(a){d(a,twttr.turkey.tweetboxMode())},twttr.API.Status.updateWithMedia(a.status,a)},tweetIframe:function(a){var b=this,c=setTimeout(function(){twttr.turkey.turkeyCallbacks[b.tweetBoxId]=$.noop,a.error({error:!0,response:{error:"Tweeting a photo timed out."}}),a.complete(),b.scribeEvent("failure",{message:"timeout",duration_ms:b.timeoutDelay})},this.timeoutDelay);twttr.turkey.turkeyCallbacks[this.tweetBoxId]=function(d){if(d.error){var e={error:!0,status:500,response:d,reason:"An error occured"};a.error(e),a.complete(),clearTimeout(c),b.scribeEvent("failure",{message:"serverError"})}else a.success(d,twttr.turkey.tweetboxMode()),a.complete(),clearTimeout(c)},this._submitTweetOptions(a)},_submitTweetOptions:function(a){this.resetForm();for(var b in a)!twttr.is.fn(a[b])&&!twttr.is.object(a[b])&&$('<input type="hidden" reset="true"/>').attr("name",b).attr("value",a[b]).appendTo(this.$selectedFiles);this.$selectedFiles.submit()},resetForm:function(){this.$selectedFiles.find("input[reset='true']").remove()},enable:function(){this.files.length>0&&this.animateShow(this.getPadding(this.files.length)),this.$camera.show(),this.enabled=!0},disable:function(){this.files.length>0&&this.animateHide(this.getPadding(0)),this.$camera.hide(),this.enabled=!1},hasItems:function(){return this.files.length>0&&this.enabled},count:function(){return this.files.length},hasDuplicate:function(a){for(var b=0;b<this.files.length;b++)if(this.files[b].input.value==a.value)return!0;return!1},getPadding:function(a){return a===0?this.textareaPaddingBottom:this.html4Mode?12+25*a+2*(a-1):60},checkFiles:function(){var a=this.files.length;a>=this.maxFiles?(this.$camera.addClass("max-turkeys"),this.editor.trigger("heightChange"),this.destroySwf()):(this.$camera.removeClass("max-turkeys"),this.editor.trigger("heightChange"),this.createSwf());var b=this.getPadding(a);a>0?(this.animateShow(b),a==1?this.$thumbnailMessage.text(this.thumbnailMessage):this.$thumbnailMessage.text(this.thumbnailsMessage)):this.animateHide(b),this.trigger("photoChanged")},removeAllFiles:function(){$.each(this.files,function(a,b){$(b.input).remove(),b.item.remove()}),this.files=[]},removeFile:function(a){var b=this;$(a.input).remove(),a.item.remove();var c=$.inArray(a,b.files);c!=-1&&b.files.splice(c,1),b.checkFiles(),this.scribeEvent("remove")},hasMaxFiles:function(){return this.files.length>=this.maxFiles},addFileError:function(a,b){this.killTipsy();if(a==twttr.turkey.errorTypes.tooLarge)twttr.showError(_("The file you selected is greater than the 3MB limit."));else if(a==twttr.turkey.errorTypes.notImage||a==twttr.turkey.errorTypes.ioError)twttr.showError(_("You did not select an image"));else if(a==twttr.turkey.errorTypes.maxFiles){var c;this.maxFiles===1?c=_("Can only tweet one image at a time."):c=_("Cannot tweet more than {{numberOfPhotos}} images at a time.",{numberOfPhotos:this.maxFiles}),twttr.showError(c)}else a==twttr.turkey.errorTypes.dupe&&twttr.showError(_("You already selected this file"));this.scribeEvent("failure",{message:a})},killTipsy:function(){this.$camera.data("tipsy")&&this.$camera.data("tipsy").$tip&&this.$camera.data("tipsy").$tip.hide()},scribeEvent:function(a,b){var c=b?b:{};c.context="photo_uploader",c.event_info=twttr.turkey.tweetboxMode(),trackClient({component:"tweetbox",action:a},c)},createThumbnailImage:function(a,b,c){var d=this,e=$("<img/>").attr("alt",a);return e.appendTo(c.item),e.bind("load",function(){var a=twttr.turkey.getThumbnailOffsets(e[0].height,e[0].width,55);e.css(a),c.item.find(".upload-file-close").bind("click",function(a){a.stopPropagation(),a.preventDefault(),d.removeFile(c)}),c.item[Modernizr.csstransitions?"animateWithCss":"animate"]({opacity:100},200,Modernizr.csstransitions?"default":"linear"),d.checkFiles()}),e.attr("src",b),e},createThumbnail:function(){var a;return this.html4Mode?a=$('<div class="upload-file upload-filename">        <span class="filename"></span><a href="#" class="thumbnail-close upload-file-close"><span></span></a>        </div>'):a=$('<div class="upload-file upload-thumbnail">        <a href="#" class="thumbnail-close upload-file-close"><span></span></a>        </div>').css({opacity:0}),a.appendTo(this.$thumbs),a},addFileItem:function(a,b){var c={input:a,item:b};return this.files.push(c),this.$selectedFiles.append(a),this.resetAddPhoto(),this.scribeEvent("add"),this.checkFiles(),c},addFileData:function(a,b,c){this.setTimeoutBySize(a.length);var d=$('<input type="hidden" maxlength="'+this.FILE_SIZE_LIMIT+'" name="media_data[]"/>');d.val(a);var e=this.createThumbnail(),f=this.addFileItem(d,e),g=this.createThumbnailImage(c,"data:image/jpeg;base64,"+b,f);this.killTipsy()},addFileInput:function(a){var b=this,c=this.createThumbnail(),d=this.addFileItem(a,c);if(this.hasFileReader&&a.files){var e=a.files[0];this.setTimeoutBySize(e.size);var f=new FileReader;f.onloadend=function(c){var e=c.target.result,f=b.createThumbnailImage(twttr.turkey.getFileName(a.value),e,d)},f.readAsDataURL(e)}else twttr.helpers.ellipsify(c.find(".filename").text(twttr.turkey.getFileName(a.value))),c.find(".upload-file-close").bind("click",function(a){a.stopPropagation(),a.preventDefault(),b.removeFile(d)}),this.inst&&this.inst.setFeedback(this.tweetboxFeedback)},addFile:function(a){var b=this;if(this.hasMaxFiles()){this.addFileError(twttr.turkey.errorTypes.maxFiles);return}if(!twttr.turkey.validatePhoto(a.value)){this.addFileError(twttr.turkey.errorTypes.notImage);return}if(this.hasDuplicate(a)){this.addFileError(twttr.turkey.errorTypes.dupe);return}var c;a.files&&a.files[0]&&(c=a.files[0]);var d=function(c){c?b.addFileData(c,c,twttr.turkey.getFileName(a.value)):b.addFileError(twttr.turkey.errorTypes.notImage)};if(c)if(!twttr.decider.isAvailable("phoenix_turkey_html5_resize")||!this.hasFileReader){if(!this.checkFileSize(c)){this.addFileError(twttr.turkey.errorTypes.tooLarge);return}this.useIframe=!0,this.addFileInput(a)}else twttr.turkey.resizeImage(c,d);else this.useIframe=!0,this.addFileInput(a);this.killTipsy()},checkFileSize:function(a){return!twttr.is.def(a.size)||a.size<=this.FILE_SIZE_LIMIT},getTimeoutBySize:function(a){var b=Math.ceil(a/this.TIMEOUT_BY_BYTES*1e3);return b<this.defaultTimeoutDelay?this.defaultTimeoutDelay:b},setTimeoutBySize:function(a){this.timeoutDelay=this.getTimeoutBySize(a)},resetPhotoPost:function(){this.useIframe=!1,this.$selectedFiles.empty();var a=twttr.API.getConfig().postAuthenticityToken;$('<input type="hidden" name="post_authenticity_token" value="'+a+'"/>"').appendTo(this.$selectedFiles),$('<input type="hidden" name="include_entities" value="true"/>').appendTo(this.$selectedFiles)},reset:function(){this.removeAllFiles(),this.$camera.removeClass("max-turkeys"),this.editor.trigger("heightChange"),this.animateHide(this.getPadding(0),!0),this.timeoutDelay=this.defaultTimeoutDelay},createThumbnails:function(){var a=this;this.$thumbs=$("<div class='media-thumbnails' />"),this.$thumbs.prependTo(this.$thumbsWrapper),this.html4Mode&&this.editor.$container.addClass("html4"),this.resetPhotoPost(),this.resetAddPhoto(),this.createSwf()},destroySwf:function(){if(!this.shouldUseFlash)return;this.$swf.empty()},createSwf:function(){if(!this.shouldUseFlash)return;var a=this;setTimeout(function(){twttr.turkey.swfErrorCallbacks[a.tweetBoxId]=twttr.bind(a,a.addFileError),twttr.turkey.swfCallbacks[a.tweetBoxId]=twttr.bind(a,a.addFileData),twttr.turkey.loadSwf(a.$swf,a.tweetBoxId)},500)},createTipsy:function(){var a=this;this.$camera.tipsy({gravity:"nw",fade:!0,opacity:.9,title:twttr.bind(this,this.getTipsyTitle)}),this.$camera.click(function(){setTimeout(function(){a.$camera.data("tipsy")&&a.$camera.data("tipsy").hide()},750)})},getTipsyTitle:function(){return this.files.length>=this.maxFiles?"":this.addPhotoMessage},resetAddPhoto:function(){var a=this;this.$camera.find('input[type="file"]').remove();var b=$('<input type="file" class="turkey-file-input" name="media[]"></input>');this.$camera.append(b),b.bind("change",function(b){a.addFile(b.target)}),this.$camera.bind("click",function(){a.scribeEvent("click")})},remove:function(){this.$thumbsWrapper.remove()}}),a(twttr.turkey.PhotoThumbnails)})}),provide("images",function(a){using().as(function(b){twttr.images={renderProviderMedia:function(a,b){var a=a.concat(),c=twttr.images.generateDivs($.map(a,function(a){return a.url}),b);this.bindLoadImageHandler(c,b.componentName);var d=function(a,b){setTimeout(function(){a.trigger("failedToResolve",[b])},0)};return $.each(a,function(a,e){var f=$(c[a]);e.mediaType.getImageURL(b.size,function(a){a?twttr.images.scaleImageIntoDiv(f,a,b):d(f,"getImageUrl did not return a resolvedURL")},b.dimension)}),c},renderMediaUrls:function(a,b,c){var d=twttr.images.generateDivs(a,b);this.bindLoadImageHandler(d,b.componentName);var e={success:function(a,c){twttr.images.scaleImageIntoDiv(a,c,b)},error:function(a,b){setTimeout(function(){a.trigger("failedToResolve",[b])},0)}};return twttr.images.resolveDataUrls(d,b,e,c),d},animateImageFadeIn:function(a,b,c){var d=Modernizr.csstransitions?"animateWithCss":"animate";a.css("opacity",0),a[d]({opacity:c||1},b||500,"swing")},renderMediaUrl:function(a,b,c){return this.renderMediaUrls([a],b,c)},generateDivs:function(a,b){var c=$(),d=b.thumbnailViewClass||twttr.views.Thumbnail;return $.each(a,function(a,e){var f=$((new d({url:e,width:b.width,height:b.height,lineHeight:b.height+"px"})).html());c=c.add(f)}),c},bindLoadImageHandler:function(a,b){var c=this;a.bind("loadImage",function(){var a=$(this);if(a.data("loaded")===!0)return;var d=a.data("resolvedUrl"),e=a.data("childImg");if(d&&e){if(twttr.decider.isAvailable("profile_image_latency")){var f=twttr.media.matchInstance(a.data("url")),g=new twttr.Profiler(c.createProfilingDescription(f.partnerName,d,b));$(e[0]).load(function(){g.done()})}e[0].src=d,a.data("loaded",!0)}else a.data("loadWhenResolved",!0)})},createProfilingDescription:function(a,b,c){return c=c?c:"",[a.toLowerCase(),JSON.stringify(b),c.toLowerCase()].join(".")},resolveDataUrls:function(a,b,c,d){a.each(function(a,e){var f=$(e),g=f.attr("data-url")||e.href;twttr.media.resolveImageUrl(g,b.size,{success:function(a){c.success&&c.success(f,a)},error:function(a){c.error&&c.error(f,a)},tweet:d,filter:b.filter},b.dimension)})},scaleImageIntoDiv:function(a,b,c){b=b.replace(/([^:])\/\//g,"$1/");var d=$("<img/>").addClass("scaled-image");d.bind("load",function(){var b=twttr.images.calculateScaleDimensions({containerWidth:c.width,containerHeight:c.height,itemWidth:this.width,itemHeight:this.height,scalingMode:c.scalingMode});d.attr({origHeight:this.height,origWidth:this.width}),c.divMode==="snap"?a.css(b).css("line-height",b.height+"px"):(d.css(b),d.css({top:Math.floor(c.height/2-b.height/2),left:Math.floor(c.width/2-b.width/2)})),setTimeout(function(){d.appendTo(a.find("div.thumbnail-wrapper")),twttr.images.addPrivacyCover(d),a.trigger("loaded")},0)}).bind("error",function(){a.trigger("failedToLoad")}),a.data("resolvedUrl",b).data("childImg",d),(!c.delayLoading||a.data("loadWhenResolved"))&&a.trigger("loadImage")},resizeImageInDiv:function(a,b){if(!a)return;var c=a.find("img.scaled-image");if(c.length==0)return;var d=twttr.images.calculateScaleDimensions({containerWidth:b.width,containerHeight:b.height,itemWidth:parseInt(c.attr("origWidth"),10),itemHeight:parseInt(c.attr("origHeight"),10),scalingMode:b.scalingMode});c.attr(d).trigger("resize"),b.divMode==="snap"?a.css(d).css("line-height",d.height+"px"):c.css({top:Math.floor(b.height/2-d.height/2),left:Math.floor(b.width/2-d.width/2)})},calculateScaleDimensions:function(a){function j(){return{width:e,height:d}}function k(){return{width:c,height:d/g}}function l(){return{width:e/i,height:b}}var b=a.containerHeight,c=a.containerWidth,d=a.itemHeight,e=a.itemWidth,f=a.scalingMode,g=e/c,i=d/b;switch(f){case"fit":return g<1&&i<1?j():g>i?k():l();case"trim":return g<1||i<1?j():g>i?l():k();default:return{width:c,height:b}}},addPrivacyCover:function(a,b){if(a.length<=0||!twttr.decider.isAvailable("prevent_right_click_on_images"))return;var c=function(){var b=a[0],d=d||a.parent();d.find(".cover").remove(),d.addClass("has-cover").height(b.height).width(b.width),d.closest(".media-instance-container").width(b.width),$("<div/>",{"class":"cover",height:b.height,width:b.width}).appendTo(d),a.bind("resize",c)},d=0,e=function(){a[0].complete===!0?setTimeout(c,0):(a.bind("load",function(){setTimeout(c,0)}),d<10&&setTimeout(e,500),d++)};e()},SCRIBABLE_PROVIDERS:["dailybooth","flickr","instagram","lockerz","photobucket","twimg","twitpic","yfrog","youtube"],scribeImageFailure:function(a,b,c){if(!twttr.decider.isAvailable("scribe_image_failures"))return;var d=twttr.media.match(c);if(d&&d.partnerName){var e=d.partnerName.toLowerCase();$.inArray(e,this.SCRIBABLE_PROVIDERS)&&a.scribe({component:b,action:"third_party_error"},{url:c,event_info:e})}}},a(twttr.images)})}),provide("components/ContactImportLauncher",function(a){using("externalOauthPopup").as(function(b){twttr.klass("twttr.components.ContactImportLauncher").subclassOf(twttr.components.Base).initializer(function(a){var b=this;this.bind("addedToPage",function(){if(!twttr.decider.isAvailable("contact_import"))return;twttr.API.AddressBook.contactsServices({success:function(c){if(!c||!c.length){b.trigger("notRendered","no_items");return}(new twttr.views.DashboardContactImport({services:c,compact:a})).render(b.$node,"append"),b.$node.delegate(".service-link","click",function(a){b.launchService($(this))}),b.trigger("servicesLoaded")},error:function(){b.trigger("notRendered","darkmoded")}})})}).methods({launchService:function(a){var c=a.attr("data-url"),d=a.attr("data-width"),e=a.attr("data-height");if(c){a.attr("data-popup")=="true"?b.externalOauthPopup({url:c,width:d,height:e,callbackUrl:twttr.router.whoToFollowImportMatchesPath()}):window.open(c,"_blank").focus();var f=a.find("strong.service-name").attr("data-service-id");trackClient({section:"dashboard",component:"contact_import_launcher",action:"launch_service"},{event_info:f,context:"import"})}}}),a(twttr.components.ContactImportLauncher)})}),provide("streams/ListStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.ListStream",function(a,b){this._cursor=-1,twttr.streams.Stream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent,twttr.loggedIn&&!twttr.isT1&&this._registerUpdateStreamEvent(twttr.API.List,"follow unfollow",function(a,b){return b.sync("following",a.type==="follow"),b})}).subclassOf(twttr.streams.Stream).methods({itemViewClass:"StreamList",streamItemType:"list",streamItemId:function(a){return a.uri},rerenderItem:function(a,b){var c=this.selectedItem(a);c.length===0&&(c=this.$find("div.js-list[data-list-id='"+a+"']").closest(".js-stream-item")),c.replaceWith(this._renderItemHtml(b))},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("list_streams")||this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}twttr.API.User.find(this.screenName)[this.API_METHOD]({cursor:this._cursor,success:function(c,d){b._cursor=d.response.next_cursor,b.push(c.array),a(b,twttr.streams.SUCCESS),b._cursor||b.reachedTheEnd()},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}})},_scribeResults:function(a,b,c){this._scribeEmptyResults(a,b,c);if(b.length){var d=twttr.map(b,function(a){return a.fullName});this.scribbler.scribe({component:"stream",action:"results"},{item_names:d,item_count:d.length,event_value:d.length,referring_event:a})}}});a(c)})}),provide("streams/OwnListsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.OwnLists",function(a,b){twttr.streams.ListStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"lists",_setTitle:function(a){this.stream_user_is_current_user()?a(_("Your lists")):a(_("{{username}}'s lists",{username:this.screenName}))},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You haven't created any lists yet."):_("@{{screen_name}} hasn't created any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"create",b),this._registerRemoveFromStreamEvent(twttr.API.List,"delete",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}).statics({_deciderKey:"list_stream_own_lists"});a(c)})}),provide("streams/SubscriptionsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Subscriptions",function(a,b){twttr.streams.ListStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent,this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"subscriptions",_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following any lists yet."):_("@{{screen_name}} isn't following any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"unfollow",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}).statics({_deciderKey:"list_stream_subscriptions"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!1))},_setHeaderButton:function(a,b){a(new twttr.views.CreateListButton)}}):c.methods({_setTitle:function(a){a(_("Lists {{username}} follows",{username:this.screenName}))}}),a(c)})}),provide("streams/MembershipsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Memberships",function(a,b){twttr.streams.ListStream.apply(this,arguments)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"memberships",_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't listed yet."):_("@{{screen_name}} isn't listed yet.",{screen_name:this.screenName})}}).statics({_deciderKey:"list_stream_memberships"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!0))},_setHeaderButton:function(a,b){twttr.helpers.isCurrentUser(b.screenName)&&a(new twttr.views.CreateListButton)}}):c.methods({_setTitle:function(a){a(_("Lists following {{username}}",{username:this.screenName}))}}),a(c)})}),provide("streams/MembershipsStreamUser",function(a){using("_","streams/MembershipsStream").as(function(b,_){var c=twttr.stream("twttr.streams.MembershipsUser",function(a,b){twttr.streams.Memberships.apply(this,arguments)}).subclassOf(twttr.streams.Memberships).methods({_setViewToggler:function(a,b){a(new twttr.views.ProfileListsStreamViewToggler(!1,{screen_name:b.screenName}))}});a(c)})}),provide("multiGlobals/trackSession",function(a){var b={};b._maxLength=1e3,b._cookieName="session_buffer",b._defaultJson="[]",b._getStorage=function(){var a=$.cookie(b._cookieName)||b._defaultJson,c;try{c=JSON.parse(a)}catch(d){c=JSON.parse(b._defaultJson)}return c},b._setStorage=function(a){var c=JSON.stringify(a);if(c.length>b._maxLength){var d=Math.floor(a.length/2);a.splice(d,a.length),c=JSON.stringify(a)}$.cookie(b._cookieName,c)},b._setSession=function(a){var c=b._getStorage();c=$.grep(c,function(b){return a.key!==b.key}),c.unshift(a),b._setStorage(c)},b._extractSessions=function(a){var c=b._getStorage(),d=[];return c=$.grep(c,function(b){return $.inArray(b.key,a)>-1?(d.unshift(b),!1):!0}),b._setStorage(c),d},b.start=function(a,c){c=c||{},b._setSession({key:a,data:c});var d={component:a,action:"session_start"};trackClient(d,c)},b.stop=function(a,c){"string"==typeof a&&(a=[a]);var d=b._extractSessions(a);$.each(d,function(a,b){var d={component:b.key,action:"session_stop"};trackClient(d,b.data),c&&c(b)})},window.startTrackSession=b.start,window.stopTrackSession=b.stop,a(b)}),provide("streams/SuggestionCategoriesStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoriesStreamT1":"","mixins/discoveryHelper").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoriesStream",function(a,b){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments),this.$node.addClass("suggestion-categories");var c=this;this.$node.delegate("div[data-item-type=suggestion_category]","click",function(a){var b=$(this).attr("data-item-id"),d={};return d[b]={item_position:$("div.js-stream-manager-container div.js-stream-item").index($(a.target).closest(".js-stream-item"))},b&&(trackClient({component:"suggestion_category",action:"click"},{step:"interests",query:b,item_details:d}),c.routePageTo(c.params.pathRoot,"InterestsCategory",{category:b})),!1})}).subclassOf(twttr.streams.Stream).statics({cacheCategories:function(a){this.CATEGORIES=a,this.CATEGORY_MAP=this.buildCategoryMap(a)},buildCategoryMap:function(a){return a.reduce({},function(a,b){return a[b.slug]=b,a})},filterTopTweetsCategories:function(a){var b=this.buildCategoryMap(a);return a.filter(function(a){if(a.slug.match(/^(.+)[_-]top-tweets$/i)){var c=b[RegExp.$1];return c&&(c.topTweetsCategory=a),!1}return!0})}}).methods({itemViewClass:"StreamSuggestionCategory",streamItemType:"suggestion_category",sampleSize:"",streamItemId:function(a){return a.slug},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},addTipsies:function(){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("suggestion_categories_streams")){a(this,twttr.streams.DECIDER);return}var c={sample_size:this.sampleSize,samples:!0,success:function(c){c=b.constructor.filterTopTweetsCategories(c),b.constructor.cacheCategories(c);var d=c.map(function(a){var c,d;return a.topTweetsCategory&&a.topTweetsCategory.sample&&(d=a.topTweetsCategory.sample.shift())&&(c=d.id),a.clone({category_link:b.pagePathFor(b.params.pathRoot,"InterestsCategory",{category:a.slug}),category_top_tweets_user_id:c,category_top_tweets_is_current_user:!!twttr.currentUser&&twttr.currentUser.id==c,following_category_top_tweets:a.topTweetsCategory?a.topTweetsCategory.followingTopTweets:null})});b.push(d.array),a(b,twttr.streams.SUCCESS),b.addTipsies(),b.reachedTheEnd();var e=c.map(function(a,b){return a.name});b.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length()})},error:function(){a(b,twttr.streams.ERROR)}};b.defaultOpts&&(c=twttr.merge(b.defaultOpts,c)),b.params.lang&&(c.lang=b.params.lang),b.params.country&&(c.country=b.params.country),b.params.city&&(c.city=b.params.city),c.top_tweets=!0,twttr.API.SuggestionCategory.getAll(c)},_setTitle:function(a){this.params.title!==undefined?a(this.params.title):a(_("Select the topics you are interested in. Find a few people you want to hear from, then follow them."))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(this.constructor.CATEGORIES,this.params.pathRoot)},_getStreamEndComponent:function(){return this._getHeaderComponent()}}).mixin(twttr.mixins.discoveryHelper);c&&d.mixin(c),a(d)})}),provide("streams/SuggestionCategoryMembersStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoryMembersStreamT1":"").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoryMembersStream",function(a,b){var c=this;a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.UserStream.apply(this,arguments),this.category=a.suggestionCategory,this.ignoreScribeItemPosition=!1}).subclassOf(twttr.streams.UserStream).statics({_deciderKey:"suggestion_categories_streams"}).methods({update:function(a){this.params.lang&&(a.lang=this.params.lang),this.params.country&&(a.country=this.params.country),this.params.city&&(a.city=this.params.city),this.category.members(a)},isCursorPagination:function(){return!1},_setTitle:function(a){var b={category:this.category.name,size:this.category.size};a(this.params.title||_("View {{category}} ({{size}})",b))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(twttr.streams.SuggestionCategoriesStream.CATEGORIES,this.params.pathRoot,this.category.slug)},_getStreamEndComponent:function(){return this.params.noHeaderFooter?twttr.streams.SuggestionCategoryMembersStream.uber._getStreamEndComponent.call(this):this._getHeaderComponent()}});c&&d.mixin(c),a(d)})}),provide("streams/SuggestionCategoriesDashboardStream",function(a){using().as(function(b){twttr.klass("twttr.streams.SuggestionCategoriesDashboardStream",function(a,b){a=a||{},twttr.streams.SuggestionCategoriesStream.call(this,a,b)}).subclassOf(twttr.streams.SuggestionCategoriesStream).methods({itemViewClass:twttr.isT1?"DashboardStreamInterestCategory":"StreamSuggestionCategory",_setHeader:function(a,b){a("")},addTipsies:function(){}}),a()})}),provide("streams/SuggestionCategoryMembersDashboardStream",function(a){using("streams/SuggestionCategoryMembersStream").as(function(b){twttr.klass("twttr.streams.SuggestionCategoryMembersDashboardStream",function(a,c){a=a||{},a.streamItemClass="unfocusable-stream-item",b.streams.SuggestionCategoryMembersStream.call(this,a,c)}).subclassOf(b.streams.SuggestionCategoryMembersStream).methods({_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a(twttr.streams.SuggestionCategoryMembersDashboardStream)})}),provide("streams/GovernmentSearchStream",function(a){using("_","mixins/hasGovernmentSearchHeader").as(function(b,_){var c=twttr.klass("twttr.streams.GovernmentSearchStream",function(a,b){var c=this;twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).mixin(b.mixins.hasGovernmentSearchHeader).methods({itemViewClass:"StreamUser",streamItemType:"user",afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},streamItemId:function(a){return a.id},_fetchItems:function(a){var b=this;twttr.API.UsPoliticalRep.findByZip(this.params.zipCode,{success:function(c,d){b.push(c.map(function(a){return a.user}).array),a(b,twttr.streams.SUCCESS),b.reachedTheEnd()},error:function(c){c.status===502?a(b,twttr.streams.WHALE):c.status===404?(a(b,twttr.streams.SUCCESS),b.reachedTheEnd()):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}})},_setTitle:function(a){a(_("Government"))},_getEmptyStreamHtml:function(){return _("Sorry, we couldn't find any representatives for that Zip Code.")},_setViewToggler:function(a){var b={route:twttr.router.whoToFollowInterestsPath(),name:_("View all categories")};a(new twttr.views.BackLink(b))}});a(c)})}),provide("widget/VerifyEmailDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.VerifyEmailDialog",function(a,b){this.bucket=a,twttr.widget.Dialog.call(this,twttr.merge({modal:!0,draggable:!1,css:{width:530},email:b.email_address||b.attributes.states.pending_email},b.attributes))}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this),this.$container.find(".button.ok-thanks").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","dialog_dismissed"),a.preventDefault(),a.stopPropagation(),$.cookie("abtest_email_verification_18","1",{expires:.0417}),this.destroy()})),this.$container.find(".send-verify-email").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","resend_verification_email"),$.ajax({url:"/account/resend_confirmation_email",dataType:"json",success:twttr.bind(this,function(a){var b=this.$container.find(".twttr-dialog-verify-email");b.length?b.fadeOut(300,function(){b.find("h2").html(_("Confirmation email sent!")),b.find(".verify-email-text").html(_("Please take this time to check your email for the confirmation message and to verify your email address by <strong>clicking the link in the email</strong>.")),b.fadeIn()}):twttr.showMessage(a.messageForFlash)}),error:function(a){twttr.showError(_("Oops!  There was an error sending the confirmation email."))}}),a.preventDefault(),a.stopPropagation()})),this.$container.find(".change-email").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","change_email"),this.destroy()}))}}),a(twttr.widget.VerifyEmailDialog)})}),provide("SearchAPI",function(a){using().as(function(b){twttr.SearchAPI={_generateFacetsQuery:function(a){var b=a.query,c=a.facets,d={q:b,imageResults:c.images?c.images.count:null,videoResults:c.videos?c.videos.count:null};return a.experimentId&&(d.experimentId=a.experimentId),d},getImageFacets:function(a,b){twttr.SearchAPI._wrapInCache("imageFacets",a,b)},getVideoFacets:function(a,b){twttr.SearchAPI._wrapInCache("videoFacets",a,b)},_wrapInCache:function(a,b,c){var d=this,e=twttr.SearchAPI.cacheKey(a,b,c);this._facetsCache[e]?setTimeout(function(){c.success&&c.success(d._facetsCache[e])},0):twttr.API.Search[a](b,twttr.merge({},c,{success:function(a){var b=[];a.each(function(a){b.push({url:a.url,tweet:a})}),d._facetsCache[e]=b,c.success&&c.success(b)},error:function(){c.error&&c.error()}}))},cacheKey:function(){return JSON.stringify(Array.prototype.slice.apply(arguments))},_facetsCache:{},flushCache:function(){this._facetsCache={}}},a(twttr.SearchAPI)})}),provide("media/providers",function(a){using().as(function(b){var c=function(a,b){return b=b||function(){return!0},function(c){var d=[];$.each(c,function(a,c){c.mediaType=twttr.media.matchInstance(c.url,c.tweet),c.mediaType&&b(c)&&d.push(c)}),a(d)}};twttr.klass("twttr.media.provider.Search",function(a){this.options=a||{}}).methods({fetch:function(a){var b=a.query;a.success=c(a.success,a.filter),a.mode=="videos"?twttr.SearchAPI.getVideoFacets(b,a):twttr.SearchAPI.getImageFacets(b,a)}}),twttr.klass("twttr.media.provider.UserMedia",function(a){this.defaults={offset:0,count:20},this.screenName=a.screenName||null,this.user=a.user||null}).methods({fetchWithUser:function(a){var b=a.success||$.noop;a.success=function(a){var c=[];twttr.each(a.array,function(a){a.entities&&a.entities.media&&$.each(a.entities.media,function(b,d){if(d.type&&d.type=="photo"&&d.display_url){var d={url:d.display_url,tweet:a};c.push(d)}}),a.entities&&a.entities.urls&&$.each(a.entities.urls,function(b,d){var e={url:d.expanded_url||d.url,tweet:a};c.push(e)})}),b(c)},this.user.media(a)},fetchWithScreenName:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){b.user=c,b.fetchWithUser(a)})},fetch:function(a){a=$.extend({},this.defaults,a),a.success=c(a.success,a.filter),this.user?this.fetchWithUser(a):this.screenName&&this.fetchWithScreenName(a)}}),a(twttr.media.provider)})}),provide("mixins/userRecommendationsHelper",function(a){using("_","constants").as(function(b,_){twttr.klass.mixin("twttr.mixins.userRecommendationsHelper",function(a){return a.methods({INTERESTING_RATING:6,BLOCK_RATING:5,USEFUL_RATING:1,LIST_ITEM_SELECTOR:"ul.recommended-followers > li.user-small-list-item",userRecommendationsAvailable:function(a){return twttr.loggedIn?a?twttr.decider.isAvailable("whotofollow_similarities"):twttr.decider.isAvailable("whotofollow_recommendations"):twttr.decider.isAvailable("whotofollow_logged_out_similarities")},trackImpressions:function(a,c,d,e,f){var g=[],i=[],j;a&&a.length()&&(a.each(function(a,c){g.push(a.id),i.push(a.feedback);if(a.promotedContent&&a.promotedContent.impression_id){var d={target_id:a.id,item_type:b.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id,item_position:c};j=j||{},j[a.id+""]=d}}),e?this.currentRecommendations=twttr.map(this.currentRecommendations,function(a,b){return a==e?g[0]:a}):this.currentRecommendations=g),this._trackOldImpressions(c,g,i,d),this._trackNewImpressions(g,i,j,f)},trackError:function(a,b){this._trackOldImpressions(a,[],[],b),this.getScribbler().scribe({component:this._getScribeComponentName(),action:"error"})},_trackOldImpressions:function(a,b,c,d){var e={recommended_users:b,recommended_users_count:b.length,tokens:c};twttr.merge(e,d||{});var f=this.mergeSimilarUserId(e);_scribble(a,f,"whotofollow")},_trackNewImpressions:function(a,b,c,d){var e={profile_id:this.getSimilarUserId(),item_ids:a,item_count:a.length,event_value:a.length,item_names:b,referring_event:d?"get_newer":"initial",duration_ms:new Date-this.initTime};c&&(e.item_details=c),this.getScribbler().scribe({component:this._getScribeComponentName(),action:a.length?"results":"no_results"},e)},_scribeResults:function(a,b,c){twttr.streams.Stream.prototype._scribeResults.apply(this,arguments);var b=b||[];c=c||{};if(a=="error"||a=="initial"&&!b.length)this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},twttr.merge(c,{item_ids:[0],item_count:0,event_value:0,cursor_or_page:this._cursorOrPage(),referring_event:a}));else if(b.length){var d=this,e=[],f=[],g;twttr.each(b,function(a,b){e.push(a.id),f.push(a.feedback);if(d.constructor._namespace.indexOf("UserRecommendations")!=-1){var c;a.promotedContent&&a.promotedContent.impression_id&&(c={item_type:twttr.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id}),c&&(g=g||{},c.item_position=b,g[a.id+""]=c)}}),g&&(c.item_details=g),this.scribbler.scribe({component:this._getScribeComponentName(),action:"results"},twttr.merge(c,{item_ids:e,item_names:f,item_count:e.length,event_value:e.length,cursor_or_page:this._cursorOrPage(),referring_event:a}))}},logPromotedImpressions:function(a){a.each(function(a){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)})},getSimilarUserId:function(){return this.similarUser&&this.similarUser.id||twttr.profileUser&&twttr.profileUser.id},mergeSimilarUserId:function(a){return this.screenName&&$.extend(a,{to_user_id:this.getSimilarUserId()}),a.phoenix_enabled=!0,a},recsToUsers:function(a){return a.map(twttr.bind(this,function(a,b){var c=this._namespace=="twttr.streams.UserRecommendationsStream"||this._namespace=="twttr.streams.UserSimilaritiesStream";return a.user.clone({following:a.user.following===!0,feedback:a.token,dismissable:!this.screenName||c&&twttr.profileUser&&twttr.currentUser.id==twttr.profileUser.id,socialcontext:this.makeSocialContextHtml(a,c)})}))},fetch:function(a){this.screenName?twttr.profileUser.similarUsers(a):(a.force_new_signup=this.forceNewSignup,twttr.currentUser.recommendedUsers(a))},registerUserRecommendationsActions:function(a){var b=this,c=function(b){return!a||b.parents(a).length};this.bind("avatar_click.user screen_name_click.user select.user",function(a,d,e,f){if(!c(d))return;var g=parseInt(d.attr("data-user-id")),i=b.mergeSimilarUserId({rating:b.INTERESTING_RATING,recommended_user_id:g,token:d.attr("data-feedback-token")||"0"});if(!g)return;i.recommendation_position=b.getRecPosition(d),scribble(b.whotofollowComponentName+"_profile_click",i,"whotofollow"),scribble("view-profile",{profile_user_id:g,component:b._namespace.indexOf(".stream.")?"stream":"dashboard",subcomponent:"who-to-follow",target:e.is("a")?"link":"image"})}),this.bind("follow.user",function(a,d,e,f){if(!c(d))return;var g=parseInt(d.attr("data-user-id")),i=b.mergeSimilarUserId({rating:b.USEFUL_RATING,recommended_user_id:g,token:d.attr("data-feedback-token")||"0"});if(!g)return;twttr.API.UserRecommendation.rate(i),i.recommendation_position=b.getRecPosition(d),scribble(b.whotofollowComponentName+"_follow",i,"whotofollow"),scribble("follow-user",{profile_user_id:g,component:b._namespace.indexOf(".stream.")?"stream":"dashboard",subcomponent:"who-to-follow"})}),this.bind("dismiss.user",function(a,d,e,f){if(!c(d))return;twttr.isT1&&d.hasClass("js-follow-combo")&&(d=d.parent(".js-actionable-user"));var g=parseInt(d.attr("data-user-id")),i=d.attr("data-impression-id"),j=b.getRecPosition(d),k=d.attr("data-feedback-token")||"0",l=d.find("a.js-action-follow, div.js-action-follow, .follow-action, .follow-button").length||b.screenName,m={};twttr.cache.local.dismissedIDs=twttr.cache.local.dismissedIDs||[],twttr.cache.local.dismissedIDs.push(g),d.animate({opacity:0},200);var n=function(a){var c;if(e.closest('[data-section-id="wtf"]').length)if(a&&a.length()&&!twttr.is.inArray(a.first().user.id,b.currentRecommendations||[])){c=b.recsToUsers(a);var f=c.first();if(f){var i=b.renderItemView(f).$html();i.css({opacity:0}),d.replaceWith(i),i.animate({opacity:1},300),b.trackImpressions(c,"whotofollow_sidebar_replace_dismissed",twttr.merge({recommended_user_id:g,recommendation_position:j},m),g)}}else d.fadeOut(200,function(){d.animate({height:1},100,null,function(){d.remove(),b.$find(b.LIST_ITEM_SELECTOR).length==0&&(b.trigger("notRendered","noMoreRecommendations"),b.$node.empty())})});else{var n=d.parent(".stream-item");n.slideUp(100,function(){n.remove()})}l&&scribble(b.whotofollowComponentName+"_block",b.mergeSimilarUserId({token:k,recommended_user_id:g,rating:b.BLOCK_RATING,recommendation_position:j}),"whotofollow")},o=function(){twttr.showError(_("Whoops! Something went wrong. Please try again!")),d.css({opacity:1})};m=b.mergeSimilarUserId({});var p=twttr.merge({user_id:m.to_user_id,excluded:b.currentRecommendations.concat(twttr.cache.local.dismissedIDs||[]).join(","),success:n,error:o,pc:!!i},m);d.find("a.js-action-unfollow:visible, div.js-action-unfollow:visible").length?b.fetch(twttr.merge(p,{limit:1})):d.find(".unfollow-button").length&&twttr.audit.currentPage()!="similar_to"?n():(p=twttr.merge({connections:!0},p),twttr.API.UserRecommendation.hide(g,k,p))})},attachUserRecommendationHideEvents:function(){this.$find("a.js-user-dropdown-dismiss").click(twttr.bind(this,function(){this.$find("a.js-user-dropdown, div.js-user-dropdown").fadeOut(300)}))},renderItemView:function(a){return new twttr.views.UserSmallListItem(a)},getRecPosition:function(a){}}),a}),a(twttr.mixins.userRecommendationsHelper)})}),provide("mixins/t1/genericComboButton",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.t1.genericComboButton",function(){this.methods({getButton:function(a){return a.closest(".js-combo-btn")},setState:function(a,b,c){b&&c!==b&&(a.removeClass(c),a.addClass(b),a.attr("data-state",b))}}).click({".js-combo-btn-dropdown":function(a,b){var c=this.getButton(b);c.toggleClass("open"),c.hasClass("open")&&($(document).bind("click.button",function(){c.removeClass("open"),$(document).unbind("click.button")}),a.stopPropagation())},".js-combo-btn-action, .js-combo-btn-dropdown-options a":function(a,b){var c=this.getButton(b);this.setState(c,b.attr("data-state"),c.attr("data-state"))}})});a(c)})}),provide("mixins/userUpdateable",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.userUpdateable",function(){return this.methods({registerUserUpdateEvents:function(a){var b=this;if(!twttr.loggedIn)return;twttr.API.User.bind("follow unfollow",function(c,d){var e=a.id==d.id,f=twttr.helpers.isCurrentUser(a);if(!e&&!f)return;twttr.helpers.isCurrentUser(b.user)?b.trigger("userUpdated",twttr.currentUser):b.trigger("userUpdated",d)})}}),this});a(c)})}),provide("components/UserMedia",function(a){using().as(function(b){twttr.klass("twttr.components.UserMedia").subclassOf(twttr.components.Media).deciderKey("phoenix_user_media_gallery").initializer(function(a,b){this.user=a,this.options=b||{},this.notDisplayedClass=".user-media-not-displayed",this.hasCalledHasRendered=!0,this.buildSubComponents()}).methods({buildSubComponents:function(){var a=this,b=function(){a.$node.hide()},c=twttr.aug({user:this.user,filter:function(a){return!a||!a.mediaType?!1:a.mediaType.icon()===twttr.constants.media.photoIcon}},this.options);twttr.isT1&&twttr.aug(c,twttr.components.Media.dashboardThumbnailOptions),this.images=new twttr.components.media.profile.Images(c),this.images.bind("urlsLoaded",function(c,d,e){a._possiblySensitive=e,d.length===0?b():twttr.loggedIn?a.loggedInBehavior():a.loggedOutBehavior(),a._scribeResults("photos",d)}),this.images.bind("failed",function(){b(),a._scribeResults("photos")}),this.images.fetchImages()},_isPossiblySensitive:function(){return!!this._possiblySensitive},_getUser:function(){return this.user},onProfilePage:function(){return!0},renderMedia:function(){this.images.$node.appendTo(this.$node),this.images.render(),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"photos_user_media",action:"view_all"},{event_info:"photos",profile_id:twttr.profileUser&&twttr.profileUser.id})}),this.$node.delegate(".media-thumbnail","click",function(a){trackClient({section:"dashboard",component:"photos_user_media",action:"click"},{event_info:"photos",url:$(this).attr("data-url"),profile_id:twttr.profileUser&&twttr.profileUser.id})})},buildNotDisplayedView:function(a){var b="";return a.possibly_sensitive?b=_("This media may contain sensitive content"):a.not_following&&(b=_("This media was shared by {{screen_name}}, someone you don&#8217;t follow.",{screen_name:this.user.screenName})),new twttr.views.UserMediaNotDisplayed({screenName:this.user.screenName,reason:b,renderHr:this.options.renderHr})},_scribeResults:function(a,b){var c=b&&b.length?"results":"no_results",d=a+"_user_media";b=b||[],trackClient({section:"dashboard",component:d,action:c},{item_names:b.slice(0,4),item_count:b.length,event_info:a,profile_id:twttr.profileUser&&twttr.profileUser.id})}}),a(twttr.components.UserMedia)})}),provide("components/UserRecommendations",function(a){using("_","mixins/userRecommendationsHelper","mixins/userActionable",twttr.isT1?"mixins/UserRecommendationsT1":"mixins/UserRecommendationsP1").as(function(b,_,c,d,e){var f=twttr.klass("twttr.components.UserRecommendations").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.screenName=a.screenName,this.showLinks=a.showLinks,this.currentRecommendations=[],this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.screenName&&twttr.profileUser&&twttr.profileUser.id}),this.scribeComponentName=this._determineScribeComponentName(a),this.whotofollowComponentName=this._determineWhotofollowComponentName(this.scribeComponentName),this.initTime=+(new Date),this.onDeck=[],this.scribbler.scribe({component:this.scribeComponentName,action:"impression"}),this.noSpacer=!this._shouldHaveSpacer(),this.bind("addedToPage",twttr.bind(this,function(){this.userRecommendationsAvailable()?this.loadRecommendations():this.trigger("notRendered","darkmoded")})),this.registerUserActionEvents(),this.registerUserRecommendationsActions()}).mixin(c,d,e).statics({wtfCycleTimeout:1e3}).click({".title-link":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:"dashboard_title",item:b.find(".dashboard-component-title").html()};scribble("dashboard_click",c)},".user-rec-inner h3 a":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:"view_all_recommendations",recommendations:this.currentRecommendations};scribble("dashboard_click",c)},".user-rec-inner .view-all":function(a,b){trackClient({component:this.scribeComponentName,action:"view_all"})},".flex-module-footer a[data-element-term=interests_link]":function(a,b){trackClient({component:this.scribeComponentName,element:"interests_link",action:"click"})},".flex-module-footer a[data-element-term=import_link]":function(a,b){trackClient({component:this.scribeComponentName,element:"import_link",action:"click"})},".user-rec-links a":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:b.html(),target_type:"recommendation_link",recommendations:this.currentRecommendations};scribble("dashboard_click",c)},"a.js-action-follow, div.js-action-follow":function(a,b){if(twttr.app.currentPageName()==="home"&&this.scribeComponentName!=="empty_timeline_recommendations"){var c=this,d=b.closest(".js-actionable-user");window.setTimeout(function(){c.loadRecommendations(d)},twttr.components.UserRecommendations.wtfCycleTimeout)}}}).methods({forceNewSignup:!1,renderItemView:function(a){return new twttr.views.UserSmallListItem(a)},renderModuleView:function(a,b){var c=this._getModuleViewName();(new twttr.views[c](a)).subview("recommended_followers",new twttr.views.UserSmallList(b)).render(this.$node,"append")},loadRecommendations:function(a){var b,c;this.screenName?(b="whotofollow_view_similar_users",c="profile"):(b="whotofollow_view_recommended_users",c="home"),this.fetch({limit:a?1:this._recommendationsLimit(),excluded:this.onDeck.concat(twttr.cache.local.dismissedIDs||[]).join(","),display_location:this.screenName?"st-component":"wtf-component",pc:!0,connections:!this.screenName,algorithm:this.useUserToUserRec()?"UserToUserRec":null,success:twttr.bind(this,function(d){var e=this.recsToUsers(d);this.trackImpressions(e,b,{tracking_context:c});if(e.length()>0){this.logPromotedImpressions(e);var f;if(a){f=this.renderItemView(e.first()).$html();var g=parseInt(f.attr("data-user-id"));if(this.onDeck.find(function(a){return a==g}))this.trigger("notRendered","recommendationAlreadyOnDeck");else{var i=parseInt(a.attr("data-user-id"));this.onDeck=this.onDeck.map(function(a){return a==i?g:a}),a.css({opacity:1}),f.css({opacity:0}),a.animate({opacity:0},400,function(){a.replaceWith(f),f.animate({opacity:1},400,function(){f.css({opacity:""})})})}}else{this.onDeck=e.map(function(a){return $(a).attr("id")});var j=this.screenName?{screen_name:this.screenName,self_sims:twttr.helpers.isCurrentUser(this.screenName),profile_name:twttr.profileUser.name,small_avatar:!0}:{show_links:this.showLinks};this.renderModuleView(j,e),this.attachUserRecommendationRefreshEvents(),this.hasRendered(),this.trigger("recommendationsLoaded"),f=this.$node}twttr.helpers.ellipsify(f.find(".user-screen-and-full-name")),twttr.helpers.ellipsify(f.find("div.bio"))}else this.trigger("notRendered","noMoreRecommendations")}),error:twttr.bind(this,function(a){this.trackError(b,{tracking_context:c,error_status:a.status}),this.trigger("notRendered",a)})})},refreshRecommendations:function(a){var b=this.$find(".js-recommended-followers");b.animate({opacity:0},200);var c=this.screenName?"whotofollow_refresh_similar_users":"whotofollow_refresh_recommended_users";twttr.cache.local.dismissedIDs=(twttr.cache.local.dismissedIDs||[]).concat(this.currentRecommendations),this.fetch({limit:this._recommendationsLimit(),excluded:this.onDeck.concat(twttr.cache.local.dismissedIDs).join(","),pc:a,display_location:"wtf-component",connections:!0,algorithm:this.useUserToUserRec()?"UserToUserRec":null,success:twttr.bind(this,function(d){var e=this.recsToUsers(d);if(e.length()>0){this.scribbler.scribe({component:this.scribeComponentName,action:"refresh"}),this.trackImpressions(e,c,{},!1,!0),a&&this.logPromotedImpressions(e);var f=this._generateUserList(e);f.css({opacity:0}),b.replaceWith(f),twttr.helpers.ellipsify(f.find(".user-screen-and-full-name")),f.animate({opacity:1},200)}else twttr.showMessage(_("You have no more recommendations today!")),this._removeRefreshLink(),b.css({opacity:1})}),error:function(a){this.trackError(c,{error_status:err.status}),twttr.helpers.showErrorFromResponse(a),b.css({opacity:1})}})},attachUserRecommendationRefreshEvents:function(){var a=this;this.$find("a.js-refresh-suggestions").click(twttr.bind(this,function(a){this.refreshRecommendations(!0)}))},_recommendationsLimit:function(){return 3},useUserToUserRec:function(){return this.screenName!=null&&twttr.abdecider.choose("wtf_user_to_user_rec_155")=="user_to_user_rec"},_determineScribeComponentName:function(a){return a=a||{},a.scribeComponentName?a.scribeComponentName:a.screenName?"similar_user_recommendations":"user_recommendations"},_determineWhotofollowComponentName:function(a){return a==="empty_timeline_recommendations"?"whotofollow_empty_timeline":"whotofollow_sidebar"}});a(twttr.components.UserRecommendations)})}),provide("components/Footer",function(a){using().as(function(b){var c=twttr.klass("twttr.components.Footer").subclassOf(twttr.components.Base).initializer(function(a){this.renderFooter(a),twttr.loggedIn||this.$node.delegate("a","click",function(a){var b={url:$(this).attr("href"),context:twttr.audit.currentPage()},c={section:"footer",component:"link",action:"click"};trackClient(c,b)}),this.hasRendered()}).method("renderFooter",function(a){(new(twttr.isT1?twttr.views.Footer:twttr.views.GenericFooter)({year:2012,is_slim:a=="slim"})).render(this.$node,"append")});a(c)})}),provide("components/Trends",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.Trends").subclassOf(twttr.components.Base).initializer(function(a){var b=this;trackClient({component:"trends",action:"impression"}),b.isFullPage=!!a&&!!a.isFullPage,this.renderTrends(),a&&a.wide&&b.$find(".trends-inner").addClass("wide-trends"),b.hasRendered(),b.registerEventHandlers(),twttr.API.CurrentUser.bind("changedLocation",function(){b.trendLocationUpdated=!0,b.updateTrends()}),twttr.TrendLocations.install(function(){b.trendLocationsLocated=!0,b.startUpdatePolling(),b.trigger("trendLocationsLocated")})}).statics({trendUpdateTime:3e5}).methods({registerEventHandlers:function(){var a=this,b=a.$find(".js-trend-toggle");b.click(function(b){var c=function(){a.dialog().open(),scribble("open-trend-dialog",{input:"click",woeid:a.currentWoeid()})};a.trendLocationsLocated?c():a.bind("trendLocationsLocated",c),b.preventDefault()}),b.hover(function(b){scribble("trend-location-selector-hover",{input:"hover",woeid:a.currentWoeid()})})},currentWoeid:function(){return twttr.trendLocations.current.woeid},dialog:function(){return this._dialog?this._dialog:this._dialog=twttr.dialogs.trends()},startUpdatePolling:function(){var a=this;!a.trendUpdateInterval&&a.trendLocationsLocated&&(a.updateTrends(),a.trendUpdateInterval=setInterval(function(){twttr.decider.isAvailable("trends_component_polling")&&a.updateTrends(!0)},twttr.components.Trends.trendUpdateTime))},stopUpdatePolling:function(){this.trendUpdateInterval&&(clearInterval(this.trendUpdateInterval),this.trendUpdateInterval=!1)},prettyHash:function(a){return a&&a[0]==="#"?a.slice(1):null},updateTrends:function(a){var b=this;b.$node.addClass("loading");var c={pc:twttr.loggedIn,promoted_location:twttr.util.params().promoted_location,success:function(c){var d=twttr.anywhere.api.util.buildCollection(twttr.anywhere.api.models.Trend,c.get(0).trends),e=c.get(0).personalized;twttr.trendLocations.current.isPersonalized!=e&&twttr.trendLocations.setPersonalized(e),b.updateTrendsLocation(),b._dialog&&b.dialog().rerender();var f=[],g=[];$trends=b.$find(".js-trends").empty(),d.each(function(c,d){var e=$.extend({attributes:{}},c);e.attributes=$.extend({index:d+1,is_full_page:b.isFullPage,pretty_hash:b.prettyHash(e.attributes.name)},e.attributes),twttr.isRTL&&(e.attributes.name=e.attributes.name.replace(/^#/,"‎#"));var i=(new twttr.views.TrendItem(e)).$html();c.promotedContent&&(a||twttr.API.util.PromotedContent.logTrendImpression(c.promotedContent.id),i.bind("click",function(a){twttr.API.util.PromotedContent.logTrendClick(c.promotedContent.id)}));var j={rank:d,woeid:b.currentWoeid(),component:"dashboard",input:"click",trend:c.name,dialog_open:b._dialog&&b._dialog.isOpen()};c.promotedContent&&(j.promoted_content_id=c.promotedContent.id),i.bind("click",function(a){scribble("show-trend",j),trackClient({section:"dashboard",component:"trend",action:"click"},{query:c.name,woeid:b.currentWoeid(),position:d}),c.promotedContent&&trackClient({section:"dashboard",component:"promoted_trend",action:"click"},{query:c.name,woeid:b.currentWoeid(),position:d})}),i.appendTo($trends),f.push(j),g.push(c.name)}),b.$node.removeClass("loading"),b.isFullPage&&$(".trends-page").removeClass("trends-page-loading"),b.showTrends(),trackClient({component:"trends",action:"results"},{item_names:g,item_count:g.length,referring_event:a||b.trendLocationUpdated?"get_newer":"initial",event_initiator:a?twttr.constants.scribe.CLIENT_SIDE_APP:twttr.constants.scribe.CLIENT_SIDE_USER}),scribble("trend-impression",{component:"dashboard",trends:f})},error:function(c){b.isFullPage&&($(".trends-page").removeClass("trends-page-loading"),a||twttr.helpers.showErrorFromResponse(c)),b.hideTrends()}};twttr.trendLocations.current.trends(c)},updateTrendsLocation:function(){var a=twttr.trendLocations.current,b=twttr.decider.isAvailable("personalized_trends")&&a.isPersonalized?_("Trends"):1===a.woeid?_("Worldwide trends"):Mustache.to_html(_("{{location}} trends"),{location:a.name});this.$find(".js-trend-location").text(b).attr("woeid",a.woeid)},showTrends:function(){!this.isFullPage&&this.$node.show()},hideTrends:function(){!this.isFullPage&&this.$node.hide()}}).deciderKey("trends_component");twttr.isT1?(c.setBaseView(twttr.views.DashboardTrends),c.methods({renderTrends:function(){this.hideTrends()}})):c.methods({renderTrends:function(){var a=this.isFullPage?twttr.views.FullPageTrends:twttr.views.DashboardTrends;(new a).render(this.$node,"append"),this.noSpacer=this.isFullPage}}),a(c)})}),provide("components/onebox/News",function(a){using("_","helpers").as(function(b,_,c){var d=twttr.klass.component("twttr.components.onebox.News").initializer(function(a){var b=this,c=b.getArticle(a);if(!c)return;b.$node.append((new twttr.views.CardNewsOnebox(c)).html()),b.$node.css("visibility","hidden")}).deciderKey("news_onebox").click({".js-news-headline,.onebox-news-url":function(a){trackClient({section:"onebox",component:"news",action:"click"})}}).methods({getTopicName:function(){return _("Top news")},getArticle:function(a){var b=twttr.at("content.articles",a);return b?b.get(0):null},render:function(){var a=this.$find(".js-news-headline"),c=this.$find(".js-news-snippet"),d=a.innerHeight();d>=36?c.css("height","18px"):d>=18&&c.css("height","36px"),b.helpers.ellipsify([a,c],!1,!0,null,{setTitle:"always",ellipsis:"&ellip;"}),b.helpers.ellipsify(this.$find(".onebox-news-url-text")),this.$node.css("visibility","")}});a(d)})}),provide("components/onebox/User",function(a){using("_","helpers","mixins/userActionable").as(function(b,_){var c=twttr.klass.component("twttr.components.onebox.User").initializer(function(a,b){this.items=[];var c=this.getUsers(a);if(!c)return;this.scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({section:"onebox"},{query:b}),this.$node.append((new twttr.views.CardAccountsOnebox(c,this.getViewAllPath(b))).html()),this.$node.css("visibility","hidden"),this.registerUserActionEvents()}).mixin(b.mixins.userActionable).statics({maxUsers:2}).deciderKey("user_onebox").methods({getTopicName:function(){return _("Top people")},getViewAllPath:function(a){var b={query:a};return twttr.isT1?twttr.router.userSearchPath(b):twttr.loggedIn?twttr.router.whoToFollowSearchPath(b):twttr.router.userSearchPath(b)},getUsers:function(a){var b=twttr.at("content.users",a),c=this;return!b||b.isEmpty()?null:(b.array=b.array.splice(0,twttr.components.onebox.User.maxUsers),b.each(function(a){c.items.push(a.idStr),a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)}),b)},render:function(){twttr.isT1?b.helpers.ellipsify(this.$find(".js-onebox-ellipsis")):b.helpers.ellipsify(this.$find(".bio"),!1,!0,null,{setTitle:"always",ellipsis:"&ellip;"}),this.$node.css("visibility","")}});a(c)})}),provide("components/onebox/Sports",function(a){using("_","helpers","mixins/profilePopupActionable").as(function(b,_,c){var d=twttr.klass.component("twttr.components.onebox.Sports").initializer(function(a,b){this._timerId=0,this._event=0;var c=this,d=c.getEvent(a);if(!d)return;if(d.sport!=="soccer")return;c._event=d,c.$node.append((new twttr.views.CardSoccerOnebox(d)).html()),d.events.getMatchState().current_status!=="final"&&c._startPolling(d),this.$node.css("visibility","hidden")}).deciderKey("sports_onebox").click({".team-logo":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"avatar"})},".fullname":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"screen_name"})},".follow-team":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"follow"})},".detail":function(a){trackClient({section:"onebox",component:"sports",action:"open_link"},{url:this._event.events.getMatchedEventData().preview_url})},".recap":function(a){trackClient({section:"onebox",component:"sports",action:"open_link"},{url:this._event.events.getMatchedEventData().recap_url})},".hashtag":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".ticker-event":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".matched-score":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".js-follow-news":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"news_link"})},".js-signup-callout":function(a){if(!twttr.loggedIn){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget).data("user-id");twttr.API.User.find(b,{success:function(a){twttr.dialogs.signinOrSignup({follow:a}).open()},error:function(a){twttr.errors.showErrorFromResponse(a)}})}}}).mixin(twttr.mixins.profilePopupActionable).methods({getEvent:function(a){return twttr.at("content",a)},_renderTicker:function(a){if(a.events.data().follow_news||a.events.getOtherMatchState().length>0)this.$node.find(".tickercontainer").size()===0&&this.$node.find(".js-onebox-soccer-item").append('<div class="tickercontainer"></div>'),this.$node.find(".tickercontainer").empty().append((new twttr.views.SoccerTicker(a)).html())},_renderMatchedEvent:function(a){this.$node.find(".matched-event").empty().append((new twttr.views.SoccerMatchedEvent(a)).html()),twttr.loggedIn||this.$find(".js-user-profile-link").removeClass("js-user-profile-link").addClass("js-signup-callout")},render:function(){this._event&&(this.$node.empty(),this.$node.append((new twttr.views.CardSoccerOnebox(this._event)).html()),this._renderMatchedEvent(this._event),this._renderTicker(this._event),this._event.events.getMatchState().current_status==="final"&&$(".score a").removeClass("live")),this.$node.css("visibility",""),trackClient({section:"onebox",component:"sports",action:"impression"}),this.$find(".ticker").length!==0&&this._tickerScroll(this.$find(".tickercontainer"))},_tickerScroll:function(a){function m(){var a=b.find("li")[l-1];$(a).animate({opacity:0},k,"linear"),b.animate({top:-l*100+"%"},k,"linear",function(){if(!j)return;++l,l-1>=b.find("li").length?(g._renderTicker(g._event),g._tickerScroll(g.$find(".tickercontainer"))):(clearTimeout(i),i=setTimeout(function(){m()},f))})}this._scrollStarted=!0;var b=$(a.children()[0]),c=0,d=0;b.find(".event-item").each(function(a){var b=$(this,a).outerHeight(!0);c+=b,d<b&&(d=b)}),a.height(d),b.height(c);var e=.03,f=2e3,g=this,i,j=!0,k=d/e,l=0;b.find("li").length===1?setTimeout(function(){g._renderTicker(g._event),g._tickerScroll(g.$find(".tickercontainer"))},f):(b.css("top",d),i=setTimeout(function(){m()},f),b.hover(function(){j=!1,clearTimeout(i)},function(){j=!0,i=setTimeout(function(){m()},f)}))},_getEventIds:function(a){var b=[];return $.each(a,function(a,c){b.push(a)}),b.join()},_startPolling:function(a){var b=this;b._timerId=setInterval(function(){var c={statuses:!1,stories:!0,is_t1:twttr.isT1,trim_user:!0,event_ids:b._getEventIds(a.events.items),success:function(a){if(a.stories.length()===0)return;var c=a.stories.get(0),d=$.extend(!0,b._event.events.data().items,b.getEvent(c).events.data().items);b._event.events.data().items=d,b._renderMatchedEvent(b._event),b.$find(".ticker").length===0&&b._renderTicker(b._event),b.$find(".ticker").length!==0&&!b._scrollStarted&&b._tickerScroll(b.$find(".tickercontainer")),b._event.events.getMatchState().current_status==="final"&&(clearInterval(b._timerId),$(".score a").removeClass("live"))}};$(b.$node).parents("body").size()===0||!twttr.decider.isAvailable("sports_onebox_polling")?clearInterval(b._timerId):new Date-a.events.getMatchedEventData().scheduled_start_time_utc>0&&twttr.API.Search.search(query,c)},3e4)}});a(d)})}),provide("components/onebox/Event",function(a){using("_","helpers").as(function(b,_){var c=twttr.klass.component("twttr.components.onebox.Event").initializer(function(a,b){this.scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({section:"onebox",component:"event"},{query:b});var c=a.content.events[0];c&&this.$node.append((new twttr.views.CardEventOnebox(c)).html())}).deciderKey("swift_events_reroute").click({".js-onebox-event-item":function(a){trackClient({section:"onebox",component:"event",action:"click"})}}).methods({render:function(){this.$node.css("visibility","")}});a(c)})}),provide("components/t1/EmptyTimelineRecommendations",function(a){using("components/UserRecommendations").as(function(b){twttr.klass("twttr.components.t1.EmptyTimelineRecommendations").subclassOf(twttr.components.UserRecommendations).initializer(function(a){var b=this;this.bucket=twttr.abdecider.chooseWithoutImpression("empty_timeline_176"),this.one("recommendationsLoaded.EmptyTimelineRecommendations",function(){using(">allCurrentUserDataLoaded",function(){twttr.currentUser.friends({success:function(a){b.friends=a,b.conditionallyEnableDoneButton(),twttr.API.User.bind("follow.EmptyTimelineRecommendations",function(a,c){b.friends.push(c);var d=b.$find('.js-list-item[data-user-id="'+c.id+'"]');d.length!==0&&(b.followEvent=!0,b.loadRecommendations(d)),b.conditionallyEnableDoneButton(),b.renderModuleHeaders()}),twttr.API.User.bind("unfollow.EmptyTimelineRecommendations",function(a,c){b.friends=b.friends.filter(function(a){return a.id!==c.id}),b.conditionallyDisableDoneButton(),b.renderModuleHeaders()})}})})}),this._superInitializer(a)}).destructor(function(){this.unbind(".EmptyTimelineRecommendations"),twttr.API.User.unbind(".EmptyTimelineRecommendations")}).statics({avatarLimit:5}).methods({forceNewSignup:!0,LIST_ITEM_SELECTOR:".js-empty-timeline .js-list-item",conditionallyEnableDoneButton:function(){this.friends.length()>twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1&&this.$find(".js-done").removeClass("disabled")},conditionallyDisableDoneButton:function(){this.friends.length()<twttr.components.t1.EmptyTimelineRecommendations.avatarLimit&&this.$find(".js-done").addClass("disabled")},renderItemView:function(a){var b=new twttr.views.BigAvatarListItem(a);return b.dismissable=!1,b},renderModuleView:function(a,b){var c=this,d={},e;d.following=this.setupFollowingContext(),d.avatar_limit=twttr.components.t1.EmptyTimelineRecommendations.avatarLimit,d.recommendations=[],b.each(function(a){var b=c.renderItemView(a);d.recommendations.push(b)}),(new twttr.views.EmptyTimelineRecommendationsModuleShort(d)).render(this.$node,"append")},getRecPosition:function(a){var b;return this.$find(".js-account-group").each(function(c,d){if(a.attr("data-user-id")==$(d).attr("data-user-id"))return b=c,!1}),b},renderModuleHeaders:function(){var a={},b=this.$find("h2"),c=this.$find("h3");a.following=this.setupFollowingContext(),b.length>0&&b.html((new twttr.views.EmptyTimelineTitle(a)).html()),c.length>0&&c.html((new twttr.views.EmptyTimelineSubtitle(a)).html())},setupFollowingContext:function(){if(twttr.currentUser.friendsCount!==0)return{goal:twttr.components.t1.EmptyTimelineRecommendations.avatarLimit,count:twttr.currentUser.friendsCount,follow_event:this.followEvent||!1,zero:twttr.currentUser.friendsCount===0,one:twttr.currentUser.friendsCount===1,two:twttr.currentUser.friendsCount===2,several:twttr.currentUser.friendsCount>=3&&twttr.currentUser.friendsCount<twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1,almost:twttr.currentUser.friendsCount===twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1,done:twttr.currentUser.friendsCount>=twttr.components.t1.EmptyTimelineRecommendations.avatarLimit}},_generateUserList:function(a){var b=this;return(new twttr.views.EmptyTimelineRecommendationsModuleFollowers({recommendations:a.map(function(a){return b.renderItemView(a)}).toArray()})).$html()}}).click({".js-done":function(a,b){if(b.hasClass("disabled"))return;twttr.mixins.emptyTimelineRecommendations.showing=!1,this.destroy()}}),a(twttr.components.t1.EmptyTimeline)})}),provide("components/t1/dashboard/AbstractDashboard",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.AbstractDashboard").subclassOf(twttr.components.Base).setBaseView(twttr.views.Module).initializer(function(a){var b=this;a=a||{},this.$sections={},this.$itemsContainer=this.$find(".js-items-container"),this.$itemsContainer.length||(this.$itemsContainer=this.$node),this.noSpacer=!0}).methods(twttr.EventProvider).methods({addSection:function(a){if(!a.id||!!this.$sections[a.id])return!1;a.tag=a.tag||"div",a.operation=a.operation||"append";var b=(new twttr.views.ModuleSection({tag:a.tag,id:a.id})).$html();return a.className&&b.addClass(a.className),this.$sections[a.id]=b,a.operation=a.operation||"append",this.$itemsContainer[a.operation](b),b},getSection:function(a){return this.$sections[a]?this.$sections[a]:!1},removeSection:function(a){if(!this.$sections[a])return!1;this.$sections[a].remove(),delete this.$sections[a]}});a(c)})}),provide("components/t1/dashboard/Tweetbox",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Tweetbox").subclassOf(twttr.components.t1.dashboard.AbstractDashboard).initializer(function(a){this.$node.html(a.addClass("flex-module"))});a(c)})}),provide("components/t1/dashboard/ProfileTweetbox",function(a){using("components/t1/dashboard/Tweetbox").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileTweetbox").subclassOf(b.components.t1.dashboard.Tweetbox).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/ProfileFollowCard",function(a){using("components/t1/dashboard/AbstractDashboard","mixins/userActionable","mixins/userUpdateable").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileFollowCard").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseViewOptions({class_name:"profile-card"}).mixin(b.mixins.userActionable,b.mixins.userUpdateable).initializer(function(a){function d(){b.registerUserActionEvents(),b.registerUserUpdateEvents(b.user),b.bind("userUpdated",function(a,c){b.user=c,b.renderStats()})}var b=this;this._superInitializer(),this.user=a;if(twttr.helpers.isCurrentUser(a)){var c=this.renderCard();(new twttr.views.ScreenNameFollowedBy({screen_name:a.screenName,is_current_user:!0})).render(c.$dom.find(".js-username")),d()}else this.getRelationship(a,function(c,e){b.updateUserAttributesFromRelationship(c);var f=b.renderCard();(new twttr.views.ScreenNameFollowedBy({screen_name:a.screenName,followed_by:c.followedBy})).render(f.$dom.find(".js-username")),b.renderUserProfileMenu(b.$find(".js-follow-combo"),b.$find(".js-action-profilemenu"),e),d()})}).methods({renderCard:function(){var a=this,b=new twttr.views.ProfileFollowCard(this.user),c=this.user.impressionId;return b.render(this.$node),setTimeout(function(){a.trigger("followCardRendered")},0),b},renderStats:function(){this.$find(".js-mini-profile-stats").remove(),(new twttr.views.MiniProfileStats(this.user)).render(this.$find(".js-profile-card-actions"),"append")}});a(c)})}),provide("components/t1/dashboard/Flex",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Flex").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.FlexModule).initializer(function(a){this._superInitializer(a)}).methods({addTitle:function(a){this.$itemsContainer.find(".flex-module-title").remove(),(new twttr.views.FlexModuleTitle({title:a.title,view_all_route:a.viewAllRoute})).render(this.$itemsContainer,"prepend")},addMoreLinks:function(a){this.$itemsContainer.find(".js-more-links").remove(),a.length&&(a[a.length-1].is_last=!0),(new twttr.views.FlexModuleMoreLinks({links:a})).render(this.$itemsContainer,"append")}});a(c)})}),provide("components/t1/dashboard/Nav",function(a){using("util").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Nav").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.$itemsContainer=this.$find(".js-items-container"),a.items&&(a.items=twttr.map(a.items,function(a){twttr.is.def(a.name)||(a.name=twttr.router.findMatchingRoute(a.route).name);if(a.type||a.name)a.element_term=b.util.underscore(a.type||a.name)+"_item";return twttr.merge({show_metadata_container:a.metadata,active:twttr.router.getCurrentRoute().name==a.name,count_commaized:a.count?b.util.formatNumber(a.count,twttr.pageLocale):"",visible:!0},a)})),(new twttr.views.Nav(a)).render(this.$node),this.afterRender(this.$node)}).methods({afterRender:$.noop});a(c)})}),provide("components/t1/dashboard/MiniHomeProfile",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass.component("twttr.components.t1.dashboard.MiniHomeProfile").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.MiniHomeProfile).initializer(function(a){var b=this;this._superInitializer(),this.showStats=!!a,this.user=twttr.currentUser,this.renderUser(),this.showStats&&(this.renderStats(),this.attachEvents()),using([twttr.bundleMore,"TweetBox"],function(){b.renderTweetBox()})}).methods({insertTweetbox:function(){if(this.tweetBox)return this.tweetBoxNode;var a=this,b=this.tweetBoxNode=$('<div class="tweet-box"/>');return this.tweetBox=new twttr.TweetBox(b.empty(),twttr.merge(this.getTweetBoxOptions(),{defaultContent:"",id:"main-tweet-box",condensed:!0,statusAction:"update",width:258,height:75,explainLinkShortening:!1,enableDraft:!0,enableAutoGrow:!0,template:{suppress_geo_text:!0,button_text:_("Tweet"),show_title:!1}})),this.tweetBox.bind("tweetSuccess",function(a,b){twttr.showMessage(_("Your Tweet has been sent!"))}),b},getTweetBoxOptions:function(){return{condensedContent:_("Compose new Tweet..."),autocompleteSuggestionLimit:5}},renderUser:function(){(new twttr.views.MiniCurrentUser(this.user)).render(this.$find(".js-profile-summary"),"append")},renderStats:function(){(new twttr.views.MiniProfileStats(this.user)).render(this.$find(".js-mini-profile-stats-container"))},renderTweetBox:function(){this.$tweetBox=this.insertTweetbox(),this.$find(".js-mini-profile-tweet-box").remove(),this.$itemsContainer.append(this.$tweetBox.addClass("tweet-user"))},tweetHandler:function(){twttr.currentUser.sync("statusesCount",twttr.currentUser.statusesCount+1),this.renderStats()},deleteTweetHandler:function(){twttr.currentUser.sync("statusesCount",twttr.currentUser.statusesCount-1),this.renderStats()},attachEvents:function(){var a=this;$(document).bind("currentUserUpdated",function(){a.renderStats()}),twttr.API.Status.bind("update retweet",function(){a.tweetHandler()}),twttr.API.Status.bind("delete unretweet",function(){a.deleteTweetHandler()})},_isCJK:function(){var a=twttr.pageLocale;return a==="ja"||a==="ko"||a==="zh-cn"||a==="zh-tw"}}).click({".js-profile-summary":function(){twttr.router.routeTo(twttr.router.profilePath({screen_name:this.user.screenName}))}});a(c)})}),provide("components/t1/dashboard/ConnectNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ConnectNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"connect-nav",items:[{title:_("Interactions"),route:twttr.router.connectPath(),visible:twttr.decider.isActivityEnabled(),type:"activity"},{name:"mentions",title:_("Mentions"),route:twttr.router.mentionsPath(),active:twttr.router.getCurrentRoute().name==="replies"||twttr.router.getCurrentRoute().name=="mentions",type:"mentions"}]})});a(c)})}),provide("components/t1/dashboard/ProfileNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"profile-nav",items:[{title:_("Tweets"),route:twttr.router.profilePath({screen_name:a.screenName})},{title:_("Following"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followingPath":"userFollowingPath"]({screen_name:a.screenName})},{title:_("Followers"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followersPath":"userFollowersPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="followers"||twttr.router.getCurrentRoute().name=="userFollowers"||twttr.router.getCurrentRoute().name=="followersYouFollow",show_metadata_container:!0},{title:_("Favorites"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"favoritesPath":"userFavoritesPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="favorites"||twttr.router.getCurrentRoute().name=="userFavorites"},{title:_("Requests"),route:twttr.router.followerRequestsPath({screen_name:a.screenName}),visible:twttr.helpers.isCurrentUser(a)&&a["protected"]},{title:_("Lists"),route:twttr.router.subscriptionsPath({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="subscriptions"||twttr.router.getCurrentRoute().name=="memberships"}]}),twttr.helpers.canViewUser(a)&&this.renderMedia()}).methods({renderMedia:function(){this.$find("ul").append((new twttr.components.UserMedia(twttr.profileUser,{view_all_href:twttr.router.userMediaGridPath({screen_name:twttr.profileUser.screenName}),renderHr:!0})).$node)}});a(c)})}),provide("components/t1/dashboard/SettingsNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SettingsNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"settings-nav",items:[{title:_("Accounts & Settings"),route:twttr.router.settingsPath()}]})});a(c)})}),provide("components/t1/dashboard/ListNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ListNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"list-nav",items:[{title:_("Tweets"),route:twttr.router.userListPath({screen_name:a.user.screenName,list_slug:a.slug})},{title:_("List members"),route:twttr.router.listMembersPath({screen_name:a.user.screenName,list_slug:a.slug})},{title:_("List subscribers"),route:twttr.router.listSubscribersPath({screen_name:a.user.screenName,list_slug:a.slug})}]})});a(c)})}),provide("components/t1/dashboard/SearchNav",function(a){using("components/t1/dashboard/Nav","components/SearchFacets").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._query=a,this._superInitializer.call(this,{name:"search-nav",items:[{title:_("Tweets"),route:twttr.router.searchResultsPath({query:a}),type:"tweets"},{title:_("People"),route:twttr.router.userSearchPath({query:a}),name:"userSearch",show_metadata_container:!0,type:"people"}]}),this.renderFacets(a)}).methods({loadUsers:function(a,b){var c=this,d={display_location:"search-component",pc:!1};twttr.API.User.search(a,twttr.merge(d,{success:function(a){var c=new twttr.components.t1.AvatarRow(a);b.find(".js-metadata").html(c.$node)}}))},afterRender:function(a){query=this._query.replace(/(^|\b)(from\:|to\:|near\:|source\:)/g,"");if(query.indexOf(":")!=-1)return;this.loadUsers(query,a)}}).methods({renderFacets:function(a){var c=this,d=!1;this.facets=new b.components.SearchFacets(a),this.facets.bind("urlsLoaded",function(a,b,e){b?d||(c.facets.$node.appendTo(c.$find(".js-items-container")),d=!0):e&&c.facets.$node.remove()})}});a(c)})}),provide("components/t1/dashboard/DiscoverNav",function(a){using("components/t1/dashboard/Nav","components/t1/AvatarRow").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.DiscoverNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"discover-nav",items:[{title:_("Stories"),route:twttr.router.discoverPath(),type:"discover"},{title:_("Activity"),route:twttr.router.networkActivityPath(),visible:twttr.decider.isActivityEnabled(),type:"activity"},{title:_("Who to follow"),route:twttr.router.whoToFollowSuggestionsPath(),show_metadata_container:!0,type:"suggestions"},{title:_("Find friends"),route:twttr.router.whoToFollowImportPath(),type:"import"},{title:_("Browse categories"),route:twttr.router.whoToFollowInterestsPath(),active:twttr.router.getCurrentRoute().name=="whoToFollowInterestsCategory"||twttr.router.getCurrentRoute().name=="whoToFollowInterests",type:"interests"}]}),twttr.loggedIn&&this.renderWTFFacePile()}).methods({renderWTFFacePile:function(){var a=this;twttr.currentUser.recommendedUsers2(function(b){var c=b.map(function(a){return a.user}),d=new twttr.components.t1.AvatarRow(c);a.$find('[data-name="whoToFollowSuggestions"] .js-metadata').html(d.$node)})}});a(c)})}),provide("components/t1/dashboard/ProfileSummary",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileSummary").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleProfileSummary).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/ListFollowCard",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass.component("twttr.components.t1.dashboard.ListFollowCard").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseViewOptions({class_name:"follow-card"}).initializer(function(a){this._superInitializer(),this.render(a),this._registerEvents(a)}).methods({render:function(a){(new twttr.views.ListFollowCard(a)).render(this.$node)},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"update follow unfollow add remove",function(c,d){d.id===a.id&&((c.type==="follow"||c.type==="unfollow")&&d.sync("following",c.type==="follow"),b.render(d))})}});a(c)})}),provide("components/t1/dashboard/SearchImages",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchImages").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleSearchImages).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/SearchVideos",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchVideos").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleSearchVideos).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/AvatarRow",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.AvatarRow").subclassOf(twttr.components.Base).initializer(function(a,b){var b=b||{};this.avatarLimit=b.avatarLimit||7,this.renderFacePile(a)}).methods({renderFacePile:function(a){var b=a.slice(0,this.avatarLimit);b.length()>0&&((new twttr.views.AvatarRow(b)).render(this.$node,"html"),this.$find(".js-user-tipsy").tipsy({gravity:"s"}))}});a(c)})}),provide("components/t1/SearchHeader",function(a){using("helpers").as(function(b){var c=twttr.klass("twttr.components.t1.SearchHeader").subclassOf(twttr.components.Base).mixin(twttr.mixins.i18nTweetBox).setBaseView(twttr.views.SearchHeader).initializer(function(a){this.setQuery(a),this.registerEvents(),this.registerSearchMenuAction(),twttr.search.isSavedSearch(a)&&this.toggleSavedSearchOn()}).methods({registerEvents:function(){var a=this;this.$find(".js-search-header-query").bind("keydown keypress keyup",function(b){a.markPunctuation(b,$(this))});var c=this.$find("form.js-search-form");b.helpers.addFormEvents(c,function(a,b){var c=b.q;c?(twttr.search.setLastQuerySource(twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.doSearch(c)):twttr.showMessage(_("Enter your query before submitting the search form!"))}),twttr.search.formifyLatestQuery(c)},toggleSavedSearchOn:function(){this.$find(".js-toggle-saved-search-link").html(_("Remove saved search")).addClass("saved").removeClass("not-saved"),this.$find(".js-search-title").html(_("Saved search results"))},toggleSavedSearchOff:function(){this.$find(".js-toggle-saved-search-link").html(_("Save search")).addClass("not-saved").removeClass("saved"),this.$find(".js-search-title").html(_("Search results"))},registerSearchMenuAction:function(){var a=this;this.$node.delegate(".js-search-dropdown-button","click",function(b){return a.toggleSearchMenu(),b.preventDefault(),b.stopPropagation(),!1})},showSearchMenu:function(a){var b=this;a.addClass("open"),$(document).bind("click.button",function(){b.hideSearchMenu(a)})},hideSearchMenu:function(a){a.removeClass("open"),$(document).unbind("click.button")},toggleSearchMenu:function(a){var b=this,c=this.$node.find(".js-search-dropdown");c.hasClass("open")?this.hideSearchMenu(c):this.showSearchMenu(c)},setQuery:function(a){this.$find(".js-search-header-query").val(a)},focusQuery:function(){this.$find(".js-search-header-query").focus()}});a(c)})}),provide("components/t1/PeopleSearchStreamHeader",function(a){using("helpers").as(function(b){var c=twttr.klass("twttr.components.t1.PeopleSearchStreamHeader").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},b.placeholder=b.placeholder||_("Search using a person’s full name or @username"),b.button_text=b.buttonText||_("Search Twitter"),this.searchRoute=b.searchRoute=a,(new twttr.views.StreamHeaderPeopleSearch(b)).render(this.$node,"append"),this.registerEvents()}).methods({registerEvents:function(){var a=this.$find("form.js-search-form"),c=this;b.helpers.addFormEvents(a,function(b,d){!a.find('input[name="q"]').hasClass("js-placeholded")&&d.q!=""&&(trackClient({component:"user_search_form",action:"search"},{query:d.q}),twttr.router.routeTo(c.searchRoute({query:d.q})))})}});a(c)})}),provide("components/t1/UserSimilaritiesList",function(a){using("_","mixins/userRecommendationsHelper","mixins/userActionable").as(function(b,_){var c=twttr.klass("twttr.components.t1.UserSimilaritiesList").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},this.profileUser=a,this.screenName=this.profileUser.screenName,this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.profileUser.id}),this.whotofollowComponentName="whotofollow_dropdown",this.ignoreScribeItemPosition=!0,this.initTime=+(new Date),this.userRecommendationsAvailable()?this.loadRecommendations():this.trigger("notRendered","darkmoded"),this.registerUserActionEvents(),this.registerUserRecommendationsActions()}).mixin(b.mixins.userRecommendationsHelper,b.mixins.userActionable).click({".js-close":function(a){a.preventDefault(),this.trigger("close")}}).methods({renderView:function(a){var b=(new twttr.views.UserSimilaritiesList).$html(),c=b.find(".js-users-list");a.map(function(a){var b=new twttr.views.StreamUser(a);(new twttr.views.StreamItem({item_html:b.html(),item_type:"user",item_class:"stream-item"})).render(c,"append")}),c.children(":last-child").addClass("stream-end-item"),this.$node.append(b)},loadRecommendations:function(a){this.fetch({limit:2,success:twttr.bind(this,function(a){var b=this.recsToUsers(a);this.trackImpressions(b,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:this.profileUser.id}),b.length()>0?(this.renderView(b),this.hasRendered(),this.trigger("recommendationsLoaded")):this.trigger("notRendered","noMoreRecommendations")}),error:twttr.bind(this,function(a){this.trackImpressions(null,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:this.profileUser.id,error_status:a.status}),this.trigger("notRendered",a)})})}});a(twttr.components.UserSimilaritiesList)})}),provide("components/pages/mixins/profileT1",function(a){using("_","components/t1/dashboard/ProfileNav","components/t1/dashboard/ProfileFollowCard","components/SignupCallOut").as(function(b,_){var c=twttr.klass.mixin("twttr.components.pages.mixins.profileT1",function(){this.view(twttr.views.PageProfile).methods({allLists:function(a){var b=this,c=this._defaultedScreenName(a.screen_name);this.getUserInfo(c,function(){twttr.helpers.canViewUser(b.profileUser)?(b.updatePageTitle(_("Twitter / {{screenName}}'s Subscriptions",{screenName:c})),b._highlightNavIfCurrentUser(c),b.selectCurrentSideNav(),b._switchToStream({screenName:c,stream:twttr.streams.AllSubscriptionsUser})):twttr.router.routeTo(twttr.router.profilePath({screen_name:c}))},{batch:!twttr.loggedIn,profiler:!0})},memberships:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Lists following {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.MembershipsUser})},with_replies:function(a,b){var c=this,d=a.screen_name.toLowerCase();this.loading(d),this.getUserInfo(d,function(){c.updatePageTitle(_("{{{fullName}}} ({{{screenName}}}) on Twitter",{fullName:c.profileUser.name,screenName:d})),c._highlightNavIfCurrentUser(d),c._switchToStream({screenName:d,stream:twttr.streams.User,tab:"tweets"}),c.selectSideNav("profile"),c.checkWithheld()},{batch:!twttr.loggedIn,profiler:!0},twttr.bind(this,this.noUserFoundCallback))},similarTo:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Similar to {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this.selectCurrentSideNav(),this._switchToStream({screenName:c,stream:twttr.streams.UserSimilaritiesStream})},getTweetBoxOptions:function(){return{width:258,height:75,explainLinkShortening:!1,condensedContent:"@"+this.profileUser.screenName+" ",dynamicTitle:!1,autoCompleteSuggestionLimit:5,template:{suppress_geo_text:!0,name:this.profileUser.name,button_text:_("Tweet")}}},getDashboardComponents:function(){var a=[],c=this;twttr.loggedIn||a.push(new b.components.SignupCallOut("profile",{profileUser:this.profileUser})),this.shouldShowTweetBox()&&a.push(new twttr.components.t1.dashboard.ProfileTweetbox(this.renderTweetbox()));var d=new twttr.components.UserRecommendations({screenName:twttr.profileUser.screenName});return d.bind("recommendationsLoaded",function(){"similarTo"===twttr.router.getCurrentRoute().name&&c.selectSideNav("similarTo")}),a.concat([new twttr.components.t1.dashboard.ProfileNav(this.profileUser),new twttr.components.JapaneseAd,d,new twttr.components.Footer])},addSimilarUsersDropdown:function(){var a=this,b=new twttr.components.t1.UserSimilaritiesList(this.profileUser);b.bind("recommendationsLoaded",function(){a.userSimilaritiesListComponent=b,(!$.browser.msie||$.browser.version!=7)&&b.$node.hide(),a.addContainerComponent(a.$find(".js-content-main"),b,"before"),(!$.browser.msie||$.browser.version!=7)&&b.$node.slideDown(300),twttr.router.one("routed",function(){a.removeSimilarUsersDropdown()})}),b.bind("notRendered",function(){b.destroy()}),b.bind("close",function(){a.removeSimilarUsersDropdown()})},removeSimilarUsersDropdown:function(){var a=this.userSimilaritiesListComponent;this.userSimilaritiesListComponent=null,a&&($.browser.msie&&$.browser.version==7?a.destroy():a.$node.slideUp(300,function(){a.destroy()}))},addBanner:function(){var a=this.bannerPreviewUrl||this.profileUser.profileBannerUrl;if(a){var b=(new twttr.views.ProfileBanner({banner_url:decodeURIComponent(a)})).html();this.$topContent.find(".profile-card").append(b)}},addImpressionData:function(a){a.profile_id=this.profileUser&&this.profileUser.id||twttr.profileUser&&twttr.profileUser.id}}).addAfterRender(function(){var a=this,c=new b.components.t1.dashboard.ProfileFollowCard(this.profileUser);c.bind("follow.user",function(){a.addSimilarUsersDropdown()}),c.bind("unfollow.user",function(){a.removeSimilarUsersDropdown()}),c.bind("followCardRendered",function(){a.addBanner()}),this.addTopContentComponent(c)}).addOnSwitchTo(function(){var a=this;$(document).bind("tweetSuccess",function(b,c){var d=a.streamManager.getCurrent().trigger("didTweet",[c])})}).addOnSwitchAway(function(){$(document).unbind("tweetSuccess")})});a(c)})}),provide("components/pages/mixins/profileP1",function(a){using("_","constants").as(function(b,_){var c=twttr.klass.mixin("twttr.components.pages.mixins.profileP1",function(){this.methods({getTweetBoxOptions:function(){return{width:482,condensedContent:_("Tweet to {{screen_name}}",{screen_name:"@"+this.profileUser.screenName}),template:{button_text:_("Tweet"),show_title:!1}}},getDashboardComponents:function(){var a=[];a.push(new twttr.components.JapaneseAd),this.renderTweetbox(),twttr.loggedIn||a.push(new twttr.components.SignupCallOut("profile",{profileUser:twttr.profileUser}));var c=twttr.helpers.userNoobLevel(twttr.currentUser),d=twttr.helpers.isProfileUser();return d&&c>=b.constants.noob.total?a=a.concat(this.getNoobDashboardComponents(c)):(a.push(new twttr.components.DashboardProfileStats(twttr.profileUser)),a.push(new twttr.components.UserMedia(twttr.profileUser,{renderHr:!0})),this._isSocialContextAvailable()&&a.push(new twttr.components.SocialContext),twttr.loggedIn&&twttr.decider.isAvailable("whotofollow_similarities")&&a.push(new twttr.components.UserRecommendations({screenName:twttr.profileUser.screenName})),twttr.loggedIn&&a.push(new twttr.components.RecentProfileActivity(twttr.profileUser)),twttr.API.User.bind("block",this.userWasBlocked)),a.push(new twttr.components.Footer),a},getNoobDashboardComponents:function(a){var c=[],d=twttr.profileUser;c.push(new twttr.components.DashboardProfileStats(d,this.dashStatsTitle()),new twttr.components.UserMedia(twttr.profileUser,{renderHr:!0}));var e=b.constants.noob;switch(a){case e.invited:case e.silent:case e.popular:case e.struggling:c.push(new twttr.components.RecentProfileActivity(d));break;case e.friendless:case e.lonely:c.push(new twttr.components.RecentlyFollowed);break;case e.total:case e.talking:default:}return c.push(new twttr.components.GettingStarted(a)),c},memberships:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Lists following {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.Memberships})}}).click({".stream-tab-lists":function(a,b){$(a.target).is(".tab-text, .tab-text *")&&twttr.viewHelpers.superListDropdown(twttr.profileUser,b,function(a){a.render(b,"append"),a.open()})},".stream-tab-following.dropdown-link":function(a,b){a.preventDefault();if(this._followingDropDown)return;var c=twttr.profileUser.screenName,d=[{name:_("View as list of people &rarr;"),href:twttr.router.userFollowingPath({screen_name:c})},{name:_("View as timeline &rarr;"),href:twttr.router.userFollowingTweetsPath({screen_name:c})}];$(a.target).hasClass("tab-text")&&(this._followingDropDown=new twttr.control.Dropdown(b,{itemView:"StreamLink",items:d}),this._followingDropDown.render(b,"append"),this._followingDropDown.open())},".stream-tab-followers.dropdown-link":function(a,b){if(!this._isSocialContextAvailable())return;var c=twttr.profileUser.screenName;if(this._followersDropDown)return;$(a.target).hasClass("tab-text")&&(this._followersDropDown=new twttr.control.Dropdown(b,{itemView:"StreamLink",items:[{name:_("All followers &rarr;"),href:twttr.router.userFollowersPath({screen_name:c})},{name:_("Followers you follow &rarr;"),href:twttr.router.followersYouFollowPath({screen_name:c})}]}),this._followersDropDown.render(b,"append"),this._followersDropDown.open())}})});a(c)})}),provide("components/t1/dashboard/ProfileNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"profile-nav",items:[{title:_("Tweets"),route:twttr.router.profilePath({screen_name:a.screenName})},{title:_("Following"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followingPath":"userFollowingPath"]({screen_name:a.screenName})},{title:_("Followers"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followersPath":"userFollowersPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="followers"||twttr.router.getCurrentRoute().name=="userFollowers"||twttr.router.getCurrentRoute().name=="followersYouFollow",show_metadata_container:!0},{title:_("Favorites"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"favoritesPath":"userFavoritesPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="favorites"||twttr.router.getCurrentRoute().name=="userFavorites"},{title:_("Requests"),route:twttr.router.followerRequestsPath({screen_name:a.screenName}),visible:twttr.helpers.isCurrentUser(a)&&a["protected"]},{title:_("Lists"),route:twttr.router.subscriptionsPath({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="subscriptions"||twttr.router.getCurrentRoute().name=="memberships"}]}),twttr.helpers.canViewUser(a)&&this.renderMedia()}).methods({renderMedia:function(){this.$find("ul").append((new twttr.components.UserMedia(twttr.profileUser,{view_all_href:twttr.router.userMediaGridPath({screen_name:twttr.profileUser.screenName}),renderHr:!0})).$node)}});a(c)})}),provide("components/pages/mixins/listT1",function(a){using("components/t1/dashboard/ListNav","components/t1/dashboard/ListFollowCard","components/NewestListMembers","components/MoreLists","components/Footer").as(function(b){var c=twttr.klass.mixin("twttr.components.pages.mixins.listT1",function(){this.view(twttr.views.Page).methods({_registerEvents:function(a){var c=this;twttr.API.List.bind("update",function(d,e){if(e.id===a.id){var f=c.$find(".list-nav").closest(".component"),g=c.$find(".dashboard > *").index(f);f.remove(),c.addDashboardComponent(new b.components.t1.dashboard.ListNav(e),g+1)}})},getDashboardComponents:function(a){return this.listFollowCard=new b.components.t1.dashboard.ListFollowCard(a),[this.listFollowCard,new b.components.t1.dashboard.ListNav(a),new b.components.NewestListMembers(a),new b.components.MoreLists(a),new b.components.Footer]},addImpressionData:function(a){a.profile_id=this.owner&&this.owner.id||twttr.profileUser&&twttr.profileUser.id,a.message=this._listSlug}})});a(c)})}),provide("multiGlobals/MessageManagerMonitor",function(a){using().as(function(a){if(twttr.isT1){var b;twttr.decider.isAvailable("phoenix_use_conversation_endpoint")?b=twttr.messageManager=new twttr.ConversationManager:b=twttr.messageManager=new twttr.MessageManager,b.bind("pendingThreads",function(){var a=b.hasPendingThreads();a?($("div.js-topbar li.js-session").addClass("new"),$("div.js-topbar span.js-direct-message-count").addClass("new").text(a)):($("div.js-topbar li.js-session").removeClass("new"),$("div.js-topbar span.js-direct-message-count").removeClass("new").text(""))}),b.setupContinuousPoll()}}),a()}),provide("google",function(a){using().as(function(b){using(twttr.bundleMore,function(){if(twttr.isTestEnv)return;jQuery.active>0?$(document).one("ajaxComplete",twttr.insertGAScriptElement):twttr.insertGAScriptElement()}),a()})}),provide("ttft_ajax",function(a){using().as(function(b){using(twttr.bundleMore,function(){var a=0,b=0,c=function(){++b>=a&&(window.ttft.ajaxComplete(a),$(document).unbind("ajaxComplete",c))};window.ttft&&$.active&&($(document).ajaxComplete(c),activeAjaxCount=$.active)}),a()})}),provide("mixins/ActivityViewHelpers",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.ActivityViewHelpers",function(){var a=3,b="sources",c="targets",d="target_objects",e="StreamTweet",f="ActivityItemTweet",g="StreamUser",i="StreamList",j="ActivityItemUser",k="ActivityItemTruncatedTweet",l="User",m="List",n="Status",o={User:{Status:["user"],List:["user"],User:[]},Status:{Status:[],User:["status"],List:[]},List:{Status:[],User:["user"],List:[]}},p={User:twttr.isT1?"ActivityUserLink":"UserLink",List:"ListLink"},q={your_activity:p,profile_activity:p,activity:p,dashboard:{User:"UserFullName",List:"ListLink"}},r={User:"screen_name",List:"list_title"};twttr.isT1&&(f="StreamTweet",j="UserAvatarLink24",k="LatestTweet");var s={your_activity:{favorite:{sources:{view:j,objectType:l,object:b,max:15,useTruncated:!0},targets:{view:k,objectType:n,object:c,max:1,useTruncated:!1}},mention:{view:e,objectType:n,object:d,max:1},reply:{view:e,objectType:n,object:c,max:1},retweet:{sources:{view:j,objectType:l,object:b,max:15,useTruncated:!0},targets:{view:k,objectType:n,object:d,max:1,useTruncated:!1}},follow:{view:j,objectType:l,object:b,max:15},list_member_added:{view:j,objectType:l,object:c,max:15},list_created:{view:i,objectType:m,object:c,max:1}},profile_activity:{favorite:{view:f,objectType:n,object:c,max:1},mention:{view:f,objectType:n,object:d,max:1},reply:{view:f,objectType:n,object:c,max:1},retweet:{view:f,objectType:n,object:d,max:1},follow:{view:g,objectType:l,object:c,max:12},list_member_added:{view:g,objectType:l,object:c,max:12},list_created:{view:i,objectType:m,object:c,max:1}},activity:{favorite:{primary:{view:f,objectType:n,object:c,max:1},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},mention:{view:f,objectType:n,object:d,max:1},reply:{view:f,objectType:n,object:c,max:1},retweet:{primary:{view:f,objectType:n,object:d,max:1},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},follow:{primary:{view:twttr.isT1?"StreamUser":"ActivityItemUser",objectType:l,object:c,max:twttr.isT1?10:12},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},list_member_added:{view:twttr.isT1?"StreamUser":"ActivityItemUser",objectType:l,object:c,max:10},list_created:{view:i,objectType:m,object:c,max:1}},dashboard:{favorite:{max:0},mention:{max:0},reply:{max:0},retweet:{max:0},follow:{max:0},list_member_added:{max:12},list_created:{max:1}}},t={sources:b,targets:c,target_objects:d},u={favorite:t,mention:t,reply:t,retweet:t,follow:t,list_member_added:t,list_created:t},v=[[[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]]],w=[[_("{{{sources_screen_name_0}}} created list {{{targets_list_title_0}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}} and {{{targets_list_title_1}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}}, {{{targets_list_title_1}}} and {{{targets_list_title_2}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others.</span>{{#link_targets_count}}</a>{{/link_targets_count}}")]],x={favorite:{your_activity:[[_("{{{sources_screen_name_0}}} favorited your Tweet"),_("{{{sources_screen_name_0}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited your Tweet"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited your Tweet"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited your Tweet"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited your Tweets")]],profile_activity:[_("{{{sources_screen_name_0}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:")],activity:[_("{{{sources_screen_name_0}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>favorited</span> <span class='dashboard-activity-item-entity'>{{full_targets_count}} Tweets</span>")],_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} <span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>")]},mention:{your_activity:[_("{{{sources_screen_name_0}}} mentioned you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} mentioned you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} mentioned you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;mentioned you")],profile_activity:null,activity:null},reply:{your_activity:[_("{{{sources_screen_name_0}}} replied to you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} replied to you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} replied to you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;replied to you")],profile_activity:null,activity:null},retweet:{your_activity:[_("{{{sources_screen_name_0}}} retweeted you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} retweeted you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} retweeted you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;retweeted you")],profile_activity:[_("{{{sources_screen_name_0}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:")],activity:[_("{{{sources_screen_name_0}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{target_objects_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{full_target_objects_count}} people</span>")],_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{target_objects_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{full_target_objects_count}}} people</span>")]},follow:{your_activity:[_("{{{sources_screen_name_0}}} followed you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} followed you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} followed you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;followed you")],profile_activity:[_("{{{sources_screen_name_0}}} followed:")],activity:[_("{{{sources_screen_name_0}}} followed:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} followed:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} followed:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;followed:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{full_targets_count}} people</span>")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} other</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} other</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{targets_count}} people</span>")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{targets_count}} people</span>")]]},list_member_added:{your_activity:[[[_("{{{sources_screen_name_0}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]]],profile_activity:v,activity:v,dashboard:[[[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to a list"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to {{#link_target_objects_count}}<span class='dashboard-activity-item-count'>{{/link_target_objects_count}}<span class='count-wrap'>{{full_target_objects_count}}</span>{{#link_target_objects_count}}</span>{{/link_target_objects_count}}&#32;lists")],[_("{{{sources_screen_name_0}}} added {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;to a list"),_("{{{sources_screen_name_0}}} added {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;to {{#link_target_objects_count}}<span class='dashboard-activity-item-count'>{{/link_target_objects_count}}<span class='count-wrap'>{{full_target_objects_count}}</span>{{#link_target_objects_count}}</span>{{/link_target_objects_count}}&#32;lists")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to a list"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists")]]]},list_created:{your_activity:null,profile_activity:w,activity:w,dashboard:[_("{{{sources_screen_name_0}}} made a list"),_("{{{sources_screen_name_0}}} made {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;lists")]}},y={your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:null},activity:{sourceClass:l,targetClass:l,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:null}},z={favorite:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:null},activity:{sourceClass:l,targetClass:l,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:null}},mention:y,reply:y,retweet:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:l},activity:{sourceClass:l,targetClass:l,targetObjectClass:l},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:l}},follow:y,list_member_added:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:m},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:m},activity:{sourceClass:l,targetClass:l,targetObjectClass:m},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:m}},list_created:{your_activity:null,profile_activity:{sourceClass:l,targetClass:m,targetObjectClass:null},activity:{sourceClass:l,targetClass:m,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:m,targetObjectClass:null}}},A={favorite:"activity-fav",mention:"activity-reply",reply:"activity-reply",retweet:"activity-rt",follow:"activity-follow",list_member_added:"activity-list",list_created:"activity-list"},B;twttr.isT1?B={favorite:[_("<span class='show-text'>{{hidden_count}} other favorite</span><span class='hide-text'>Hide other favorite</span>"),_("<span class='show-text'>{{hidden_count}} other favorites</span><span class='hide-text'>Hide other favorites</span>")],mention:null,reply:[_("<span class='show-text'>{{hidden_count}} other reply</span><span class='hide-text'>Hide other reply</span>"),_("<span class='show-text'>{{hidden_count}} other replies</span><span class='hide-text'>Hide other reply</span>")],retweet:[_("<span class='show-text'>{{hidden_count}} other retweet</span><span class='hide-text'>Hide other retweet</span>"),_("<span class='show-text'>{{hidden_count}} other retweets</span><span class='hide-text'>Hide other retweets</span>")],follow:null,list_member_added:null,list_created:null}:B={favorite:_("<span class='show-text'>View other favorited Tweets by {{screen_name}}</span><span class='hide-text'>Hide other favorited Tweets by {{screen_name}}</span>"),mention:null,reply:_("<span class='show-text'>View other replies by {{screen_name}}</span><span class='hide-text'>Hide other replies by {{screen_name}}</span>"),retweet:_("<span class='show-text'>View other retweets by {{screen_name}}</span><span class='hide-text'>Hide other retweets by {{screen_name}}</span>"),follow:null,list_member_added:null,list_created:null},this.statics({objectClasses:z,objectStrings:x,supplements:s,iconClasses:A,supplementViewAllSentences:B,lineItemObjects:u,maxQualifiedEntities:a,viewForObjectType:q,substitutionKeyForObjectType:r,translateToObjectType:o})}),a(twttr.mixins.ActivityViewHelpers)})}),provide("multiGlobals/more_views",function(a){using("_","util","constants").as(function(b,_){twttr.view("twttr.views.BaseAPIList",function(){var a=this;twttr.views.Base.apply(this,arguments),this.items=[];if(!this.obj)return;this.obj.each(function(b){a.items.push(new a.ItemView(b))})}).methods({ItemView:twttr.views.BaseAPI}),twttr.view("twttr.views.UserImage24").template(twttr.templates.user_image_24),twttr.view("twttr.views.UserAvatarLink24").template(twttr.templates.user_avatar_link_24),twttr.view("twttr.views.LinkSimpleList",function(a){this.links=a}),twttr.view("twttr.views.LinkList",function(a,b){var a=a.array||a,c=a.length-1;this.links=twttr.map(a,function(a,d){return twttr.merge({separator:d==c?!1:b},a)})}),twttr.view("twttr.views.SlideshowTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SimpleTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SimpleTweetLarge",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SingleTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>").find("a[data-twitter-media-url='true']").attr("target","").end();return b.html()},include_embed_link:function(){return twttr.decider.isAvailable("embed_code_dialog")&&twttr.app.isOnPage("permalink")&&!this.user["protected"]},is_permalink:function(){return twttr.app.isOnPage("permalink")}}),twttr.view("twttr.views.FollowingTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({show_follow_action:!0}),twttr.view("twttr.views.DiscoveryStreamTweet",function(){twttr.views.StreamTweet.apply(this,arguments)}).subclassOf(twttr.views.StreamTweet).template(twttr.templates.stream_tweet_discovery).statics({has:function(a,b){var c=b.hasOwnProperty(a)&&!twttr.is.falsy(b[a]);if(c&&twttr.is.array(b[a])){if(b[a].length==0)return!1;b[a][b[a].length-1].is_last=!0}return c}}).methods({show_follow_action:!0,has_retweeters:function(){return twttr.views.DiscoveryStreamTweet.has("retweeters",this.network_activity)},has_retweet_count:function(){return twttr.views.DiscoveryStreamTweet.has("retweet_count",this)}}),twttr.view("twttr.views.ActivityItemTweet",function(){twttr.views.StreamTweet.apply(this,arguments)}).subclassOf(twttr.views.StreamTweet).methods({should_callout_tweet_actions:function(){return!0}}),twttr.view("twttr.views.UnclickableTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>");return b.find("a").replaceWith(function(){return"<a>"+$(this).contents().text()+"</a>"}),b.html()}}),twttr.view("twttr.views.SemiClickableTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).template(twttr.templates.unclickable_tweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>");return b.find("a.pretty-link").each(function(){$(this).addClass("non-link").removeAttr("href")}),b.html()}}),twttr.view("twttr.views.LatestTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({full_timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0,!1,!0)}}),twttr.view("twttr.views.ActivityItemTruncatedTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.EmbeddedTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.DetailsPaneTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.InReplyTo",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.ProfilePane",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats).methods({impression_cookie:function(){if(!this.promoted_content)return;var a=[];return JSON.stringify([this.id,this.promoted_content.impression_id,this.promoted_content.disclosure_type,this.promoted_content.disclosure_text,a])}}),twttr.view("twttr.views.MessageThread",function(a){twttr.views.Base.apply(this,arguments),this.items=[];for(var b=0;b<a.length;b++)this.items.push(new twttr.views.Message(a[b]))}).subclassOf(twttr.views.Base),twttr.view("twttr.views.ConversationThread",function(a){twttr.views.Base.apply(this,arguments),this.items=[];var b=null;for(var c=0;c<a.messages.length;c++){var d=new twttr.views.Message(a.messages[c]);b&&b.time_ago()!==d.time_ago()&&(d.delimiter_text=d.time_ago()),this.items.push(d),b=d}}).subclassOf(twttr.views.Base).methods({screen_name:function(){return this.threadId}}),twttr.view("twttr.views.SmsFollow").methods({show_sms_prompt:function(){return $.inArray(twttr.pageLocale,["ja","ko"])==-1},sms_follow_text:function(){var a="<strong>follow "+this.screen_name+"</strong>";switch(twttr.requestFullCity.substr(0,2).toLowerCase()){case"us":var b="40404",c=_("the United States");break;case"ca":var b="21212",c=_("Canada");break;default:return _('Text {{{command}}} to <a href="#" class="sms-codes-link">your carrier\'s shortcode</a>',{command:a})}return _("Text {{{command}}} to {{{number}}} in {{{country}}}",{command:a,number:"<strong>"+b+"</strong>",country:'<a href="#" class="sms-codes-link">'+c+"</a>"})}}),twttr.view("twttr.views.PermalinkSignupCallOut").subclassOf(twttr.views.SmsFollow),twttr.view("twttr.views.ProfileActions").subclassOf(twttr.views.SmsFollow).methods({is_current_user:function(){return twttr.helpers.isCurrentUser(this.user)},can_view:function(){return twttr.helpers.canViewUser(this.user)},show_device_notifications:function(){return!this.is_current_user()&&this.following&&(twttr.currentUser.lang!="ja"||twttr.decider.isAvailable("email_device_settings"))},notifications_on_for_user:function(){return twttr.currentUser.deviceSetup&&this.notifications},is_admin:function(){return twttr.is.def(twttr.isAdmin)}}),twttr.view("twttr.views.MessageThreadPreview").methods({last_was_yours:function(){return twttr.helpers.isCurrentUser(this.last_message().sender)},message_count:function(){return this.messages.length},last_message:function(){return this._last_message?this._last_message:this._last_message=new twttr.views.Message(this.messages[0])},other_person:function(){return new twttr.views.User(this.last_was_yours()?this.last_message().recipient:this.last_message().sender)},has_new_message:function(){return this.obj.hasNewMessages()}}),twttr.view("twttr.views.ConversationThreadUser",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.ConversationThreadPreview",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({message_count:function(){return this.count},last_message_date:function(){return this.lastMessageDate},timestamp:function(){return twttr.helpers.timeAgo(this.lastMessageDate,!0,!0)},other_person:function(){return new twttr.views.ConversationThreadUser(this.user)}}),twttr.view("twttr.views.Message",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({linkified_text:function(){var a=b.util.linkify(this.text,{nofollow:!0});return a=b.util.linkifyEntities(a,this),a},timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0,!0)},time_ago:function(){return twttr.helpers.timeAgoRounded(this.actual_timestamp())},actual_timestamp:function(){return twttr.helpers.parseDateString(this.created_at)}}),twttr.view("twttr.views.ProfileSignupCallOut",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.DashboardProfileStats",function(a,b){twttr.views.BaseStats.apply(this,[a]),this.profileStatsTitle=b}).subclassOf(twttr.views.BaseStats).methods({profile_stats_title:function(){return this.profileStatsTitle||_("About @{{screen_name}}",{screen_name:this.obj.screenName})}}),twttr.view("twttr.views.UserStats",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.TrendItem",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({is_sponsored:function(){return!!this.promoted_content},promoted_badge_class:function(){return"badge-"+(this.promoted_content.disclosure_type||"promoted")},trend_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.TREND}}),twttr.view("twttr.views.LocalTrendLocation",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.LocalTrendLocationNew",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.FollowList").methods({follow_list:function(){return(new twttr.views.UserThumbList(this.users)).html()}}),twttr.view("twttr.views.LocalTrends",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({_sortPlaces:function(a){return a.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0})},country_locations:function(){var a=[],c;for(var d=0;d<this.items.length;d++){var e=this.items[d];if(e.placeType.code!==b.constants.placeTypes.city){if(e.placeType.code==19){c=e;continue}a.push(e)}}return a=this._sortPlaces(a),c&&a.unshift(c),a},city_locations:function(){var a=[];for(var c=0;c<this.items.length;c++){var d=this.items[c];d.placeType.code===b.constants.placeTypes.city&&a.push(d)}return a=this._sortPlaces(a),a}}),twttr.view("twttr.views.LocalTrendsNew",function(a,b){twttr.views.BaseAPIList.call(this,a),this.forceShowLocations=b}).subclassOf(twttr.views.BaseAPIList).methods({_sortPlaces:function(a){return a.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0})},breadcrumbs:function(){if(this.is_personalized())return null;var a=twttr.trendLocations.withFilterAncestors().reverse();if(twttr.decider.isAvailable("personalized_trends")){var b=twttr.trendLocations.current;a[a.length-1].woeid!=b.woeid&&a.push(b)}return a[a.length-1]=$.extend({is_last:!0},a[a.length-1]),a},is_personalized:function(){return twttr.decider.isAvailable("personalized_trends")&&twttr.trendLocations.current.isPersonalized},show_personalized:function(){return this.is_personalized()&&!this.forceShowLocations},locations:function(){var a=this._sortPlaces(twttr.trendLocations.currentChildren());return twttr.trendLocations.current.isPersonalized&&a.unshift(twttr.trendLocations.worldwide()),a},locationsFor:function(a){var b=this.locations(),c=Math.ceil(b.length/3);return b.slice(a*c,(a+1)*c)},locations0:function(){return this.locationsFor(0)},locations1:function(){return this.locationsFor(1)},locations2:function(){return this.locationsFor(2)}}),twttr.view("twttr.views.Dialog",function(a){this.options=a;var b=this.options.template||this.options;twttr.views.Base.call(this,b)}),twttr.view("twttr.views.TweetDialog",function(a){this.options=a,this.options.fixed=!0,twttr.views.Dialog.call(this,a)}).subclassOf(twttr.views.Dialog).template(twttr.templates.dialog).methods(twttr.EventProvider).methods({afterRender:function(a){var b={container_id:"tweetbox",condensed:!1,closeAfterSuccess:!1,template:{button_text:this.options.tweetButton||_("Tweet"),show_geo:this.options.template.show_geo,show_turkey:this.options.template.show_turkey},statusAction:this.options.statusAction||"update",data:this.options.data,defaultContent:this.options.defaultContent||"",height:56,width:452,origin:this.options.origin,enableDraft:this.options.enableDraft,enableAutoGrow:!0};this.tweetBox=new twttr.TweetBox(a.find(".twttr-dialog-content"),b),this.tweetBox.bind("ready",twttr.bind(this,function(){this.trigger("ready")}))}}),twttr.view("twttr.views.Footer",function(){twttr.views.Base.apply(this,arguments)}).methods({year:function(){return(new Date).getFullYear()}}),twttr.view("twttr.views.ReplyDialog",function(a){this.options=a,this.options.statusAction="reply",twttr.views.TweetDialog.call(this,this.options)}).subclassOf(twttr.views.TweetDialog).mixin(twttr.mixins.i18nTweet).template(twttr.templates.dialog).methods({afterRender:function(a){twttr.views.TweetDialog.prototype.afterRender.call(this,a);var c=this;twttr.API.Status.find(this.options.data.tweetId,twttr.bind(this,function(d){var e=new twttr.views.ReplyDialogFooter({screen_name:d.user.screenName,text:b.util.linkifyEntities(b.util.linkify(d.text,{nofollow:!0}),d),profile_image_url:d.user.profileImageUrl});e.render(a.find(".twttr-dialog-footer"),"append"),a.find("div.tweet").each(function(){c.updateRtlDisplay($(this))})}))}}),twttr.view("twttr.views.KeyboardShortcuts").methods({current_user_screen_name:function(){return twttr.currentUser.screenName}}),twttr.view("twttr.views.UserThumbList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.TweetActivityThumbList",function(){twttr.views.UserThumbList.apply(this,arguments),twttr.each(this.items.slice(this.constructor.max_items_to_show),function(a){a.is_hidden=!0})}).template(twttr.templates.user_thumb_list).subclassOf(twttr.views.UserThumbList).statics({max_items_to_show:5}),twttr.view("twttr.views.UserSmallListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserThumbListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserSmallList",function(a){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserSmallListItem}),twttr.view("twttr.views.UserDetailedListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserDetailedList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserDetailedListItem}),twttr.view("twttr.views.UserStaticListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserStaticList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserStaticListItem}),twttr.view("twttr.views.UserItemAction",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.RecentlyViewed",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.ContactImportMatchesStats",function(){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({follow_all_text:function(){return this.count<=1?_("Follow all"):_("Follow all {{count}}",{count:this.count-this.following_count})}}),twttr.view("twttr.views.DashboardContactImportMatchesStats",function(){twttr.views.ContactImportMatchesStats.apply(this,arguments)}).subclassOf(twttr.views.ContactImportMatchesStats),twttr.view("twttr.views.MatchedContactUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.InviteContacts",function(){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({select_all_text:function(){return this.contacts.length==1?_("Select all"):_("Select all {{count}}",{count:this.contacts.length})},preview_link_url:twttr.router.invitationEmailPreviewPath,truncate:function(){return function(a,b){var c=28,d=b(a);return twttr.helpers.truncate(d,c)}}}),twttr.view("twttr.views.FollowingPage").methods({following_header_string:function(){var a=this.friends_count;if(a==1)return this.is_current_user()?_("You follow 1 person"):_("{{user}} follows 1 person",{user:this.name});var c=b.util.formatNumber(a,twttr.pageLocale);return this.is_current_user()?_("You follow {{num}} people",{num:c}):_("{{user}} follows {{num}} people",{user:this.name,num:c})},following_count_commaized:function(){return b.util.formatNumber(this.friends_count,twttr.pageLocale)}}),twttr.view("twttr.views.FollowingSubtabs",function(){twttr.views.Base.apply(this,arguments),this["active_subtab_"+this.subtab]=1,this.screen_name=this.screenName}).subclassOf(twttr.views.Base),twttr.view("twttr.views.FollowersPage").methods({followers_header_string:function(){var a=this.followers_count;if(a==1)return this.is_current_user()?_("You have 1 follower"):_("{{user}} has 1 follower",{user:this.name});var c=b.util.formatNumber(a,twttr.pageLocale);return this.is_current_user()?_("You have {{num}} followers",{num:c}):_("{{user}} has {{num}} followers",{user:this.name,num:c})},followers_count_commaized:function(){return b.util.formatNumber(this.followers_count,twttr.pageLocale)}}),twttr.view("twttr.views.FollowersSubtabs",function(){twttr.views.Base.apply(this,arguments),this["active_subtab_"+this.subtab]=1,this.screen_name=this.screenName}).subclassOf(twttr.views.Base),twttr.view("twttr.views.WelcomeAmbassador",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.WelcomeLearnFlow",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser).methods({name:function(){return twttr.currentUser.name}}),twttr.view("twttr.views.RecentTweets",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.SimpleTweet,screen_name:function(){return this.items[0].user.screen_name}}),twttr.view("twttr.views.Replies",function(a,b,c){twttr.views.BaseAPI.apply(this,arguments),this.descendants=b||[],this.forks=c||[]}).subclassOf(twttr.views.BaseAPI).methods({_viewFor:function(a){return new twttr.views.StreamTweet(a)},_viewsFor:function(a){var b=this;return twttr.map(a,function(a){return b._viewFor(a)})},has_replies:function(){return!0},has_tweets:function(){return this.descendants.length>0||this.forks.length>0},descendant_tweet_views:function(){return this._viewsFor(this.descendants)},fork_tweet_views:function(){return this._viewsFor(this.forks)},on_permalink:function(){return twttr.app.isOnPage("permalink")}}),twttr.view("twttr.views.TweetActivity").methods({_list_for:function(a){return userList=new twttr.API.util.BaseCollection(a),(new twttr.views.TweetActivityThumbList(userList)).html()},_count_for:function(a,b){return(new twttr.views.TweetActivityCount({length:a,is_retweets:b==="retweeters",is_favorites:b==="favoriters",is_replies:b==="repliers"})).html()},_show_count:function(a){return a.length>twttr.views.TweetActivityThumbList.max_items_to_show},show_retweets_count:function(){return this._show_count(this.activities.retweeters)},show_replies_count:function(){return this._show_count(this.activities.repliers)},show_favorites_count:function(){return this._show_count(this.activities.favoriters)},favorites_list:function(){return this._list_for(this.activities.favoriters)},retweets_list:function(){return this._list_for(this.activities.retweeters)},replies_list:function(){return this._list_for(this.activities.repliers)},retweets_count:function(){return this._count_for(this.counts.retweeters_count,"retweeters")},favorites_count:function(){return this._count_for(this.counts.favoriters_count,"favoriters")},replies_count:function(){return this._count_for(this.counts.repliers_count,"repliers")},is_retweets_empty:function(){return this.activities.retweeters.length===0},is_favorites_empty:function(){return this.activities.favoriters.length===0},is_replies_empty:function(){return this.activities.repliers.length===0},is_activity_empty:function(){var a=this.is_favorites_empty()&&this.is_retweets_empty(),b=!this.in_permalink_page&&a,c=this.in_permalink_page&&this.is_replies_empty()&&a;return b||c}}),twttr.view("twttr.views.ActivityOfMeStreamTitle").methods({should_see_activity_filters:function(){return twttr.currentUser&&twttr.currentUser.followersCount>=2e3}}),twttr.view("twttr.views.ActivityItemUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.ActivityItem",function(){twttr.views.BaseAPI.apply(this,arguments),this.is_your_activity=this.for_stream==="your_activity",this.is_network_activity=this.for_stream==="activity"}).subclassOf(twttr.views.BaseAPI).template(twttr.templates.activity_item).mixin(twttr.mixins.ActivityViewHelpers).methods({_getSupplement:function(a){var b=this.constructor.supplements[this.for_stream][this.event];b.primary&&(b=a?b.secondary:b.primary);if(b.sources&&b.targets){var c=(this.is_retweet||this.is_favorite)&&this.sources.length===1&&this.targets.length>1;b=c?b.targets:b.sources}return b},_traverse:function(a,b,c){twttr.is.def(c)||(c=0);if(!b||c>=b.length)return a;var d=b[c];if(twttr.is.def(a[d])&&!twttr.is.nil(a[d]))return this._traverse(a[d],b,c+1)},_populateSubsWithObjects:function(a,b,c,d){if(!d)return;var e=this;return twttr.inject(a,b,function(a,b,f){var g=e.constructor.substitutionKeyForObjectType[d],i=twttr.API.Activity.classMap[e.event][c],j=e._traverse(f,e.constructor.translateToObjectType[d][i]);return a[c+"_"+g+"_"+b]=(new twttr.views[e.constructor.viewForObjectType[e.for_stream][d]](j)).html(),a})},_populateSubsWithCounts:function(a,b,c){var d=c+"_count",e=this[c+"_size"];return b["full_"+d]=e,b[d]=e-1,b},_activity_supplement:function(a){var b=this,c=this._getSupplement(a||!1),d=4,e=twttr.views[c.view],f=this[c.object],g=Math.min(c.max,f.length)-1,i=twttr.views.StreamUser===e;return twttr.map(f,function(c,f){var j;return a&&f==0?"":(c.embedded_by_activity=!0,c.is_your_activity=b.is_your_activity,c.is_network_activity=b.is_network_activity,c.for_activity=c.is_your_activity||c.is_network_activity,f>g&&(twttr.isT1?(c.hidden_by_activity=!0,c.hidden_stack_class_name=f<d?"stack-item-"+f:"stack-item-hidden"):c.hidden=!0),j=new e(c),i&&(b.is_your_activity?(j.avatar_size_class="size24",j.profile_image_url=j.mini_profile_image_url()):(j.avatar_size_class="size73",j.profile_image_url=j.bigger_profile_image_url())),twttr.isT1?Mustache.to_html("<div class='supplement{{#is_hidden_supplement}} hidden-supplement {{hidden_stack_class_name}}{{/is_hidden_supplement}}{{^is_hidden_supplement}} visible-supplement{{/is_hidden_supplement}}'>{{{supplement}}}</div>",{supplement:j.html(),is_hidden_supplement:c.hidden_by_activity,hidden_stack_class_name:c.hidden_stack_class_name}):j.html())}).join("")},icon_class:function(){return this.constructor.iconClasses[this.event]},should_show_first_actor:function(){return!this.is_your_activity||this.is_list_member_added},first_actor:function(){return new twttr.views.BaseUser(this.sources[0])},view_all_supplements_sentence:function(){var a=this.constructor.supplementViewAllSentences[this.event];if(!a)return"";var b;if(twttr.isT1){var c=this.hidden_supplements_count();a=a[Math.min(a.length,c)-1],b={hidden_count:c}}else b=this.sources[0];return Mustache.to_html(a,b)},has_secondary_supplement:function(){var a=this.sources.length>this.constructor.maxQualifiedEntities;return!this.is_your_activity&&a&&(this.is_follow||this.is_retweet&&this.target_objects.length===1||this.is_favorite&&this.targets.length===1)},has_hidden_supplements:function(){var a=this._getSupplement(),b=this[a.object];return b.length>a.max&&a.objectType==="Status"},hidden_supplements_count:function(){if(!this.has_hidden_supplements())return 0;var a=this._getSupplement(),b=this[a.object];return b.length-a.max},supplement_count:function(){var a=this._getSupplement(),b=this[a.object];return b.length},user_supplement_and_count_greater_than_two:function(){return(this.is_follow||this.is_list_member_added)&&this.supplement_count()>2},user_supplement_and_count_exactly_two:function(){return(this.is_follow||this.is_list_member_added)&&this.supplement_count()===2},should_show_truncated_tweet:function(){return this.is_your_activity&&(this.is_retweet||this.is_favorite)&&this._getSupplement().useTruncated},truncated_tweet:function(){var a;if(this.is_retweet)a=this.target_objects[0];else{if(!this.is_favorite)throw new Error("You shouldn't be using truncated_tweet() if not a retweet or favorite!");a=this.targets[0]}return(new twttr.views.LatestTweet(a)).html()},activity_supplement:function(){return this._activity_supplement()},activity_secondary_supplement:function(){return this._activity_supplement(!0)},activity_line:function(){var a=this,b={},c=this.constructor.objectClasses[this.event][this.for_stream],d=this.constructor.objectStrings[this.event][this.for_stream];(!d||!c)&&console.error("Should not have an activity item with this verb in this stream!",this);var e=this.constructor.lineItemObjects;b.position=this.min_position,this._populateSubsWithObjects(this[e[this.event].sources],b,"sources",c.sourceClass),this._populateSubsWithObjects(this[e[this.event].targets],b,"targets",c.targetClass),this._populateSubsWithObjects(this[e[this.event].target_objects],b,"target_objects",c.targetObjectClass),this._populateSubsWithCounts(this.sources,b,"sources"),this._populateSubsWithCounts(this.targets,b,"targets"),this._populateSubsWithCounts(this.target_objects,b,"target_objects");var f=this._getSupplement();if(this.is_your_activity&&this.sources.length>f.max||this.has_secondary_supplement())b.link_sources_count=!0;var g=d[Math.min(this.sources.length,d.length)-1];return twttr.is.array(g)&&(g=g[Math.min(this.targets.length,g.length)-1],twttr.is.array(g)&&(g=g[Math.min(this.target_objects.length,g.length)-1])),Mustache.to_html(g,b)},full_timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0)},actual_timestamp:function(){return twttr.helpers.parseDateString(this.created_at)},afterRender:function(a){twttr.isT1||this.is_your_activity&&setTimeout(function(){twttr.helpers.ellipsify(a.find(".stream-item-activity-line .tweet-row"))},0)}}),twttr.view("twttr.views.DashboardActivityItem",function(){twttr.views.ActivityItem.apply(this,arguments)}).subclassOf(twttr.views.ActivityItem),twttr.view("twttr.views.StreamUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.DashboardStreamUser",function(){this.constructor.uber.constructor.apply(this,arguments)}).subclassOf(twttr.views.StreamUser),twttr.view("twttr.views.StreamFollowerRequest",function(){this.constructor.uber.constructor.apply(this,arguments)}).subclassOf(twttr.views.StreamUser),twttr.view("twttr.views.ProfileUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.ProfileFollowCard",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.MiniProfileStats",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.List",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({is_public:function(){return this.mode==="public"||this.mode===undefined},is_own_list:function(){return twttr.helpers.isCurrentUser(this.user)},user_list_path:function(){return twttr.router.userListPath({screen_name:this.user.screen_name,list_slug:this.slug})},list_subscribers_path:function(){return twttr.router.listSubscribersPath({screen_name:this.user.screen_name,list_slug:this.slug})},list_members_path:function(){return twttr.router.listMembersPath({screen_name:this.user.screen_name,list_slug:this.slug})},full_name_sans_at:function(){return this.full_name.replace(/^[@＠]/,"")}}),twttr.view("twttr.views.ListLink",function(){twttr.views.List.apply(this,arguments)}).subclassOf(twttr.views.List),twttr.view("twttr.views.NewestListMembers").subclassOf(twttr.views.List),twttr.view("twttr.views.StreamList").subclassOf(twttr.views.List),twttr.view("twttr.views.ListStreamTitle").subclassOf(twttr.views.List),twttr.view("twttr.views.ListHeader").subclassOf(twttr.views.List),twttr.view("twttr.views.ListActions").subclassOf(twttr.views.List),twttr.view("twttr.views.ListStreamTabs").subclassOf(twttr.views.List),twttr.view("twttr.views.ListFollowCard").subclassOf(twttr.views.List),twttr.view("twttr.views.ListOfLists",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.List}),twttr.view("twttr.views.ListDialog").subclassOf(twttr.views.List),twttr.view("twttr.views.Retweeters",function(a){twttr.views.Base.apply(this,arguments),this.count=a.count,this.retweeters=a.retweeters.map(function(a){return new twttr.views.BaseUser(a)}).array}).methods({retweeted_by_count:function(){var a=this.tweet.retweetingStatus?new twttr.views.BaseUser(this.tweet.retweetingStatus.user):this.retweeters[0],b=Mustache.to_html('<a class="user-profile-link" data-user-id="{{id}}" href="{{path}}" >{{screen_name}}</a>',{id:a.id,path:twttr.router.profilePath({screen_name:a.screen_name}),screen_name:a.screen_name});return this.count===1?_("Retweeted by {{{user_link}}}",{user_link:b}):this.count===2?_("Retweeted by {{{user_link}}} and 1 other",{user_link:b}):this.count?_("Retweeted by {{{user_link}}} and {{count}} others",{user_link:b,count:this.count}):_("Retweeted by {{{user_link}}} and others",{user_link:b})}}),twttr.view("twttr.views.ProfilePage").methods({has_pending_requests:function(){return twttr.helpers.isProfileUser()&&twttr.currentUser["protected"]},is_withheld:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"},is_withheld_copyright:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"&&!!twttr.profileUser.withheldCopyright},is_current_user:function(){return twttr.helpers.isCurrentUser(twttr.profileUser.id)},render_withheld:function(){return this.is_withheld()&&!this.is_current_user()}}),twttr.view("twttr.views.StreamSuggestionCategory",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,2)):!1},category_name:function(){return this.obj.name}}),twttr.view("twttr.views.CardNewsOnebox").subclassOf(twttr.views.BaseAPI).methods({article_image:function(){return this.obj.getImage(twttr.isSSL())},article_url:function(){return this.obj.getExpandedUrl()},article_display_url:function(){return this.obj.getDisplayUrl()}}),twttr.view("twttr.views.CardEventOnebox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.CardAccountsOneboxItem").subclassOf(twttr.views.BaseUser).methods({is_onebox:!0}),twttr.view("twttr.views.CardAccountsOnebox",function(a,b){twttr.views.BaseAPIList.call(this,a),this.view_all_path=b}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.CardAccountsOneboxItem}),using(twttr.isT1?"multiGlobals/more_views_t1":"multiGlobals/more_views_p1",function(){twttr.views.makeDefaultViews(twttr.templates),a()})})}),provide("multiGlobals/more_views_t1",function(a){using("util","constants","mixins/t1/discoveryStoryHelpers").as(function(b){twttr.view("twttr.views.MiniProfileUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.MiniCurrentUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.Nav").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.AvatarRow",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.TypeaheadSearchItem",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({search_query_source:function(){return twttr.is.def(this.id)?twttr.search.searchQuerySource.SAVED_SEARCH:twttr.search.searchQuerySource.TYPEAHEAD}}),twttr.view("twttr.views.TypeaheadAccountsShortcut",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({search_query_source:function(){return twttr.search.searchQuerySource.TYPEAHEAD}}),twttr.view("twttr.views.ProtectedAncestorTweet").subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.CardNews",function(a){twttr.views.BaseAPI.call(this,a.content.articles.get(0)),this.position=a.position,this.social_proof=a.attributes.social_proof,this.scribeComponent="card_news"}).subclassOf(twttr.views.BaseAPI).mixin(twttr.mixins.discoverySearchHelper).methods({article_display_url:function(){return this.obj.getDisplayUrl()},article_image:function(){return this.obj.getImage(twttr.isSSL())},article_url:function(){return this.obj.getExpandedUrl()}}),twttr.view("twttr.views.CardTopic",function(a){twttr.views.BaseAPI.call(this,a.content),this.position=a.position,this.scribeComponent="card_topic";if(a.content.media&&a.content.media.length>0){var b=a.content.media[0];this.has_image=b.type==="photo"&&twttr.decider.isAvailable("t1d_topic_img"),this.has_video=b.type==="video"&&twttr.decider.isAvailable("t1d_topic_vid"),this.has_media=this.has_image||this.has_video,this.tweet=a.content.tweet,this.tweet&&this.tweet.user&&(this.tweet.user.profile_image_url=twttr.assets.getPathFromAbsoluteURL(this.tweet.user.profile_image_url,{isVersioned:!1})),this.has_media&&(this.mediaInstance=twttr.media.matchInstance(b.media_url),this.image_url=this.getImageUrl(["large","medium","original"]),this.has_media=!!this.image_url)}this.media_type=this.has_image?"image":this.has_video?"video":null}).subclassOf(twttr.views.BaseAPI).mixin(twttr.mixins.discoverySearchHelper,twttr.mixins.discoveryMediaRenderHelper).methods({getImageUrl:function(a){if(!this.media||this.media.length===0)return null;var b=this.media[0];for(var c=0;c<a.length;c++){var d=a[c];if(b.sizes[d]){var e=b.sizes[d].url;if(e){if(twttr.isSSL()){var f=b.sizes[d].url_https;return f?f:this.mediaInstance&&this.mediaInstance.constructor.ssl?e.replace(/^http:/,"https:"):e}return e}}}return null},tweet_text:function(){var a=this.text,b=this,c=this.entities&&this.entities.urls;c&&twttr.each(c,function(b){b.display_url&&(a=a.replace(h(b.url),h(b.display_url)))});var d=this.entities&&this.entities.media;return d&&twttr.each(d,function(c){var d=b.text.substring(c.indices[0],c.indices[1]);c.display_url&&(a=a.replace(h(d),h(c.display_url)))}),a},card_url:function(){return this.tweet?twttr.router.permalinkPath({screen_name:this.tweet.user.screen_name,id:this.tweet.id_str}):twttr.router.searchFacetsSlideshowPath({query:this.obj.query,mode:this.has_image?"photos":"videos"})+"?url="+encodeURIComponent(this.media[0].media_url)},attribution_url:function(){return this.mediaInstance?this.mediaInstance.domainUrl():""},attribution_img:function(){return this.mediaInstance?this.mediaInstance.iconUrl():""},attribution_name:function(){return this.mediaInstance?this.mediaInstance.attributionName():""},has_attribution:function(){return this.mediaInstance?this.mediaInstance.hasAttributionInDiscovery():!0}}),twttr.view("twttr.views.StreamInterestCategory").subclassOf(twttr.views.BaseAPI).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,7)):!1},interest_name:function(){return this.obj.name}}),twttr.view("twttr.views.DashboardStreamInterestCategory").subclassOf(twttr.views.StreamInterestCategory).template(twttr.templates.stream_interest_category).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,3)):!1}}),twttr.view("twttr.views.WelcomeLearnProfile").subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.StreamViewTogglerBase",function(){twttr.views.StreamViewToggler.apply(this,arguments)}),twttr.view("twttr.views.MentionsStreamViewToggler",function(a){twttr.views.StreamViewTogglerBase.call(this,{title1:_("All"),active1:!a,route1:twttr.router.connectPath(),title2:_("Mentions"),active2:a,route2:twttr.router.mentionsPath()})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ProfileStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("With Replies"),active1:a,route1:twttr.router.profileWithRepliesPath({screen_name:b.screenName}),title2:_("Without"),active2:!a,route2:twttr.router.profilePath({screen_name:b.screenName})})}).subclassOf(twttr.views.StreamViewTogglerBase).template(twttr.templates.stream_view_toggler),twttr.view("twttr.views.SearchStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Top"),active1:b=="relevance",route1:twttr.router.searchResultsPath({query:a}),tip1:"Find the most relevant tweets",title2:_("All"),active2:b=="tweets",tip2:"Find the most recent tweets",route2:twttr.router.searchRealtimePath({query:a}),title3:_("People you follow"),active3:b=="timeline",route3:twttr.router.searchTimelinePath({query:a}),tip3:"Find tweets from people you follow"})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ListsStreamViewToggler",function(a){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Subscribed to"),active1:!a,route1:twttr.router.listsYouFollowPath(),title2:_("Member of"),active2:a,route2:twttr.router.listsFollowingYouPath()})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.FollowersStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("All"),active1:!b,route1:twttr.router.userFollowersPath({screen_name:a}),title2:_("You know"),active2:b,route2:twttr.router.followersYouFollowPath({screen_name:a})})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ProfileListsStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Subscribed to"),active1:a,route1:twttr.router.subscriptionsPath(b),title2:_("Member of"),active2:!a,route2:twttr.router.membershipsPath(b)})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.StreamSavedSearch",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({saved_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.SAVED_SEARCH}}),twttr.view("twttr.views.DirectMessageDialogConversationList",function(){var a=this;twttr.views.Base.apply(a,arguments),a.items=[],twttr.each(a.threads,function(b){a.items.push(new twttr.views.DirectMessageDialogConversationListItem(b))})}).subclassOf(twttr.views.Base),twttr.view("twttr.views.DirectMessageDialogConversationListItem",function(){twttr.views.Base.apply(this,arguments),this.last_message=new twttr.views.Message(this.messages[0]),this.is_last_message_mine=twttr.helpers.isCurrentUser(this.last_message.sender)}).methods({is_unread:function(){return this.obj.hasNewMessages()},last_message_text:function(){var a=this.last_message,c=a.text;return a.entities&&a.entities.urls&&twttr.each(a.entities.urls,function(a){a.display_url&&(c=c.replace(new RegExp(b.util.escapeRegExpChars(h(a.url))),h(a.display_url)))}),c},last_message_timestamp:function(){return this.last_message.timestamp()},last_message_actual_timestamp:function(){return this.last_message.actual_timestamp()},is_replied:function(){return this.is_last_message_mine&&this.messages.length>1},other_person:function(){return this.last_message[this.is_last_message_mine?"recipient":"sender"]}}),twttr.view("twttr.views.DirectMessageDialogConversation",function(){var a=this;twttr.views.Base.apply(a,arguments),a.items=[];for(var b=a.messages.length-1;b>=0;b--)a.items.push(new twttr.views.DirectMessageDialogConversationItem(a.messages[b]))}).subclassOf(twttr.views.Base),twttr.view("twttr.views.DirectMessageDialogConversationItem",function(){twttr.views.Message.apply(this,arguments)}).subclassOf(twttr.views.Message).methods({sent_or_received:function(){return twttr.helpers.isCurrentUser(this.sender)?"sent":"received"}}),twttr.view("twttr.views.TweetDetails",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.Ancestors",function(a){twttr.views.BaseAPI.apply(this,arguments),this._ancestors=a||[]}).subclassOf(twttr.views.BaseAPI).methods({_viewFor:function(a){return new twttr.views.SimpleTweet(a)},_viewsFor:function(a){var b=this;return twttr.map(a,function(a){return b._viewFor(a)})},ancestors:function(){return this._ancestors.length?this._viewsFor(this._ancestors):null}}),twttr.view("twttr.views.TweetStats",function(a){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({replies_count:function(){return this.repliers&&this.repliers.length?this.repliers_count:!1},retweets_count:function(){return this.retweeters&&this.retweeters.length?this.retweeters_count:!1},favorites_count:function(){return this.favoriters&&this.favoriters.length?this.favoriters_count:!1}}),twttr.view("twttr.views.BigAvatarListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.WebPersonalizationResults",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BigAvatarListItem,has_recs:function(){return this.items&&this.items.length>0}}),twttr.view("twttr.views.GlobalNavSavedSearch").subclassOf(twttr.views.BaseAPI).methods({saved_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.SAVED_SEARCH}}),twttr.view("twttr.views.GlobalNavSavedSearches",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.GlobalNavSavedSearch}),twttr.view("twttr.views.GeoMapSmall").subclassOf(twttr.views.Base).methods({place_map_url:function(){return twttr.geo.getPlaceFullAddressAndMapLink(this).map_link}}),twttr.view("twttr.views.PageProfile").methods({is_withheld:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"},is_withheld_copyright:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"&&!!twttr.profileUser.withheldCopyright},is_current_user:function(){return twttr.helpers.isCurrentUser(twttr.profileUser.id)},render_withheld:function(){return this.is_withheld()&&!this.is_current_user()}}),twttr.view("twttr.views.InlineReplyBox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.SoccerMatchedEvent").subclassOf(twttr.views.BaseAPI).methods({_currentStatus:function(){return this.obj.events.getMatchState().current_status},_appendTeamPage:function(a){return a.user?a.team_page=twttr.router.profilePath({screen_name:a.user.screen_name}):a.team_page=a.landing_page_url,a},getEvents:function(){return this.obj.events},home_team:function(){return this._appendTeamPage(this.obj.events.getMatchedTeam(!0))},score:function(){if(this._currentStatus()==="scheduled")return null;var a=this.obj.events.getMatchState().score;return a.search_path=this.search_path(),a},away_team:function(){return this._appendTeamPage(this.obj.events.getMatchedTeam(!1))},match_state:function(){var a=this.obj.events.getMatchState();a.show_time_elapsed_time=!1;if(a.current_status==="inprogress"){a.show_time_elapsed_time=!0;var b=0,c=0,d=a.current_period_elapsed_time+1;return a.overtime?d>15?(b=a.current_period===2?120:105,c=d-15):b=(a.current_period===2?105:90)+d:d>45?(b=a.current_period===2?90:45,c=d-45):b=(a.current_period===2?45:0)+d,a.penalty_shootout?(a.current_period_string=_("PK"),a.current_period_elapsed_time_string=null):(a.current_period_elapsed_time_string=Mustache.to_html(_("{{minutes}} min{{#extra_time}} (+{{extra_time}}){{/extra_time}}",{minutes:b,extra_time:c})),a.overtime?a.current_period_string=_("ET"):a.current_period===1?a.current_period_string=_("1st half"):a.current_period_string=_("2nd half")),a}return a.current_status==="halftime"?(a.overtime?a.current_period_string=_("ET"):a.penalty_shootout?a.current_period_string=_("PK"):a.current_period_string=_("Halftime"),a):null},preview:function(){return this._currentStatus()==="scheduled"?{time:twttr.helpers.prettyTime(this.obj.events.getMatchedEventData().scheduled_start_time_utc,!0),url:this.obj.events.getMatchedEvent().preview_url,search_path:this.search_path()}:null},recap:function(){var a=this.obj.events.getMatchState();return a.current_status==="final"?{url:this.obj.events.getMatchedEvent().recap_url}:null},hashtag:function(){return this.obj.events.getMatchedEvent().event_data.match_hashtag},search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.obj.events.getMatchedEvent().event_data.match_hashtag)})},show_follow:function(){return!twttr.loggedIn}}),twttr.view("twttr.views.CardSoccerOnebox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.SoccerTicker").subclassOf(twttr.views.BaseAPI).methods({ticker_list:function(){return this.obj.events.getOtherMatchState()},preview:function(){return this.obj.events.getOtherMatchState().length===0?this.obj.events.data().follow_news:null}}),a()})}),provide("$lib/easyXDM.js",function(a){(function(a,b,c,d,e,f){function t(a,b){var c=typeof a[b];return c=="function"||c=="object"&&!!a[b]||c=="unknown"}function u(a,b){return typeof a[b]=="object"&&!!a[b]}function v(a){return Object.prototype.toString.call(a)==="[object Array]"}function w(a){try{var b=new ActiveXObject(a);return b=null,!0}catch(c){return!1}}function C(){C=j,z=!0;for(var a=0;a<A.length;a++)A[a]();A.length=0}function E(a,b){if(z){a.call(b);return}A.push(function(){a.call(b)})}function F(){var a=parent;if(n!=="")for(var b=0,c=n.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function G(b){return a.easyXDM=p,n=b,n&&(q="easyXDM_"+n.replace(".","_")+"_"),o}function H(a){return a.match(k)[3]}function I(a){var b=a.match(k),c=b[2],d=b[3],e=b[4]||"";if(c=="http:"&&e==":80"||c=="https:"&&e==":443")e="";return c+"//"+d+e}function J(a){a=a.replace(m,"$1/");if(!a.match(/^(http||https):\/\//)){var b=a.substring(0,1)==="/"?"":c.pathname;b.substring(b.length-1)!=="/"&&(b=b.substring(0,b.lastIndexOf("/")+1)),a=c.protocol+"//"+c.host+b+a}while(l.test(a))a=a.replace(l,"");return a}function K(a,b){var c="",d=a.indexOf("#");d!==-1&&(c=a.substring(d),a=a.substring(0,d));var e=[];for(var g in b)b.hasOwnProperty(g)&&e.push(g+"="+f(b[g]));return a+(s?"#":a.indexOf("?")==-1?"?":"&")+e.join("&")+c}function M(a){return typeof a=="undefined"}function N(){var a={},b={a:[1,2,3]},c='{"a":[1,2,3]}';return typeof JSON!="undefined"&&typeof JSON.stringify=="function"&&JSON.stringify(b).replace(/\s/g,"")===c?JSON:(Object.toJSON&&Object.toJSON(b).replace(/\s/g,"")===c&&(a.stringify=Object.toJSON),typeof String.prototype.evalJSON=="function"&&(b=c.evalJSON(),b.a&&b.a.length===3&&b.a[2]===3&&(a.parse=function(a){return a.evalJSON()})),a.stringify&&a.parse?(N=function(){return a},a):null)}function O(a,b,c){var d;for(var e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],typeof d=="object"?O(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a}function P(){var c=b.createElement("iframe");c.name=q+"TEST",O(c.style,{position:"absolute",left:"-2000px",top:"0px"}),b.body.appendChild(c),r=c.contentWindow!==a.frames[c.name],b.body.removeChild(c)}function Q(a){M(r)&&P();var c;r?c=b.createElement("<iframe name='"+a.props.name+"' frameborder='0' allowtransparency='false' tabindex='-1', role='presentation' scrolling='no' />"):(c=b.createElement("IFRAME"),c.name=a.props.name,c.setAttribute("frameborder","0"),c.setAttribute("allowtransparency","false"),c.setAttribute("tabindex","-1"),c.setAttribute("role","presentation"),c.setAttribute("scrolling","no")),c.id=c.name=a.props.name,delete a.props.name,a.onLoad&&x(c,"load",a.onLoad),typeof a.container=="string"&&(a.container=b.getElementById(a.container)),a.container||(c.style.position="absolute",c.style.top="-2000px",a.container=b.body);var d=a.props.src;return delete a.props.src,O(c,a.props),c.border=c.frameBorder=0,a.container.appendChild(c),c.src=d,a.props.src=d,c}function R(a,b){typeof a=="string"&&(a=[a]);var c,d=a.length;while(d--){c=a[d],c=new RegExp(c.substr(0,1)=="^"?c:"^"+c.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$");if(c.test(b))return!0}return!1}function S(d){var e=d.protocol,f;d.isHost=d.isHost||M(L.xdm_p),s=d.hash||!1,d.props||(d.props={});if(!d.isHost){d.channel=L.xdm_c,d.secret=L.xdm_s,d.remote=L.xdm_e,e=L.xdm_p;if(d.acl&&!R(d.acl,d.remote))throw new Error("Access denied for "+d.remote)}else d.remote=J(d.remote),d.channel=d.channel||"default"+i++,d.secret=Math.random().toString(16).substring(2),M(e)&&(I(c.href)==I(d.remote)?e="4":t(a,"postMessage")||t(b,"postMessage")?e="1":t(a,"ActiveXObject")&&w("ShockwaveFlash.ShockwaveFlash")?e="6":navigator.product==="Gecko"&&"frameElement"in a&&navigator.userAgent.indexOf("WebKit")==-1?e="5":d.remoteHelper?(d.remoteHelper=J(d.remoteHelper),e="2"):e="0");switch(e){case"0":O(d,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0);if(d.isHost){if(!d.local){var g=c.protocol+"//"+c.host,j=b.body.getElementsByTagName("img"),k,l=j.length;while(l--){k=j[l];if(k.src.substring(0,g.length)===g){d.local=k.src;break}}d.local||(d.local=a)}var m={xdm_c:d.channel,xdm_p:0};d.local===a?(d.usePolling=!0,d.useParent=!0,d.local=c.protocol+"//"+c.host+c.pathname+c.search,m.xdm_e=d.local,m.xdm_pa=1):m.xdm_e=J(d.local),d.container&&(d.useResize=!1,m.xdm_po=1),d.remote=K(d.remote,m)}else O(d,{channel:L.xdm_c,remote:L.xdm_e,useParent:!M(L.xdm_pa),usePolling:!M(L.xdm_po),useResize:d.useParent?!1:d.useResize});f=[new o.stack.HashTransport(d),new o.stack.ReliableBehavior({}),new o.stack.QueueBehavior({encode:!0,maxLength:4e3-d.remote.length}),new o.stack.VerifyBehavior({initiate:d.isHost})];break;case"1":f=[new o.stack.PostMessageTransport(d)];break;case"2":f=[new o.stack.NameTransport(d),new o.stack.QueueBehavior,new o.stack.VerifyBehavior({initiate:d.isHost})];break;case"3":f=[new o.stack.NixTransport(d)];break;case"4":f=[new o.stack.SameOriginTransport(d)];break;case"5":f=[new o.stack.FrameElementTransport(d)];break;case"6":d.swf||(d.swf="../../tools/easyxdm.swf"),f=[new o.stack.FlashTransport(d)]}return f.push(new o.stack.QueueBehavior({lazy:d.lazy,remove:!0})),f}function T(a){var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var d=0,e=a.length;d<e;d++)b=a[d],O(b,c,!0),d!==0&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function U(a){a.up.down=a.down,a.down.up=a.up,a.up=a.down=null}var g=this,i=Math.floor(Math.random()*1e4),j=Function.prototype,k=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,l=/[\-\w]+\/\.\.\//,m=/([^:])\/\//g,n="",o={},p=a.easyXDM,q="easyXDM_",r,s=!1,x,y;if(t(a,"addEventListener"))x=function(a,b,c){a.addEventListener(b,c,!1)},y=function(a,b,c){a.removeEventListener(b,c,!1)};else{if(!t(a,"attachEvent"))throw new Error("Browser not supported");x=function(a,b,c){a.attachEvent("on"+b,c)},y=function(a,b,c){a.detachEvent("on"+b,c)}}var z=!1,A=[],B;"readyState"in b?(B=b.readyState,z=B=="complete"||~navigator.userAgent.indexOf("AppleWebKit/")&&(B=="loaded"||B=="interactive")):z=!!b.body;if(!z){if(t(a,"addEventListener"))x(b,"DOMContentLoaded",C);else{x(b,"readystatechange",function(){b.readyState=="complete"&&C()});if(b.documentElement.doScroll&&a===top){var D=function(){if(z)return;try{b.documentElement.doScroll("left")}catch(a){d(D,1);return}C()};D()}}x(a,"load",C)}var L=function(a){a=a.substring(1).split("&");var b={},c,d=a.length;while(d--)c=a[d].split("="),b[c[0]]=e(c[1]);return b}(/xdm_e=/.test(c.search)?c.search:c.hash);O(o,{version:"2.4.12.108",query:L,stack:{},apply:O,getJSONObject:N,whenReady:E,noConflict:G}),o.DomHelper={on:x,un:y,requiresJSON:function(c){u(a,"JSON")||b.write('<script type="text/javascript" src="'+c+'"><'+"/script>")}},function(){var a={};o.Fn={set:function(b,c){a[b]=c},get:function(b,c){var d=a[b];return c&&delete a[b],d}}}(),o.Socket=function(a){var b=T(S(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){a.onReady&&a.onReady(b)}}])),c=I(a.remote);this.origin=I(a.remote),this.destroy=function(){b.destroy()},this.postMessage=function(a){b.outgoing(a,c)},b.init()},o.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];typeof d=="function"&&(b.local[c]={method:d})}var e=T(S(a).concat([new o.stack.RpcBehavior(this,b),{callback:function(b){a.onReady&&a.onReady(b)}}]));this.origin=I(a.remote),this.destroy=function(){e.destroy()},e.init()},o.stack.SameOriginTransport=function(a){var b,e,f,g;return b={outgoing:function(a,b,c){f(a),c&&c()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){g=I(a.remote),a.isHost?(O(a.props,{src:K(a.remote,{xdm_e:c.protocol+"//"+c.host+c.pathname,xdm_c:a.channel,xdm_p:4}),name:q+a.channel+"_provider"}),e=Q(a),o.Fn.set(a.channel,function(a){return f=a,d(function(){b.up.callback(!0)},0),function(a){b.up.incoming(a,g)}})):(f=F().Fn.get(a.channel,!0)(function(a){b.up.incoming(a,g)}),d(function(){b.up.callback(!0)},0))},init:function(){E(b.onDOMReady,b)}}},o.stack.FlashTransport=function(a){function m(a){d(function(){e.up.incoming(a,i)},0)}function p(d){var e=a.swf,f="easyXDM_swf_"+Math.floor(Math.random()*1e4),g=l+'easyXDM.Fn.get("flash_'+f+'_init")';o.Fn.set("flash_"+f+"_init",function(){o.stack.FlashTransport.__swf=j=k.firstChild,d()}),k=b.createElement("div"),O(k.style,{height:"1px",width:"1px",postition:"abosolute",left:0,top:0}),b.body.appendChild(k);var i="proto="+c.protocol+"&domain="+H(c.href)+"&init="+g;k.innerHTML="<object height='1' width='1' type='application/x-shockwave-flash' id='"+f+"' data='"+e+"'>"+"<param name='allowScriptAccess' value='always'></param>"+"<param name='wmode' value='transparent'>"+"<param name='movie' value='"+e+"'></param>"+"<param name='flashvars' value='"+i+"'></param>"+"<embed type='application/x-shockwave-flash' FlashVars='"+i+"' allowScriptAccess='always' wmode='transparent' src='"+e+"' height='1' width='1'></embed>"+"</object>"}var e,f,g,i,j,k,l=n?n+".":"";return e={outgoing:function(b,c,d){j.postMessage(a.channel,b),d&&d()},destroy:function(){try{j.destroyChannel(a.channel)}catch(b){}j=null,f&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){i=I(a.remote),j=o.stack.FlashTransport.__swf;var b=function(){a.isHost?o.Fn.set("flash_"+a.channel+"_onMessage",function(b){b==a.channel+"-ready"&&(o.Fn.set("flash_"+a.channel+"_onMessage",m),d(function(){e.up.callback(!0)},0))}):o.Fn.set("flash_"+a.channel+"_onMessage",m),j.createChannel(a.channel,a.remote,a.isHost,l+'easyXDM.Fn.get("flash_'+a.channel+'_onMessage")',a.secret),a.isHost?(O(a.props,{src:K(a.remote,{xdm_e:I(c.href),xdm_c:a.channel,xdm_s:a.secret,xdm_p:6}),name:q+a.channel+"_provider"}),f=Q(a)):(j.postMessage(a.channel,a.channel+"-ready"),d(function(){e.up.callback(!0)},0))};j?b():p(b)},init:function(){E(e.onDOMReady,e)}}},o.stack.PostMessageTransport=function(b){function j(a){if(a.origin)return I(a.origin);if(a.uri)return I(a.uri);if(a.domain)return c.protocol+"//"+a.domain;throw"Unable to retrieve the origin of the event"}function k(a){var c=j(a);c==i&&a.data.substring(0,b.channel.length+1)==b.channel+" "&&e.up.incoming(a.data.substring(b.channel.length+1),c)}var e,f,g,i;return e={outgoing:function(a,c,d){g.postMessage(b.channel+" "+a,c||i),d&&d()},destroy:function(){y(a,"message",k),f&&(g=null,f.parentNode.removeChild(f),f=null)},onDOMReady:function(){i=I(b.remote),b.isHost?(x(a,"message",function j(c){c.data==b.channel+"-ready"&&(g="postMessage"in f.contentWindow?f.contentWindow:f.contentWindow.document,y(a,"message",j),x(a,"message",k),d(function(){e.up.callback(!0)},0))}),O(b.props,{src:K(b.remote,{xdm_e:I(c.href),xdm_c:b.channel,xdm_p:1}),name:q+b.channel+"_provider"}),f=Q(b)):(x(a,"message",k),g="postMessage"in a.parent?a.parent:a.parent.document,g.postMessage(b.channel+"-ready",i),d(function(){e.up.callback(!0)},0))},init:function(){E(e.onDOMReady,e)}}},o.stack.FrameElementTransport=function(e){var f,g,i,j;return f={outgoing:function(a,b,c){i.call(this,a),c&&c()},destroy:function(){g&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){j=I(e.remote),e.isHost?(O(e.props,{src:K(e.remote,{xdm_e:I(c.href),xdm_c:e.channel,xdm_p:5}),name:q+e.channel+"_provider"}),g=Q(e),g.fn=function(a){return delete g.fn,i=a,d(function(){f.up.callback(!0)},0),function(a){f.up.incoming(a,j)}}):(b.referrer&&I(b.referrer)!=L.xdm_e&&(a.top.location=L.xdm_e),i=a.frameElement.fn(function(a){f.up.incoming(a,j)}),f.up.callback(!0))},init:function(){E(f.onDOMReady,f)}}},o.stack.NixTransport=function(e){var f,i,j,k,l;return f={outgoing:function(a,b,c){j(a),c&&c()},destroy:function(){l=null,i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){k=I(e.remote);if(e.isHost){try{t(a,"getNixProxy")||a.execScript("Class NixProxy\n    Private m_parent, m_child, m_Auth\n\n    Public Sub SetParent(obj, auth)\n        If isEmpty(m_Auth) Then m_Auth = auth\n        SET m_parent = obj\n    End Sub\n    Public Sub SetChild(obj)\n        SET m_child = obj\n        m_parent.ready()\n    End Sub\n\n    Public Sub SendToParent(data, auth)\n        If m_Auth = auth Then m_parent.send(CStr(data))\n    End Sub\n    Public Sub SendToChild(data, auth)\n        If m_Auth = auth Then m_child.send(CStr(data))\n    End Sub\nEnd Class\nFunction getNixProxy()\n    Set GetNixProxy = New NixProxy\nEnd Function\n","vbscript"),l=getNixProxy(),l.SetParent({send:function(a){f.up.incoming(a,k)},ready:function(){d(function(){f.up.callback(!0)},0)}},e.secret),j=function(a){l.SendToChild(a,e.secret)}}catch(m){throw new Error("Could not set up VBScript NixProxy:"+m.message)}O(e.props,{src:K(e.remote,{xdm_e:I(c.href),xdm_c:e.channel,xdm_s:e.secret,xdm_p:3}),name:q+e.channel+"_provider"}),i=Q(e),i.contentWindow.opener=l}else{b.referrer&&I(b.referrer)!=L.xdm_e&&(a.top.location=L.xdm_e);try{l=a.opener}catch(n){throw new Error("Cannot access window.opener")}l.SetChild({send:function(a){g.setTimeout(function(){f.up.incoming(a,k)},0)}}),j=function(a){l.SendToParent(a,e.secret)},d(function(){f.up.callback(!0)},0)}},init:function(){E(f.onDOMReady,f)}}},o.stack.NameTransport=function(a){function l(b){var d=a.remoteHelper+(c?"#_3":"#_2")+a.channel;e.contentWindow.sendMessage(b,d)}function m(){c?(++g===2||!c)&&b.up.callback(!0):(l("ready"),b.up.callback(!0))}function n(a){b.up.incoming(a,j)}function p(){i&&d(function(){i(!0)},0)}var b,c,e,f,g,i,j,k;return b={outgoing:function(a,b,c){i=c,l(a)},destroy:function(){e.parentNode.removeChild(e),e=null,c&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){c=a.isHost,g=0,j=I(a.remote),a.local=J(a.local),c?(o.Fn.set(a.channel,function(b){c&&b==="ready"&&(o.Fn.set(a.channel,n),m())}),k=K(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),O(a.props,{src:k+"#"+a.channel,name:q+a.channel+"_provider"}),f=Q(a)):(a.remoteHelper=a.remote,o.Fn.set(a.channel,n)),e=Q({props:{src:a.local+"#_4"+a.channel},onLoad:function b(){var c=e||this;y(c,"load",b),o.Fn.set(a.channel+"_load",p),function f(){typeof c.contentWindow.sendMessage=="function"?m():d(f,50)}()}})},init:function(){E(b.onDOMReady,b)}}},o.stack.HashTransport=function(b){function p(a){if(!m)return;var c=b.remote+"#"+k++ +"_"+a;(f||!n?m.contentWindow:m).location=c}function r(a){j=a,c.up.incoming(j.substring(j.indexOf("_")+1),o)}function s(){if(!l)return;var a=l.location.href,b="",c=a.indexOf("#");c!=-1&&(b=a.substring(c)),b&&b!=j&&r(b)}function t(){g=setInterval(s,i)}var c,e=this,f,g,i,j,k,l,m,n,o;return c={outgoing:function(a,b){p(a)},destroy:function(){a.clearInterval(g),(f||!n)&&m.parentNode.removeChild(m),m=null},onDOMReady:function(){f=b.isHost,i=b.interval,j="#"+b.channel,k=0,n=b.useParent,o=I(b.remote);if(f){b.props={src:b.remote,name:q+b.channel+"_provider"};if(n)b.onLoad=function(){l=a,t(),c.up.callback(!0)};else{var e=0,g=b.delay/50;(function p(){if(++e>g)throw new Error("Unable to reference listenerwindow");try{l=m.contentWindow.frames[q+b.channel+"_consumer"]}catch(a){}l?(t(),c.up.callback(!0)):d(p,50)})()}m=Q(b)}else l=a,t(),n?(m=parent,c.up.callback(!0)):(O(b,{props:{src:b.remote+"#"+b.channel+new Date,name:q+b.channel+"_consumer"},onLoad:function(){c.up.callback(!0)}}),m=Q(b))},init:function(){E(c.onDOMReady,c)}}},o.stack.ReliableBehavior=function(a){var b,c,d=0,e=0,f="";return b={incoming:function(a,g){var i=a.indexOf("_"),j=a.substring(0,i).split(",");a=a.substring(i+1),j[0]==d&&(f="",c&&c(!0)),a.length>0&&(b.down.outgoing(j[1]+","+d+"_"+f,g),e!=j[1]&&(e=j[1],b.up.incoming(a,g)))},outgoing:function(a,g,i){f=a,c=i,b.down.outgoing(e+","+ ++d+"_"+a,g)}}},o.stack.QueueBehavior=function(a){function n(){if(a.remove&&c.length===0){U(b);return}if(g||c.length===0||j)return;g=!0;var e=c.shift();b.down.outgoing(e.data,e.origin,function(a){g=!1,e.callback&&d(function(){e.callback(a)},0),n()})}var b,c=[],g=!0,i="",j,k=0,l=!1,m=!1;return b={init:function(){M(a)&&(a={}),a.maxLength&&(k=a.maxLength,m=!0),a.lazy?l=!0:b.down.init()},callback:function(a){g=!1;var c=b.up;n(),c.callback(a)},incoming:function(c,d){if(m){var f=c.indexOf("_"),g=parseInt(c.substring(0,f),10);i+=c.substring(f+1),g===0&&(a.encode&&(i=e(i)),b.up.incoming(i,d),i="")}else b.up.incoming(c,d)},outgoing:function(d,e,g){a.encode&&(d=f(d));var i=[],j;if(m){while(d.length!==0)j=d.substring(0,k),d=d.substring(j.length),i.push(j);while(j=i.shift())c.push({data:i.length+"_"+j,origin:e,callback:i.length===0?g:null})}else c.push({data:d,origin:e,callback:g});l?b.down.init():n()},destroy:function(){j=!0,b.down.destroy()}}},o.stack.VerifyBehavior=function(a){function f(){c=Math.random().toString(16).substring(2),b.down.outgoing(c)}var b,c,d,e=!1;return b={incoming:function(e,g){var i=e.indexOf("_");i===-1?e===c?b.up.callback(!0):d||(d=e,a.initiate||f(),b.down.outgoing(e)):e.substring(0,i)===d&&b.up.incoming(e.substring(i+1),g)},outgoing:function(a,d,e){b.down.outgoing(c+"_"+a,d,e)},callback:function(b){a.initiate&&f()}}},o.stack.RpcBehavior=function(a,b){function g(a){a.jsonrpc="2.0",c.down.outgoing(d.stringify(a))}function i(a,b){var c=Array.prototype.slice;return function(){var d=arguments.length,i,j={method:b};d>0&&typeof arguments[d-1]=="function"?(d>1&&typeof arguments[d-2]=="function"?(i={success:arguments[d-2],error:arguments[d-1]},j.params=c.call(arguments,0,d-2)):(i={success:arguments[d-1]},j.params=c.call(arguments,0,d-1)),f[""+ ++e]=i,j.id=e):j.params=c.call(arguments,0),a.namedParams&&j.params.length===1&&(j.params=j.params[0]),g(j)}}function k(a,b,c,d){if(!c){b&&g({id:b,error:{code:-32601,message:"Procedure not found."}});return}var e,f;b?(e=function(a){e=j,g({id:b,result:a})},f=function(a,c){f=j;var d={id:b,error:{code:-32099,message:a}};c&&(d.error.data=c),g(d)}):e=f=j,v(d)||(d=[d]);try{var i=c.method.apply(c.scope,d.concat([e,f]));M(i)||e(i)}catch(k){f(k.message)}}var c,d=b.serializer||N(),e=0,f={};return c={incoming:function(a,c){var e=d.parse(a);if(e.method)b.handle?b.handle(e,g):k(e.method,e.id,b.local[e.method],e.params);else{var i=f[e.id];e.error?i.error&&i.error(e.error):i.success&&i.success(e.result),delete f[e.id]}},init:function(){if(b.remote)for(var d in b.remote)b.remote.hasOwnProperty(d)&&(a[d]=i(b.remote[d],d));c.down.init()},destroy:function(){for(var d in b.remote)b.remote.hasOwnProperty(d)&&a.hasOwnProperty(d)&&delete a[d];c.down.destroy()}}},g.easyXDM=o})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),a()}),provide("libwrap/easyxdm",function(a){using("$lib/easyXDM.js",function(){a(easyXDM)})}),provide("lib/lazyload",function(a){a(function(a){function i(b,c){var d=a.createElement(b),e;for(e in c)c.hasOwnProperty(e)&&d.setAttribute(e,c[e]);return d}function j(a){var b=d[a],c,g;b&&(c=b.callback,g=b.urls,g.shift(),e=0,g.length||(c&&c.call(b.context,b.obj),d[a]=null,f[a].length&&l(a)))}function k(){var c=navigator.userAgent;b={async:a.createElement("script").async===!0},(b.webkit=/AppleWebKit\//.test(c))||(b.ie=/MSIE/.test(c))||(b.opera=/Opera/.test(c))||(b.gecko=/Gecko\//.test(c))||(b.unknown=!0)}function l(e,g,l,o,p){var q=function(){j(e)},r=e==="css",s=[],t,u,v,w,x,y;b||k();if(g){g=typeof g=="string"?[g]:g.concat();if(r||b.async||b.gecko||b.opera)f[e].push({urls:g,callback:l,obj:o,context:p});else for(t=0,u=g.length;t<u;++t)f[e].push({urls:[g[t]],callback:t===u-1?l:null,obj:o,context:p})}if(d[e]||!(w=d[e]=f[e].shift()))return;c||(c=a.head||a.getElementsByTagName("head")[0]),x=w.urls;for(t=0,u=x.length;t<u;++t)y=x[t],r?v=b.gecko?i("style"):i("link",{href:y,rel:"stylesheet"}):(v=i("script",{src:y}),v.async=!1),v.className="lazyload",v.setAttribute("charset","utf-8"),b.ie&&!r?v.onreadystatechange=function(){/loaded|complete/.test(v.readyState)&&(v.onreadystatechange=null,q())}:r&&(b.gecko||b.webkit)?b.webkit?(w.urls[t]=v.href,n()):(v.innerHTML='@import "'+y+'";',m(v)):v.onload=v.onerror=q,s.push(v);for(t=0,u=s.length;t<u;++t)c.appendChild(s[t])}function m(a){var b;try{b=!!a.sheet.cssRules}catch(c){e+=1,e<200?setTimeout(function(){m(a)},50):b&&j("css");return}j("css")}function n(){var a=d.css,b;if(a){b=g.length;while(--b>=0)if(g[b].href===a.urls[0]){j("css");break}e+=1,a&&(e<200?setTimeout(n,50):j("css"))}}var b,c,d={},e=0,f={css:[],js:[]},g=a.styleSheets;return{css:function(a,b,c,d){l("css",a,b,c,d)},js:function(a,b,c,d){l("js",a,b,c,d)}}}(window.document))}),provide("phoenix-more-css-wrapper",function(a){var b=[];if(!twttr.isTestEnv)if(twttr.isT1){var c=twttr.isRTL?".rtl":"";b.push(twttr.hasHoversInCss?"css!/t1/css/t1_more.bundle"+c+".css":"css!/t1/css/t1_more_no_hovers.bundle"+c+".css")}else b.push("css!/phoenix/css/phoenix_more.bundle.css");using(b,function(){a()})}),provide("$lib/jquery.ui.core.js",function(a){(function($,a){function b(a,b){var d=a.nodeName.toLowerCase();if("area"===d){var e=a.parentNode,f=e.name,g;return!a.href||!f||e.nodeName.toLowerCase()!=="map"?!1:(g=$("img[usemap=#"+f+"]")[0],!!g&&c(g))}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||b:b)&&c(a)}function c(a){return!$(a).parents().andSelf().filter(function(){return $.curCSS(this,"visibility")==="hidden"||$.expr.filters.hidden(this)}).length}$.ui=$.ui||{};if($.ui.version)return;$.extend($.ui,{version:"1.8.16",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),$.fn.extend({propAttr:$.fn.prop||$.fn.attr,_focus:$.fn.focus,focus:function(a,b){return typeof a=="number"?this.each(function(){var c=this;setTimeout(function(){$(c).focus(),b&&b.call(c)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return $.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.curCSS(this,"position",1))&&/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?$(document):a},zIndex:function(b){if(b!==a)return this.css("zIndex",b);if(this.length){var c=$(this[0]),d,e;while(c.length&&c[0]!==document){d=c.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){e=parseInt(c.css("zIndex"),10);if(!isNaN(e)&&e!==0)return e}c=c.parent()}}return 0},disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.each(["Width","Height"],function(b,c){function g(a,b,c,e){return $.each(d,function(){b-=parseFloat($.curCSS(a,"padding"+this,!0))||0,c&&(b-=parseFloat($.curCSS(a,"border"+this+"Width",!0))||0),e&&(b-=parseFloat($.curCSS(a,"margin"+this,!0))||0)}),b}var d=c==="Width"?["Left","Right"]:["Top","Bottom"],e=c.toLowerCase(),f={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+c]=function(b){return b===a?f["inner"+c].call(this):this.each(function(){$(this).css(e,g(this,b)+"px")})},$.fn["outer"+c]=function(a,b){return typeof a!="number"?f["outer"+c].call(this,a):this.each(function(){$(this).css(e,g(this,a,!0,b)+"px")})}}),$.extend($.expr[":"],{data:function(a,b,c){return!!$.data(a,c[3])},focusable:function(a){return b(a,!isNaN($.attr(a,"tabindex")))},tabbable:function(a){var c=$.attr(a,"tabindex"),d=isNaN(c);return(d||c>=0)&&b(a,!d)}}),$(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));$.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),$.support.minHeight=b.offsetHeight===100,$.support.selectstart="onselectstart"in b,a.removeChild(b).style.display="none"}),$.extend($.ui,{plugin:{add:function(a,b,c){var d=$.ui[a].prototype;for(var e in c)d.plugins[e]=d.plugins[e]||[],d.plugins[e].push([b,c[e]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if($(a).css("overflow")==="hidden")return!1;var c=b&&b==="left"?"scrollLeft":"scrollTop",d=!1;return a[c]>0?!0:(a[c]=1,d=a[c]>0,a[c]=0,d)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(a,b,c,d,e,f){return $.ui.isOverAxis(a,c,e)&&$.ui.isOverAxis(b,d,f)}})})(jQuery),a()}),provide("$lib/jquery.ui.widget.js",function(a){(function($,a){if($.cleanData){var b=$.cleanData;$.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)try{$(d).triggerHandler("remove")}catch(e){}b(a)}}else{var c=$.fn.remove;$.fn.remove=function(a,b){return this.each(function(){return b||(!a||$.filter(a,[this]).length)&&$("*",this).add([this]).each(function(){try{$(this).triggerHandler("remove")}catch(a){}}),c.call($(this),a,b)})}}$.widget=function(a,b,c){var d=a.split(".")[0],e;a=a.split(".")[1],e=d+"-"+a,c||(c=b,b=$.Widget),$.expr[":"][e]=function(b){return!!$.data(b,a)},$[d]=$[d]||{},$[d][a]=function(a,b){arguments.length&&this._createWidget(a,b)};var f=new b;f.options=$.extend(!0,{},f.options),$[d][a].prototype=$.extend(!0,f,{namespace:d,widgetName:a,widgetEventPrefix:$[d][a].prototype.widgetEventPrefix||a,widgetBaseClass:e},c),$.widget.bridge(a,$[d][a])},$.widget.bridge=function(b,c){$.fn[b]=function(d){var e=typeof d=="string",f=Array.prototype.slice.call(arguments,1),g=this;return d=!e&&f.length?$.extend.apply(null,[!0,d].concat(f)):d,e&&d.charAt(0)==="_"?g:(e?this.each(function(){var c=$.data(this,b),e=c&&$.isFunction(c[d])?c[d].apply(c,f):c;if(e!==c&&e!==a)return g=e,!1}):this.each(function(){var a=$.data(this,b);a?a.option(d||{})._init():$.data(this,b,new c(d,this))}),g)}},$.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,b){$.data(b,this.widgetName,this),this.element=$(b),this.options=$.extend(!0,{},this.options,this._getCreateOptions(),a);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(b,c){var d=b;if(arguments.length===0)return $.extend({},this.options);if(typeof b=="string"){if(c===a)return this.options[b];d={},d[b]=c}return this._setOptions(d),this},_setOptions:function(a){var b=this;return $.each(a,function(a,c){b._setOption(a,c)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,b,c){var d=this.options[a];b=$.Event(b),b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),c=c||{};if(b.originalEvent)for(var e=$.event.props.length,f;e;)f=$.event.props[--e],b[f]=b.originalEvent[f];return this.element.trigger(b,c),!($.isFunction(d)&&d.call(this.element[0],b,c)===!1||b.isDefaultPrevented())}}})(jQuery),a()}),provide("$lib/jquery.ui.mouse.js",function(a){(function($,a){var b=!1;$(document).mouseup(function(a){b=!1}),$.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===$.data(b.target,a.widgetName+".preventClickEvent"))return $.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(a){if(b)return;this._mouseStarted&&this._mouseUp(a),this._mouseDownEvent=a;var c=this,d=a.which==1,e=typeof this.options.cancel=="string"&&a.target.nodeName?$(a.target).closest(this.options.cancel).length:!1;if(!d||e||!this._mouseCapture(a))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=this._mouseStart(a)!==!1;if(!this._mouseStarted)return a.preventDefault(),!0}return!0===$.data(a.target,this.widgetName+".preventClickEvent")&&$.removeData(a.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),a.preventDefault(),b=!0,!0},_mouseMove:function(a){return!$.browser.msie||document.documentMode>=9||!!a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return $(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&$.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery),a()}),provide("$lib/jquery.ui.draggable.js",function(a){(function($,a){$.widget("ui.draggable",$.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var b=this.options;return this.helper||b.disabled||$(a.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(a),this.handle?(b.iframeFix&&$(b.iframeFix===!0?"iframe":b.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(a){var b=this.options;return this.helper=this._createHelper(a),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),b.containment&&this._setContainment(),this._trigger("start",a)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!b.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,a),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(a,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,a),!0)},_mouseDrag:function(a,b){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute");if(!b){var c=this._uiHash();if(this._trigger("drag",a,c)===!1)return this._mouseUp({}),!1;this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return $.ui.ddmanager&&$.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var b=!1;$.ui.ddmanager&&!this.options.dropBehaviour&&(b=$.ui.ddmanager.drop(this,a)),this.dropped&&(b=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,b)){var c=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",a)!==!1&&c._clear()})}else this._trigger("stop",a)!==!1&&this._clear();return!1},_mouseUp:function(a){return this.options.iframeFix===!0&&$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,a),$.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){var b=!this.options.handle||!$(this.options.handle,this.element).length?!0:!1;return $(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(b=!0)}),b},_createHelper:function(a){var b=this.options,c=$.isFunction(b.helper)?$(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return c.parents("body").length||c.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo),c[0]!=this.element[0]&&!/(fixed|absolute)/.test(c.css("position"))&&c.css("position","absolute"),c},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),$.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left"in a&&(this.offset.click.left=a.left+this.margins.left),"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top"in a&&(this.offset.click.top=a.top+this.margins.top),"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&$.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:$(window).scrollLeft())+$(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:$(window).scrollTop())+($(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var b=$(a.containment),c=b[0];if(!c)return;var d=b.offset(),e=$(c).css("overflow")!="hidden";this.containment=[(parseInt($(c).css("borderLeftWidth"),10)||0)+(parseInt($(c).css("paddingLeft"),10)||0),(parseInt($(c).css("borderTopWidth"),10)||0)+(parseInt($(c).css("paddingTop"),10)||0),(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt($(c).css("borderLeftWidth"),10)||0)-(parseInt($(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt($(c).css("borderTopWidth"),10)||0)-(parseInt($(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=b}else a.containment.constructor==Array&&(this.containment=a.containment)},_convertPositionTo:function(a,b){b||(b=this.position);var c=a=="absolute"?1:-1,d=this.options,e=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop())*c),left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*c)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(c[0].tagName),e=a.pageX,f=a.pageY;if(this.originalPosition){var g;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();g=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else g=this.containment;a.pageX-this.offset.click.left<g[0]&&(e=g[0]+this.offset.click.left),a.pageY-this.offset.click.top<g[1]&&(f=g[1]+this.offset.click.top),a.pageX-this.offset.click.left>g[2]&&(e=g[2]+this.offset.click.left),a.pageY-this.offset.click.top>g[3]&&(f=g[3]+this.offset.click.top)}if(b.grid){var j=b.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY;f=g?j-this.offset.click.top<g[1]||j-this.offset.click.top>g[3]?j-this.offset.click.top<g[1]?j+b.grid[1]:j-b.grid[1]:j:j;var k=b.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/b.grid[0])*b.grid[0]:this.originalPageX;e=g?k-this.offset.click.left<g[0]||k-this.offset.click.left>g[2]?k-this.offset.click.left<g[0]?k+b.grid[0]:k-b.grid[0]:k:k}}return{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():d?0:c.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():d?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(a,b,c){return c=c||this._uiHash(),$.ui.plugin.call(this,a,[b,c]),a=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,a,b,c)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.extend($.ui.draggable,{version:"1.8.16"}),$.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=$(this).data("draggable"),d=c.options,e=$.extend({},b,{item:c.element});c.sortables=[],$(d.connectToSortable).each(function(){var b=$.data(this,"sortable");b&&!b.options.disabled&&(c.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,e))})},stop:function(a,b){var c=$(this).data("draggable"),d=$.extend({},b,{item:c.element});$.each(c.sortables,function(){this.instance.isOver?(this.instance.isOver=0,c.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,d))})},drag:function(a,b){var c=$(this).data("draggable"),d=this,e=function(a){var b=this.offset.click.top,c=this.offset.click.left,d=this.positionAbs.top,e=this.positionAbs.left,f=a.height,g=a.width,i=a.top,j=a.left;return $.ui.isOver(d+b,e+c,i,j,f,g)};$.each(c.sortables,function(e){this.instance.positionAbs=c.positionAbs,this.instance.helperProportions=c.helperProportions,this.instance.offset.click=c.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(d).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return b.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",a),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",a),c.dropped=!1)})}}),$.ui.plugin.add("draggable","cursor",{start:function(a,b){var c=$("body"),d=$(this).data("draggable").options;c.css("cursor")&&(d._cursor=c.css("cursor")),c.css("cursor",d.cursor)},stop:function(a,b){var c=$(this).data("draggable").options;c._cursor&&$("body").css("cursor",c._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(a,b){var c=$(b.helper),d=$(this).data("draggable").options;c.css("opacity")&&(d._opacity=c.css("opacity")),c.css("opacity",d.opacity)},stop:function(a,b){var c=$(this).data("draggable").options;c._opacity&&$(b.helper).css("opacity",c._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(a,b){var c=$(this).data("draggable");c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"&&(c.overflowOffset=c.scrollParent.offset())},drag:function(a,b){var c=$(this).data("draggable"),d=c.options,e=!1;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!d.axis||d.axis!="x")c.overflowOffset.top+c.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:a.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed);if(!d.axis||d.axis!="y")c.overflowOffset.left+c.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:a.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed)}else{if(!d.axis||d.axis!="x")a.pageY-$(document).scrollTop()<d.scrollSensitivity?e=$(document).scrollTop($(document).scrollTop()-d.scrollSpeed):$(window).height()-(a.pageY-$(document).scrollTop())<d.scrollSensitivity&&(e=$(document).scrollTop($(document).scrollTop()+d.scrollSpeed));if(!d.axis||d.axis!="y")a.pageX-$(document).scrollLeft()<d.scrollSensitivity?e=$(document).scrollLeft($(document).scrollLeft()-d.scrollSpeed):$(window).width()-(a.pageX-$(document).scrollLeft())<d.scrollSensitivity&&(e=$(document).scrollLeft($(document).scrollLeft()+d.scrollSpeed))}e!==!1&&$.ui.ddmanager&&!d.dropBehaviour&&$.ui.ddmanager.prepareOffsets(c,a)}}),$.ui.plugin.add("draggable","snap",{start:function(a,b){var c=$(this).data("draggable"),d=c.options;c.snapElements=[],$(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var a=$(this),b=a.offset();this!=c.element[0]&&c.snapElements.push({item:this,width:a.outerWidth(),height:a.outerHeight(),top:b.top,left:b.left})})},drag:function(a,b){var c=$(this).data("draggable"),d=c.options,e=d.snapTolerance,f=b.offset.left,g=f+c.helperProportions.width,i=b.offset.top,j=i+c.helperProportions.height;for(var k=c.snapElements.length-1;k>=0;k--){var l=c.snapElements[k].left,m=l+c.snapElements[k].width,n=c.snapElements[k].top,o=n+c.snapElements[k].height;if(!(l-e<f&&f<m+e&&n-e<i&&i<o+e||l-e<f&&f<m+e&&n-e<j&&j<o+e||l-e<g&&g<m+e&&n-e<i&&i<o+e||l-e<g&&g<m+e&&n-e<j&&j<o+e)){c.snapElements[k].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,a,$.extend(c._uiHash(),{snapItem:c.snapElements[k].item})),c.snapElements[k].snapping=!1;continue}if(d.snapMode!="inner"){var p=Math.abs(n-j)<=e,q=Math.abs(o-i)<=e,r=Math.abs(l-g)<=e,s=Math.abs(m-f)<=e;p&&(b.position.top=c._convertPositionTo("relative",{top:n-c.helperProportions.height,left:0}).top-c.margins.top),q&&(b.position.top=c._convertPositionTo("relative",{top:o,left:0}).top-c.margins.top),r&&(b.position.left=c._convertPositionTo("relative",{top:0,left:l-c.helperProportions.width}).left-c.margins.left),s&&(b.position.left=c._convertPositionTo("relative",{top:0,left:m}).left-c.margins.left)}var t=p||q||r||s;if(d.snapMode!="outer"){var p=Math.abs(n-i)<=e,q=Math.abs(o-j)<=e,r=Math.abs(l-f)<=e,s=Math.abs(m-g)<=e;p&&(b.position.top=c._convertPositionTo("relative",{top:n,left:0}).top-c.margins.top),q&&(b.position.top=c._convertPositionTo("relative",{top:o-c.helperProportions.height,left:0}).top-c.margins.top),r&&(b.position.left=c._convertPositionTo("relative",{top:0,left:l}).left-c.margins.left),s&&(b.position.left=c._convertPositionTo("relative",{top:0,left:m-c.helperProportions.width}).left-c.margins.left)}!c.snapElements[k].snapping&&(p||q||r||s||t)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,a,$.extend(c._uiHash(),{snapItem:c.snapElements[k].item})),c.snapElements[k].snapping=p||q||r||s||t}}}),$.ui.plugin.add("draggable","stack",{start:function(a,b){var c=$(this).data("draggable").options,d=$.makeArray($(c.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(!d.length)return;var e=parseInt(d[0].style.zIndex)||0;$(d).each(function(a){this.style.zIndex=e+a}),this[0].style.zIndex=e+d.length}}),$.ui.plugin.add("draggable","zIndex",{start:function(a,b){var c=$(b.helper),d=$(this).data("draggable").options;c.css("zIndex")&&(d._zIndex=c.css("zIndex")),c.css("zIndex",d.zIndex)},stop:function(a,b){var c=$(this).data("draggable").options;c._zIndex&&$(b.helper).css("zIndex",c._zIndex)}})})(jQuery),a()}),provide("$lib/jquery.ui.progressbar.js",function(a){(function($,a){$.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),$.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===a?this._value():(this._setOption("value",b),this)},_setOption:function(a,b){a==="value"&&(this.options.value=b,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),$.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),$.extend($.ui.progressbar,{version:"1.8.16"})})(jQuery),a()}),provide("$lib/jquery.swfobject.js",function(a){(function(a,h,b){function c(a,b){var d=(a[0]||0)-(b[0]||0);return d>0||!d&&a.length>0&&c(a.slice(1),b.slice(1))}function d(a){if(typeof a!=g)return a;var b=[],c="";for(var e in a)c=typeof a[e]==g?d(a[e]):[e,i?encodeURI(a[e]):a[e]].join("="),b.push(c);return b.join("&")}function e(a){var b=[];for(var c in a)a[c]&&b.push([c,'="',a[c],'"'].join(""));return b.join(" ")}function f(a){var b=[];for(var c in a)b.push(['<param name="',c,'" value="',d(a[c]),'" />'].join(""));return b.join("")}var g="object",i=!0;try{var j=b.description||function(){return(new b("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}()}catch(k){j="Unavailable"}var l=j.match(/\d+/g)||[0];a[h]={available:l[0]>0,activeX:b&&!b.name,version:{original:j,array:l,string:l.join("."),major:parseInt(l[0],10)||0,minor:parseInt(l[1],10)||0,release:parseInt(l[2],10)||0},hasVersion:function(a){return a=/string|number/.test(typeof a)?a.toString().split("."):/object/.test(typeof a)?[a.major,a.minor]:a||[0,0],c(l,a)},encodeParams:!0,expressInstall:"expressInstall.swf",expressInstallIsActive:!1,create:function(a){if(!a.swf||this.expressInstallIsActive||!this.available&&!a.hasVersionFail)return!1;if(!this.hasVersion(a.hasVersion||1)){this.expressInstallIsActive=!0;if(typeof a.hasVersionFail=="function"&&!a.hasVersionFail.apply(a))return!1;a={swf:a.expressInstall||this.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:this.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:a.swf,type:"application/x-shockwave-flash",id:a.id||"flash_"+Math.floor(Math.random()*999999999),width:a.width||320,height:a.height||180,style:a.style||""},i=typeof a.useEncode!="undefined"?a.useEncode:this.encodeParams,a.movie=a.swf,a.wmode=a.wmode||"opaque",delete a.fallback,delete a.hasVersion,delete a.hasVersionFail,delete a.height,delete a.id,delete a.swf,delete a.useEncode,delete a.width;var b=document.createElement("div");return b.innerHTML=["<object ",e(attrs),">",f(a),"</object>"].join(""),b.firstChild}},a.fn[h]=function(b){var c=this.find(g).andSelf().filter(g);return/string|object/.test(typeof b)&&this.each(function(){var c=a(this),d;b=typeof b==g?b:{swf:b},b.fallback=this;if(d=a[h].create(b))c.children().remove(),c.html(d)}),typeof b=="function"&&c.each(function(){var c=this;c.jsInteractionTimeoutMs=c.jsInteractionTimeoutMs||0,c.jsInteractionTimeoutMs<660&&(c.clientWidth||c.clientHeight?b.call(c):setTimeout(function(){a(c)[h](b)},c.jsInteractionTimeoutMs+66))}),c}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject),a()}),provide("$lib/jquery.hotkeys.js",function(a){(function(a){function b(b){if(typeof b.data!="string"&&!a.isArray(b.data))return;var c=b.handler,d=a.isArray(b.data),e=0,f=b.data.length;b.handler=function(g){var i=b.data,j;d&&(i=i[e]),j=i.toLowerCase().split(" ");if(!(this===g.target||!/textarea|select/i.test(g.target.nodeName)&&g.target.type!=="text"))return;var k=g.type!=="keypress"&&a.hotkeys.specialKeys[g.which],l=String.fromCharCode(g.which).toLowerCase(),m,n="",o={};g.altKey&&k!=="alt"&&(n+="alt+"),g.ctrlKey&&k!=="ctrl"&&(n+="ctrl+"),g.metaKey&&!g.ctrlKey&&k!=="meta"&&(n+="meta+"),g.shiftKey&&k!=="shift"&&(n+="shift+"),k?o[n+k]=!0:(o[n+l]=!0,o[n+a.hotkeys.shiftNums[l]]=!0,n==="shift+"&&(o[a.hotkeys.shiftNums[l]]=!0));for(var p=0,q=j.length;p<q;p++)if(o[j[p]])return!d||e===f-1?(e=0,c.apply(this,arguments)):(e+=1,!0);if(d&&e!==0){j=b.data[0].toLowerCase().split(" ");for(var p=0,q=j.length;p<q;p++)if(o[j[p]])return e=1,!0;e=0}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})})(jQuery),a()}),provide("$lib/jquery.autoellipsis.js",function(a){(function($){function e(a,b){var c=a.data();c||(c={});var d=c.wrapperElement;d||(d=a.wrapInner("<div/>").find(">div"));var e=d.data(),j=e.originalContent;j?d=e.originalContent.clone(!0).data({originalContent:j}).replaceAll(d):d.data({originalContent:d.clone(!0)}),a.data({wrapperElement:d,containerWidth:a.innerWidth(),containerHeight:a.innerHeight()});var k=!1,l=d;b.selector&&(l=$(d.find(b.selector).get().reverse())),l.each(function(){var c=$(this),e=c.text(),j=!1;if(d.innerHeight()-c.innerHeight()>a.innerHeight())c.remove();else{i(c);if(c.contents().length){k&&(g(c).get(0).nodeValue+=b.ellipsis,k=!1);while(d.innerHeight()>a.innerHeight()){j=f(c);if(!j){k=!0,c.remove();break}i(c);if(!c.contents().length){k=!0,c.remove();break}g(c).get(0).nodeValue+=b.ellipsis}b.setTitle=="onEllipsis"&&j||b.setTitle=="always"?c.attr("title",e):b.setTitle!="never"&&c.removeAttr("title")}}})}function f(a){var b=g(a);if(b.length){var c=b.get(0).nodeValue,d=c.lastIndexOf(" ");return d>-1?(c=$.trim(c.substring(0,d)),b.get(0).nodeValue=c):b.get(0).nodeValue="",!0}return!1}function g(a){if(a.contents().length){var b=a.contents().last();return b.filter(j).length?b:g(b)}return a.append(""),a.contents().last()}function i(a){if(a.contents().length){var b=a.contents().last();if(b.filter(j).length){var c=b.get(0).nodeValue;return c=$.trim(c),c==""?(b.remove(),!0):!1}while(i(b));return b.contents().length?!1:(b.remove(),!0)}return!1}function j(){return this.nodeType===3}function k(c,d){a[c]=d,b||(b=window.setInterval(function(){m()},200))}function l(c){a[c]&&(delete a[c],a.length||b&&(window.clearInterval(b),b=undefined))}function m(){if(!c){c=!0;for(var b in a)$(b).each(function(){var c,d;c=$(this),d=c.data(),(d.containerWidth!=c.innerWidth()||d.containerHeight!=c.innerHeight())&&e(c,a[b])});c=!1}}var a={},b,c=!1,d={ellipsis:"...",setTitle:"never",live:!1};$.fn.ellipsis=function(a,b){var c,f;return c=$(this),typeof a!="string"&&(b=a,a=undefined),f=$.extend({},d,b),f.selector=a,c.each(function(){var a=$(this);e(a,f)}),f.live?k(c.selector,f):l(c.selector),this}})(jQuery),a()}),provide("mixins/tweetFlagging",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.tweetFlagging",function(a){a.methods({flagLinkClicked:function(a,b){var c=$(a.target),d=this,e=twttr.decider.isAvailable("flag_yourself_nsfw")&&twttr.helpers.isCurrentUser(b.user),f=b.possiblySensitive,g={isOurTweet:e,before:function(){if(e){var a=c.attr("alternateText");c.attr("alternateText",c.html()),c.html(a)}else{var b='&nbsp;<a target="_blank" href="'+twttr.router.flagTurkeySupportPath()+'">'+_("(learn more)")+"</a>";c.replaceWith("<span>"+_("Flagged")+b+"</span>")}}};f&&!e?twttr.dialogs.sensitiveFlagConfirmation(function(){b.flag(g)}).open():(e&&(b.sync("possiblySensitive",!b.possiblySensitive),g.possibly_sensitive=b.possiblySensitive),b.flag(g))},tweetFlaggable:function(a){return twttr.loggedIn&&twttr.decider.isAvailable("media_flagging")&&(!a||a.possiblySensitiveEditable!==!1)}})}),a(twttr.mixins.tweetFlagging)})}),provide("promptbird",function(a){using("util","components/Promptbird").as(function(b){twttr.promptbird=twttr.promptbird||{},twttr.promptbird.renderComponentFromPrompt=function(a){var c=b.util.camelize("Prompt_"+a.prompt.template_name);if(!twttr.components[c]){var d=new Error('Promptbird component "'+c+'" is undefined');twttr.isLocalhost&&console.log(d,d.stack||"error.stack is unavailable :(");return}var e=new twttr.components[c](a);return e.bind("destroyed",twttr.promptbird.destroyCallback),e},twttr.promptbird.destroyCallback=function(){delete twttr.promptbird.cache},twttr.promptbird.getPrompt=function(){var a=(new b.util.Location(location.href)).search;if(!twttr.decider.isAvailable("promptbird_phoenix")&&!/force_prompt_id/.test(a))return;if(!twttr.promptbird.cache)return;if(!twttr.promptbird.cache.prompt.template_name)return;return twttr.promptbird.cache},twttr.promptbird.getPromptByFormat=function(a){var b=twttr.promptbird.getPrompt();if(!b)return;for(var c=0;c<a.length;c++)if(b.prompt.format===a[c])return b},a(twttr.promptbird)})}),provide("MessageManager",function(a){using().as(function(b){twttr.klass("twttr.MessageThread",function(a,b){this.threadId=a,this.messages=b}).methods({hasNewMessages:function(){return twttr.app.caches.dmThreads.get(this.threadId)!==this.messages[0].id&&!twttr.helpers.isCurrentUser(this.messages[0].sender)}}),twttr.klass("twttr.MessageManager",function(){var a=this;if(!twttr.loggedIn)return;twttr.isT1||this.setupContinuousPoll(),twttr.isT1&&twttr.decider.isAvailable("t1_dm_poll")&&($(document).on("active",function(){a.poll(twttr.MessageManager.activePollInterval)}),$(document).on("inactive",function(){a.poll(twttr.MessageManager.inactivePollInterval)}))}).statics({activePollInterval:9e4,inactivePollInterval:3e5}).methods(twttr.EventProvider).methods({setupContinuousPoll:function(){var a=this;this._pollingState?this._pollingState=="running"&&this._fetchMessages():(this._pollingState="starting",this._fetchMessages(function(){a._sort(),a.bind("messagesArrived",function(b,c){if(twttr.isT1)for(var d=c.length()-1;d>=0;d--)a.addMessage(c.get(d));else c.each(function(b){a.addMessage(b)})}),!twttr.isT1||twttr.decider.isAvailable("t1_dm_poll")?a.poll(twttr.MessageManager.activePollInterval):a.stopContinuousPoll(),a._intializeThreadState(),a.trigger("firstMessagesReceived"),a.trigger("pendingThreads")}))},isContinuouslyPolling:function(){return!!this._pollingState&&this._pollingState!=="starting"},stopContinuousPoll:function(){this.isContinuouslyPolling()&&(clearInterval(this._pollId),delete this._pollId,this._pollingState=null)},poll:function(a){var b=this;b.stopContinuousPoll(),b.currentPollInterval=a,b._pollId=setInterval(function(){b._fetchMessages()},a),b._pollingState="running"},reset:function(){this.threads=[],this.sentMessages=null,this.receivedMessage=null,twttr.app.caches.dmThreads.clear()},getAllThreads:function(a){var b=this;this.threads?a(this.threads):this.one("firstMessagesReceived",function(){a(b.threads)})},getThread:function(a,b){var c=this;if(this.threads){for(var d=0;d<this.threads.length;d++)if(this.threads[d].threadId===a)return b(this.threads[d]);return b()}this.getAllThreads(function(d){c.getThread(a,b)})},addMessage:function(a,b){var c=this;this.getThread(a.threadId,function(d){if(d){if(twttr.helpers.isCurrentUser(a.sender))for(var e=0,f=d.messages,g=f.length;e<g;e++){var i=f[e].id;if(i<a.id)break;if(i===a.id)return}d.messages.unshift(a);for(var e=0,j=c.threads.length;e<j;e++)if(c.threads[e].threadId===d.threadId){c.threads.splice(e,1);break}}else d=new twttr.MessageThread(a.threadId,[a]);c.threads||(c.threads=[]),c.threads.unshift(d),b&&c._markMessageAsRead(a),c.trigger("updatedThread",[d,"new",{message:a}]),c.trigger("newMessage."+a.threadId,[a]),c.trigger("pendingThreads")})},deleteMessage:function(a,b){var c=this;this.getThread(b,function(d){if(d){for(var e=0,f=d.messages,g=f.length;e<g;e++)if(f[e].id===a){var i=f.splice(e,1)[0];i.destroy({error:function(){c.addMessage(i)},success:function(a){var b={};b[a.id+""]={item_type:twttr.constants.clientEvent.itemType.message,target_id:a.id},trackClient({component:"stream",action:"delete"},{item_ids:[a.id],item_details:b})}});break}if(d.messages.length===0){for(var j=0;j<c.threads.length;j++)if(c.threads[j].threadId===b){c.threads.splice(j,1);break}c.trigger("deletedThread",[b])}else c.trigger("updatedThread",[d,"delete",{messageId:a}])}c.trigger("deletedMessage."+b,[a]),c.trigger("pendingThreads")})},hasPendingThreads:function(){var a=0,b=this.threads;if(b)for(var c=0,d=b.length;c<d;c++)b[c].hasNewMessages()&&a++;return a},markThreadAsRead:function(a){var b=this;this.getThread(a,function(c){if(!c)return;b._markMessageAsRead(c.messages[0]),b.trigger("readThread",[a]),b.trigger("pendingThreads")})},_markMessageAsRead:function(a){twttr.app.caches.dmThreads.set(a.threadId,a.id)},_intializeThreadState:function(){if(!twttr.app.caches.dmThreads.get("##initialized")){twttr.app.caches.dmThreads.set("##initialized",!0);var a=this.threads;for(var b=0,c=a.length;b<c;b++)twttr.app.caches.dmThreads.set(a[b].threadId,a[b].messages[0].id);return!0}return!1},_fetchMessages:function(a){function e(){c++;if(c===2||!d)b.isFetching=!1,a&&a()}var b=this,c=0;if(this.isFetching)return;this.isFetching=!0;var d=!twttr.isT1||this._pollingState==="starting",f,g={count:50,success:function(a){a.length()>0&&(b.receivedMessages?b.receivedMessages.concat(a):b.receivedMessages=a,b.trigger("messagesArrived",[a]),b._receivedSinceID=a.first().id),f=a,e()},cancel:function(){},error:function(a,b){a.status===502&&b.retry()}};b._receivedSinceID&&(g.since_id=b._receivedSinceID),twttr.currentUser&&twttr.currentUser.receivedMessages(g);var i={count:50,success:function(a){a.length()>0&&(b.sentMessages?b.sentMessages.concat(a):b.sentMessages=a,b.trigger("messagesArrived",[a]),b._sentSinceID=a.first().id),e()},cancel:function(){},error:function(a,b){a.status===502&&b.retry()}};b._sentSinceID&&(i.since_id=b._sentSinceID),twttr.currentUser&&d&&twttr.currentUser.sentMessages(i)},_sort:function(){this.allMessages=[],this.sentMessages&&(this.allMessages=this.allMessages.concat(this.sentMessages.array)),this.receivedMessages&&(this.allMessages=this.allMessages.concat(this.receivedMessages.array)),this.allMessages.sort(function(a,b){return twttr.natcompare(b.id,a.id)});var a={},b=[];for(var c=0;c<this.allMessages.length;c++){var d=this.allMessages[c],e=d.threadId;a[e]||(a[e]=[],b.push(e)),a[e].push(d)}this.threads=[];for(var c=0;c<b.length;c++)this.threads.push(new twttr.MessageThread(b[c],a[b[c]]))}}),a(twttr.MessageManager)})}),provide("ConversationManager",function(a){using("constants").as(function(b){twttr.klass("twttr.ConversationThread",function(a){this.threadId=a.user.screenName,this.user=a.user,this.count=a.count,this.lastMessageDate=a.lastMessageDate,this.lastMessageId=a.lastMessageId,this.messages=[]}).methods(twttr.EventProvider).methods({sort:function(){this.messages.sort(function(a,b){return b.id-a.id})},addMessage:function(a){if($.inArray(a,this.messages)>-1)return;this.messages.push(a),this.sort(),a.id>this.lastMessageId&&(this.lastMessageDate=a.createdAt,this.lastMessageId=a.id,this.count++),this.trigger("newMessage",[a])},deleteMessage:function(a,b){var c=!1;this.messages=$.grep(this.messages,function(b,d){return b.id===a&&(b.destroy(),c=!0),b.id!==a});if(!c)return;if(this.messages.length>0){var d=this.messages[this.messages.length-1];d.id>this.lastMessageId&&(this.lastMessageDate=d.createdAt,this.lastMessageId=d.id)}this.count--,this.trigger("deletedMessage",[a]),b()},getMessages:function(a){var b=this,c={user_id:this.user.id,since_id:this.since_id||0,count:100,success:function(c){c.each(function(a){b.addMessage(a)}),a(b)}};twttr.currentUser.conversationWith(c)}}),twttr.klass("twttr.ConversationManager",function(){this.threads={},this.since_id=0}).methods(twttr.EventProvider).methods({_fetchMessages:$.noop,_sort:$.noop,setupContinuousPoll:function(){if(this._pollId)return;var a=this;this._pollId=setInterval(function(){a.getAllThreads($.noop)},b.constants.directMessagePollInterval)},isContinuouslyPolling:function(){return twttr.is.def(this._pollId)},stopContinuousPoll:function(){this.isContinuouslyPolling()&&(clearInterval(this._pollId),delete this._pollId)},getThread:function(a,b){var c=this.threads[a];return c?c.getMessages(b):b()},getAllThreads:function(a){function c(c){var d;for(var e=c.array.length-1;e>=0;e--){var f=c.array[e];b.threads[f.user.screenName]?(d=b.threads[f.user.screenName],d.getMessages($.noop)):(d=new twttr.ConversationThread(f),b.threads[d.threadId]=d),b.since_id=d.lastMessageId,b.trigger("updatedThread",[d,"new"])}a()}var b=this;twttr.currentUser.conversations({success:c,since_id:this.since_id,count:100})},addMessage:function(a){var b=this.threads[a.threadId];b?(b.addMessage(a),this.trigger("updatedThread",[b,"new"])):(b=new twttr.ConversationThread({threadId:a.threadId,user:a.user,count:1,lastMessageDate:a.createdAt,lastMessageId:a.id}),this.threads[b.threadId]=b)},deleteMessage:function(a,b){var c=this,d=this.threads[b];d&&d.deleteMessage(a,function(){c.trigger("updatedThread",[d,""]),d.count===0&&(c.trigger("deletedThread",[b]),delete c.threads[b])})}}),a(twttr.ConversationManager)})}),provide("externalOauthPopup",function(a){using().as(function(b){a(function(a){var b,c=a.url,d=c.indexOf("?")==-1?"?":"&";c+=d+"callback_hash="+encodeURIComponent(a.callbackUrl);var e=$(window),f=window.screenY||window.screenTop||0,g=window.screenX||window.screenLeft||0,i=(e.height()-500)/2+f,j=(e.width()-500)/2+g,a=["width="+(a.width?a.width:500),"height="+(a.height?a.height:500),"top="+i,"left="+j,"toolbar=no","location=yes"];window.open(c,"twitter_oauth",a.join(",")).focus()})})}),provide("mixins/photoBox",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.photoBox",function(a){a.methods({_initPhotobox:function(){var a=this;if(!twttr.decider.isAvailable("turkey")||this.options.statusAction==="directMessage"||this.options.template.show_turkey===!1)return;this.tweetBoxId=twttr.turkey.getTweetBoxId(),this.options.template.tweet_box_id=this.tweetBoxId,(new twttr.views.PhotoControl(this.options.template)).render(this.$find("div.tweet-button-container"),"prepend");var b=this._getTextLength;this._getTextLength=function(){var a=b.apply(this,arguments);return this.turkey&&this.turkey.hasItems()&&(a+=this.turkey.count()*(twttr.constants.tcoLength+1)),a};var c=this.makeRequest;this.makeRequest=function(a,b,d){this.turkey&&this.turkey.hasItems()?(this._sendingStatus=!0,this.turkey.tweet(b,d)):c.apply(this,[a,b,d])};var d=this.resetTweetContent;this.resetTweetContent=function(){d.apply(this,arguments),this.turkey&&this.turkey.reset()};var e=function(){a.createFunc(),a._registerPhotoboxEvents();if(a.options.origin&&(a.options.origin=="main_tweet_box"||a.options.origin=="new-tweet-titlebar-button")){var b={context:a.options.origin=="main_tweet_box"?"timeline":"popup",event_info:twttr.turkey.tweetboxMode()};trackClient({component:"tweetbox",action:"impression"},b)}};this.bind("open",e),(!this.options.condensed||!this.options.condensedContent&&this.options.defaultContent||this._getDraftTweet())&&e()},_registerPhotoboxEvents:function(){var a=this;this.turkey.bind("photoChanged",function(){a.editor.trigger("didChangeContent",[a.editor.content()])});var b=function(){a.turkey&&a.turkey.destroy()};this.bind("close",b),this.bind("destroy",b),this.bind("titleChanged",function(b,c,d){if(d=="dm")a.turkey&&a.turkey.disable(),a.$find(".turkey-control").hide();else if(d=="reply"||d=="mention"||d=="update")a.turkey&&a.turkey.enable(),a.$find(".turkey-control").show()})},createFunc:function(){this.turkey&&this.turkey.remove(),this.turkey=new twttr.turkey.PhotoThumbnails(this.editor,this.$find(".turkey-selected-files"),this.$find(".turkey-add-action"),this.tweetBoxId)}})}),a()})}),provide("mixins/profileStreamMixin",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.profileStreamMixin",function(){this.methods({beforeShowNewItems:function(){this.keepPromotedTweetsAtTop=!0,this.constructor.uber.beforeShowNewItems.apply(this,arguments),this.promotedTweetWasExpanded=this.promotedTweetIsExpanded(),this.collapsePromotedTweet(),this.movePromotedTweetToTop()},onShowNewItems:function(a){this.constructor.uber.onShowNewItems.apply(this,arguments),this.trigger("onShowNewItems"),this.promotedTweetWasExpanded&&this.expandPromotedTweet(),this.logPromotedImpressions(this.items.slice(0,this.newItemsCount))},onShowOldItems:function(a){this.constructor.uber.onShowOldItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(this.items.length-this.oldItemsCount))},afterFirstSwitchingTo:function(){this.constructor.uber.afterFirstSwitchingTo.apply(this,arguments),$(document).trigger("profileVisit",twttr.profileUser)},_getPromotedStreamTweet:function(){return this.$find("div.stream-items .promoted-tweet")},_collapseExpandPromotedTweet:function(a){var b=this._getPromotedStreamTweet();b.length&&twttr.app.currentPageName()==="profile"&&twttr.app.currentPage().send("showHide",[b,{autoExpanded:!0,forceClose:!a,noAnimation:!0,containerClass:".expanding-stream-item"}])},collapsePromotedTweet:function(){this._collapseExpandPromotedTweet(!1)},expandPromotedTweet:function(){this._collapseExpandPromotedTweet(!0)},domNodeSelector:function(){return this.streamManagerDomNodeSelector?this.streamManagerDomNodeSelector+" .profile-stream":null},_getStreamErrorComponent:function(a){return this._getUserStreamErrorComponent(a)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You haven't tweeted yet."):_("@{{screen_name}} hasn't tweeted yet.",{screen_name:this.screenName})},_updateSinceId:function(a){var b=a.length==1&&a[0].isPromoted(),c=a.length>1&&a[0].isPromoted()&&twttr.natcompare(a[0].id,a[1].id)>0;b||c?this._sinceId=a[0].id:this.constructor.uber._updateSinceId.apply(this,arguments)},wokeUp:function(){signal(">streamWokeUp")}}),twttr.isT1&&this.methods({_setTitle:function(a){a(_("Tweets"))},_setViewToggler:function(a){twttr.streams.Profile.shouldDisplay()&&a(new twttr.views.ProfileStreamViewToggler(!0,this.params))}})});a(c)})}),provide("streams/Mentions",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.Mentions").statics({isLoadingRelationships:!1}).setTitle(function(a){twttr.isT1?a(_("Mentions")):a(_("Tweets mentioning {{username}}",{username:"@"+twttr.currentUser.screenName}))}).update(function(a,b,c){var d=this;twttr.decider.isAvailable("activity_dark_read")&&!twttr.decider.isAvailable("activity_read")&&$.ajax({url:"/i/gooble.json",headers:{"X-PHX":"true"},xhr:function(){return new twttr.anywhere.remote.server.contentWindow.XMLHttpRequest},success:function(){}});if(twttr.secrets&&twttr.secrets.hideMentions){var e=a.success;a.success=function(b){e.apply(a,arguments);if(d.constructor.isLoadingRelationships)return;d.constructor.isLoadingRelationships=!0,setTimeout(function(){var a={user_a:twttr.currentUser.id,user_ids:b.map(function(a){return a.user.id}).join(",")};$.ajax({url:"/account/batch_followed_by",data:a,dataType:"jsonp",type:"get",success:function(a){var b=[];for(var c in a.relationships)a.relationships[c]||b.push(".stream-tweet[data-user-id="+c+"]");b.length>0&&$(b.join(",")).hide(),d.constructor.isLoadingRelationships=!1}})},10)}}twttr.currentUser.mentions(a)}).methods({_getEmptyStreamHtml:function(){return _("Tweets that mention you, or are in reply to you, appear here.")}}).deciderKey("tweet_stream_mentions").pollingDeciderKey("tweet_stream_mentions_polling"),a()})}),provide("streams/Favorites",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.Favorites",function(){twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this._registerEvents()}).setTitle(function(a){twttr.isT1?a(_("Favorites")):!this.screenName||this.stream_user_is_current_user()?a(_("Your Favorites")):a(_("{{username}}'s Favorites",{username:this.screenName}))}).update(function(a,b,c){this.screenName?twttr.API.User.find(this.screenName).favorites(a):twttr.currentUser.favorites(a)}).methods({_getEmptyStreamHtml:function(){return!this.screenName||this.stream_user_is_current_user()?_("Your favorite tweets get saved here. To favorite a tweet, hover over it and click: <span class='favorite-icon'></span> <strong>Favorite</strong>"):_("<b>@{{screen_name}}</b> hasn't favorited any Tweets yet.",{screen_name:this.screenName})},_registerEvents:function(){if(twttr.loggedIn){var a=function(a,b){return twttr.helpers.isProfileUser()?b:null};this._registerAddToStreamEvent(twttr.API.Status,"favorite",a),this._registerRemoveFromStreamEvent(twttr.API.Status,"unfavorite",a)}}}).deciderKey("tweet_stream_favorites").pollingDeciderKey("tweet_stream_favorites_polling"),a()})}),provide("streams/User",function(a){using().as(function(b){var c=twttr.tweetStream("twttr.streams.User",function(a){var b=this;twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this.one("onShowNewItems",function(){b.expandPromotedTweet()}),twttr.helpers.isCurrentUser(a.screenName)&&twttr.API.Status.bind("unretweet",function(a,c){b.$node.find("[data-item-id="+c.id+"][data-item-type=tweet]").remove()})}).mixin(twttr.mixins.profileStreamMixin).statics({_supportsPromotedContent:twttr.isT1}).update(function(a,b,d){a.cacheOptions={shouldCacheAssociated:!1},a.pc=!!c._supportsPromotedContent,a.include_rts=!this.params.noRetweets,this.params.canViewUser?twttr.API.User.find(this.params.screenName).timeline(a):d(this,twttr.streams.PROTECTED)}).deciderKey("tweet_stream_user").pollingDeciderKey("tweet_stream_user_polling");a(c)})}),provide("streams/Profile",function(a){using().as(function(b){var c=twttr.tweetStream("twttr.streams.Profile",function(a){var b=this;twttr.streams.TweetStream.apply(this,arguments),this.one("onShowNewItems",function(){b.expandPromotedTweet()})}).mixin(twttr.mixins.profileStreamMixin).statics({_supportsPromotedContent:!0,shouldDisplay:function(){return twttr.profileUser.verified&&twttr.loggedIn&&twttr.abdecider.choose("replies_stripped_on_verified_profiles_222")=="stripped_replies_on_verified"}}).update(function(a,b,d){a.cacheOptions={shouldCacheAssociated:!1},a.pc=!!c._supportsPromotedContent,a.include_rts=!this.params.noRetweets,this.params.canViewUser?twttr.API.User.find(this.params.screenName).profileTimeline(a):d(this,twttr.streams.PROTECTED)}).methods({_setViewToggler:function(a){a(new twttr.views.ProfileStreamViewToggler(!1,this.params))}}).statics({_supportsPromotedContent:!0}).deciderKey("tweet_stream_profile").pollingDeciderKey("tweet_stream_profile_polling");a(c)})}),provide("streams/FollowingTweets",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.FollowingTweets",function(){twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this.registerUserActionEvents()}).mixin(twttr.mixins.userActionable).update(function(a,b,c){a.cacheOptions={shouldCacheAssociated:!1},this.params.canViewUser?twttr.API.User.find(this.params.screenName).followingTweets(a):c(this,twttr.streams.PROTECTED)}).methods({itemViewClass:"FollowingTweet",onUserActionFollowSync:function(a){this._findTweetsAndUpdateFollowState(a,!0)},onUserActionUnfollowSync:function(a){this._findTweetsAndUpdateFollowState(a,!1)},onShowNewItems:function(a){this._addFollowButtonsToNewTweets(a),this.constructor.uber.onShowNewItems.apply(this,arguments),this.trigger("showedNewItems")},onShowOldItems:function(a){this._addFollowButtonsToNewTweets(a),this.constructor.uber.onShowOldItems.apply(this,arguments),this.trigger("showedOldItems")},selectedItemsByUserId:function(a){var b=".stream-item:has(.stream-item-content[data-user-id="+a+"])";return this.$streamItems().find(b)},_reRenderTweetsByUserId:function(a){var b=this;this.selectedItemsByUserId(a).each(function(a,c){var d=$(c),e=d.find(".stream-tweet").attr("data-tweet-id");twttr.API.Status.find(e,function(a){d.replaceWith(b._renderItemHtml(a))})})},_getStreamErrorComponent:function(a){return this._getUserStreamErrorComponent(a)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("The people you follow haven't tweeted anything recently."):_("The people that @{{screen_name}} follows haven't tweeted recently.",{screen_name:this.screenName})},_setTitle:function(){$("#following-page-context").html(_("Here&rsquo;s what they&rsquo;re tweeting right now."))},_findUserIds:function(a){var b=[];return a.find(".stream-item-content").each(function(a,c){b.push(parseInt($(c).attr("data-user-id"),10))}),b.slice(0,twttr.constants.users.maxLookupSize)},_addFollowButtonsToNewTweets:function(a){if(!twttr.loggedIn||a.length===0)return!1;var b=this,c=this._findUserIds(a);twttr.API.User.findAll(c,{reload:!0,success:function(a){a.each(function(a){(!a.following||twttr.loggedIn&&a.id!==twttr.currentUser.id)&&b._findTweetsAndUpdateFollowState(a.id,a.following?null:!1)})}})},_findTweetsAndUpdateFollowState:function(a,b){var c;twttr.is.nil(b)?c="":b?c=Mustache.to_html('<span class="follow-text-quiet">&middot; {{action}}</span>',{action:_("Following")}):c=Mustache.to_html('<span class="follow-text-quiet">&middot;</span> <a href="#" class="js-action-follow tweet-follow-action follow-action" data-user-id="{{id}}">{{action}}</a>',{id:a,action:_("Follow")});var d=this.selectedItemsByUserId(a);d.each(function(a,b){$(b).find(".tweet-user-follow").html(c)})}}).deciderKey("tweet_stream_following").pollingDeciderKey("tweet_stream_following_polling"),a()})}),provide("streams/List",function(a){using("components/AddPeople","components/NoListMembers","streams/TweetStream",function(b,c,d){twttr.tweetStream("twttr.streams.List",function(){d.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id},message:this.params.listSlug})}).setTitle(function(a){twttr.isT1?a((new twttr.views.ListStreamTitle({full_name:_("Tweets")})).html()):(twttr.merge(this.params,{full_name:_("@{{screenName}}/{{listSlug}}",this.params),slug:this.params.listSlug,user:{screen_name:this.params.screenName}}),a((new twttr.views.ListStreamTitle(this.params)).html()))}).update(function(a,b,c){this._getList(function(b){b.statuses(a)})}).methods({_getEmptyStreamComponent:function(){return twttr.helpers.isCurrentUser(this.screenName)?new b:new c},_getList:function(a){var b=this;this._fetchingCallbacks=this._fetchingCallbacks||[],this._fetchingCallbacks.push(a);if(this._fetching)return;this._fetching=!0,twttr.API.User.find(this.screenName,{success:function(a){a.lists.find(b.params.listSlug,function(a){if(!a){b.trigger("notFound");return}b.memberCount=a.memberCount;var c;while(c=b._fetchingCallbacks.pop())c(a);b._list=a,b._fetching=!1})},error:function(){b.trigger("notFound")}})}}).deciderKey("tweet_stream_list").pollingDeciderKey("tweet_stream_list_polling"),a(twttr.streams.List)})}),provide("streams/Search",function(a){using().as(function(b,c){var d=twttr.tweetStream("twttr.streams.Search",function(a){return twttr.is.def(a.pretty_query)||(a.pretty_query=a.query),twttr.streams.TweetStream.apply(this,arguments),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:a.query}),this}).setTitle(function(a){var b=this;if(this.params.hideTitle)return;var c=twttr.merge({top_mode:this.params.mode=="relevance",all_mode:this.params.mode=="tweets",timeline_mode:this.params.mode=="timeline",with_links_mode:this.params.mode=="links"},this.params);a((new twttr.views.SearchStreamTitle(c)).html());var d=$(".js-stream-title .stream-tab-dropdown"),e=new twttr.control.Dropdown(d,{items:[{label:_("Top"),handlers:this._getSearchHandlers("relevance")},{label:_("All"),handlers:this._getSearchHandlers("tweets")},{label:_("With links"),handlers:this._getSearchHandlers("links")}],direction:"left"});e.render(d,"append")}).update(function(a,b,c){var d=this;!twttr.is.def(a.since_id)&&this.items.length>0&&!twttr.is.def(a.max_id)&&(a.since_id="1");if(!a.since_id){var e=a.success;a.success=function(a,b){d.logSearchImpressions(a),d._next_page=b.response.next_page;var c=e.apply({},arguments);return!d._next_page&&!b.response.served_by_blender&&d.reachedTheEnd(),c}}a.max_id&&(a.page=d._next_page),this.params.debug&&(a.debug=this.params.debug);var f=twttr.util.params().promoted_location;f&&(a.promoted_location=f),this.params.experimentId&&(a.experimentId=this.params.experimentId),this.params.mode==="links"?a.filter="links":this.params.mode==="relevance"?a.mode="relevance":this.params.mode==="timeline"&&(a.mode="timeline"),this.search(this.params.query,a)}).methods({_shouldCache:!1,search:function(a,b){var c=this;if(this.inProgress)return;var d=function(a,b){return a=a||$.noop,function(){return c.inProgress=b,a.apply(this,arguments)}};b.before=d(b.before,!0),b.success=d(b.success,!1),b.error=d(b.error,!1),b.cancel=d(b.cancel,!1),b.query_source=twttr.search.getLastQuerySource(),twttr.API.Status.search(a,b)},_getSearchHandlers:function(a){var b=this;return{click:function(){b.params.mode=a,twttr.app.currentPage().send("getStreamManager",function(a){a.switchTo(twttr.streams.Search,b.params)})}}},scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{query:this.params.query,type:this.params.mode})},logSearchImpressions:function(a){var b=[],c=[],d=[],e=[];a.each(function(a){a.isPromoted()?(d.push(a.id),e.push(a.impressionId)):a.resultCategory==="popular"?c.push(a.id):b.push(a.id)}),scribble("integrated_search_impression",{mode:this.params.mode,query:this.params.query,pretty_query:this.params.pretty_query,top_tweets:c,promoted_tweets:d,impression_ids:e,tweet_count:a.length()})},_getEmptyStreamHtml:function(){if(this.params.mode==="links")return _("No Tweet results with links for <strong>{{pretty_query}}</strong>.",this.params);if(this.params.mode==="relevance"){var a={path:twttr.router.searchRealtimePath({query:this.params.query}),pretty_query:this.params.pretty_query};return twttr.router.routeTo(twttr.router.searchRealtimePath({query:this.params.query}))}return _("No Tweet results for <strong>{{pretty_query}}</strong>.",this.params)},_getStreamEndHtml:function(){if(this.params.mode==="links")return _("Older Tweet results with links for <strong>{{pretty_query}}</strong> are unavailable.",this.params);if(this.params.mode==="relevance"){var a={path:twttr.router.searchRealtimePath({query:this.params.query}),pretty_query:this.params.pretty_query};return _('You&rsquo;ve reached the end of the Top Tweets for <strong>{{pretty_query}}</strong>. <div><a href="{{path}}">View all Tweets</a>.</div>',a)}return _("Older Tweet results for <strong>{{pretty_query}}</strong> are unavailable.",this.params)},beforeShowNewItems:function(){this.constructor.uber.beforeShowNewItems.apply(this,arguments),this.movePromotedTweetToTop()},onShowNewItems:function(a){this.constructor.uber.onShowNewItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(0,this.newItemsCount))},onShowOldItems:function(a){this.constructor.uber.onShowOldItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(this.items.length-this.oldItemsCount))}}).deciderKey("tweet_stream_search").pollingDeciderKey("tweet_stream_search_polling");twttr.isT1&&d.methods({_setHeader:function(a,b){a((new twttr.views.TweetSearchStreamHeader(b)).$html())},_setTitle:function(a){a(_("Tweets"))},_setViewToggler:function(a){a(new twttr.views.SearchStreamViewToggler(this.params.query,this.params.mode))}}),a(d)})}),provide("streams/UserStream",function(a){using().as(function(b){twttr.stream("twttr.streams.UserStream",function(a,b,c){var d=this;twttr.streams.Stream.apply(this,arguments),this.scribbler=this.params.scribbler||twttr.Scribbler.clientEvent,this.isCursorPagination()?this.cursor=-1:this.page=0,this.registerUserActionEvents()}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.userActionable).methods({itemViewClass:"StreamUser",streamItemType:"user",IDS_PER_REQUEST:5e3,update:function(a){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("people_streams")||this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}var c={success:function(c,d){var e=b.isCursorPagination();b.push(c.array);var f=d&&d.fetchedFullPage||c.length()===b.PAGE_SIZE;e?b.cursor=d.response.next_cursor:f?b.page=b.page+1:b.page=-1,(e&&!b.cursor||!e&&b.page===-1)&&b.reachedTheEnd(),c.each(function(a){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)}),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR),b._scribeResults("error",[],{status_code:c.status})},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT),b._scribeResults("error",[],{status_code:502})}};c=twttr.merge(c,this.isCursorPagination()?{cursor:this.cursor}:{page:this.page+1}),this.update(c)},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},PAGE_SIZE:20,isCursorPagination:function(){return!0},_getStreamErrorComponent:function(a){return a===twttr.streams.PROTECTED?new twttr.components.ProtectedUser({screen_name:this.params.screenName}):twttr.streams.Stream.prototype._getStreamErrorComponent.apply(this,arguments)},_scribeResults:function(a,b,c){twttr.streams.Stream.prototype._scribeResults.apply(this,arguments);var b=b||[];c=c||{};if(a=="error"||a=="initial"&&!b.length)this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},twttr.merge(c,{item_count:0,event_value:0,cursor_or_page:this._cursorOrPage(),referring_event:a}));else if(b.length){var d=this,e=[],f;twttr.each(b,function(a,b){e.push(a.id);if(d.constructor._namespace.indexOf("UserRecommendations")!=-1||d.constructor._namespace.indexOf("PeopleSearch")!=-1){var c;a.promotedContent&&a.promotedContent.impression_id&&(c={item_type:twttr.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id}),c&&(f=f||{},c.item_position=b,f[a.id+""]=c)}}),f&&(c.item_details=f),this.scribbler.scribe({component:"stream",action:"results"},twttr.merge(c,{item_ids:e,item_count:e.length,event_value:e.length,cursor_or_page:this._cursorOrPage(),referring_event:a}))}},sortUsersByIds:function(a,b){var c=[],d={};return twttr.each(a,function(a){d[a.id]=a}),twttr.each(b,function(a){d[a]&&c.push(d[a])}),c},fetchUsersById:function(a,b){var c=this,d,e,f;twttr.API.User.find(this.screenName,function(d){if(!twttr.helpers.canViewUser(d)){c._showError(twttr.streams.PROTECTED),c.doneLoadingMore();return}e=c.page*c.PAGE_SIZE,f=c.fetchedIds&&e<c.IDS_PER_REQUEST,f?c.hydrateUsers(a):(c.page=0,d[b]({cursor:c.idsCursor,success:function(b,d){d.response.next_cursor&&(c.idsCursor=d.response.next_cursor),c.fetchedIds=b,c.hydrateUsers(a)}}))})},hydrateUsers:function(a){var b=this,c=this.fetchedIds,d=a.success;a.success=function(a){var c=b.sortUsersByIds(a.array,e);a.array=c,d.call(this,a,{fetchedFullPage:e.length==b.PAGE_SIZE})};var e=c.slice(this.page*this.PAGE_SIZE,(this.page+1)*this.PAGE_SIZE);twttr.decider.isAvailable("people_stream_fresh")?e.length?twttr.API.User.findAll(e,{success:a.success,reload:!0}):a.success(new twttr.anywhere.api.util.BaseCollection([])):twttr.API.User.findAll(e,a.success)}}),a(twttr.streams.UserStream)})}),provide("streams/Friends",function(a){using("_","util").as(function(b,_){var c=twttr.stream("twttr.streams.Friends",function(a,b){twttr.streams.UserStream.apply(this,arguments);var c=this;this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"}),this._registerEvents()}).subclassOf(twttr.streams.UserStream).methods({PAGE_SIZE:100,update:function(a){this.fetchUsersById(a,"friendIds")},isCursorPagination:function(){return!1},_countString:function(a){return a===1?_("You follow 1 person"):_("You follow {{friendsCount}} people",{friendsCount:b.util.formatNumber(a,twttr.pageLocale)})},_setTitle:function(a){$("#following-page-context").html(_("Here&rsquo;s more about them."));if(this.params.subtab){var b=new twttr.views.FollowingSubtabs(this.params);a(b.html())}},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following anyone yet."):_("@{{screen_name}} isn't following anyone yet.",{screen_name:this.screenName})},_registerEvents:function(){if(twttr.loggedIn){var a=function(a,b){return twttr.helpers.isProfileUser()?b:null};this._registerAddToStreamEvent(twttr.API.User,"follow",a),this._registerRemoveFromStreamEvent(twttr.API.User,"unfollow",a)}}}).statics({_deciderKey:"people_stream_friends"});twttr.isT1&&c.methods({_setTitle:function(a){a(_("Following"))}}),a(c)})}),provide("streams/FollowerRequests",function(a){using("_","mixins/protectedUserActionable").as(function(b,_){twttr.stream("twttr.streams.FollowerRequests",function(a,b){var c=this;this.constructor.uber.constructor.apply(this,arguments),this.cursor=0,this.oldItemsCount=-1,this.pending_users=[],this.getFollowerRequestCount=function(a){var b=this;b.oldItemsCount==-1?twttr.currentUser.friends.pending(function(c,d){b.oldItemsCount=c.length,b.pending_users=c,a(b.oldItemsCount)}):(b.oldItemsCount=b.pending_users.length,a(b.oldItemsCount))},this.registerProtectedUserActions()}).subclassOf(twttr.streams.UserStream).mixin(b.mixins.protectedUserActionable).methods({itemViewClass:"StreamFollowerRequest",streamItemType:"user",update:function(a){},_fetchItems:function(a){var b=this;b.getFollowerRequestCount(function(c){var d={success:function(d,e){b.push(d.array),b.cursor=b.cursor+b.constructor.PAGE_SIZE,b.cursor>=c&&b.reachedTheEnd(),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}};sliced_list=b.pending_users.slice(b.cursor,b.cursor+b.constructor.PAGE_SIZE),twttr.API.User.findAll(sliced_list,d)})},_setTitle:function(a){a(_("Your pending follower requests"))}}).statics({PAGE_SIZE:20,_deciderKey:"people_stream_follower_requests"}),a(twttr.streams.FollowerRequests)})}),provide("streams/Followers",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Followers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"}),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({PAGE_SIZE:100,update:function(a){this.fetchUsersById(a,"followerIds")},isCursorPagination:function(){return!1},_setTitle:function(a){if(this.params.subtab){var b=new twttr.views.FollowersSubtabs(this.params);a(b.html())}},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You don't have any followers yet."):_("@{{screen_name}} doesn't have any followers yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return!twttr.helpers.isProfileUser()&&c.screenName===a.screenName?twttr.currentUser:null};this._registerAddToStreamEvent(twttr.API.User,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.User,"unfollow",b)}}}).statics({_deciderKey:"people_stream_followers"});twttr.isT1&&c.methods({_setTitle:function(a){a(_("Followers"))},_setViewToggler:function(a,b){twttr.loggedIn&&!twttr.helpers.isProfileUser()&&a(new twttr.views.FollowersStreamViewToggler(b.screenName,!1))}}),a(c)})}),provide("streams/SocialContextStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.SocialContextStream",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.params=a;var c=a.socialContextType=="followsInCommonWith"?"following_social_context":"followers_social_context";this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile",event_info:c})}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){if(!twttr.helpers.canViewUser(c)){b._showError(twttr.streams.PROTECTED),b.doneLoadingMore();return}twttr.currentUser[b.params.socialContextType](twttr.profileUser.id,a)})},_getEmptyStreamHtml:function(){var a={user:twttr.profileUser.screenName};return this.params.socialContextType=="followsInCommonWith"?_("You and @{{user}} don't follow anyone in common.",a):_("You don't follow anyone who follows @{{user}}.",a)}}).statics({_deciderKey:"social_context"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Followers"))},_setViewToggler:function(a,b){twttr.loggedIn&&!twttr.helpers.isProfileUser()&&a(new twttr.views.FollowersStreamViewToggler(b.screenName,!0))}}):c.methods({_setTitle:function(a){if(this.params.socialContextType=="followsInCommonWith")var b=new twttr.views.FollowingSubtabs(this.params);else var b=new twttr.views.FollowersSubtabs(this.params);a(b.html())}}),a(twttr.streams.SocialContextStream)})}),provide("streams/SuggestionCategoriesStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoriesStreamT1":"","mixins/discoveryHelper").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoriesStream",function(a,b){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments),this.$node.addClass("suggestion-categories");var c=this;this.$node.delegate("div[data-item-type=suggestion_category]","click",function(a){var b=$(this).attr("data-item-id"),d={};return d[b]={item_position:$("div.js-stream-manager-container div.js-stream-item").index($(a.target).closest(".js-stream-item"))},b&&(trackClient({component:"suggestion_category",action:"click"},{step:"interests",query:b,item_details:d}),c.routePageTo(c.params.pathRoot,"InterestsCategory",{category:b})),!1})}).subclassOf(twttr.streams.Stream).statics({cacheCategories:function(a){this.CATEGORIES=a,this.CATEGORY_MAP=this.buildCategoryMap(a)},buildCategoryMap:function(a){return a.reduce({},function(a,b){return a[b.slug]=b,a})},filterTopTweetsCategories:function(a){var b=this.buildCategoryMap(a);return a.filter(function(a){if(a.slug.match(/^(.+)[_-]top-tweets$/i)){var c=b[RegExp.$1];return c&&(c.topTweetsCategory=a),!1}return!0})}}).methods({itemViewClass:"StreamSuggestionCategory",streamItemType:"suggestion_category",sampleSize:"",streamItemId:function(a){return a.slug},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},addTipsies:function(){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("suggestion_categories_streams")){a(this,twttr.streams.DECIDER);return}var c={sample_size:this.sampleSize,samples:!0,success:function(c){c=b.constructor.filterTopTweetsCategories(c),b.constructor.cacheCategories(c);var d=c.map(function(a){var c,d;return a.topTweetsCategory&&a.topTweetsCategory.sample&&(d=a.topTweetsCategory.sample.shift())&&(c=d.id),a.clone({category_link:b.pagePathFor(b.params.pathRoot,"InterestsCategory",{category:a.slug}),category_top_tweets_user_id:c,category_top_tweets_is_current_user:!!twttr.currentUser&&twttr.currentUser.id==c,following_category_top_tweets:a.topTweetsCategory?a.topTweetsCategory.followingTopTweets:null})});b.push(d.array),a(b,twttr.streams.SUCCESS),b.addTipsies(),b.reachedTheEnd();var e=c.map(function(a,b){return a.name});b.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length()})},error:function(){a(b,twttr.streams.ERROR)}};b.defaultOpts&&(c=twttr.merge(b.defaultOpts,c)),b.params.lang&&(c.lang=b.params.lang),b.params.country&&(c.country=b.params.country),b.params.city&&(c.city=b.params.city),c.top_tweets=!0,twttr.API.SuggestionCategory.getAll(c)},_setTitle:function(a){this.params.title!==undefined?a(this.params.title):a(_("Select the topics you are interested in. Find a few people you want to hear from, then follow them."))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(this.constructor.CATEGORIES,this.params.pathRoot)},_getStreamEndComponent:function(){return this._getHeaderComponent()}}).mixin(twttr.mixins.discoveryHelper);c&&d.mixin(c),a(d)})}),provide("streams/PeopleSearch",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.PeopleSearch",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.ignoreScribeItemPosition=!1}).subclassOf(twttr.streams.UserStream).methods({scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{name:"Search",query:this.params.query,type:"people"})},update:function(a){a.display_location="search-view-all-stream",a.pc=!0,twttr.API.User.search(this.params.query,a)},isCursorPagination:function(){return!1},_getEmptyStreamHtml:function(){return _("No people results for <strong>{{query}}</strong>.",{query:this.params.query})},getStreamEndHtml:function(){return _("No more people results for <strong>{{query}}</strong>.",{query:this.params.query})},_setHeader:function(a,b){this.header?a(this.header.$node):a((new twttr.views.StreamHeader(b)).$html())},_setTitle:function(a){twttr.isT1?a(_("People")):a(_("Results for: <strong>{{query}}</strong>",{query:this.params.query}))}}).statics({_deciderKey:"people_stream_people_search"}),a(twttr.streams.PeopleSearch)})}),provide("streams/t1/HeadlessPeopleSearch",function(a){using("_").as(function(a,_){twttr.klass("twttr.streams.HeadlessPeopleSearch",function(a,b){twttr.streams.PeopleSearch.apply(this,arguments);var c=new twttr.streams[a.headerStreamClass](a,b);this._setHeader=c._setHeader,this._setTitle=c._setTitle,this._setHeaderButton=c._setHeaderButton,this._updateHeaderFromStream=c._updateHeaderFromStream}).subclassOf(twttr.streams.PeopleSearch).methods({_setViewToggler:function(a,b){a(new twttr.views.BackLink(b.backLinkOptions))}})}),a(twttr.streams.HeadlessPeopleSearch)}),provide("streams/DashboardPeopleSearch",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardPeopleSearch",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",twttr.streams.PeopleSearch.apply(this,arguments)}).subclassOf(twttr.streams.PeopleSearch).methods({scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{name:"Search",query:this.params.query,type:"people"})},update:function(a){a.display_location="search-view-all-stream",a.pc=!1,twttr.API.User.search(this.params.query,a)},_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a()})}),provide("streams/DashboardTopPeopleSearch",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardTopPeopleSearch",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b={is_t1:twttr.isT1,statuses:!1,stories:!0,related_queries:!1,spelling_corrections:!1,query_source:twttr.search.searchQuerySource.TYPED_QUERY};twttr.merge(b,a);var c=this,d=b.success||$.noop;b.success=function(a,b){var e=new twttr.anywhere.api.util.BaseCollection;a.stories.each(function(a){a.type=="user"&&(e=e.concat(a.content.users))}),d(e,b),c.trigger("results",[e])},twttr.API.Search.search(this.params.query,b)},_setHeader:function(a,b){a("")},_getStreamEndComponent:function(){return new twttr.components.TopPeopleStreamEnd(this.params.query)},itemViewClass:"DashboardStreamUser"}),twttr.klass("twttr.components.TopPeopleStreamEnd").subclassOf(twttr.components.Base).initializer(function(a){(new twttr.views.TopPeopleStreamEnd({query:a})).render(this.$node,"append")}),a()})}),provide("streams/ListFollowers",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ListFollowers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName).lists(function(c){c.find(function(a){return a.slug===b.params.listSlug}).followers(a)})},_setTitle:function(a){twttr.isT1?a(_("List subscribers")):a(_("People following this list"))},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return c.slug===a.listSlug?twttr.currentUser:null};this._registerAddToStreamEvent(twttr.API.List,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"unfollow",b)}}}).statics({_deciderKey:"people_stream_list_followers"}),a(twttr.streams.ListFollowers)})}),provide("streams/ListMembers",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ListMembers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName).lists(function(c){c.find(function(a){return a.slug===b.params.listSlug}).members(a)})},_setTitle:function(a){twttr.isT1?a(_("List members")):a(_("People this list follows"))},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c,d){return c.slug===a.listSlug?d:null};this._registerAddToStreamEvent(twttr.widget.ListMembershipDialog,"addListMember",b),this._registerRemoveFromStreamEvent(twttr.widget.ListMembershipDialog,"removeListMember",b)}}}).statics({_deciderKey:"people_stream_list_members"}),a(twttr.streams.ListMembers)})}),provide("streams/Discover",function(a){using("_","util","mixins/t1/cardActionable","helpers","constants").as(function(b,_){twttr.klass("twttr.streams.Discover",function(a,b){var c=this;twttr.streams.Stream.apply(c,arguments),this.scribbler=twttr.Scribbler.clientEvent,c.registerCardActions(),this.registerTweetActionEvents(),this.initComponentEvents(),c.$find(".js-user-tipsy").tipsy({gravity:"s"}),twttr.API.CurrentUser.bind("changedLocation.discovery",function(){jQuery.contains(document.body,c.$node[0])?c._fetchItems($.noop):c._lastUpdate=null})}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.cardActionable,twttr.mixins.componentEvents,twttr.mixins.tweetActionable).statics({discoveryRefreshRate:3e5}).methods({streamItemType:"story",_expandable:!0,itemViewClass:function(a){return twttr.views["Card"+b.util.capitalize(a.type)]},streamItemId:function(a){return a.getId()},addTipsies:function(){this.$find(".js-user-tipsy").tipsy({gravity:"s"})},afterFirstSwitchingTo:function(a){this._fetchItems(a)},afterSwitchingToAgain:function(a){!this._lastUpdate||this._lastUpdate+twttr.streams.Discover.discoveryRefreshRate<=this.now()?this._fetchItems(a):a&&a()},now:function(){return(new Date).getTime()},reset:function(){this.$streamItems().empty(),this.items=[],this.itemIds=null,this.$find(".js-discovery-error").remove()},_setTitle:function(a){a(_("Stories"))},_fetchItems:function(a){var b=this;!this.items.length&&this.showLoadingSpinner();var c=function(){b.reset(),b._lastUpdate=null,b.hideLoadingSpinner(),(new twttr.views.DiscoveryStreamError).$html().appendTo(b.dom()),a(b,twttr.streams.ERROR)},d=function(d){if(d.stories.isEmpty()){c();return}b.reset(),b.hideLoadingSpinner(),b._lastUpdate=b.now(),$.each(d.stories.array,function(a,b){b.position=a+1}),b.push(d.stories.array),b.newItemsCount=d.stories.length(),b.render(),b.ellipsify(),b.addTipsies(),a&&a(b,twttr.streams.SUCCESS),b.reachedTheEnd()};twttr.API.Discovery.discovery({success:d,error:c,include_entities:!0,tweet_count:0})},ellipsify:function(){b.helpers.ellipsify(this.$find("h3.js-story-title,p.js-metadata")),b.helpers.ellipsify(this.$find("p.js-news-snippet, h4.js-news-headline"),!1,!0,null,{ellipsis:"&ellip;"})},_scribeResults:function(a,c,d){this._scribeEmptyResults(a,c,d);if(c.length){var e=[],f={};twttr.each(c,function(a,c){var d,g=a.content&&a.content.articles&&a.content.articles.array[0];g?d=g.query:a.content&&(d=a.content.query),d&&(e.push(d),f[d]={item_type:b.constants.clientEvent.itemType.story,item_position:c,item_description:a.type})}),this.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length,event_value:e.length,item_details:f,referring_event:a})}}}).click({".story-social-new-tweet":function(a,b){a.stopPropagation(),a.preventDefault();var c=b.data("url");(new twttr.widget.TweetDialog({draggable:!0,template:{title:_("Tweet this link")},defaultContent:c,origin:"discovery-story-tweet-button"})).open().focus()}}),a(twttr.streams.Discover)})}),provide("streams/SavedSearches",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.SavedSearches",function(a,b){twttr.streams.Stream.apply(this,arguments),this.oldItemsCount=-1,this.scribbler=twttr.Scribbler.clientEvent}).subclassOf(twttr.streams.Stream).methods({itemViewClass:"StreamSavedSearch",streamItemType:"saved_search",streamItemId:function(a){return a.id}}).methods({afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_setTitle:function(a){a("Saved searches")},_fetchItems:function(a){var b=this;twttr.currentUser.savedSearches(function(c){b.items=c.array,b.oldItemsCount==-1&&(b.oldItemsCount=b.items.length),a(b,twttr.streams.SUCCESS),b.reachedTheEnd()})},_scribeResults:function(a,b,c){this._scribeEmptyResults(a,b,c);if(b.length){var d=twttr.map(b,function(a){return a.query});this.scribbler.scribe({component:"stream",action:"results"},{item_names:d,item_count:d.length,event_value:d.length,referring_event:a})}}}),a(twttr.streams.SavedSearches)})}),provide("mixins/SinceMaxPagination",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.SinceMaxPagination",function(){this.statics({deciderKey:function(a){return this._deciderKey=a,this}}),this.methods({_fetchItems:function(a){this.fetcher(!0,a)},fetcher:function(a,b,c){var d=this;twttr.is.fn(a)&&(c=b,b=a,a=!1);if(this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){b(this,twttr.streams.DECIDER);return}var e=a?this._optionsForOld(b):this._optionsForNew(b);c=c||{},e=twttr.merge(c,e),this.excludeEntities||(e.include_entities=1),this.update(e,this.params,b)},fetchUntilScreenIsFull:function(){var a=this;!this.noMoreOldItems&&this._isInDOM()&&this._shorterThanWindow()&&this.getMoreOldItems(function(b,c){c!==twttr.streams.SUCCESS?a._showError(c):a.fetchUntilScreenIsFull()})},_isInDOM:function(){return jQuery.contains(document.body,this.$node[0])},_shorterThanWindow:function(){return this.$node.height()<$(window).height()},_optionsForNew:function(a){var b=this,c={success:function(c){c instanceof twttr.API.util.BaseCollection&&(c=c.array),c.length&&(b._updateIds(c),b.unshift(c)),a&&a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)}};return this.items.length&&(c.since_id=this._sinceId),c},_optionsForOld:function(a){var b=this,c={success:function(d){c.max_id&&(d=d.slice(1)),d instanceof twttr.API.util.BaseCollection&&(d=d.array),d.length?(b._updateIds(d),b.push(d)):b.reachedTheEnd(),a&&a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}};return this.items.length?(c.max_id=this._maxId,c.count=this.PAGE_SIZE+1):c.count=this.PAGE_SIZE,c},_updateIds:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));var b=a[0],c=a[a.length-1],d,e;this._idForItem?(d=this._idForItem(b,"first"),e=this._idForItem(c,"last")):(d=b.id,e=c.id);if(!this._sinceId||twttr.natcompare(d,this._sinceId)>0)this._sinceId=d;if(!this._maxId||twttr.natcompare(e,this._maxId)<0)this._maxId=e}})}),a(twttr.mixins.SinceMaxPagination)})}),provide("mixins/PollingStream",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.PollingStream",function(){var a={ACTIVE:3e4,INACTIVE:9e4},b=!0,c=a.ACTIVE;$(window).focus(function(){c=a.ACTIVE,b=!0}),$(window).blur(function(){c=a.INACTIVE,b=!1}),this.statics({pollingDeciderKey:function(a){return this._pollingDeciderKey=a,this}}),this.methods({_getInterval:function(){return this.timeouts?b?this.timeouts.ACTIVE:this.timeouts.INACTIVE:c},_pollFetch:function(){var a={headers:{"X-Twitter-Polling":!0}};this.fetcher(twttr.bind(this,function(a){var b=a.newItemsCount;b>0&&(this.showNewItems(b,!0),this.trigger("newItems",[a,b]))}),a)},startPeriodicFetcher:function(){if(this.periodicUpdater||this.constructor._pollingDeciderKey&&!twttr.decider.isAvailable(this.constructor._pollingDeciderKey))return;this.periodicUpdater=setTimeout(twttr.bind(this,this.fetchNewItemsThenPoll),this._getInterval())},stopPeriodicFetcher:function(){this.periodicUpdater&&(clearTimeout(this.periodicUpdater),this.periodicUpdater=null)},fetchNewItemsThenPoll:function(){var a=!0;this._pollShouldFetch&&(a=this._pollShouldFetch()),a&&this._pollFetch(),this.restartFetcher()},restartFetcher:function(){this.stopPeriodicFetcher(),this.startPeriodicFetcher()}})}),a(twttr.mixins.PollingStream)})}),provide("mixins/activityStreamEvents",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.activityStreamEvents",function(){var a;twttr.isT1?a="div.stream-item-activity-me div.activity-supplement img.avatar,     div.stream-item-activity-network div.follow-more-than-two img.avatar,     div.stream-item-activity-network.stream-item-list_member_added img.avatar,     div.stream-item-activity-network div.activity-secondary-supplement img.user-profile-link":a=".stream-item-activity-me .sub-stream-item img.user-content-image,     .stream-item-activity-network .follow-more-than-two img.user-content-image,     .stream-item-activity-network.stream-item-list_member_added img.user-content-image,     .stream-item-activity-network .activity-secondary-supplement .user-profile-link",$(a).tipsy({live:!0,gravity:"s"})}),a(twttr.mixins.activityStreamEvents)})}),provide("mixins/inviteFriends",function(a){using("util","constants").as(function(b){twttr.klass.mixin("twttr.mixins.inviteFriends",function(){this.methods({sendInvitesByEmailSuccess:function(a){var b=a.invited&&a.invited.length;b?(this.scribbler.scribe({section:"dashboard",component:"invite_friends",action:"invited"},{event_value:b,item_count:b}),twttr.showMessage(b>1?_("OK, we will send invites to your {{count}} friends!",{count:b}):_("OK, we will send an invite to {{email}}!",{email:a.invited[0]})),this.$textarea.val("")):twttr.showError(_("Something is wrong, nobody was invited :-(")),this.$textarea.removeAttr("disabled").blur()},sendInvitesByEmailError:function(a){var b=twttr.helpers.extractEmailAddresses(this.$textarea.val()),c=b.length===1?b[0].split(","):b.length,d=twttr.API.util.RemoteRequest.apiErrorCodeFromResponse(a)||a.status;this.scribbler.scribe({component:"invite_friends",action:"error"},{status_code:d,item_count:c});switch(d){case 47:twttr.showError(_("We couldn't send invitations to any of those addresses."));break;case 37:twttr.showError(_("There was an error emailing your friends. Please try again later."));break;default:twttr.showMessage(_("OK, we will send invites to your friends!"))}this.$textarea.removeAttr("disabled").focus()},formSubmitCallback:function(){if(this.$textarea.attr("disabled"))return;var a=twttr.helpers.extractEmailAddresses(this.$textarea.val());if(a.length){this.$textarea.attr("disabled","disabled").val(a.join(", "));var b=this;twttr.API.AddressBook.sendInvitesByEmail(a,{source:"invite_friends",success:twttr.bind(this,this.sendInvitesByEmailSuccess),error:twttr.bind(this,this.sendInvitesByEmailError)})}else twttr.showError(_("Please check the address you entered."))},addFormEvents:function(a){this.scribbler=a||new twttr.Scribbler,this.$textarea=this.$textarea||this.$find("textarea"),this.$textarea.bind("keyup",function(a){var c=$(this);(a.which==b.constants.keyCodes.enter||c.val().indexOf(",")>0)&&c.addClass("expanded")}),twttr.helpers.addFormEvents(this.$find("form"),twttr.bind(this,this.formSubmitCallback))}})}),a(twttr.mixins.inviteFriends)})}),provide("mixins/newStreamItemsBar",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.newStreamItemsBar",function(){this.methods({showNewStreamItemsBar:function(a){var b=this.$find(".js-new-tweets-bar"),c;this.newStreamItemsBarPhrase?c=this.newStreamItemsBarPhrase(a):c=a==1?_("1 new item"):_("{{count}} new items",{count:a}),b.length>0?b.html(c):(b=$((new twttr.views.NewTweetsBar({tweets_count_phrase:c,is_tweet:!1})).html()),b.hide().prependTo(this.dom()).slideDown())}})}),a(twttr.mixins.newStreamItemsBar)})}),provide("mixins/typeaheadScribing",function(a){using().as(function(b,_){var c=twttr.klass.mixin("twttr.mixins.typeaheadScribing",function(){return this.methods({startStatsTimer:function(){this._statsTimerStart||(this._statsTimerStart=+(new Date)),this._lastTimerEvent="start"},pauseStatsTimer:function(){this._statsTimerStart!==0&&this._lastTimerEvent=="start"&&(this._statsCumulativeTime+=+(new Date)-this._statsTimerStart,this._statsTimerStart=0),this._lastTimerEvent="pause"},resetStatsTimer:function(){this._statsCumulativeTime=0,this._statsTimerStart=0,this._lastTimerEvent="pause"},addLocalLatency:function(a,b){this._localLatencies.push(b)},addRemoteLatency:function(a,b){this._remoteLatencies.push(b)},medianAndStdDev:function(a){var b=twttr.reduce(a,0,function(a,b,c){return a+c}),c=a.length,d=b/c,e=twttr.reduce(a,0,function(a,b,c){return a+(c-d)*(c-d)}),f=Math.sqrt(e/c);return{median:d,stdDev:f}},scribe:function(a,b){twttr.is.def(this._scribbler)||(this._scribbler=twttr.Scribbler.global.spawn({context:"typeahead"}),this._scribbler.component={}),this._scribbler.scribe(a,b)},browserInfo:function(){var a="unknown";return $.browser.webkit?a="webkit":$.browser.msie?a="msie":$.browser.mozilla?a="mozilla":$.browser.opera&&(a="opera"),{browser:a,version:$.browser.version}},scribeLocalStorageLatency:function(a,b,c){var d=this.browserInfo();this.scribe("typeahead_localstorage_latency",{type:b,latency:c,browser:d.browser,version:d.version})},scribeSelect:function(a,b,c){var d=this._statsCumulativeTime,e=a.type==="click"?"click":"enter",f=c.length>0,g=c.data("remote")===!0,i="unknown";c.data("query")?i="saved search":c.find("a").data("search-query")?i="query suggestion":c.data("user-id")&&(i="users");var j=this.$node.find(".js-selectable").index(c)+1||0,k=this.medianAndStdDev(this._localLatencies),l=this.medianAndStdDev(this._remoteLatencies),m=twttr&&twttr.users&&twttr.users.typeahead?twttr.users.typeahead.length:0,n;try{n=JSON.stringify(localStorage).length}catch(o){n=0}this.scribe("typeahead_select",{time_to_completion:d,keystrokes_to_completion:this._keystrokes,item_count:f.toString(),item_details:i,index:j,query:b,was_remote:g.toString(),local_latency_median:k.median,local_latency_std_dev:k.stdDev,remote_latency_median:l.median,remote_latency_std_dev:l.stdDev,click_or_enter:e,local_storage_size:n,users_in_local_storage:m,people_from_api:twttr.caches.User.get("typeahead_people_from_api")||0,people_followed:twttr.caches.User.get("typeahead_people_followed"),profile_visits:twttr.caches.User.get("typeahead_profile_visits"),people_blocked:twttr.caches.User.get("typeahead_people_blocked"),people_unblocked:twttr.caches.User.get("typeahead_people_unblocked")}),this.resetStatsTimer(),this._keystrokes=0}}),this});a(c)})}),provide("mixins/discoveryHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.discoveryHelper",function(a){return a.methods({pagePathFor:function(a,b,c){return twttr.router[a+(b||"")+"Path"](c)},routePageTo:function(a,b,c){twttr.router.routeTo(this.pagePathFor(a,b,c))},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a}}),a}),a(twttr.mixins.discoveryHelper)})}),provide("mixins/usesRelatedResults",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.usesRelatedResults",function(a){return a.methods({_conversationRoleFor:function(a){return a.annotations.ConversationRole},tweetsForConversationRole:function(a,b){var c=this,d=twttr.filter(a.results.array,function(a){return c._conversationRoleFor(a)===b});return twttr.map(d,function(a){return a.value})},_groupNamed:function(a,b){return twttr.filter(a.array,function(a){return a.groupName===b})[0]},conversationGroupFor:function(a){return this._groupNamed(a,"TweetsWithConversation")},withRelatedResults:function(a,b,c){var d=this;twttr.API.Status.related(a.id,{include_entities:1,success:function(b){d._logResultGroups(b,a),c.success(b)},error:c.error||function(){}})},_logResultGroups:function(a,b){var c=this,d=(new Date).getTime()+"-"+(twttr.currentUser?twttr.currentUser.id:"guest")+"-"+b.id,e=[],f={related_impression_id:d,groups:e},g;$.each(a.array,function(a,b){var f=[],i=[];e.push(c._scribeDataFor(b,a)),g||(g=c._abDataFor(b)),b.sync("relatedImpressionId",d)}),scribble("show-related-tweets",f),g&&scribble("show-related-tweets",g,"www_ab_testing")},_scribeDataFor:function(a,b){var c={pos:b,groupName:a.groupName,resultType:a.resultType,annotations:this._annotationsFor(a),tweets:this._tweetsFor(a)};return a.sync("relatedGroupName",a.groupName),c},_abDataFor:function(a){var b;for(var c in a.annotations)c=="abData"&&(b||(b=a.annotations[c]));if(b)for(var d in b)a.sync("ab_data_"+d,b[d]);return b},_annotationsFor:function(a){var b=[],c="";for(var d in a.annotations)if(d!="abData"){var e={type:d,value:a.annotations[d]};b.push(e),c+=a.annotations[d]+" "}return c.length>0&&(c=c.substring(0,c.length-1)),a.sync("relatedAnnotations",c),b},_tweetsFor:function(a){var b=[];return $.each(a.results.array,function(c,d){a.resultType=="Tweet"&&b.push(d.value.id)}),b}}),a}),a(twttr.mixins.usesRelatedResults)})}),provide("mixins/profileHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.profileHelper",function(a){return a.methods({getUserInfo:function(a,b,c,d){c=c||{},this._screenName=a?a.toLowerCase():a;var e;c.batch===!0&&twttr.decider.isAvailable("profile_combined_api")?e=twttr.API.User.findForProfile:e=twttr.API.User.find,e.call(twttr.API.User,this._screenName,{success:twttr.bind(this,function(a){this.profileUser=twttr.profileUser=a,b&&b()}),error:twttr.bind(this,function(a){signal(">wokeUp"),a.status==403?twttr.isT1?twttr.app.switchToPage("403").send("suspendedUser"):twttr.Router.performRedirect(twttr.router.suspendedPath()):this.trigger("notFound"),d&&d()})})},_isSocialContextAvailable:function(){return twttr.decider.isAvailable("social_context")&&twttr.loggedIn&&twttr.currentUser.id!=twttr.profileUser.id},_defaultedScreenName:function(a){return!a&&twttr.loggedIn?twttr.currentUser.screenName:a},_addPromotedData:function(){twttr.promotedAccountStore.hasAccount()&&twttr.promotedAccountStore.getAccount().id==this.profileUser.id&&(this.profileUser=twttr.API.util.PromotedStore.getPromotedUserInstance(this.profileUser,twttr.promotedAccountStore.getAccount().impressionId),twttr.promotedAccountStore.clear())},noAutoRender:!0}).addViewData(function(){return{profile_user:new twttr.views.ProfileUser(twttr.profileUser)}}),a}),a(twttr.mixins.profileHelper)})}),provide("mixins/commonDashboardClickHandlers",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.commonDashboardClickHandlers",function(a){return a.click({".title-link":function(b,c){var d={input:"click",component:"dashboard",subcomponent:a._name,target:"dashboard_title",item:c.find(".dashboard-component-title").html()};scribble("dashboard_click",d)},".user-profile-link":function(b,c){var d=c.is("img")||c.find("img")[0],e=c.attr("data-user-id")||c.closest("a").attr("data-user-id"),f={input:"click",component:"dashboard",subcomponent:a._name,target:"user_profile_link",target_type:d?"image":"link",profile_id:e};scribble("dashboard_click",f)}}),a}),a(twttr.mixins.commonDashboardClickHandlers)})}),provide("mixins/t1/cardActionable",function(a){using("constants").as(function(b){var c=twttr.klass.mixin("twttr.mixins.cardActionable",function(){this.methods({registerCardActions:function(){var a=this;a.$node.delegate(".js-action-card-search","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("search","card_"+a._getElementCardType(this),{query:a._getCardQuery(this),item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-news","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("open_link","card_news",{url:$(this).attr("href"),query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)}),b.stopPropagation()}),a.$node.delegate(".js-action-card-expandtweets","simpleExpandoContract",function(b){var c=a._getCardQuery(this);a._scribeCardAction("deselect","card_news",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-expandtweets","simpleExpandoExpand",function(b){var c=a._getCardQuery(this);a._scribeCardAction("select","card_news",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-tweetlink","click",function(b){var c=a._getCardQuery(this),d=a._getStreamItemId(this);a._scribeCardAction("compose_tweet","card_news",{url:d,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-permalink","click",function(b){var c=a._getCardTweetId(this);a._scribeCardAction("permalink","card_tweet",{item_count:1,item_ids:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-profile","click",function(b){var c=a._getCardTweetId(this);a._scribeCardAction("profile_click","card_tweet",{item_count:1,item_ids:[c],item_details:a._getCardItemDetails(this,c,a._getElementUserId(this))})}),a.$node.delegate(".js-action-card-media","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("click",a._getCardMediaType(this)+"_card_topic",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})})},_scribeCardAction:function(a,b,c){trackClient({action:a,component:b},c)},_getCardAttribute:function(a,b){var c=$(a).closest(".js-story-item");return c.attr(b)},_getElementUserId:function(a){var b=$(a).closest(".js-actionable-tweet");return b.attr("data-user-id")},_getCardTweetId:function(a){return this._getCardAttribute(a,"data-tweet-id")},_getCardQuery:function(a){return this._getCardAttribute(a,"data-query")},_getStreamItemId:function(a){var b=$(a).closest(".js-stream-item");return b.attr("data-item-id")},_getElementCardType:function(a){return this._getCardAttribute(a,"data-story-type")},_getCardMediaType:function(a){return this._getCardAttribute(a,"data-card-media-type")},_getCardItemPosition:function(a,b){var c=$(a).closest("div.js-stream-items"),d;return c.length&&c.find("[data-query]").each(function(a){var c=$(this),e=c.attr("data-query");if(b+""==e)return d=a,!1}),d},_getCardItemDetails:function(a,c,d){var e={},f={item_type:b.constants.clientEvent.itemType.story,item_description:this._getElementCardType(a),item_position:this._getCardItemPosition(a,c)};return d&&(f.target_id=d),e[""+c]=f,e}})});a(c)})}),provide("mixins/t1/discoveryStoryHelpers",function(a){using("_","constants","util").as(function(b){var c=twttr.klass.mixin("twttr.mixins.discoverySearchHelper",function(a){this.methods({formatted_tweet_count_text:function(){return _("{{count}} Tweets",{count:b.util.formatNumber(this.tweet_count,twttr.pageLocale)})},story_name:function(){return this.name||this.query},is_hashtag:function(){return this.story_name().substring(0,1)==="#"},search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.TREND}})}),d=twttr.klass.mixin("twttr.mixins.discoveryMediaRenderHelper",function(a){this.methods({escaped_query:function(){return escape(this.id||this.query)},afterHtml:function(){if(!this.has_media)return;var a=this;setTimeout(function(){var b=(new Date).getTime(),c=a.escaped_query(),d=$("div.js-story-item[data-query='"+c+"']");d.find("div.js-story-load-status").show();var e=d.find("img.js-story-media").error(function(b){twttr.decider.isAvailable("t1d_scribe_errors")&&a._scribe("error",{id:c,url:a.image_url}),d.removeClass("js-loading loading"),d.addClass("js-nomedia nomedia")}).load(function(){twttr.decider.isAvailable("t1d_scribe_times")&&a._scribe("complete",{id:c,time:(new Date).getTime()-b,url:a.image_url}),d.removeClass("js-loading loading")});e.attr("src",a.image_url)},0)},_scribe:function(a,b){trackClient({action:a,component:this.scribeComponent},b)}})});a(c,d)})}),provide("mixins/UserSimilaritiesStreamT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.UserSimilaritiesStreamT1",function(){this.methods({_setTitle:function(a){twttr.helpers.isCurrentUser(twttr.profileUser.screenName)?a(_("Similar to you")):a(_("Similar to {{full_name}}",{full_name:twttr.profileUser.name}))}})});a(c)})}),provide("mixins/SuggestionCategoriesStreamT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.SuggestionCategoriesStreamT1",function(){this.methods({itemViewClass:"StreamInterestCategory",sampleSize:"large",addTipsies:function(){this.$find(".js-user-tipsy").tipsy({gravity:"s"})},_setHeader:function(a,b){b.header_help=_("Select topics you&rsquo;re interested in. Follow people you want to hear from."),b.placeholder=_("Search for a topic, full name, or @username");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowInterestsSearchPath,b);a(c.$node)},_setTitle:function(a){a(_("Browse categories"))},_getStreamEndComponent:function(){return new twttr.components.StreamEnd(this._getStreamEndHtml(),this._getStreamEndShowBird())}})});a(c)})}),provide("mixins/SuggestionCategoryMembersStreamT1",function(a){using("helpers","mixins/hasGovernmentSearchHeader").as(function(b){var c=twttr.klass.mixin("twttr.mixins.SuggestionCategoryMembersStreamT1",function(){this.mixin(b.mixins.hasGovernmentSearchHeader),this.methods({_setTitle:function(a){a(this.category.name)},_setViewToggler:function(a){var b={route:twttr.router.whoToFollowInterestsPath(),name:_("View all categories")};a(new twttr.views.BackLink(b))},_getStreamEndComponent:function(){return new twttr.components.StreamEnd(this._getStreamEndHtml(),this._getStreamEndShowBird())},_showGovernmentSearchHeader:function(){return twttr.abdecider.choose("government_sul_your_reps_195")!=="show_in_government_sul"?!1:this.category.slug===(twttr.isLocalhost?"celebrities":"government")}})});a(c)})}),provide("mixins/UserRecommendationsT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.UserRecommendationsT1",function(){this.methods({getRecPosition:function(a){var b;return this.$find(".js-account-summary").each(function(c,d){if(a.attr("data-user-id")==$(d).attr("data-user-id"))return b=c,!1}),b},LIST_ITEM_SELECTOR:".js-recommended-followers > .js-actionable-user",_generateUserList:function(a){return $('<div class="js-recommended-followers flex-module-inner" data-section-id="wtf">'+(new twttr.views.UserSmallList(a)).html()+"</div>")},_removeRefreshLink:function(){this.$find("a.js-refresh-suggestions").parent("span").remove()},_getModuleViewName:function(){return this.screenName?"DashboardUserSimilarities":"DashboardUserRecommendations"},_shouldHaveSpacer:function(){return!1}})});a(c)})}),provide("mixins/hasGovernmentSearchHeader",function(a){using("helpers").as(function(b){var c=twttr.klass.mixin("twttr.mixins.hasGovernmentSearchHeader",function(){this.methods({_setHeader:function(a){var c=this;if(this._showGovernmentSearchHeader()){var d=(new twttr.views.GovernmentAccountSearch({zip_code:this.params&&this.params.zipCode||""})).$html();b.helpers.addFormEvents(d.find(".js-government-account-search"),function(a,b){c.trigger("governmentSearch",[b.zip])}),a(d)}else a()},_showGovernmentSearchHeader:function(){return!0}})});a(c)})}),provide("mixins/prefollowingStream",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.prefollowingStream",function(a){return a.methods({deferredFollows:{},preFollows:{},userActionPrefollow:function(a){var b=twttr.helpers.getUserId(a);this.preFollows[b]=!0,this.userActionFollow(a)},userActionFollow:function(a){var b=this,c=twttr.helpers.getUserId(a);this.deferFollows?(this.deferredFollows[c]=!0,twttr.API.User.trigger("prefollow_before"),twttr.API.User.find(c,function(c){b.updateButtonFollow(a,c["protected"]),twttr.API.User.trigger(c["protected"]?"prefollow_request_success":"prefollow_success",c)})):this.constructor.uber.userActionFollow.apply(this,arguments)},userActionUnfollow:function(a){var b=twttr.helpers.getUserId(a);this.deferFollows&&this.deferredFollows[b]?(delete this.deferredFollows[b],twttr.API.User.trigger("unprefollow_before"),twttr.API.User.find(b,function(a){twttr.API.User.trigger("unprefollow_success",a)}),this.preFollows[b]&&(delete this.preFollows[b],this.scribbler.scribe({action:"unprefollow"},{item_ids:[""+b],item_count:1}))):this.constructor.uber.userActionUnfollow.apply(this,arguments)},commitPrefollows:function(a){var b=this,c=[],d=[],e=0;for(var f in this.deferredFollows)c.push(f);for(var f in this.preFollows)d.push(f);if(c.length==0){a();return}this.scribbler.scribe({action:"prefollow"},{item_ids:d,item_count:d.length}),twttr.currentUser.friends.followAll(c,{stringifiedIds:!0,success:function(_,c){for(var d=0;d<c.response.length;++d){var e=c.response[d];b.scribbler.scribe({action:"follow"},{item_ids:[""+e.id],item_count:1})}a()},error:function(){twttr.currentUser.friendsCount+=c.length,a()}}),this.deferFollows=!1,this.deferredFollows={},this.preFollows={}}}),a}),a(twttr.mixins.prefollowingStream)})}),provide("streams/StarterList",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.StarterList",function(a,b){twttr.streams.ListMembers.apply(this,arguments)}).subclassOf(twttr.streams.ListMembers).mixin(twttr.mixins.discoveryHelper).methods({update:function(a){this.params.list.members(a)},_setTitle:function(a){a(_("{{name}} suggests you also follow these accounts:",this.params.list.user.attributes))},_getEmptyStreamHtml:function(){return _("Sorry, {{name}} doesn't recommend anybody in particular.<br />Find users by <a href='{{url}}'>Interests</a>.",{url:this.pagePathFor(this.params.pathRoot,"Interests"),name:this.params.list.user.name})}}),a(twttr.streams.StarterList)})}),provide("streams/StarterFriends",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.StarterFriends",function(){twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){if(!twttr.helpers.canViewUser(c)){b._showError(twttr.streams.PROTECTED),b.doneLoadingMore();return}c.friends(a)})},_setTitle:function(a){a(_("@{{screen_name}} follows these accounts:",{screen_name:this.screenName}))}}).statics({_deciderKey:"people_stream_friends"}),a(twttr.streams.StarterFriends)})}),provide("streams/UserRecommendationsStream",function(a){using("_","streams/UserStream","mixins/userRecommendationsHelper","mixins/userActionable").as(function(b,_){var c=twttr.klass("twttr.streams.UserRecommendationsStream",function(a,c,d){b.streams.UserStream.call(this,a,c),c&&(this._processLoadedUsers(c),a.cursor&&(this.cursor=a.cursor)),this.whotofollowComponentName="whotofollow_stream",this.registerUserRecommendationsActions()}).subclassOf(b.streams.UserStream).mixin(b.mixins.userRecommendationsHelper,b.mixins.userActionable).methods({afterFirstSwitchingTo:function(a){this.items&&this.items.length?(a(this,twttr.streams.SUCCESS),this.render()):this.getMoreOldItems(a)},_processLoadedUsers:function(a,b){a&&this.doneLoadingMore();var c="whotofollow_view_all_recommended_users",d=this.params.inWelcomeFlow?"welcome_flow":"find_users",e={tracking_context:d};return b&&(e.error_status=b.status),this.trackImpressions(a,c,e),a},loadRecommendedUsers:function(a){a.personalized=a.personalized||this.params.personalized||!1,a.force_bq=a.personalized,a.algorithm=a.algorithm||this.params.algorithm||"",a.connections=!0;if(this.params.inWelcomeFlow){var b=twttr.abdecider.choose("wtf_welcome_persistent_100"),c=b&&b.match(/bucket(\d+)/),d=c?c[1]:0;a.high_timeout=!0,a.display_location="welcome-flow-recommendations",a.bucket_id=d}twttr.decider.isAvailable("wtf_visited_users")&&(a.related_users=twttr.recentlyViewedUsers.stack.concat(twttr.loggedOutViewedUsers.stack)),a.cursor===undefined&&(a.cursor=-1);var e=this,f=a.success;a.success=function(a,b){e.hadBqResults=b.response.had_bq_results;var c=e.recsToUsers(a);f(c,b)},twttr.loggedIn?twttr.currentUser.recommendedUsers2(a):twttr.API.User.recommendedUsers2(a)},update:function(a){var b=this,c=a.success,d=a.error,e=function(){var a={success:function(a,d){a=b._processLoadedUsers(a),c(a,d)}};b.params.lang&&(a.lang=b.params.lang),b.params.country&&(a.country=b.params.country),b.params.city&&(a.city=b.params.city),a.bypass_cache=!0,twttr.API.SuggestionCategory.randomSample(a),b.sulFallback=!0,b._streamManager&&b._streamManager.setTitle(b)};a.success=function(a,d){a=b._processLoadedUsers(a);if(!a.length()){if(twttr.decider.isAvailable("whotofollow_random_sample")&&b.params.useSulFallback!==!1&&(!b.params.inWelcomeFlow||b.params.useSulFallback)){e();return}b.trigger("noMoreRecommendations")}b.sulFallback=!1,c(a,d),b._streamManager&&b._streamManager.setTitle(b)},a.error=function(a){b._processLoadedUsers(null,a),d&&d(a)},a.cursor==-1&&twttr.decider.isAvailable("promoted_accounts_in_whotofollow_viewall")&&!b.params.inWelcomeFlow&&(a.pc=!b.params.noPromotedContent,a.display_location="wtf-view-all-stream"),this.params.sulWithNoFollows&&twttr.currentUser.friendsCount==0?e():this.loadRecommendedUsers(a)},setStreamManager:function(a){this._streamManager=a},_setTitle:function(a){if(this.params.invisibleWhenEmpty&&(!this.items||this.items.length==0)){a("");return}if(twttr.is.def(this.params.title)){a(this.params.title);return}if(twttr.isT1){a(_("Who to follow"));return}this.params.inWelcomeFlow?a(_("Follow these people to get started:")):this.params.inHomePage?(this.$find(".stream-title").css("border-bottom","1px solid #EBEBEB"),a(_('<div class="wtf-timeline-title"><div class="wtf-timeline-text">It looks like you aren&#39;t following anyone yet.<br /><b>Go ahead and follow some people!</b></div><button class="done-right button selected" type="button">Done following</button></div>'))):this.sulFallback?a(_('We&#39;re building a list of personalized suggestions for you. In the meantime, here are some other <a href="{{url}}">interesting accounts</a> to follow.',{url:twttr.router.whoToFollowInterestsPath()})):a(_("Twitter accounts suggested for you based on who you follow and more."))},_getEmptyStreamHtml:function(){return this.params.invisibleWhenEmpty&&(!this.items||this.items.length==0)?"":this.params.personalizedOnly?_("We&#39;re sorry, Twitter does not have any personalized suggestions to show you at this time. You can browse our regular <a href='{{url}}'>Who to Follow</a> list.",{url:twttr.router.whoToFollowPath()}):_("Sorry, we&#39;ve temporarily run out of recommendations for you. We're out there looking for more right now. Please check back soon!")},_getStreamEndHtml:function(){return this.params.inHomePage?_('<button class="done-right button selected" type="button">Done following</button></div>'):_("<a href='#' class='back-to-top'>Back to top &uarr;</a>")},_getStreamEndShowBird:function(){return this.params.inHomePage?!1:!0},_trackNewImpressions:function(){}});twttr.isT1&&c.methods({_setHeader:function(a,b){b.header_help=_("Twitter accounts suggested for you based on who you follow and more.");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowSuggestionsSearchPath,b);a(c.$node)}}),a(twttr.streams.UserRecommendationsStream)})}),provide("streams/UserRecommendationsDashboardStream",function(a){using().as(function(b){twttr.klass("twttr.streams.UserRecommendationsDashboardStream",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",this.deferFollows=!!a.deferFollows,twttr.streams.UserRecommendationsStream.call(this,a,b)}).subclassOf(twttr.streams.UserRecommendationsStream).mixin(twttr.mixins.prefollowingStream).methods({_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a(twttr.streams.UserRecommendationsDashboardStream)})}),provide("streams/UserSimilaritiesStream",function(a){using("_",twttr.isT1?"mixins/UserSimilaritiesStreamT1":"").as(function(b,_,c){var d=twttr.klass("twttr.streams.UserSimilaritiesStream",function(a,b){twttr.streams.UserStream.call(this,a,b),this.registerUserRecommendationsActions(),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"})}).subclassOf(twttr.streams.UserStream).mixin(twttr.mixins.userRecommendationsHelper).methods({update:function(a){var b=this,c=a.success,d=a.error,e="whotofollow_view_all_similar_users",f="similar_to";a.success=function(a,d){var g=b.recsToUsers(a);b.trackImpressions(g,e,{tracking_context:f}),c(g,d)},a.error=function(a){b.trackImpressions(null,e,{tracking_context:f,error_status:a.status}),d&&d(a)},a.connections=!1,a.pc=!0,a.display_location="st-view-all-stream",twttr.profileUser.similarUsers(a)},setStreamManager:function(a){this._streamManager=a},_setTitle:function(a){a(_("Accounts similar to @{{screen_name}}:",{screen_name:this.params.screenName}))},_getEmptyStreamHtml:function(){return _("Sorry, we've temporarily run out of users similar to @{{screen_name}}. We're out there looking for more right now. Please check back soon!",{screen_name:this.params.screenName})},_trackNewImpressions:function(){}});c&&d.mixin(c),a(twttr.streams.UserSimilaritiesStream)})}),provide("streams/ContactImportMatches",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.streams.ContactImportMatches",function(a,b,c){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.UserStream.apply(this,arguments),this.$node.addClass("contact-import-matches"),a.noBigImages||(this.$node.addClass("contact-import-images"),this.itemViewClass="MatchedContactUser"),this._loadedMatches=!1,this._loadingCount=0,this._loadingComponent=new twttr.views.ContactImportLoading,this._followingCount=0,this._showFollowing=!1,this.$headerNode=this.getHeaderContainer();var d=this;this.$headerNode.delegate(".js-toggle-following","click",function(a){return d._toggleFollowing(),!1})}).subclassOf(twttr.streams.UserStream).mixin(twttr.mixins.discoveryHelper).methods({streamViewClass:"ContactImportMatches",afterSwitchingToAgain:function(a){this.afterFirstSwitchingTo(a)},afterFirstSwitchingTo:function(a){twttr.API.User.bind("follow.ContactImportMatches",twttr.bind(this,this._incrementFollowingCount)),twttr.API.User.bind("follow_request.ContactImportMatches",twttr.bind(this,this._incrementFollowingCount)),twttr.API.User.bind("unfollow.ContactImportMatches",twttr.bind(this,this._decrementFollowingCount)),this._loadedMatches||this.getMoreOldItems(a)},beforeSwitchingAway:function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),twttr.API.User.unbind(".ContactImportMatches")},update:function(a){this._loadingError=!1;var b=this,c=a.success,d=a.error;a.success=function(a,d){var e=!b._loadedMatches;b._loadedMatches="users"in d.response;if(b._loadedMatches){delete b._loadingComponent;if(d.response.count){b.showInviteesPopup=!!d.response.others_count&&b.params.pathRoot=="welcome";var f=twttr.merge(d.response,{retry_service_path:b.pagePathFor(b.params.pathRoot,"Import")});d.response.following_count==d.response.count&&(f.following_count=0,b._showFollowing=!0),e&&b.scribbler.scribe({component:"stream",action:"matches"}),b._followingCount=d.response.following_count,b._othersCount=d.response.others_count,b._matchesHeaderComponent=new twttr.components.ContactImportMatchesStats(b,f)}else e&&b.scribbler.scribe({component:"stream",action:"no_matches"}),d.response.others_count?b._inviteOthersInline():window.setTimeout(function(){b.routePageTo(b.params.pathRoot,"Import"),twttr.showMessage(_("There was no one in your address book"))},0)}c(a,d),b._loadedMatches&&b._followingCount&&b.$node.parents(".dashboard").length==0&&Math.abs(twttr.$doc.scrollTop()+twttr.windowHeight-twttr.$doc.height())<500&&b.getMoreOldItems(),b._loadedMatches||(b._loadingCount++<b.constructor._retryCount?b._scheduleRetry():(b.scribbler.scribe({component:"stream",action:"timeout"}),b._loadingCount=0,b._showError(twttr.streams.TIMEOUT)))},a.error=function(a,c){if(a.error=="denied"){b.routePageTo(b.params.pathRoot,"Import"),twttr.showMessage(_("Authorization to access your contacts was denied"));return}a.error&&(b._loadingError=!0),b.trigger("error"),d(a,c)},twttr.API.AddressBook.contactsMatches(a)},_scribeResults:function(a,b,c){if(a=="initial"&&!this._loadedMatches)return;c=c||{},c.message=""+this._othersCount,twttr.streams.UserStream.prototype._scribeResults.apply(this,[a,b,c])},_toggleFollowing:function(){this._showFollowing=!this._showFollowing;for(var a=0;a<this.items.length;++a){var b=this.items[a];if(b.following||b.followRequestSent){var c=this.$node.find(this.itemSelector(b.id));this._showFollowing?c.fadeIn():c.fadeOut()}}this._updateFollowingToggle()},_incrementFollowingCount:function(a,b){this._updateFollowing(b,!0)},_decrementFollowingCount:function(a,b){this._updateFollowing(b,!1)},_updateFollowing:function(a,b){for(var c=0;c<this.items.length;++c){var d=this.items[c];if(d.id==a.id){this.items[c]=a;break}}this._followingCount=Math.max(0,this._followingCount+(b?1:-1)),this._showFollowing&&this._updateFollowingToggle()},_updateFollowingToggle:function(){var a={following_count:this._followingCount},b;this._showFollowing?b=_("Hide {{following_count}} following",a):b=_("Show {{following_count}} following",a),this.$headerNode.find(".js-toggle-following").text(b)},_followAll:function(a){var b=this;if(a.hasClass("disabled"))return;a.addClass("disabled");var c={success:function(c,d){a.removeClass("disabled");var e="";switch(c.followed_ids.length){case 0:e=_("Requests were sent to everybody.");break;case 1:e=_("Congratulations! You are now following 1 more user.");break;default:e=_("Congratulations! You are now following {{count}} more users.",{count:c.followed_ids.length})}twttr.showMessage(e),twttr.API.User.startBulkFollowing();var f=0;twttr.API.User.findAllCached(c.followed_ids).each(function(a){a.data("following",!0),a.following=!0;var b={requestParameters:[{user_id:a.id}]};twttr.API.User.trigger("follow_before",b),twttr.API.User.trigger("follow_success",a),f++}),twttr.API.User.findAllCached(c.requested_ids).each(function(a){a.data("follow_request_sent",!0),a.followRequestSent=!0;var b={requestParameters:[{user_id:a.id}]};twttr.API.User.trigger("follow_request_before",b),twttr.API.User.trigger("follow_request_success",a),f++}),twttr.API.User.stopBulkFollowing(),b.scribbler.scribe({component:"stream_header",action:"follow"},{item_count:c.followed_ids.length,item_ids:c.followed_ids,event_value:c.followed_ids.length,event_info:"follow_all",context:"import"}),b.scribbler.scribe({component:"stream_header",action:"follow_all"},{item_count:c.followed_ids.length,event_value:c.followed_ids.length,context:"import"}),b._followingCount+=c.followed_ids.length+c.requested_ids.length-f,this._showFollowing&&this._updateFollowingToggle()},error:function(b){a.removeClass("disabled"),twttr.showError(_("There was an error following your contacts."))}};twttr.API.AddressBook.followAllContacts(c)},_saveAsList:function(){var a=this;(new twttr.widget.ListDialog({template:{content:(new twttr.views.ListDialog({name:_("Friends"),mode:"private"})).html()},onSuccess:function(b){options={success:function(b,c){twttr.API.User.findAllCached(b).each(function(b){a.isDuplicate(b)&&a.rerenderItem(b.id,b)}),a.scribbler.scribe({component:"stream_header",action:"save_list"},{event_value:b.length,item_count:b.length})},error:function(){twttr.showError(_("There was an error adding your contacts to the list."))}},twttr.API.AddressBook.addContactsToList(b.id,options)}})).open()},inviteOthers:function(a){a||this.scribbler.scribe({component:"invite_contacts_link",action:"click"}),this.showInviteesPopup=!1;var b=this,c={success:function(c,d){b.scribbler.scribe({component:"invite_contacts_dialog",action:"open"}),b.inviteDialog=(new twttr.widget.InviteContactsDialog(d.response,{css:{},onSuccess:function(){this.close()},scribbler:b.scribbler,routeToHome:a})).open()}};twttr.API.AddressBook.contactsOthers(c)},_inviteOthersInline:function(){this.showInviteesPopup=!1,this._suppressStreamEnd=!0;var a=this,b={success:function(b,c){a.doneLoadingMore();var d=new twttr.components.InviteContacts(c.response,{scribbler:a.scribbler});a.scribbler.scribe({component:"invite_contacts",action:"impression"}),a.$node.find("div.stream-items").append(d.$node),a._renderInviteHeader(b.length),a.reachedTheEnd()},error:function(b){a.doneLoadingMore(),a._loadingError=!0,a._showError(twttr.streams.ERROR)}};twttr.API.AddressBook.contactsOthers(b),window.setTimeout(function(){a._loadingComponent=new twttr.views.ContactImportLoading,a.showLoadingSpinner()},0)},_scheduleRetry:function(){var a=this;this._timeout=window.setTimeout(function(){a._timeout=null,a._loadingComponent=new twttr.views.ContactImportLoading,a.getMoreOldItems()},5e3),this.showLoadingSpinner()},_renderItemHtml:function(a){var b=twttr.streams.UserStream.prototype._renderItemHtml.call(this,a);return!this._showFollowing&&(a.following||a.followRequestSent)&&!this.selectedItem(a.id).length&&(b=b.replace(/^<div /,"<div style='display:none' ")),b},_getStreamLoadingComponent:function(){return this._loadingComponent||twttr.streams.UserStream.prototype._getStreamLoadingComponent.call(this)},_getStreamErrorComponent:function(a){var b=this._loadingError?_("There was an error loading your contacts."):_("Loading seems to be taking a while."),c=new twttr.components.ContactImportErrorEnd(b),d=this;return c.bind("tryImportAgain",function(a){d.routePageTo(d.params.pathRoot,"Import")}),c},_getHeaderComponent:function(){return this._matchesHeaderComponent}}).statics({_deciderKey:"contact_import_stream",_retryCount:13});twttr.isT1?c.methods({_setHeader:function(a,b){if(this.header)a(this.header.$node);else{var c=new twttr.views.ContactImportMatchesHeader(b);a(c.html())}},_updateHeaderFromStream:function(a){this._matchesHeaderComponent&&(this.header=this._matchesHeaderComponent,a.html(this._matchesHeaderComponent.$node))},_renderInviteHeader:function(a){this.$headerNode.find(".js-contact-import-header-placeholder").html((new twttr.views.InviteContactsHeader({count:a})).html())},getHeaderContainer:function(){return this.streamManager?this.streamManager.$headerContainer():null},_setTitle:function(a){a(_("Find friends"))},_setViewToggler:function(a){a(new twttr.views.BackLink({route:twttr.router.whoToFollowImportPath(),name:_("Try another service")}))}}):c.methods({getHeaderContainer:function(){return this.$node},_setTitle:function(a){a("")},_renderInviteHeader:function(a){(new twttr.views.InviteContactsHeader({count:a})).render(this.$find(".invite-contacts-component"),"prepend"),twttr.helpers.handlePopupLinks(this.$node)}}),a(twttr.streams.ContactImportMatches)})}),provide("streams/DashboardContactImportMatches",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardContactImportMatches",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",a.noBigImages=!0,twttr.streams.ContactImportMatches.apply(this,arguments)}).subclassOf(twttr.streams.ContactImportMatches).methods({_setHeader:function(a,b){this.header?a(this.header.$node):a("")},_updateHeaderFromStream:function(a){twttr.streams.ContactImportMatches.prototype._updateHeaderFromStream.apply(this,arguments),$(window).trigger("resize")},itemViewClass:"DashboardStreamUser",customHeaderView:"DashboardContactImportMatchesStats"}),a()})}),provide("streams/ContactImportServices",function(a){using("externalOauthPopup",twttr.isT1?"mixins/ContactImportServicesT1":"").as(function(b,c,d){twttr.klass("twttr.streams.ContactImportServices",function(a,c){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments);var d=this;this.$node.addClass("contact-import-services"),this.$node.delegate(".js-wipe-addressbook","click",function(a){(new twttr.widget.Prompt({modal:!0,draggable:!0,template:{container_id:"wipe-addressbook",title:_("Are you sure you want to remove your contacts? Who To Follow suggestions may become less relevant.")},callback:function(a){a&&$.ajax({type:"POST",dataType:"json",url:"/users/wipe_addressbook.json",headers:{"X-PHX":!0},data:{authenticity_token:twttr.API.getConfig().postAuthenticityToken},success:function(){twttr.showMessage(_("Your contacts have been removed."))},error:function(){twttr.showMessage(_("Oops, we couldn't remove your contacts at this time."))}})}})).open()}),this.$node.delegate("div.service-button, .js-service-row","click",function(c){var e=$(this),f=e.find(".js-service-name").attr("data-service-id"),g={query:f};e.hasClass("selected")&&(g.event_info="selected"),d.scribbler.scribe({component:"stream",action:"launch_service"},g),e.attr("data-popup")==="true"?b.externalOauthPopup({url:e.attr("data-url"),width:e.attr("data-width"),height:e.attr("data-height"),callbackUrl:d.pagePathFor(a.pathRoot,"ImportMatches")}):window.open(e.attr("data-url"),"_blank").focus(),d._matchesStreamKey?d._streamManager.clearKeyFromCache(d._matchesStreamKey):d._streamManager.clearFromCache(twttr.streams.ContactImportMatches,{pathRoot:a.pathRoot}),c.preventDefault()})}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.discoveryHelper).methods({setStreamManager:function(a){this._streamManager=a},setMatchesStreamKey:function(a){this._matchesStreamKey=a},update:function(a){this.params.lang&&(a.lang=this.params.lang),this.params.country&&(a.country=this.params.country),this.params.context&&(a.context=this.params.context),twttr.API.AddressBook.contactsServices(a)},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_fetchItems:function(a){var b=this;if(this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}var c={success:function(c,d){b.push(c),b.reachedTheEnd();var e,f=twttr.map(c,function(a,b){return a.matched_email&&(e=a.matched_email),a.id}),g={item_names:f,item_count:f.length};e&&(g.message=e),b.scribbler.scribe({component:"stream",action:"results"},g),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)}};this.update(c)},_renderItemsHtml:function(a){var b=null;for(var c=0;c<a.length;++c){a[c].matched_email&&(b=a[c]);var d=a[c].name_template;d&&twttr.views[d]&&(a[c].html_name=(new twttr.views[d]).html())}return this.params.onlyMatched&&b&&(a=[b]),(new twttr.views.ContactImportServicesVertical({services:a,matched_service:b,matched_service_name:(b||{}).name,in_welcome_flow:this.params.inWelcomeFlow})).html()},_setTitle:function(a){a(_("Search the services you use to discover which of your friends are already using Twitter. Follow any of the friends you find to add their Tweets to your timeline."))},_getStreamEndComponent:function(){return null}}).statics({_deciderKey:"contact_import_stream"}),d&&twttr.streams.ContactImportServices.mixin(twttr.mixins.ContactImportServicesT1),a(twttr.streams.ContactImportServices)})}),provide("mixins/ContactImportServicesT1",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.ContactImportServicesT1",function(){this.methods({_setHeader:function(a,b){b.header_help=_("Search your contacts for friends already on Twitter, or invite them via email.");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowImportSearchPath,b);a(c.$node)},_setTitle:function(a){a(_("Find friends"))},_getStreamEndComponent:function(){return new twttr.components.StreamEndInviteFriends(this._getStreamEndHtml(),this._getStreamEndShowBird())}})}),a(twttr.streams.ContactImportServicesT1)})}),provide("streams/DashboardContactImportServices",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardContactImportServices",function(a,b){a=a||{},twttr.streams.ContactImportServices.call(this,a,b)}).subclassOf(twttr.streams.ContactImportServices).methods({_setHeader:function(a,b){a("")}}),a()})}),provide("StoredUserStack",function(a){using().as(function(b){twttr.klass("twttr.StoredUserStack",function(a,b){this.storageKey=a,b||(b=twttr.caches.User);var c=b.get(this.storageKey);this.cache=c?c.index:{},this.stack=c?c.stack:[],this.timestamps=c&&c.timestamps?c.timestamps:{}}).methods(twttr.EventProvider).statics({MAX_SIZE:10}).methods({push:function(a){if(!twttr.helpers.isCurrentUser(a)){var b=a.id||a.toString();twttr.is.def(this.cache[b])&&(this.stack=twttr.filter(this.stack,function(a){return a!=b})),this.cache[b]=this.stack.push(b),this.timestamps[b]=(new Date).getTime();if(this.size()>twttr.StoredUserStack.MAX_SIZE){var c=this.stack.shift();delete this.timestamps[c],delete this.cache[c]}this.trigger("push",b)}return this.save()},save:function(){return twttr.caches.User.set(this.storageKey,{index:this.cache,stack:this.stack,timestamps:this.timestamps}),this.size()},clear:function(){this.cache={},this.stack=[],this.timestamps={},this.save()},size:function(){return this.stack.length},getLatestUserId:function(){var a=this.size();return a?this.stack[a-1]:null},getLastPushTime:function(a){return this.timestamps[a]},findAll:function(a){twttr.API.User.findAll(this.stack.reverse(),a)}}),twttr.app.waitForSignal("init",function(){twttr.recentlyViewedUsers=new twttr.StoredUserStack("recentlyViewedUsers"),twttr.loggedOutViewedUsers=new twttr.StoredUserStack("recentlyViewedUsers",new twttr.cache.local.User($.cookie("guest_id")))}),a(twttr.StoredUserStack)})}),provide("PasswordStrength",function(a){using().as(function(b){twttr.PasswordStrength=function(){function a(a){return typeof a=="function"}function b(a,b){var c="";for(var d=0;d<b.length;d++){var e=!0;for(var f=0;f<a&&f+d+a<b.length;f++)e=e&&b.charAt(f+d)==b.charAt(f+d+a);f<a&&(e=!1),e?(d+=a-1,e=!1):c+=b.charAt(d)}return c}return{check:function(c,d){var e=0,d=d||{};if(c.length<(d.minlength||6))return{score:0,msgClass:"tooshort"};var f=c.toLowerCase();if(d.username&&f==(a(d.username)?d.username():d.username).toLowerCase())return{score:0,msgClass:"obvious"};if($.inArray(f,twttr.BANNED_PASSWORDS||[])!=-1)return{score:0,msgClass:"banned"};if(c.match(/^\s*$/))return{score:0,msgClass:"whitespace"};if(d.requireStrong){var g="# ` ~ ! @ $ % ^ & * ( ) - _ = + [ ] { }  | ; : ' \" , . < > / ?".split(" ");g=$.map(g,function(a){return"\\"+a}).join("");var i=["\\d","[a-z]","[A-Z]","["+g+"]"],j=$.map(i,function(a){return"(?=.*"+a+")"}).join("");if(!c.match(new RegExp("("+j+"){10,}")))return{score:0,msgClass:"tooweak"}}e+=c.length*4,e+=(b(1,c).length-c.length)*1,e+=(b(2,c).length-c.length)*1,e+=(b(3,c).length-c.length)*1,e+=(b(4,c).length-c.length)*1,c.match(/(.*[0-9].*[0-9].*[0-9])/)&&(e+=5),c.match(/(.*[!@#$%^&*?_~].*[!@#$%^&*?_~])/)&&(e+=5),c.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(e+=10),c.match(/([a-zA-Z])/)&&c.match(/([0-9])/)&&(e+=15),c.match(/([!@#$%^&*?_~])/)&&c.match(/([0-9])/)&&(e+=15),c.match(/([!@#$%^&*?_~])/)&&c.match(/([a-zA-Z])/)&&(e+=15);if(c.match(/^\w+$/)||c.match(/^\d+$/))e-=10;return e<0&&(e=0),e>100&&(e=100),e<34?{score:e,msgClass:"weak"}:e<50?{score:e,msgClass:"good"}:e<75?{score:e,msgClass:"strong"}:{score:e,msgClass:"verystrong"}}}}(),a(twttr.PasswordStrength)})}),provide("mixins/urlShortener",function(a){using("_","util","constants").as(function(b,_){twttr.klass.mixin("twttr.mixins.urlShortener",function(a){a.mixin(twttr.mixins.caretHelper).statics({matchers:{tco:/^https?:\/\/t.co\/\w+$/}}).methods({_registerUrlShortenerEvents:function(){this._explainLinkShortening&&this.editor.bind("didChangeContent",twttr.bind(this,this._showCounterTipsy)),this.$counterText=$('<span class="tweetbox-counter-tipsy"></span>'),this.$counter.before(this.$counterText),this.$counterText.css("opacity",0),this.$links=[],this._a=!1,this._isTipShowing=!1,this._oldLinkLen=0;var a=this._getTextLength;this._getTextLength=function(c){var d=a.apply(this,arguments),e=twttr.txt.extractUrls(c);return d-=e.join("").length,twttr.each(e,function(a){d+=b.constants.tcoLength,a.match(/https:/)&&(d+=1)}),d}},_getLinkCounterText:function(a){var b=_("Links will appear shortened"),c=_("Link will appear shortened");return a>1?b:c},_showCounterTipsy:function(){var a=this,b,c,d=15;a._linkLen=a._extractUrls().length,a._linkLen&&a._linkLen!==a._oldLinkLen?(a.$counterText.html(a._getLinkCounterText(a._linkLen)),c=a.$container.find("div.tweet-button-container"),b=c.width(),c.children().each(function(){b-=$(this).outerWidth(!0)}),twttr.helpers.ellipsify(a.$container.find(".geo-text").width(function(a,c){return b<0||!c?c+b-d:c}),!0),a.$counterText.animate({opacity:1},100),a._isTipShowing=!0):a._isTipShowing&&!a._linkLen&&(a.$counterText.animate({opacity:0},100,function(){a.$counterText.html(""),twttr.helpers.ellipsify(a.$container.find(".geo-text").width(""),!0)}),a._isTipShowing=!1),a._oldLinkLen=a._linkLen},_showCounterFade:function(){if(twttr.txt.extractUrls(this.getCurrentWord(this.getCaret())).length){this.$counter.css({color:"green"});if(!this._a){var a=this.$counter.clone(),b=this.$counter.position();a.css({left:b.left,top:b.top}),a.addClass("tweet-counter-proxy"),this.$counter.after(a);function c(){a.remove()}a.animate({fontSize:"40px",opacity:0,marginTop:-20,marginLeft:-Math.round(a.width()/2)},200,c),this._a=!0}}else this.$counter.css({color:""}),this._a&&(this._a=!1)},_tweetReady:function(){this.lock(),this.callTalon(this._extractUrls(),twttr.bind(this,function(a){this.setTweetContent(this.replaceWithTalonUrls(a)),this.unlock(),this.tweet()}))},_extractUrls:function(){return this.filterInvalidLinks(twttr.txt.extractUrls(this.editor.content()))},replaceWithTalonUrls:function(a){var b=this.editor.content();return twttr.each(a,function(a){b=this.replaceContent(b,a)},this),b},callTalon:function(a,b){a.length?twttr.API.Urls.shortenMultiple(a,b):b([])},replaceContent:function(a,b){return a.replace(b.expanded_url,b.url)},filterInvalidLinks:function(b){return twttr.filter(b,function(b){return!b.match(a.matchers.tco)})},_mousemove:function(a){var b=a.pageX,c=a.pageY;twttr.each(this.$links,function(a){var d=$(a),e=d.offset(),f=d.attr("data-mouse-entered");if(b>=e.left&&b<=e.left+d.width()&&c>=e.top&&c<=e.top+d.height()){if(!f||f==="false")d.attr("data-mouse-entered","true"),d.trigger("mouseenter");return!1}f==="true"&&(d.attr("data-mouse-entered","false"),d.trigger("mouseleave"))})},_matchUrls:function(){setTimeout(twttr.bind(this,function(){this.$links=this.$find("a.twitter-timeline-link"),this.$links.tipsy({html:!0,gravity:"n",offset:3,"class":"tweetbox-tipsy",title:function(){return'<span class="tweetbox-tipsy-text">'+_("Link will be displayed as {{url}}",{url:twttr.helpers.displayUrl(this.href)})+"</span>"}})}),0)}})}),a(twttr.mixins.urlShortener)})}),provide("mixins/caretHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.caretHelper",function(){return this.statics({spaceBoundary:/\s|$/,wordEnd:/\S+$/}).methods({init:function(){this.$input.bind("blur",twttr.bind(this,function(a){setTimeout(twttr.bind(this,function(){this.hide()}),1e3)})).bind("mouseup",twttr.bind(this,function(a){setTimeout(twttr.bind(this,function(){this.getCaret()}),0)})).bind("focus",twttr.bind(this,function(a){this.getCaret()}))},getCurrentText:function(){return this.$input.val()},setCaretPosition:function(a){var b=this.$input[0];if(b.setSelectionRange)b.focus(),b.setSelectionRange(a,a);else if(b.createTextRange){var c=b.createTextRange();c.collapse(!0),c.moveEnd("character",a),c.moveStart("character",a),c.select()}this.lastCaret=a},getCaret:function(){var a=this.$input[0],b=0;if(document.selection){try{a.focus()}catch(c){}var d=document.selection.createRange();if(d==null)return this.lastCaret=0,0;var e=a.createTextRange(),f=e.duplicate();e.moveToBookmark(d.getBookmark()),f.setEndPoint("EndToStart",e),b=f.text.length}else if(a.selectionStart||a.selectionStart=="0")b=a.selectionStart;return this.lastCaret=b,b},insertOrReplaceSelection:function(a,b){var c=this.$input[0],d=this.getCaret(),e=d+a.length;if(document.selection){c.focus();var f=document.selection.createRange();f.text=a;if(b){var g=c.createTextRange();g.collapse(!0),g.moveEnd("character",e),g.moveStart("character",d),g.select()}else this.setCaretPosition(e)}else if(c.selectionStart||c.selectionStart=="0"){var i=c.selectionStart,j=c.selectionEnd,k=c.scrollTop;c.value=c.value.substring(0,i)+a+c.value.substring(j,c.value.length),c.focus(),c.selectionStart=b?d:e,c.selectionEnd=e,c.scrollTop=k}else c.value+=a,this.setCaretPosition(e),c.focus();this.lastCaret=e,this.$input.change()},getCurrentWord:function(a){var b=this.getCurrentText(),c=b.slice(0,a),d=b.slice(a,b.length),e=b.charAt(a-1);if(!e||e===" ")return"";this.leftBoundary=c.search(this.constructor.wordEnd);var f=c.slice(this.leftBoundary,c.length),g=d.slice(0,d.search(this.constructor.spaceBoundary)),i=f.concat(g);return this.rightBoundary=this.leftBoundary+i.length,i},replaceCurrentWord:function(a){var b=this.getCurrentText().split("");this.oldValueArray=b;var c=b.slice(0,this.leftBoundary),d=b.slice(this.rightBoundary,b.length);if(d.length<1||!d[0].match(/\s/))a+=" ";var e=(c.join("")+a).length+1;return{value:c.join("")+a+d.join(""),cursor:e}}}),this}),a(twttr.mixins.caretHelper)})}),provide("geo",function(a){using("_","util").as(function(b,_){twttr.provide("twttr.geo",{LOG_VERSION:3,UI_VERSION:2,LOCATION_CACHE_INTERVAL:3e4,BROWSER_GEO_BANNER_APPEAR_DELAY:500,BROWSER_GEO_BANNER_DISAPPEAR_INTERVAL:100,PLACE_SEARCH_AUTOCOMPLETE_DELAY:250,MAX_NEARBY_PLACES:12,MAX_NEARBY_NEIGHBORHOODS:5,MAX_PLACE_SEARCH_RESULTS:50,MAX_PLACE_AUTOCOMPLETE_RESULTS:8,PLACE_SEARCH_RESULTS_PER_PAGE:5,PLACE_CREATION_DEFAULT_ZOOM_LEVEL:15,SIMILAR_PLACES_MAX_ZOOM_LEVEL:17,ACCEPTABLE_LOCATION_ACCURACY:1e3,ACCEPTABLE_LOCATION_TIMEOUT:5e3,LOCATION_TIMEOUT:15e3,LOCATION_MAXIMUM_AGE:6e4,MAX_SIMILAR_PLACES:5,TARGET_POI_NAME_LENGTH:40,TARGET_PLACE_NAME_LENGTH:50,POI_MARKER_SIZE:{width:43,height:32},POI_MARKER_HOTSPOT:{x:14,y:33},POI_MAP_DEAD_ZONE:{left:4,top:24,right:6,bottom:0},geoEnabled:null,currentLocation:{},mapsTimeout:1e4,mapsListeners:[],Exceptions:{GeoSupportException:function(){this.msg=_("This browser does not support GeoLocation")}},mapsInitialized:function(){while(twttr.geo.mapsListeners.length){var a=twttr.geo.mapsListeners.shift();a()}},loadMaps:function(a){if(twttr.geo.mapsAvailable())a();else{twttr.geo.mapsListeners.push(a);if(twttr.geo.mapsListeners.length==1){var b=window.location.protocol==="https:"?"https://maps-api-ssl.google.com":"http://maps.google.com";b+="/maps/api/js?v=3.4&sensor=false&callback=twttr.geo.mapsInitialized",window.location.hostname.match(/^(.+\.)?twitter\.com$/)&&(b+="&client=free-twitter");var c=document.createElement("script");c.type="text/javascript",c.src=b,document.body.appendChild(c),setTimeout(twttr.geo.mapsInitialized,twttr.geo.mapsTimeout)}}},mapsAvailable:function(){return typeof google!="undefined"&&google.maps!==undefined},getBestContainer:function(a){if(!a)return{name:"",full_name:"",contained_within:[],place_type:"city",bounding_box:{type:"Polygon",coordinates:[[[-122.51368188,37.70813196],[-122.35845384,37.70813196],[-122.35845384,37.83245301],[-122.51368188,37.83245301]]]}};var b={name:a.part_of_name||"",full_name:a.part_of_name||"",contained_within:[],place_type:"city"};return a.contained_within&&twttr.every(a.contained_within,function(a){return b=a,a.place_type!="city"}),b},getPlaceFullAddressAndMapLink:function(a){var b=[twttr.geo.getPlaceAttribute(a,"street_address"),a.contained_within&&a.contained_within.length>0?a.contained_within[0].full_name:null];b=twttr.filter(b,function(a){return a}).join(", ");var c=a.place_type=="poi"?b:a.name+", "+b;return{full_address:b,map_link:"http://maps.google.com/maps?"+$.param({q:c})}},placesFromApi:function(a){var b=[];return a.each(function(a){b.push(a.data())}),b},getPlaceAttribute:function(a,b){return a.attributes&&a.attributes[b]||""},getPlaceDetails:function(a){var b=twttr.geo.getPlaceAttribute(a,"street_address");if(b)return b;switch(a.place_type){case"city":return _("a city");case"neighborhood":return _("a neighborhood");case"country":return _("a country");case"admin":return _("a state or province");default:return twttr.geo.getBestContainer(a).name}},getFullPlace:function(a){return $.extend({},a,{address:twttr.geo.getPlaceAttribute(a,"street_address"),container:twttr.geo.getBestContainer(a).full_name,phone:twttr.geo.getPlaceAttribute(a,"phone"),place_id:a.id,place_name:a.full_name},twttr.geo.getPlaceFullAddressAndMapLink(a))}}),a(twttr.geo)})}),provide("components/Autocomplete",function(a){using("_","util","constants").as(function(b,_){twttr.provide("twttr.users",{autocompleted:[]}),twttr.klass("twttr.components.Autocomplete",function(a){var c={limit:5,textarea:!1,preselect:!0};this.options=twttr.merge({},c,a),this.$input=$(this.options.input),this.$container=$('<ul class="autocomplete-container"></ul>').insertAfter(this.options.input),this._isCompletionsOpen=!1,twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_autocomplete")||b.util.params().autocomplete)&&this.registerEvents(),this.init()}).mixin(twttr.mixins.caretHelper).statics({cache:{},regCache:new twttr.cache.Simple,hashtagCache:{},_isCompletionsOpen:!1,nextCursor:-1,cursorCount:0,requestedUsers:!1,getAutocompletedUsers:function(a){!!twttr.currentUser;var c=this;if(twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_autocomplete")||b.util.params().autocomplete)){function d(a){return twttr.map(a,function(a,b){return[a.id,a.screenName,a.name,a.profileImageUrl]})}if(!this.requestedUsers){this.requestedUsers=!0;var e=twttr.caches.User.get("autocomplete_friends");e?(twttr.users.autocompleted=e,a&&a()):function(){function b(e){++c.cursorCount<=5&&twttr.currentUser?twttr.currentUser.friends({count:100,cursor:e,success:twttr.bind(c,function(c,e){twttr.components.Autocomplete.invalidateCache();if(c.isEmpty()){a&&a();return}c=d(c.toArray()),twttr.users.autocompleted.push.apply(twttr.users.autocompleted,c),twttr.components.Autocomplete.resetStorageCache(),e.response.next_cursor?b(e.response.next_cursor):a&&a()})}):a&&a()}twttr.currentUser&&twttr.components.Autocomplete.addToList([twttr.currentUser.id,twttr.currentUser.screenName,twttr.currentUser.name,twttr.currentUser.profileImageUrl]),b(twttr.components.Autocomplete.nextCursor)}()}else a&&a()}}}).methods(twttr.EventProvider).statics({username:/^[@＠]([a-zA-Z0-9_]{1,20})$/,hashtag:/^[#＃]([a-zA-Z0-9_]+)/,transformAvatar:/(.+)(?:_normal)\.(\w+)$/,_matchesContiguously:function(a,b){var c=twttr.components.Autocomplete,d=c._matchesContiguouslyCaches.matchers=c._matchesContiguouslyCaches.matchers||{},e=c._matchesContiguouslyCaches.results=c._matchesContiguouslyCaches.results||{};return e[a]&&e[a][b]!==undefined?e[a][b]:(d[a]=d[a]||new RegExp("^"+a,"i"),e[a]=e[a]||{},e[a][b]=d[a].test(b.replace(/\W/,"")),e[a][b])},_matchesConsecutively:function(a,b){var c=twttr.components.Autocomplete,d=c._matchesConsecutivelyCaches.matchers=c._matchesConsecutivelyCaches.matchers||{},e=c._matchesConsecutivelyCaches.results=c._matchesConsecutivelyCaches.results||{};return e[a]&&e[a][b]!==undefined?e[a][b]:(d[a]=d[a]||new RegExp(a.split("").join(".*"),"i"),e[a]=e[a]||{},e[a][b]=d[a].test(b),e[a][b])},levenSorter:function(a,c){var d=twttr.components.Autocomplete._currentPrefix,e=b.util.leven(a,d),f=b.util.leven(c,d);return e<f?-1:e>f?1:0},sorter:function(a,c){var d=twttr.components.Autocomplete._matchesContiguously,e=twttr.components.Autocomplete._matchesConsecutively,f=twttr.components.Autocomplete._currentPrefix;if(d(f,a[1])&&!d(f,c[1]))return-1;if(!d(f,a[1])&&d(f,c[1]))return 1;if(d(f,a[2])&&!d(f,c[2]))return-1;if(!d(f,a[2])&&d(f,c[2]))return 1;if(e(f,a[1])&&!e(f,c[1]))return-1;if(!e(f,a[1])&&e(f,c[1]))return 1;if(e(f,a[2])&&!e(f,c[2]))return-1;if(!e(f,a[2])&&e(f,c[2]))return 1;var g=b.util.leven(a[1],f),i=b.util.leven(c[1],f);if(g<i)return-1;if(g>i)return 1;var j=b.util.leven(a[2],f),k=b.util.leven(c[2],f);return j<k?-1:j>k?1:0},_htmlEscapeAndStrongifyMatches:function(a,b){return h(a.replace(b,"<strong>$1</strong>")).replace(/&lt;(\/?strong)&gt;/g,"<$1>")}}).statics({_matchesContiguouslyCaches:{results:{},matchers:{}},_matchesConsecutivelyCaches:{results:{},matchers:{}}}).statics({invalidateCache:function(a){if(!a){this.cache={},twttr.components.Autocomplete._matchesConsecutivelyCaches.results={},twttr.components.Autocomplete._matchesConsecutivelyCaches.matchers={},twttr.components.Autocomplete._matchesContiguouslyCaches.results={},twttr.components.Autocomplete._matchesContiguouslyCaches.matchers={};return}var b="";a=a.split("");for(var c=a.length-1;c>=0;c--)b+=a.shift(),delete this.cache[b],delete twttr.components.Autocomplete._matchesConsecutivelyCaches.results[b],delete twttr.components.Autocomplete._matchesConsecutivelyCaches.matchers[b],delete twttr.components.Autocomplete._matchesContiguouslyCaches.results[b],delete twttr.components.Autocomplete._matchesContiguouslyCaches.matchers[b]},resetStorageCache:function(){var a=[],b=0;twttr.users.autocompleted.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0});for(var c=0,d=twttr.users.autocompleted.length;c<d;c++){if(twttr.users.autocompleted[c+1]&&twttr.users.autocompleted[c][0]==twttr.users.autocompleted[c+1][0])continue;a[b++]=twttr.users.autocompleted[c]}twttr.users.autocompleted=a,twttr.caches.User.set("autocomplete_friends",twttr.users.autocompleted,2592e5)},addToList:function(a){var b=!1;for(var c=0,d=twttr.users.autocompleted.length;c<d;++c)if(twttr.users.autocompleted[c][1]===a[1]){b=!0;break}b||twttr.users.autocompleted.push(a),twttr.components.Autocomplete.invalidateCache(a[1]),this.resetStorageCache()}}).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.bind("close",twttr.bind(this,function(){this.hide()}));var b="keypress"+($.browser.webkit||$.browser.msie?" keydown":"");this.$input.bind("keyup click",twttr.bind(this,this.keyup)),this.$input.bind("change",twttr.bind(this,this.change)),this.$input.bind(b,twttr.bind(this,this.keypress)),this.$container.delegate("li.selectable","mouseenter",function(b){a.$container.find("li.selected").removeClass("selected"),$(this).addClass("selected")}).delegate("li.selectable","click",twttr.bind(this,function(a){a.preventDefault();if($(a.target).hasClass("twttr-follow-notice"))return;$(a.target).addClass("selected").siblings(".selected").removeClass("selected"),this.select(),this.focus()})),this.$input.bind("keydown",function(b){if(b.ctrlKey)return;if(!a._isCompletionsOpen&&b.which==twttr.constants.keyCodes.escape)return;b.stopPropagation()}),this.position()},focus:function(){this.$input.focus()},set:function(a){if(this.options.textarea){var b=this.replaceCurrentWord(a);this.$input.val(b.value),this.setCaretPosition(b.cursor)}else this.$input.val(a);this.$input.change()},hide:function(){setTimeout(twttr.bind(this,function(){this.$container.css("visibility","hidden"),this._isCompletionsOpen&&this.trigger("hide"),this._isCompletionsOpen=!1,this.constructor._isCompletionsOpen=!1}),0)},show:function(){this.$container.css("visibility","visible"),this.constructor._isCompletionsOpen=!0,this._isCompletionsOpen=!0},keypress:function(a){if(a.ctrlKey)return;switch(a.keyCode){case b.constants.keyCodes.tab:case b.constants.keyCodes.enter:case b.constants.keyCodes.escape:if(!this._isCompletionsOpen)return;a.preventDefault();break;case b.constants.keyCodes.upArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.previous(),a.preventDefault());break;case b.constants.keyCodes.downArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.next(),a.preventDefault())}a.stopPropagation(),setTimeout(twttr.bind(this,this.change),0)},keyup:function(a){if(a.ctrlKey)return;a.stopPropagation();if(a&&(a.keyCode===b.constants.keyCodes.tab||a.keyCode===b.constants.keyCodes.shift)&&!this._isCompletionsOpen)return;var c="",d=!1;if(this.options.textarea){var e=this.getCaret();c=this.getCurrentWord(e).replace(twttr.constants.regexps.dirMark,""),c.match(this.constructor.username)?(c=RegExp.$1,this.autocompleteType="username",d=!0):c.match(this.constructor.hashtag)&&(c=RegExp.$1,this.autocompleteType="hashtag",d=!0)}else this.autocompleteType="username",c=this.$input.val(),d=!0;if(c.length&&d)switch(a.keyCode){case b.constants.keyCodes.escape:this.hide(),a.stopPropagation();break;case b.constants.keyCodes.upArrow:case b.constants.keyCodes.downArrow:break;case b.constants.keyCodes.tab:case b.constants.keyCodes.enter:!a.shiftKey&&this._isCompletionsOpen&&this.select();break;default:this.autocompleteType=="hashtag"?this.lookUpHashtag(c):this.lookUpUser(c)}else this.hide()},select:function(){var a=this.$container.find("li.selected"),b=a.find("b").text(),c=a.find("img").attr("src");this.set(b),this.hide();if(this.autocompleteType==="username"){var d=a.attr("data-user-screenname"),e=a.attr("data-user-id");this.trigger("select",[this.autocompleteType,b,c,d,e])}else this.trigger("select",[this.autocompleteType,b,c])},change:function(){var a=this.getCurrentText(),b=this.lastText||"";if(a===b)return;var c=0,d=a.length,e=b.length,f=Math.min(d,this.getCaret());for(var g=0;g<f;g++){if(b.charAt(g)!==a.charAt(g))break;c+=1}var i=0;for(var g=1;g<=d-c;g++){if(b.charAt(e-g)!==a.charAt(d-g))break;i+=1}var j=c+i;this.lastText=a,this.trigger("substitution",[c,e-j,d-j,a])},sanitize:function(a){return this.constructor._currentPrefix=a.replace(/ /g,""),this.constructor._currentPrefix},appendNotice:function(a){return twttr.currentUser&&twttr.currentUser.friendsCount>500&&(a+='<li class="twttr-follow-notice">'+_("<em>Showing most recent 500 you're following</em>")+"</li>"),a},lookUpHashtag:function(a){var b=this;a=this.sanitize(a);var c=this.constructor.hashtagCache[a];if(c){this.$container.html(c),this.$container.find("li.selectable:first").addClass("selected"),this.show();return}var d=function(a){if(a.match(b.regexPrefix))return a},e=twttr.merge({},this.getFilteredResults(a,twttr.suggestedHashtags||[],d,this.constructor.levenSorter),!0),f=this.getItemTemplate(e,function(a,c){return'<li class="hashtag-completion selectable"><b>#'+b.constructor._htmlEscapeAndStrongifyMatches(a,c)+"</b></li>"}).slice(0,this.options.limit);if(f.length>0){var g=f.join("");this.constructor.hashtagCache[a]=g,this.$container.html(g),this.$container.find("li.selectable:first").addClass("selected"),this.show()}else this.hide()},lookUpUser:function(a){var b=this;a=this.sanitize(a);var c=this.constructor.cache[a];if(c){this.$container.html(c),this.options.preselect&&this.$container.find("li.selectable:first").addClass("selected"),this.show();return}var d=function(a){if(a[1].match(b.regexPrefix))return a;if(a[2].replace(/ /g,"").match(b.regexPrefix))return a},e=twttr.merge({},this.getFilteredResults(a,twttr.users.autocompleted,d,this.constructor.sorter),!0),f=this.getItemTemplate(e,function(a,c){var d=a[3].replace(b.constructor.transformAvatar,"$1_mini.$2");return'<li data-user-id="'+h(a[0])+'" data-user-screenname="'+h(a[1])+'" class="selectable"><img src="'+h(d)+'"/> <span><b>@'+b.constructor._htmlEscapeAndStrongifyMatches(a[1],c)+"</b> <em>"+b.constructor._htmlEscapeAndStrongifyMatches(a[2],c)+"</em></span></li>"}).slice(0,this.options.limit);this.options.defaultResults&&twttr.each(this.options.defaultResults,function(b){(!b.show||b.show(a,e))&&f.splice(f.length,0,b.format(a))});if(f.length>0){var g=f.join("");g=this.appendNotice(g),this.constructor.cache[a]=g,this.$container.html(g),this.options.preselect&&this.$container.find("li.selectable:first").addClass("selected"),this.show()}else this.hide()},position:function(){setTimeout(twttr.bind(this,function(){if(this.$input.offsetParent().length){var a=this.$input.position(),b=Math.round(a.top+this.$input.innerHeight()+1),c=Math.round(a.left);this.$container.css({top:b,left:c})}}),0),this.$container.css({width:this.$input.innerWidth()})},getItemTemplate:function(a,b){var c=new RegExp("("+this.constructor._currentPrefix.split("").join("|")+")","gi");return twttr.map(a,twttr.bind(this,function(a,d){return b(a,c)}),null,"array")},getFilteredResults:function(a,b,c,d){var e=this,f,g=this.constructor.regCache.get(a);if(g)this.regexPrefix=g;else{var i=a.split(""),j="^"+i.join("\\w*");this.regexPrefix=new RegExp(j,"i"),this.constructor.regCache.set(a,this.regexPrefix)}var k=twttr.filter(b,c);return d?k.sort(d):k},next:function(){var a=this.$container.find("li.selected");if(!a.length){this.$container.find("li.selectable:first").addClass("selected");return}a=a.removeClass("selected").nextAll("li.selectable:first"),a.length?a.addClass("selected"):this.$container.find("li.selectable:first").addClass("selected")},previous:function(){var a=this.$container.find("li.selected");if(!a.length){this.$container.find("li.selectable:last").addClass("selected");return}a=a.removeClass("selected").prevAll("li.selectable:first"),a.length?a.addClass("selected"):this.$container.find("li.selectable:last").addClass("selected")}}),a(twttr.components.Autocomplete)})}),provide("components/Typeahead",function(a){using("constants","mixins/typeaheadScribing").as(function(b,c,d){var e=twttr.klass.component("twttr.components.Typeahead",function(a){var b=this,c={pauseInterval:300,closeDelay:500,select:$.noop};this.options=twttr.merge({},c,a),this.datasources=this.options.datasources,this._select=this.options.select,this.val=this._val="",this.typingPauseDetectionTimeoutId=null,this.$input=$(this.options.input),this.$inputHint=$(this.options.inputHint),this.$node=$((new twttr.views.Typeahead).html()).insertAfter(this.$inputHint),this._isCompletionsOpen=this._wasCompletionsOpen=!1,this._keystrokes=0,this._localLatencies=[],this._remoteLatencies=[],this._lastTimerEvent="none",this._statsTimerStart=0,this._statsCumulativeTime=0,this._resultsDirty=!1,this._lastHint="",this._placeholder=this.$input.attr("placeholder"),this.resizeTimer=null,this.heightLimit={1:0,2:1,3:2,4:3,5:5,6:6};var d=twttr.abdecider.choose("typeahead_271");this.inBucket=d!=="control"&&(d==="typeahead"||twttr.decider.isAvailable("swift_typeahead")),this.registerTypeaheadEvents();if(twttr.loggedIn&&(twttr.decider.isAvailable("typeahead")||this.inBucket)){var e=this.$find(".js-typeahead-results");twttr.each(this.datasources,function(a){a.bind("show",function(a,c){c===b._val&&b.$input.hasClass("focus")&&b.show()}),a.bind("scribeLocalStorageLatency",twttr.bind(b,b.scribeLocalStorageLatency)),a.bind("localLatency",twttr.bind(b,b.addLocalLatency)),a.bind("remoteLatency",twttr.bind(b,b.addRemoteLatency)),a.bind("resultsDirty",twttr.bind(b,b.resultsDirty)),a.bind("hint",twttr.bind(b,b.hint)),a.init(),e.append(a.$node)}),this.bind("hint",twttr.bind(this,this.hint)),this.resizeHeight(),this.executeQueryIfAlreadyFocused()}}).deciderKey("typeahead").mixin(d).methods({registerTypeaheadEvents:function(){var a=this,b="keypress"+($.browser.webkit||$.browser.msie?" keydown":"");this.$input.bind("keyup click",twttr.bind(this,this.keyup)),this.$input.bind(b,twttr.bind(this,this.keypress)),this.$node.delegate(".js-selectable","mouseenter",function(b){a.$find(".selected").removeClass("selected"),$(this).addClass("selected");var c=$(this).data("hint");c=c?c:"",a.trigger("hint",[c,a.$input.val()])}).delegate(".js-selectable","click",twttr.bind(this,function(a){this.select(a)})),this.$input.bind("keydown",function(b){b.keyCode===27&&(a.$input.removeClass("focus"),a.$inputHint.removeClass("focus"),a.hide(),a.$input.trigger("blur")),clearTimeout(a.typingPauseDetectionTimeoutId)}),this.$input.bind("focus",twttr.bind(this,this.focus)),this.$input.bind("blur",twttr.bind(this,this.blur)),this.$node.bind({mouseenter:function(){a.mouseOverDropDown=!0},mouseleave:function(){a.mouseOverDropDown=!1}}),twttr.widget.Dialog.bind("close",twttr.bind(this,function(){this.hide()})),$(window).resize(function(){clearTimeout(a.resizeTimer),a.resizeTimer=setTimeout(twttr.bind(a,a.resizeHeight),100)}),$(document).click(function(b){a.$node.parent().find($(b.target))||a.hide()}),$(document).bind("searchPlaceholderUpdate",function(b,c){a._placeholder=c})},hint:function(a,b,c){if(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket){var d=this.$input.val();d.toLowerCase()===c.toLowerCase()&&this.inputIsFocused()&&this.$input[0].scrollWidth<=this.$input.width()?this.$inputHint.val(d+b.slice(d.length)):this.$inputHint.val(""),c===""&&b!==""&&this.$input.attr("placeholder",""),this.$inputHint.css("direction",this.$input.css("direction"))}},resultsDirty:function(){this._resultsDirty=!0;if(this.$input.hasClass("focus")){var a=this.$input.val();this.queryLocalData(a),this.queryRemoteData(a)}},executeQueryIfAlreadyFocused:function(){this.inputIsFocused()&&(this.$input.addClass("focus"),this.$inputHint.addClass("focus"),this.focus())},focus:function(a){var b=this.$input.val();b===this._val&&this._wasCompletionsOpen&&!this._resultsDirty?(this.show(),this._lastHint!==""&&(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket)&&(this.$inputHint.val(this._lastHint),this.$input.attr("placeholder",""))):setTimeout(twttr.bind(this,function(){this.queryLocalData(b),this.typingPauseDetectionTimeoutId=setTimeout(twttr.bind(this,function(){this.queryRemoteData(b)}),this.options.pauseInterval)}),0),this.startStatsTimer()},blur:function(a){this._lastHint=this.$inputHint.val();if(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket)this.$inputHint.val(""),this.$input.attr("placeholder",this._placeholder);!this.mouseOverDropDown&&!twttr.search.mouseOverMagnifying&&setTimeout(twttr.bind(this,function(){this.hide()}),this.options.closeDelay),this.pauseStatsTimer()},inputIsFocused:function(){return this.$input.is(":focus")||this.$input[0]==document.activeElement},resizeHeight:function(){var a=$(window).height(),b=Math.ceil(a/100),c=b in this.heightLimit?this.heightLimit[b]:b<2?1:6;twttr.each(this.datasources,function(a){a.trigger("newLimit",c)})},autocompleteHint:function(a){if(this._isCompletionsOpen&&!a.shiftKey&&this.isCursorAtEnd()){var c=this.$input.css("direction")==="rtl";if(c&&a.keyCode===b.constants.keyCodes.rightArrow||!c&&a.keyCode===b.constants.keyCodes.leftArrow)return;var d=this.$node.find(".js-selectable.selected[data-hint]:visible").first();if(d.length===0&&this.$node.find(".js-selectable.selected").length===1)return;d.length===0&&(d=this.$node.find(".js-selectable[data-hint]:visible").first()),this.$input.val(d.data("hint")),a.preventDefault()}},isCursorAtEnd:function(){var a;return document.selection?(this.$input.focus(),a=document.selection.createRange(),a.moveStart("character",-this.$input[0].value.length),this.$input.val().length-a.text.length===0):typeof this.$input[0].selectionStart=="number"?this.$input.val().length-this.$input[0].selectionStart===0:!0},hide:function(){setTimeout(twttr.bind(this,function(){this._isCompletionsOpen&&(this.$node.hide(),this._wasCompletionsOpen=this._isCompletionsOpen,this._isCompletionsOpen&&this.trigger("hide"),this._isCompletionsOpen=!1)}),0)},show:function(){this.$find(".js-selectable").length>0&&(this.$node.show(),this._isCompletionsOpen=!0)},keypress:function(a){a.stopPropagation();switch(a.keyCode){case b.constants.keyCodes.enter:if(this.inputIsFocused()&&!a.shiftKey&&a.type==="keypress"||this.inputIsFocused()&&!a.shiftKey&&a.type==="keydown"&&(a.metaKey||a.ctrlKey))a.preventDefault(),this.select(a);break;case b.constants.keyCodes.escape:this._isCompletionsOpen&&a.preventDefault();break;case b.constants.keyCodes.rightArrow:if(a.charCode===39)break;case b.constants.keyCodes.leftArrow:case b.constants.keyCodes.tab:this.autocompleteHint(a);break;case b.constants.keyCodes.upArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.previous(),a.preventDefault());break;case b.constants.keyCodes.downArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.next(),a.preventDefault())}},keyup:function(a){a.type!=="click"&&(a.stopPropagation(),a.keyCode!==b.constants.keyCodes.enter&&this._keystrokes++);if(a&&(a.keyCode===b.constants.keyCodes.tab||a.keyCode===b.constants.keyCodes.shift)&&!this._isCompletionsOpen)return;val=this.$input.val();var c=this;if(val!==this._val||this._resultsDirty)this.hide(),setTimeout(twttr.bind(this,function(){this.queryLocalData(val),this.typingPauseDetectionTimeoutId=setTimeout(function(){c.queryRemoteData(val)},this.options.pauseInterval)}),0),this._resultsDirty=!1},queryLocalData:function(a){twttr.loggedIn&&(twttr.decider.isAvailable("typeahead_local_queries")||this.inBucket)&&(this._val=a,twttr.each(this.datasources,function(b){b.localQueryAndRenderResults(a)}))},queryRemoteData:function(a){var b=this;twttr.loggedIn&&(twttr.decider.isAvailable("typeahead_remote_queries")||this.inBucket)&&twttr.each(b.datasources,function(b){b.remoteQueryAndRenderResults(a)})},select:function(a){var b=this.$find(".selected"),c=this.$input.val();if(c===""&&b.length===0)return;var d=a.metaKey||a.ctrlKey;this.$input.val(""),this.$inputHint.val(""),this.hide(),this.$input.blur(),trackClient({section:"top_nav",component:"searchbox",action:"search"},{query:c}),this.scribeSelect(a,c,b,d),this._select(a,c,b,d)},next:function(){var a=this.$find(".selected").removeClass("selected"),b=this.$find(".js-selectable:visible"),c=b.index(a),d=c===b.length?0:c+1;d!==b.length&&$(b[d]).addClass("selected");var e=d===b.length,f=$(b[d]),g=$(b[0]);this.hintForNextOrPreviousItem(e,f,g)},previous:function(){var a=this.$find(".selected").removeClass("selected"),b=this.$find(".js-selectable:visible"),c=b.index(a),d=c===-1?b.length-1:c-1;d!==-1&&$(b[d]).addClass("selected");var e=d===-1,f=$(b[d]),g=$(b[0]);this.hintForNextOrPreviousItem(e,f,g)},hintForNextOrPreviousItem:function(a,b,c){var d=this.$input.val(),e=b.data("hint"),f="";e?f=e:a&&(f=c.data("hint")),this.trigger("hint",[f,d])}});a(e)})}),provide("components/TypeaheadDatasource",function(a){using().as(function(b,_){var c=twttr.klass.component("twttr.components.TypeaheadDatasource").methods({init:$.noop,localQueryAndRenderResults:$.noop,remoteQueryAndRenderResults:$.noop,inBucket:function(){var a=twttr.abdecider.choose("typeahead_271");return a!=="control"&&(a==="typeahead"||twttr.decider.isAvailable("swift_typeahead"))},tokenizeName:function(a){return $.trim(a.replace(/[@#]/,"")).toLowerCase().split(/[\s-_]+/)},tokenizeScreenName:function(a){return $.trim(a).toLowerCase().split(/_/)},tokenizeText:function(a){return $.trim(a).toLowerCase().split(/[\s-_]+/)},queryTopicAndAccountRemoteApi:function(a,b,c){twttr.API.User.typeaheadGlobal(a,{count:b,success:function(b){$(document).trigger("accountResults",[a,c,b.users]),$(document).trigger("topicResults",[a,c,b.topics])}})},updateStorageCache:function(){var a=2592e5;twttr.caches.User.set("typeahead_friends",twttr.users.typeahead,a),twttr.caches.User.set("typeahead_people_from_api",twttr.users.typeahead.length-1||0)},reset:function(){twttr.caches.User.reset()},get:function(a){twttr.caches.User.get(a)},set:function(a,b,c){var d=2592e5;c=c||d,twttr.caches.User.set(a,b,c)},update:function(a,b){twttr.caches.User.update(a,b)},"delete":function(a){twttr.caches.User.set(a,null,-1)}});a(c)})}),provide("components/TypeaheadSearchQueryDatasource",function(a){using("components/TypeaheadDatasource").as(function(b,_){var c=twttr.klass("twttr.components.TypeaheadSearchQueryDatasource",function(a){var b={limit:6};this.options=twttr.merge({},b,a),this.$node=(new twttr.views.TypeaheadSavedSearches).render(),this.$results=this.$find("ul"),this.savedSearches=[],this._version=10,this._lastQuery=""}).subclassOf(b.components.TypeaheadDatasource).deciderKey("typeahead_saved_searches").methods({init:function(){var a=this;this.$node.hide(),this._version!==twttr.caches.User.get("saved_searches_version")&&(twttr.caches.User.set("saved_searches",null,-1),twttr.caches.User.set("saved_searches_version",this._version)),this.cacheSavedSearches(),twttr.API.SavedSearch.bind("create",function(b,c){b.type==="create"&&(($.inArray(c),a.savedSearches)&&a.savedSearches.push(c),twttr.caches.User.update("saved_searches",a.savedSearches),a.savedSearches.length===1&&$(".global-nav .js-search-form").addClass("has-saved-searches"),a.updateOrDirtyResults())}),twttr.API.SavedSearch.bind("delete",function(b,c){b.type==="delete"&&(a.savedSearches=a.savedSearches.filter(function(a){return a.query!=c.query}),twttr.caches.User.update("saved_searches",a.savedSearches),a.savedSearches.length===0&&$(".global-nav .js-search-form").removeClass("has-saved-searches"),a.updateOrDirtyResults())}),this.bindLimitBasedOnWindowHeight(),this.bindRemoteApiListener()},bindRemoteApiListener:function(){var a=this;(twttr.decider.isAvailable("typeahead_searches")||this.inBucket())&&$(document).bind("topicResults",function(b,c,d,e){var c=a._lastQuery,f="",g=[];if(c==="")g=a.savedSearches;else{e.length&&twttr.each(e,function(b){var c=b.topic,d=b.rounded_score;a.isSavedSearch(c)||g.push(a.mapQuerySuggestionsToApiSearchItem(c,d))});if(twttr.decider.isAvailable("typeahead_new_style_saved_searches")||a.inBucket())g=g.concat(twttr.filter(a.savedSearches,twttr.bind(a,a.matcher(c))));g=g.slice(0,Math.min(4,a.options.limit))}f=g.length>0?g[0].name:"",a.trigger("hint",[f,c]),a.render(g,c);var i=new Date-d;a.trigger("remoteLatency",i)})},bindLimitBasedOnWindowHeight:function(){this.bind("newLimit",twttr.bind(this,function(a,b){this.options.limit=b}))},updateOrDirtyResults:function(){this.$node.is(":visible")?this.localQueryAndRenderResults(this._lastQuery):this.trigger("resultsDirty")},cacheSavedSearches:function(){var a=this;savedSearches=twttr.caches.User.get("saved_searches"),savedSearches?a.savedSearches=savedSearches:twttr.currentUser.savedSearches(function(b){a.savedSearches=b.array,$(".global-nav .js-search-form").addClass("has-saved-searches");var c=36e5;twttr.caches.User.set("saved_searches",a.savedSearches,c),a.trigger("resultsDirty")})},mapQuerySuggestionsToApiSearchItem:function(a,b){return{debug_info:twttr.decider.isAvailable("typeahead_debug_info")?' title="score = '+b+'"':"",search_results_path:twttr.router.searchResultsPath({query:a}),query:a,name:a,search_query_source:"typeahead_click"}},localQueryAndRenderResults:function(a){if(twttr.decider.isAvailable("typeahead_saved_searches")||this.inBucket()){var b=new Date;this._lastQuery=a;var c=twttr.filter(this.savedSearches,twttr.bind(this,this.matcher(a)));this.render(c,a);var d=c[0]?c[0].name:"";this.trigger("hint",[d,a]);var e=new Date-b;this.trigger("localLatency",e)}},remoteQueryAndRenderResults:$.noop,matcher:function(a){return function(b){if(b.name.toLowerCase().indexOf(a.toLowerCase())===0)return b}},ranker:function(a){return function(b,c){return a.length/c.length+c.matched_count-(a.length/b.length+b.matched_count)}},renderSearch:function(a){return(new twttr.views.TypeaheadSearchItem(a)).html()},render:function(a,b){this.$results.attr("data-search-query",b.toLowerCase());var c=twttr.map(a,this.renderSearch);if(c.length>0){var d=c.join("");this.$results.html(d),this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b)}else this.$results.empty(),this.$node.hide(),this.$node.removeClass("has-results")},isSavedSearch:function(a){for(var b=0,c=this.savedSearches.length;b<c;b++)if(this.savedSearches[b].name.toLowerCase()===a)return!0}});a(c)})}),provide("components/TypeaheadAccountsDatasource",function(a){using("components/TypeaheadDatasource").as(function(b,_){twttr.provide("twttr.users",{typeahead:{adjacencyList:{},userHash:{},length:0}});var c=twttr.klass.component("twttr.components.TypeaheadAccountsDatasource",function(a){var b={limit:6};this.options=twttr.merge({},b,a),this.$node=(new twttr.views.TypeaheadAccounts).render(),this.$results=this.$find("ul"),this.weights={PROFILE_VISIT_BOOST:10,UNCACHED_PROFILE_VISIT:75,FOLLOW:100,UNBLOCK:50,SELF:250},this.IE8_ACCOUNT_LIMIT=1e3,this.ACCOUNT_LIMIT=2500,this.addUsersQueue=[],this.blocks={},this.userIdsCurrentlyRendered={},this._version=66,this.isFullySupportedBrowser=!($.browser.msie&&parseInt($.browser.version,10)<8)}).subclassOf(b.components.TypeaheadDatasource).deciderKey("typeahead_people").methods({init:function(){this.$node.hide(),this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_local_queries")||this.inBucket())&&(this.clearCacheIfNewVersion(),this.bindRemoteApiListener(),this.bindProfileVisitHandler(),this.bindFollowEventHandler(),this.bindBlockEventHandler(),this.bindUnblockEventHandler(),this.bindLimitBasedOnWindowHeight(),this.getTypeaheadUsers(),this.userIdsCurrentlyRendered={})},clearCacheIfNewVersion:function(){this._version!==twttr.caches.User.get("typeahead_people_version")&&(twttr.caches.User.set("typeahead_friends",null,-1),twttr.caches.User.set("blocks",null,-1),twttr.caches.User.set("typeahead_people_version",this._version),twttr.caches.User.set("typeahead_people_from_api",0),twttr.caches.User.set("typeahead_people_followed",0),twttr.caches.User.set("typeahead_profile_visits",0),twttr.caches.User.set("typeahead_people_blocked",0),twttr.caches.User.set("typeahead_people_unblocked",0))},mapJavaScriptUser:function(a,b){return{id:a.id,screen_name:a.screenName,name:a.name,profile_image_url:a.profileImageUrl,profile_image_url_https:a.profileImageUrlHttps,verified:a.verified,tokens:a.tokens||this.tokenizeJavascriptUserObject(a),weight:b||a.weight||0}},mapApiUser:function(a,b){return{id:a.id,screen_name:a.screen_name,name:a.name,profile_image_url:a.profile_image_url,profile_image_url_https:a.profile_image_url_https,verified:a.verified,tokens:a.tokens,weight:b||parseFloat(a.rounded_graph_weight)||0}},bindRemoteApiListener:function(){$(document).bind("accountResults",twttr.bind(this,function(a,b,c,d){if(this.$results.attr("data-query")===b.toLowerCase()){d=twttr.filter(d,twttr.bind(this,this.filterBlockedUsers)),d=twttr.filter(d,twttr.bind(this,this.filterAlreadyDisplayedUsers)),this.renderRemoteUsers(d,b);var e=new Date-c;this.trigger("remoteLatency",e)}}))},bindProfileVisitHandler:function(){var a=this;$(document).bind("profileVisit",function(b,c){if(!c.screenName)return;var d=a.removeFromList(a.mapJavaScriptUser(c));d?(d.tokens=a.tokenizeJavascriptUserObject(d),a.addToList(a.mapApiUser(d,d.weight+a.weights.PROFILE_VISIT_BOOST))):(c.tokens=a.tokenizeJavascriptUserObject(c),a.addToList(a.mapJavaScriptUser(c,a.weights.UNCACHED_PROFILE_VISIT)));var e=a.get("typeahead_profile_visits")||0;a.set("typeahead_profile_visits",e+1)})},bindFollowEventHandler:function(){var a=this;twttr.API.User.bind("follow",function(b,c){a.addToList(a.mapJavaScriptUser(c,a.weights.FOLLOW)),a.set("typeahead_people_followed",a.get("typeahead_people_followed")+1),a.trigger("resultsDirty")})},bindBlockEventHandler:function(){var a=this;twttr.API.User.bind("block",function(b,c){a.blocks[c.id]=c,a.update("blocks",a.blocks),a.removeFromList(a.mapJavaScriptUser(c)),a.set("typeahead_people_blocked",a.get("typeahead_people_blocked")+1),a.trigger("resultsDirty")})},bindUnblockEventHandler:function(){var a=this;twttr.API.User.bind("unblock",function(b,c){delete a.blocks[c.id],a.update("blocks",a.blocks),a.addToList(a.mapJavaScriptUser(c,a.weights.UNBLOCK)),a.set("typeahead_people_unblocked",a.get("typeahead_people_unblocked")+1),a.trigger("resultsDirty")})},bindLimitBasedOnWindowHeight:function(){this.bind("newLimit",twttr.bind(this,function(a,b){this.options.limit=b}))},localQueryAndRenderResults:function(a){this.userIdsCurrentlyRendered={},this.$results.attr("data-query",a.toLowerCase());if(this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_local_queries")||this.inBucket())){var b=new Date,c;a.length&&twttr.users.typeahead?(processedQuery=this.processQuery(a),c=this.getPossiblyMatchingAccounts(processedQuery),c=twttr.filter(c,twttr.bind(this,this.matcher(processedQuery,twttr.users.typeahead.length))),c=twttr.filter(c,twttr.bind(this,this.filterBlockedUsers)),c=c.sort(this.ranker),c=c.slice(0,this.options.limit)):c=[],this.renderLocalUsers(c,a);var d=new Date-b;this.trigger("localLatency",d)}},remoteQueryAndRenderResults:function(a){var b=this;if(this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_remote_queries")||this.inBucket())){var c=new Date,d;a.length&&this.queryTopicAndAccountRemoteApi(a,this.options.limit+2,c)}},processQuery:function(a){var b=this.tokenizeText(a);return{raw:a,length:a.length,terms:twttr.map(this.tokenizeText(a),function(a){return{val:a}})}},getUserObjectsFromIds:function(a){var b=[],c=twttr.users.typeahead.userHash;for(var d=0,e=a.length;d<e;d++)$.inArray(c[a[d]],b)===-1&&b.push(c[a[d]]);return b},getPossiblyMatchingAccounts:function(a){var b={},c={};for(var d=0,e=a.terms.length;d<e;d++){var f=a.terms[d],g=f.val[0],i=twttr.users.typeahead.adjacencyList[g];f&&i&&!b[g]&&(b[g]=!0,twttr.map(i,function(a){c[a]=!0}))}var j=[];return $.each(c,function(a){j.push(a)}),this.getUserObjectsFromIds(j)},matcher:function(a,b){return function(b){var c=b.tokens,d=[];for(var e=0,f=c.length;e<f;e++)for(var g=0,i=a.terms.length;g<i;g++)c[e].token.indexOf(a.terms[g].val)===0&&d.push(g);b.matchedCount=$.unique(d).length;if(b.matchedCount===a.terms.length)return b}},ranker:function(a,b){return b.weight-a.weight},renderLocalUsers:function(a,b){var c=twttr.map(a,twttr.bind(this,this.renderAccount));b&&a.length&&c.push((new twttr.views.TypeaheadAccountsShortcut({query:b})).html()),this.$results.html(c.join("")),c.length>0?(this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b)):(this.$node.hide(),this.$node.removeClass("has-results"))},renderRemoteUsers:function(a,b){var c=this.$results.find('li a[data-shortcut="true"]').length,d=this.$results.find("li").length-c;a=a.slice(0,Math.max(0,this.options.limit-d));var e=twttr.map(a,twttr.bind(this,this.renderAccount));b&&c===0&&a.length?(e.push((new twttr.views.TypeaheadAccountsShortcut({query:b})).html()),this.$results.html(e.join(""))):$(e.join("")).insertBefore(this.$results.find(".js-shortcut")),e.length>0&&(this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b))},tokenizeJavascriptUserObject:function(a){var b=this.tokenizeScreenName(a.screenName).concat(["@"+a.screenName],this.tokenizeName(a.name));return twttr.map(b,function(a){return{token:a}})},mapApiUsers:function(a){var b=this;return twttr.map(a,function(a,c){return b.mapApiUser(a)})},addCurrentUser:function(){if(twttr.currentUser){var a=twttr.currentUser;a.tokens=this.tokenizeJavascriptUserObject(a),this.addToList(this.mapJavaScriptUser(twttr.currentUser,this.weights.SELF))}},getTypeaheadUsers:function(){if(twttr.decider.isAvailable("typeahead_local_queries")||this.inBucket())if(!this.requestedUsers){var a=this;this.requestedUsers=!0;var b=twttr.caches.User.get("typeahead_people_from_api"),c=+(new Date);twttr.users.typeahead=twttr.caches.User.get("typeahead_friends"),b&&b!==0&&!!twttr.users.typeahead?(this.trigger("scribeLocalStorageLatency",["load",+(new Date)-c]),this.processQueuedUsers(),this.trigger("resultsDirty")):twttr.API.User.typeaheadSocial(twttr.currentUser.id,{count:$.browser.msie&&parseInt($.browser.version,10)===8?a.IE8_ACCOUNT_LIMIT:a.ACCOUNT_LIMIT,success:function(b){b.length&&(b=a.mapApiUsers(b),a.getBlockedUsers(function(){b=a.filterBlockedUsers(b);var c=twttr.is.def(twttr.users.typeahead)?twttr.users.typeahead:{adjacencyList:{},userHash:{},length:0};twttr.users.typeahead=a.preprocessUsers(b,c),a.addCurrentUser();var d=+(new Date);a.updateStorageCache(),a.trigger("scribeLocalStorageLatency",["save",+(new Date)-d]),a.trigger("resultsDirty")}),a.processQueuedUsers())}})}},preprocessUsers:function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];for(var f=0,g=e.tokens.length;f<g;f++){var i=e.tokens[f].token[0];if(!i)break;b.adjacencyList[i]||(b.adjacencyList[i]=[]),$.inArray(e.id,b.adjacencyList[i])===-1&&b.adjacencyList[i].push(e.id)}b.userHash[a[c].id]=a[c]}return b.length=b.length+a.length,b},getBlockedUsers:function(a){var b=this;blocks=b.get("blocks"),blocks?a(blocks):twttr.currentUser.blocks(function(c){c=c.array;for(var d=0,e=c.length;d<e;d++)b.blocks[c[d].id]=c[d];var f=36e5;b.set("blocks",b.blocks,f),a(b.blocks)})},filterBlockedUsers:function(a){if(!twttr.is.def(this.blocks[a.id]))return a},filterAlreadyDisplayedUsers:function(a){if(!twttr.is.def(this.userIdsCurrentlyRendered[a.id]))return a},renderAccount:function(a){this.userIdsCurrentlyRendered[a.id]=a;var b=twttr.isSSL()?a.profile_image_url_https:a.profile_image_url;return a.avatar=twttr.helpers.transformProfileImageUrl(b,"mini"),a.verified=a.verified?' <i class="verified"></i>':"",twttr.decider.isAvailable("typeahead_debug_info")?(isUserLocal=twttr.is.def(a.weight),a.debug_info=twttr.util.supplant(' title="{datasource} user, weight/score: {score}"',{datasource:isUserLocal?"local":"remote",score:isUserLocal?a.weight:a.rounded_score})):a.debug_info="",(new twttr.views.TypeaheadAccountItem(a)).html()},processQueuedUsers:function(){for(var a=0,b=this.addUsersQueue.length;a<b;a++)this.addToList(this.addUsersQueue[a])},addToList:$.noop,removeFromList:function(a){return a}});a(c)})}),provide("components/GlobalNavTypeahead",function(a){using("constants","components/Typeahead","components/TypeaheadSearchQueryDatasource","components/TypeaheadAccountsDatasource").as(function(b,c,_){var d=twttr.klass("twttr.components.GlobalNavTypeahead",function(a){var c={input:$("#search-query"),inputHint:$("#search-query-hint"),datasources:[new b.components.TypeaheadSearchQueryDatasource,new b.components.TypeaheadAccountsDatasource],select:function(a,b,c,d){var e=c.find("a").attr("data-shortcut"),f=c.attr("data-user-screenname"),b=c.find("a").attr("data-search-query")||b,g=c.find("a").attr("data-query-source")==="saved_search_click",i=g?twttr.search.searchQuerySource.SAVED_SEARCH_CLICK:twttr.search.searchQuerySource.TYPEAHEAD_CLICK;!c.find("a").attr("data-search-query")&&!f&&(i=twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.setLastQuerySource(i);var j;e?j=c.find("a")[0].href:f?j=twttr.router.profilePath({screen_name:f}):(twttr.search.$searchQuery.val(b),j=twttr.router.searchResultsPath({query:b})),d?window.open(j):twttr.router.routeTo(j),a.preventDefault()}},a=twttr.merge({},c,a);(twttr.decider.isAvailable("typeahead_global_nav")||twttr.abdecider.choose("typeahead_271")==="typeahead")&&b.components.Typeahead.call(this,a)}).subclassOf(b.components.Typeahead);a(d)})}),provide("components/Editor",function(a){using("util","constants").as(function(b){twttr.klass("twttr.components.Editor",function(a,b){var c=this;this.$container=$(a),this.$container.addClass("twttr-editor"),this.options=b||{},this._defaultContent=this.options.defaultContent||"",this._enableAutoGrow=this.options.enableAutoGrow||!1,this._isIE7()&&(this._enableAutoGrow=!1),this._autoGrowMinHeight=this.options.height||75;var d=this.options.width||"100%",e=this.options.height||"auto";this.$editor=$("<textarea/>").addClass("twitter-anywhere-tweet-box-editor").css({width:d,height:e}).val(this._defaultContent),this.options.condensed&&this.$container.addClass("condensed"),this.css={width:$.browser.mozilla?d-2:d,height:e,"min-height":e},this.$container.append(this.$editor),this._enableAutoGrow&&(this.$editor.css("overflow","hidden"),this.$shadow=this._createShadowForTextArea(this.$editor),this.$shadow.appendTo(this.$editor.parent())),this._registerEvents()}).methods(twttr.EventProvider).methods({moveCursorToEnd:function(){var a=this.$editor[0];setTimeout(function(){try{if(a.createTextRange){var b=a.createTextRange();b.collapse(!0),b.moveStart("character",a.value.length),b.moveEnd("character",a.value.length),b.select()}else a.selectionStart=a.value.length}catch(c){}},0)},content:function(){return this.$editor.val().replace(twttr.constants.regexps.dirMark,"")},setContent:function(a){a=a||"",this.$editor.val(a),this.trigger("didChangeContent",[a])},height:function(a){this.$editor.css("height",a)},width:function(a){this.$editor.css("width",a)},focus:function(){this.$editor.focus(),this.moveCursorToEnd()},blur:function(){this.$editor.blur()},toggle:function(){this.$editor.toggle()},reset:function(){this.setContent("")},_tryAutoGrow:function(){var a=this._autoGrowMinHeight,b=150,c="xyz",d=this.$editor;this._copyCssPropertiesFromTextArea(this.$shadow,d),this.$shadow.text(d.val()+c);var e=this.$shadow.height();e>a&&e<=b?(d.css("overflow","hidden"),d.height(e)):e<a?(d.css("overflow","hidden"),d.height(a)):e>b&&d.css("overflow","auto")},_isIE7:function(){return $.browser.msie&&parseInt($.browser.version,10)===7},_copyCssPropertiesFromTextArea:function(a,b){var c=["font-family","font-size","font-weight","line-height","padding-bottom","padding-left","padding-right","padding-top","white-space","width","word-wrap"];$.each(c,function(c,d){a.css(d,b.css(d))})},_createShadowForTextArea:function(a){var b=$("<div />").css("display","none");return this._copyCssPropertiesFromTextArea(b,a),b},_registerEvents:function(){var a=this;this.$editor.bind("focus blur",function(b){a.trigger(b.type,Array.prototype.slice.call(arguments,1))}),this.$editor.bind("keypress",function(a){if(a.ctrlKey)return;a.stopPropagation()}),this.$editor.bind("keydown",function(c){if(c.ctrlKey)return;switch(c.keyCode){case b.constants.keyCodes.tab:c.preventDefault(),a.trigger("blurFromTab",[c]);break;case b.constants.keyCodes.esc:c.preventDefault(),a.trigger("blurFromEscape");break;default:c.stopPropagation()}}),$.browser.mozilla?this.$editor.bind("input mousedown mouseup",twttr.bind(this,this._keyEvents)):this.$editor.bind("keydown keyup paste change mousedown mouseup input",twttr.bind(this,this._keyEvents)),this._enableAutoGrow&&this.$editor.bind("change cut keyup paste",twttr.bind(this,this._tryAutoGrow))},_keyEvents:function(a){!$.browser.webkit||a.type!="paste"&&a.type!="keydown"?this._inputCallback(a):setTimeout(twttr.bind(this,function(){this._inputCallback(a)}),0)},_inputCallback:function(a){this.trigger("didChangeContent",[this.content(),a])}}),twttr.klass("twttr.components.RichEditor",function(a,c){function e(a){var b=d.$editor.offset();d.$proxy=$(a.contentWindow.document.body),twttr.i18n&&twttr.i18n.rtl&&(d.$proxy[0].dir="rtl"),d.$proxy.append("<style>"+d.constructor.css+"</style>"),d._$proxyWrapper=$('<pre class="proxy-wrapper"></pre>').appendTo(d.$proxy),d._applyStyles(),d._queue.flush()}var d=this;this.supr=twttr.components.Editor,this.supr.apply(this,arguments),this._queue=new b.util.WaitQueue,this._$proxyWrapper={length:0},this.$iframe=$('<iframe allowtransparency="false" src="../../receiver.html" frameborder="0" tabindex="-1" role="presentation" scrolling="no"/>'),this.$iframe.insertBefore(this.$editor),this.$iframe.bind("load",function(){e(this)}),this.$iframe.addClass("proxy-editor"),this.$container.addClass("rich-editor"),this._tweetBoxHeight=0,$('<div class="tweet-meta"><div class="tweetbox-media-icon"/></div>').appendTo(this.$container),this.$mediaicon=this.$container.find(".tweetbox-media-icon"),this._foundMedia=!1,this.bind("didChangeContent",twttr.bind(this,this._proxyLinkify))}).subclassOf(twttr.components.Editor).statics({css:'body {        margin: 0;        width: 482px;        height: 56px;        color: #222;        overflow-x: hidden;        overflow-y: hidden;      }      .proxy-wrapper {        margin: 0;        padding: 0;        font: 14px/18px "Helvetica Neue", Arial, sans-serif;        white-space: pre-wrap;        word-wrap: break-word;      }      a {        color: #0084b4;        text-decoration: none;      }      a.twitter-timeline-link {        background-color: #bedff8;        -moz-border-radius: 5px;        -webkit-border-radius: 5px;        border-radius: 5px;      }      em {        font-style: normal;        display: inline-block;        width: 2px;      }'}).methods({_applyStyles:function(){this.$editor.css("min-height",this.css.height),this.$proxy.css("width",this.css.width),this.$iframe.css("width",this.css.width)},_growTweetBox:function(){var a=this._$proxyWrapper.height();$.browser.webkit&&(a+=10),a!==this._tweetBoxHeight&&(this.$editor.height(a),this.$iframe.height(a),this.trigger("heightChange")),this._tweetBoxHeight=a},_replaceAndys:function(a){return a.replace(/&amp;/g,"&")},_proxyLinkify:function(){this._queue.add(twttr.bind(this,function(){var a=b.util.linkify(this._replaceAndys(h(this.content())))+"<em>&nbsp;</em>";this._$proxyWrapper.html(a),this._growTweetBox(),this._showMediaIcon()}))},_showMediaIcon:function(){var a=twttr.txt.extractUrls(this.content()),b;for(var c=0;c<a.length;c++){var d=a[c];b=twttr.media.matchInstance(d);if(b){var e=twttr.is.fn(b.icon)?b.icon():b.icon;this.$mediaicon.addClass(e),this._foundMedia=!0;return}}!b&&this._foundMedia&&(this.$mediaicon[0].className="tweetbox-media-icon",this._foundMedia=!1)},reset:function(){this.supr.prototype.reset.apply(this,arguments),this._$proxyWrapper.html(""),this._applyStyles()}}),a(twttr.components.Editor)})}),provide("TweetBox",function(a){using("_","util","constants","components/TweetboxAutocomplete","mixins/urlShortener","mixins/photoBox").as(function(b,_){var c={condensed:!0,condensedContent:"",closeAfterSuccess:!0,defaultContent:!1,width:560,height:56,autocomplete:!0,autocompleteSuggestionLimit:10,displayError:!0,template:{show_geo:!0,show_title:!0,title:_("What’s happening?"),button_text:_("Tweet"),api_url:window.location.protocol+"//"+twttr.domains.upload},enableDraft:!1,statusAction:"update",draggable:!0},d=1,e={},f={update:"Status",reply:"Status",dm:"DirectMessage",directMessage:"DirectMessage"},g=/^(?:d|m|dm)\s+[@＠]?([a-zA-Z0-9_]{1,20}) /;twttr.klass("twttr.TweetBox",function(a,f){var g=this;c.template.title=_("What’s happening?"),c.template.button_text=_("Tweet"),c.template.post_authenticity_token=twttr.API.getConfig().postAuthenticityToken,this.options=twttr.merge({},c,f||{},!0),this.places=[],this._explainLinkShortening=twttr.is.def(this.options.explainLinkShortening)?this.options.explainLinkShortening:!0,this._isButtonEnabled=!1,this._hasWarned=!0,this._hasSuperWarned=!1,this._hasNoWarned=!1;var i={defaultContent:this._getDraftTweet()||this.options.condensedContent||this.options.defaultContent,width:this.options.width,height:this.options.height,enableAutoGrow:this.options.enableAutoGrow||!1};this.id=this.options.id||d++,e[this.id]=this,this.$container=$(a),this.view=(new twttr.views.TweetBox(this.options.template)).render(a,"append");var j=twttr.decider.isAvailable("phoenix_tweetbox_talon")&&twttr.decider.isAvailable("phoenix_rich_editor")&&!$.browser.msie,k=j?"RichEditor":"Editor";this.editor=new twttr.components[k](this.$container.find(".text-area-editor"),i),this.$counter=this.$find(".tweet-counter"),this.$tweetButton=this.$container.find(".tweet-button"),this.$title=this.$container.find("h2"),this.options.autocomplete&&(this.autocomplete=new b.components.TweetboxAutocomplete(this)),this._updateDraftTweet=twttr.bind(this,this._updateDraftTweet),!this.options.condensed||!this.options.condensedContent&&this.options.defaultContent||i.defaultContent!==(this.options.condensedContent||this.options.defaultContent)?this.open():this.editor.blur(),twttr.is.def(this.options.dynamicTitle)&&(this._dynamicTitle=this.options.dynamicTitle),this._registerUrlShortenerEvents(),this.registerEvents(),this._initPhotobox(),this._toggleCounterState(null,i.defaultContent||"")}).mixin(twttr.mixins.i18nTweetBox,twttr.mixins.urlShortener,twttr.mixins.photoBox).statics({focus:function(a){e[a].editor.focus()},_getDefaultContentForReply:function(a,b,c){var d=!1,e=a?a.find("a.twitter-atreply"):[],f="@"+b+" ";if(e.length){d=!0;var g=[];e.each(function(a,d){var e=$(this).text().replace("@","");!e.match(new RegExp("^"+b+"$"),"i")&&!twttr.is.inArray(e,g)&&!e.match(new RegExp("^"+c+"$","i"))&&g.push(e)}),g.unshift(b),f=twttr.map(g,function(a){return"@"+a+" "}).join("")}return{defaultContent:f,multiple:d}}}).statics(twttr.EventProvider).methods(twttr.EventProvider).methods({$find:function(a){return this.$container.find(a)},_locked:!1,_dynamicTitle:!0,lock:function(){this._locked=!0},unlock:function(){this._locked=!1},focus:function(){this.editor.focus(),this.editor.moveCursorToEnd()},_getTextLength:function(a){var c=b.util.displayLength(a);return c},_noPhotosPresent:function(){return!this.turkey||this.turkey&&!this.turkey.hasItems()},_toggleButtonState:function(a,b){var c=this._getTextLength(b),d=this.options.defaultContent||"";(c>140||$.trim(this.getTweetContent())==$.trim(d))&&this._noPhotosPresent()?this._isButtonEnabled&&(this._isButtonEnabled=!1,this.$tweetButton.addClass("disabled").removeClass("primary-btn")):this._isButtonEnabled||(this._isButtonEnabled=!0,this.$tweetButton.removeClass("disabled").addClass("primary-btn"))},_toggleCounterState:function(a,b){var c=this._getTextLength(b);this._updateCounter(c),c>120&&c<130?this._hasWarned||(this._hasWarned=!0,this._hasSuperWarned=!1,this._hasNoWarned=!1,this.$counter.addClass("warn").removeClass("superwarn")):c>=130?this._hasSuperWarned||(this._hasSuperWarned=!0,this._hasWarned=!1,this._hasNoWarned=!1,this.$counter.addClass("superwarn").removeClass("warn")):this._hasNoWarned||(this._hasNoWarned=!0,this._hasSuperWarned=!1,this._hasWarned=!1,this.$counter.removeClass("superwarn").removeClass("warn"))},_updateCounter:function(a){this.$counter.val(140-a)},open:function(){var a=this;if(this._isOpen)return;this._isOpen=!0,this.$container.find(".tweet-box").removeClass("condensed");var b=this._getDraftTweet();b?this.setTweetContent(b):twttr.is.string(this.options.defaultContent)&&this.setTweetContent(this.options.defaultContent),this.editor.bind("didChangeContent",this._updateDraftTweet),this.trigger("open");var c={};twttr.audit.currentPage()=="profile"&&(c.profile_id=twttr.profileUser.id);var d=a.options.statusAction==="directMessage"||a.editor.content().match(g);d||(twttr.profileUser&&twttr.profileUser.verified&&twttr.app.currentPageName()=="profile"&&twttr.abdecider.track("replies_stripped_on_verified_profiles_222","compose_tweet"),trackClient({component:"tweetbox",action:"compose_tweet"},c))},close:function(){if(!this._isOpen)return;this.options.condensed&&this.$container.find(".tweet-box").addClass("condensed"),this.editor.unbind("didChangeContent",this._updateDraftTweet),this.turkey&&this.turkey.reset(),this.trigger("close"),this._isOpen=!1},disable:function(){this.close(),this.editor.$editor.val(""),this.editor.$editor.bind("keypress",function(a){a.preventDefault()})},getTweetContent:function(){return this.editor.content()},setTweetContent:function(a){this._setDraftTweet(a),this.editor.setContent(a)},resetTweetContent:function(){this.editor.reset(),this._setDraftTweet(null),this.$container.find("textarea").val(this.options.condensedContent)},_tweet:function(){this.trigger("readyToTweet"),this.tweet()},tweet:function(){var a=this._shouldTweet();a.shouldTweet&&(this.setTweetBoxToBusyState(),this._setDraftTweet(null),this.trigger("sendingTweet",{action:this.options.statusAction}),this.makeRequest.apply(this,a.args)),a.msg&&(this.options.displayError&&twttr.showError(a.msg),this.trigger("error",[a.msg])),a.redirectToProfile&&twttr.router.routeTo(twttr.router.profilePath({screen_name:a.redirectToProfile}))},_getDraftTweet:function(){return this.options.enableDraft?twttr.app.caches.draftTweets.get(this.options.enableDraft===!0?window.location.href:this.options.enableDraft):null},_setDraftTweet:function(a){if(this.options.enableDraft){var b=this.options.enableDraft===!0?window.location.href:this.options.enableDraft;a?twttr.app.caches.draftTweets.set(b,a,864e5):twttr.app.caches.draftTweets.remove(b)}},_updateDraftTweet:function(){this._setDraftTweet(this.getTweetContent())},_shouldTweet:function(){var a=[],c=this.options.statusAction,d=f[c],e=$.trim(this.editor.content());if((this.options.condensedContent&&e==$.trim(this.options.condensedContent)||this.options.defaultContent&&e==$.trim(this.options.defaultContent))&&this._noPhotosPresent())return{shouldTweet:!1};if(this._sendingStatus||this._locked)return{shouldTweet:!1};var g=this.turkey&&this.turkey.hasItems();if(c==="update"&&this.editor.content().match(b.constants.regexps.usernameWithSpace)&&!g){var i=RegExp.$1;return this.$container.find(".tweet-spinner").show(),this.$container.find(".tweet-counter").hide(),{shouldTweet:!1,redirectToProfile:i}}if(this._getTextLength(e)>140)return{shouldTweet:!1,msg:(new twttr.views.TooLongErrorMessage({is_dm:c==="directMessage"})).html()};if(this._getTextLength(e)===0)return{shouldTweet:!1};if(c=="directMessage")if(!twttr.is.def(this.options.data.getUser())||twttr.is.blank(this.options.data.getUser()))return{shouldTweet:!1,msg:_("Whoops! You forgot to type in a username.")};var j=this,k=this._getRequestOptions();this.options.inReplyToStatusId&&twttr.merge(k,{in_reply_to_status_id:this.options.inReplyToStatusId});if(twttr.geo.location){var l=twttr.geo.location.isLocationOn()&&twttr.geo.location.cityId();l&&(k.place_id=l)}twttr.decider.isAvailable("geo_place_entities_write")&&this.places.length&&(k.places=JSON.stringify(this.places)),k.timeout=function(a){a.retry()};switch(c){case"update":a=[this.getTweetContent(),k];break;case"reply":k.impression_id=this.options.data.impressionId,a=[this.options.data.tweetId,this.getTweetContent(),k];break;case"directMessage":c="send",a=[this.options.data.getUser(),this.getTweetContent(),k]}return{shouldTweet:!0,args:[d,c,a]}},setTweetBoxToBusyState:function(){this.$container.find(".tweetbox-counter-tipsy").hide(),this.$container.find(".tweet-spinner").show(),this.$container.find(".tweet-counter").hide(),this.$tweetButton.addClass("disabled")},unSetTweetBoxToBusyState:function(){this.$container.find(".tweet-spinner").hide(),this.$container.find(".tweet-counter").show(),this.$container.find(".tweetbox-counter-tipsy").show(),this.$tweetButton.removeClass("disabled")},_getRequestOptions:function(){var a=this,b=a.options.statusAction==="directMessage"||a.editor.content().match(g);return{complete:function(){a.unSetTweetBoxToBusyState(),a._sendingStatus=!1},success:function(c,d){var e="";a.options.closeAfterSuccess&&a.close(),b||(a.trigger("tweetSuccess",[c,a.options.statusAction]),a.constructor.trigger("tweetSuccess",[c,a.options.statusAction]),e=a.options.inReplyToStatusId||c.text.indexOf("@")==0?"send_reply":"send_tweet"),a.editor.reset(),a.places=[],delete a.options.inReplyToStatusId;var f={item_ids:[c.id]};twttr.profileUser&&(f.profile_id=twttr.profileUser.id);var g=a.options.id||"unspecified-tweetbox";g.indexOf("send-message-box")!=-1&&(g="send-message-box"),b?(a.trigger("dmSuccess",[c,a.options.statusAction]),trackClient({component:"direct_message",action:"send_dm"},f)):trackClient({component:g,action:e},f),a.options.condensed&&a.$container.find(".tweet-box").addClass("condensed"),a.resetTweetContent()},error:function(c){a.$tweetButton.removeClass("disabled");if(twttr.isT1&&b)var d=twttr.errors.errorCodeFromResponse(c);else var d=twttr.helpers.showErrorFromResponse(c,b?"dm":"tweet");a.trigger(b?"dmError":"tweetError",[d])}}},makeRequest:function(a,b,c){this._sendingStatus=!0,twttr.API[a][b].apply(twttr.API[a],c)},destroy:function(){this.trigger("destroy")},collapseOnBlur:function(){if(this.preventBlur)return;var a=this.editor.content(),b=a===this.options.defaultContent||a==="";b&&this._noPhotosPresent()&&(this.close(),this.editor.setContent(this.options.condensedContent||this.options.defaultContent||""),$(document).unbind("click.tweetbox"))},registerEvents:function(){var a=this;this.$tweetButton.addClass("disabled"),this.editor.bind("focus",function(b){setTimeout(function(){a.open(),twttr.geo.location&&twttr.geo.location.onFocusTweetBox(a.$container)},0)}),twttr.isT1&&(this.editor.bind("blur",function(){a.collapseOnBlur()}),this.editor.bind("focus",function(){$(document).unbind("click.tweetbox"),$(document).bind("click.tweetbox",function(b){$(b.target).is(".tweet-box, .tweet-box *")||a.collapseOnBlur()})}),this.$container.bind("mouseenter",function(){a.preventBlur=!0}),this.$container.bind("mouseleave",function(){a.preventBlur=!1})),this.editor.bind("didChangeContent",twttr.bind(this,this._toggleButtonState)),this.editor.bind("didChangeContent",twttr.bind(this,this._toggleCounterState)),this.registerTextDirEvents(),this.editor.bind("blurFromTab",function(b,c){twttr.components.Autocomplete._isCompletionsOpen||a.$container.find(".tweet-button").focus()}),this.editor.bind("blurFromEscape",function(b){twttr.components.Autocomplete._isCompletionsOpen||(a.preventBlur=!1,a.editor.blur(),a.trigger("blurFromEscape"))}),!this.options.condensedContent&&this.options.defaultContent.length>0&&(this.editor.trigger("didChangeContent",[this.options.defaultContent]),setTimeout(twttr.bind(this,function(){this.open(),this.focus(),this.editor.$editor.trigger(jQuery.Event("keyup"))}),0)),this.$tweetButton.bind("keypress",twttr.bind(this,function(a){a.stopPropagation();if(a.keyCode===b.constants.keyCodes.enter||a.charCode===b.constants.charCodes.space)return this._tweet(),a.preventDefault(),this.blur(),!1})).bind("click",function(b){a._tweet(),this.blur(),b.preventDefault()});var d,e,f,i;if(this.options.statusAction=="update"||this.options.statusAction=="reply")this.bind("titleChanged",function(b,c,d){a.$tweetButton[0].childNodes[0].nodeValue=d=="dm"?_("Send Message"):_("Tweet")}),this._dynamicTitle&&this.editor.bind("didChangeContent",twttr.bind(this,function(a,j){if(j.match(g)){if(!d){d=!0,e=f=i=!1;var k=RegExp.$1,l=_("Message {{username}}",{username:k});this.$title.html(l),this.trigger("titleChanged",[l,"dm"])}}else if(this.options.statusAction=="reply"&&j.match(new RegExp("[@＠]"+this.options.data.screenName+" "))){if(!e){e=!0,d=f=i=!1;var l=_("Reply to @{{username}}",{username:this.options.data.screenName});this.$title.html(l),this.trigger("titleChanged",[l,"reply"])}}else if(j.match(b.constants.regexps.usernameWithAt)){if(!f){f=!0,d=e=i=!1;var l=_("Tweet to {{username}}",{username:RegExp.$1});this.$title.html(l),this.trigger("titleChanged",[l,"mention"])}}else i||(i=!0,d=e=f=!1,this.$title.html(c.template.title),this.trigger("titleChanged",[c.template.title,"update"]))}));twttr.geo.location&&twttr.geo.location.onRegisterTweetBox(this.$container,this.options.whenGeoPopupOpens),this.trigger("ready")}}),a(twttr.TweetBox)})}),provide("components/TweetboxAutocomplete",function(a){using().as(function(){twttr.klass("twttr.components.TweetboxAutocomplete").subclassOf(twttr.components.Base).initializer(function(a){var b=this;this.tweetbox=a,this.places=a.places,this.autocomplete=new twttr.components.Autocomplete({input:a.editor.$editor,textarea:!0,limit:a.options.autocompleteSuggestionLimit}),this.autocomplete.bind("select",function(a){b.tweetbox.editor.trigger("didChangeContent",[b.tweetbox.editor.content()])}),this.tweetbox.editor.bind("heightChange",twttr.bind(this.autocomplete,this.autocomplete.position)),a.bind("open",function(a){twttr.components.Autocomplete.getAutocompletedUsers(),b.autocomplete.position()}),a.$container.delegate(".geo-insert-place-button","click",twttr.bind(this,function(a){return this.autocomplete.insertPlace(),!1}))}),a(twttr.components.TweetboxAutocomplete)})}),provide("shortcuts_t1",function(a){using("_","constants").as(function(b,_){twttr.shortcuts={delegateToApp:function(){$(document).bind("keypress",function(a){return twttr.app.currentPage().send("onkeypress",[a])}),$(document).bind("keyup",function(a){return twttr.app.currentPage().send("onkeyup",[a])}),$(document).bind("keydown",function(a){return twttr.app.currentPage().send("onkeydown",[a])})},focusSearchBox:function(a){a.preventDefault(),$("#search-query").focus(),scribble("search-box-focus",{input:"keyboard"})},initCombos:function(){twttr.shortcuts.currentKey=null;var a=[],b={65:"a",67:"c",68:"d",71:"g",76:"l",85:"u",82:"r",83:"s",80:"p",72:"h",70:"f",86:"v",88:"x",77:"m"};$(document).keydown(function(a){if(twttr.helpers.isModifier(a))return;twttr.shortcuts.verify(a)&&$(a.target).is(":not(input)")?a.preventDefault():twttr.shortcuts.currentKey=null}),twttr.augmentString("twttr.shortcuts.combo",function(b,c){a.push({keys:b,fn:c})}),twttr.augmentString("twttr.shortcuts.verify",function(c){var d=c.keyCode,e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(b[d]===g.keys[0]){e=!0,twttr.shortcuts.currentKey=b[d];break}if(b[d]===g.keys[1]&&twttr.shortcuts.currentKey===g.keys[0]){e=!0,twttr.shortcuts.currentKey=null,g.fn();break}}return e}),twttr.shortcuts.combo(["g","u"],function(){scribble("open-goto-user-dialog",{input:"keyboard"}),twttr.components.Autocomplete.getAutocompletedUsers(),twttr.dialogs.goToUser().open()});if(twttr.loggedIn){function c(){scribble("switch-stream",{input:"keyboard",toStream:"connect"}),twttr.router.routeTo(twttr.router.connectPath())}function d(){scribble("switch-stream",{input:"keyboard",toStream:"activity"}),twttr.router.routeTo(twttr.router.networkActivityPath())}function e(){scribble("switch-stream",{input:"keyboard",toStream:"mentions"}),twttr.router.routeTo(twttr.router.mentionsPath())}twttr.decider.isActivityEnabled()?(twttr.shortcuts.combo(["g","a"],d),twttr.shortcuts.combo(["g","c"],c),twttr.shortcuts.combo(["g","r"],e)):twttr.shortcuts.combo(["g","r"],e),twttr.shortcuts.combo(["g","d"],function(){scribble("switch-page",{input:"keyboard",toPage:"discover"}),twttr.router.routeTo(twttr.router.discoverPath())}),twttr.shortcuts.combo(["g","l"],function(){scribble("switch-stream",{input:"keyboard",toPage:"lists"}),twttr.router.routeTo(twttr.router.listsPath())}),twttr.shortcuts.combo(["g","p"],function(){scribble("switch-page",{input:"keyboard",toPage:"profile"}),twttr.router.routeTo(twttr.router.profilePath({screen_name:twttr.currentUser.screenName}))}),twttr.shortcuts.combo(["g","m"],function(){scribble("switch-page",{input:"keyboard",toPage:"messages"}),twttr.dialogs.directMessage({origin:"message-dialog-hotkey"}).open().switchToConversationListView()}),twttr.shortcuts.combo(["g","h"],function(){scribble("switch-stream",{input:"keyboard",toStream:"home"}),twttr.router.routeTo(twttr.router.homePath())}),twttr.shortcuts.combo(["g","f"],function(){scribble("switch-stream",{input:"keyboard",toStream:"favorites"}),twttr.router.routeTo(twttr.router.favoritesPath())}),twttr.shortcuts.combo(["g","s"],function(){scribble("switch-page",{input:"keyboard",toPage:"settings"}),twttr.router.routeTo(twttr.router.settingsPath())}),twttr.decider.isAvailable("phoenix_facets")&&(twttr.shortcuts.combo(["s","p"],function(){scribble("open-search-facets-dialog",{input:"keyboard",facetsType:"photos"}),twttr.dialogs.searchFacets("photos").open()}),twttr.shortcuts.combo(["s","v"],function(){scribble("open-search-photos-dialog",{input:"keyboard",facetsType:"videos"}),twttr.dialogs.searchFacets("videos").open()})),twttr.shortcuts.combo(["g","x"],function(){twttr.decider.isAvailable("muteUsers")&&(twttr.components.Autocomplete.getAutocompletedUsers(),(new twttr.widget.MuteDialog).open())})}},initSecrets:function(){twttr.loggedIn&&(twttr.provide("twttr.secrets"),twttr.secrets.secretSauce=function(a,b){$(document).bind("keydown",b.split("->"),function(b){twttr.decider.isAvailable(a)&&(twttr.secrets[a]=!twttr.secrets[a])})},twttr.secrets.secretSauce("hideMentions","x->o"),twttr.secrets.secretSauce("allMedia","x->i"))},openDialogs:function(a){if(!twttr.loggedIn||twttr.shortcuts.currentKey)return;if(twttr.helpers.isModifier(a)||$(a.target).is("input"))return;a.keyCode===77?(twttr.dialogs.directMessage({origin:"message-dialog-hotkey"}).open().switchToNewMessageView(),scribble("dialog-direct-message",{input:"keyboard"}),a.preventDefault()):a.keyCode===78&&((new twttr.widget.TweetDialog({draggable:!0,template:{title:_("What’s happening?")},origin:"new-tweet-hotkey"})).open().focus(),scribble("dialog-new-tweet",{input:"keyboard"}),a.preventDefault())},closeDialogs:function(a){a.keyCode===b.constants.keyCodes.escape&&twttr.widget.Dialog.currentModal&&twttr.widget.Dialog.currentModal.options.closable&&(twttr.widget.Dialog.close(),a.stopPropagation(),a.preventDefault())},openKeyboardDialog:function(a){a.which===b.constants.charCodes.questionMark&&(a.preventDefault(),twttr.dialogs.keyboardShortcuts().toggle(),scribble("shortcut-dialog",{input:"keyboard"}))}},twttr.app.waitForSignal("init",function(){$(document).bind("keydown",twttr.shortcuts.openDialogs),$(document).bind("keydown",twttr.shortcuts.closeDialogs),$(document).bind("keypress","/",twttr.shortcuts.focusSearchBox),$(document).bind("keypress",twttr.shortcuts.openKeyboardDialog),twttr.shortcuts.delegateToApp(),twttr.shortcuts.initCombos(),twttr.shortcuts.initSecrets(),$("a.js-keyboard-shortcut-trigger").live("click",function(a){a.preventDefault(),twttr.dialogs.keyboardShortcuts().open()})}),a(twttr.shortcuts)})}),provide("stork",function(a){using("util").as(function(b){function c(a){return function(b){if(twttr.stork.isEnabled())return a("stork."+b)}}twttr.provide("twttr.stork",twttr.merge({init:function(){twttr.isT1&&twttr.decider.isAvailable("stork_guidance")&&(this.EXPIRE_TIME=12096e5,twttr.caches.User.set("stork.enabled",!0,this.EXPIRE_TIME),$.each(twttr.stork.STORKS,function(a,b){twttr.caches.User.set("stork."+b.counter,0,twttr.stork.EXPIRE_TIME)}))},STORKS:[{id:"expand_photo",counter:"expand_tweet",icon:"stork-help",matcher:function(a){return a.find(".js-sm-icon.sm-image").length>0},promptHtml:_("There’s a photo in this Tweet. Check it out."),explainHtml:_("<p>You’ll also find music, videos, and replies inside Tweets, so keep expanding them.</p>"),promptHighlight:".original-tweet .js-view-details",explainHighlight:"remove",explainOn:"expanded.tweet",dismissOn:"collapsed.tweet"},{id:"expand_video",counter:"expand_tweet",icon:"stork-help",matcher:function(a){return a.find(".js-sm-icon.sm-video").length>0},promptHtml:_("There’s a video in this Tweet. Check it out."),explainHtml:_("You’ll also find photos, music, and replies inside Tweets, so keep expanding them."),promptHighlight:".original-tweet .js-view-details",explainHighlight:"remove",explainOn:"expanded.tweet",dismissOn:"collapsed.tweet"},{id:"retweet_profile",counter:"retweet_profile",icon:"stork-help",matcher:function(a){return a.find("[data-retweet-id]").length>0},explainHtml:_("<p>A <strong>retweet</strong> is a Tweet that was shared by someone you’re following.</p> <p>The author of that Tweet may be someone you don’t follow, so it’s a great way to check out somebody new.</p>"),explainHighlight:".stream-item-footer .context .js-retweet-text",explainOn:"expanded.tweet",dismissOn:"profile_popup.tweet collapsed.tweet"},{id:"hashtag",counter:"hashtag",icon:"stork-help",matcher:function(a){return a.find(".original-tweet .js-tweet-text .twitter-hashtag").length>0},explainHtml:_("<p>The # symbol makes this word a <strong>hashtag</strong>. People add hashtags to their Tweets to give them topics.</p> <p>Click on it to find other Tweets with the same hashtag.</p>"),explainHighlight:".original-tweet .js-tweet-text .twitter-hashtag",explainOn:"expanded.tweet",dismissOn:{selector:".js-tweet-text .twitter-hashtag",event:"click"}},{id:"mention",counter:"mention",icon:"stork-help",matcher:function(a){return a.find(".original-tweet .js-tweet-text .twitter-atreply").length>0},explainHtml:_("<p>The @ symbol is used to <strong>mention</strong> another person by username. Mentions call attention to someone and can start a conversation.</p> <p>Click on it to see that user’s profile.</p>"),explainHighlight:".original-tweet .js-tweet-text .twitter-atreply",explainOn:"expanded.tweet",dismissOn:{selector:".js-tweet-text .twitter-atreply",event:"click"}}],getValue:c(function(a){return twttr.caches.User.get(a)||0}),incrValue:c(function(a){var b=twttr.caches.User.get(a)||0;twttr.caches.User.set(a,b+1,twttr.stork.EXPIRE_TIME)}),isEnabled:function(){return twttr.isT1&&twttr.caches.User.get("stork.enabled")},storkifyTweets:function(a){if(!this.isEnabled())return;var b=[];$.each(twttr.stork.STORKS,function(a,c){twttr.stork.getValue(c.counter)==0&&b.push(c)});var c=a.find(".js-stream-item").slice(0,10),d=!!c.find(".js-pip").length;if(d)return;c.each(function(a,c){var d=$(c),e=!1;if(d.attr("data-promoted")||d.find("[data-promoted]").length>0)return;$.each(b,function(a,b){if(b.matcher(d)){var c=new twttr.components.StorkPip(d,b);return e=!0,!1}});if(e)return!1})}},twttr.EventProvider)),a(twttr.stork)})}),provide("streams/ActivityStream",function(a){using().as(function(b){twttr.stream("twttr.streams.ActivityStream",function(a,b){twttr.streams.Stream.apply(this,arguments),this.page=0,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.registerTweetActionEvents(),this.registerUserActionEvents(),this.updateI18nDisplay(),this.initComponentEvents()}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.componentEvents,twttr.mixins.SinceMaxPagination,twttr.mixins.PollingStream,twttr.mixins.tweetActionable,twttr.mixins.i18nTweet,twttr.mixins.userActionable,twttr.mixins.activityStreamEvents,twttr.mixins.streamablePageWithInlineMedia).deciderKey(function(){return twttr.decider.isActivityEnabled()}).pollingDeciderKey(function(){return twttr.decider.isActivityEnabled()}).methods({PAGE_SIZE:20,timeouts:{ACTIVE:15e3,INACTIVE:9e4},itemViewClass:"ActivityItem",streamItemType:"activity",additionalStreamItemClass:function(a){return"js-activity js-activity-"+a.event},_idForItem:function(a,b){return b==="first"?a.maxPosition:a.minPosition},_pollShouldFetch:function(){var a=$(".stream-container").offset().top,b=$(window).scrollTop();return b<=a},streamItemId:function(a){return[a.minPosition,a.maxPosition,a.event,a.timestamp].join("_")},update:function(){},beforeSwitchingAway:function(){this.stopPeriodicFetcher()},afterFirstSwitchingTo:function(a){var b=this;this.startPeriodicFetcher(),this._loadedStreamOnce=!0,this.isLoadingMore(),this.fetcher(!0,function(c,d){c.render(),c.doneLoadingMore(),d!==twttr.streams.SUCCESS?(b._scribeResults("error",[],{status_code:502}),b._showError(d)):b.fetchUntilScreenIsFull(),a?a():$.noop}),twttr.isT1&&this.addInlineMediaIcons(this.$node)},afterSwitchingToAgain:function(a){this.fetcher(twttr.bind(this,function(b){var c=this.newItemsCount;this.newItemsCount>0&&this.showNewItems(this.newItemsCount),this.restartFetcher(),a?a():$.noop}))},showNewItems:function(a,b){this._showNewItems()},_showNewItems:function(a){var b=this.$streamItems();this.beforeShowNewItems(),this.newItemsCount>this.NEW_ITEMS_COUNT_MAX&&(b.empty(),this.items=this.items.slice(0,this.NEW_ITEMS_COUNT_CUTOFF),this.newItemsCount=this.NEW_ITEMS_COUNT_CUTOFF);var c=this.items.slice(0,this.newItemsCount),d=this._renderItems(c);!a&&this.newItemsCount>0&&this.onGotNewItems(c),a&&this.onGotInitialResults(this.items);var e=d.children();e.hide(),b.prepend(d),e.fadeIn(),this.newItemsCount=0,this.onShowNewItems(d),this.trigger("newItemsCountChanged",[0])},onShowNewItems:function(a){twttr.isT1&&this.addInlineMediaIcons(a),twttr.streams.Stream.prototype.onShowNewItems.apply(this,arguments),this.updateI18nDisplay(),this.trigger("onShowNewItems",a)},onShowOldItems:function(a){twttr.isT1&&this.addInlineMediaIcons(a),twttr.streams.Stream.prototype.onShowOldItems.apply(this,arguments),this.updateI18nDisplay(),this.trigger("onShowOldItems",a)},unshift:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));for(var b=0,c=a.length;b<c;++b)a[b].sync("for_stream",this.constructor.activityType);twttr.streams.Stream.prototype.unshift.call(this,a)},push:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));for(var b=0,c=a.length;b<c;++b)a[b].sync("for_stream",this.constructor.activityType);twttr.streams.Stream.prototype.push.call(this,a)},_getStreamErrorComponent:function(a){return a===twttr.streams.PROTECTED?new twttr.components.ProtectedUser({screen_name:this.params.screenName}):twttr.streams.Stream.prototype._getStreamErrorComponent.apply(this,arguments)},_scribeResults:function(a,b,c){var d=[],e=[];twttr.each(b,function(a){var b=[a.minPosition,a.maxPosition,a.event,a.timestamp].join("_");e.push(b),d.push(a.position||a.minPosition)});if(a=="error"||a=="initial"&&!d.length){var f={item_count:0,event_value:0,cursor_or_page:this._sinceId,referring_event:a};a=="error"&&c&&c.status_code&&(f.status_code=c.status_code),this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},f)}else a!="initial"&&this.scribbler.scribe({component:"stream",action:a},{item_count:d.length,cursor_or_page:this._sinceId});d.length&&this.scribbler.scribe({component:"stream",action:"results"},{item_ids:d,item_names:e,item_count:d.length,event_value:d.length,cursor_or_page:this._sinceId,referring_event:a})},showActivitySupplements:function(a){var b=a.closest(".stream-item");b.find(".hidden-supplement").removeClass("hidden-supplement").addClass("hidden-supplement-expanded"),b.find(".sub-stream-item-hidden").removeClass("sub-stream-item-hidden").addClass("sub-stream-item-showing"),b.find(".view-all-supplements").removeClass("show").addClass("hide")},hideActivitySupplements:function(a){var b=a.closest(".stream-item");b.find(".hidden-supplement-expanded").removeClass("hidden-supplement-expanded").addClass("hidden-supplement"),b.find(".sub-stream-item-showing").removeClass("sub-stream-item-showing").addClass("sub-stream-item-hidden"),b.find(".view-all-supplements").removeClass("hide").addClass("show")},oldShowActivitySupplements:function(a){var b=a.closest(".stream-item"),c=b.find(".sub-stream-item"),d=c.filter(".sub-stream-item-hidden"),e=b.find(".stream-item-activity"),f=c.length,g=d.length;a.removeClass("show").addClass("hide"),b.addClass("parent");var i;for(var j=f-g;j<f;++j)i=b.clone(),i.find(".view-all-supplements").remove(),i.addClass("expanded"),i.find(".activity-supplement > div").each(function(a,b){var c=$(b);a!=j?c.remove():c.removeClass("sub-stream-item-hidden")}),b.after(i)},oldHideActivitySupplements:function(a){var b=a.closest(".stream-item"),c=b.find(".stream-item-activity");b.removeClass("parent"),b.nextUntil(".stream-item:not('.expanded')").remove(),a.removeClass("hide").addClass("show")}}).click({".stream-item-activity .activity-count":function(a,b){var c=b.closest(".stream-item");return c.find(".sub-stream-item-hidden").removeClass("sub-stream-item-hidden"),c.find(".activity-secondary-supplement").show(),b.find("span").unwrap(),!1},".stream-item-activity-network .stream-item-activity-header":function(a,b){if(!twttr.isT1)return;var c=b.find(".view-all-supplements");c.get(0)&&(c.hasClass("show")?this.showActivitySupplements(c):this.hideActivitySupplements(c))},"div.js-activity .view-all-supplements":function(a,b){return twttr.isT1?b.hasClass("show")?this.showActivitySupplements(b):this.hideActivitySupplements(b):b.hasClass("show")?this.oldShowActivitySupplements(b):this.oldHideActivitySupplements(b),a.stopPropagation(),a.preventDefault(),!1},".js-activity .hidden-supplement":function(a,b){this.showActivitySupplements(b)}}),a(twttr.streams.ActivityStream)})}),provide("streams/ActivityByUserStream",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ActivityByUserStream").subclassOf(twttr.streams.ActivityStream).statics({activityType:"profile_activity"}).methods({update:function(a){twttr.API.User.find(this.params.screenName).activity(a)},_setTitle:function(a){a(_("Activity by {{screen_name}}",{screen_name:this.params.screenName}))}}),a(twttr.streams.ActivityByUserStream)})}),provide("streams/ActivityByNetworkStream",function(a){using("streams/ActivityStream").as(function(b){twttr.stream("twttr.streams.ActivityByNetworkStream").subclassOf(b.streams.ActivityStream).statics({activityType:"activity"}).methods({afterFirstSwitchingTo:function(){b.streams.ActivityStream.prototype.afterFirstSwitchingTo.apply(this,arguments)},onShowNewItems:function(a){b.streams.ActivityStream.prototype.onShowNewItems.apply(this,arguments)},onShowOldItems:function(a){b.streams.ActivityStream.prototype.onShowOldItems.apply(this,arguments)},_getEmptyStreamHtml:function(){return _("Favorites, follows, retweets, and more by people you follow will appear here.")},update:function(a){twttr.currentUser.networkActivity(a)},_setTitle:function(a){twttr.isT1?a(_("Activity")):a(_("Favorites, follows, retweets, and more by people you follow"))}}),a(twttr.streams.ActivityByNetworkStream)})}),provide("streams/ActivityOfMeStream",function(a){using().as(function(b){twttr.stream("twttr.streams.ActivityOfMeStream").subclassOf(twttr.streams.ActivityStream).mixin(twttr.mixins.newStreamItemsBar).statics({activityType:"your_activity"}).methods({itemForRender:function(a){return a.isMention?a.targetObjects.get(0):a.isReply?a.targets.get(0):a},additionalStreamItemClass:function(a){var b=twttr.streams.ActivityStream.prototype.additionalStreamItemClass.apply(this,arguments);return twttr.isT1&&(a.isReply||a.isMention)&&(b+=" expanding-stream-item"),b},itemViewClass:function(a){return a.isMention||a.isReply?twttr.views.StreamTweet:twttr.views.ActivityItem},_getEmptyStreamHtml:function(){return _("@mentions, favorites, follows and more on you and your Tweets will appear here.")},_afterItemsRendered:function(a){twttr.helpers.ellipsify(a.find(".activity-truncated-tweet .tweet-row"))},onShowNewItems:function(a){twttr.streams.ActivityStream.prototype.onShowNewItems.apply(this,arguments),this.$find(".js-new-tweets-bar").remove(),this._afterItemsRendered(a)},onShowOldItems:function(a){twttr.streams.ActivityStream.prototype.onShowOldItems.apply(this,arguments),this._afterItemsRendered(a)},update:function(a){!twttr.isT1&&$.cookie("should_filter_mentions")&&(a.filter=["mention","reply"]),twttr.currentUser.inboundActivity(a)},newStreamItemsBarPhrase:function(a){return a==1?_("1 New interaction"):_("{{count}} New interactions",{count:a})},_setTitle:function(a){twttr.isT1?a(_("Interactions")):a((new twttr.views.ActivityOfMeStreamTitle({})).html())},showNewItems:function(a,b){b?this.showNewStreamItemsBar(a):this._showNewItems()},afterSwitchingToAgain:function(a){twttr.streams.ActivityStream.prototype.afterSwitchingToAgain.apply(this,arguments),this.afterSwitchingTo()},afterFirstSwitchingTo:function(a){twttr.streams.ActivityStream.prototype.afterFirstSwitchingTo.apply(this,arguments);var b=this;this._attachedTweetBarEvent||(this._attachedTweetBarEvent=!0,this.dom().delegate(".js-new-tweets-bar","click",function(){b._showNewItems()})),this.afterSwitchingTo()},afterSwitchingTo:function(){this.updateI18nDisplay();var a=this,b=this.$node.closest(".stream-manager").find("#show_mentions_only"),c=!!$.cookie("should_filter_mentions");b.attr("checked",c?"checked":null),setTimeout(function(){b.one("click",function(){return c=!c,$.cookie("should_filter_mentions",c||null,{expires:3650}),b.attr("checked",c?"checked":null),trackClient({component:"mentions_filter",action:c?"select":"deselect"}),a.trigger("reloadCurrentStream",[a.constructor]),!1})},0)}}),a(twttr.streams.ActivityOfMeStream)})}),provide("streams/AllSubscriptions",function(a){using("_","streams/ListStream").as(function(b,_){twttr.stream("twttr.streams.AllSubscriptions",function(a,b){twttr.streams.ListStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"allLists",_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!1))},_setHeaderButton:function(a,b){twttr.helpers.isCurrentUser(b.screenName)&&a(new twttr.views.CreateListButton)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following any lists yet."):_("@{{screen_name}} isn't following any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"create follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"delete unfollow",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}),a()})}),provide("streams/AllSubscriptionsUser",function(a){using("_","streams/AllSubscriptions").as(function(b,_){twttr.stream("twttr.streams.AllSubscriptionsUser",function(a,b){twttr.streams.AllSubscriptions.apply(this,arguments)}).subclassOf(twttr.streams.AllSubscriptions).methods({_setViewToggler:function(a,b){a(new twttr.views.ProfileListsStreamViewToggler(!0,{screen_name:b.screenName}))}}),a()})}),provide("media",function(a){using().as(function(b){twttr.provide("twttr.media");var c={};twttr.aug(twttr.media,{match:function(a){if(twttr.is.nil(a))return;var b,d,e;return(d=c[a])?d.mediaType:($.each(twttr.media.types,function(b,f){if(!f.isEnabled())return!0;$.each(f.matchers,function(b,g){d=twttr.is.regex(g)?a.match(g):g(a);if(d)return c[a]={mediaType:f,matchLabel:b,match:RegExp.$1},e=f,!1});if(d)return!1}),e)},matchInstance:function(a,b){var d=this.match(a);if(d)return new d({url:a,matchLabel:c[a].matchLabel,slug:c[a].match,tweet:b})},expand:function(a,b){twttr.urlResolver.expand(a,function(a){b(a)})},mediaTypes:function(a,b){var c=[],d={},e=function(a,b){var e=twttr.media.match(b);if(e){d[b]=e;return}c.push(a)};$.each(a,e);if(c.length===0){b(d);return}twttr.media.expand(c,function(a){$.each(a,e),b(d)})},extractUrls:function(a){var b={};return a.entities?(a.entities.urls&&$.each(a.entities.urls,function(a,c){c.url&&(b[c.url]=c.expanded_url||c.url)}),twttr.media.extractMedia(a,b),b):($.each(twttr.txt.extractUrls(a.text),function(a,c){b[c]||(b[c]=c)}),b)},extractMedia:function(a,b){return a.entities&&a.entities.media&&$.each(a.entities.media,function(a,c){c.type&&c.type=="photo"&&c.display_url&&(b[c.display_url]=c.display_url)}),b},hasMedia:function(a){var b=a.entities&&a.entities.media&&a.entities.media.length,c=twttr.Cards.prototype.hasCards(a);return b||c},resolveImageUrl:function(a,b,c,d){var e=this;c=c||{};var f=twttr.media.matchInstance(a,c.tweet),g=c.error?c.error:$.noop;if(f&&f.getImageURL){if(c.filter&&c.filter(f)!==!0){g("your filter function filtered out this media");return}f.getImageURL(b,function(a){!twttr.is.nil(a)&&twttr.is.def(a)?c.success(a):g("getImageUrl did not return a resolvedURL")},d)}else g("url did not match any media types")},iconType:function(a,b){var d=new b({url:a,matchLabel:c[a].matchLabel,slug:c[a].match});return d.icon()},getViewMediaCookie:function(){var a=$.cookie("show_all_inline_media");return!!a},setViewMediaCookie:function(){$.cookie("show_all_inline_media",!0)},matchCache:c}),a(twttr.media)})}),provide("media/Iconifier",function(a){using("media").as(function(b){twttr.provide("twttr.media");var c=twttr.klass("twttr.media.Iconifier",function(a,b){var c=this,d=$(a);d.attr("media",!0),twttr.isT1&&c.iconifyGeo(d),twttr.decider.isAvailable("platform_enable_cards")&&(c.iconifyNativeMedia(d.find(".js-stream-tweet.has-native-media")),c.iconifyCards(d.find(".js-stream-tweet.has-cards:not(.iconified)"))),c.iconify(d.find(".js-stream-tweet a.twitter-timeline-link").get(),!0,b)});c.methods({expand:function(a,c){var d=[],e=[];$.each(a,function(a,b){d.push(b.href)}),b.media.expand(d,function(b){var d;$.each(a,function(a,c){d=b[c.href],d&&(c.setAttribute("data-ultimate-url",d),e.push(c))}),c(e)})},iconifyGeo:function(a){var b=this,c=a.find('div.js-stream-tweet[data-geo="true"] span.js-icon-container'),d=(new twttr.views.InlineMediaIcon({is_geo:!0})).html();c.each(function(){var a=$(this);a.append(d),b.updateHandleText(a,"geo")})},iconifyNativeMedia:function(a){var b=this;a.each(function(){var a=$(this),c=a.find("span.js-icon-container"),d="photo";b.updateHandleText(a,d),b.addSmallIcon(c,d,d),a.addClass("iconified")})},iconifyCards:function(a){var b=this;a.each(function(){var a=$(this),c=a.find("span.js-icon-container"),d=a.data("card-type");b.updateHandleText(a,d),b.addSmallIcon(c,d,d),a.addClass("iconified")})},preloadTwimgs:function(a){if(twttr.decider.isAvailable("phoenix_preload_twimgs")){var b=a.closest("div.js-stream-tweet").attr("data-item-id");twttr.API.Status.find(b,function(b){b.entities&&b.entities.media&&twttr.each(b.entities.media,function(b){var c=new Image;c.src=twttr.isSSL()?b.media_url_https:b.media_url,a.trigger("preloadedImage",[c])})})}},iconify:function(a,c,d){var e=this,f=[];$.each(a,function(a,d){var g=$(d),i=g.closest("div.js-stream-tweet"),j=d.getAttribute("data-ultimate-url")||d.getAttribute("data-expanded-url")||d.href,k=b.media.match(j);if(twttr.abdecider.choose("long_tweet_urls_248")==="long"){var l=j.replace(/^https?:\/\//,"");l.length>32&&(l=l.slice(0,29)+"..."),g.html(l)}if(k||!c){var m=0;switch(twttr.abdecider.choose("long_tweet_urls_2_259")){case"p25":m=.25;break;case"p50":m=.5;break;case"p75":m=.75;break;case"p100":m=1;break;case"control":default:m=0}if(m&&Math.random()<=m){var l=j.replace(/^https?:\/\//,"");l.length>32&&(l=l.slice(0,29)+"..."),g.attr("data-long_tweet_urls_2_259","expanded"),g.html(l)}}if(!k){f.push(d);return}var n=!!g.parents().filter(function(a,b){return $(b).hasClass("js-old-content")}).length;if(n)return;g.data("media-type",k);var o=b.media.iconType(j,k),p=i.find(".js-icon-container");p.find('[data-media-class="'+o+'"]').length===0&&(!g.closest(".js-stream-tweet:not(.iconified)").length||(e.addSmallIcon(p,o,k._name.toLowerCase()),e.updateHandleText(p,o)),k._name.toLowerCase()==="CopiedTwimg"&&e.preloadTwimgs(p))}),c&&f.length>0?this.expand(f,function(a){e.iconify(a,!1,d)}):d&&d()},addSmallIcon:function(a,b,c){(new twttr.views.InlineMediaIcon({icon:b,media_name:c,is_image:b==="photo",is_video:b==="video"||b==="player",is_audio:b==="song"||b==="album",is_summary:b==="summary",is_embed:b==="generic"||b==="software"||b==="tweet"})).render(a,"append")},updateHandleText:function(a,b){if(!twttr.decider.isExpando())return;var c=a.data("placename");c?(c=_("from {{placename}}",{placename:c}),c=[c,c]):c=[_("View location"),_("Hide location")];var d={photo:[_("View photo"),_("Hide photo")],video:[_("View video"),_("Hide video")],generic:[_("View media"),_("Hide media")],song:[_("View song"),_("Hide song")],album:[_("View album"),_("Hide album")],software:[_("View app"),_("Hide app")],tweet:[_("View tweet"),_("Hide tweet")],geo:c,player:[_("View media"),_("Hide media")],summary:[_("View summary"),_("Hide summary")]}[b],e="tweet_anatomy_hide_view_179",f=twttr.abdecider.choose(e);f!=="hide"&&(f==="always"?(d||(d=[_("View details"),_("Hide details")]),d&&a.show().parent().find("span.js-view-details").html(d[0]).end().find("span.js-hide-details").html(d[1])):d&&a.show().parent().find("span.js-view-details").html(d[0]).end().find("span.js-hide-details").html(d[1]))}}),a(c)})}),provide("media/Embedder",function(a){using("media").as(function(b){var c=twttr.klass("twttr.media.Embedder",function(a,b){this.tweet=a,this.options=b||{},this.options.preProcess=this.options.preProcess||function(a,b){b()},this.options.postProcess=this.options.postProcess||function(){},this.options.beforeRender=this.options.beforeRender||function(a,b){b({shouldRender:!0})},this.options.afterRender=this.options.afterRender||function(){}});c.mixin(twttr.mixins.tweetFlagging),c.methods({expand:function(a,c){var d=[];b.media.expand(a,function(a){$.each(a,function(a,b){d.push(b)}),c(d)})},render:function(a){var c=this,d=twttr.Cards.prototype;if(d.hasCardPhotoEntities(this.tweet))$(this.tweet.entities.media).each(function(a,b){c.embed(b.url,twttr.media.types.nativePhoto,b)});else if(d.hasPhotos(this.tweet))c.embed(this.tweet.cards.photos[0].url,twttr.media.types.photo,this.tweet.cards);else if(d.hasPlayers(this.tweet))c.embed(this.tweet.cards.players[0].url,twttr.media.types.player,this.tweet.cards);else if(d.hasSummaries(this.tweet))c.embed(this.tweet.cards.summaries[0].url,twttr.media.types.summary,this.tweet.cards);else{var e=b.media.extractUrls(this.tweet),f=this.embedMatchedAndReturnUnmatched(e);f.length&&this.expand(f,function(a){c.embedMatchedAndReturnUnmatched(a)})}a&&a()},embedMatchedAndReturnUnmatched:function(a){var c=this,d=[];return $.each(a,function(a,e){var f=b.media.match(e);f?c.embed(e,f):d.push(a)}),d},embedThumbnail:function(a){var c=this,d=b.media.match(a);if(!d)return;var e=new d({url:a,matchLabel:b.media.matchCache[a].matchLabel,slug:b.media.matchCache[a].match,size:this.options.size});e.process(function(){e.renderThumbnail(c.options.DOMContainer)})},embed:function(a,c,d){var e=this,f;d?f=new c({url:a,tweet:this.tweet,mediaEntity:d}):f=new c({url:a,matchLabel:b.media.matchCache[a].matchLabel,slug:b.media.matchCache[a].match,tweet:this.tweet}),e.options.preProcess(f,function(b){f.process(function(){e.options.postProcess(f,b||{}),e.options.beforeRender(f,function(b){var c=(new twttr.views.MediaTypeContainer({url:a,media_type:f.constructor._name,media_type_class:f.constructor._name.toLowerCase()})).$html(),d=c.data("url-id");e.options.DOMContainer.find('div[data-url-id="'+d+'"]').remove().end().append(c),f.render(c);if(!f.data||!f.data.is_card)e.tweetFlaggable(e.tweet)&&c.append(f.flaggable()),c.append(f.attribution());setTimeout(function(){c.closest(".tweet").delegate(".flaggable","click",function(a){e.flagLinkClicked(a,e.tweet)})},0),e.options.afterRender(f,b||{}),twttr.images.addPrivacyCover(c.find("a img"))})},b||{},d)})}}),a(c)})}),provide("media/mediaType",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.media.MediaType",function(a){this.url=a.url,this.matchLabel=a.matchLabel,this.slug=a.slug,this.tweet=a.tweet||null,this.options=a||{},this.location=new b.util.Location(this.url),this.data={}}),twttr.mediaType=function(a,c){var d="twttr.media.types."+a,e=twttr.klass(d,function(){twttr.media.MediaType.apply(this,arguments)});e.subclassOf(twttr.media.MediaType).statics({partnerName:a,domain:c.domain||"",attributionName:c.attributionName||a,skipAttributionInDiscovery:c.skipAttributionInDiscovery||!1,title:c.title||null,_icon:c.icon||"generic",deciderKey:c.deciderKey||null,screenName:c.screenName||null,aspectRatio:c.aspectRatio||b.constants.videos.fullscreen,height:c.height,ssl:c.ssl||!1,isEnabled:function(){return this.deciderKey?twttr.decider&&twttr.decider.isAvailable(this.deciderKey):!0},attributionTemplate:c.attributionTemplate||"MediaAttribution",validActions:$.extend({resizeFrame:!0},c.validActions),enableAPI:c.enableAPI||!1,addMatchers:function(a){for(var c in a)this.matchers[c]=b.util.regexSupplant(a[c])},flagActionTemplate:c.flagActionTemplate||"<span class='flag-container'><a href='#' class='flaggable' alternateText='"+_("Un-flag this media")+"'>"+_("Flag this media")+"</a></span>"}).methods({process:c.process||function(){},content:c.content||function(){},getImageURL:c.getImageURL||function(){},partnerName:a,metadata:function(a){if(twttr.is.fn(c.metadata))return c.metadata.apply(this,[a])},calcHeight:function(a,b){b||(b=this.constructor.aspectRatio);var c=parseInt(b.split(":")[0],10),d=parseInt(b.split(":")[1],10),e=30;return Math.round(a*(d/c))+e},resizeHtmlEmbed:function(a,b,c,d){if(a&&b&&b.maxwidth&&b.maxwidth<c){var e=Math.round(b.maxwidth*d/c);a=a.replace(new RegExp('width=("?)'+c+"(?=\\D|$)","g"),"width=$1"+b.maxwidth).replace(new RegExp('height=("?)'+d+"(?=\\D|$)","g"),"height=$1"+e)}return a},useOpaqueModeForFlash:function(a){return a.replace(/(<\/object>)/,'<param name="wmode" value="opaque">$1').replace(/(<embed .*?)(\/?>)/,'$1 wmode="opaque"$2')},icon:function(){return twttr.is.fn(this.constructor._icon)?this.constructor._icon.call(this,this.url):this.constructor._icon},flaggable:function(){return!twttr.loggedIn||!c.flaggable||!twttr.decider.isAvailable("media_flagging")?!1:$(Mustache.to_html(this.constructor.flagActionTemplate))},attribution:function(){return c.attribution&&twttr.is.fn(c.attribution)?c.attribution.call(this):(new twttr.views[this.constructor.attributionTemplate]({url:this.domainUrl(),icon_url:this.iconUrl(),title:this.data.attribution_title||this.constructor.title||this.constructor._name,media_type:this.constructor._name})).html()},iconUrl:function(){return this.data.attribution_icon||twttr.assets.path("/images/partner-favicons/"+this.constructor._name+".png")},domainUrl:function(){return this.data.attribution_url||this.constructor.domain},attributionName:function(){return this.constructor.attributionName},hasAttributionInDiscovery:function(){return!this.constructor.skipAttributionInDiscovery},render:function(a){if(c.render&&twttr.is.fn(c.render))return c.render.call(this,a);var b=this.content();if($.browser.msie&&$.browser.version<=8)$(a).html(b);else{b="<div class='tweet-media'>"+b+"</div>";var d=new twttr.platform.SandboxedApplication(this.constructor,{tweet:this.tweet,originalUrl:this.url}),e={DOMContainer:a,htmlContent:b,height:this.data.height,width:this.data.width,security:this.constructor.ssl};d.run(e)}},content:function(){return c.content&&twttr.is.fn(c.content)?c.content.call(this):""},renderThumbnail:function(a){var b=this;this.metadata(function(c){c.alt=b.constructor.title;var d=Mustache.to_html('<img src="{{image}}" alt="{{alt}}" title="{{title}}" />',c);$(a).append(d)})},renderIframe:function(a,b){t="<iframe src='{{url}}' width='{{width}}' height='{{height}}'></iframe>",$(a).append(Mustache.to_html(t,$.extend({url:b},this.data)))},renderEmbeddedApplication:function(a,b){var c=new twttr.platform.EmbeddedApplication(this.constructor,{tweet:this.tweet,originalUrl:this.url}),d={DOMContainer:a,height:this.data.height,width:this.data.width};c.run(b,d)}}),e.matchers=c.matchers||{};for(var f in e.matchers)(function(){var a=f;e.matchers[a]=b.util.regexSupplant(e.matchers[a])})();return e},a(twttr.mediaType)})}),provide("media/expandodo",function(a){using("util","constants").as(function(b){function e(a){return a.expanded_url.replace(/^https?:\/\//,"//")+"/large"}function f(a){a&&(a.profile_path="/"+a.screen_name)}function g(a){var b=["players","summaries","photos"],c,d,e,g;for(c=0;c<b.length;c++){g=a[b[c]];if(g&&g.length)for(d=0;d<g.length;d++)e=g[d],f(e.author_user),f(e.site_user)}}function i(a,b,c){this.data=c,this.data.is_card=!0,g(this.data),a()}function j(a,b,c){var d=this;c&&c.source_status_id_str?twttr.API.Status.find(c.source_status_id_str,function(e){k(c,e.user,function(c){i.apply(d,[a,b,c])})}):k(c,!1,function(c){i.apply(d,[a,b,c])})}function k(a,b,f){var g=l(a.sizes.medium.w,a.sizes.medium.h,d,c),i={photos:[{url:e(a),title:!1,description:!1,images:{web:{image_url:a.media_url_https+":medium",width:g.width,height:g.height}},twimg_attribution:!0,permalink_continuity:!0}]};b&&(i.photos[0].author_user={id_str:b.id,screen_name:b.screenName,name:b.name,profile_image_url:b.profileImageUrl,profile_image_url_https:b.profileImageUrlHttps}),f(i)}function l(a,b,c,d){return b>=a&&b>d?(a*=d/b,b=d):a>b&&a>c&&(b*=c/a,a=c),{width:Math.ceil(a),height:Math.ceil(b)}}function m(a){$(a).append(Mustache.to_html(twttr.templates.cards_base,this.data,twttr.templates))}var c=375,d=435;twttr.mediaType("photo",{icon:"photo",process:i,render:m}),twttr.mediaType("nativePhoto",{icon:"photo",attribute:!1,process:j,render:m}),twttr.mediaType("summary",{icon:"summary",process:i,render:m}),twttr.mediaType("player",{icon:"player",process:i,render:m}),a()})}),provide("platform/BaseApplication",function(a){using("_").as(function(b,_){(function(){function a(a){var b=twttr.platform.runningApplications[a];b&&(b.stop(),delete twttr.platform.runningApplication[a])}twttr.platform||(twttr.platform={}),twttr.platform.application_types={embedded:"embedded"},twttr.platform.runningApplications={};var b=50,c=36e5,d={trends:!0,"geo/nearby_places":!0,"statuses/retweets/:id":!0,"followers/ids":!0,"geo/id/:id":!0,"geo/search":!0,"lists/statuses":!0,"users/suggestions":!0,"friendships/show":!0,"statuses/show":!0,"trends/current":!0,"geo/similar_places":!0,"statuses/user_timeline":!0,"friends/ids":!0,"trends/:woeid":!0,"statuses/followers":!0,"statuses/friends":!0,"statuses/public_timeline":!0,"users/show":!0},e={"users/search":!0,"users/typeahead":!0,":user/lists/subscriptions":!0,"statuses/network_timeline":!0,"statuses/friends_timeline":!0,":user/:list_id/members":!0,":user/lists/memberships":!0,"statuses/:id/retweeted_by/ids":!0,":user/lists":!0,"statuses/mentions":!0,"geo/reverse_geocode":!0,"friendships/exists":!0,":user/:list_id/members/:id":!0,search:!0,"statuses/retweeted_to_me":!0,"statuses/retweets_of_me":!0,"statuses/retweeted_by_me":!0,":user/:list_id/subscribers":!0,":user/:list_id/subscribers/:id":!0,"favorites/:id":!0,"statuses/:id/retweeted_by":!0,"account/verify_credentials":!0,"users/lookup":!0,"trends/weekly":!0,"trends/daily":!0,"statuses/home_timeline":!0,"lists/show":!0};twttr.platform.events={resize:function(){var a=this;$(window).bind("resize."+this.config._name,function(){var b=$("div.details-pane.opened");b.length!==0&&a.socket.trigger("resize",b.width())})}},twttr.platform.interfaceActions={openTab:function(a){window.open(a.url,"_blank")},openProfile:function(a,b){twttr.app.currentPage().send("loadUserInDetailsPane",[this.config.screenName,{}],function(){a(!0)},function(){b("Profile pane not available or no registered screen name")})},tweet:function(a,b,c){(new twttr.widget.TweetDialog({defaultContent:a,draggable:!0,template:{title:_("What’s happening?")},origin:"new-tweet-titlebar-button"})).open().focus()},notify:function(a,b){twttr.Notifications.notify(a.type,a.subject,a.message,a.icon,function(){b(a)})},resizeFrame:function(a){this.DOMContainer.firstChild.style.height=a+"px"},bind:function(a,b,c){var d=twttr.platform.events[a];d?(d.call(this),b(!0)):c("You tried to bind to an event that is not bindable")},unbind:function(a,b,c){var d=twttr.platform.events[a];d?($(window).unbind(a+"."+this.config._name),b(!0)):c("You tried to unbind from an event that is not bindable")}};var f=0,g=twttr.klass("twttr.platform.BaseApplication",function(a){this.limiter=0,this.interval=(new Date).getTime(),this.socket=null,this.config=a,this.minimized=!1,this.id=++f});g.methods({run:function(a,b){var c=this;this.options=b||{},this.url=a;var d=b.DOMContainer||$(document.body);d instanceof jQuery&&(this.DOMContainer=d[0]),this.socket=new easyXDM.Rpc({remote:this.url,container:this.DOMContainer,props:{width:b.width||"100%",height:b.height||0},onReady:function(){twttr.platform.runningApplications[c.id]=c,c.limiter=0,c.interval=(new Date).getTime();var a=c.initialData();c.socket.initialize(a),b.loaded&&b.loaded.call(c)}},{local:{api:twttr.bind(this,this.api),ui:twttr.bind(this,this.ui),log:twttr.bind(this,this.log)},remote:{trigger:{},initialize:{}}})},initialData:function(){var a={},b=$("div.details-pane.opened");return b.length!==0&&(a.size=b.width()),twttr.currentUser&&twttr.currentUser.profileLinkColor&&(a.styles=[["a",["color","#"+twttr.currentUser.profileLinkColor]]]),a},stop:function(){this.socket.destroy()},maximize:function(){this.minimized&&(this.minimized=!1,this.run(this.url,this.options))},minimize:function(){this.stop(),this.attribution=$(this.DOMContainer).find(".media-attribution").detach(),this.minimized=!0},isRateLimited:function(){var a=(new Date).getTime();return a-this.interval>c?(this.limiter=0,this.interval=a,!1):this.limiter>=b},isPermitted:function(){return!0},isProtectedEndpoint:function(a){return twttr.currentUser["protected"]&&!this.isPermitted(this.socket.origin)?!0:!d[a]&&!e[a]?!0:!1},log:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b=b||{},c=c||$.noop,d=d||$.noop;if(this.minimized)return d("You cannot log information while your application is minimized");scribble("partner_event",{partner:this.config._name,origin:this.socket.origin,eventName:a,data:b}),c(!0)},api:function(a,b,c,d){d=d||$.noop;if(this.minimized)return d("You cannot access the API while your application is minimized");if(!this.config.enableAPI)return d("You do not have API Access");if(!!this.isRateLimited())return d("You have been rate-limited.");this.limiter++;if(this.isProtectedEndpoint(a))return d("You do not have access to that endpoint.");twttr.is.fn(b)&&(d=c,c=b,b=[]),twttr.API.util.makeRemoteRequest(a,b,{success:function(a){c&&c(a)},error:function(a){d&&d(a)}})},ui:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b=b||{},c=c||$.noop,d=d||$.noop;if(!this.config.validActions[a])return d("This is not a valid UI action.");if(this.minimized)return d("You cannot access interface components while your application is minimized");scribble("partner_ui_action",{partner:this.config._name,origin:this.socket.origin,actionName:a,data:b}),twttr.platform.interfaceActions[a].apply(this,[b,c,d])}})})(),a(twttr.platform.BaseApplication)})}),provide("platform/EmbeddedApplication",function(a){using().as(function(b){var c=twttr.klass("twttr.platform.EmbeddedApplication",function(a,b){b=b||{},twttr.platform.BaseApplication.apply(this,arguments),this.tweet=b.tweet||null,this.originalUrl=b.originalUrl||null,this.applicationType=twttr.platform.application_types.embedded});c.subclassOf(twttr.platform.BaseApplication),c.methods({initialData:function(){var a=twttr.platform.BaseApplication.prototype.initialData.call(this);return a},log:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b.original_url=this.originalUrl,twttr.platform.BaseApplication.prototype.log.apply(this,arguments)}}),a(c)})}),provide("platform/SandboxedApplication",function(a){using().as(function(b){twttr.klass("twttr.platform.SandboxedApplication",function(a,b){twttr.platform.EmbeddedApplication.apply(this,arguments)}).subclassOf(twttr.platform.EmbeddedApplication).statics({remoteUrl:function(a){var b=twttr.domains.local.match(/localhost/),c="/details_pane_content_sandbox.html";return b?"http://localhost:3000"+c:twttr.assets.path(c,{isSSL:twttr.isSSL()&&a})}}).methods({run:function(a){twttr.platform.EmbeddedApplication.prototype.run.call(this,twttr.platform.SandboxedApplication.remoteUrl($.browser.msie||a.security),a)},initialData:function(){var a=twttr.platform.EmbeddedApplication.prototype.initialData.call(this);return twttr.currentUser&&twttr.currentUser.profileLinkColor&&a.styles.push([".sandboxed-media a",["color","#"+twttr.currentUser.profileLinkColor]]),$.extend({},a,{htmlContent:this.options.htmlContent})}}),a(twttr.platform.SandboxedApplication)})}),provide("sandboxedAjax",function(a){using().as(function(b){twttr.klass("twttr.AjaxSandboxer",function(){this._nextRequestId=0,this._requests={},this._sockets=[null,null]}).statics({TIMEOUT:5e3}).methods({send:function(a){a.timeout||(a.timeout=twttr.AjaxSandboxer.TIMEOUT),this._useSandbox()?this._sendWithSandbox(a):this._sendWithoutSandbox(a)},_useSandbox:function(){return twttr.isSSL()},_sendWithSandbox:function(a){security=!!(a.url.match(/^https:/)||twttr.isSSL()&&a.url.match(/^\/\//)),$.browser.msie&&(security=1),index=security?0:1,this._sockets[index]||(this._sockets[index]=this._generateSocket(this._remoteUrl(security)));var b=this._generateSandboxRequest(a);this._sockets[index].postMessage(JSON.stringify(b))},_sendWithoutSandbox:function(a){$.ajax(a)},_generateSandboxRequest:function(a){var b=++this._nextRequestId;a=twttr.merge({},a);var c={id:b,callbacks:{success:a.success,error:a.error,before:a.before,complete:a.complete},request:{id:b,data:a}};return delete a.success,delete a.error,delete a.complete,delete a.before,this._requests[b]=c,c.request},_remoteUrl:function(a){var b="/jsonp_sandbox.html";return twttr.domains.local.match(/localhost/)?"http://localhost:3000"+b:twttr.assets.path(b,{isSSL:a})},_generateSocket:function(a){var b=this;return new easyXDM.Socket({remote:a,onMessage:function(a,c){var d=JSON.parse(a),e=b._requests[d.id];e&&e.callbacks[d.callbackName]&&e.callbacks[d.callbackName].apply(null,d.callbackArgs),d.callbackName==="complete"&&delete b._requests[d.id]}})}}),twttr.sandboxedAjax=new twttr.AjaxSandboxer,a(twttr.sandboxedAjax)})}),provide("media/types",function(a){using("util","constants").as(function(b){function c(a){return twttr.isSSL()?a.replace(/^http:/,"https:"):a}twttr.provide("twttr.regexps",{protocol:/(?:https?\:\/\/)/,protocol_no_ssl:/(?:http\:\/\/)/,optional_protocol:/(?:(?:https?\:\/\/)?(?:www\.)?)/,protocol_subdomain:/(?:(?:https?\:\/\/)?(?:[\w\-]+\.))/,optional_protocol_subdomain:/(?:(?:https?\:\/\/)?(?:[\w\-]+\.)?)/,wildcard:/[a-zA-Z0-9_#\.\-\?\&\=\/]+/,itunes_protocol:/(?:https?\:\/\/)?(?:[a-z]\.)?itunes\.apple\.com(?:\/[a-z][a-z])?/}),twttr.mediaType("Youtube",{title:"YouTube",icon:"video",domain:"//www.youtube.com",ssl:!0,flaggable:!0,height:359,matchers:{tinyUrl:/^#{optional_protocol}?youtu\.be\/([a-zA-Z0-9_\-\?\&\=\/]+)/i,standardUrl:/^#{optional_protocol}?youtube\.com\/watch[a-zA-Z0-9_\-\?\&\=\/]+/i},process:function(a,b){this.data.width=b&&b.maxwidth||390,this.data.height=b&&b.maxwidth?this.calcHeight(b.maxwidth):307,this.url.match(this.constructor.matchers.tinyUrl)?(this.data.id=this.location.pathname.replace(/\//g,""),a()):this.location.search.match(/[\?\&]v\=([\w\-]+)(?:\&|$)/)&&(this.data.id=this.location.query("v"),a())},metadata:function(a){var c={image:b.util.supplant("//img.youtube.com/vi/{id}/0.jpg",this.data)};a(c)},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},render:function(a){this.renderIframe(a,twttr.proto+"://www.youtube.com/embed/"+this.data.id+"?wmode=opaque")}}),twttr.mediaType("Twitter",{icon:"tweet",domain:"//twitter.com",ssl:!0,skipAttributionInDiscovery:!0,matchers:{permalink:/^#{optional_protocol}?twitter\.com\/(?:#!?\/)?\w{1,20}\/status\/(\d+)[\/]?$/i},process:function(a){var b=this;twttr.API.Status.find(this.slug,function(c){b.data.tweet=c,twttr.isT1?using("//platform.twitter.com/js/vendor/twt/dist/twt.all.min.js","css!//platform.twitter.com/twt/twt.css",function(){if(!window.twt)return;for(var c=twttr.languages.length;c--;)if(twttr.languages[c].current){twt.settings.lang=twttr.languages[c].code;break}var d=twt.tweet(b.data.tweet.attributes);b.tweetHtml=d.html(),a()}).load():a()})},render:function(a){if(!twttr.isT1)$(a).append((new twttr.views.EmbeddedTweet(this.data.tweet)).html());else{var b=this;$(a).append(Mustache.to_html("<div class='tweet-embed'>{{{tweet}}}</div>",{tweet:b.tweetHtml}))}}}),twttr.mediaType("CopiedTwimg",{icon:"photo",domain:"//twitter.com",ssl:!0,flaggable:!0,deciderKey:"photo_copy_paste_inception",skipAttributionInDiscovery:!0,attributionTemplate:"PhotobucketAttribution",matchers:{media:/^#{optional_protocol}?twitter\.com\/(?:#!?\/)?\w{1,20}\/status\/(\d+)\/photo\/\d*$/i},getImageURL:function(){twttr.media.types.Twimg.prototype.getImageURL.apply(this,arguments)},metadata:function(){twttr.media.types.Twimg.prototype.metadata.apply(this,arguments)},process:function(a){var b=this;twttr.API.Status.find(this.slug,function(c){b.data.tweet=c,c.entities&&c.entities.media&&$.each(c.entities.media,function(a,c){if(c.expanded_url.indexOf(b.slug)>-1)return b.foundMedia=c,!1});var d;twttr.isSSL()?d=b.foundMedia.media_url_https:d=b.foundMedia.media_url,b.data.src=d,b.data.url=b.foundMedia.expanded_url,b.data.name=b.constructor._name,a()})},render:function(a){var b=this.data.tweet;if(!this.foundMedia)return;var c={name:"copied-twimg",time_ago:twttr.helpers.timeAgo(twttr.helpers.parseDateString(b.createdAt),!0),url:this.foundMedia.url,media_url:twttr.isSSL()?this.foundMedia.media_url_https:this.foundMedia.media_url,screen_name:b.user.screenName},d=$(a);d.append((new twttr.views.CopiedTwimg(c)).html()),d.find(".inline-media-image img").bind("load",function(){$(this).closest(".media-instance-container").width(this.width)}),twttr.app.isOnPage("permalink")&&d.find(".user-profile-link").click(function(){return twttr.router.routeTo(twttr.router.profilePath({screen_name:$(this).data("screen-name")})),!1})}}),twttr.mediaType("Twimg",{icon:"photo",domain:"//twitter.com",attributionName:"Twitter",flaggable:!0,ssl:!0,skipAttributionInDiscovery:!0,matchers:{twimg:/^#{optional_protocol}?p\.twimg\.com\/[a-zA-Z0-9_-]+\.(?:jpg|png|gif)$/i,media:/^#{optional_protocol}?pic\.twitter\.com\/[a-zA-Z0-9]+$/i},attributionTemplate:"PhotobucketAttribution",getImageURL:function(a,c){var d=this;this.process(function(){d.metadata(function(d){if(d&&d.image){var e=d.image;a==b.constants.imageSizes.small?e+=":thumb":a==b.constants.imageSizes.large&&(e+=":large"),c(e)}else c(null)})})},metadata:function(a){a({image:this.data.src,name:this.data.name,expandedUrl:this.data.url})},process:function(a,b){var d=twttr.media.types.Twimg.matchers,e=this,f,g;if(this.url.match(d.twimg))this.data.src=c(this.url),this.data.url=c(this.url),this.data.displayUrl=this.url,this.data.name=this.constructor._name;else{if(!this.tweet||!this.tweet.entities.media){a();return}var i=$.map(this.tweet.entities.media,function(a){return a.display_url});if($.inArray(this.url,i)<0){a();return}$.each(this.tweet.entities.media,function(){if(this.display_url==e.url){g=this;return}});if(!g){a();return}twttr.isSSL()?f=g.media_url_https:f=g.media_url,this.data.src=f,this.data.url=b&&b.linkLarge===!0?g.expanded_url+"/large":g.url,this.data.displayUrl=g.display_url,this.data.name=this.constructor._name}a()},render:function(a){var b='<div class="twimg">                <a class="inline-media-image" data-inline-type="{{name}}" href="{{url}}" target="_blank" title="{{displayUrl}}">                  <img src="{{src}}" alt="{{displayUrl}}"/>                 </a>              </div>';$(a).append(Mustache.to_html(b,this.data))}}),twttr.mediaType("Ustream",{icon:"video",domain:"http://ustream.tv",ssl:!1,flaggable:!0,matchers:{recorded:/^#{optional_protocol}?ustream\.tv\/(recorded\/(?:\d+))/i,channel:/^#{optional_protocol}?ustream\.tv\/(channel\/(?:[\w\-]+)\/?)/i},metadata:function(a){var b=null;this.data&&this.data.imageUrl&&this.data.imageUrl.small&&(b=this.data.imageUrl.small),a({title:this.data.title,description:this.data.description?twttr.helpers.truncate(this.data.description,255,"..."):"",image:b})},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){b(a.image)})})},process:function(a,b){var c=this;this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),(this.slug.match(this.constructor.re.channel)||this.slug.match(this.constructor.re.video))&&twttr.sandboxedAjax.send({url:"http://api.ustream.tv/json/channel/"+RegExp.$1+"/getInfo",dataType:"jsonp",data:{key:this.constructor.API_KEY,maxwidth:this.data.width},success:function(b){b!==null&&(c.data.type="channel",c.data.embed=c.useOpaqueModeForFlash(b.embedTag),c.data.imageUrl=b.imageUrl),a()}})},content:function(){return this.data.type==="channel"?this.data.embed:Mustache.to_html(this.constructor.templates[this.data.type],this.data)}}).statics({API_KEY:"12ab548e85128e0d3182ba3a346c3428",re:{video:/^recorded\/(\d+)/,channel:/^channel\/([\w\-]+)\/?/},templates:{video:'        <object width="{{width}}" height="{{height}}">          <param name="flashvars" value="autoplay=false&amp;vid={{videoId}}&amp;"/>          <param name="allowfullscreen" value="true"/>          <param name="allowscriptaccess" value="always"/>          <param name="wmode" value="opaque"/>          <param name="src" value="http://www.ustream.tv/flash/video/{{videoId}}"/>          <embed            flashvars="loc=%2F&amp;autoplay=false&amp;vid={{videoId}}&amp;"            width="{{width}}"            height="{{height}}"            allowfullscreen="true"            allowscriptaccess="always"            wmode="opaque"            src="http://www.ustream.tv/flash/video/{{videoId}}"            type="application/x-shockwave-flash" />        </object>'}}),twttr.mediaType("Vevo",{icon:"video",domain:"http://vevo.com",ssl:!1,flaggable:!0,matchers:{standardVideo:/^#{optional_protocol}?vevo\.com\/watch\/[\w-]+\/[\w-]+\/([a-zA-Z0-9_]+)/i},process:function(a,b){this.data.id=this.slug,this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),a()},content:function(){var a='<object width="{{width}}" height="{{height}}">                <param name="movie" value="http://www.vevo.com/VideoPlayer/Embedded?videoId={{id}}&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961&playerType=embedded"/>                <param name="bgcolor" value="#000000"/>                <param name="allowFullScreen" value="true"/>                <param name="allowScriptAccess" value="always"/>                <param name="wmode" value="opaque"/>                <embed                  src="http://www.vevo.com/VideoPlayer/Embedded?videoId={{id}}&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961&playerType=embedded"                   type="application/x-shockwave-flash"                   allowfullscreen="true"                   allowscriptaccess="always"                   wmode="opaque"                   width="{{width}}"                   height="{{height}}"                   bgcolor="#000000" />              </object>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Flickr",{icon:"photo",favicon:twttr.isSSL()?"https://secure.flickr.com/favicon.ico":"http://www.flickr.com/favicon.ico",domain:twttr.isSSL()?"https://secure.flickr.com":"http://www.flickr.com",deciderKey:"phoenix_flickr_details",flaggable:!0,matchers:{profile:/^#{optional_protocol}?flickr\.com\/(?:photos|people)\/([\w\@\-]+)\/?$/i,photo:/^#{optional_protocol}?flickr\.com\/photos\/[\w\@\-]+\/(\d+)\/?/i,sets:/^#{optional_protocol}?flickr\.com\/photos\/(?:[\w\@\-]+)\/sets\/(\d+)\/?(?:show\/?)?$/i,galleries:/^#{optional_protocol}?flickr\.com\/photos\/([\w\@\-]+)\/galleries\/(\d+)\/?$/i,pool:/^#{optional_protocol}?flickr\.com\/groups\/([\w\@\-]+)\/?(?:pool\/|discuss\/)?$/i},ssl:!0,metadata:function(a){var b;this.data.photos&&this.data.photos.length>=1?(b=this.data.photos[0],a({image:Mustache.to_html("//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}.jpg",b),title:this.data.title,description:this.data.description,author:{name:this.data.author_name,url:this.data.author_url}})):a(null)},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},process:function(a,b){this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),this.data.domain=this.constructor.domain;var c=twttr.media.types.Flickr.matchers,d=this,e=this.url;if(e.match(c.photo)){var f=RegExp.$1;this.makeRequest({data:{method:"flickr.photos.getInfo",photo_id:f},success:function(b){b.photo&&(d.data.author_name=b.photo.owner.realname,d.data.author_url=d.constructor.domain+"/photos/"+b.photo.owner.nsid,b.photo.media&&b.photo.media=="video"&&(d.data.isVideo=!0),d.data.photos=[b.photo]),a()}})}else e.match(c.sets)?this._makeSetRequest(RegExp.$1,a):e.match(c.profile)?this.lookUpUserPhotos(RegExp.$1,this.slug,a):e.match(c.pool)?this._makeGroupRequestByName(RegExp.$1,a):e.match(c.galleries)&&this.makeRequest({data:{method:"flickr.urls.lookupGallery",url:"flickr.com/photos/"+RegExp.$1+"/galleries/"+RegExp.$2},success:function(b){var c=b.gallery.id;d.makeRequest({data:{method:"flickr.galleries.getPhotos",gallery_id:c},success:function(b){d.data.photos=b.photos.photo.slice(0,16),d.data.isGallery=1,a()}})}});return},content:function(){var a="",b=twttr.media.types.Flickr;if(this.data.photos.length==1)if(this.data.isVideo){var c=this.data.photos[0];c.domain=this.data.domain,a+=Mustache.to_html(b.templates.video,c)}else this.data.photos[0].href=this.data.photos[0].urls.url[0]._content,a+=Mustache.to_html(b.templates.photo,this.data.photos[0]);else{a='<div class="flickr-group">'+this.createThumbList(this.data.photos)+"</div>";if(this.data.isGallery)return a;var d;this.data.set_id?d=b.photoSetFlashVars:this.data.group_id?d=b.photoGroupFlashVars:d=b.photoUserFlashVars,d=twttr.merge({},b.defaultSlideshowFlashVars,d,!0);var e=[];jQuery.each(d,function(a,b){e.push(a+"="+b)}),e=Mustache.to_html(e.join("&"),this.data),a+=Mustache.to_html(b.templates.slideshow,{flashvars:e,domain:this.data.domain})}return a}}).statics({API_KEY:"2a56884b56a00758525eaa2fee16a798",SECRET:"7c794fe3256175b6",REST_DOMAIN:"//widgets.platform.twitter.com",defaultSlideshowFlashVars:{lang:"en-us",offsite:!0,minH:100,minW:100},templates:{video:'<object width="{{width}}" height="{{height}}"                   type="application/x-shockwave-flash"                   data="{{domain}}/apps/video/stewart.swf?v=71377"                   classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">                   <param name="flashvars" value="intl_lang=en-us&photo_secret={{secret}}&photo_id={{id}}"/>                   <param name="movie" value="{{domain}}/apps/video/stewart.swf?v=71377"/>                   <param name="bgcolor" value="#000000"/>                   <param name="allowFullScreen" value="true"/>                   <param name="wmode" value="opaque"/>                   <embed                     type="application/x-shockwave-flash"                     src="{{domain}}/apps/video/stewart.swf?v=71377"                     bgcolor="#000000"                     allowfullscreen="true"                     wmode="opaque"                     flashvars="intl_lang=en-us&photo_secret={{secret}}&photo_id={{id}}"                     height="{{height}}"                     width="{{width}}" />                 </object>',photo:'<div class="flickr-photo">                   <a href="{{href}}" target="_blank">                     <img src="//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}.jpg"/>                   </a>                 </div>',set:'<a href="{{href}}" style="text-decoration:none;" target="_blank">                <img class="flickr-thumb" src="//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}_s.jpg"/>              </a>',slideshow:'<embed type="application/x-shockwave-flash"                             src="{{domain}}/apps/slideshow/show.swf?v=107931"                             width="{{width}}"                             height="{{height}}"                             id="slideShowMovie"                             bgcolor="#000000"                             quality="high"                             allowfullscreen="true"                             allowscriptaccess="always"                             wmode="opaque"                             flashvars={{flashvars}} />'},photoUserFlashVars:{user_id:"{{user_id}}",page_show_back_url:"/photos/{{user_name}}/",page_show_url:"/photos/{{user_name}}/show/"},photoGroupFlashVars:{group_id:"{{group_id}}",page_show_url:"/groups/{{group_id}}/pool/show/",page_show_back_url:"/groups/{{group_id}}/pool/"},photoSetFlashVars:{set_id:"{{set_id}}",page_show_back_url:"/photos/{{user_name}}/sets/{{set_id}}/",page_show_url:"/photos/{{user_name}}/sets/{{set_id}}/show/"}}).methods({base58:function(a){var b="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",c=a.length,d=0,e=1;for(var f=c-1;f>=0;f--)d+=e*b.indexOf(a[f]),e*=b.length;return d},lookUpUserPhotos:function(a,b,c){var d=this;this.makeRequest({data:{method:"flickr.urls.lookupUser",url:"flickr.com/photos/"+a},success:function(b){if(b.stat==="fail"){c();return}var e=b.user.id,f=b.user.username._content;d.makeRequest({data:{method:"flickr.people.getPublicPhotos",user_id:e},success:function(b){d.data.photos=b.photos.photo.slice(0,16),d.data.user_id=e,d.data.user_name=a,d.data.author_name=f,d.data.author_url=d.constructor.domain+"/photos/"+e,c()}})}})},createThumbList:function(a){var b="http://www.flickr.com/photos",c=this;return $.map(a,function(a,c){return a.href=[b,a.owner,a.id].join("/"),Mustache.to_html(twttr.media.types.Flickr.templates.set,a)}).join("")},_makeGroupRequestByName:function(a,b){this.makeRequest({data:{method:"flickr.urls.lookupGroup",url:"flickr.com/groups/"+a},success:twttr.bind(this,function(a){this._makeGroupRequestById(a.group.id,b)})})},_makeGroupRequestById:function(a,b){this.makeRequest({data:{method:"flickr.groups.pools.getPhotos",group_id:a},success:twttr.bind(this,function(c){this.data.photos=c.photos.photo.slice(0,16),this.data.group_id=a,b()})})},_makeSetRequest:function(a,b){this.makeRequest({data:{method:"flickr.photosets.getPhotos",photoset_id:a},success:twttr.bind(this,function(a){var c=a.photoset.owner;this.data.photos=a.photoset.photo.slice(0,16),twttr.each(this.data.photos,function(a){a.owner=c}),this.data.set_id=a.photoset.id,this.data.user_name=c,this.data.author_name=a.photoset.ownername,this.data.author_url=this.constructor.domain+"/photos/"+a.photoset.owner,b()})})},makeRequest:function(a){var b={url:twttr.media.types.Flickr.REST_DOMAIN+"/services/rest",dataType:"jsonp",jsonp:"jsoncallback",data:{format:"json",api_key:twttr.media.types.Flickr.API_KEY},success:function(a){}};twttr.sandboxedAjax.send(twttr.merge({},b,a,!0))}}),twttr.mediaType("DeviantArt",{title:"deviantART",icon:"photo",domain:"http://deviantart.com",flaggable:!0,matchers:{canonical:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/art\/(?:[\w\@-]+))/i,oldStyle:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/deviation\/(?:[\w\@-]+))/i,gallery:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/gallery\/#\/d(?:[\w\@-]+))/i,favMe:/^(#{protocol}?fav\.me\/(?:[\w\@-]+))/i,oldView:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/view\/(?:[\w\@-]+))/i},process:function(a,b){b=b||{},twttr.sandboxedAjax.send({url:"http://backend.deviantart.com/oembed",data:{url:this.slug,format:"jsonp",maxwidth:b.maxwidth},dataType:"jsonp",success:twttr.bind(this,function(b){this.data.href=this.url,this.data.name=this.constructor._name,this.data.src=b.thumbnail_url,this.data.author_name=b.author_name,this.data.author_url=b.author_url,a()})})},attribution:function(){var a="         <div class='media-attribution'>           <span>via</span>            <a target='_blank' class='media-attribution-link' href='{{author_url}}'>{{author_name}}</a>            from <img src='{{icon_url}}'/>           <a target='_blank' data-media-type='{{media_type}}' class='media-attribution-link' href='{{url}}'>{{title}}</a>         </div>";return Mustache.to_html(a,{url:this.constructor.domain,icon_url:twttr.assets.path("/partner-favicons/DeviantArt.ico"),title:this.constructor.title||this.constructor._name,media_type:this.constructor._name,author_name:this.data.author_name,author_url:this.data.author_url})},content:function(){var a='<div class="deviantart">                <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                  <img src="{{src}}"/>                </a>              </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Vimeo",{icon:"video",domain:"//vimeo.com",ssl:!0,flaggable:!0,height:150,matchers:{video:/^#{optional_protocol}?vimeo\.com\/(\d+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.thumbnail_url?b(c.data.thumbnail_url):b(null)})},process:function(a,b){var c=this;b=b||{},this.data.video_id=this.slug,twttr.sandboxedAjax.send({url:"//vimeo.com/api/oembed.json",dataType:"jsonp",data:{url:"http://vimeo.com/"+this.slug,width:b.maxwidth||446},success:function(b){c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a()}})},render:function(a){this.renderIframe(a,"//player.vimeo.com/video/"+this.data.video_id.replace(/[^0-9]/g,""))}}),twttr.mediaType("Etsy",{icon:"photo",domain:"http://etsy.com",ssl:!1,matchers:{itemListing:/^#{optional_protocol}?etsy\.com\/listing\/(\d+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.images&&c.data.images.length>0?b(c.data.images[0].url_170x135):b(null)})},process:function(a,b){var c=this;b=b||{},this.data.itemId=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,twttr.sandboxedAjax.send({url:"http://openapi.etsy.com/v2/public/listings/"+this.slug+".js",dataType:"jsonp",data:{detail_level:"high",api_key:"qev732j7b8j44eg5pqsb38k4",includes:"Images(url_170x135):6",fields:"listing_id,title,price,currency_code,quantity",maxwidth:b.maxwidth},success:function(b){var d=b.results[0];c.data.title=d.title;switch(d.currency_code){case"USD":c.data.price=d.quantity+" for $"+(d.price||0);break;default:c.data.price=d.quantity+" for "+(d.price||0)+" "+d.currency_code}c.data.images=d.Images;var e=$.map(d.Images,function(a,b){return'<a class="inline-media-image" data-inline-type="{{name}}" target="_blank" href="{{href}}">                      <img class="thumb" src="'+a.url_170x135+'"/>                    </a>'}).join(""),f='            <div class="etsy">              <h3>{{title}}</h3>              <p>{{price}}</p>              <p>'+e+"</p>            </div>";c.data.html=Mustache.to_html(f,c.data),a()}})},content:function(){return this.data.html}}),twttr.mediaType("Photozou",{icon:"photo",domain:"http://photozou.jp",flaggable:!0,matchers:{photo:/^#{optional_protocol}?photozou\.(?:com|jp)\/photo\/show\/\d+\/(\d+)/i},ssl:!1,getImageURL:function(a,c,d){var e=this;this.process(function(){e.data&&e.data.src?d&&d<120||a==b.constants.imageSizes.small?c(e.data.smallSrc):c(e.data.src):c(null)})},process:function(a){this.data.src="http://photozou.jp/p/img/"+this.slug,this.data.smallSrc="http://photozou.jp/p/thumb/"+this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="photozou">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("TwitPic",{icon:"photo",domain:"//twitpic.com",flaggable:!0,matchers:{media:/^#{optional_protocol}?twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i},ssl:!0,process:function(a){this.data.src=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},getImageURL:function(a,c){if(this.slug){var d="";a==b.constants.imageSizes.medium?d="//twitpic.com/show/thumb/"+this.slug:a=="small"?d="//twitpic.com/show/mini/"+this.slug:d="//twitpic.com/show/iphone/"+this.slug,c(d)}else c(null)},content:function(){var a='<div class="twitpic">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="//twitpic.com/show/large/{{src}}"/>                 </a>              </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Twitgoo",{icon:"photo",domain:"http://twitgoo.com",ssl:!1,flaggable:!0,matchers:{image:/^#{optional_protocol}?twitgoo\.com\/(?!a\/)([a-zA-Z0-9\-\?\=]+)/i},getImageURL:function(a,c){this.slug?c(b.util.supplant("http://twitgoo.com/{src}/img",{src:this.slug})):c(null)},process:function(a){this.data.src=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="twitgoo">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="http://twitgoo.com/{{src}}/img"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("DailyBooth",{icon:"photo",domain:"//dailybooth.com",ssl:!0,matchers:{photo1:/^#{optional_protocol}?dailybooth\.com\/(u\/\w+)/i,photo2:/^#{optional_protocol}?dailybooth\.com\/(\w+\/\w+)/i},getImageURL:function(a,c){var d=this;this.process(function(){d.data?a===b.constants.imageSizes.original?c(d.data.src):c(d.data.smallImage):c(null)})},process:function(a){var b=this;this.data.href=c(this.url),this.data.name=this.constructor._name;if(this.slug.match(/^u\/(\w+)/))var d=parseInt(RegExp.$1,36),e=this.getBaseTen(d);else{var e=this.slug.match(/\w+\/(\w+)/);if(!e){a();return}e=e[1]}twttr.sandboxedAjax.send({url:"//api.dailybooth.com/v1/picture/"+e+".json",dataType:"jsonp",type:"get",success:function(d){b.data.src=c(d.urls.large),b.data.smallImage=c(d.urls.small),a()}})},content:function(){var a='<div class="dailybooth">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}).methods({getBaseTen:function(a){if(Number.prototype.toFixed)a=a.toFixed(5),a=parseFloat(a);else{var b=Math.floor(a),c=a-b;a=b+Math.round(c*1e14)/1e14}return a}}),twttr.mediaType("YFrog",{domain:"//yfrog.com",ssl:!0,flaggable:!0,icon:function(a){var b=this.slug.charAt(this.slug.length-1);switch(b){case"j":case"p":case"b":case"t":case"g":return"photo";case"z":case"f":case"s":return"video"}},matchers:{media:/^#{optional_protocol}?yfrog\.(?:com|ru|com\.tr|it|fr|co\.il|co\.uk|com\.pl|pl|eu|us)\/(\w+)/i},getImageURL:function(a,c){this.slug?this.icon()==="video"?c(b.util.supplant("//yfrog.com/{id}:frame",{id:this.slug})):a===b.constants.imageSizes.small?c(b.util.supplant("//yfrog.com/{id}:twthumb",{id:this.slug})):c(b.util.supplant("//yfrog.com/{id}:tw1",{id:this.slug})):c(null)},process:function(a){this.data.media_id=this.slug,this.data.href=this.url.replace(/\/$/,""),this.data.name=this.constructor._name,a()},content:function(){var a,b=this.data.media_id.charAt(this.data.media_id.length-1);if(b=="j"||b=="p"||b=="b"||b=="t"||b=="g")a='<div class="yfrog">               <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                 <img src="//yfrog.com/{{media_id}}:iphone">               </a>             </div>';else if(b=="z"||b=="f"||b=="s")a='<embed                src="//yfrog.com/{{media_id}}:embed"                width="100%"                allowFullScreen="true"                wmode="transparent"                type="application/x-shockwave-flash"/>';return a||(a=""),Mustache.to_html(a,this.data)}}),twttr.mediaType("Lockerz",{icon:"photo",domain:"//www.lockerz.com",ssl:!0,matchers:{tweetphoto:/^#{optional_protocol}?tweetphoto\.com\/(\d+)/i,plixi:/^#{protocol}?(?:(?:m|www)\.)?plixi\.com\/p\/(\d+)/i,lockerz:/^#{protocol}?(?:(?:m|www)\.)?lockerz\.com\/s\/([0-9\?\=\- ]+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.src?b(c.data.src):b(null)})},process:function(a){this.data.src="//api.plixi.com/api/tpapi.svc/imagefromurl?size=medium&url="+encodeURIComponent(this.url),this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="lockerz">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}" />                 </a>              </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Kiva",{icon:"generic",domain:"http://www.kiva.org",ssl:!1,matchers:{project:/^#{optional_protocol}?kiva\.org\/lend\/(\d+)/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.kiva.org/services/oembed",dataType:"jsonp",jsonp:"jsonp",data:{url:"http://www.kiva.org/lend/"+this.slug,format:"jsonp",maxwidth:b.maxwidth},success:function(b){c.data.html=b.html,a()}})},content:function(){return this.data.html}}),twttr.mediaType("TwitVid",{icon:"video",domain:"//www.twitvid.com",ssl:!0,flaggable:!0,favicon:"//www.twitvid.com/favicon.ico",matchers:{video:/^#{optional_protocol}?twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i},process:function(a,b){this.data.media_id=this.slug,this.data.width=b&&b.maxwidth||425,this.data.height=this.calcHeight(this.data.width),a()},metadata:function(a){a({image:b.util.supplant("//www.twitvid.com/{media_id}:largethumb",this.data)})},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},render:function(a){this.renderIframe(a,twttr.proto+"://www.twitvid.com/embed.php?autoplay=0&guid="+this.data.media_id)}}),twttr.mediaType("GoogleVideo",{icon:"video",domain:"http://video.google.com",ssl:!1,flaggable:!0,matchers:{video:/^#{optional_protocol}video\.google\.com\/([a-zA-Z0-9_\-\?\=\&\#]+)/i},process:function(a,b){this.data.width=400,this.data.height=326,b&&b.maxwidth&&b.maxwidth<this.data.width&&(this.data.width=b.maxwidth,this.data.height=Math.round(b.maxwidth*326/400)),this.slug.match(/#docid=(\-?\d+)/)?(this.data.doc_id=RegExp.$1,a()):this.slug.match(/\?docid=(\-?\d+)/)&&(this.data.doc_id=RegExp.$1,a())},content:function(){var a='         <embed type="application/x-shockwave-flash"                 id="VideoPlayback"                 src="http://video.google.com/googleplayer.swf?docid={{doc_id}}&hl=en&fs=true"                 style="width:{{width}}px;height:{{height}}px"                 allowFullScreen="true"                 allowScriptAccess="always"                wmode="opaque" />';return Mustache.to_html(a,this.data)}}),twttr.mediaType("JustinTV",{icon:"video",domain:"http://justin.tv",ssl:!1,flaggable:!0,matchers:{embed:/^#{protocol_no_ssl}([a-zA-Z0-9_\-\?\=]*\.)?justin\.tv\/[a-zA-Z0-9]+(\/b\/\d+)?\/?(\?\w*?)?(#\w*)?$/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.thumbnail_url?b(c.data.thumbnail_url):b(null)})},process:function(a,b){var c=this,d=400,e=300;twttr.sandboxedAjax.send({url:"http://api.justin.tv/api/embed/from_url.json",dataType:"jsonp",jsonp:"jsonp",data:{url:c.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),f.thumbnail_url&&(c.data.thumbnail_url=f.thumbnail_url),a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Kickstarter",{icon:"generic",domain:"//kickstarter.com",ssl:!0,matchers:{project:/^#{optional_protocol}?(kickstarter\.com\/projects\/[a-zA-Z0-9_\-]+\/[a-zA-Z0-9_\-]+)/i},process:function(a){this.data.height="380px",this.data.width="220px",a()},render:function(a){var b=this.slug;b.slice(-1)!=="/"&&(b+="/"),b+="widget/card.html",this.renderIframe(a,twttr.proto+"://www."+b)}}),twttr.mediaType("MTV",{icon:"video",domain:"http://mtv.com",ssl:!1,matchers:{video:/^#{optional_protocol}?mtv\.com\/videos\/([a-z0-9\-\_]+\/)+[0-9]+\/[a-z0-9\-\_]+\.jhtml(#[a-z0-9\=\&]+)?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.mtv.com/videos/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.url=b.url,b.width>315?(c.data.width=315,c.data.height=Math.floor(b.height*315/b.width)):(c.data.height=b.height,c.data.width=b.width),a())}})},content:function(){var a='<object width="{{width}}" height="{{height}}">                <param name="movie" value="{{url}}"/>                <param name="allowFullScreen" value="true"/>                <param name="allowscriptaccess" value="always"/>                <param name="wmode" value="opaque"/>                <embed src="{{url}}"                        type="application/x-shockwave-flash"                        allowscriptaccess="always"                        allowfullscreen="true"                        wmode="opaque"                        width="{{width}}"                        height="{{height}}"/>              </object>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("WashingtonPost",{icon:"video",domain:"http://washingtonpost.com",matchers:{video:/(^(?:#{protocol}?(?:[\w\-\_]+\.))?washingtonpost\.com\/wp-dyn\/content\/video\/\d{4}\/\d{2}\/\d{2}\/VI\d+\.html(#{wildcard})?)/i},ssl:!1,process:function(a,b){var c=this,d=400,e=225;twttr.sandboxedAjax.send({url:"http://specials.washingtonpost.com/tv/info.json",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("MSNBC",{icon:"video",domain:"http://msnbc.com",ssl:!1,matchers:{video:/(^(?:#{protocol}?(?:[\w\-\_]+\.))?msnbc\.msn\.com\/id\/\d{1,8}\/vp\/\d{1,8}(#{wildcard})?)/i},process:function(a,b){var c=this,d=420,e=245;twttr.sandboxedAjax.send({url:"http://www.polls.newsvine.com/_labs/twitter/oembed",type:"GET",dataType:"jsonp",data:{format:"jsonp",url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.resizeHtmlEmbed(f.html,b,d,e),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("CNN",{icon:"video",domain:"http://cnn.com",title:"CNN Video",ssl:!1,deciderKey:"phoenix_cnn_details",matchers:{video:/(^(?:#{protocol}?(?:(?:www|edition|us)\.)?)?cnn\.com\/video\/[\?|#]\/#{wildcard})/i},process:function(a,b){var c=this,d=this.url,e=416,f=374,g=d.split("?");g.length>2&&(g.pop(),d=g.join("?")),twttr.sandboxedAjax.send({url:"http://newspulse.cnn.com/widget/json/twitter-video",type:"GET",dataType:"jsonp",data:{format:"jsonp",maxwidth:b&&b.maxwidth||e,url:d},success:function(d){d.error||(c.data.embed=c.resizeHtmlEmbed(d.html,b,e,f),c.data.attribution_url="http://cnn.com/video",c.data.width=d.width,c.data.height=d.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Apple",{icon:twttr.isT1?function(){switch(this.matchLabel){case"song":return"song";case"album":return"album";case"music_video":case"video":case"movie":case"tv":return"video";case"software":return"software";case"event":case"preorder":case"playlist":case"ping_playlist":case"podcast":case"book":default:return"generic"}}:"song",domain:"http://itunes.apple.com",deciderKey:"phoenix_apple_itunes",matchers:{song:/^#{itunes_protocol}(?:\/album)\/.*\?i=/i,album:/^#{itunes_protocol}(?:\/album)\//i,event:/^#{itunes_protocol}\/event\//i,music_video:/^#{itunes_protocol}(?:\/music-video)\//i,video:/^#{itunes_protocol}(?:\/video)\//i,software:/^#{itunes_protocol}(?:\/app)\//i,playlist:/^#{itunes_protocol}(?:\/imix)\//i,ping_playlist:/^#{itunes_protocol}(?:\/imixes)\?/i,preorder:/^#{itunes_protocol}(?:\/preorder)\//i},ssl:!1,getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.src?b(c.data.src):b(null)})},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://itunes.apple.com/WebObjects/MZStore.woa/wa/remotePreview",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,c.data.attribution_icon=b.attribution_icon,c.data.attribution_url=b.attribution_url,c.data.attribution_title="iTunes",b.favicon&&(c.data.attribution_icon=b.favicon),b.faviconLink&&(c.data.attribution_url=b.faviconLink),b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}});var d={_queue:[],push:function(a,b){b===!0?this._queue.unshift(a):this._queue.push(a),this._process()},_process:function(){var a=this;if(this._isProcessing)return;this._isProcessing=!0,setTimeout(function(){var b=a._queue.shift();a._isProcessing=!1,b&&(b(),a._process())},200)}};twttr.mediaType("Instagram",{icon:"photo",domain:"//instagr.am",title:"Instagram",deciderKey:"phoenix_instagram_and_friends",ssl:!0,height:301,matchers:{video:/^#{optional_protocol_subdomain}?(?:instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+\/?)/i},getImageURL:function(a,c){var d=this;this.process(function(){if(d.data&&d.data.href){var e=b.constants.imageSizes;a===e.small||a===e.medium?c(d.data.smallSrc):c(d.data.src)}else c(null)},{size:a})},process:function(a,c){this.data.href=Mustache.to_html("{{domain}}/p/{{slug}}",{domain:this.constructor.domain,slug:this.slug}),this.data.src=b.util.joinPath(this.data.href,"media/?size=l"),this.data.smallSrc=b.util.joinPath(this.data.href,"media/?size=t"),this.data.name=this.constructor._name,d.push(a,c&&c.size===b.constants.imageSizes.large)},content:function(){var a='        <div class="instagram">          <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">            <img src="{{src}}"/>          </a>        </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Rdio",{icon:"song",domain:"//rdio.com",ssl:!0,matchers:{rdio:/^#{optional_protocol}(?:rd\.io|rdio\.com)\/#{wildcard}/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//rdio.com/api/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth||390},success:function(b){b.error||(c.data.embed=c.resizeHtmlEmbed(b.html),a())}})},content:function(){return this.data.embed},getImageURL:function(a,b){var c=this;this.process(function(){b(this.url)},{maxwidth:500})}}),twttr.mediaType("Dipdive",{domain:"http://dipdive.com",ssl:!1,deciderKey:"phoenix_dipdive_details",matchers:{photos:/^#{optional_protocol_subdomain}?dipdive\.com\/(((?:member\/[a-zA-Z0-9\-]+\/)?pictures\/([0-9]+))|(v\/[a-zA-Z0-9]+))/i,videos:/^#{optional_protocol_subdomain}?dipdive\.com\/(((?:member\/[a-zA-Z0-9\-]+\/)?media\/([0-9]+))|(v\/[a-zA-Z0-9]+))/i},icon:function(a){return this._icon?this._icon:(this.url.match(/pictures/)?this._icon="photo":this._icon="video",this._icon)},process:function(a,b){var c=this,d=425,e=385;b=b||{},twttr.sandboxedAjax.send({url:"http://api.dipdive.com/oembed.jsonp",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(f.type==="photo"?(c.data.type="photo",c.data.href=f.url,c.data.name=c.constructor._name):(c.data.embed=c.resizeHtmlEmbed(f.html,b,d,e),c.data.width=f.width,c.data.height=f.height),a())}})},content:function(){var a;return this.data.type==="photo"?(a='<div class="dipdive">               <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                 <img src="{{href}}"/>               </a>             </div>',Mustache.to_html(a,this.data)):this.data.embed},flaggable:!0}),twttr.mediaType("SlideShare",{icon:"generic",domain:"http://slideshare.com",ssl:!0,deciderKey:"phoenix_instagram_and_friends",matchers:{slides:/^#{optional_protocol}?slideshare\.(?:com|net)\/[a-zA-Z0-9\.]+\/[a-zA-Z0-9-]+\/?#{wildcard}?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"https://www.slideshare.net/api/oembed/2",type:"GET",dataType:"jsonp",data:{url:this.url,format:"json",maxwidth:b.maxwidth||390},success:function(b){b.error||(c.data.embed=c.resizeHtmlEmbed(b.html),c.data.attribution_url=b.author_url,c.data.attribution_title=b.author_name,a())}})},content:function(){return this.data.embed},flaggable:!0}),twttr.mediaType("BlipTV",{icon:"video",domain:"//blip.tv",flaggable:!0,title:"blip.tv",ssl:!1,deciderKey:"phoenix_instagram_and_friends",matchers:{videos:/^#{optional_protocol}?blip\.tv\/(?:(?:file\/[\w-]+)|(?:(?:[\w-]+\/)?[\w-]+-(?:\d+)))\/?/i},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.thumbnail_url)})},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//blip.tv/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Livestream",{icon:"video",domain:"http://www.livestream.com",ssl:!1,flaggable:!0,matchers:{wwwlivestream:/^#{optional_protocol}?livestream\.com\/[\w_]+(\/#{wildcard})?/i,livestream:/^#{protocol}?livestre\.am\/[\w_]+(\/#{wildcard})?/i,twitcam:/^#{protocol}?twitcam\.(?:livestream\.)com\/[\w_]+(\/#{wildcard})?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.livestream.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("WallStreetJournal",{icon:"video",domain:"http://online.wsj.com",title:"The Wall Street Journal Digital Network",ssl:!1,matchers:{video:/^#{protocol}?online\.wsj\.com\/video\/[A-Z0-9a-z\-]+\/[A-Z0-9a-z\-]+\.html/i},process:function(a,b){var c=this,d=450,e=344;b=b||{},twttr.sandboxedAjax.send({url:"http://online.wsj.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Hulu",{icon:"video",domain:"http://www.hulu.com",ssl:!1,height:253,matchers:{video:/^#{optional_protocol}?hulu\.com\/w(atch)?\/([a-zA-Z0-9]+)/i},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.thumbnail_url)})},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.hulu.com/api/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=c.useOpaqueModeForFlash(b.html),c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("NHL",{icon:"video",domain:"http://www.nhl.com",ssl:!1,matchers:{video:/^#{protocol}?video\.([a-z]{4,11}\.)?nhl\.com\/videocenter\/console\?(((catid=-?\d+&)?id=\d+)|(hlg=\d{8},\d,\d{1,4}(&event=[A-Z0-9]{4,6})?)|(hlp=\d{5,10}(&event=[A-Z0-9]{4,6})?))/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://video.nhl.com/videocenter/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=c.useOpaqueModeForFlash(b.html),c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Meetup",{icon:"generic",domain:"//www.meetup.com",deciderKey:"phoenix_local_meetup",ssl:!0,matchers:{anevent:/^#{protocol_no_ssl}?(?:(((www|dev)\.){0,2}?meetup.com)|meetu.ps)\/(?:u\/)?[\w\-]{3,}(?:[a-zA-Z0-9_#\.\-\?\&\=\/]+)/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//api.meetup.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.html=b.html,a())}})},content:function(){return this.data.html}}),twttr.mediaType("Plancast",{icon:"generic",domain:"//plancast.com",deciderKey:"phoenix_local_plancast",ssl:!0,matchers:{anevent:/^#{protocol}?(?:[a-z0-9]+\.)?plancast\.com\/p\/(?:[a-z0-9]+)\/?$/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var d=this;b=b||{},twttr.sandboxedAjax.send({url:"//plancast.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(d.data.src=c(b.src),b.height&&(d.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Gowalla",{icon:"generic",domain:"//www.gowalla.com",deciderKey:"phoenix_local_gowalla",ssl:!0,matchers:{anevent:/^#{protocol}?(((go)?wal.la)\/([chpnt])\/\w+\/?|gowalla.com\/(trips|challenges|checkins|pins)\/\d+\/?)/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//gowalla.com/api/twitter_oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Foursquare",{icon:"generic",domain:"//www.foursquare.com",deciderKey:"phoenix_local_foursquare",ssl:!0,matchers:{anevent:/^#{optional_protocol}?foursquare\.com\/([a-zA-Z0-9\-]+)\/checkin\/(#{wildcard})/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"https://api.foursquare.com/services/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Amazon",{icon:"generic",domain:"//www.amazon.com",deciderKey:"phoenix_amazon_details",ssl:!0,matchers:{review:/^#{protocol}?www\.amazon\.(com|de|fr|ca|it|(?:co\.(?:jp|uk)))(?:(?!(\/[^\/]*)?\/[bs][\/\?]|\/gp\/browse\.html|\/aw\/ri\/|\/gp\/search|\/search|\/gp\/feature|\/gp\/goldbox|\/gp\/registry))(?:#{wildcard}?)/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=twttr.media.types.Amazon.matchers,d=this,e=this.url;b=b||{},matches=e.match(c.review),matches[1]&&twttr.sandboxedAjax.send({url:"//www.amazon."+matches[1]+"/gp/twitter/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(d.data.src=b.src,b.height&&(d.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("AolVideo",{icon:"video",domain:"http://www.aol.com",title:"Aol",deciderKey:"phoenix_aol_video",matchers:{video:/^#{protocol_no_ssl}?share\.aolvideo\.com\/twitter\.php\?video\=(#{wildcard})/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://share.aolvideo.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Photobucket",{icon:"photo",domain:"http://photobucket.com",flaggable:!0,matchers:{user_groups:/^#{protocol}?(?:g?(?:i|s)(?:\d+|mg))\.photobucket\.com\/(?:albums|groups)\/(?:#{wildcard})/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://photobucket.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url.replace(/^([^?]*[^/])(?=\?)/,"$1/"),maxwidth:b.maxwidth},success:function(b){b.error||(c.data.href=b.url,c.data.name=c.constructor._name,a())}})},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.href)})},render:function(a){var b='        <div class="photobucket">          <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">            <img src="{{href}}"/>          </a>        </div>';$(a).append(Mustache.to_html(b,this.data))}}),twttr.mediaType("With",{icon:"photo",domain:twttr.isSSL()?"https://with.me":"http://with.me",ssl:!0,deciderKey:"phoenix_withme_details",matchers:{project:/^#{optional_protocol}?with\.me[\/\?]\??[a-zA-Z0-9]+$/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//with.me/services/oembed",dataType:"jsonp",type:"GET",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){!b.error&&b.hasOwnProperty("url")&&(c.data.href=c.url,c.data.src=b.url,c.data.title=b.title,a())}})},content:function(){var a='           <div class="with-me">             <a class="inline-media-image" href="{{href}}" target="_blank">               <img src="{{src}}"/>             </a>           </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Facebook",{icon:"photo",domain:twttr.isSSL()?"https://facebook.com":"http://facebook.com",ssl:!0,deciderKey:"phoenix_facebook_details",matchers:{project:/^#{optional_protocol}?facebook\.com\/([a-zA-Z0-9_#\.\-\?\&\=\/])*pid=(#{wildcard})/i},process:function(a,b){var c="https://www.facebook.com/twitter/photo/?id={{id}}&l={{l}}&pid={{pid}}",d=this;d.data.href=this.url;var e=twttr.util.paramsFromUrl(this.url);e&&e.id&&e.l&&e.pid&&(d.data.src=Mustache.to_html(c,e),a())},getImageURL:function(a,b){var c=this;this.process(function(){c.data.src?b(c.data.src):b(null)})},content:function(){var a='            <div class="facebook-dp">              <a class="inline-media-image" href="{{href}}" target="_blank">                <img src="{{src}}"/>              </a>            </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("WordPress",{icon:"generic",domain:"//wordpress.com",ssl:!0,deciderKey:"phoenix_wordpress_details",matchers:{tinyUrl:/^#{optional_protocol}?(?:[a-z0-9]+\.)?wp\.me[\/\?][a-zA-Z0-9_#\.\-\?\&\=\/]+$/i,standardUrl:/^#{optional_protocol}?(?:[a-z0-9]+\.)?wordpress\.com[\/\?][a-zA-Z0-9_#\.\-\?\&\=\/]+$/i},process:function(a,b){var c=this;b=b||{};var d="//public-api.wordpress.com/oembed/1.0/?for=twitter.com&as_article=true",e={url:this.url};twttr.app.isOnPage("permalink")||(e.maxwidth=433),twttr.sandboxedAjax.send({url:d,dataType:"jsonp",type:"GET",data:e,success:function(b){!b.error&&b.title&&(c.data.href=c.url,b.thumbnail_url&&b.thumbnail_url.indexOf("http:")>=0&&(b.thumbnail_url=b.thumbnail_url.replace("http","https")),c.data=twttr.merge(c.data,b),a())}})},content:function(){var a='                  <div id="wp-details" class="component"><div class="wp-inset">                  <a href="{{href}}" class="wp-link" target="_blank">                  <h1 class="wp-news-headline">{{title}}</h1></a>                  <p class="wp-news-description">{{{body}}}</p>                  {{#thumbnail_url}}                  <div><a class="inline-media-image" href="{{href}}" target="_blank">                  <img class="wp-img" src="{{thumbnail_url}}"/>                  </a></div>                  {{/thumbnail_url}}                  </div></div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("WhoSay",{domain:"//www.whosay.com",ssl:!0,flaggable:!0,deciderKey:"phoenix_whosay_details",icon:"photo",matchers:{media:/^#{optional_protocol}?whosay\.com\/[^\/\s]+\/photos\/(\d+)/i},getImageURL:function(a,c){if(this.slug){if(a===b.constants.imageSizes.medium)return c(b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_melt.jpg",{id:this.slug}));if(a===b.constants.imageSizes.large)return c(b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_lalt.jpg",{id:this.slug}))}c(null)},process:function(a){this.data.href=this.url,this.data.name=this.constructor._name,this.data.src=b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_melt.jpg",{id:this.slug}),a()},content:function(){var a='<div class="whosay">                  <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                    <img alt="" src="{{src}}">                  </a>                </div>';return Mustache.to_html(a,this.data)}}),a()})}),provide("geo/Map",function(a){using().as(function(b){twttr.klass("twttr.geo.Map",function(a,b){var c=this;if(!twttr.geo.mapsAvailable())return;var d={mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,scrollwheel:!1,navigationControl:!0,navigationControlOptions:{position:google.maps.ControlPosition.TOP_LEFT,style:google.maps.NavigationControlStyle.SMALL}};c.map=new google.maps.Map(a.get(0),twttr.merge(d,b)),c.bounds=new google.maps.LatLngBounds,c.initialized=!0,c.$canvas=a,c.addListener("tilesloaded",function(){c.resize()})}).methods({addListener:function(a,b){google.maps.event.addListener(this.map,a,b)},createOverlay:function(a){function c(){this.setMap(b.map)}var b=this;c.prototype=new google.maps.OverlayView,c.prototype.onAdd=function(){},c.prototype.onRemove=function(){},c.prototype.draw=function(){a&&(setTimeout(a,0),a=null)},b.mapOverlay=new c},getProjection:function(){var a=this.mapOverlay;return a&&a.getProjection()},latLngToContainerPoint:function(a){var b=this;a=b.normalizeLatLng(a);var c=b.getProjection();return c?c.fromLatLngToContainerPixel(a):null},latLngToOverlayPoint:function(a){var b=this;a=b.normalizeLatLng(a);var c=b.getProjection();return c?c.fromLatLngToDivPixel(a):null},containerPointToLatLng:function(a,b){return this.getProjection().fromContainerPixelToLatLng(new google.maps.Point(a,b))},extendBounds:function(a){this.bounds.extend(a)},normalizeLatLng:function(a){return $.isArray(a)?new google.maps.LatLng(a[1],a[0]):a},addPoint:function(a,b){var c=this;a=c.normalizeLatLng(a),c.extendBounds(a);var d=twttr.geo.POI_MARKER_SIZE,e=twttr.geo.POI_MARKER_HOTSPOT,f=new google.maps.MarkerImage("/phoenix/img/pin.png",new google.maps.Size(d.width,d.height),null,new google.maps.Point(e.x,e.y));c.marker=new google.maps.Marker({flat:!0,icon:f,map:c.map,position:a,clickable:!1,zIndex:2});if(b){var g=new google.maps.MarkerImage(b,null,null,new google.maps.Point(13,32),new google.maps.Size(24,24));c.avatar=new google.maps.Marker({flat:!0,icon:g,map:c.map,position:a,zIndex:3})}},addPoi:function(a,b){var c=twttr.is.fn(b);a=this.normalizeLatLng(a),this.extendBounds(a);var d=new google.maps.MarkerImage("/phoenix/img/poi-pin.png",null,null,new google.maps.Point(twttr.geo.POI_MARKER_HOTSPOT.x,twttr.geo.POI_MARKER_HOTSPOT.y)),e=new google.maps.Marker({flat:!0,icon:d,map:this.map,position:a,draggable:c,clickable:c,zIndex:2});return c&&google.maps.event.addListener(e,"position_changed",function(){var a=e.getPosition();b(a.lat(),a.lng())}),e},addFocusablePoint:function(a,b,c){var d=this;a=d.normalizeLatLng(a),d.extendBounds(a);var e=new google.maps.MarkerImage("/phoenix/img/place-minor10x.png",new google.maps.Size(10,10),new google.maps.Point(10,0),new google.maps.Point(5,5)),f=new google.maps.MarkerImage("/phoenix/img/place-minor10x.png",new google.maps.Size(10,10),null,new google.maps.Point(5,5)),g=new google.maps.Marker({flat:!0,icon:f,map:d.map,position:a,clickable:b!==undefined,zIndex:2});return b&&(google.maps.event.addListener(g,"mouseover",function(c){b(!0,d.latLngToContainerPoint(a))}),google.maps.event.addListener(g,"mouseout",function(c){b(!1,d.latLngToContainerPoint(a))})),c&&google.maps.event.addListener(g,"click",function(a){c()}),function(a){a?(g.setIcon(e),g.setZIndex(3)):(g.setIcon(f),g.setZIndex(2))}},extendBoundsToIncludeCircle:function(a,b){if(b<200)return;var c=new google.maps.Circle({map:null,center:this.normalizeLatLng(a),radius:b,clickable:!1,fillColor:"#0040FF",fillOpacity:.08,strokeColor:"#2929D4",strokeOpacity:.7,strokeWeight:.5,zIndex:1}),d=c.getBounds();this.extendBounds(d.getNorthEast()),this.extendBounds(d.getSouthWest())},addPlacePolygon:function(a){a=a[0];var b=[];for(var c=0;c<a.length;c++){var d=this.normalizeLatLng(a[c]);b.push(d),this.extendBounds(d)}new google.maps.Polygon({path:b,strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:.5,fillColor:"#FF0000",fillOpacity:.2,map:this.map})},isEmpty:function(){return this.bounds.isEmpty()},adjustBounds:function(a,b){var c=this;if(this.isEmpty())return;c.fitBounds(c.bounds,a,b)},MIN_LAT:-85.05113,MAX_LAT:85.05113,X_FROM_LNG:256/360,Y_FROM_RADIANS:-256/(2*Math.PI),DEGREES_FROM_RADIANS:180/Math.PI,MAX_CONTENT_WIDTH_RATIO:.9,MAX_CONTENT_HEIGHT_RATIO:.9,_worldXFromLng:function(a){return a*this.X_FROM_LNG},_worldYFromLat:function(a){var b=this;a=Math.max(b.MIN_LAT,Math.min(b.MAX_LAT,a));var c=Math.sin(a/b.DEGREES_FROM_RADIANS);return Math.log((1+c)/(1-c))*.5*b.Y_FROM_RADIANS},_lngFromWorldX:function(a){return a/this.X_FROM_LNG},_latFromWorldY:function(a){var b=2*Math.atan(Math.exp(a/this.Y_FROM_RADIANS));return(b-.5*Math.PI)*this.DEGREES_FROM_RADIANS},_zoomFromPixelDelta:function(a,b,c){var d=Math.floor(Math.log(Math.abs(a/b))/Math.LN2);return isNaN(d)?c:Math.max(0,Math.min(c,d))},fitBounds:function(a,b,c){var d=this;d.bounds=a;var e=a.getNorthEast(),f=a.getSouthWest(),g=d._worldXFromLng(f.lng()),i=d._worldXFromLng(e.lng()),j=d._worldYFromLat(e.lat()),k=d._worldYFromLat(f.lat()),l=d._zoomFromPixelDelta(d.$canvas.width()*d.MAX_CONTENT_WIDTH_RATIO,i-g,b),m=d._zoomFromPixelDelta(d.$canvas.height()*d.MAX_CONTENT_HEIGHT_RATIO,k-j,b);d.map.setZoom(Math.min(l,m));if(!c){var n=d._latFromWorldY((j+k)*.5);c=new google.maps.LatLng(n,a.getCenter().lng())}d.map.setCenter(d.normalizeLatLng(c))},getCenter:function(){return this.map.getCenter()},resize:function(){google.maps.event.trigger(this.map,"resize")}}),a(twttr.geo.Map)})}),provide("geo/Location",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.geo.Location",function(){var a=this;a.$empty=a.$fakeFocus=a.$dropdown=a.$input=a.$helpText=$([]),a.clearLocation(),a.closeDropdownClick=function(b){var c=a.$dropdown.get(0);c&&b.target!==c&&!$.contains(c,b.target)&&a.closeDropdown()}}).statics({GEO_WEBCLIENT_COOKIE:"geo_webclient",MS_WAIT_BETWEEN_GET_LOCATIONS:9e5,LOCATION_URL:"/account/location.json"}).methods({onRegisterTweetBox:function(a,b){var c=this,d=a.find(".geo-control");c.showGeoState(),d.find("a.geo-location").click(function(a){a.preventDefault(),d.find(".geo-location-dropdown").length||setTimeout(function(){$(".geo-control .geo-icon").tipsy("hide"),c.isLocationOn()?(c.openDropdown(d),b&&b()):c.isGeoEnabled()?c.turnLocationOn():(new twttr.widget.GeoPromoDialog).show()},0)}),d.find(".geo-icon").tipsy({gravity:"nw",offset:5,fade:!0,opacity:.9,title:function(){return c.isLocationOn()?"":h(_("Add your location"))}})},onFocusTweetBox:function(a){this.isLocationOn()&&!this.isUpdatingLocation()&&(!this.cityId()||this.now()-this.lastLocationTime>=this.constructor.MS_WAIT_BETWEEN_GET_LOCATIONS)&&this.updateLocation()},clearLocation:function(){this.location={},this.cache={},this.searchKeyShowing=null,this.$dropdown.remove(".override-location"),this.lastMessage="",this.lastFetchId=null},isUpdatingLocation:function(){return!!this.lastFetchId},updateLocation:function(a){var c=this;if(!c.isGeoUiAllowed()){c.processNewLocation(null);return}c.isUpdatingLocation()||(c.clearLocation(),c.showGeoState(a?_("Changing location..."):_("Getting location...")));var d={};c.lastFetchId=d,twttr.currentUser.geoLocation({override_place_id:a,spoof_ip:b.util.params().spoof_ip,success:function(a){c.lastFetchId===d&&c.processNewLocation(a)},error:function(a){if(c.lastFetchId===d){var b=a.status&&a.status===503;c.processNewLocation(b?{status:"busy"}:null)}}})},places:function(){return this.location&&this.location.places||[]},place:function(){return this.places()[0]||{}},cityId:function(){var a=this.place();return a.full_name&&a.id||""},cityName:function(){var a=this.place();return a.id&&a.full_name||""},isGeoUiAllowed:function(){return twttr.decider.isAvailable("geo_ui")&&twttr.decider.isAvailable("geo_location")},isGeoEnabled:function(){return twttr.currentUser&&twttr.currentUser.geoEnabled},isLocationOn:function(){return this.isGeoEnabled()&&!!$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE)},turnLocationOn:function(){$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE,"1",{expires:3650}),this.updateLocation()},turnLocationOff:function(){$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE,null),this.clearLocation(),this.showGeoState()},processNewLocation:function(a){var b=this;b.lastFetchId=null;var c=a&&a.status;if(c==="busy"||c==="ok")b.lastLocationTime=this.now();b.location=a,b.cache={},b.showGeoState(b.cityName()||c==="unresolved"&&_("Unknown location")||_("Location service unavailable")),b.inputChanged(),b.showPlaceSuggestions()},now:function(){return(new Date).getTime()},showGeoState:function(a){var b=this.isLocationOn();this.lastMessage=b&&(a||this.lastMessage)||"";var c=this.lastMessage!=="";$("span.geo-control span.geo-icon").toggleClass("geo-icon-on",b).toggleClass("geo-icon-ok",b&&!!this.cityId()),twttr.helpers.ellipsify($("span.geo-control span.geo-text").html(h(this.lastMessage)),!0),$("span.geo-control span.geo-dropdown-icon").toggle(c).css("visibility","visible")},openDropdown:function(a){var b=this;b.closeDropdown(),$(document).add("textarea").bind("click",b.closeDropdownClick);var c=(new twttr.views.GeoLocationDropdown).$html();b.$dropdown=c,b.$input=c.find("input"),b.$helpText=c.find(".help-text"),b.$helpText.click(function(a){a.preventDefault(),a.stopPropagation(),b.$input.focus()}),c.find(".geo-turn-off-item a").bind("select",function(){b.closeDropdown(),b.turnLocationOff()}).click(function(a){a.preventDefault(),$(this).trigger("select")}),c.find(".glass").click(function(a){a.stopPropagation(),b._updateSearchResults(!0)}),c.delegate(".override-location a","select",function(){b.updateLocation($(this).attr("data-place-id")),b.closeDropdown()}).delegate(".override-location a","click",function(a){a.preventDefault(),$(this).trigger("select")}).delegate(".focusable","mousemove",function(){b.setFakeFocus($(this))}).delegate(".focused","mouseout",function(){b.setFakeFocus(b.$empty)});var d=a.find(".geo-icon"),e=d.position(),f=Math.round(e.top+d.outerHeight());c.css({left:e.left,top:f}),b.searchKeyShowing=null,b.showPlaceSuggestions(),b.setupInput(),a.append(c),b.$input.focus().select()},closeDropdown:function(){this.$dropdown.remove(),this.$fakeFocus=this.$empty,$(document).add("textarea").unbind("click",this.closeDropdownClick)},showSearchError:function(a){this.$dropdown.find(".location-error").text(a)},showPlaceSuggestions:function(){var a=this.$dropdown,b=(new twttr.views.GeoLocationDropdownItems({places:this.places()})).html();a.find(".override-location").remove(),a.find(".geo-turn-off-item").before(b),a.find(".override-location:first").addClass("checked-item padding-above"),this.updateMenuSeparators()},updateMenuSeparators:function(){var a=this.$dropdown;a.find(".location-search-result:first").addClass("padding-above"),a.find(".override-location:last,").addClass("separator-below"),a.find(".location-search-result:last").addClass("separator-below"),a.find("li:last").removeClass("separator-below")},setupInput:function(){var a=this;a.$input.click(function(a){a.stopPropagation()}).keydown(function(c){c.stopPropagation();if(c.keyCode===b.constants.keyCodes.escape)a.closeDropdown();else switch(c.keyCode){case b.constants.keyCodes.upArrow:a.arrowUp(),a.arrowKeyDownEvent=!0,c.preventDefault();break;case b.constants.keyCodes.downArrow:a.arrowDown(),a.arrowKeyDownEvent=!0,c.preventDefault();break;case b.constants.keyCodes.enter:a.hasFakeFocus()?a.$fakeFocus.find("a").trigger("select"):a.updateSearchResults(!0);default:a.inputChanged()}}).keypress(function(c){c.stopPropagation();if(c.charCode===0&&!a.arrowKeyDownEvent)switch(c.keyCode){case b.constants.keyCodes.upArrow:a.arrowUp(),c.preventDefault();break;case b.constants.keyCodes.downArrow:a.arrowDown(),c.preventDefault()}a.arrowKeyDownEvent=!1}).keyup(function(a){a.stopPropagation()}).change(function(){a.inputChanged()}).mousedown(function(){a.setFakeFocus(a.$empty)}).focus(function(){a.setFakeFocus(a.$empty)})},arrowUp:function(){var a=this.$fakeFocus.prevAll(".focusable:first");a.length||(a=this.$dropdown.find(".focusable:last")),this.setFakeFocus(a)},arrowDown:function(){var a=this.$fakeFocus.nextAll(".focusable:first");a.length||(a=this.$dropdown.find(".focusable:first")),this.setFakeFocus(a)},hasFakeFocus:function(){return!!this.$fakeFocus.length},setFakeFocus:function(a){this.$fakeFocus.removeClass("focused"),this.$fakeFocus=a.addClass("focused")},inputChanged:function(){var a=this;setTimeout(function(){(a.$input.val()||"")!==""&&a.$helpText.hide(),setTimeout(function(){a.updateSearchResults(!1)},0)},0)},updateSearchResults:function(a){var b=this,c=b.$input.val()||"";a&&c?b.enterQuery=c:c!==b.enterQuery&&(b.enterQuery=null);if(b.isUpdatingLocation())return;var d=!b.enterQuery,e=(d?"~":"=")+c;e!=b.searchKeyShowing&&b.setFakeFocus(b.$empty);if(b.searchKeyShowing===e||b.searchKeySearching===e||d&&b.searchKeySearching)return;var f=c?b.cache[e]:[];f?b.showSearchResults(f,e):b.search(e)},centroid:function(){var a=this.place();if(!a.bounding_box||a.bounding_box.type!=="Polygon"||!a.bounding_box.coordinates)return null;var b=a.bounding_box.coordinates[0];return!b||b.length!==4?null:{lat:(b[0][1]+b[2][1])*.5,lon:(b[0][0]+b[2][0])*.5}},search:function(a){var b=this,c=a.charAt(0)==="~",d=a.substr(1);b.$dropdown.addClass("geo-location-dropdown-searching"),b.searchKeySearching=a,b.showSearchError(_("Searching places...")),twttr.API.Place.search(twttr.merge({max_results:5,granularity:"neighborhood",autocomplete:c?"true":"false",query:d,full_geom:"false",success:function(c){var d=twttr.geo.placesFromApi(c);b.cache[a]=d,b.searchKeySearching===a&&(b.searchKeySearching=null,b.showSearchError("")),b.$dropdown.removeClass("geo-location-dropdown-searching"),b.updateSearchResults()},error:function(){b.$dropdown.removeClass("geo-location-dropdown-searching"),b.searchKeySearching===a?(b.showSearchError(_("Location service unavailable")),b.searchKeySearching=null):b.updateSearchResults()}},b.centroid()))},showSearchResults:function(a,b){this.searchKeyShowing=b,a.length===0&&b.length>1&&this.showSearchError(_("No search results")),this.$dropdown.find(".location-search-result").remove();var c=(new twttr.views.GeoLocationDropdownItems({places:a,for_search_results:!0})).html();this.$dropdown.find(".query-location").after(c),this.updateMenuSeparators()}}),twttr.app.waitForSignal("init",function(a){twttr.geo.location=new twttr.geo.Location}),a(twttr.geo.Location)})}),provide("control/Dropdown",function(a){using().as(function(b){(function(){var a={view:"Control"};twttr.klass("twttr.control.Base",function(b){this.options=$.extend({},a,b),this.itemView=twttr.views.DefaultDropdownItem,this.options.itemView&&(this.itemView=twttr.is.string(this.options.itemView)?twttr.views[this.options.itemView]:this.options.itemView)}).methods(twttr.EventProvider).methods({render:function(a,b){var c=this.viewData();this.view=new twttr.views[this.options.view](c),this.$dropdown=this.view.$html(),$(a)[b](this.$dropdown)},viewData:function(){return this.options}}),twttr.augmentString("twttr.helpers.control",function(a,b){var c=twttr.klass("twttr.control."+a,b);return c.subclassOf(twttr.control.Base),c}),function(){var a={direction:"left",view:"Dropdown"},b=[];twttr.helpers.control("Dropdown",function(c,d){b.push(this),this.$controller=$(c);var d=$.extend({},a,d);this.items=d.items||[],twttr.control.Dropdown.uber.constructor.call(this,d),this.registerEvents()}).statics({_registeredHtmlClick:!1,caches:{},createCache:function(a){this.caches[a]={}},closeAll:function(){twttr.each(b,function(a){a.close()})}}).methods({defaultDividerView:twttr.views.DefaultDropdownDivider,registerEvents:function(){this.$controller.bind("click",twttr.bind(this,function(a){this.toggle()}))},applyDirection:function(){this.$dropdown.css({left:this.options.direction=="left"?"0":"auto",right:this.options.direction=="right"?"0":"auto"})},flushItems:function(){this.$dropdown.empty(),this.items=[]},setItemsFromCallback:function(){var a=this;a.flushItems(),a.itemsCallback(function(b){a.addItems(b),a.registerItemHandlers()})},disable:function(){this.close(),this.$controller.unbind("click")},enable:function(){this.registerEvents()},open:function(a){this.constructor.closeAll(),this.itemsCallback&&this.setItemsFromCallback(),this.$controller.addClass("open").addClass("button-active"),this.$dropdown.css({top:this.$container?this.$container.outerHeight():this.$controller.outerHeight(),visibility:"visible"}),a&&this.$dropdown.css({opacity:0}).animate({opacity:1},{duration:500,queue:!1});var b=twttr.bind(this,function(a){this.$controller.get(0)!==a.target&&!$.contains(this.$controller.get(0),a.target)&&($("#doc").unbind("click",b),this.close())});$("#doc").bind("click",b)},close:function(a){if(a){var b=this;this.$dropdown.animate({opacity:0},500,function(){b.$controller.removeClass("open").removeClass("button-active"),b.$dropdown.css("visibility","hidden"),b.$dropdown.css("opacity",1)})}else this.$controller.removeClass("open").removeClass("button-active"),this.$dropdown.css("visibility","hidden")},toggle:function(){this.$controller.hasClass("open")?this.close():this.open()},addItem:function(a,b,c){b=b||"appendTo",this.items.push(a);var d=this.getItemView(a).$html();return b=="insertBefore"||b=="insertAfter"?d[b](c):d[b](this.$dropdown),d},addItems:function(a){var b=this;b.items=b.items.concat(a);var c=twttr.map(b.items,function(a){return b.getItemView(a).html()});$(c.join("")).appendTo(b.$dropdown)},itemsFrom:function(a){this.itemsCallback=a},registerItemHandlers:function(){var a=this.$dropdown.children();for(var b=0;b<this.items.length;b++){var c=this.items[b];if(!c.handlers)continue;$.each(c.handlers,function(c,d){var e=$(a[b]),f=[c];twttr.is.array(d)?f=f.concat(d):f.push(d),e.bind.apply(e,f)})}},render:function(a,b,c){if(b==="before"||b==="after")this.$controller.parent().hasClass("drop-down-container")?this.$container=this.$controller.parent():this.$container=this.$controller.wrap('<div class="drop-down-container"/>').parent();return twttr.control.Base.prototype.render.apply(this,arguments),c&&(this.constructor.caches[c.key]||(this.constructor.caches[c.key]={}),this.constructor.caches[c.key][c.id]=!0),this.registerItemHandlers(),this.applyDirection(),this},getItemView:function(a){return a.itemView?new twttr.views[a.itemView](a):a.divider?new this.defaultDividerView:new this.itemView(a)},viewData:function(){var a=this,b=twttr.map(this.items,function(b,c){return a.getItemView(b).html()});return{items:b.join("")}}})}()})(),a(twttr.control.Dropdown)})}),provide("widget/Dialog",function(a){using("constants","util").as(function(b){twttr.provide("twttr.dialogs"),twttr.dialogs.defaultOptions={modal:!1,stackPreviousModal:!1,draggable:!1,closable:!0,closeOnClickOutside:!1,closeOnNavigate:!1,destroyOnClose:!0,css:{width:500,height:"auto"},fixed:!0,template:{container_id:null,title:null,footer:null,content:null}};var c=!1,d=function(){c=!0;var a=$("<div>",{height:100,width:100,position:"absolute",top:-300,left:-300}).prependTo($("body")),b=$("<div>",{height:200}).appendTo(a);a.css("overflow-y","scroll");var d=a.width()-b.width();a.remove(),$("head").append("<style>          .modal-enabled,          .modal-enabled .global-nav-inner {            margin-right: "+d+"px        } </style>")},e=twttr.klass("twttr.widget.Dialog",function(a){var c=this;this.options=twttr.merge({},twttr.dialogs.defaultOptions,a||{},!0),this.options.template.closable=this.options.closable,this._isOpen=!1,this.view=new twttr.views[this.options.view||this.constructor._name](this.options),twttr.isT1?(this.options.modal=!0,this.$container=this.view.render(this.options.node||$(".twttr-dialog-wrapper"),"append")):this.$container=this.view.render(this.options.node||"body","append"),this.$dialog=this.$container.find(".twttr-dialog"),this.$title=this.$container.find(".twttr-dialog-header h3"),twttr.isT1?this.$container.css(twttr.merge({top:$(".js-banners").height()},this.options.css)):this.$dialog.css(this.options.css),this.$dialog.attr("data-component-term",b.util.underscore(this.constructor._name)),twttr.is.nil(c.options.template.footer)&&this.$container.find(".twttr-dialog-footer").hide(),this.options.draggable&&this.applyDraggability(),this.options.modal&&(this.$overlay=$('<div class="twttr-dialog-overlay"></div>').appendTo($("body"))),this._escKeyHandler=function(a){c.options.closable&&a.keyCode===b.constants.keyCodes.esc&&(c.close(),a.stopPropagation())};if(this.options.closeOnClickOutside||this.options.modal)this._clickOutsideHandler=function(a){!$.contains(c.$container.get(0),a.target)&&($.contains(document.body,a.target)||document.body===a.target)&&(c.close(),c.options.modal||(a.preventDefault(),a.stopPropagation()))};if(this.options.closeOnNavigate){var d=twttr.bind(this,this.close);twttr.router.bind("routeFollowed",d),this.bind("close",function(){twttr.router.unbind("routeFollowed",d)})}this.registerEvents()}).statics(twttr.EventProvider).statics({currentModal:!1,close:function(){var a=0;while(this.currentModal&&a++<8)this.currentModal.close()}}).methods(twttr.EventProvider).methods({$find:function(a){return this.$container.find(a)},registerEvents:function(){var a=this;this.$find("textarea, input[type=text], input[type=password]").bind("keydown keypress keyup",function(c){twttr.components.Autocomplete._isCompletionsOpen||(c.stopPropagation(),c.type==="keydown"&&c.keyCode===b.constants.keyCodes.esc&&a.close())}),this.$container.delegate(".twttr-dialog-close","click",function(b){b.preventDefault(),b.stopPropagation(),a.close()}),twttr.router.bind("urlChanged",this.urlChangedListener=function(b,c){a.close()});if($.browser.mozilla&&$.browser.version.slice(0,1)=="8"){var c=null;this.bind("close",function(){twttr.$win.scrollTop(c)}),this.bind("open",function(){c=twttr.$win.scrollTop()})}},applyDraggability:function(){var a=this;this.$container.addClass("draggable").draggable({cursor:"move",handle:this.$container.find(".js-twttr-dialog-draggable"),start:function(){a.$container.addClass("unselectable"),$("#doc").addClass("unselectable")},stop:function(){a.$container.removeClass("unselectable"),$("#doc").removeClass("unselectable")},cancel:":input,option,.js-twttr-dialog-not-draggable"})},toggle:function(){return this[this._isOpen?"close":"open"](),this},open:function(){c||d();var a=this;return twttr.widget.Dialog.currentModal&&(this.options.stackPreviousModal&&this.options.modal?(this.previousModal=twttr.widget.Dialog.currentModal,this.previousModal._close()):twttr.widget.Dialog.close()),this.options.modal&&(twttr.widget.Dialog.currentModal=this,this.$overlay.show(),$("body").addClass("modal-enabled")),this.position(),this.$container.css({visibility:"visible",display:"block"}),this.trigger("open"),twttr.widget.Dialog.trigger("open"),this._isOpen=!0,twttr.$win.bind("keydown",this._escKeyHandler),this._clickOutsideHandler&&setTimeout(function(){$("body").bind("click",a._clickOutsideHandler)},0),this},_close:function(){return this.options.modal&&(twttr.widget.Dialog.currentModal=!1,this.$overlay.hide(),$("body").removeClass("modal-enabled")),document.activeElement&&$.contains(this.$container.get(0),document.activeElement)&&$(document.activeElement).blur(),this.$container.css({visibility:"hidden",display:"none"}),$(".tipsy").remove(),this.trigger("close"),twttr.widget.Dialog.trigger("close"),this._isOpen=!1,twttr.$win.unbind("keydown",this._escKeyHandler),this._clickOutsideHandler&&$("body").unbind("click",this._clickOutsideHandler),this.previousModal&&(this.previousModal.open(),delete this.previousModal),this},show:function(){return this.open()},hide:function(){return this._close()},setFooterText:function(a){this.$find(".twttr-dialog-footer").html(a)},setError:function(a){this.$find(".twttr-dialog-error").show().html(_("<p>{{message}}</p>",{message:a}))},clearError:function(){this.$find(".twttr-dialog-error").hide().empty()},position:function(){this.options.fixed||this.$container.addClass("static");var a=$(window).scrollTop(),b=this.$container.innerHeight(),c=$(window).height(),d=Math.round(c/2-b/2);this.options.fixed||(d+=a);var e=this.$container.innerWidth(),f=$(window).width(),g=twttr.i18n&&twttr.i18n.rtl?"right":"left",i=Math.round(f/2-e/2);d=this.options.positioning&&this.options.positioning.top?this.options.positioning.top:d,i=this.options.positioning&&this.options.positioning.left?this.options.positioning.left:i;var j={top:d};return j[g]=i,this.$container.css(j),this},destroy:function(){return this._close(),this.remove(),this},remove:function(){return this.$container.unbind().remove(),this.$overlay&&this.$overlay.unbind().remove(),this._isOpen=!1,this},close:function(){return this[this.options.destroyOnClose?"destroy":"_close"]()},isOpen:function(){return this._isOpen}});twttr.isT1&&e.methods({position:twttr.util.noopInT1}),a(e)})}),provide("dialogs",function(a){using("_","constants").as(function(b,_){twttr.aug(twttr.dialogs,{reply:function(a,b){var c=a.dataFields||twttr.TweetBox._getDefaultContentForReply(a.$tweet,a.screenName,twttr.currentUserScreenName),d={multiple:c.multiple,modal:!0,draggable:!0,defaultContent:c.defaultContent,template:{title:_("Reply to @<strong>{{screen_name}}</strong>",{screen_name:a.screenName}),footer:""},data:a,origin:a.origin};return b?d:new twttr.widget.ReplyDialog(d)},directMessage:function(a){if(twttr.isT1)var b=twttr.widget.DirectMessageDialog.views.newConversation;else var c=twttr.assets.path("sticky/default_profile_images/default_profile_6_mini.png",{isVersioned:!1}),b={modal:!1,draggable:!0,basic:!1,template:{title:_("Message")+' <div><img class="avatar" src="'+c+'"/> <input class="twttr-directmessage-input" type="text"/></div> <span class="twttr-dm-check"/>',footer:_("Tip: you can send a message to anyone who follows you")},origin:a.origin};return new twttr.widget.DirectMessageDialog(b)},dmSingle:function(a){return twttr.isT1?new twttr.widget.DirectMessageDialog(twttr.widget.DirectMessageDialog.views.conversation,a.user.screenName):(twttr.merge(a,{draggable:!0,basic:!1,template:{title:'<img src="'+a.user.profile_image_url+'"/> '+_("<strong>Send <b>{{user_name}}</b> a message</strong>",{user_name:a.user.name})}}),new twttr.widget.DirectMessageDialogSingle(a))},keyboardShortcuts:function(){return twttr.dialogs._keyboardShortcuts=twttr.dialogs._keyboardShortcuts||new twttr.widget.Dialog({css:{width:twttr.loggedIn?600:300},modal:!0,draggable:!0,destroyOnClose:!1,template:{title:_("Keyboard shortcuts"),content:(new twttr.views.KeyboardShortcuts).html()}}),twttr.dialogs._keyboardShortcuts},discoverable:function(){var a=twttr.currentUser,b={help_url:twttr.router.helpDiscoveryPath(),email_checked:!a.emailDiscoverabilitySet||a.discoverableByEmail,phone_checked:!a.mobilePhoneDiscoverabilitySet||a.discoverableByMobilePhone};return new twttr.widget.DiscoveryDialog(twttr.merge(b,a.attributes))},verifyEmail:function(a){return new twttr.widget.VerifyEmailDialog(a,twttr.currentUser)},retweet:function(a,b,c){var d,e,f=twttr.isT1&&twttr.currentUser&&new Date(2012,6,3)<new Date(twttr.currentUser.createdAt)&&twttr.abdecider.choose("change_deutsch_verbs_229")==="change_verbs";f?(d="Diesen Tweet mit Deinen Followern teilen?",e="Teilen"):(d=_("Retweet this to your followers?"),e=_("Retweet"));var g={modal:!0,draggable:!0,callback:c,template:{title:d,container_id:"retweet-dialog",footer:"",content:(new twttr.views.Prompt({ok:e,cancel:_("Cancel")})).html()},data:{tweetId:a},tweetText:b,css:{width:500}};return new twttr.widget.RetweetDialog(g)},deleteMessage:function(a){var b={modal:!0,stackPreviousModal:!0,draggable:!0,callback:a,template:{title:_("Are you sure you want to delete this message?")},css:{width:450}};return new twttr.widget.Prompt(b)},deleteSavedSearch:function(a){return new twttr.widget.Prompt({modal:!0,template:{title:_("Are you sure you want to delete this search?"),content:(new twttr.views.Prompt({ok:_("Yes"),cancel:_("No")})).html()},callback:a})},goToUser:function(){var a={modal:!0,draggable:!0,template:{title:_("Go to a person's profile"),content:'<input class="twttr-goto-user-input" type="text"/>'},css:{width:450},positioning:{top:75}},c=new twttr.widget.Dialog(a),d=c.$find(".twttr-goto-user-input"),e=function(a){c.close(),twttr.router.one("routed",function(){$('<input type="text"/>').css({position:"absolute",top:0,left:0}).appendTo("body").focus().remove()});var b=a.replace("@","").split("/");b.length===1?(screen_name=b[0],twttr.API.User.find(screen_name,{success:function(a){twttr.router.routeTo(twttr.router.profilePath({screen_name:screen_name}))},error:function(a){twttr.router.routeTo(twttr.router.userSearchPath({query:screen_name}))}})):twttr.router.routeTo(twttr.router.userListPath({screen_name:b[0],list_slug:b[1]}))},f=new twttr.components.Autocomplete({limit:8,input:d,type:"username",preselect:!0,defaultResults:[{format:function(a){return(new twttr.views.CurrentTextUserAutocompleteItem({screenname:a.charAt(0)==="@"?a.substring(1):a})).html()},show:function(a,b){for(var c in b)if(b[c][1]===a)return!1;return!0}}]});return f.bind("select",function(a,b,c,d,f,g){e(f)}),d.bind("keypress",function(a){a.keyCode===b.constants.keyCodes.enter&&!f._isCompletionsOpen&&(a.preventDefault(),e(d.val()))}),c.bind("open",function(){d.focus()}),c},searchFacets:function(a){if(!twttr.decider.isAvailable("phoenix_facets"))return!1;var c={modal:!0,draggable:!0,template:{title:a==="photos"?_("Search photos"):_("Search videos"),content:'<input class="twttr-search-facets-input" type="text"/>'},css:{width:450},positioning:{top:75}},d=new twttr.widget.Dialog(c),e=d.$find(".twttr-search-facets-input");return e.bind("keypress",function(c){c.keyCode===b.constants.keyCodes.enter&&(c.preventDefault(),d.close(),twttr.router.one("routed",function(){$('<input type="text"/>').css({position:"absolute",top:0,left:0}).appendTo("body").focus().remove()}),twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:e.val(),mode:a})))}),d.bind("open",function(){e.focus()}),d},_trendsOptions:function(){return options={draggable:!0,css:{width:520},template:{title:_("Choose a trend location")}}},trends:function(){return arguments.callee._ret=arguments.callee._ret||new twttr.widget.TrendsDialog(this._trendsOptions())},signinOrSignup:function(a){a=a||{};var c=a.follow?a.follow.screenName:!1,d={screen_name:c,signup_source:twttr.audit.currentPage()};if(c)d.redirect_after_login=twttr.router.profilePath(d);else if(twttr.audit.currentPage()==="permalink"||twttr.audit.currentPage()==="profile"||twttr.audit.currentPage()==="search")d.redirect_after_login=twttr.audit.currentPath();var e=c?_("Sign in to Twitter &amp; follow @{{screen_name}}",d):_("Sign in to Twitter");a.justSignup&&(d.is_signup_only=!0,d.guest_modal=!0,d.signup_source=twttr.audit.currentPage(),e=c?_("Sign up for Twitter &amp; follow @{{screen_name}}",d):_("Sign up for Twitter"));var f=new twttr.widget.Dialog({css:{width:500},modal:!0,draggable:!0,template:{title:e,content:(new twttr.views.SigninOrSignup(d)).html()}}),g=f.$find("form.signin"),i=g.find(".textbox input");return a.justSignup&&f.$dialog.addClass("signup-only-dialog"),twttr.helpers.addHoldingInputEvents(g),twttr.helpers.addFormEvents(g),i.bind("keypress",function(a){a.keyCode===b.constants.keyCodes.enter&&$(this).val()&&(a.preventDefault(),g.submit())}),f.bind("open",function(){i.first().focus();var b={section:"auth_dialog",component:a.follow?"unauth_follow":"unauth_action",action:"open"};trackClient(b,twttr.audit.currentPage())}),f.$find("form").bind("submit",function(){setTimeout(function(){f.close(),trackClient({section:"auth_dialog",component:"signup_form",action:"signup_click"},twttr.audit.currentPage())},0)}),f},signupModalDialogGuest:function(a,b){var c=[],d=[],e=0;for(var f=0;f<a;f++)twttr.API.User.find(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-f-1],{success:function(f){c.push({name:f.name,screen_name:f.screenName,profile_image_url:f.profileImageUrl,id:f.id,description:"@"+f.screenName,count_num:e}),d.push(f.screenName),e++;if(e==a){var g={screen_names:d.join(","),signup_source:twttr.audit.currentPage(),user_data_list:c,guest_modal:!0},i=new twttr.widget.Dialog({css:{width:575},modal:!0,draggable:!0,template:{title:_("Follow your interests on Twitter!"),content:(new twttr.views.GuestModalSignup(g)).html()}});$signup=i.$find("form.signup-btn"),$inputs=$signup.find(".textbox input"),twttr.helpers.addFormEvents($signup),twttr.helpers.addHoldingInputEvents($signup),i.bind("open",function(){$inputs.first().focus()});var j=i.$find("input[type=checkbox]");j.bind("click",function(a){var b=i.$find("input[type=checkbox]:checked"),c=$.map(b,function(a,b){return a.value}).join(",");$signup.find("input[name=follows]").val(c)}),i.$find("form").bind("submit",function(){i.close(),trackClient({section:"profiles_viewed_dialog",component:"signup_form",action:"signup_click"},twttr.audit.currentPage())}),b(i)}}})},searchOperators:function(){return twttr.dialogs._searchOperators=new twttr.widget.Dialog({css:{width:600},modal:!1,draggable:!0,template:{title:_("Search Operators"),content:(new twttr.views.SearchOperators).html()}}),twttr.dialogs._searchOperators},smsCodes:function(){return twttr.dialogs._smsCodes=twttr.dialogs._smsCodes||new twttr.widget.Dialog({modal:!1,draggable:!0,template:{title:_("Two-way (sending and receiving) short codes:"),content:(new twttr.views.SmsCodes).html()}}),twttr.dialogs._smsCodes},sensitiveFlagConfirmation:function(a){var b=new twttr.widget.Prompt({modal:!1,draggable:!0,template:{title:_("Flag this media"),content:(new twttr.views.SensitiveFlagConfirmation).html()},callback:function(c){c&&(b.$find("#sensitive-settings-checkbox").attr("checked")&&twttr.currentUser.updateViewPossiblySensitive(!1,{success:function(){twttr.showMessage(_("Your media display settings have been changed."))},error:function(a){twttr.showError(_("Couldn't set inline media settings."))}}),b.$find("#sensitive-illegal-checkbox").attr("checked")&&a())}});return b},embedCode:function(a){return new twttr.widget.EmbedDialog(a)}}),a(twttr.dialogs)})}),provide("widget/TweetDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.TweetDialog",function(a){a=twttr.merge({basic:!0,modal:!0,fixed:!0},a),a.template=twttr.merge({show_geo:!0,container_id:"tweet_dialog"},a&&a.template),a=$.extend(!0,{basic:!0,template:{show_geo:!0,container_id:"tweet_dialog"}},a),twttr.widget.TweetDialog.uber.constructor.call(this,a),this._ready=!1}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.view.bind("ready",twttr.bind(this,function(){this._ready=!0,setTimeout(twttr.bind(this,function(){this.onReady()}),0)})),this.view.tweetBox.bind("tweetSuccess",twttr.bind(this,function(a,b,c){c==="reply"&&b.inReplyToScreenName?twttr.showMessage(_("Your Tweet to @{{username}} has been sent!",{username:b.inReplyToScreenName})):(twttr.showMessage(_("Your Tweet was posted!")),$(document).trigger("tweetSuccess",b)),this.destroy()})),this.view.tweetBox.bind("dmSuccess",twttr.bind(this,function(b,c){twttr.is.def(twttr.messageManager)&&twttr.messageManager.addMessage(c),twttr.showMessage(_("Your message was sent!")),a.close()})),this.view.tweetBox.bind("dmFail",twttr.bind(this,function(b,c){a.close()})),this.options.basic&&this.view.tweetBox.bind("titleChanged",twttr.bind(this,function(a,b){this.$title.html(b||this.options.template.title)}))},onReady:function(){var a=[];return function(b){b?a.push(b):(twttr.each(a,function(a){a()}),a=[])}}(),open:function(){return twttr.widget.Dialog.prototype.open.call(this),this.onReady(twttr.bind(this,function(){setTimeout(twttr.bind(this,function(){this.options.defaultContent&&(this.focus(),this.setContent(this.options.defaultContent))}),0)})),this},setContent:function(a){return this.view.tweetBox.editor.setContent(a),this},setCaretPosition:function(a,b){b=b||a;var c=this.view.tweetBox.editor.$editor[0];if(c.setSelectionRange)c.focus(),c.setSelectionRange(a,b);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveStart("character",a),d.moveEnd("character",b),d.select()}},focus:function(){if(this.options.defaultContent){var a=this.view.tweetBox.editor.$editor.val().length;this.setCaretPosition(a)}else this.view.tweetBox.editor.focus();return this}}),a(twttr.widget.TweetDialog)})}),provide("widget/Prompt",function(a){using("_","constants").as(function(b,_){var c=twttr.isT1?"primary-btn":"selected";twttr.klass("twttr.widget.Prompt",function(a){var b={view:"Dialog",template:{content:(new twttr.views.Prompt({ok:_("Yes"),cancel:_("No")})).html()}};this.options=twttr.merge({},b,a,!0),twttr.widget.Prompt.uber.constructor.call(this,this.options)}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this),this.$ok=this.$container.find(".js-prompt-ok"),this.$cancel=this.$container.find(".js-prompt-cancel"),this.$ok.addClass(c).bind("click",twttr.bind(this,function(a){a.preventDefault(),this.close(),this.options.callback(!0)})),this.$cancel.bind("click",twttr.bind(this,function(a){a.preventDefault(),this.options.callback(!1),this.close()})),this.$container.bind("keypress",twttr.bind(this,function(a){a.stopPropagation();if(a.metaKey)return;if(a.keyCode===b.constants.keyCodes.tab)this.$cancel.toggleClass(c),this.$ok.toggleClass(c);else if(a.keyCode===b.constants.keyCodes.enter||a.keyCode===b.constants.keyCodes.spacebar)a.preventDefault(),this.options.callback(this.$ok.hasClass(c)),this.close()})),this._$tabInput=$('<input type="text" class="twttr-hidden-input"/>').appendTo(this.$dialog).bind("keypress",function(a){a.preventDefault()})},open:function(){return twttr.widget.Dialog.prototype.open.call(this),setTimeout(twttr.bind(this,function(){this._$tabInput.focus()}),10),this}}),a(twttr.widget.Prompt)})}),provide("widget/DeviceSetupDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.DeviceSetupDialog",function(a){a=twttr.merge({modal:!0,draggable:!0,css:{width:550,height:"auto"},positioning:{top:80},template:{title:_("Get notifications and Tweet via SMS"),content:(new twttr.views.DeviceSetupDialog).html()}},a||{},!0),a.view="Dialog",this._fetchStatus();var b=this;this._carriers=twttr.API.Device.carriers({success:function(a){b._carriers=a}}),twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).statics({POLLING_DELAY:15e3}).methods({close:function(){this._clearDelayedStatusFetch(),twttr.widget.Dialog.prototype.close.call(this)},_fetchStatus:function(){this._clearDelayedStatusFetch();var a=this;twttr.API.Device.list({success:twttr.bind(this,this._updateStatus),error:function(b){a.close(),twttr.showError(b.response.error.message)}})},_fetchStatusDelayed:function(){this._fetchTimeout=window.setTimeout(twttr.bind(this,this._fetchStatus),twttr.widget.DeviceSetupDialog.POLLING_DELAY)},_clearDelayedStatusFetch:function(){this._fetchTimeout&&(window.clearTimeout(this._fetchTimeout),this._fetchTimeout=null)},_updateStatus:function(a){if(a.length==0)this._showCreate();else{var b=a[0];b.verified?this._showVerified(b):this._showWaiting(b)}},_showCreate:function(){var a=this,b=this.$container.find(".twttr-dialog-device-setup"),c=new twttr.views.DeviceSetupDialogCreate;b.empty().append('<div class="loading"></div>'),this._carriers.get(function(d){b.empty();var e=c.render(b,"append"),f=e.find("select.country-or-region"),g=e.find("select.country-in-region"),i=e.find("select.carrier"),j=e.find("select.language"),k=!1;for(var l=0;l<d.regionsAndCountryCodes.length;++l){var m=d.regionsAndCountryCodes[l];m[0]=="-------------"?$('<option disabled="disabled">').text(m[0]).val(m[1]).appendTo(f):$("<option>").text(m[0]).val(m[1]).appendTo(f)}var n=function(){var a=$(this),b=a.find("option:selected"),c=b.text(),f=b.val();if(d.countries[c]){var l=c;g.empty();var m=d.countries[l];for(var o=0;o<m.length;++o){var p=m[o];$("<option>").text(p[0]).val(p[1]).appendTo(g)}g.parents(".field").first().show(),n.call(g.get(0));return}var q=c;e.find(".country-code").text(f),a.hasClass("country-or-region")&&(g.empty(),g.parents(".field").first().hide()),i.empty(),j.empty();var r=d.carriers[q],s=d.languages[q];k=!1;if(d.countries[_("Satellite")])for(var o=0;o<d.countries[_("Satellite")].length;o++)if(d.countries[_("Satellite")][o][0]==q){k=!0;break}if(r){for(var o=0;o<r.length;++o){var t=r[o];$("<option>").text(t.display).val(t.value).appendTo(i)}k?i.parents(".field").first().hide():i.parents(".field").first().show()}else i.parents(".field").first().hide();if(s){for(var o=0;o<s.length;++o){var u=s[o];$("<option>").text(u.display).val(u.value).appendTo(j)}j.parents(".field").first().show()}else j.parents(".field").first().hide()};f.change(n),g.change(n),n.call(f.get(0)),twttr.helpers.addFormEvents(e.find("form"),function(b,c){var d=$(this);c.device_country_intl_prefix=d.find(".country-code").text(),d.find(".error").removeClass("error"),d.find(".error-text").remove(),d.addClass("submitting"),twttr.API.Device.create(c,{success:function(b){d.removeClass("submitting");var e=b.devices[0];b.duplicate?a._showDuplicate(e,c):b.errors?a._showCreateErrors(d,b.errors):(k||(e.carrier_name=i.find(":selected").text()),a._showWaiting(e))},error:function(a){d.removeClass("submitting");var b=a.response.errors;b&&b.length&&b[0].message?twttr.showError(b[0].message):twttr.showError(_("Whoops! Something went wrong. Please try again!"))}})})})},_showCreateErrors:function(a,b){var c=b.device;for(var d=0;d<c.length;++d){var e=c[d],f=a.find("input[name='device["+e[0]+"]']"),g=f.parents(".field").first();$error=$("<div>").addClass("error-text").text(e[1]),g.addClass("error"),g.find(".label").first().append($error)}},_showDuplicate:function(a,b){this._updateDeviceForRendering(a);var c=this,d=this.$container.find(".twttr-dialog-device-setup");d.empty();var e=(new twttr.views.DeviceSetupDialogDuplicate(a)).render(d,"append");e.find(".retry").click(function(a){a.preventDefault();var d=$(this);if(d.hasClass("disabled"))return;d.addClass("disabled"),twttr.API.Device.create(b,{success:function(a){d.removeClass("disabled"),a.duplicate||(a.errors?c._showCreate():c._showWaiting(a.devices[0]))},error:function(){d.removeClass("disabled")}})}),e.find(".cancel-instructions a").click(function(a){a.preventDefault(),c._showCreate()})},_showWaiting:function(a){this._fetchStatusDelayed();var b=this,c=this.$container.find(".twttr-dialog-device-setup"),d=c.find(".twttr-dialog-device-setup-waiting");if(d.length)return;c.empty(),this._updateDeviceForRendering(a),d=(new twttr.views.DeviceSetupDialogWaiting(a)).render(c,"append"),d.find(".refresh a").click(function(a){a.preventDefault(),b._fetchStatus()}),d.find(".cancel-instructions a").click(function(c){c.preventDefault(),b._clearDelayedStatusFetch(),twttr.API.Device.destroy(a.id,{success:twttr.bind(b,b._showCreate)})})},_showVerified:function(a){var b=this.$container.find(".twttr-dialog-device-setup");b.empty(),this._updateDeviceForRendering(a),(new twttr.views.DeviceSetupDialogVerified(a)).render(b,"append")},_updateDeviceForRendering:function(a){a.address_without_country_code=a.address.replace("+"+a.country_code,""),a.stop_command="Stop",a.go_command="Go"}}),a(twttr.widget.DeviceSetupDialog)})}),provide("widget/InviteContactsDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.InviteContactsDialog",function(a,b){b=b||{},this.routeToHome=b.routeToHome,b.template=b.template||{},b.template.title=b.template.title||_("Invite your friends who aren't on Twitter"),b.template.content=b.template.content||"",defaultOptions={modal:!0,draggable:!0},b=twttr.merge({},defaultOptions,b,!0),b.view="Dialog",twttr.widget.Dialog.call(this,b);var c=b.onSuccess||$.noop,d=this,e={onSuccess:function(){c.call(d)},onSubmit:function(){d.clearError()},showError:function(a){d.setError(a)},scribbler:b.scribbler,clientEventComponent:"invite_contacts_dialog"},f=new twttr.components.InviteContacts(a,e);this.$container.find(".twttr-dialog-content").append(f.$node),this.$container.find(".twttr-dialog-footer").remove()}).subclassOf(twttr.widget.Dialog).methods({close:function(){this.constructor.uber.close.call(this),this.routeToHome&&twttr.router.routeTo(twttr.router.homePath())}}),a(twttr.widget.InviteContactsDialog)})}),provide("widget/ListDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.ListDialog",function(a){a=a||{},a.template=a.template||{},a.template.title=a.template.title||a.list?_("Edit list details"):_("Create a new list"),a.template.content=a.template.content||(new twttr.views.ListDialog(a.list)).html(),twttr.is.def(a.modal)||(a.modal=!0),twttr.is.def(a.draggable)||(a.draggable=!0),a.view="Dialog",twttr.is.fn(a.onSuccess)||(a.onSuccess=function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:a.slug}))}),twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).methods({open:function(){twttr.widget.Dialog.prototype.open.call(this),this.$container.find("input[name=name]").focus()},registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this);var b=this.$container.find(".update-list-button");this.$container.find(".field .text").bind("focus blur keyup",function(a){this.value.length?b.removeClass("disabled"):b.addClass("disabled")}),b.click(function(b){if($(this).hasClass("disabled"))return;$(this).addClass("disabled");var c={name:a.$container.find("[name=name]").val(),description:a.$container.find("[name=description]").val(),mode:a.$container.find("[name=mode]:checked").val(),error:function(b){twttr.helpers.showErrorFromResponse(b),$(a).removeClass("disabled")},complete:function(b){a.close()}};a.options.list?a.options.list.update(twttr.merge(c,{success:function(b){twttr.showMessage(_("List updated!")),a.options.onSuccess(b)}})):twttr.currentUser.lists.create(c.name,twttr.merge(c,{success:function(b){twttr.showMessage(_("List created!")),a.options.onSuccess(b)}}))})},close:function(){this.constructor.uber.close.call(this),this.remove()}}),a(twttr.widget.ListDialog)})}),provide("components/t1/DirectMessageDialog",function(a){using("widget/Dialog","constants","TweetBox",function(b,c,d){var e=twttr.klass("twttr.widget.DirectMessageDialog",function(a,b,c){twttr.messageManager._fetchMessages(),c=c||{},d=c.tweetBox||d,twttr.widget.Dialog.call(this,{modal:!0,draggable:!0,view:"DirectMessageDialog",closeOnNavigate:!0,template:{footer:!0},positioning:{top:55}}),this.initComponentEvents(this.$container);var e=this;twttr.messageManager.bind("updatedThread",function(a,b,c,d){e._updateConversation(b,c,d)}),twttr.messageManager.bind("deletedThread",function(a,b){e._deleteThread(b)}),this._hideTweetBox(),this.tweetBox=new d(".twttr-dialog-container .js-dm-tweetbox",{data:{getUser:twttr.bind(this,this._getRecipient)},closeAfterSuccess:!1,condensed:!1,width:450,height:56,statusAction:"directMessage",displayError:!1,template:{button_text:_("Send message"),show_geo:!1,show_turkey:!1,show_title:!1}}),this.tweetBox.bind("dmSuccess",function(a,b,c){twttr.messageManager.addMessage(b,!0),e.switchToConversationView(b.threadId)}),this.tweetBox.bind("dmError",function(a,b){var b=twttr.errors.getViewForErrorCode(b,"dm").html();e._showError($("<span>").html(b))}),this.tweetBox.bind("error",function(a,b){e._showError(b)});var e=this;a=a||twttr.widget.DirectMessageDialog.views.conversationList,this.bind("close",function(){twttr.messageManager.unbind("updatedThread"),twttr.messageManager.unbind("deletedThread")}),this.bind("open",function(){switch(a){case twttr.widget.DirectMessageDialog.views.newConversation:e.switchToNewMessageView(b),e._trackClientDialogImpression("dm_new_conversation");break;case twttr.widget.DirectMessageDialog.views.conversation:e.switchToConversationView(b),e._trackClientDialogImpression("dm_existing_conversation");break;case twttr.widget.DirectMessageDialog.views.conversationList:default:e.switchToConversationListView(),e._trackClientDialogImpression("dm_conversation_list")}})}).subclassOf(b).mixin(twttr.mixins.componentEvents,twttr.mixins.i18nTweet).statics({views:{conversationList:1,conversation:2,newConversation:3}}).methods({_getRecipient:function(){var a=this.$find(".js-dm-conversation[data-thread-id]").attr("data-thread-id");return a||this.$find(".js-dm-user-autocomplete").val()},_trackClientDialogImpression:function(a){trackClient({component:a,action:"open"},{})},_trackClientDelete:function(a){trackClient({component:"direct_message",action:"delete"},{item_ids:[a],item_count:1})},switchToConversationListView:function(){var a=this;this._updateHeader({conversation_list:!0}),this._hideTweetBox(),twttr.messageManager.getAllThreads(function(b){a._updateContent("DirectMessageDialogConversationList",{threads:b}),a.$find("div.dm-thread-content").each(function(){a.updateRtlDisplay($(this))})})},switchToConversationView:function(a){var b=this;twttr.messageManager.getThread(a,function(c){if(!c){b.switchToNewMessageView(a);return}var d=c.messages[0],e=twttr.helpers.isCurrentUser(d.recipient)?d.sender:d.recipient;b._updateHeader({conversation:!0,name:e.name}),b._updateContent("DirectMessageDialogConversation",c),b.$find("div.dm-content").each(function(){b.updateRtlDisplay($(this))}),b._showTweetBox(a),b.tweetBox.focus(),b.$find("a.js-dm-delete").tipsy({gravity:"s"});var f=b.$find(".js-dm-conversation");f.scrollTop(f[0].scrollHeight),twttr.messageManager.markThreadAsRead(c.threadId)})},switchToNewMessageView:function(a){var b=this;this._updateHeader({new_dm:!0}),this._updateContent("DirectMessageDialogNew",{}),twttr.components.Autocomplete.getAutocompletedUsers(function(){b.autocomplete=new twttr.components.Autocomplete({limit:8,input:b.$find(".js-dm-user-autocomplete")}),b.autocomplete.bind("select",function(a,c,d,e,f,g){b._setProfileImageUrl(e),b.switchToConversationView(f),b.tweetBox.focus()}),b.autocomplete.bind("hide",function(){!b.$find(".js-dm-user-autocomplete:focus").length&&b._verifyUser()}),b._setProfileImageUrl(),b.autocomplete.focus(),a&&(b.autocomplete.set(a),b._verifyUser())}),this._showTweetBox()},_updateConversation:function(a,b,c){var d=this._getCurrentView();switch(d){case twttr.widget.DirectMessageDialog.views.conversationList:this._updateConversationListView(a,b);break;case twttr.widget.DirectMessageDialog.views.conversation:this._updateConversationView(a,b,c)}},_deleteThread:function(a){this.$find(".js-dm-threads .js-dm-thread[data-thread-id="+a+"]").remove(),this.$find(".js-dm-conversation[data-thread-id="+a+"]").empty()},_updateConversationListView:function(a,b){var c=this.$find(".js-dm-threads"),d=c.find(".js-dm-thread[data-thread-id="+a.threadId+"]"),e=$((new twttr.views.DirectMessageDialogConversationListItem(a)).html());d.length>0&&d.replaceWith(e),d=e,b==="new"&&c.find(".js-dm-thread-list").prepend(d)},_updateConversationView:function(a,b,c){var d=this.$find(".js-dm-conversation[data-thread-id="+a.threadId+"]");if(d.length>0){var e=d.find(".js-dm-item[data-message-id="+c.messageId+"]");switch(b){case"new":if(e.length)break;d.append((new twttr.views.DirectMessageDialogConversationItem(c.message)).html()),d.animate({scrollTop:d.attr("scrollHeight")},500);break;case"delete":e.remove()}twttr.messageManager.markThreadAsRead(a.threadId)}},_getCurrentView:function(){return this.$find(".js-dm-threads").length>0?twttr.widget.DirectMessageDialog.views.conversationList:this.$find(".js-dm-conversation").length>0?twttr.widget.DirectMessageDialog.views.conversation:this.$find(".js-dm-new").length>0?twttr.widget.DirectMessageDialog.views.newConversation:null},_updateHeader:function(a){return this._replaceDivWithView(".js-dm-header","DirectMessageDialogHeader",a)},_setProfileImageUrl:function(a){a=a||twttr.assets.path("sticky/default_profile_images/default_profile_6_mini.png",{isVersioned:!1}),this.$find("img.js-dm-avatar").attr("src",a)},_updateContent:function(a,b){return this._replaceDivWithView(".js-dm-content",a,b)},_replaceDivWithView:function(a,b,c){return this.$find(a).html((new twttr.views[b](c)).html())},_hideTweetBox:function(){this.$find(".js-dm-tweetbox").hide()},_showTweetBox:function(a){this.tweetBox.resetTweetContent(),this.$find(".js-dm-tweetbox").show()},_showError:function(a){var b=this.$find(".js-dm-error");b.find(".dm-error-text").html(a),b.show()},_hideError:function(){this.$find(".js-dm-error").hide()},_verifyUser:function(){var a=this,b=this.$find(".js-dm-user-autocomplete").val();this._hideError();if(!b||twttr.is.blank(b))return;if(!b.match(c.regexps.username)){a._setProfileImageUrl(),a._showError(_("Whoops! That's not a valid username."));return}twttr.API.User.find(b,{success:function(b){twttr.currentUser.relationshipWith(b.screenName,function(c){c.canDM?a._setProfileImageUrl(b.profileImageUrl):a._showError(_("You can't send a message to a user who is not following you."))})},error:function(b){a._setProfileImageUrl(),a._showError(_("Whoops! That user does not exist."))}})}}).click({".js-dm-thread-link":function(a){var b=$(a.currentTarget).attr("data-thread-id");this.switchToConversationView(b),a.preventDefault()},".js-dm-header-title":function(a){this.switchToConversationListView(),a.preventDefault()},".js-dm-header-new":function(a){this.switchToNewMessageView(),a.preventDefault()},".js-dm-delete":function(a){this.$find(".js-dm-delete").tipsy("hide"),$("div.js-dm-tweetbox").addClass("dm-deleting");var b=$(a.currentTarget).attr("data-message-id"),c=".js-dm-delete-confirm";this._replaceDivWithView(c,"DirectMessageDeleteConfirm",{messageId:b}),$(c).show(),a.preventDefault()},".js-dm-delete-confirm .js-prompt-ok":function(a){var b=$(a.currentTarget).attr("data-message-id"),c=this.$find(".js-dm-conversation").attr("data-thread-id");this.$find(".js-dm-item[data-message-id="+b+"]").remove(),this.$find(".js-dm-item").length==0&&this.switchToConversationListView(),$("div.js-dm-tweetbox").removeClass("dm-deleting"),twttr.messageManager.deleteMessage(b,c),this._trackClientDelete(b),a.preventDefault()},".js-dm-delete-confirm .js-prompt-cancel":function(a){var b=$(a.currentTarget).attr("data-message-id");this.$find(".js-dm-item[data-message-id="+b+"]").hide(),$("div.js-dm-tweetbox").removeClass("dm-deleting"),a.preventDefault()},".js-dm-error .js-dismiss":function(a){this._hideError(),a.preventDefault()}}).focus({".twitter-anywhere-tweet-box-editor":function(a){this._getCurrentView()===twttr.widget.DirectMessageDialog.views.newConversation&&(this._verifyUser(),this.autocomplete&&this.autocomplete.hide())}});a(e)})}),provide("widget/MuteDialog",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.widget.MuteDialog",function(){this.peoples=twttr.caches.User.get("muted"),this.peoples||(this.peoples={});var a={fixed:!1,draggable:!0,modal:!1,view:"Dialog",template:{title:_("Mute a User"),content:(new twttr.views.MuteUsers).html()}};twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.autocomplete=new twttr.components.Autocomplete({input:this.$find(".mute-input"),limit:10}),this.currentSelection={},this.autocomplete.bind("select",function(b,c,d,e,f,g){a.currentSelection.screenName=f,a.currentSelection.userId=g,a.currentSelection.profileImageUrl=e}),this.$dialog.delegate(".remove-muted-person","click",function(b){var c=$(this).parent(),d=c.attr("data-user-id");delete a.peoples[d],twttr.caches.User.set("muted",a.peoples),c.remove()}),this.$find(".mute-input,.twttr-dialog").bind("keydown",function(c){c.keyCode===b.constants.keyCodes.enter&&!twttr.components.Autocomplete._isCompletionsOpen&&(c.stopPropagation(),a.fetchUser())}),this.$find(".button").bind("click",function(b){a.fetchUser()}),this.populateUsers()},fetchUser:function(){var a=this.$find("input[type=text]");twttr.API.User.find(a.val().toString(),twttr.bind(this,function(b){a.val(""),$(".stream-tweet[data-user-id="+b.id+"]").parent().hide();var c={screenName:b.screenName,userId:b.id,profileImageUrl:twttr.helpers.transformProfileImageUrl(b.profileImageUrl,"mini")};this.peoples[b.id]=c,twttr.caches.User.set("muted",this.peoples),this.populateUsers()}))},populateUsers:function(){var a=[];for(var b in this.peoples)a.push('<li data-user-id="'+this.peoples[b].userId+'" data-user-screenname="'+this.peoples[b].screenName+'">                  <img width="24" height="24" src="'+this.peoples[b].profileImageUrl+'"/> '+this.peoples[b].screenName+' <span class="remove-muted-person">&times;</span></li>');a=a.join(""),this.$find(".muted-user-list").html(a)},open:function(){return twttr.widget.Dialog.prototype.open.call(this),this.$find("input[type=text]").focus(),this},close:function(){return twttr.widget.Dialog.prototype.close.call(this),this.remove(),this}}),a(twttr.widget.MuteDialog)})}),provide("widget/DiscoveryDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.DiscoveryDialog",function(a){twttr.widget.Dialog.call(this,twttr.merge({modal:!0,draggable:!1,css:{width:530}},a))}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this);var a=this,b=this.$find("form"),c=function(){b.find("input, textarea").attr("disabled","disabled"),b.find(".button").addClass("disabled")},d=function(){twttr.Router.performRedirect(twttr.router.homePath())};twttr.helpers.addFormEvents(b,function(e,f){if(b.find(".button").hasClass("disabled"))return;c(),twttr.currentUser.updateDiscoverability(f,{success:function(b){twttr.currentUser.sync("name",b.name),twttr.currentUser.sync("description",b.description),twttr.currentUser.sync("location",b.location),twttr.currentUser.sync("email_discoverability_set",b.email_discoverability_set),twttr.currentUser.sync("mobile_phone_discoverability_set",b.mobile_phone_discoverability_set),twttr.currentUser.sync("discoverable_by_email",b.discoverable_by_email),twttr.currentUser.sync("discoverable_by_mobile_phone",b.discoverable_by_mobile_phone),a.destroy(),d()},error:function(b){twttr.showError(_("Whoops! Something went wrong. Please try again!")),a.destroy()}})}),this.$find(".button.cancel").bind("click",function(){c(),d()})}}),a(twttr.widget.DiscoveryDialog)})}),provide("widget/GeoPromoDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.GeoPromoDialog",function(){twttr.widget.Dialog.call(this,{template:{title:_("Add a location to your tweets"),content:(new twttr.views.GeoPromoDialog).html()},view:"Dialog",modal:!0,stackPreviousModal:!0})}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.$find("#geo_turn_location_on").click(function(){a.enableGeoForCurrentUser()}),this.$find(".geo_dialog_close").click(function(b){b.preventDefault(),a.destroy()})},enableGeoForCurrentUser:function(){var a=this,b=$("#geo_promo_dialog_content .geo-progress"),c=$("#geo_promo_dialog_content .geo-unable-to-turn-location-on");if(b.hasClass("geo-spinner"))return;b.addClass("geo-spinner"),c.hide(),twttr.currentUser.setGeoEnabled(!0,{success:function(){twttr.geo.geoEnabled=!0,a.destroy(),twttr.geo.location.turnLocationOn()},error:function(){b.removeClass("geo-spinner"),c.show()}})}}),a(twttr.widget.GeoPromoDialog)})}),provide("widget/RetweetDialog",function(a){using().as(function(b){twttr.klass("twttr.widget.RetweetDialog",function(a){twttr.widget.RetweetDialog.uber.constructor.call(this,a),this.$dialog.attr("type","retweet"),this.$container.find(".twttr-dialog-footer").hide(),twttr.API.Status.find(this.options.data.tweetId,twttr.bind(this,function(b){var c=new twttr.views.ReplyDialogFooter({screen_name:b.user.screenName,text:a.tweetText,profile_image_url:b.user.profileImageUrl});c.render(this.$container.find(".twttr-dialog-content"),"prepend")}))}).subclassOf(twttr.widget.Prompt),a()})}),provide("widget/TrendsDialog",function(a){using().as(function(b){var c=twttr.klass("twttr.widget.TrendsDialog",function(a){var b=this,a=twttr.merge({view:"Dialog",destroyOnClose:!1,template:{container_id:"trends_dialog"}},a,!0);a.template.title=twttr.decider.isAvailable("personalized_trends")?_("Trends"):_("Choose a trend location"),twttr.widget.Dialog.call(b,a),b.resetChangeCount(),b.bind("close",function(){b.logClose()}),b.bind("open",function(){trackClient({section:"trends_location_dialog",action:"open"}),b.rerender()}),this.initComponentEvents(this.$container),b.position()}).subclassOf(twttr.widget.Dialog).mixin(twttr.mixins.componentEvents).methods({resetChangeCount:function(){this.changeCount=0},logClose:function(){scribble("close-trend-location-dialog",{woeid:twttr.trendLocations.current.woeid,change_count:this.changeCount,input:"click"}),this.resetChangeCount()},updateFooter:function(a){var b=this.$find(".twttr-dialog-footer");twttr.decider.isAvailable("personalized_trends")&&!twttr.trendLocations.current.isPersonalized||a?(b.html((new twttr.views.TrendsDialogFooter).html()),b.show()):b.hide()},rerender:function(a){var b=this.$container.find(".twttr-dialog-content");b.empty(),this.updateFooter(a),(new twttr.views.LocalTrendsNew(twttr.trendLocations.all,a)).render(b,"append"),this.markLocation()},registerEvents:function(){var a=this;twttr.widget.TrendsDialog.uber.constructor.prototype.registerEvents.call(a),a.$container.delegate("li a","click",function(b){a.changeCurrentLocation($(this),"dialog"),b.preventDefault()}),a.$container.delegate("a.trend-breadcrumb-location","click",function(b){a.changeCurrentLocation($(this),"dialog-breadcrumb"),b.preventDefault()})},position:function(){this.options.fixed||this.$dialog.addClass("static");var a=twttr.app.currentPage().$find(".dashboard");if(twttr.isT1||a.length===0)var b=($(document).width()+this.$dialog.outerWidth())/2;else var b=Math.max(a.offset().left,this.$dialog.outerWidth());var c=$(window).scrollTop(),d=this.$dialog.innerHeight(),e=$(window).height(),f=Math.round(e/2-d/2);f=Math.max(f,$("#top-stuff").innerHeight()+1),this.options.fixed||(f+=c),this.$container.css({left:b-this.$dialog.outerWidth(),top:f})},changeCurrentLocation:function(a,b){if(a){a.closest(".twttr-dialog-content").find(".selected").removeClass("selected"),a.addClass("selected");var c=parseInt(a.attr("data-woeid"),10)}twttr.trendLocations.setCurrent({isPersonalized:!c,woeid:c,origin:b}),this.changeCount+=1},markLocation:function(){var a=twttr.trendLocations.current;if(!a.isPersonalized){var b=a&&a.woeid||1;this.$container.find("[data-woeid="+b+"]").addClass("selected")}}}).click({".customize-by-location":function(){this.rerender(!0)},"button.done":function(){this.close()},".select-personalized":function(){this.changeCurrentLocation(null,"dialog"),this.close()}});twttr.isT1&&c.methods({position:twttr.util.noopInT1}),a(c)})}),provide("widget/ReplyDialog",function(a){using().as(function(b){twttr.klass("twttr.widget.ReplyDialog",function(a){var a=twttr.merge({},twttr.dialogs.defaultOptions,a,{},!0);twttr.widget.ReplyDialog.uber.constructor.call(this,a),this.$dialog.attr("type","reply")}).subclassOf(twttr.widget.TweetDialog).statics({openReplyDialog:!1}).methods({open:function(){return this.constructor.openReplyDialog&&this.constructor.openReplyDialog.close(),twttr.widget.TweetDialog.prototype.open.call(this),this.constructor.openReplyDialog=this,this.focus(),this},focus:function(){var a=this.view.tweetBox.editor.$editor.val().length,b=this.view.tweetBox.editor.$editor.val().length;this.options.multiple&&(a=this.options.data.screenName.length+2),this.setCaretPosition(a,b)}}),a(twttr.widget.ReplyDialog)})}),provide("widget/ListMembershipDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.ListMembershipDialog",function(a,b){b=twttr.merge({view:"Dialog",modal:!0,draggable:!0,css:{width:340,height:"auto"},positioning:{top:80},template:{container_id:"list_membership_dialog",title:_("Your lists"),content:(new twttr.views.AddToListDialog({screen_name:a.screenName})).html()}},b||{},!0),this.makeListItems(a),twttr.widget.Dialog.call(this,b),this.addSpinner()}).subclassOf(twttr.widget.Dialog).methods({makeListItems:function(a){var b=this;this.getListDialogItems(a,function(a){b.spinner&&b.spinner.hide(),a.length>1&&b.$container.find(".add-to-list-prompt").show(),b.renderItems(a),b.attachHandlers(a)})},addSpinner:function(){this.spinner=$("<span class='spinner' title='{{_i}}Loading...{{/i}}'></span>"),this.spinner.appendTo(this.$container.find(".twttr-dialog-body"))},attachHandlers:function(a){var b=this.$container.find(".list-membership-container").children();for(var c=0;c<a.length;c++){var d=a[c];if(!d.handlers)continue;$.each(d.handlers,function(a,d){var e=$(b[c]),f=[a,d];e.bind.apply(e,f)})}},renderItems:function(a){var b=twttr.map(a,function(a){return(new twttr.views.CheckboxListItem(a)).html()});$(b.join("")).appendTo(this.$container.find(".list-membership-container"))},getListDialogItems:function(a,b){var c=this;twttr.currentUser.lists({count:twttr.currentUser.listsLimit,success:function(d){var e=[],f={},g=function(f){d.each(function(a){e.push(i(a))}),e.push({label:_("Create a list"),icon:"list",className:"btn create-a-list",handlers:{click:function(){c.destroy(),(new twttr.widget.ListDialog({onSuccess:function(b){b.add(a,{success:function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:b.slug}))},error:function(a){twttr.helpers.showErrorFromResponse(a)}})}})).open()}}}),b(e)},i=function(b){return{label:h(b.name),id:b.id,user_is_member:f[b.id],is_private:b.mode==="private",handlers:{click:c.handler(b,a)}}};d.length()?a.memberships({filter_to_owned_lists:!0,success:function(a){a.each(function(a,b){f[a.id]=!0}),g()}}):g()}})},handler:function(a,b){return function(c){c.stopPropagation(),c.preventDefault();var d=$(this).find("input[type=checkbox]"),e=d.attr("data-is-checked"),f=!!e&&e==="true",g=$(this).find("img");d.hide(),g.show();var i=f?"remove":"add";a[i](b,{success:function(){twttr.widget.ListMembershipDialog.trigger(i+"ListMember",[a,b]),d.attr("data-is-checked",!f),d.attr("checked",!f)},error:function(){d.attr("data-is-checked",f),d.attr("checked",f),twttr.showError(_("There was an error updating the list"))},complete:function(){g.hide(),d.show()}})}}}),a(twttr.widget.ListMembershipDialog)})}),provide("widget/MiniProfileDialog",function(a){using("components/ProfilePane","components/RecentTweets",function(b,c){twttr.klass("twttr.widget.MiniProfileDialog",function(a,d){var e=this;d=d||!1;var f="";d&&(f=" js-unclickable unclickable"),twttr.widget.Dialog.call(this,{modal:!0,draggable:!0,view:"Dialog",closeOnNavigate:!0,template:{container_id:"mini-profile",title:twttr.isT1?null:"@"+a.screenName,content:"<div class='expando-profile-popup expanding-stream-item js-expando-profile-popup"+f+"'/>"},css:{width:400},positioning:{top:95}});var g=new b(a),i=new c(a);this.$find(".js-expando-profile-popup").append(g.$node).append(i.$node),this.$dialog.delegate(".js-unclickable, .js-unclickable a","click",function(a){!$(a.target).hasClass("js-action-follow")&&!$(a.target).hasClass("js-action-unfollow")&&!$(a.target).hasClass("twttr-dialog-close")&&(a.stopPropagation(),a.preventDefault())}).delegate(".js-mini-profile-user","click",function(){setTimeout(function(){e.close()},0)})}).subclassOf(twttr.widget.Dialog),a(twttr.widget.MiniProfileDialog)})}),provide("widget/EmbedDialog",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.widget.EmbedDialog",function(a){return this.status=a,twttr.widget.Dialog.call(this,{modal:!0,fixed:!1,draggable:!1,destroyOnClose:!0,positioning:{top:$(window).scrollTop()+100},view:"Dialog",template:{title:_("Embed this Tweet"),content:(new twttr.views.EmbedDialog).html()}})}).subclassOf(twttr.widget.Dialog).methods({open:function(){function n(a){setTimeout(function(){l.select()},0),x()}function o(){using("//platform.twitter.com/js/vendor/twt/dist/twt.all.min.js","css!//platform.twitter.com/twt/twt.css",function(){if(!window.twt)return;twt.settings.lang=f;var b=twt.tweet(a.status.attributes,{expandMedia:!0});a.status.isReply?a.status.inReplyTo({success:function(a){m.html(b.inReplyTo(a.attributes).html())},error:function(){m.html(b.html())}}):m.html(b.html())}).load()}function p(a,b){var c=b.find(".active");if(c[0]==a[0])return;c.removeClass("active"),a.addClass("active")}function q(a){p($(this).prev(),$(a.delegateTarget)),y($("input:checked",i).val()),u()}function r(a){a.preventDefault();var b=$(this);p(b,$(a.delegateTarget));var c=b.data().target;y(c),u()}function s(){var a={lang:f,target:$(".active",j).data().target,align:$("input:checked",i).val()},b=t(a);return a.success=v(b),a}function t(a){return a.lang+a.target+a.align}function u(){var b=s(),f=t(b),g={html:"https://twitter.com/"+a.status.user.screenName+"/statuses/"+a.status.id+""};e++||l.addClass(c).attr(c,c);if(d[f])return b.success(d[f]);if(b.target=="link")return b.success(g);a.status.oembed(b)}function v(a){return function(f){var g=s();d[a]=f,--e||l.val(d[t(g)].html).removeClass(c).removeAttr(c),b&&(b=!1,n())}}function w(){var a={section:"embed_code_dialog",component:"embed_tweet_code",action:"open"};trackClient(a,twttr.audit.currentPage())}function x(){var a={section:"embed_code_dialog",component:"embed_tweet_code",action:"focus"};trackClient(a,twttr.audit.currentPage())}function y(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"target_"+a};trackClient(b,twttr.audit.currentPage())}function z(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"align_"+a};trackClient(b,twttr.audit.currentPage())}function A(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"language_"+a};trackClient(b,twttr.audit.currentPage())}var a=this,b=!0,c="disabled",d={},e=0,f;twttr.widget.Dialog.prototype.open.call(this);for(var g=twttr.languages.length;g--;)if(twttr.languages[g].current){f=twttr.languages[g].code;break}var i=this.$container,j=i.find(".embed-target"),k=i.find(".embed-alignment"),l=i.find("textarea"),m=i.find(".embed-preview");return u(),o(),w(),A(f),j.delegate("a","click",r),k.delegate("input","click",q),l.focus(n),this},destroy:function(){twttr.widget.Dialog.prototype.destroy.call(this),twttr.router.unbind("urlChanged",this.urlChangedListener),twttr.router.routeTo(twttr.router.permalinkPath({screen_name:this.status.user.screenName,id:this.status.id}))}}),a(twttr.widget.EmbedDialog)})}),provide("components/pages/mixins/searchT1",function(a){using("mixins/sideNavigationT1","components/t1/SearchHeader","components/t1/dashboard/SearchNav","components/SignupCallOut").as(function(b){var c=twttr.klass.mixin("twttr.components.pages.mixins.searchT1",function(){this.mixin(b.mixins.sideNavigationT1).view(twttr.views.SearchPage).addOnSwitchAway(function(){this.removeSearchHeader(),this.removeSearchAssistance()}).addOnSwitchTo(function(){this.registerSearchAssistanceDecider(),this.$node.find(".js-search-header").length||this.addSearchHeader()}).addAfterRender(function(){this.isNewSearchHeaderAvailable()?(this.setQuery(this._query),this.focusQuery()):(this.addSearchHeader(),$("#search-query").val(""))}).methods({getDashboardComponents:function(){var a=[];return twttr.loggedIn||a.push(new b.components.SignupCallOut("search",{query:this._query})),this._nav=new b.components.t1.dashboard.SearchNav(this._query),this.trendsComponent=this.trendsComponent||new twttr.components.Trends,a.concat([this._nav,this.trendsComponent,new twttr.components.Footer])},noAutoRender:!0,people:function(a,c){var d=a.query||c.q,e=this._query!==d;this._query=d;if(!d)return this.routePageTo(this.PATH_ROOT);this.streamManager||this.render({query:d,pretty_query:d,has_relevance_search:!1,top_mode:!1,all_mode:!1,timeline_mode:!1,with_links_mode:!1}),this.streamManager.switchTo(twttr.streams.PeopleSearch,{query:d,pathRoot:this.PATH_ROOT,hideTitle:!1});if(e){var f=new b.components.t1.dashboard.SearchNav(this._query);this._nav.$node.replaceWith(f.$node),delete this._nav,this._nav=f}this.setQuery(d),this.focusQuery(),this.selectCurrentSideNav(),this.removeOnebox(),this.removeSearchAssistance(),this.updatePageTitle(_("Twitter / User Search"))},registerSearchAssistanceDecider:function(){if(twttr.decider.isAvailable("search_assistance")){this._isNewSearchHeaderAvailable=!0,this._isSearchAssistanceAvailable=!0;return}var a=twttr.abdecider.choose("search_assistance_192");this._isNewSearchHeaderAvailable=a==="no_header_no_assistance"||a==="no_header_with_assistance",this._isSearchAssistanceAvailable=a==="no_header_with_assistance"},isNewSearchHeaderAvailable:function(){return!!this._isNewSearchHeaderAvailable},isSearchAssistanceAvailable:function(){return!!this._isSearchAssistanceAvailable},renderRelatedQueries:function(a){if(!$.isArray(a)||!a.length)return;var b=a.length,c=[],d=[];for(var e=0;e<b;e++)c[e]={search_query_source:twttr.search.searchQuerySource.RELATED_QUERY,query:this._query,related_query:a[e].query,url:twttr.router.searchResultsPath({query:a[e].query}),delimiter:e<b-1?", ":""},d[e]=a[e].query;this.$find(".js-search-header").append((new twttr.views.RelatedQueries({related_queries:c})).html()),trackClient({section:"search",component:"related_queries",action:"impression"},{query:this._query,item_count:d.length,item_names:d})},renderSpellingCorrections:function(a){if(!$.isArray(a)||!a.length)return;var b=a[0].query,c=[];if(a[0].indices&&a[0].indices.length){var d=a[0].indices,e=0,f=b.length;for(var g=0;g<d.length;g++)c[g]={nonhighlighted:b.substring(e,d[g][0]),highlighted:b.substring(d[g][0],d[g][1])},e=d[g][1];c[d.length]={nonhighlighted:b.substring(e,f),highlighted:""}}else c[0]={nonhighlighted:"",highlighted:b};this.$find(".js-stream-header").before((new twttr.views.SpellingCorrections({query:this._query,correction:b,partitions:c,url:twttr.router.searchResultsPath({query:b}),search_query_source:twttr.search.searchQuerySource.SPELLING_CORRECTION})).html()),trackClient({section:"search",component:"spelling_corrections",action:"impression"},{query:this._query,item_count:a.length,item_names:a})},removeSearchAssistance:function(){this.$find(".js-spelling-corrections").remove(),this.$find(".js-related-queries").remove()},addSearchHeader:function(){this.isNewSearchHeaderAvailable()||(this._header=new b.components.t1.SearchHeader(this._query),this.$node.prepend(this._header.$node))},removeSearchHeader:function(){this.isNewSearchHeaderAvailable()||this._header&&this._header.destroy()},setupSavedSearchAction:function(){var a=twttr.search.isSavedSearch(this._query);a?this.toggleSavedSearchOn(a):this.toggleSavedSearchOff()},toggleSavedSearchOn:function(a){this.isNewSearchHeaderAvailable()?(this.$find(".js-toggle-saved-search-link").html(_("Remove saved search")).addClass("saved").removeClass("not-saved"),this.$find(".js-search-title").html(Mustache.to_html(_('Saved search: <strong class="search-query">{{query}}</strong>'),{query:this._query}))):this._header.toggleSavedSearchOn(),this._savedSearch=a},toggleSavedSearchOff:function(){this.isNewSearchHeaderAvailable()?(this.$find(".js-toggle-saved-search-link").html(_("Save search")).addClass("not-saved").removeClass("saved"),this.$find(".js-search-title").html(Mustache.to_html(_('Results for <strong class="search-query">{{query}}</strong>'),{query:this._query}))):this._header.toggleSavedSearchOff(),this._savedSearch=null},showSearchMenu:function(a){var b=this;a.addClass("open"),$(document).bind("click.button",function(){b.hideSearchMenu(a)})},hideSearchMenu:function(a){a.removeClass("open"),$(document).unbind("click.button")},toggleSearchMenu:function(a){var b=this.$node.find(".js-search-dropdown");b.hasClass("open")?this.hideSearchMenu(b):this.showSearchMenu(b)},setQuery:function(a){this.isNewSearchHeaderAvailable()?$("#search-query").val(a):this._header.setQuery(a)},focusQuery:function(){this.isNewSearchHeaderAvailable()?($("#search-query").addClass("focus"),$("#search-query").blur()):this._header.focusQuery()},addDropdownMenu:twttr.util.noopInT1,renderPeopleResults:twttr.util.noopInT1,renderOneboxContainer:function(a){this.$find(".js-onebox-container").html(a.$node)},removeOnebox:function(){this.$find(".js-onebox-container").empty()},addImpressionData:function(a){a.query=this._query}}).click({"a.js-toggle-saved-search-link":function(a,b){this._savedSearch?twttr.dialogs.deleteSavedSearch(twttr.bind(this,function(a){if(a){var b=this._savedSearch;this._savedSearch.destroy({before:twttr.bind(this,this.toggleSavedSearchOff),error:twttr.bind(this,function(){this.toggleSavedSearchOn(b),twttr.showError(_("Error deleting search"))})})}})).open():twttr.currentUser.savedSearches.create(this._query,{before:twttr.bind(this,this.toggleSavedSearchOn),error:twttr.bind(this,function(){this.toggleSavedSearchOff(),twttr.showError(_("Error saving search"))})}),a.preventDefault()},"button.js-search-dropdown-button":function(a,b){return this.toggleSearchMenu(),a.preventDefault(),a.stopPropagation(),!1},"div.js-related-queries a":function(a,b){trackClient({section:"search",component:"related_queries",action:"search"},{query:b.data("query"),item_names:[b.data("search-assistance")]})},"div.js-spelling-corrections a":function(a,b){trackClient({section:"search",component:"spelling_corrections",action:"search"},{query:b.data("query"),item_names:[b.data("search-assistance")]})},"div.js-spelling-corrections div.js-action-dismiss":function(a,b){this.$find(".js-spelling-corrections").animate({opacity:"0"},250).slideUp(),trackClient({section:"search",component:"spelling_corrections",action:"dismiss"},{query:b.data("query"),item_names:[b.data("search-assistance")]})}})});a(c)})}),provide("components/pages/ProfileAbstract",function(a){using().as(function(b){var c=twttr.klass.page("twttr.components.pages.ProfileAbstract").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage,twttr.mixins.profileHelper).methods({_addAdminTools:function(){if(twttr.admin&&!twttr.helpers.isCurrentUser(this.profileUser)){var a=this;using(">defaultViews",function(){twttr.admin.addToolsFor(a.profileUser.screenName,a.profileUser.id)})}},_highlightNavIfCurrentUser:function(a){twttr.app.highlightGlobalNav("profile",twttr.helpers.isCurrentUser(a))},_switchToStream:function(a,b){var c=this;this.unfocusStreamItem(),this.loading(a.screenName),this.getUserInfo(a.screenName,function(){c._addPromotedData(),!c._renderedScreenName||c._renderedScreenName.toLowerCase()!==a.screenName?c._renderPage():twttr.themes.loadUserStyleFor(c.profileUser),c.streamManager.switchTo(a.stream,twttr.merge({canViewUser:twttr.helpers.canViewUser(c.profileUser)},a),b),twttr.components.JapaneseAd.refreshAds(),c.trigger("switchedToStream")},{batch:!twttr.loggedIn},twttr.bind(this,this.noUserFoundCallback)),this.focusStreamTab(a.tab),twttr.isT1||trackClient({action:"impression"},{profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"})},loading:function(a){a=a.toLowerCase();if(this.preRendered){this.preRenderedScreenName=this.$find("div.profile-header").attr("data-screen-name").toLowerCase();if(this.preRenderedScreenName==a)return}if(!this._renderedScreenName||this._renderedScreenName.toLowerCase()!==a)this.streamManager&&this.streamManager.getCurrent()&&this.streamManager.getCurrent().$node.detach(),this.$node.children().empty(),$("div.tipsy").remove()},_renderPage:function(){this.profileUser.screenName.toLowerCase()!==this.preRenderedScreenName&&twttr.themes.loadUserStyleFor(this.profileUser),this._addAdminTools(),this.render({can_view:twttr.helpers.canViewUser(this.profileUser),screen_name:this.profileUser.screenName,social_context:this._isSocialContextAvailable()}),this._renderedScreenName=this.profileUser.screenName,this.renderUserInfo(),this._followingDropDown=null,this._followersDropDown=null},noAutoRender:!0});twttr.isT1?c.methods({renderUserInfo:twttr.util.noopInT1}):c.methods({renderUserInfo:function(){var a=this,b=this.profileUser;this.panes.push(new twttr.views.Dashboard("profile.dashboard",b.attributes));var c=new twttr.components.ProfileActions(b);c.$node.appendTo(this.$find(".profile-actions-container"))}}),a(c)})}),provide("components/pages/Search",function(a){using("_",twttr.isT1?"components/pages/mixins/searchT1":"components/pages/mixins/searchP1","util","constants").as(function(b,_,c){var d=twttr.klass("twttr.components.pages.Search").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).view(twttr.views.SearchPage).addOnSwitchAway(function(){twttr.search.clear(),this.trendsComponent&&this.trendsComponent.stopUpdatePolling()}).addOnSwitchTo(function(){twttr.themes.loadCurrentUserStyle(),this.trendsComponent&&this.trendsComponent.startUpdatePolling()}).addAfterRender(function(){this.addDashboardComponents(this.getDashboardComponents()),this.trendsComponent&&this.trendsComponent.registerEventHandlers()}).statics({addSearchClickLogging:function(a,b){if(a.length){var c={};b.tweet_click_info=c,c.tweet_id=a.attr("data-tweet-id"),c.pos=a.closest(".stream-item").prevAll(".stream-item").length,c.type=a.is(".promoted-tweet")?"promoted":a.is(".top-tweet")?"popular":"recent"}}}).methods({realtime:function(a,b){var c=a.query||b.q;twttr.decider.isAvailable("phoenix_search_relevance")?this.updatePageTitle(_("Twitter / Search - {{{query}}} - All Tweets",{query:c})):this.updatePageTitle(_("Twitter / Search - {{{query}}}",{query:c})),this.enterMode(c,"tweets")},timeline:function(a,b){var c=a.query||b.q;this.updatePageTitle(_("Twitter / Timeline Search - {{{query}}}",{query:c})),this.enterMode(c,"timeline")},links:function(a,b){var c=a.query||b.q;if(!c)return this.search({query:"links"});this.updatePageTitle(_("Twitter / Search - {{{query}}} - Tweets with links",{query:c})),this.enterMode(c,"links")},searchShow:function(a,b){if(twttr.decider.isAvailable("swift_events")&&twttr.decider.isAvailable("swift_events_search")){var c=twttr.griffin.isEvent(a.query);twttr.griffin.setNoRedirectOnSearch(c,!0)}this.search(a,b)},search:function(a,b){if(!twttr.currentUser&&!twttr.decider.isAvailable("phoenix_search_relevance_logged_out")||twttr.currentUser&&!twttr.decider.isAvailable("phoenix_search_relevance")){this.realtime(a,b);return}b&&b.partner=="mozilla"&&b.source=="desktop-search"&&(a.query=a.query.replace(/\+/g," ")),this.query=a.query||b.q,this.query===!0&&(this.query=!1);if(twttr.decider.isAvailable("swift_events")&&twttr.decider.isAvailable("swift_events_search")){var c=twttr.griffin.isEvent(this.query);twttr.griffin.isEuroSearchTakeover(this.query)&&(c="euro2012");if(twttr.griffin.redirectOnSearch(c))return}this.updatePageTitle(_("Twitter / Search - {{{query}}}",{query:this.query})),this.enterMode(this.query,"relevance",b)},placeTweetSearch:function(a){var b=a.place_name,c=a.place_id;this.updatePageTitle(_("Twitter / Tweets at {{placeName}}",{placeName:b})),this._placeName=b,this.enterMode("place:"+c,"placeTweetSearch")},noAutoRender:!0,enterMode:function(a,b,c){twttr.search.latestQuery=a,c=c||{};if(!a){twttr.router.redirectTo(twttr.router.searchHomePath());return}twttr.isT1||trackClient({action:"impression"},{query:a}),this.unfocusStreamItem(),twttr.SearchAPI.flushCache();var d=this;d._mode=b;if(a!==this._query){this._query=a,!twttr.isT1&&twttr.loggedIn&&(this.setupSavedSearchAction(),this.registerSavedSearchListeners()),this.streamManager&&this.streamManager.$node.detach();var e=!1;twttr.currentUser?e=twttr.decider.isAvailable("phoenix_search_relevance"):e=twttr.decider.isAvailable("phoenix_search_relevance_logged_out");var f=b=="placeTweetSearch";this.render({query:a,pretty_query:f&&this._placeName||a,has_relevance_search:e,top_mode:b=="relevance",all_mode:b=="tweets",timeline_mode:b=="timeline",with_links_mode:b=="links"})}else twttr.decider.isAvailable("phoenix_search_dropdown")&&this.$find(".stream-tabs").empty().append((new twttr.views.SearchPageTabs({top_mode:b=="relevance",all_mode:b=="tweets",timeline_mode:b=="timeline",with_links_mode:b=="links"})).html());twttr.decider.isAvailable("phoenix_search_dropdown")&&this.addDropdownMenu(this._query,this.$find(".stream-tab-dropdown")),this.streamManager.switchTo(twttr.streams.Search,{query:a,pretty_query:this._placeName||a,mode:b,hideTitle:!0,debug:c.debug,experimentId:c.experimentId,is_new_search_header_available:this.isNewSearchHeaderAvailable()}),this.focusStreamTab(b),this.focusQuery(a),twttr.router.getCurrentRoute().name==="searchRealtime"?this.selectSideNav("searchResults"):this.selectCurrentSideNav(),twttr.isT1&&twttr.loggedIn&&(this.setupSavedSearchAction(),this.registerSavedSearchListeners()),this.addSearchExtras(),this.renderPeopleResults()},focusQuery:function(a){twttr.search.focusQuery(a)},isNewSearchHeaderAvailable:function(){return!1},isSearchAssistanceAvailable:function(){return!1},removeSearchAssistance:$.noop,isOneboxAvailable:function(){return!!this._query&&twttr.decider.isAvailable("onebox")},renderOnebox:function(a){if(a.length()===0)return;var c,d=a.get(0),e=twttr.components.onebox[b.util.capitalize(d.type)];if(!e)return;var c=new e(d,this._query);if(!c||c.$node.children().size()==0)return;this.renderOneboxContainer(c,d),this.$find("div.onebox").show(),c.render();var f=c.items||[];trackClient({section:"onebox",component:d.type,action:"impression"},{item_count:f.length,item_ids:f,query:this._query})},addSearchExtras:function(){var a=this,b=a.isSearchAssistanceAvailable(),c=a.isOneboxAvailable();if(!c&&!b)return;c&&this.$find("div.onebox").hide();var d=twttr.search.getLastQuerySource(),e={is_t1:twttr.isT1,statuses:!1,stories:c,related_queries:b,spelling_corrections:b,query_source:d,success:function(d){a.removeSearchAssistance(),c&&a.renderOnebox(d.stories),b&&(d.spellingCorrections&&a.renderSpellingCorrections(d.spellingCorrections),!d.spellingCorrections.length&&d.relatedQueries&&a.renderRelatedQueries(d.relatedQueries))}};this._query&&twttr.API.Search.search(this._query,e)},setupSavedSearchAction:function(){var a=this;twttr.currentUser.savedSearches(function(b){var c=b.filter(function(b){return b.query===a._query});c.length()?a.toggleSavedSearchOn(c.first()):a.toggleSavedSearchOff()})},registerSavedSearchListeners:function(){var a=this;twttr.API.SavedSearch.bind("create",function(b,c){c.query==a._query&&a.toggleSavedSearchOn(c)}),twttr.API.SavedSearch.bind("delete",function(b,c){c.query==a._query&&a.toggleSavedSearchOff()})},_getSearchHandlers:function(a,b){return{click:function(){twttr.router.routeTo(twttr.router[b]({query:a}))}}}});d.mixin(c),a(d)})}),provide("components/pages/SearchHome",function(a){using("_").as(function(b,_){twttr.klass.page("twttr.components.pages.SearchHome").view(twttr.views.SearchHome).click({".operators a:not(.advanced-search)":function(a){a.preventDefault(),twttr.dialogs.searchOperators().open()},".operators a.advanced-search":function(a){twttr.search.latestQuery=this.$find("input:text[name=q]").val()}}).addAfterRender(function(){this.$find(".bottompart").append((new twttr.components.Footer).$node)}).addOnSwitchTo(function(){twttr.themes.clear()}).methods({noAutoRender:!0,initSearchForm:function(){var a=this.$find(".search form"),b=a.is(".advanced-search form");twttr.helpers.addFormEvents(a,function(a,c){var d=$(this),e=b?twttr.search.serializeAdvancedForm(d):c.q;e?(twttr.search.setLastQuerySource(twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.doSearch(e)):twttr.showMessage(_("Enter your query before submitting the search form!"))}),twttr.search.formifyLatestQuery(a);if(b){var c=a.find("input[name=near]"),d=a.find("fieldset.geo div.sel");c.val()?d.show():c.one("keyup change",function(){d.slideDown()})}},languages:function(){return this.searchLanguages().sort(function(a,b){return a=a.localized_name.toLowerCase(),b=b.localized_name.toLowerCase(),a==b?0:a<b?-1:1})},searchLanguages:function(){return[{code:"am",localized_name:_("Amharic"),name:"አማርኛ"},{code:"ar",localized_name:_("Arabic"),name:"العربية"},{code:"bg",localized_name:_("Bulgarian"),name:"Български"},{code:"bn",localized_name:_("Bengali"),name:"বাংলা"},{code:"bo",localized_name:_("Tibetan"),name:"བོད་སྐད"},{code:"chr",localized_name:_("Cherokee"),name:"ᏣᎳᎩ"},{code:"da",localized_name:_("Danish"),name:"Dansk"},{code:"de",localized_name:_("German"),name:"Deutsch"},{code:"dv",localized_name:_("Maldivian"),name:"ދިވެހި"},{code:"el",localized_name:_("Greek"),name:"Ελληνικά"},{code:"en",localized_name:_("English"),name:"English"},{code:"es",localized_name:_("Spanish"),name:"Español"},{code:"fa",localized_name:_("Persian"),name:"فارسی"},{code:"fi",localized_name:_("Finnish"),name:"Suomi"},{code:"fr",localized_name:_("French"),name:"Français"},{code:"gu",localized_name:_("Gujarati"),name:"ગુજરાતી"},{code:"iw",localized_name:_("Hebrew"),name:"עברית"},{code:"hi",localized_name:_("Hindi"),name:"हिंदी"},{code:"hu",localized_name:_("Hungarian"),name:"Magyar"},{code:"hy",localized_name:_("Armenian"),name:"Հայերեն"},{code:"in",localized_name:_("Indonesian"),name:"Bahasa Indonesia"},{code:"is",localized_name:_("Icelandic"),name:"Íslenska"},{code:"it",localized_name:_("Italian"),name:"Italiano"},{code:"iu",localized_name:_("Inuktitut"),name:"ᐃᓄᒃᑎᑐᑦ"},{code:"ja",localized_name:_("Japanese"),name:"日本語"},{code:"ka",localized_name:_("Georgian"),name:"ქართული"},{code:"km",localized_name:_("Khmer"),name:"ខ្មែរ"},{code:"kn",localized_name:_("Kannada"),name:"ಕನ್ನಡ"},{code:"ko",localized_name:_("Korean"),name:"한국어"},{code:"lo",localized_name:_("Lao"),name:"ລາວ"},{code:"lt",localized_name:_("Lithuanian"),name:"Lietuvių"},{code:"ml",localized_name:_("Malayalam"),name:"മലയാളം"},{code:"my",localized_name:_("Myanmar"),name:"မြန်မာဘာသာ"},{code:"ne",localized_name:_("Nepali"),name:"नेपाली"},{code:"nl",localized_name:_("Dutch"),name:"Nederlands"},{code:"no",localized_name:_("Norwegian"),name:"Norsk"},{code:"or",localized_name:_("Oriya"),name:"ଓଡ଼ିଆ"},{code:"pa",localized_name:_("Panjabi"),name:"ਪੰਜਾਬੀ"},{code:"pl",localized_name:_("Polish"),name:"Polski"},{code:"pt",localized_name:_("Portuguese"),name:"Português"},{code:"ru",localized_name:_("Russian"),name:"Русский"},{code:"si",localized_name:_("Sinhala"),name:"සිංහල"},{code:"sv",localized_name:_("Swedish"),name:"Svenska"},{code:"ta",localized_name:_("Tamil"),name:"தமிழ்"},{code:"te",localized_name:_("Telugu"),name:"తెలుగు"},{code:"th",localized_name:_("Thai"),name:"ไทย"},{code:"tr",localized_name:_("Turkish"),name:"Türkçe"},{code:"ur",localized_name:_("Urdu"),name:"ﺍﺭﺩﻭ"},{code:"vi",localized_name:_("Vietnamese"),name:"Tiếng Việt"},{code:"zh",localized_name:_("Chinese"),name:"中文"}]},index:function(){this.updatePageTitle(_("Twitter / Search")),this.render(),this.initSearchForm(),this.$find("input").focus();var a=new twttr.components.Trends;this.$find(".trends-container").append(a.$node)},advanced:function(){if(!twttr.decider.isAvailable("advanced_search"))return twttr.router.routeTo(twttr.router.searchHomePath());this.updatePageTitle(_("Twitter / Advanced Search")),this.render({languages:this.languages(),is_advanced:!0}),this.initSearchForm()}}),a(twttr.components.pages.SearchHome)})}),provide("components/pages/Front",function(a){using("_").as(function(b,_){var c=twttr.klass.page("twttr.components.pages.Front",function(){twttr.components.Page.apply(this,arguments)}).methods({$find:function(a){return $("#front-container").find(a)}}).view(twttr.views.Nothing).addAfterRender(function(){var a=twttr.abdecider.choose("lohp_video_experiment_258");a==="video"&&this.$find(".front-welcome").click(function(){if($(this).hasClass("playing"))return;var a=['type="text/html"','width="520" height="293"','src="http://www.youtube.com/embed/1xgLJpBbdDE?showinfo=0&rel=0&modestbranding=1&controls=0&autohide=1&autoplay=1&origin='+window.location.protocol+"//"+window.location.host+'"','frameborder="0"'];$(this).append("<iframe "+a.join(" ")+"></iframe>").addClass("playing"),trackClient({component:"video",element:"play_button",action:"click"});var b=1,c=setInterval(function(){trackClient({component:"video",element:"second"+b*10,action:"impression"}),b++},1e4);setTimeout(function(){clearInterval(c)},9e4)});var b=twttr.abdecider.choose("nascar_homepage_276");b!="homepage_off"&&this.$find('a[href="/hashtag/nascar"]').click(function(){trackClient({page:"front",section:"",action:"click"},"nascar")}),twttr.pageLocale==="ja"?(twttr.abdecider.choose("japanese_signup_text_214"),twttr.abdecider.choose("localized_tagline_loggedout_front_page_244")):twttr.pageLocale==="de"&&twttr.abdecider.choose("localized_image_germany_loggedout_front_page_294");var c=this.$find(".js-front-signup form");c.find("input[type=text], input[type=password]").focus(function(){trackClient({section:"signup_callout",component:$(this).attr("name").split(/[\[|\]]/)[1],action:"focus_field"})}),c.submit(function(){trackClient({section:"signup_callout",component:"form",action:"signup_click"})}),twttr.helpers.addFormEvents(c);var d=this.$find(".js-front-signin form"),e=c.data("front_page_full_signup_256");e&&(d=$(".global-nav .js-front-signin form")),(!e||e&&!$("form input.focused").length)&&d.find(".email-input").focus(),d.submit(function(){trackClient({section:"login_callout",component:"form",action:"login_click"})}),twttr.helpers.addFormEvents(d),e&&(twttr.helpers.addHoldingInputEvents(d),d.find(".placeholding-input .placeholder").each(function(){var a=$(this);a.text(twttr.helpers.truncate(a.text(),20,"...")),a.show()}))}).addOnSwitchAway(function(){twttr.themes.loadDefaultTheme()}).methods({index:function(a,b){if(b.in_reply_to_status_id){twttr.router.routeTo(twttr.router.loginRedirectPath({redirect_after_login:"/"+window.location.search}));return}window._scribedFrontImpression?window._scribedFrontImpression=!1:$(".front-image-nascar").length>0?trackClient({page:"front",section:"",action:"impression"},"nascar"):trackClient({page:"front",section:"",action:"impression"},"front"),this.updatePageTitle(_("Twitter")),twttr.themes.loadFrontPageTheme()}});twttr.isT1?c.addAfterRender(function(){var a=$(".js-front-language form");a.submit(function(){trackClient({section:"language_dropdown",component:"form",action:"select"},{event_info:this.lang.value})})}):c.addAfterRender(function(){this.$find(".bottompart").empty().append((new twttr.components.LanguageLinks).$node.fadeIn()).append((new twttr.components.CountrySelect).$node.fadeIn()).append((new twttr.components.Footer).$node)}).addOnSwitchTo(function(){twttr.$elements.page.css("padding-top","")}),a(c)})}),provide("components/pages/Login",function(a){using("_","constants").as(function(b,_,c){var d=twttr.abdecider.choose("remember_me_checked_by_default_287")=="checked",e=jQuery.cookie("remember_checked")=="1"||jQuery.cookie("remember_checked")==null&&d,f=twttr.klass.page("twttr.components.pages.Login").view(twttr.views.LoginPage).addBeforeRender(function(){this.updatePageTitle(_("Sign in to Twitter")),twttr.themes.clear()}).addAfterRender(function(){if(twttr.loggedIn)twttr.showMessage(_("You are already logged in!")),twttr.router.routeTo(twttr.router.homePath());else{twttr.helpers.addFormEvents(this.$find("form.js-signin")),this.$find("p.js-forgot a[title]").tipsy({gravity:"se"});var a=this.$find(".js-bottompart");twttr.isT1?twttr.helpers.addHoldingInputEvents(this.$find("form")):a.append((new twttr.components.LanguageLinks).$node).append((new twttr.components.CountrySelect).$node),a.append((new twttr.components.Footer).$node);var b=this.$find(".username input").focus();setTimeout(function(){b.focus()},1)}}).addOnSwitchTo(function(){twttr.themes.loadDefaultTheme()}).methods({noAutoRender:!0,index:function(a,b){this.render({redirect_after_login:a.redirect_after_login||b.redirect_after_login,password_reset_title:_("If you remember your password, try logging in with your email"),remember_checked:e}),trackClient({section:"",component:"",action:"impression"},"login")},error:function(a,b){this.render({redirect_after_login:a.redirect_after_login||b.redirect_after_login,username_or_email:b.username_or_email,remember_checked:e}),twttr.loggedIn||(a.error=="captcha"?(this._addCaptcha(),twttr.showMessage(_("We gotta check... are you human?")),trackClient({section:"form",component:"captcha",action:"show"},"login")):(twttr.showError(_("Wrong Username/Email and password combination.")),trackClient({section:"form",component:"username_password",action:"validation_error"},"login")))},loginRequired:function(){twttr.router.routeTo(twttr.router.loginRedirectPath({redirect_after_login:twttr.Router.getCurrentPath()})),twttr.showMessage(_("You must log in to do that!"))},_addCaptcha:function(){var a=this;using(b.constants.recaptcha.srcUrl).load().then(function(){Recaptcha.create(b.constants.recaptcha.publicKey,a.$find(".js-signin .js-captcha")[0],{lang:twttr.pageLocale,theme:"white"})})}});a(twttr.components.pages.Login)})}),provide("components/pages/Logout",function(a){using("_").as(function(b,_){twttr.klass.page("twttr.components.pages.Logout").view(twttr.views.LogoutPage).addAfterRender(function(){twttr.helpers.addFormEvents(this.$find("form.signout")),this.$find(".cancel").click(function(){return twttr.router.routeTo(twttr.router.homePath()),!1});var a=this.$find(".bottompart");twttr.isT1||a.append((new twttr.components.LanguageLinks).$node).append((new twttr.components.CountrySelect).$node),a.append((new twttr.components.Footer).$node)}).methods({index:function(a,b){if(!twttr.loggedIn)return twttr.decider.isAvailable("mobile_download_gallery_logged_out")?twttr.router.routeTo("/download?logged_out=1"):twttr.router.routeTo(twttr.router.homePath());this.updatePageTitle(_("Twitter / Sign out of Twitter")),twttr.themes.loadCurrentUserStyle()}}),a(twttr.components.pages.Logout)})}),provide("components/pages/Profile",function(a){using("_",twttr.isT1?"components/pages/mixins/profileT1":"components/pages/mixins/profileP1",twttr.isT1?"mixins/t1/emptyTimelineRecommendations":"mixins/emptyTimelineRecommendations","constants").as(function(b,_,c,d){var e=twttr.klass("twttr.components.pages.Profile").subclassOf(twttr.components.pages.ProfileAbstract).view(twttr.views.ProfilePage).containerCssClass("profile-container").mixin(c,d).methods({checkWithheld:function(){twttr.decider.isAvailable("phoenix_pctd")&&twttr.profileUser&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope==="user"&&!twttr.helpers.isCurrentUser(twttr.profileUser.id)?this.renderWithheld():this.renderNotWithheld()},renderWithheld:function(){$("#page-container").removeClass("profile-container").addClass("wrapper-permalink permalink-container withheld")},renderNotWithheld:function(){$("#page-container").addClass("profile-container").removeClass("wrapper-permalink permalink-container withheld")},userWasBlocked:function(a,b){b.screenName===twttr.profileUser.screenName&&$(".profile-actions-container a.js-direct-message-action, .profile-actions-container div.js-direct-message-action").remove()},getUserInfo:function(a,b,c){if(this.profileUser&&a==this.profileUser.screenName){twttr.profileUser=this.profileUser,twttr.is.def(this.profileUser.promotedContent)&&(twttr.promotedAccount={id:this.profileUser.id,impressionId:this.profileUser.promotedContent.impression_id}),b&&b();return}var d=this.preRendered?this.$find("div.profile-header").attr("data-user"):null;if(d){data=JSON.parse(d),this.profileUser=twttr.profileUser=new twttr.anywhere.api.models.User(data),b&&b();return}return twttr.components.pages.ProfileAbstract.prototype.getUserInfo.apply(this,arguments)},profile:function(a,b){var c=this,d=a.screen_name.toLowerCase().replace(/^@/,"");this.loading(d),!twttr.loggedIn&&twttr.pageLocale==="ja"&&twttr.abdecider.choose("japanese_signup_text_profile_232"),this.getUserInfo(d,function(){c.updatePageTitle(_("{{fullName}} ({{screenName}}) on Twitter",{fullName:c.profileUser.name,screenName:d})),c._highlightNavIfCurrentUser(d),c.selectCurrentSideNav(),b.banner_preview_url&&twttr.helpers.isCurrentUser(c.profileUser)&&(c.bannerPreviewUrl=b.banner_preview_url),c._switchToStream({screenName:d,stream:c.initialProfileStream(),tab:"tweets"}),c.checkWithheld()},{batch:!twttr.loggedIn,profiler:!0},twttr.bind(this,this.noUserFoundCallback))},message:function(a){this.profile(a),a=a||{},twttr.API.User.find(a.screen_name,function(b){twttr.dialogs.dmSingle({user:{screenName:a.screen_name,user_id:b.attributes.id,name:b.attributes.name,profile_image_url:b.attributes.profile_image_url},origin:a.origin}).open()})},favorites:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Favorites",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.Favorites,tab:"favorites"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},profile_activity:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Activity",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.ActivityByUserStream,tab:"activity"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},followers:function(a){var b=this._defaultedScreenName(a.screen_name);this.updatePageTitle(_("Twitter / People who follow {{screenName}}",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.Followers,tab:"followers"})},following:function(a){var b=this._defaultedScreenName(a.screen_name);this.updatePageTitle(_("Twitter / People {{screenName}} is following",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this.one("switchedToStream",twttr.bind(this,this.insertEmptyTimeline)),this._switchToStream({screenName:b,stream:twttr.streams.Friends,tab:"following"})},youBothFollow:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){this.updatePageTitle(_("Twitter / People you and @{{screenName}} both follow",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.SocialContextStream,socialContextType:"followsInCommonWith",tab:"following"})}))},followersYouFollow:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){this.updatePageTitle(_("Twitter / People you follow who follow @{{screenName}}",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectSideNav("userFollowers"),this._switchToStream({screenName:b,stream:twttr.streams.SocialContextStream,socialContextType:"followingFollowersOf",tab:"followers"})}))},lists:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Lists",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.OwnLists,tab:"lists"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},subscriptions:function(a){var b=a.screen_name;this.updatePageTitle(_("Twitter / Lists {{screenName}} is following",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.Subscriptions,tab:"lists"})},followerRequests:function(a){var b=twttr.util.params().uid;b&&!twttr.helpers.isCurrentUser(+b)&&twttr.router.redirectTo("/?badLinkRecipient="+b);var c=this._defaultedScreenName(a.screen_name);if(!twttr.helpers.isCurrentUser(c))twttr.router.routeTo(twttr.router.profilePath({screen_name:c}));else{this.updatePageTitle(_("Twitter / My follower requests")),this.selectCurrentSideNav(),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.FollowerRequests,tab:"pending"});if(!this.didBindUserBlockedEvent){this.didBindUserBlockedEvent=!0;var d=this;twttr.API.User.bind("block",function(){d.streamManager.resetCache()})}}},listDeleted:function(a){this.streamManager.getCurrent().remove(a.uri)},dashStatsTitle:function(){return twttr.helpers.isProfileUser()?_("About you"):null},shouldShowTweetBox:function(){return twttr.loggedIn&&!twttr.helpers.isProfileUser()&&twttr.decider.isAvailable("profile_tweetbox")},renderTweetbox:function(){if(this.tweetBox&&this._renderedScreenName===twttr.profileUser.screenName)return this.tweetBoxNode;var a=this;this.$find("div.profile-tweet-box-placeholder").remove();if(this.shouldShowTweetBox()){var b=this.tweetBoxNode=$('<div class="profile-tweet-box"/>'),c="@"+this.profileUser.screenName;this.$find(".profile-actions-container").addClass("preceeding-profile-tweet-box").after(b),this.tweetBox=new twttr.TweetBox(b.empty(),twttr.merge({defaultContent:c+" ",id:"profile-tweet-box",condensed:!0,enableDraft:twttr.isT1,enableAutoGrow:twttr.isT1,statusAction:"update"},this.getTweetBoxOptions())),this.tweetBox.bind("tweetSuccess",function(a,b){b.inReplyToScreenName?twttr.showMessage(_("Your Tweet to @{{username}} has been sent!",{username:b.inReplyToScreenName})):twttr.showMessage(_("Your Tweet was posted!"))})}return b},getTweetbox:function(){return this.tweetBox},initialProfileStream:function(){return twttr.isT1&&twttr.streams.Profile.shouldDisplay()?twttr.streams.Profile:twttr.streams.User},noUserFoundCallback:function(){this._renderedScreenName=null,this.streamManager&&(this.streamManager.switchOut(),this.streamManager.setCurrent(null))}}).addOnSwitchAway(function(){twttr.admin&&twttr.admin.removeTools(),this.renderNotWithheld(),twttr.API.User.unbind("block",this.userWasBlocked)}).addAfterRender(function(){if(!window.location.hash)return;var a=twttr.util.paramsFromUrl(window.location.hash);a&&a.protected_redirect&&(window.location.hash=window.location.hash.replace("?protected_redirect=true",""),twttr.showError(_("Sorry, you are not authorized to see this status.")))}).addAfterRender(function(){this.preRendered&&!this.didEmptyDashboard&&(this.$find("div.dashboard").empty(),this.didEmptyDashboard=!0),this.addDashboardComponents(this.getDashboardComponents())});a(e)})}),provide("components/pages/List",function(a){using("_","util",twttr.isT1?"components/pages/mixins/listT1":"components/pages/mixins/listP1","streams/List","streams/ListMembers","streams/ListFollowers","components/SignupCallOut",function(_,b,c,d,e,f,g){var i=twttr.klass("twttr.components.pages.List").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).methods(twttr.EventProvider).methods({list:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}}",a)),this.switchToStream(d,a),this.selectCurrentSideNav(),this.focusStreamTab("tweets")},members:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}} - Following",a)),this.switchToStream(e,a),this.selectCurrentSideNav(),this.focusStreamTab("members")},followers:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}} - Followers",a)),this.switchToStream(f,a),this.selectCurrentSideNav(),this.focusStreamTab("followers")},noAutoRender:!0,listDeleted:function(a){twttr.showMessage(_("List deleted")),twttr.router.routeTo(twttr.router.homePath())},listUpdated:function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:a.slug}))},_getList:function(a){var b=this;if(!this.listOwnerName||!this.listId)throw"You tried to use _getList before defining .listOwnerName and .listId";twttr.API.User.find(this.listOwnerName,function(c){c.lists.find(b.listId,function(b){a(b,c)})})},switchToStream:function(a,b){var c=this,d=function(){c.trigger("notFound")};this.loading(b.screenName,b.listSlug),twttr.API.User.find(b.screenName,{success:function(e){twttr.profileUser=e,e.lists.find(b.listSlug,{success:function(d){c.listId=d.id,c.listOwnerName=d.user.screenName,c._listSlug=d.slug,c.fullName=d.fullName;var e=new twttr.views.List(d);twttr.themes.loadUserStyleFor(d.user),c._renderedListId!==d.id&&(c.render({list:e}),c._registerEvents(d),c._renderedListId=d.id),c.streamManager.switchTo(a,b)},error:d})},error:d})},loading:function(a,b){this.unfocusStreamItem(),this._listSlug!==b&&this.listOwnerName!==a&&this.$node.children().empty()}}).addAfterRender(function(){var a=this;this._getList(function(b,c){a.owner=c,twttr.loggedIn||a.addDashboardComponent(new g("list",{profileUser:c})),a.addDashboardComponents(a.getDashboardComponents(b)),a.owner&&!twttr.isT1&&trackClient({action:"impression"},{profile_id:a.owner.id,message:b.slug})})}).mixin(c);a(i)})}),provide("components/pages/Permalink",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.pages.Permalink").subclassOf(twttr.components.Page).view(twttr.views.PermalinkPage).addOnSwitchAway(function(){twttr.$elements.page.css("padding-top",""),twttr.widget.Dialog.close()}).methods({permalink:function(a){this.loadPage(a)},loadPage:function(a,b){var c=this;twttr.widget.Dialog.close();if(this._renderedTweetId==a.id)return b&&b.call(this);this._renderedTweetId=a.id,this.loading();var d=function(b){b.status==403?twttr.router.routeTo(twttr.router.profilePath({screen_name:a.screen_name})):c.trigger("notFound")},e=function(d){c.tweetComponent=new twttr.components.PermalinkTweet(d),c.tweetComponent.$node.appendTo(c.$find(".components-middle")),c.tweetComponent.bind("deleted",function(){twttr.app.isOnPage("permalink")&&twttr.router.routeTo(twttr.router.homePath())});if(a.photo_index&&!twttr.decider.isAvailable("phoenix_turkey_permalink")){c.trigger("notFound");return}var e=c.$find(".permalink");if(c.tweetComponent.renderWithheld())e.addClass("withheld");else{c.tweetComponent.renderCreatorWithheld()?e.addClass("withheld-creator"):e.removeClass("withheld-creator");var f=c.$find("div.js-tweet-media-container");c.mediaComponent=new twttr.components.Media(d,f.width(),{linkLarge:!0}),c.mediaComponent.$node.appendTo(f);var g=new twttr.components.InReplyTo(d),i=new twttr.components.TweetGeoSmall(d),j=new twttr.components.Footer("slim"),k=new twttr.components.MachineTranslatedTweet(d);g.$node.appendTo(c.$find(".components-above"));if(!twttr.isT1){var l=new twttr.components.MentionedInTweet(d);l.$node.appendTo(c.$find(".components-below"))}c.renderActivity(d),i.$node.appendTo(c.$find(twttr.isT1?".components-middle .permalink-inner":".components-below")),c.renderReplies(d),j.$node.appendTo(c.$find(".permalink-footer")),k.$node.appendTo(c.$find("div.js-machine-translated-tweet-container")),e.removeClass("withheld"),b&&b.call(c)}if(!twttr.loggedIn){var m=new twttr.components.SignupCallOut("permalink",{profileUser:d.user});twttr.isT1?m.$node.prependTo(c.$find(".permalink-footer")):m.$node.appendTo(c.$find(".permalink-header")),twttr.$elements.page.css("padding-top","30px")}};twttr.API.Status.find(a.id,{success:function(a){c.status=a,c.updatePageTitle(_("Twitter / @{{screenName}}: {{{truncatedText}}} ...",{screenName:a.user.screenName,truncatedText:a.text.slice(0,26)})),twttr.themes.loadUserStyleFor(a.user),c.render(),twttr.loggedIn?twttr.currentUser.relationshipWith(a.user.screenName,{success:function(b){a.user.following=b.following,a.user.attributes.following=b.following,a.attributes.user.following=b.following,e(a)},error:d}):(a.user.following=!1,a.user.attributes.following=!1,a.attributes.user.following=!1,e(a)),trackClient({component:"tweet",action:"results"},{item_ids:[a.id],item_count:1,event_value:1})},error:d}),trackClient({action:"impression"})},loading:function(){this.$find(".permalink").empty()}}).methods({noAutoRender:!0}).click({".js-tweets-at-this-place":function(a,b){var c=b.attr("data-place-id"),d=b.attr("data-place-name");return c&&d&&twttr.router.routeTo(twttr.router.placeTweetSearchPath({place_id:c,place_name:d})),a.stopPropagation(),a.preventDefault(),!1},"a[data-twitter-media-url='true']":function(a){a.stopPropagation()}}).keydown({f:function(a){$(a.target).is(":not(input)")&&this.tweetComponent.faveTweet("keyboard")},r:function(a){$(a.target).is(":not(input)")&&(this.tweetComponent.replyTweet("keyboard"),a.preventDefault())},t:function(a){$(a.target).is(":not(input)")&&this.tweetComponent.retweetTweet("keyboard")}});twttr.isT1?c.containerCssClass("wrapper-permalink").methods({renderReplies:function(a){var b=this;new twttr.components.Conversation(a,null,function(c){var d=new twttr.components.Replies(a,null,c.resultGroups);d.$node.appendTo(b.$find(".components-below")),new twttr.components.InlineReplyBox(b.tweetComponent.$node.find(".tweet"),b.$find(".components-below"),d.$node,481,425)})},permalinkWithEmbedDialog:function(a){this.loadPage(a,this.showEmbedDialog)},showEmbedDialog:function(){twttr.decider.isAvailable("embed_code_dialog")&&twttr.dialogs.embedCode(this.status).open()},renderActivity:twttr.util.noopInT1}).click({"a.embed-link":function(a){a.preventDefault(),a.stopPropagation(),twttr.router.routeTo(twttr.router.embedDialogPermalinkPath({screen_name:this.status.user.screenName,id:this.status.id}))}}):c.containerCssClass("permalink-container").methods({permalinkWithEmbedDialog:twttr.util.noopInP1,showEmbedDialog:twttr.util.noopInP1,renderReplies:twttr.util.noopInP1,renderActivity:function(a){var b=twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_social_context"),c=new twttr.components[b?"TweetActivity":"Retweeters"](a);c.$node.appendTo(this.$find(".components-below"))}}),a(c)})}),provide("components/pages/WhoToFollow",function(a){using("_","constants","streams/SuggestionCategoryMembersStream").as(function(b,_){twttr.klass.page("twttr.components.pages.WhoToFollow",function(){twttr.components.Page.apply(this,arguments),this.dashboardNeedsToBeCreated=!1}).mixin(twttr.mixins.streamablePage).mixin(twttr.mixins.discoveryHelper).view(twttr.views.WhoToFollow).addAfterRender(function(){this._rendered=!0;var a=this;this._createDashboard(!0),twttr.helpers.addFormEvents(this.$find(".who-to-follow-header form"),function(){var b=twttr.audit.currentAction(),c=this.q.value,d;twttr.audit.currentPage()=="welcome"?d=twttr.components.pages.Welcome.ROUTES_TO_STEP[b]:d=twttr.components.pages.WhoToFollow.ROUTES_TO_STEP[b],c!=""&&(trackClient({component:"user_search_form",action:"search"},{step:d,query:c}),a.routePageTo(a.PATH_ROOT,"Search",{query:c}))})}).addOnSwitchTo(function(){this._createDashboard(),trackClient({section:"",component:"",action:"impression"})}).addOnSwitchAway(function(){twttr.API.User.unbind("follow.RecentlyFollowedComponent"),twttr.recentlyViewedUsers.unbind("push.RecentlyViewedComponent"),this.dashboardNeedsToBeCreated=!0,this._rendered=!1,this.$find(".dashboard > .component").remove()}).statics({ROUTES_TO_STEP:{whoToFollow:"suggestions",suggestions:"suggestions",interests:"interests",category:"interests","import":"import",matches:"import",search:"search"}}).methods({switchToStream:function(){var a=this.streamManager.switchTo.apply(this.streamManager,arguments);return a},search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo(this.PATH_ROOT);this._switchTabAndRender("search",c),this.updatePageTitle(_("Twitter / User Search")),trackClient({action:"impression"},{context:"search",query:c});var d=twttr.Scribbler.clientEvent.spawn({context:"search",query:c});this.switchToStream(twttr.streams.PeopleSearch,{query:c,scribbler:d,pathRoot:this.PATH_ROOT})},suggestions:function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("suggestions"),this.updatePageTitle(_("Twitter / Who to follow / Suggestions")),trackClient({action:"impression"},"suggestions");var c=twttr.Scribbler.clientEvent.spawn({context:"suggestions"});if(twttr.decider.isAvailable("whotofollow_recommendations")){var d=this.switchToStream(twttr.streams.UserRecommendationsStream,{scribbler:c,pathRoot:this.PATH_ROOT});d&&d.setStreamManager(this.streamManager)}else twttr.router.redirectTo(twttr.router.whoToFollowInterestsPath())},interests:function(a,b){this._switchTabAndRender("interests"),this.updatePageTitle(_("Twitter / Who to follow / Interests")),trackClient({action:"impression"},"interests");var c=twttr.Scribbler.clientEvent.spawn({context:"interests"}),d={scribbler:c,pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.SuggestionCategoriesStream,this.localizeQuery(d,b))},category:function(a,c){var d=this,e=function(a){if(!a)return d.routePageTo(d.PATH_ROOT,"Interests");var e=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});d._switchTabAndRender("interests"),d.updatePageTitle(_("Twitter / Who to follow / Interests / {{category}}",{category:a.name})),d.switchToStream(b.streams.SuggestionCategoryMembersStream,d.localizeQuery({category:f,suggestionCategory:a,scribbler:e,pathRoot:d.PATH_ROOT},c))},f=a.category||c.category;trackClient({action:"impression"},{query:f,context:"interests"});var g=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;g?e(g[f]):twttr.API.SuggestionCategory.getAll(this.localizeQuery({success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[f];e(b)}},c))},"import":function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("import","","services"),this.updatePageTitle(_("Twitter / Who to follow / Find friends")),trackClient({action:"impression"},"import");var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:this.PATH_ROOT},b),e=this.switchToStream(twttr.streams.ContactImportServices,d);e&&e.setStreamManager(this.streamManager)},matches:function(){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("import","","matches"),this.updatePageTitle(_("Twitter / Who to follow / Find friends / Results")),trackClient({action:"impression"},"import");var a=twttr.Scribbler.clientEvent.spawn({context:"import"});this.switchToStream(twttr.streams.ContactImportMatches,{scribbler:a,pathRoot:this.PATH_ROOT})},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a},PATH_ROOT:"whoToFollow",noAutoRender:!0,_createDashboard:function(a){if(a||this.dashboardNeedsToBeCreated)this.addDashboardComponents(this._dashboardComponents()),this.dashboardNeedsToBeCreated=!1},_dashboardComponents:function(){var a=twttr.Scribbler.clientEvent.spawn({context:function(){var a=twttr.audit.currentAction();return twttr.audit.currentPage()=="welcome"?twttr.components.pages.Welcome.ROUTES_TO_STEP[a]:twttr.components.pages.WhoToFollow.ROUTES_TO_STEP[a]}});if(!twttr.loggedIn)return[new twttr.components.SignupCallOut("who_to_follow"),new twttr.components.Footer];var b=twttr.abdecider.choose("wtf_with_less_122"),c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer];return b=="empty_dashboard"?c=[]:b=="no_recent_follow"?c=[new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_recent_view"?c=[new twttr.components.RecentlyFollowed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_invite_friends"?c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_related_services"?c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.Footer]:b=="invite_friends_only"&&(c=[new twttr.components.InviteFriends(a)]),c},_switchTabAndRender:function(a,b,c){this._rendered||this.render();var d=this.$find(".who-to-follow-header form input");b?d.val(b).addClass("actasfocused").focus():d.val("").removeClass("actasfocused").blur(),this.focusStreamTab(a,c),this.$find(".who-to-follow-stream").removeClass().addClass("who-to-follow-stream who-to-follow-"+a+"-stream"),twttr.themes.loadDefaultTheme()}}),a(twttr.components.pages.WhoToFollow)})}),provide("components/pages/WebPersonalizationPreview",function(a){using("_","constants","components/WebPersonalizationSettings","components/Footer").as(function(b,_){var c=twttr.klass.page("twttr.components.pages.WebPersonalizationPreview").view(twttr.views.WebPersonalizationPreview).containerCssClass("wrapper-narrow").methods({preview:function(a,c){if(!twttr.decider.isAvailable("personalization_preview")&&!c.force_bq)return twttr.router.redirectTo(twttr.router.whoToFollowInterestsPath());this.updatePageTitle(_("Twitter / Web Personalization Preview")),twttr.inEU&&trackClient({element:"eu",action:"impression"}),twttr.doNotTrack&&trackClient({element:"dnt",action:"impression"}),twttr.themes.loadDefaultTheme(),this.$node.empty();var d=new b.components.WebPersonalizationSettings;d.$node.appendTo(this.$node),d.bind("disallow",function(a){twttr.router.routeTo(twttr.router.homePath())}),(new b.components.Footer("slim")).$node.appendTo(this.$node)}});a(c)})}),provide("components/pages/404",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.404").subclassOf(twttr.components.Page).view(twttr.views["404Page"]).containerCssClass("error-page").methods({notFound:function(a){this.render(),this.updatePageTitle(_("Twitter / ?")),twttr.themes.loadCurrentUserStyle()}}).methods({noAutoRender:!0}).addAfterRender(function(){var a=this,b=new twttr.components.Footer("slim");this.$find("div.four-oh-four-footer").remove(),b.$node.appendTo(this.$find(".four-oh-four")),twttr.helpers.addFormEvents(this.$find(".user-search-form"),function(){var a=this.q.value;a!=""&&(twttr.isT1?twttr.router.routeTo(twttr.router.userSearchPath({query:a})):twttr.router.routeTo(twttr.router.whoToFollowSearchPath({query:a})))}),a.$find(".user-search-form").addClass("ready")}),a(twttr.components.pages[404])})}),provide("components/pages/403",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.403").subclassOf(twttr.components.Page).view(twttr.views.SuspendedUserPage).containerCssClass("error-page").methods({suspendedUser:function(a){this.render(),this.updatePageTitle(_("Twitter / Suspended")),twttr.themes.loadCurrentUserStyle()}}).methods({noAutoRender:!0}),a(twttr.components.pages[403])})}),provide("components/pages/PlaceT1",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.pages.PlaceT1",function(){twttr.components.Page.apply(this,arguments)}).subclassOf(twttr.components.Page).methods({tweets:function(a){var b=this;twttr.API.Place.find(a.place_id,{success:function(a){twttr.router.redirectTo(twttr.geo.getPlaceFullAddressAndMapLink(a.data()).map_link)},error:function(a){b.trigger("notFound")}})},noAutoRender:!0});a(c)})}),provide("components/pages/RateLimit",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.RateLimit").subclassOf(twttr.components.Page).view(twttr.views.RateLimitPage).methods({tooMuch:function(a){this.render(),this.updatePageTitle(_("Twitter / Error")),twttr.themes.loadDefaultTheme()}}).methods({noAutoRender:!0}).containerCssClass("four-twenty-container"),a(twttr.components.pages.RateLimit)})}),provide("components/pages/mixins/welcomeLearnFlowT1",function(a){using().as(function(){twttr.klass.mixin("twttr.components.pages.mixins.welcomeLearnFlowT1",function(){return this.click({".js-account-group":function(a,b){a.stopPropagation(),a.preventDefault(),this.showMiniProfile(b.closest(".js-actionable-user").data("user-id")),twttr.scribbles.logViewProfileDetails.call(b,a)},".js-who-to-follow-search .js-submit":function(){trackClient({component:"user_search_form",element:"search_button",action:"click"})}}).methods({showMiniProfile:function(a){twttr.API.User.find(a,function(a){using("widget/MiniProfileDialog",function(b){(new b(a,!0)).open()})})},_slideDrawer:function(a,b){a?$(".js-welcome-dashboard").show():$(".js-welcome-dashboard").hide(),b&&b()},_customRenderStep:function(a){a=="matches"?this.$find(".js-back-to-import").show():this.$find(".js-back-to-import").hide()},_pulseFollowButton:function(){},_resizeFlow:function(){var a=$(window).height()-$(".js-flow-step").outerHeight()-$(".js-welcome-stream-header").outerHeight()-$("div.js-stream-header").outerHeight()-($(".js-back-to-import:visible").outerHeight()||0)-114;a>100&&$(".stream-manager-container").css("max-height",a);var b=$(window).height()-$(".js-welcome-faux-tweet-stream").height()-$(".js-content-header").height()-153+30;b>20&&$(".route-welcome .content-main .stream-end-inner").css("padding-bottom",b)},_getNextButtonText:function(a){return a?_("Done"):_("Next")},_setTheme:function(){twttr.themes.loadDefaultTheme()}}).addOnSwitchTo(function(){twttr.cache.local.shownWelcomeFlow=!0})}),a()})}),provide("components/pages/WelcomeLearnFlow",function(a){using("streams/SuggestionCategoryMembersDashboardStream","stork").as(function(b){twttr.klass.page("twttr.components.pages.WelcomeLearnFlow",function(){twttr.components.Page.apply(this,arguments),this._steps=this._firstStep=null;var a=twttr.Router.getCurrentQueryStringParams();this._resurrect=!!a.resurrect;var b=[];for(var c=0;c<b.length;++c){var d=twttr.abdecider.choose(b[c]);if(d!="")break}d||(this._bucket=a.welcomeBucket),this._showIntro=!0,this._showProgress=!0,this.PROFILE_SIZE_LIMIT=716800}).subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).mixin(twttr.mixins.discoveryHelper).mixin(twttr.mixins.welcomeScribing).mixin(twttr.isT1?twttr.components.pages.mixins.welcomeLearnFlowT1:twttr.components.pages.mixins.welcomeLearnFlowP1).view(twttr.views.WelcomeLearnFlow).click({".user-content-image, .display-name, .screen-name":function(a){$(a.target).closest(".stream-item-content").find(".more-info").slideDown()},".glass .submit":function(a){$(a.target).closest("form").submit()},".js-image-error .js-dismiss":function(){this._hideImageError()},".js-back-to-stream .js-button":function(){this.$find(".js-welcome-search input[type='text']").val("");var a=this._steps[this._currentSearchStepId].route;twttr.router.routeTo(a)},".js-full-results-link":function(a){var b=$(a.target).data("query")||"";trackClient({section:"search",element:"full_results_link",action:"click"},{query:b}),this.routePageTo(this.PATH_ROOT,"Search",{query:b})},".js-skip-link":function(a){var b=this,c=$(a.target),d=this._steps[this._currentStepId],e=function(){b._scribeStepCompletion("skip"),b._isOnLastStep()?b.finish():twttr.router.routeTo(c.attr("href"))};return d&&d.skip_handler?d.skip_handler(e):window.setTimeout(e,0),!1},".js-next-btn":function(a){var b=this,c=$(a.target);if(c.is(".disabled"))return!1;var d=this._steps[this._currentStepId],e=function(){b._scribeStepCompletion("done"),b._isOnLastStep()?b.finish():twttr.router.routeTo(c.attr("href"))},f;return b._lastStream&&b._lastStream.deferFollows?f=function(){d.suppress_follow_progress=!0,b._addNextDisableReason("prefollowing"),b._lastStream.commitPrefollows(function(){d.suppress_follow_progress=!1,e()})}:f=e,d&&d.next_handler?d.next_handler(f):window.setTimeout(f,0),!1}}).addOnSwitchTo(function(){this.updatePageTitle(_("Twitter / Welcome")),twttr.app.resetPadding(),this.setWelcomeSkipCookie(),this._setSteps(),twttr.abdecider.choose("growth_stork_persistent_239")!="no_stork"&&twttr.stork.init(),twttr.decider.isAvailable("welcome_timeline_stats")&&(twttr.streams.Home.scribeTweetDensity=!0,twttr.components.pages.Home.scribeScroll=!0);var a=this;twttr.API.User.bind("follow_request.WelcomeLearnFlow prefollow_request.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(1)}}),twttr.API.User.bind("follow.WelcomeLearnFlow prefollow.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(1)},success:function(b,c){a._previewFollow(c)}}),twttr.API.User.bind("unfollow.WelcomeLearnFlow unprefollow.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(-1)},success:function(b,c){a._previewUnfollow(c)}}),$(window).bind("resize.WelcomeLearnFlow",twttr.bind(this,this._resizeFlow))}).addOnSwitchAway(function(){twttr.app.recalculatePadding(),this._steps=this._firstStep=null,twttr.API.User.unbind(".WelcomeLearnFlow"),$(window).unbind("resize.WelcomeLearnFlow"),this._profileImageInterval&&(window.clearInterval(this._profileImageInterval),this._profileImageInterval=null),twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=$.noop}).addAfterRender(function(){var a=this;this._rendered=!0,this.streamManager.noInfiniteScroll=!0,this.$find(".welcome-dashboard div.js-stream-manager-container").bind("scroll",function(b){var c=$(this);Math.abs(c.scrollTop()+c.height()-c.children().height())<100&&a.streamManager.getMoreOldItems(function(a){scribble("stream-scrolled",{page:a._page,stream:a._cacheKey,focused_tweet_id:a.focusedItemId||""})})}),twttr.helpers.addFormEvents(a.$find(".js-welcome-search form"),function(b,c){var d=c.q;if(d!=""){var e=function(){trackClient({component:"user_search_form",action:"search"},{query:d});var b=twttr.abdecider.choose("welcome_top_people_286")=="top_people"?"SearchTop":"Search";a.routePageTo(a.PATH_ROOT,b,{query:d})};a._lastStream&&a._lastStream.deferFollows?a._lastStream.commitPrefollows(e):e()}})}).statics({ROUTES_TO_STEP:{intro:"intro",interests:"interests",category:"interests","import":"import",matches:"import",search:"search",starter:"starter",recommendations:"recommendations",profile:"profile"}}).methods({PATH_ROOT:"welcome",noAutoRender:!0,_addressBookAvailable:function(){return twttr.decider.isAvailable("wtf_signup_suggestions")},_previewFollow:function(a){var b=this,c=this.$find('.js-tweet-preview-container .js-unclickable-tweet[data-user-id="'+a.idStr+'"]');if(c.length){c.slideDown();return}var d=function(a){var c=new twttr.views.UnclickableTweet(a),d=$(c.html()).hide();b.$find(".js-tweet-preview-container").prepend(d),d.slideDown()};a.status&&!a.status.inReplyToUserId&&!a.status.attributes.was_retweeted?(a.status.attributes.user=a.attributes,d(a.status)):a.timeline({count:25,exclude_replies:!0,success:function(a){a.length()&&d(a.first())}})},_previewUnfollow:function(a){var b=this,c=this.$find(".js-tweet-preview-container .js-unclickable-tweet[data-user-id="+a.id+"]");c.slideUp()},_setSteps:function(){var a=this;this._steps={intro:{route:twttr.router.welcomeIntroPath(),title:_("Welcome, {{{name}}}.",twttr.currentUser),subtitle:_("Get started in less than 60 seconds."),next_step:"recommendations",show_progress:!1,show_search:!1,next_enabled:!0,no_drawer:!0,show_intro_text:!1},recommendations:{route:twttr.router.welcomeRecommendationsPath(),title:_("Build your timeline."),subtitle:_("Follow people to get their Tweets."),next_step:"interests",show_search:!0,show_progress:!0,initial_progress_copy:_("Start by following 5"),min_progress:3,suggested_progress:5,next_enabled:!1,show_intro_text:!0},"import":{route:twttr.router.welcomeImportPath(),title:_("Find people you know."),subtitle:_("Add your contacts securely."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:2,suggested_progress:5,next_enabled:!1,show_intro_text:!0},matches:{route:twttr.router.welcomeImportMatchesPath(),title:_("Find people you know."),subtitle:_("Add your contacts securely."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:2,suggested_progress:5,next_enabled:!1,show_intro_text:!0},interests:{route:twttr.router.welcomeInterestsPath(),title:_("See who’s here."),subtitle:_("Find and follow well-known people."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:3,suggested_progress:5,next_enabled:!1,show_intro_text:!0},profile:{route:twttr.router.welcomeProfilePath(),title:_("Add character."),subtitle:_("Upload a photo and describe yourself.",twttr.currentUser),next_step:"finish",show_search:!1,show_progress:!1,min_progress:1,suggested_progress:1,next_enabled:twttr.abdecider.choose("hide_skip_in_profile_welcome_step_288")==="skip_disabled",skip_disabled:twttr.abdecider.choose("hide_skip_in_profile_welcome_step_288")==="skip_disabled",next_handler:function(b){a._handleProfileNext(b)},show_intro_text:!0}},this._firstStep=this._showIntro?"intro":"recommendations";var b="interests",c;this._resurrect&&(this._steps["import"].min_progress=0),twttr.abdecider.choose("welcome_prefollow_213")=="prefollow"&&(this._steps.recommendations.subtitle+=" "+_("Here are 3 accounts to get you started.")),twttr.abdecider.choose("welcome_email_import_copy_change_264")=="nospam"&&(this._steps["import"].subtitle=_("We won't email your contacts without your permission."),this._steps.matches.subtitle=_("We won't email your contacts without your permission.")),twttr.decider.isAvailable("contact_import")&&(c=this._steps[b],c.next_step="import",b="import"),twttr.decider.isAvailable("welcome_profile")&&twttr.decider.isAvailable("avatar_upload")&&!this._resurrect&&(c=this._steps[b],c.next_step="profile",b="profile"),twttr.decider.isAvailable("welcome_ad_track")&&(this._steps.intro.ad_referal=$.cookie("ad_partner")=="adparlor",this._steps.intro.ad_parlor=$.cookie("ad_partner")=="adparlor"),this._currentSearchStepId=this._steps.intro.next_step,this._steps.matches.next_step=this._steps["import"].next_step},_addAmbassadorList:function(a,b){twttr.currentUser.friendsCount>0?twttr.currentUser.friends().first(function(c){if(!c){b();return}c.lists(function(c){var d=c.find(function(a){return a.description.match(/\#WelcomeToTwitter/i)});if(d){var e=[],f=-1,g=function(){d.members({cursor:f,success:function(c,d){e=e.concat(c.toArray()),d.response.next_cursor?(f=d.response.next_cursor,g()):(a.unshift(e),a.render(),b())}})};g()}else b()})}):b()},_routeToFirstStep:function(){var a=this;window.setTimeout(function(){a._steps?twttr.router.routeTo(a._steps[a._firstStep].route):twttr.router.routeTo(twttr.router.welcomePath())},0)},welcome:function(a,b){this._steps?(trackClient({action:"impression"}),this._welcomeSetupSpinner&&(this._welcomeSetupSpinner.detach(),this._welcomeSetupSpinner=null),this._routeToFirstStep()):(this.render(),this.$find(".js-welcome-search").hide(),this.streamManager.setTitle({_setTitle:function(a){a(_("Please wait…"))}}),this._welcomeSetupSpinner=(new twttr.views.StreamLoading).render(this.$find(".js-who-to-follow-stream .stream-container"),"html"))},_recommendationsStreamOptions:function(){var a={inWelcomeFlow:!0,pathRoot:this.PATH_ROOT,title:"",scribbler:this._createScribbler("recommendations_stream",{context:"starter"})};return a},recommendations:function(a,b){var c=new twttr.streams.UserRecommendationsStream(this._recommendationsStreamOptions()),d=this,e=function(){return twttr.router.routeTo(d._nextRoute(d._steps.recommendations))};if(!this._addressBookAvailable()){e();return}c.loadRecommendedUsers({success:function(a,b){if(a.length()>0){c.scribbler.scribe({action:"found_results",section:"recommendations"}),d._renderStep("recommendations"),d.bqPrefollow&&d.$find(".js-welcome-faux-tweet-stream").hide();var f=d._recommendationsStreamOptions();f.initialItems=a,f.cursor=b.response.next_cursor;var g=d.switchToStream(twttr.streams.UserRecommendationsDashboardStream,f);d.bqPrefollow&&g.reachedTheEnd(),twttr.decider.isAvailable("welcome_warm_signup")&&!d.bqPrefollow?d._addAmbassadorList(g,function(){d._loadedRecommendations(g)}):d._loadedRecommendations(g),g.bind("rendered_recs.WelcomeLearnFlow",function(){d._pulseFollowButton()}),f.scribbler.scribe({action:"impression"})}else c.scribbler.scribe({action:"not_found_results",section:"recommendations"}),e()},error:function(a){e()}})},_loadedRecommendations:function(a){twttr.abdecider.choose("welcome_prefollow_213")=="prefollow"&&twttr.currentUser.friendsCount<=1&&this._prefollow(a,3),this.bqPrefollow&&this._prefollow(a,100)},_prefollow:function(a,b){var c=this,d=this._steps[this._currentStepId];a.deferFollows=!0,window.setTimeout(function(){c.$find(".js-welcome-dashboard .js-stream-item .js-follow-combo").each(function(c,d){if(c>=b)return!1;a.userActionPrefollow($(d),"prefollow.user")}),d.next_enabled||window.setTimeout(function(){c._addNextDisableReason("progress")},0)},0)},intro:function(a,b){trackClient({action:"impression"}),this._renderStep("intro"),this.switchToStream(null)},resurrect:function(a,b){var c=twttr.router.welcomeRecommendationsPath();trackClient({action:"impression"},"resurrect"),c="/?resurrect=1"+c.slice(1),window.location.href=c},"import":function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._renderStep("import"),trackClient({action:"impression"},"import");var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:this.PATH_ROOT,onlyMatched:twttr.abdecider.choose("welcome_flow_no_choice_contact_import_160")=="no_choice_contact_import",inWelcomeFlow:!0,context:"welcome"},b),e=this.switchToStream(twttr.streams.DashboardContactImportServices,d);e&&(e.setStreamManager(this.streamManager),e.setMatchesStreamKey(this._lastMatchesStreamKey))},matches:function(){if(!twttr.loggedIn)return this.trigger("loginRequired");this._renderStep("matches"),trackClient({action:"impression"},"import");var a=twttr.Scribbler.clientEvent.spawn({context:"import"}),b={scribbler:a,pathRoot:this.PATH_ROOT},c=this.switchToStream(twttr.streams.DashboardContactImportMatches,b),d=this;c.bind("error.WelcomeLearnFlow",function(){d._removeNextDisableReason("progress")}),this._lastMatchesStreamKey=c._cacheKey},interests:function(a,b){var c=this;this._renderStep("interests"),trackClient({action:"impression"});var d=twttr.Scribbler.clientEvent.spawn({context:"interests"}),e={scribbler:d,noHeaderFooter:!0,title:"",pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.SuggestionCategoriesDashboardStream,this.localizeQuery(e,b))},category:function(a,c){var d=this,e=function(a){if(!a)return d.routePageTo(d.PATH_ROOT,"Interests");var e=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});d._renderStep("interests"),d.$find(".js-back-to-stream .js-dashboard-stream-title").text(a.name),d.$find(".js-back-to-stream").show(),d._resizeFlow();var g=d.localizeQuery({category:f,suggestionCategory:a,scribbler:e,noHeaderFooter:!0,title:a.name+" ("+a.size+")",pathRoot:d.PATH_ROOT},c);d.switchToStream(b.streams.SuggestionCategoryMembersDashboardStream,g)},f=a.category||c.category;trackClient({action:"impression"},{query:f,context:"interests"});var g=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;g?e(g[f]):twttr.API.SuggestionCategory.getAll(this.localizeQuery({success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[f];e(b)}},c))},switchToStream:function(a){return this._lastStream&&(this._lastStream.unbind(".WelcomeLearnFlow"),this._lastStream=null),a?this._lastStream=this.streamManager.switchTo.apply(this.streamManager,arguments):(this.streamManager.switchOut(),this.streamManager.setCurrent(null),this.streamManager.$moreButton&&this.streamManager.$moreButton.hide()),this._lastStream},search:function(a,b){var c=a.query||b.q;if(!c)return twttr.router.routeTo(this._steps[this._currentSearchStepId].route);this._renderStep(this._currentSearchStepId);var d=this.$find(".js-back-to-stream");d.find("h3").html(_("Results for: <strong>{{query}}</strong>",{query:""})).find("strong").text(c),d.show(),this.$find('.js-welcome-search input[type="text"]').focus();var e=this._createScribbler({section:"search",component:"full_stream"},{context:"search",query:c});e.scribe({action:"impression"});var f={query:c,scribbler:e,pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.DashboardPeopleSearch,f)},searchTop:function(a,b){var c=a.query||b.q;if(!c)return twttr.router.routeTo(this._steps[this._currentSearchStepId].route);this._renderStep(this._currentSearchStepId);var d=this.$find(".js-back-to-stream");d.find("h3").html(_("Top results for: <strong>{{query}}</strong>",{query:""})).find("strong").text(c),this.$find('.js-welcome-search input[type="text"]').focus();var e=this._createScribbler({section:"search",component:"top_stream"},{context:"search",query:c});e.scribe({action:"impression"});var f={query:c,scribbler:e,pathRoot:this.PATH_ROOT},g=this,i=this.switchToStream(twttr.streams.DashboardTopPeopleSearch,f);i.bind("results.WelcomeLearnFlow",function(a,b){b.isEmpty()?g.routePageTo(g.PATH_ROOT,"Search",{query:c}):d.show()})},profile:function(a,b){var c=this;trackClient({action:"impression"});var d=twttr.currentUser.profileImageUrl;d.indexOf("default_profile_image")!=-1&&(d=twttr.assets.path("t1/img/upload_placeholder.png"));var e={description:twttr.currentUser.description,location:twttr.currentUser.location,url:twttr.currentUser.url,profile_image_url:d,api_url:"//"+twttr.domains.remote,post_authenticity_token:twttr.API.getConfig().postAuthenticityToken};this._renderStep("profile"),this.switchToStream(null),(new twttr.views.WelcomeLearnProfile(e)).render(this.$find(".js-content-container"),"html");var f=this.$find(".js-profile-image-input"),g=this.$find(".js-profile-form"),i=this.$find(".js-bio-count");f.bind("change",function(){c._uploadProfileImage()}),twttr.helpers.addFormEvents(g,$.noop),g.find("input, textarea").bind("change keypress",function(){c._removeNextDisableReason("error_"+$(this).attr("name")),c._updateProfileProgress()}),this._updateProfileProgress();var j=function(){var a=$(this);window.setTimeout(function(){var b=a.is(".js-placeholded")?0:a.val().length;i.text(""+b),i.removeClass("warn superwarn"),b>150?i.addClass("superwarn"):b>140&&i.addClass("warn"),b>160?c._addNextDisableReason("bio"):c._removeNextDisableReason("bio")},0)};g.find("textarea").bind("keyup change",j).each(j)},_enableProfileImageUploadControls:function(){var a=this.$find(".js-current-profile-picture-wrapper"),b=this.$find(".js-upload-form");a.removeClass("loading"),b.find(".btn").removeClass("disabled"),b.find('input[type="file"]').attr("disabled",null)},_showImageError:function(a){this.$find(".js-image-error .js-image-error-text").text(a).parent().fadeIn()},_hideImageError:function(a){this.$find(".js-image-error").fadeOut()},_uploadProfileImage:function(){this._hideImageError(),this.$find(".js-current-profile-picture-wrapper").addClass("loading");if(twttr.turkey.hasFileReader()){var a=this.$find(".js-profile-image-input").get(0);if(a.files&&a.files[0]){var b=a.files[0];if(!twttr.turkey.validatePhoto(a.value)){this._showImageError(_("Profile pictures must be JPG, GIF or PNG")),this._enableProfileImageUploadControls(),trackClient({section:"profile",component:"picture",action:"error"}),trackClient({section:"profile",component:"picture",action:"error_format"});return}if(!twttr.is.def(b.size)||b.size>=this.PROFILE_SIZE_LIMIT){this._showImageError(_("Profile pictures must be smaller than 700K")),this._enableProfileImageUploadControls(),trackClient({section:"profile",component:"picture",action:"error"}),trackClient({section:"profile",component:"picture",action:"error_size"});return}}}this._submitProfileImageForm()},_submitProfileImageForm:function(){var a=this,b=this.$find(".js-upload-form");twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=function(b){twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=$.noop,b.error?(trackClient({section:"profile",component:"picture",action:"error"}),a._showImageError(b.error),a._enableProfileImageUploadControls()):(trackClient({section:"profile",component:"picture",action:"success"}),a._uploadProfileImageCallback())},b[0].submit(),b.find(".btn").addClass("disabled"),b.find('input[type="file"]').attr("disabled","disabled")},_uploadProfileImageCallback:function(){var a=this,b=/profile_images\/.*/,c=twttr.currentUser.profileImageUrl.match(b)[0],d=0,e=function(){a._enableProfileImageUploadControls(),window.clearInterval(a._profileImageInterval),a._profileImageInterval=null};a._profileImageInterval=window.setInterval(function(){if(d++>20){e();return}twttr.currentUser.profileImage(twttr.currentUser.screenName,{size:"normal",zx:Math.random(),ssl:!0,success:function(d){var f=d.profile_image_url,g=f.match(b)[0];g!=c&&(a._updateProfileImageUrl(f),e())},error:function(){e()}})},5e3)},_updateProfileImageUrl:function(a){twttr.currentUser.profileImageUrl=a,twttr.currentUser.profileImageUrlHttps=a,twttr.currentUser.attributes.profile_image_url=a,twttr.currentUser.attributes.profile_image_url_https=a,$(".js-mini-current-user img").each(function(){$(this).attr("src",a)});var b=twttr.helpers.transformProfileImageUrl(a,"reasonably_small");this.$find(".js-current-profile-picture-wrapper").find("img").attr("src",b),this._updateProfileProgress()},_handleProfileNext:function(a){var b=this,c=this.$find('.js-profile-form input[type="text"], .js-profile-form textarea'),d=this.$find(".js-profile-form .control-group"),e={success:function(){c.each(function(){var a=$(this);a.val()&&a.val().length>1&&trackClient({section:"profile",component:a.attr("name"),action:"complete"})}),a()},error:function(a){var c=twttr.showError(_('Sorry, we weren’t able to update your profile. Try again or <a class="js-skip-link" href="#">skip this step</a>.'));c.$dom.find(".js-skip-link").click(function(){b.$find(".js-skip-link").click()})}};if(c.length==0){a();return}c.each(function(){var a=$(this);a.is(".js-placeholded")||(e[a.attr("name")]=a.val())}),d.removeClass("error").find(".js-error-msg").remove(),twttr.currentUser.update(e)},_nextRoute:function(a){var b=this._steps[a.next_step].route;return this._resurrect&&(b="/?resurrect=1"+b.slice(1)),b},_updateProfileProgress:function(){var a=0;this.$find('.js-profile-form input[type="text"], .js-profile-form textarea').each(function(){var b=$(this);b.val()&&!b.is(".js-placeholded")&&a++}),this.$find(".js-current-profile-picture").attr("src").indexOf("upload_placeholder.png")==-1&&a++,a>0&&this._removeNextDisableReason("progress"),this._setProgress(a)},_addNextDisableReason:function(a){this._nextDisableReasons[a]||(this._nextDisableReasons[a]=!0,this._nextDisableReasons._reasonCount++),this._setNextButton(!1)},_removeNextDisableReason:function(a){this._nextDisableReasons[a]&&(delete this._nextDisableReasons[a],this._nextDisableReasons._reasonCount--,this._setNextButton(this._nextDisableReasons._reasonCount==0))},_setProgress:function(a){var b=this._steps[this._currentStepId];this.$find(".js-progressbar").progressbar({value:1+Math.floor(100*a/b.suggested_progress)})},_updateProgress:function(a){var b=this._steps[this._currentStepId];b._currentProg||(b._currentProg=0),b._currentProg+=a,b._currentProg<0&&(b._currentProg=0),this._setProgress(b._currentProg),b._currentProg>=b.min_progress&&this._removeNextDisableReason("progress"),b._currentProg>=b.suggested_progress?this.$find(".js-progress-label").html(_("Great!")):b._currentProg==0?this.$find(".js-progress-label").html(b.initial_progress_copy):b.progress_copy_function?this.$find(".js-progress-label").html(b.progress_copy_function(b.suggested_progress-b._currentProg)):this.$find(".js-progress-label").html(_("Follow {{count}} more!",{count:b.suggested_progress-b._currentProg}))},_setNextButton:function(a){a?(this.$find(".js-next-btn").toggleClass("disabled",!1).fadeIn().toggleClass("selected",!0),this.$find(".js-progressbar").closest("td").width("99%")):(this.$find(".js-next-btn").toggleClass("disabled",!0).hide().toggleClass("selected",!1),this.$find(".js-progressbar").closest("td").width("100%")),this.$find(".js-save-btn").toggleClass("primary-btn",a)},_isOnLastStep:function(){var a=this._steps[this._currentStepId];return a&&a.next_step=="finish"},finish:function(){this.clearWelcomeSkipCookie(),trackClient({section:"finished",action:"impression"}),this._slideDrawer(!1,function(){twttr.router.routeTo(twttr.router.homePath())})},_scribeStepCompletion:function(a){var b=this.constructor.ROUTES_TO_STEP[this._currentStepId];trackClient({section:b,action:"complete"}),trackClient({section:b,component:"progress",action:a})},_renderStep:function(a){this._rendered||this.render(),this._setTheme();var b=this._steps[a];this.$find(".js-content-container").empty(),this._customRenderStep(a),this.$find(".js-welcome-search").toggle(b.show_search),this.$find(".js-back-to-stream").hide(),this._currentStepId=a,a!="search"&&(this._currentSearchStepId=this._currentStepId);var c;a=="matches"||a=="import"?c=_("Find people by name..."):c=_("Search for..."),this.$find(".js-who-to-follow-search input").attr("placeholder",c),this._slideDrawer(!b.no_drawer),this.$find(".js-welcome-intro").hide(),this.$find(".js-welcome-dashboard-footer").show();var d=b.next_step=="finish",e={last_step:d,button_text:this._getNextButtonText(d),continue_route:d?twttr.router.homePath():this._nextRoute(b),show_progress:b.show_progress,next_enabled:b.next_enabled,stream_arrow:!b.no_drawer};twttr.merge(e,b),(new twttr.views.WelcomeLearnHeader(e)).render(this.$find(".js-flow-step"),"html");var f=this.$find(".js-next-btn"),g=this.$find(".js-skip-link");f.attr("href",e.continue_route),g.attr("href",e.continue_route).toggle(!b.next_enabled),a=="intro"?this.$find(".js-intro-tweet").show():this.$find(".js-intro-tweet").hide(),this._nextDisableReasons={_reasonCount:0},b.next_enabled||(this._addNextDisableReason("progress"),this._updateProgress(0)),b.skip_disabled&&this.$find(".js-welcome-dashboard-footer").hide(),this._resizeFlow();var i=this.$find(".example-tweet-info");b.show_intro_text?i.show():i.hide()},_createScribbler:function(a,b){twttr.is.string(a)&&(a={component:a});var c=function(b){var c=twttr.Scribbler.clientAppDefaultTerms();return b=twttr.merge({},b,a),twttr.Scribbler.clientAppEventNameGenerator(b,c)};return twttr.Scribbler.clientEvent.spawn(b,c)},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a}}),a()})}),provide("components/pages/Welcome",function(a){using("boot/bootstrap_data").as(function(b){var c=twttr.components.pages.WelcomeLearnFlow,d=twttr.Router.getCurrentQueryStringParams();if(d.welcomePage&&d.welcomePage.match(/^Welcome/)&&twttr.components.pages[d.welcomePage])c=twttr.components.pages[d.welcomePage];else if(!twttr.isT1){var e=[];for(var f=0;f<e.length;++f){var g=e[f][0],i=e[f][1],j=twttr.abdecider.choose(g,!0);if(j){j!="control"&&(c=i);break}}}twttr.components.pages.Welcome=c,a(twttr.components.pages.Welcome)})}),provide("components/pages/AbstractMediaGallery",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.components.pages.AbstractMediaGallery").subclassOf(twttr.components.Page).addAfterRender(function(){}).view(twttr.views.MediaGalleryPage).addOnSwitchAway(function(){$("#page-container").show(),$(twttr.isT1?".js-topbar":"#top-stuff").show(),$("body").removeClass("has-media-gallery"),this.$gallery.remove(),this.$gallery=null,this.$content=null,this._query=null,this._viewMode=null}).addOnSwitchTo(function(){$("#page-container").hide(),$(twttr.isT1?".js-topbar":"#top-stuff").hide(),this.$gallery=(new twttr.views.MediaGalleryPage).$html().appendTo("#doc"),this.$content=this.$gallery.find(".media-gallery-content"),$("body").addClass("has-media-gallery")}).keydown({left:function(){this._grid&&this._grid.showPrev&&this._grid.showPrev()},right:function(){this._grid&&this._grid.showNext&&this._grid.showNext()},esc:function(){this.closeGalleryAction()}}).methods({showSlideshowLoading:function(){this.addClass("loading loadingTweet loadingMedia")},showLoading:function(){this.addClass("loading")},hideTweetLoading:function(){this.removeClass("loading loadingTweet")},hideMediaLoading:function(){this.removeClass("loading loadingMedia")},hideLoading:function(){this.removeClass("loading loadingTweet loadingMedia")},addClass:function(a){this.$content&&this.$content.addClass(a)},removeClass:function(a){this.$content&&this.$content.removeClass(a)},grid:function(a,b){if(twttr.decider.isAvailable("disable_gallery_grid")){this.slideshow(a,b);return}this.setup(a,b),this._viewMode="grid";if(this.deciderKey&&!twttr.decider.isAvailable(this.deciderKey)){this.trigger("notFound");return}this.buildGrid(a,b),this.scribbler.scribe({component:this._mode,action:"impression"})},buildGrid:function(){throw new Exception("buildGrid is an abstract method that must be implemented in your subclass.")},completeGridRender:function(a){a.generateItemHref=twttr.bind(this,this.generateItemHref),a.provider=this._provider,a.scribbler=this.scribbler,this._renderControls("grid"),this._grid&&(this._grid.$node.remove(),this._grid=null),this.showLoading(),this.$content.addClass("grid"),this._grid=new twttr.components.TheGrid(a,this.$content.width()),this._grid.$node.appendTo(this.$content),this._mode=="videos"&&this._grid.$node.addClass("grid-videos"),this._grid.bind("showLoading",twttr.bind(this,this.showLoading)),this._grid.bind("hideLoading",twttr.bind(this,this.hideLoading)),b.util.lazyBind(window,"resize",twttr.bind(this,this.resizeGrid))},slideshow:function(a,b){if(this.alreadySlideshow(a))return;this.setup(a,b),this._viewMode="slideshow",this._displayMode="slideshow";if(this.deciderKey&&!twttr.decider.isAvailable(this.deciderKey)){this.trigger("notFound");return}this._renderControls("detail");var c={width:this.$content.width(),height:$(window).height()-300,thumbContainerWidth:880,url:b.url||null,mode:this._mode};this._grid&&(this._grid.$node.remove(),this._grid=null),this.buildSlideshow(a,b,c),this.$content.removeClass("grid"),this.scribbler.scribe({component:this._mode,action:"impression"})},buildSlideshow:$.noop,completeSlideshowRender:function(a){a.generateItemHref=twttr.bind(this,this.generateItemHref),a.provider=this._provider,a.scribbler=this.scribbler,this._grid=new twttr.components.MediaSlideshow(a),this._grid.$node.appendTo(this.$content),this._grid.bind("showSlideshowLoading",twttr.bind(this,this.showSlideshowLoading)),this._grid.bind("hideTweetLoading",twttr.bind(this,this.hideTweetLoading)),this._grid.bind("hideMediaLoading",twttr.bind(this,this.hideMediaLoading)),this.showLoading(),b.util.lazyBind(window,"resize",twttr.bind(this,this.resizeSlideshow)),this._grid.bind("mediaRendered",twttr.bind(this,this.resizeSlideshow))},resizeGrid:function(){if(this._viewMode=="slideshow"||!this.$content)return;var a=this.$content.width();this._grid.setCols(a)},resizeSlideshow:function(){var a=this;if(this._viewMode!="slideshow"||!this.$content)return;var c=this._mode=="photos"?b.constants.slideshow.photoMinHeight:b.constants.slideshow.videoMinHeight,h=$(window).height()-(twttr.decider.isAvailable("disable_gallery_thumbs")?220:300),d=this.$content.width();h=Math.max(h,c),this._grid.resizePicture(h,d),this._grid._thumbnailViewer&&(this.resizeThumbnailViewerTimer&&clearTimeout(this.resizeThumbnailViewerTimer),this.resizeThumbnailViewerTimer=setTimeout(function(){a._grid._thumbnailViewer&&a._grid._thumbnailViewer.updateWidth()},500))},_renderControls:function(a){this._controls&&(this._controls.$node.remove(),this._controls=null);var b=$.extend(this.getControlsOptions(),{view:a});this._controls=new twttr.components.MediaGalleryControls(b),this._controls.$node.appendTo(this.$content),this._controls.bind("close",twttr.bind(this,this.closeGalleryAction)),this._controls.bind("detailViewSelected",twttr.bind(this,this.detailViewSelected)),this._controls.bind("gridViewSelected",twttr.bind(this,this.gridViewSelected)),$("div.tipsy").remove(),this._controls.$node.find(".detailview, .gridview").tipsy({gravity:"s",fade:!0})},closeGalleryAction:$.noop,detailViewSelected:$.noop,gridViewSelected:$.noop}),a(twttr.components.pages.AbstractMediaGallery)})}),provide("components/pages/UserMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.UserMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a){this.type="userMedia",this.screenName=a.screen_name,this.deciderKey="phoenix_user_media_gallery",this._mode="photos",this._provider=new twttr.media.provider.UserMedia({screenName:this.screenName}),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id},event_info:this._mode}),this.filter=function(a){return!a||!a.mediaType?!1:a.mediaType.icon()===twttr.constants.media.photoIcon}},getControlsOptions:function(){return{type:this.type,screenName:this.screenName,profilePath:twttr.router.profilePath({screen_name:this.screenName}),mode:this._mode}},generateItemHref:function(a){return twttr.router.userMediaSlideshowPath({screen_name:this.screenName})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this.updatePageTitle(_("Twitter / Recent images by @{{screen_name}}",{screen_name:this.screenName})),this.completeGridRender({type:this.type,screenName:this.screenName,generateItemHref:twttr.bind(this,this.generateItemHref),filter:this.filter}),this.updateBackButton();var c=this;this._grid.$node.delegate("a","click",function(){c.scribbler.scribe({component:c._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){this.updatePageTitle(_("Twitter / Recent images by @{{screen_name}}",{screen_name:this.screenName})),c.type=this.type,c.screenName=this.screenName,c.filter=this.filter,this.completeSlideshowRender(c),this.updateBackButton()},alreadySlideshow:function(a){return this.$content&&a.screen_name===this.screenName&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.userMediaSlideshowPath({screen_name:this.screenName})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.userMediaGridPath({screen_name:this.screenName})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(this.pathBack),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})},updateBackButton:function(){var a=twttr.audit.trail(),b=null;this.pathBack=twttr.router.profilePath({screen_name:this.screenName});if(a.length>1)for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e.page!=="userMediaGallery"){b=e.page,this.pathBack=e.path;break}var f=e.path.split("/")[2];if(f!==this.screenName){b="profile";break}}var g=this._controls.$find(".media-gallery-back-nav span"),i="";switch(b){case"home":i=_("Back to Home");break;case"permalink":i=_("Back to Tweet page");break;case"profile":twttr.helpers.isCurrentUser(this.screenName)?i=_("Back to your profile",{screen_name:this.screenName}):i=_("Back to @{{screen_name}}'s profile",{screen_name:this.screenName});break;case"list":var j=this.pathBack.split("/");i=_("Back to @{{screen_name}}'s list '{{list_name}}'",{screen_name:j[2],list_name:j[3]});break;case"search":i=_("Back to search results");break;default:i=_("@{{screen_name}}'s profile",{screen_name:this.screenName})}g.text(i)}}),a(twttr.components.pages.UserMediaGallery)})}),provide("components/pages/FacetsMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.FacetsMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a,b){var c=this;this.type="search",this.deciderKey="phoenix_facets",this._mode=a.mode,this._query=a.query||b.q,this._provider=new twttr.media.provider.Search,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:this._query,event_info:this._mode})},getControlsOptions:function(){return{type:this.type,mode:this._mode,query:this._query}},slideshow:function(){twttr.components.pages.AbstractMediaGallery.prototype.slideshow.apply(this,arguments)},generateItemHref:function(a){return twttr.router.searchFacetsSlideshowPath({query:this._query,mode:this._mode})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this._mode!="videos"&&this._mode!="photos"&&twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:this._query,mode:"photos"})),this.updatePageTitle(_("Twitter / Gallery - {{{query}}}",{query:this._query}));var c={query:this._query,mode:this._mode,type:this.type};this._mode=="videos"&&(c.imageWidth=200,c.imageHeight=150,c.margin=10),this.completeGridRender(c);var d=this;this._grid.$node.delegate("a","click",function(){d.scribbler.scribe({component:d._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){var d=b.url||null;if(this._query&&this._mode!="videos"&&this._mode!="photos"){var e=twttr.router.searchFacetsSlideshowPath({query:this._query,mode:"photos"});d&&(e=e+"?url="+encodeURIComponent(d)),twttr.router.routeTo(e);return}this._mode=="videos"&&twttr.merge(c,{thumbHeight:48,thumbWidth:64,thumbDisplayWidth:66,thumbDisplayHeight:48}),this.updatePageTitle(_("Twitter / Gallery - {{{query}}}",{query:this._query})),c.type=this.type,c.query=this._query,this.completeSlideshowRender(c)},alreadySlideshow:function(a){return this.$content&&a.query===this._query&&a.mode===this._mode&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.searchFacetsSlideshowPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(twttr.router.searchResultsPath({query:this._query})),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})}}),a(twttr.components.pages.FacetsMediaGallery)})}),provide("components/pages/EventsMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.EventsMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a,b){var c=this;this.type="search",this._mode="photos",this._query=a.query||b.q,this._eventId=this._query,twttr.griffin.isEvent(this._eventId)||twttr.router.routeTo(twttr.router.homePath()),this._provider=new twttr.media.provider.Search,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:this._query,event_info:"events"})},getControlsOptions:function(){return{type:this.type,mode:this._mode,query:this._query,eventId:this._eventId}},slideshow:function(){twttr.components.pages.AbstractMediaGallery.prototype.slideshow.apply(this,arguments)},generateItemHref:function(a){return twttr.router.eventsSlideshowPath({query:this._query,mode:this._mode})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this._mode!="videos"&&this._mode!="photos"&&twttr.router.routeTo(twttr.router.eventsGridPath({query:this._query,mode:"photos"})),this.updatePageTitle(_("Twitter / Events - {{{query}}}",{query:this._query}));var c={query:this._query,mode:this._mode,type:this.type};this._mode=="videos"&&(c.imageWidth=200,c.imageHeight=150,c.margin=10),c.isEvent=!0,this.completeGridRender(c);var d=this;this._grid.$node.delegate("a","click",function(){d.scribbler.scribe({component:d._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){var d=b.url||null;if(this._query&&this._mode!="videos"&&this._mode!="photos"){var e=twttr.router.eventsSlideshowPath({query:this._query,mode:"photos"});d&&(e=e+"?url="+encodeURIComponent(d)),twttr.router.routeTo(e);return}this._mode=="videos"&&twttr.merge(c,{thumbHeight:48,thumbWidth:64,thumbDisplayWidth:66,thumbDisplayHeight:48}),this.updatePageTitle(_("Twitter / Events - {{{query}}}",{query:this._query})),c.type=this.type,c.query=this._query,c.showFirstOnFail=!0,c.isEvent=!0,this.completeSlideshowRender(c)},alreadySlideshow:function(a){return this.$content&&a.query===this._query&&a.mode===this._mode&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.eventsSlideshowPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.eventsGridPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(twttr.router[this._query+"StaticPath"]()),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})}}),a(twttr.components.pages.EventsMediaGallery)})}),provide("components/pages/BigPhotoPermalink",function(a){using().as(function(b){var c=twttr.components.pages.AbstractMediaGallery.prototype;twttr.klass("twttr.components.pages.BigPhotoPermalink").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({permalink:function(a){var b=this;this.$content.empty(),this.index=a.photo_index,twttr.API.Status.find(a.id,{success:twttr.bind(this,this.renderTweet),error:function(){b.trigger("notFound")}})},renderTweet:function(a){this.updatePageTitle(_("Twitter"));if(!a.entities||!a.entities.media||!a.entities.media[this.index-1]){this.trigger("notFound");return}this.$content.addClass("big-photo-permalink media-slideshow-tweet"),(new twttr.views.SlideshowTweet(a)).render(this.$content,"append");var b=a.entities.media[this.index-1];this.dimensions=b.sizes.large;var c=twttr.isSSL()?b.media_url_https:b.media_url;c+=":large",this.loadImage(c)},loadImage:function(a){this.$image=$("<img/>",{"class":"large",src:a,height:this.dimensions.h,width:this.dimensions.w}).appendTo(this.$content),this.refit(),twttr.util.lazyBind(window,"resize",twttr.bind(this,this.refit),200)},refit:function(){var a=twttr.$win.width(),h=twttr.$win.height()-this.$content.find(".tweet").height()-40;this.$image.css({top:Math.max(0,Math.round((h-this.dimensions.h)/2)),left:Math.max(0,Math.round((a-this.dimensions.w)/2))})}}),a()})}),provide("components/pages/Discover",function(a){using(twttr.isT1?"mixins/t1/emptyTimelineRecommendations":"mixins/emptyTimelineRecommendations","components/t1/dashboard/DiscoverNav","components/UserRecommendations","components/Trends","components/Footer","streams/Discover","streams/SuggestionCategoriesStream","mixins/streamablePage","mixins/discoveryHelper").as(function(b,c){var d=twttr.klass("twttr.components.pages.Discover").subclassOf(twttr.components.Page).mixin(b.mixins.streamablePage,b.mixins.discoveryHelper,c).view(twttr.views.Page).methods({setupPage:function(a,b){b=b||{},this.updatePageTitle(a),twttr.themes.loadCurrentUserStyle(),b.sideNavRoute?this.selectSideNav(b.sideNavRoute):this.selectCurrentSideNav()},discover:function(a,c){this.setupPage(_("Twitter / Discover")),this.streamManager.switchTo(b.streams.Discover,{})},networkActivity:function(a,b){this.setupPage(_("Twitter / Activity")),this.streamManager.switchTo(twttr.streams.ActivityByNetworkStream,{}),this.insertEmptyTimeline()},suggestions:function(a,b){this.setupPage(_("Twitter / Who to follow / Suggestions"),{sideNavRoute:"whoToFollowSuggestions"}),this.streamManager.switchTo(twttr.streams.UserRecommendationsStream,{})},suggestions_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowSuggestions");this.setupPage(_("Twitter / Who to follow / Search"),{sideNavRoute:"whoToFollowSuggestions"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"UserRecommendationsStream",backLinkOptions:{route:twttr.router.whoToFollowSuggestionsPath(),name:_("View suggestions")},query:c})},find_friends:function(a,b){this.setupPage(_("Twitter / Find Friends"));var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:"whoToFollow"},b),e=this.streamManager.switchTo(twttr.streams.ContactImportServices,d);e&&e.setStreamManager(this.streamManager)},matches:function(a,b){this.setupPage(_("Twitter / Find Friends / Results"),{sideNavRoute:"whoToFollowImport"});var c=twttr.Scribbler.clientEvent.spawn({context:"import"});this.streamManager.switchTo(twttr.streams.ContactImportMatches,{scribbler:c,pathRoot:"whoToFollow"})},find_friends_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowImport");this.setupPage(_("Twitter / Find Friends / Search"),{sideNavRoute:"whoToFollowImport"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"ContactImportServices",backLinkOptions:{route:twttr.router.whoToFollowImportPath(),name:_("View services")},query:c})},interests:function(a,b){this.setupPage(_("Twitter / Categories"));var c=twttr.Scribbler.clientEvent.spawn({context:"interests"}),d={scribbler:c,pathRoot:"whoToFollow"};d=this.localizeQuery(d,b),this.streamManager.switchTo(twttr.streams.SuggestionCategoriesStream,d)},interests_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowInterests");this.setupPage(_("Twitter / Categories / Search"),{sideNavRoute:"whoToFollowInterests"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"SuggestionCategoriesStream",backLinkOptions:{route:twttr.router.whoToFollowInterestsPath(),name:_("View categories")},query:c})},government_by_zip:function(a,b){this.setupPage(_("Twitter / Government Search"),{sideNavRoute:"whoToFollowInterests"}),this.streamManager.switchTo(twttr.streams.GovernmentSearchStream,{zipCode:a.zipCode})},category:function(a,b){var c=this,d=function(a){if(!a)return c.routePageTo("whoToFollow","Interests");var d=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});c.setupPage(_("Twitter / Categories / {{category}}",{category:a.name}),{sideNavRoute:"whoToFollowInterests"});var f={category:e,suggestionCategory:a,scribbler:d,pathRoot:"whoToFollow"};f=c.localizeQuery(f,b),c.streamManager.switchTo(twttr.streams.SuggestionCategoryMembersStream,f)},e=a.category||b.category;this._category=e;var f=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;if(f)d(f[e]);else{var g={success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[e];d(b)}};g=this.localizeQuery(g,b),twttr.API.SuggestionCategory.getAll(g)}},renderDashboard:function(){this.trendsComponent=new b.components.Trends,this.addDashboardComponents([new b.components.t1.dashboard.DiscoverNav,new twttr.components.JapaneseAd,this.trendsComponent,new b.components.Footer])},addImpressionData:function(a){var b=twttr.audit.currentAction();switch(b){case"find_friends":case"matches":a.context="import";break;case"interests":a.context="interests";break;case"category":a.context="interests",a.query=this._category}}}).addAfterRender(function(){this.renderDashboard()}).addOnSwitchTo(function(){this.trendsComponent&&this.trendsComponent.startUpdatePolling()}).addOnSwitchAway(function(){this.trendsComponent&&this.trendsComponent.stopUpdatePolling()});a(d)})}),provide("components/pages/Connect",function(a){using("_","components/t1/dashboard/MiniHomeProfile","components/t1/dashboard/ConnectNav","components/Trends","components/UserRecommendations","components/Footer","mixins/streamablePage","multiGlobals/more_views").as(function(b){var c=twttr.klass("twttr.components.pages.Connect",function(){twttr.components.Page.apply(this,arguments)}).subclassOf(twttr.components.Page).mixin(b.mixins.streamablePage).view(twttr.views.Page).methods({connect:function(a,b){this.updatePageTitle(_("Twitter / Interactions")),twttr.themes.loadCurrentUserStyle(),this.selectCurrentSideNav(),this.streamManager.switchTo(twttr.streams.ActivityOfMeStream,{})},mentions:function(a,b){this.updatePageTitle(_("Twitter / Mentions")),this.selectSideNav("mentions"),twttr.themes.loadCurrentUserStyle(),this.streamManager.switchTo(twttr.streams.Mentions,{})},renderDashboard:function(){this.addDashboardComponents([new b.components.t1.dashboard.ConnectNav,new twttr.components.JapaneseAd,new twttr.components.UserRecommendations({screenName:null,showLinks:!0}),new b.components.Footer])}}).addAfterRender(function(){this.renderDashboard()});a(c)})}),provide("widget/Banner",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.widget.Banner",function(a){this.$node=$("<div/>"),this.view=new twttr.views[a.view](a),this.$node.delegate(".pane-close","click",twttr.bind(this,this.remove)),this.$node.attr("data-component-term",b.util.underscore(a.view)),this.newBanner=a.newBanner}).methods(twttr.EventProvider).methods({insert:function(){this.view.render(this.$node),$(this.newBanner?".new-js-banners":".js-banners").append(this.$node),twttr.app.recalculatePadding()},remove:function(){this.$node.remove(),twttr.app.recalculatePadding(),this.trigger("closed")}}),twttr.provide("twttr.banners",twttr.augmentObject({pending_new:0,pending_changed:1,pending_bouncing:2,stacked:3,nonStacked:4,display:function(){twttr.currentUser&&twttr.profileUser&&twttr.currentUser!=twttr.profileUser&&twttr.currentUser.isAdmin&&twttr.profileUser.suspended&&this.viewing_suspended_user().insert();if(twttr.currentUser&&twttr.currentUser.states){var a=[],b=!1,c=twttr.currentUser.states;twttr.is.falsy(c.pending_email)||(b=this.pending_new),c.bouncing_email&&(a=twttr.is.array(c.bouncing_email)?c.bouncing_email:[c.bouncing_email]),b!==!1&&twttr.currentUser.emailAddress&&(b=this.pending_changed),b!==!1&&$.inArray(c.pending_email,a)>=0&&(b=this.pending_bouncing);if(twttr.currentUser.emailAddress&&$.inArray(twttr.currentUser.emailAddress,a)>=0){var d=b!==!1?this.stacked:this.nonStacked;this.bouncingEmail(d,twttr.currentUser.emailAddress).insert()}if(b!==!1){var e=twttr.abdecider.choose("email_verification-18",!0);(!e||e=="control")&&this.verifyEmail(b,c.pending_email).insert()}c.detached_email&&this.detachedEmail().insert(),c.suspended&&this.suspended(twttr.currentUser.screenName).insert(),$.cookie("show_reactivated_"+twttr.currentUser.id)&&this.reactivated().insert()}},detachedEmail:function(){return new twttr.widget.Banner({view:"DetachedEmailBanner",newBanner:!0})},verifyEmail:function(a,b){var c=new twttr.widget.Banner({view:"VerifyEmailBanner",pending_email:b,pending_new:a==this.pending_new,pending_changed:a==this.pending_changed,pending_bouncing:a==this.pending_bouncing,newBanner:!0});return c.$node.delegate(".resend-confirmation-email-link","click",function(a){twttr.currentUser.emailResendConfirmation({success:function(a){twttr.showMessage(a.messageForFlash)},error:function(a){twttr.showError(_("Oops!  There was an error sending the confirmation email."))}})}),c},bouncingEmail:function(a,b){var c=new twttr.widget.Banner({view:"BouncingEmailBanner",current_email:b,stacked:a==this.stacked,newBanner:!0});return c.$node.delegate(".reset-bounce-link","click",function(a){twttr.currentUser.emailBounceReset(function(a){twttr.showMessage(_("Your email notifications should resume shortly.")),c.$node.fadeOut("fast",function(){c.remove()})})}),c},suspended:function(a){return new twttr.widget.Banner({view:"SuspendedBanner",screen_name:a,newBanner:!0})},reactivated:function(){var a=new twttr.widget.Banner({view:"ReactivatedBanner"});return a.bind("closed",function(){$.cookie("show_reactivated_"+twttr.currentUser.id,null)}),a.$node.delegate("a.reactivate-settings-link","click",function(b){b.preventDefault(),a.trigger("closed"),window.location.href=b.target}),a},emailAlreadyVerified:function(){var a;for(var b=0;b<twttr.currentUser.email.length;b++)twttr.currentUser.email[b].current&&(a=twttr.currentUser.email[b]);return new twttr.widget.Banner({view:"EmailAlreadyVerifiedBanner",already_verified_message:_("Someone has already confirmed the email {{email}}",{email:a.address})})},welcomeToPhoenix:function(){return new twttr.widget.Banner({view:"WelcomeToPhoenixBanner",welcome_search_results_path:twttr.router.searchResultsPath({query:"#NewTwitter"})})},becameUser:function(){return new twttr.widget.Banner({view:"BecameUserBanner"})}},twttr.EventProvider)),twttr.app.waitForSignal("init",function(){twttr.banners.display()}),a(twttr.widget.Banner)})}),provide("components/Promo",function(a){using().as(function(b){twttr.klass("twttr.components.Promo").subclassOf(twttr.components.Base).initializer(function(){twttr.API.Promo.random({promo_type:"",limit:1},twttr.bind(this,function(a){$.isEmptyObject(a)||((new twttr.views.DashboardPromo({promo:a[0]})).render(this.$node,"append"),this.hasRendered())}))}).click({".promo .definition":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"promo",target:"definition",definition:b.find("strong").html()};scribble("dashboard_click",c)}}).deciderKey("promo_component"),a(twttr.components.Promo)})}),provide("components/Promptbird",function(a){using("_","multiGlobals/more_views","mixins/inviteFriends","mixins/userActionable","constants").as(function(b,_){twttr.klass("twttr.components.Promptbird").subclassOf(twttr.components.Base).initializer(function(a){if(!twttr.views[this.constructor._name]){var b=new Error('Promptbird view "'+this.constructor._name+'" is undefined');twttr.isLocalhost&&console.log(b,b.stack||"error.stack is unavailable :(");return}var c={action:"impression",section:"promptbird_"+a.prompt.prompt_id};trackClient(c),this.prompt=a,this.$node.addClass("promptbird");var d="promptbird-"+a.prompt.format.replace(/_/g,"-");this.$node.addClass(d),a.data.promptId=a.prompt.prompt_id;var e=(new twttr.views[this.constructor._name](a.data)).html();this.$node[0].innerHTML=e,"below_black_bar"===a.prompt.format&&(this.noSpacer=!0),this.hasRendered()}).click({".js-dismiss":function(a){a.stopImmediatePropagation();var b={prompt_id:this.prompt.prompt.prompt_id},c={success:function(a){}};return twttr.API.Promptbird.dismissPrompt(b,c),this.destroy(),!1},".call-to-action":function(a){var b=this,c={action:"click",section:"promptbird_"+this.prompt.prompt.prompt_id};trackClient(c);if($(a.currentTarget).data("preserve-prompt"))return;var d={prompt_id:this.prompt.prompt.prompt_id},e={success:function(a){}};twttr.API.Promptbird.dismissPrompt(d,e),this.destroy()}}),twttr.klass("twttr.components.PromptbirdLanguage").subclassOf(twttr.components.Promptbird).initializer(function(a){this._superInitializer(a),this.$find(".call-to-action").one("click",function(){var b=a.prompt.template_name.split("_");b.shift();var c=b.join("-"),d={success:function(){window.location.reload()}};twttr.currentUser.setLanguage(c,d)})}),twttr.klass("twttr.components.PromptLanguageDe").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageEs").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageHi").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageFr").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageFil").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageId").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageIt").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageJa").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageKo").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageMsa").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageNl").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguagePt").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageRu").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageTr").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageZhCn").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageZhTw").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptImport").subclassOf(twttr.components.Promptbird),twttr.klass("twttr.components.PromptVitDe").subclassOf(twttr.components.Promptbird).initializer(function(a){this.registerUserActionEvents(),a.data.id=16181559,this.constructor.uberclass._initializer.apply(this,arguments),this.$find(".js-action-follow").addClass("call-to-action")}).mixin(b.mixins.userActionable),twttr.klass("twttr.components.PromptOneClickImport").subclassOf(twttr.components.Promptbird).initializer(function(a){this._superInitializer(a),this.$find(".call-to-action").one("click",function(a){var b=$(this);using("externalOauthPopup").as(function(a){var c=window.location.protocol+"//"+twttr.domains.local+"/invitations/oauth_launch?email="+encodeURIComponent(b.attr("data-email"));a.externalOauthPopup({url:c,callbackUrl:twttr.router.whoToFollowImportMatchesPath()})})})}),twttr.klass("twttr.components.PromptImportInline").subclassOf(twttr.components.Promptbird).initializer(function(a){this.constructor.uberclass._initializer.apply(this,arguments);var b=new twttr.components.ContactImportLauncher,c=this;b.bind("servicesLoaded",function(){b.$find(".service-button").addClass("call-to-action").data("preserve-prompt","true"),c.$find(".import-inline").append(b.$node)}),b.trigger("addedToPage")}),twttr.klass("twttr.components.PromptProfile").subclassOf(twttr.components.Promptbird),twttr.klass("twttr.components.PromptMobile").subclassOf(twttr.components.Promptbird).initializer(function(a){var b=twttr.router.mobileGalleryPath(),c=twttr.pageLocale==="en"?"":"?lang="+twttr.pageLocale;a.data.android_path=b+"/android"+c,a.data.blackberry_path=b+"/blackberry"+c,a.data.iphone_path=b+"/iphone"+c,a.data.ipad_path=b+"/ipad"+c,a.data.wp7_path=b+"/wp7"+c,a.data.mobile_gallery_path=b+c,this.constructor.uberclass._initializer.call(this,a)}),twttr.klass("twttr.components.PromptInvite").subclassOf(twttr.components.Promptbird).mixin(twttr.mixins.inviteFriends).initializer(function(a){this.constructor.uberclass._initializer.apply(this,arguments),this.addFormEvents(),twttr.helpers.handlePopupLinks(this.$node);if(twttr.isT1)this.$find(".js-submit").data("preserve-prompt",!0);else{var b=new twttr.components.InviteFriends;b.$find(".js-submit").addClass("call-to-action").data("preserve-prompt",!0),this.$find(".invite").append(b.$node)}}),twttr.klass("twttr.components.PromptFacebookDe").subclassOf(twttr.components.Promptbird),a(twttr.components.Promptbird)}),twttr.klass("twttr.components.PromptbirdDashboardPlaceholder").subclassOf(twttr.components.Base).initializer(function(){this.$node.attr("id","js-promptbird-dashboard-narrow-hook")})}),provide("components/RelatedServices",function(a){using().as(function(b){twttr.klass("twttr.components.RelatedServices").subclassOf(twttr.components.Base).initializer(function(){var a=this;twttr.API.Promo.random({promo_type:"related_service",limit:2},function(b){$.isEmptyObject(b)||((new twttr.views.DashboardRelatedServices({promos:b})).render(a.$node,"append"),a.hasRendered())})}).deciderKey("promo_component"),a(twttr.components.RelatedServices)})}),provide("TrendLocations",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.TrendLocations",function(a){this.getLocation(a)}).statics({LOGGED_OUT_TREND_LOCATION_COOKIE:"trend_location",install:function(a){twttr.trendLocations?twttr.trendLocations.getLocation(a):twttr.trendLocations=new twttr.TrendLocations(a)}}).methods({getLocation:function(a){var b=this;twttr.API.Trend.locations({lang:twttr.pageLocale,success:function(c){b.all=c;if(twttr.currentUser)twttr.currentUser.trendLocation().first(function(c){c?b.current=c:b.current=b.worldwide(),a(b.current)});else{var d=parseInt($.cookie(b.constructor.LOGGED_OUT_TREND_LOCATION_COOKIE),10);b.current=b.locationForWoeid(d)||b.worldwide(),a(b.current)}}})},allLocations:function(){return this.all.array},ancestorsOf:function(a){if(!a.parentid)return[];var b=this.locationForWoeid(a.parentid);return[b].concat(this.ancestorsOf(b))},withAncestorsOf:function(a){return[a].concat(this.ancestorsOf(a))},currentAncestors:function(){return this.ancestorsOf(this.current)},withCurrentAncestors:function(){return this.withAncestorsOf(this.current)},withFilterAncestors:function(){return this.withAncestorsOf(this.currentFilter())},childrenOf:function(a){return twttr.filter(this.allLocations(),function(b){return b.parentid===a.woeid})},currentChildren:function(){return this.current.isPersonalized?this.childrenOf(this.currentFilter(this.worldwide())):this.childrenOf(this.currentFilter())},locationForWoeid:function(a){return a?twttr.filter(this.allLocations(),function(b){return b.woeid==a})[0]:null},locationsForWoeids:function(a){var b=this;return twttr.map(a,function(a){return b.locationForWoeid(a)})},worldwide:function(){return this.locationForWoeid(1)},currentFilter:function(a){var c=a||this.current;return c.placeType.code===b.constants.placeTypes.city||this.childrenOf(c).length===0?this._currentFilterWoeid=c.parentid:this._currentFilterWoeid=c.woeid,this.locationForWoeid(this._currentFilterWoeid)},setPersonalized:function(a){this.current=$.extend(this.current,{isPersonalized:a})},setCurrent:function(a){this.current=this.locationForWoeid(a.woeid)||this.current,this.setPersonalized(a.isPersonalized),twttr.currentUser?twttr.currentUser.setTrendLocation(a.woeid,a.isPersonalized):(twttr.API.CurrentUser.trigger("changedLocation_success"),$.cookie(this.constructor.LOGGED_OUT_TREND_LOCATION_COOKIE,a.woeid)),scribble("switch-trend-location",{woeid:a.woeid,input:"click",origin:a.origin})}}),a(twttr.TrendLocations)})}),provide("components/PeopleResults",function(a){using("constants").as(function(b){twttr.klass("twttr.components.PeopleResults").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(a){a=a.replace(/(^|\b)(from\:|to\:|near\:|source\:)/g,""),this.scribbler=twttr.Scribbler.clientEvent.spawn({query:a,context:"user_search"});if(a.indexOf(":")!=-1)return;var b={reputable:!0,display_location:"search-component",pc:!0},c=this,d=4;twttr.API.User.search(a,b).first(d,function(b){c._readyToRender?c._renderNow(b,a):c._result={users:b,query:a}})}).methods({_renderNow:function(a,c){var d=this;a.length()>0&&(a=a.map(twttr.bind(this,function(a,b){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id),a.socialContext=a.socialContext||[];var c=d.makeSocialContextHtml(a,!1);return a.clone({socialcontext:c})})),d.$node.empty(),(new twttr.views.PeopleResults({query:c})).subview("found_people",new twttr.views.UserSmallList(a)).render(d.$node,"append"),d.$find("a.view-all").click(function(a){d.scribbler.scribe({component:d._getScribeComponentName(),action:"view_all"})}),twttr.helpers.ellipsify(d.$find("div.bio")),d.registerUserActionEvents(),d.hasRendered());var e=[],f;a.each(function(a,c){e.push(a.id);if(a.promotedContent&&a.promotedContent.impression_id){var d={target_id:a.id,item_type:b.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id,item_position:c};f=f||{},f[a.id+""]=d}}),d.scribbler.scribe({component:d._getScribeComponentName(),action:"results"},{item_ids:e,item_count:e.length,item_details:f})},render:function(){var a=this._result;a?this._renderNow(a.users,a.query):this._readyToRender=!0}}).deciderKey("onebox_user_search"),a(twttr.components.PeopleResults)})}),provide("components/ProfileActions",function(a){using("_","constants","mixins/serverRenderableObject",twttr.isT1?"mixins/t1/genericComboButton":[]).as(function(b,_,c,d,f){twttr.klass("twttr.components.ProfileActions",function(a,b,c){this.profileUser=a,this.inProfilePane=!!c,this.$node=this.$domNode(function(){return $("<div />")}),twttr.components.Base.prototype.constructor.apply(this,arguments)}).subclassOf(twttr.components.Base).initializer(function(a,b){var c=this;this.similarUser=a,this.screenName=a.screenName,this.currentRecommendations=[],this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.profileUser.id}),this.whotofollowComponentName="whotofollow_dropdown",this.ignoreScribeItemPosition=!0,twttr.recentlyViewedUsers.push(a);if(twttr.loggedIn){var d=twttr.bind(this,function(b){this._data={user:a,id:a.id,screen_name:a.screenName,notifications:b.notifications,following:b.following,followed_by:b.followedBy,blocking:b.blocking,follow_request_sent:a.followRequestSent,want_retweets:b.wantRetweets,can_dm:b.canDM&&twttr.currentUser.id!=a.id,reported:!1},this._applyMuteMethods(b,a),this._renderActions(),this.registerEvents(),this.wokeUp()});b?d(b):twttr.currentUser.relationshipWith(this.profileUser,d)}else{this._data={user:a,id:a.id,screen_name:a.screenName},this._renderActions(),this._registerFollowEvents();var e=twttr.abdecider.choose("signup_with_profiles_viewed-73",!0);if(twttr.recentlyViewedUsers.size()>=2){var f=(new Date).getTime()-864e5;e=="two_profiles"&&(twttr.recentlyViewedUsers.size()==2||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-3])<f)?twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-2])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(2,function(a){a.open()})):e=="three_profiles"&&(twttr.recentlyViewedUsers.size()==3||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-4])<f)?twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-3])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(3,function(a){a.open()})):e=="four_profiles"&&(twttr.recentlyViewedUsers.size()==4||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-5])<f)&&twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-4])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(4,function(a){a.open()}))}this.wokeUp()}this.registerUserActionEvents(),this.registerUserRecommendationsActions(".user-rec-dropdown")}).mixin(twttr.mixins.userRecommendationsHelper,twttr.mixins.userActionable,d).methods({domNodeSelector:function(){var a=this.inProfilePane?"div.details-pane ":"";return a+"div.profile-actions-container[data-user-id="+this.profileUser.id+"] div.profile-actions-component"},_renderActions:function(){if(!this.preRendered||this.didInitialRenderActions)this._deregisterTipsy(),this.$node.empty(),(new twttr.views.ProfileActions(this._data)).render(this.$node,"append");this.didInitialRenderActions=!0,this.scribeComponentName=this.$node.closest("div.details-pane").length?"mini_profile_actions":"profile_actions",this.$userProfileActionController=this.$find(".user-profile-actions-button"),this.userProfileActionsDropdown=null,this._registerTipsy()},wokeUp:function(){using(">streamWokeUp",function(){signal(">wokeUp")})},_applyMuteMethods:function(a,b){var c=this;if(!twttr.decider.isAvailable("muteUsers"))return;this.$node.delegate(".mute-action","click",function(a){var d=$(this);d.hasClass("is-muted")?(d.removeClass("is-muted"),d.text(_("Mute")),$(".stream-tweet[data-user-id="+b.id+"]").parent().show(),c._removeFromMuteList(b.id)):(d.addClass("is-muted"),d.text(_("Unmute")),$(".stream-tweet[data-user-id="+b.id+"]").parent().hide(),c._addToMuteList(b))}),twttr.merge(this._data,{show_mute:function(){return a.following&&twttr.decider.isAvailable("muteUsers")},is_muted:function(){var a=twttr.caches.User.get("muted");if(!a)return!1;for(var c in a)if(b.id==c)return!0}})},_addToMuteList:function(a){var b={screenName:a.screenName,userId:a.id,profileImageUrl:twttr.helpers.transformProfileImageUrl(a.profileImageUrl,"mini")},c=twttr.caches.User.get("muted")||{};c[a.id]=b,twttr.caches.User.set("muted",c)},_removeFromMuteList:function(a){var b=twttr.caches.User.get("muted")||{};delete b[a],twttr.caches.User.set("muted",b)},renderSimilarUsers:function(){if(!twttr.decider.isAvailable("whotofollow_similarities"))return;var a=this;a.profileUser.similarUsers({limit:2,success:function(b){var c=a.recsToUsers(b);a.trackImpressions(c,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:a.profileUser.id});if(c.length()){var d=(new twttr.views.UserRecommendationsDropdown({user:a.profileUser.name})).subview("recommended_followers",new twttr.views.UserSmallList(c)).render(a.$find(".profile-actions"),"after");a.attachUserRecommendationHideEvents("whotofollow_dropdown_hide",d),twttr.helpers.ellipsify(a.$find(".profile-actions div.bio")),d.slideDown(300)}},error:function(b){a.trackImpressions(null,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:a.profileUser.id,error_status:b.status})}})},registerEvents:function(){if(this.$node.attr("did-register-events"))return;this.$node.attr("did-register-events",!0),this.$node.delegate(".js-direct-message-action","click",twttr.bind(this,function(a){a.preventDefault(),twttr.decider.isExpando()&&$(".twttr-dialog-close").click(),twttr.dialogs.dmSingle({user:{screenName:this.profileUser.screenName,user_id:this.profileUser.attributes.id,name:this.profileUser.attributes.name,profile_image_url:this.profileUser.attributes.profile_image_url},origin:"profile-actions-direct-message"}).open(),this.scribbler.scribe({component:this.scribeComponentName,action:"dm"},{item_ids:[this.profileUser.attributes.id],item_details:this._itemDetails()})})),this._registerDeviceEvents(),this._registerRetweetEvents(),this._registerFollowEvents(),this._registerUnblockEvents(),this._registerAPIListeners()},_registerTipsy:function(){this.$find(".mute-action").tipsy({gravity:"s",delayIn:150,delayOut:500,fade:!0}),this.$find(".device-notifications").tipsy({gravity:"s",html:!0,title:function(){var a=$(this).hasClass("notifying")?_("Tweets from this user are sent to your mobile phone."):_("Tweets from this user are not sent to your mobile phone.");return(new twttr.views.Tipsy({title:a})).html()}}),this.$find(".retweet-setting").tipsy({gravity:"s",html:!0,title:function(){var a=$(this).hasClass("including")?_("Retweets from this user will appear in your timeline."):_("Retweets from this user won't appear in your timeline.");return(new twttr.views.Tipsy({title:a})).html()}})},_deregisterTipsy:function(){this.$find(".device-notifications").tipsy({stopThat:!0}),this.$find(".retweet-setting").tipsy({stopThat:!0}),this.$find(".mute-action").tipsy({stopThat:!0})},_registerDeviceEvents:function(){var a,b,c,d=this;this.$node.delegate(".js-device-notifications","click",function(e){e.preventDefault();if(!twttr.currentUser.deviceSetup){!twttr.currentUser.deviceVerified&&(!twttr.currentUser.pushTweetsDecidered||!twttr.currentUser.pushDevice)?(a={title:_("Setup mobile notifications"),content:(new twttr.views.PhoneSetupPrompt({screen_name:d._data.screen_name,ok:_("Set up phone"),cancel:_("Cancel")})).html()},b=twttr.router.devicesPath()):(a={title:_("Enable mobile notifications for Tweets"),content:(new twttr.views.PhoneTweetsOffPrompt({screen_name:d._data.screen_name,ok:_("Enable Tweet notifications"),cancel:_("Close")})).html()},twttr.currentUser.pushDevice&&twttr.currentUser.pushTweetsDecidered?b=twttr.router.pushHelpPath():b=twttr.router.devicesPath()),(new twttr.widget.Prompt({modal:!0,callback:function(a){a&&(c=function(){twttr.router.routeTo(b)},twttr.API.User.bind("subscribe",c),d.profileUser.setNotificationsOn())},template:a})).open();return}var f=$(this),g=f.hasClass("notifying")?"setNotificationsOff":"setNotificationsOn";d.profileUser[g]()})},_registerRetweetEvents:function(){var a=this;this.$node.delegate(".js-retweet-setting","click",function(b){var c=$(this);b.preventDefault();var d=c.hasClass("including"),e=d?"setWantRetweetsOff":"setWantRetweetsOn";a.profileUser[e]()})},_registerFollowEvents:function(){var a=this;this.$node.delegate(".js-follow, .profile-follow-button, .follow-request-button","click",function(b){var c=a.profileUser.impressionId;twttr.loggedIn?a.profileUser.follow({before:function(){a._showTweetsFromUserOnHome()},success:function(){a.renderSimilarUsers(),trackClient({component:a.scribeComponentName,action:"follow"},{profile_id:a.profileUser.id,item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"follow"})},error:function(b){a._hideTweetsFromUserOnHome(),twttr.helpers.showErrorFromResponse(b,"follow")},impression_id:c}):twttr.dialogs.signinOrSignup({follow:a.profileUser,justSignup:!0}).open(),b.preventDefault()}),this.$node.delegate(".js-unfollow, .profile-unfollow-link, .cancel-request-link","click",function(b){if(a.$node.find(".follow-state").hasClass("just-followed")&&!!b.clientX)return;var c=a.profileUser.impressionId;a.profileUser.unfollow({before:function(){a._hideTweetsFromUserOnHome()},success:function(){trackClient({component:a.scribeComponentName,action:"unfollow"},{profile_id:a.profileUser.id,item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"unfollow"})},error:function(b){a._showTweetsFromUserOnHome(),twttr.helpers.showErrorFromResponse(b,"unfollow")},impression_id:c}),b.preventDefault()}),this.$node.delegate(".just-followed .profile-unfollow-link","mouseleave",function(b){a.$node.find(".follow-state").removeClass("just-followed")})},_registerUnblockEvents:function(){var a=this;this.$node.delegate(".js-unblock","click",function(b){a.profileUser.unblock({before:twttr.bind(a,a._showStreamForBlockedUser),success:function(){a.scribbler.scribe({component:a.scribeComponentName,action:"unblock"},{item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"unblock"})},error:function(b){a._hideStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(b,"unblock")}}),b.preventDefault()}),this.$node.delegate(".js-block","click",function(b){a.profileUser.block({timeout:function(a){a.retry()},before:twttr.bind(a,a._hideStreamForBlockedUser),error:function(){a._showStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(b,"block")}})})},_updateDisplay:function(a,b){var c=this,d=!b,e=!!b;switch(a){case"follow":c._data.following=d,c._data.want_retweets=d,c._data.just_followed=d;break;case"unfollow":case"cancel_request":c._data.following=e,c._data.follow_request_sent=e,c._data.just_followed=e;break;case"follow_request":c._data.follow_request_sent=d;break;case"block":b?c._data.following=!!c._data.was_following:(c._data.was_following=c._data.following,c._data.following=!1),c._data.blocking=d,c._data.reported=e;break;case"unblock":c._data.following=e,c._data.blocking=e,c._data.reported=e,c._data.followed_by=!1;break;case"report":b?c._data.following=!!c._data.was_following:(c._data.was_following=c._data.following,c._data.following=!1),c._data.blocking=d,c._data.reported=d;break;case"subscribe":c._data.notifications=d;break;case"unsubscribe":c._data.notifications=e;break;case"does_want_retweets":c._data.want_retweets=d;break;case"doesnt_want_retweets":c._data.want_retweets=e}$(["following","blocking","followRequestSent","reported","notifications","wantRetweet"]).each(function(a,b){c._data.user.sync(b,c._data[b])}),c._renderActions()},_registerAPIListeners:function(){var a=this,b={before:function(b,c){var d=c.requestParameters[0],e=d.user_id||d.user_ids;e===a._data.id&&a._updateDisplay(b.type,!1)},error:function(b,c,d){var e=d.requestParameters[0],f=e.user_id||e.user_ids;f===a._data.id&&a._updateDisplay(b.type,!0)}};twttr.API.User.bind("follow",b),twttr.API.User.bind("unfollow",b),twttr.API.User.bind("follow_request",b),twttr.API.User.bind("cancel_request",b),twttr.API.User.bind("block",b),twttr.API.User.bind("unblock",b),twttr.API.User.bind("report",b),twttr.API.User.bind("subscribe",b),twttr.API.User.bind("unsubscribe",b),twttr.API.User.bind("does_want_retweets",b),twttr.API.User.bind("doesnt_want_retweets",b)},_getHomeTimeline:function(a){var b=twttr.app.getPage("home");b&&b.send("getStreamManager",function(b){if(b){var c=b.getStream(twttr.streams.Home);c&&a(c.$node)}})},_streamItemsForUserId:function(a,b){return a.find('.stream .stream-item[data-item-type="user"][data-item-id="'+b+'"]').add('.stream .stream-tweet[data-user-id="'+b+'"]',a).add('.stream .stream-tweet[data-retweeter-id="'+b+'"]',a).closest(".stream-item")},_hideTweetsFromUserOnHome:function(){var a=this,b=this.profileUser.id,c=this._getHomeTimeline(function(c){a._streamItemsForUserId(c,b).hide()})},_showTweetsFromUserOnHome:function(){var a=this,b=this.profileUser.id;this._getHomeTimeline(function(c){a._streamItemsForUserId(c,b).show()})},_hideStreamForBlockedUser:function(){this._streamItemsForUserId($(document.body),this.profileUser.id).hide()},_showStreamForBlockedUser:function(){this._streamItemsForUserId($(document.body),this.profileUser.id).show()},_getActionsDropdown:function(a){var b=this,c=[];return c.push({label:_("Mention {{screen_name}}",this._data),icon:"mention",handlers:{click:function(){(new twttr.widget.TweetDialog({template:{title:"Mention "+b.profileUser.screenName},draggable:!0,defaultContent:"@"+b.profileUser.screenName+" ",origin:"profile-actions-dropdown-metion"})).open().focus()}}}),this._data.blocking?c.push({label:_("Unblock {{screen_name}}",this._data),icon:"block",handlers:{click:function(){b.profileUser.unblock({before:function(){$('.stream .stream-tweet[data-user-id="'+b.profileUser.id+'"]').closest(".stream-item").show()}})}}}):c.push({label:_("Block {{screen_name}}",this._data),icon:"block",handlers:{click:function(){b.profileUser.block({timeout:function(a){a.retry()},before:twttr.bind(b,b._hideStreamForBlockedUser),error:function(){b._showStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(e,"block")}})}}}),this._data.blocking||c.push({label:_('Report <span class="truncate">{{screen_name}}</span> for spam',this._data),icon:"spam",handlers:{click:function(){b.profileUser.report({before:function(){$('.stream .stream-tweet[data-user-id="'+b.profileUser.id+'"]').closest(".stream-item").hide()}})}}}),new twttr.control.Dropdown(a,{items:c,direction:"right"})},_itemDetails:function(){var a={},c=this.profileUser.impressionId;return a[""+this.profileUser.id]={item_token:c,target_id:this.profileUser.id,item_type:b.constants.clientEvent.itemType[c?"promotedUser":"user"]},a}}),twttr.control.Dropdown.createCache("lists"),f&&twttr.components.ProfileActions.mixin(f),a(twttr.components.ProfileActions)})}),provide("components/RecentTweets",function(a){using().as(function(b){twttr.klass("twttr.components.RecentTweets").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet).initializer(function(a){var b=this,c=twttr.$win.height()<600?2:3;a.timeline().first(c,function(a){a.length()>0&&((new twttr.views.RecentTweets(a)).render(b.$node,"append"),b.registerTweetActionEvents(),b.updateI18nDisplay(),b.hasRendered())})}).deciderKey("recent_tweets_component"),a(twttr.components.RecentTweets)})}),provide("components/RecentlyFollowed",function(a){using().as(function(b){twttr.klass("twttr.components.RecentlyFollowed").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable,twttr.mixins.userRecommendationsHelper).initializer(function(a){function c(a,c){var d=function(a){return a.screenName==c.screenName};b._userCollection&&!b._userCollection.find(d)&&(b._userCollection.unshift(c),b.rememberHeight(),b.deferredCreateView())}function d(a,c){var d=function(a){return a.screenName!=c.screenName};b._userCollection&&(b._userCollection=b._userCollection.filter(d),b.rememberHeight(),b.deferredCreateView())}if(!twttr.currentUser)return;this.inWelcomeFlow=a,this._maxFollowersCount=10,this._maxSimilarsCount=2;var b=this;twttr.currentUser.friends({count:this._maxFollowersCount,success:function(c){b._userCollection=c,(a||!c.isEmpty())&&b.createView(),b.registerUserActionEvents(),b.registerUserRecommendationsActions()}}),this.$node.delegate(".followed li a.dynsims","click",function(a){var c=$(this);if(c.parent().hasClass("active"))return;var d=c.attr("data-user-id"),e=b._userCollection.find(function(a,b){if(a.id.toString()==d)return a});return e&&twttr.decider.isAvailable("whotofollow_similarities")&&(b.rememberHeight(),b.showSimilarUsers(e)),a.preventDefault(),a.stopPropagation(),!1}),twttr.API.User.bind("follow.RecentlyFollowedComponent",c),twttr.API.User.bind("unfollow.RecentlyFollowedComponent",d),twttr.app.bind("fakeFollow.RecentlyFollowedComponent",c),twttr.app.bind("fakeUnfollow.RecentlyFollowedComponent",d)}).destructor(function(){twttr.app.unbind(".RecentlyFollowedComponent"),twttr.API.User.unbind(".RecentlyFollowedComponent")}).methods({rememberHeight:function(){var a=this.$find(".recently-followed-users");a.css("height",a.height()+"px")},autoHeight:function(){this.$find(".recently-followed-users").css("height","")},deferredCreateView:function(){this._createViewTimeout&&(clearTimeout(this._createViewTimeout),this._createViewTimeout=null);var a=this;this._createViewTimeout=setTimeout(function(){a.createView(),a._createViewTimeout=null},1)},createView:function(){var a=this._userCollection.first();(new twttr.views.RecentlyFollowed({user:new twttr.views.BaseStats(twttr.currentUser),latest_friends:new twttr.views.UserThumbList(this._userCollection.slice(0,this._maxFollowersCount)),latest_friend:a?a.screenName:!1,welcome_flow:!!this.inWelcomeFlow,screen_name:twttr.currentUser.screenName,following_count:twttr.currentUser.friendsCount,following_10:twttr.currentUser.friendsCount>=10})).render(this.$node,"html");var b=this.$find(".followed ul");if(a&&twttr.decider.isAvailable("whotofollow_similarities")){b.find("li a").addClass("dynsims").removeClass("user-profile-link").attr("href","#");var c=this.$find(".recently-followed-users .suggestions");this.showSimilarUsers(a)}else this.autoHeight();if(this.inWelcomeFlow){var d=b.find("li").length+1;for(var e=d;e<=10;e++)b.append('<li><span class="welcome-placeholder">'+e+"</span></li>")}this.hasRendered()},showSimilarUsers:function(a){var b=this.$find(".followed ul"),c=this.$find(".suggestions").css({opacity:0});b.find("li").removeClass("active"),a.similarUsers({limit:this._maxSimilarsCount,complete:twttr.bind(this,function(){this.autoHeight()}),success:twttr.bind(this,function(d){this.similarUser=a,this.screenName=a.screenName;var e=this.recsToUsers(d).slice(0,this._maxSimilarsCount);"florian"==a.screenName&&(e=new twttr.API.util.BaseCollection),this.trackImpressions(e,"recently_followed_view_similarities",{to_user_id:a.id,tracking_context:"recently_followed",similar_to_user:a.id}),e.length()?((new twttr.views.UserDetailedList(e)).render(c.find("ul"),"html"),b.find("li a[data-user-id="+a.id+"]").parent("li").addClass("active"),c.find("p span").text(a.name),c.animate({opacity:1},200,function(){$(this).show()})):c.hide()}),error:twttr.bind(this,function(b){this.trackImpressions(null,"recently_followed_view_similarities",{to_user_id:a.id,tracking_context:"recently_followed",similar_to_user:a.id,error_status:b.status})})})}}),a(twttr.components.RecentlyFollowed)})}),provide("components/RecentlyViewed",function(a){using().as(function(b){twttr.klass("twttr.components.RecentlyViewed").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(){this.createView(),this.registerEvents()}).methods({registerEvents:function(){var a=this;this.$node.delegate("h2 .clear-all","click",function(b){b.preventDefault(),twttr.recentlyViewedUsers.clear(),a.$node.slideUp("fast",function(){a.$node.empty().show()})}),twttr.recentlyViewedUsers.bind("push.RecentlyViewedComponent",function(b,c){a.$find('li[data-user-id="'+c+'"]').size()||a.createView()}),a.registerUserActionEvents(),a.$node.delegate(".user-profile-link, .follow-action","click",function(){var a=$(this),b=a.hasClass("user-profile-link")?"profile_click":"follow";trackClient({section:"dashboard",component:"recently_viewed",action:b},{item_ids:[parseInt(a.attr("data-user-id"))],item_count:1})})},createView:function(){var a=this;twttr.recentlyViewedUsers.findAll({success:function(b){b=b.filter(function(a){return!a.following}).slice(0,6),b.length()?(trackClient({section:"dashboard",component:"recently_viewed",action:"results"},{item_ids:b.map(function(a){return a.id}),item_count:b.length()}),(new twttr.views.RecentlyViewed(b)).render(a.$node,"html"),twttr.helpers.ellipsify(a.$find("div.bio")),a.hasRendered()):a.trigger("notRendered","noRecentlyViewedUsers")}})}}),a(twttr.components.RecentlyViewed)})}),provide("components/InviteContacts",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.InviteContacts").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},this.scribbler=b.scribbler||new twttr.Scribbler,this.clientEventComponent=b.clientEventComponent||"invite_contacts";var c;for(var d=0;d<a.contacts.length;++d)c=a.contacts[d],c.index=d,c.truncated_email=twttr.helpers.truncate(c.email),c.truncated_name=twttr.helpers.truncate(c.name);(new twttr.views.InviteContacts(a)).render(this.$node,"append"),twttr.helpers.handlePopupLinks(this.$node);var e=this.$node.find("#select-all-contacts"),f=this.$node.find(".invite-contacts-button"),g=this.$node.find(".contacts .checkbox input");e.change(function(a){return g.attr("checked",this.checked),this.checked?f.removeClass("disabled"):f.addClass("disabled"),!0}),f.addClass("disabled"),g.change(function(a){var b=!0;return g.each(function(){b=b&&this.checked}),e.attr("checked",b),this.checked?f.removeClass("disabled"):g.filter(":checked").length==0&&f.addClass("disabled"),!0});var i=b.onSuccess||$.noop,j=b.onSubmit||$.noop,k=b.showError||function(a){twttr.showError(a)},l=this;f.click(function(a){if($(this).hasClass("disabled"))return;j();var b=g.filter(":checked").map(function(){var a=l.$node.find('label[for="'+this.id+'"]').text();return a==this.value?this.value:'"'+a+'" <'+this.value+">"}).get();f.addClass("disabled");var c={source:"contact_import",success:twttr.bind(this,function(a){var b=a.invited&&a.invited.length;twttr.showMessage(_("We let {{count}} of your contacts know about Twitter.",{count:b})),l.scribbler.scribe({component:l.clientEventComponent,action:"invited"},{event_value:b,item_count:b}),l.scribbler.scribe({component:l.clientEventComponent,action:"invitable"},{item_count:g.length}),i()}),error:function(a){f.removeClass("disabled");var c=twttr.API.util.RemoteRequest.apiErrorCodeFromResponse(a)||a.status;l.scribbler.scribe({component:l.clientEventComponent,action:"error"},{status_code:c,item_count:b.length});switch(c){case 47:k(_("We couldn't send invitations to any of those addresses."));break;case 37:k(_("There was an error emailing your contacts. Please try again later."));break;default:twttr.showMessage(_("We let your contacts know about Twitter.")),i()}}};twttr.API.AddressBook.sendInvitesByEmail(b,c)}),this.hasRendered()}),a(twttr.components.InviteContacts)})}),provide("components/InviteFriends",function(a){using("_","constants","mixins/inviteFriends").as(function(b,_){twttr.klass("twttr.components.InviteFriends").subclassOf(twttr.components.Base).mixin(twttr.mixins.inviteFriends).initializer(function(a){(new twttr.views.InviteFriends).render(this.$node,"append"),twttr.helpers.handlePopupLinks(this.$node),this.addFormEvents(a),this.hasRendered()}),a(twttr.components.InviteFriends)})}),provide("components/Retweeters",function(a){using().as(function(b){twttr.klass("twttr.components.Retweeters").subclassOf(twttr.components.Base).initializer(function(a,b,c){var d=this;a.retweeters({count:b||15,success:function(b){if(b.length()){var c=a.retweetCount,e=c>50?"50+":c;(new twttr.views.TweetStats({retweeters:b.array,retweeters_count:e,retweeters_length_one:c==1,retweeters_length_other:c!=1})).render(d.$node,"append");var f=b.map(function(a){return new twttr.views.BaseUser(a)});(new twttr.views.FacePile({users:f.array})).render(d.$find(".js-face-pile-container"),"append"),d.$find(".js-user-tipsy").tipsy({gravity:"s"}),d.hasRendered()}}})}).deciderKey("retweeters_component"),a(twttr.components.Retweeters)})}),provide("components/TweetActivity",function(a){using().as(function(b){twttr.klass("twttr.components.TweetActivity").subclassOf(twttr.components.Base).initializer(function(a){this.tweet=a,this.tweet.activities&&this.loadUsersAndRenderActivity()}).methods({loadUsersAndRenderActivity:function(){var a=this,b=33,c=[],d={favoriters:{},retweeters:{},repliers:{}},e={favoriters:[],retweeters:[],repliers:[]};for(var f in e){var g=this.tweet.activities[f];for(var i=0;i<g.length;i++)c=c.concat(g.slice(0,b)),d[f][g[i]]=!0}twttr.API.User.findAll(twttr.util.arrayUniq(c),{stringifiedIds:!0,success:function(b){b.each(function(a){for(var b in e)d[b][a.id]&&e[b].push(a)}),(new twttr.views.TweetActivity({counts:{favoriters_count:a.tweet.activities.favoriters_count,retweeters_count:a.tweet.activities.retweeters_count,repliers_count:a.tweet.activities.repliers_count},activities:e})).render(a.$node,"append")}})}}).click({".tweet-activity-view-all":function(a,b){b.closest(".activity-list-container").find("li.hidden").show(),b.closest(".tweet-activity-count-container").remove(),a.preventDefault()}}).deciderKey(function(){return twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_social_context")}),a(twttr.components.TweetActivity)})}),provide("components/ConversationThread",function(a){using().as(function(b){twttr.klass("twttr.components.ConversationThread").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.ConversationThread(a)).render(this.$node,"append"),a.bind("newMessage",function(a,c){(new twttr.views.Message(c)).render(b.$find(".messages-pane-header"),"after")}),a.bind("deletedMessage",function(a,c){b.$find(".js-message[data-message-id="+c+"]").remove()}),this.hasRendered()}),a(twttr.components.ConversationThread)})}),provide("components/InReplyTo",function(a){using().as(function(b){twttr.klass("twttr.components.InReplyTo").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet).initializer(function(a){var b=this;a.isReply&&a.inReplyTo(function(a){(new twttr.views.InReplyTo(a)).render(b.$node,"append"),b.registerTweetActionEvents(),b.updateI18nDisplay(),b.hasRendered()})}).deciderKey("in_reply_to_component").methods({noSpacer:!0}),a(twttr.components.InReplyTo)})}),provide("components/InlineReplyBox",function(a){using().as(function(b){twttr.klass("twttr.components.InlineReplyBox").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable).mixin(twttr.mixins.streamablePageWithInlineMedia).mixin(twttr.mixins.i18nTweet).initializer(function(a,b,c,d,e){if(!twttr.decider.hasInlineReplies())return null;this.registerTweetActionEvents(),b.addClass("with-inline-reply");var f=this.tweetActionReply(a,"expand",!0);f=twttr.dialogs.reply(f,!0);var g=(new twttr.views.InlineReplyBox({profile_image_url:twttr.currentUser.profileImageUrl,profile_image_size:e?"48":"32"})).$html();this.tweetbox=new twttr.TweetBox(g.prependTo(b),twttr.merge(f,{condensed:!0,condensedContent:_("Reply to @{{username}}",{username:f.defaultContent.slice(1)}),width:d,statusAction:"reply",whenGeoPopupOpens:function(){b.parent().scrollTop(0).css("overflow","visible")}}));var i=this;this.tweetbox.bind("open",function(){g.addClass("shifted").find(".inline-reply-user-image").show(),e&&i.tweetbox.$find("textarea").width(e)}),this.tweetbox.bind("close",function(){g.removeClass("shifted").find(".inline-reply-user-image").hide(),e&&i.tweetbox.$find("textarea").width(d)}),this.tweetbox.bind("tweetSuccess",function(a,b){var d=c.show().find(".tweets-wrapper");d.length||(d=c),(new twttr.views.SimpleTweet(b)).render(d,"prepend"),i.addInlineMediaIcons(d),i.updateI18nDisplay()}),this.tweetbox.bind("sendingTweet",function(c,d){i.trigger("reply.tweet",[a,b,"reply"])})}).methods({focus:function(){this.tweetbox.focus()}}),a(twttr.components.InReplyTo)})}),provide("components/Conversation",function(a){using().as(function(b){twttr.klass("twttr.components.Conversation").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.usesRelatedResults,twttr.mixins.i18nTweet,twttr.mixins.streamablePageWithInlineMedia).initializer(function(a,b,c){var d=this;d._tweetId=a.id;var e=function(a){if(a.length>1){var b=$("div.inner-pane").filter("div.active").find("div.pane-components"),c=b.find("div.conversation-last-ancestor-tweet");c.length>0&&b.animate({scrollTop:c.position().top-50},800)}},f=function(b){var f=twttr.isT1?new twttr.views.Ancestors(b):new twttr.views.Conversation(d.conversationGroup,a,b);f.render(d.$node,"append"),d.registerTweetActionEvents(),d.updateI18nDisplay(),twttr.isT1&&d.addInlineMediaIcons(d.$node),d.hasRendered(),twttr.isT1&&!b.length&&d.$node.hide(),c(d),twttr.decider.isExpando()||e(b)},g=function(a){twttr.API.User.find(a,function(a){twttr.helpers.canViewUser(a)||((new twttr.views.Ancestors({protected_ancestor:{user:new twttr.views.BaseUser(a)}})).render(d.$node,"append"),c(d))})};d.withRelatedResults(a,b,{success:function(b){d.resultGroups=b,d.conversationGroup=d.conversationGroupFor(b);var c=d.conversationGroup&&d.tweetsForConversationRole(d.conversationGroup,"Ancestor");c&&c.length?f(c):a.inReplyTo({success:function(a){f(a?[a]:[])},error:function(){twttr.isT1&&a.inReplyToUserId?g(a.inReplyToUserId):f([])}})},error:function(){f([])}})}).methods({onTweetActionDelete:function(a){a===this._tweetId&&this.trigger("deleted")},noSpacer:!0}),a(twttr.components.Conversation)})}),provide("components/Replies",function(a){using().as(function(b){twttr.klass("twttr.components.Replies").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.usesRelatedResults,twttr.mixins.i18nTweet,twttr.mixins.profilePopupActionable,twttr.mixins.streamablePageWithInlineMedia).initializer(function(a,b,c,d){if(!c)return;var e=this,f=function(a,b,c){b=e.filterRetweets(b);if(twttr.decider.isExpando()){var f=a.length;f>5?a=a.slice(0,5):b.length+f>5&&(b=b.slice(0,5-f))}a.length+b.length>0?((new twttr.views.Replies(c,a,b)).render(e.$node,"append"),e.registerTweetActionEvents(),e.updateI18nDisplay(),e.hasRendered(),twttr.isT1&&e.addInlineMediaIcons(e.$node),d&&d.apply(e)):twttr.decider.hasInlineReplies()&&((new twttr.views.Replies(c,a,b)).render(e.$node,"append"),e.$node.hide(),e.registerTweetActionEvents(),d&&d.apply(e))},g=[],i=[],j=e.conversationGroupFor(c);j&&(g=e.tweetsForConversationRole(j,"Descendant"),i=e.tweetsForConversationRole(j,"Fork")),f(g,i,j)}).methods({filterRetweets:function(a){var b={};for(var c=a.length-1;c>=0;c--){var d=a[c].id;a[c].attributes.retweeting_status?b[d]===undefined&&(b[d]=!1):b[d]=!0}for(var c=a.length-1;c>=0;c--){var d=a[c].id;a[c].attributes.retweeting_status&&b[d]===!0?a.splice(c,1):a[c].attributes.retweeting_status&&b[d]===!1&&(b[d]=!0)}return a}}).deciderKey("conversations"),a(twttr.components.Replies)})}),provide("components/MoreLists",function(a){using().as(function(b){twttr.klass("twttr.components.MoreLists").subclassOf(twttr.components.Base).initializer(function(a){this.render(a),this._registerEvents(a)}).deciderKey("more_lists_component").methods({render:function(a){var b=this;a.user.lists(function(c){c.length()&&((new twttr.views.MoreLists({user:new twttr.views.BaseUser(a.user),lists:new twttr.views.ListOfLists(c),create_list_button:{link_only:!0}})).render(b.$node),b.hasRendered())})},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"update",function(c,d){d.id===a.id&&b.render(d)})}}),a(twttr.components.MoreLists)})}),provide("geo/TweetGeo",function(a){using("_").as(function(b,_){twttr.klass("twttr.geo.TweetGeo",function(a,b,c,d){this.opts=d,this.placeId=b,this.render(a,c)}).methods({render:function(a,b){var c=this;c.$target=b;var d=$.extend({},a.data());d.tweet_id=a.id,c.avatarUrl=a.user.profileImageUrl.replace(/(.+)(?:_normal)\.(\w+)$/,"$1_mini.$2"),d.coordinates&&(c.coordinates=d.coordinates.coordinates),d.is_from=!c.placeId;var e=c.placeId||a.place&&a.place.id;if(e){if(!d.place||d.place.id!=e)d.place={id:e,name:_("A Place")};twttr.API.Place.find(e,{success:function(a){var b=a.data();d.place=twttr.geo.getFullPlace(b),c.finishRendering(d)},error:function(){d.place.place_id=e,c.finishRendering(d)}})}else delete d.place,c.finishRendering(d)},finishRendering:function(a){var b=this,c=!!b.coordinates,d=!(!a.place||!a.place.geometry&&!a.place.bounding_box);a.show_map=c||d;if(a.show_map||a.place){var e=(new twttr.views[b.opts.viewName](a)).$html();$.browser.safari&&!navigator.userAgent.match(/Chrome/)&&(e.find(".map_canvas").addClass("notransform"),b.opts.mapOptions.draggable=!1),b.$target.append(e)}if(a.show_map){b.drawMap(e.find(".map_canvas"),a.place);var f={},g=a.tweet_id+"";f[g]={item_type:twttr.constants.clientEvent.itemType.tweet},trackClient({component:"tweet",action:"show",element:"map"},{event_info:"dynamic",item_details:f,item_ids:[g],item_count:1})}},drawMap:function(a,b){var c=this;twttr.geo.loadMaps(function(){c.geoMap=new twttr.geo.Map(a,c.opts.mapOptions);if(!c.geoMap.initialized)return;var d=!1;if(b)if(b.geometry){var e=b.geometry.coordinates;b.geometry.type=="Polygon"?c.geoMap.addPlacePolygon(e):b.geometry.type=="MultiPolygon"?twttr.each(e,function(a){c.geoMap.addPlacePolygon(a)}):b.geometry.type=="Point"&&(c.geoMap.addPoi(e),d=!0)}else{var e=b.bounding_box.coordinates,f=e[0][0],g=e[0][2];f[0]==g[0]&&f[1]==g[1]?(c.geoMap.addPoi(e[0][0]),d=!0):c.geoMap.addPlacePolygon(e)}!d&&c.coordinates&&c.geoMap.addPoint(c.coordinates,c.avatarUrl),c.geoMap.adjustBounds(13,!d&&c.coordinates),a.bind("refreshMap",function(){c.geoMap.resize()})})}}),a(twttr.geo.TweetGeo)})}),provide("components/MachineTranslationBackend",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.components.MachineTranslationBackend",function(){}).statics({getBackend:function(){return new twttr.components.BingMTBackend}}).methods({translationTextEqual:function(a,b){return a===b?!0:(global_spaces=RegExp(twttr.txt.regexen.spaces.toString().slice(1,-1),"g"),a.replace(/[MHL]T\d*KEN/g,"").replace(global_spaces,"").toLowerCase()===b.replace(/[MHL]T\d*KEN/g,"").replace(global_spaces,"").toLowerCase()?!0:!1)},shouldShowTranslation:function(a,b,c,d){return c==d?!1:this.translationTextEqual(a,b)?!1:!0}}),twttr.klass("twttr.components.BingMTBackend",function(){}).subclassOf(twttr.components.MachineTranslationBackend).methods({attribution:function(){return _('Translation powered by <a href="http://bing.com/translator" target="_new">Bing Translator</a>')},translate:function(a,b,c){var d=this;$.ajax({url:window.location.protocol+"//api.microsofttranslator.com/v2/ajax.svc/GetTranslations?oncomplete=?",dataType:"jsonp",data:{appId:"2ADD5BC2C5139FA743F612F9CE8ECD783FCB899F",text:a,to:b,maxTranslations:1},success:twttr.bind(this,function(b){if(b&&b.Translations){var e=b.Translations[0].TranslatedText,f=b.From;this.shouldShowTranslation(a,e,f,d.destLocale)&&c(e,f)}})})}}),twttr.klass("twttr.components.MachineTranslatedTweet").subclassOf(twttr.components.Base).initializer(function(a){this._initTranslation(a,twttr.pageLocale||$("html").attr("lang")||"en")}).deciderKey("machine_translated_tweets").methods({_initTranslation:function(a,b){a.user["protected"]||(this.destLocale=b,this.fetchTranslation(a,this.destLocale))},_preProcessTweetText:function(a){var b=a,c=function(a){return a&&a.replace&&a.replace(/^\s+|\s+$/g,"")};this._mentions=a.match(twttr.txt.regexen.extractMentions)||[];for(i in this._mentions)this._mentions[i]=c(this._mentions[i]),b=b.replace(this._mentions[i],"<M"+i+"></M"+i+">");this._hashtags=a.match(twttr.txt.regexen.autoLinkHashtags)||[];for(i in this._hashtags)this._hashtags[i]=c(this._hashtags[i]),b=b.replace(this._hashtags[i],"<H"+i+"></H"+i+">");this._links=a.match(twttr.txt.regexen.extractUrl)||[];for(i in this._links)this._links[i]=this._links[i],b=b.replace(this._links[i],"<L"+i+"></L"+i+">");return b},_postProcessTweetText:function(a){var c=a;if(this._mentions&&this._mentions.length>0)for(var d=0;d<this._mentions.length;d++)c=c.replace(new RegExp("<M"+d+">\\s?</M"+d+">","i"),this._mentions[d]);if(this._hashtags&&this._hashtags.length>0)for(var d=0;d<this._hashtags.length;d++)c=c.replace(new RegExp("<H"+d+">\\s?</H"+d+">","i"),this._hashtags[d]);if(this._links&&this._links.length>0)for(var d=0;d<this._links.length;d++)c=c.replace(new RegExp("<L"+d+">\\s?</L"+d+">","i"),this._links[d]);return b.util.linkify(c)},fetchTranslation:function(a,b){var c=this;this.sourceText=this._preProcessTweetText(a.text);var d=twttr.components.MachineTranslationBackend.getBackend();d.translate(this.sourceText,b,function(b,e){(new twttr.views.MachineTranslatedTweet({translated_text:c._postProcessTweetText(b),attribution:d.attribution()})).render(c.$node,"append"),eventTerms={client:"web",page:"home",section:"timeline",component:"tweet",action:"translate"},eventDetails={item_ids:[a.id],i18n_details:{source_lang:e,source_length:c.sourceText.length,translation_lang:c.destLocale,translation_length:b.length}},trackClient(eventTerms,eventDetails),c.hasRendered()})}}),a(twttr.components.MachineTranslationBackend)})}),provide("components/TweetGeoSmall",function(a){using().as(function(b){twttr.klass("twttr.components.TweetGeoSmall").subclassOf(twttr.components.Base).initializer(function(a,b){if(!b&&!a.showGeoMap)return;if(a.geo||a.place&&a.place.id||b||a.coordinates)new twttr.geo.TweetGeo(a,b,this.$node,{viewName:"GeoMapSmall",mapOptions:twttr.isT1?{}:{draggable:!1,disableDoubleClickZoom:!0,navigationControl:!1}}),this.hasRendered()}).deciderKey("tweet_geo_component"),a(twttr.components.TweetGeoSmall)})}),provide("components/NewestListMembers",function(a){using().as(function(b){twttr.klass("twttr.components.NewestListMembers").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(a){this.render(a),this._registerEvents(a)}).deciderKey("newest_list_members_component").methods({render:function(a){var b=this;a.members().first(4,function(c){(new twttr.views.NewestListMembers({list:a.attributes})).render(b.$node),c.length()&&(c.each(function(a){var c=new twttr.views.UserSmallListItem(a);c.is_withheld()||c.render(b.$find(".js-recent-members"),"append")}),twttr.helpers.ellipsify(b.$find("div.bio")),b.hasRendered(),b.registerUserActionEvents())})},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"add remove",function(c,d){d.id===a.id&&b.render(d)})}}),a(twttr.components.NewestListMembers)})}),provide("components/StorkPip",function(a){using().as(function(b){twttr.klass("twttr.components.StorkPip").subclassOf(twttr.components.Base).initializer(function(a,b){var c=this;this._opts=b,this._state="icon",this._$streamItem=a,this._scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({component:"stork",element:b.id}),this.constructor.allPips[b.id]||(this.constructor.allPips[b.id]=[]),this.constructor.allPips[b.id].push(this),(new twttr.views.StorkPipIcon({icon:b.icon})).render(this.$node),this.$node.hide().prependTo(a).fadeIn("fast"),b.iconHighlight&&this.highlight(b.iconHighlight),this._scribbler.scribe({action:"impression"});var d=a.closest(".js-stream-items");if(b.explainOn){twttr.is.string(b.explainOn)&&(b.explainOn={event:b.explainOn});var e=b.explainOn.selector?d.find(b.explainOn.selector):d;this._registerEvent(e,b.explainOn.event,function(a){var d=$(a.target).closest(".js-stream-item");if(d.length&&(!b.matcher||b.matcher(d))){if(d[0]!=c._$streamItem[0]&&d.find(".js-pip").length)return;if(c._state=="icon")c._scribbler.scribe({action:"show"});else{if(c._state!="prompt")return;c._scribbler.scribe({action:"success"})}c.showState("explain",d)}})}if(b.dismissOn){twttr.is.string(b.dismissOn)&&(b.dismissOn={event:b.dismissOn});var e=b.dismissOn.selector?d.find(b.dismissOn.selector):d;this._registerEvent(e,b.dismissOn.event,function(a){var d=$(a.target).closest(".js-stream-item");d.length&&(!b.matcher||b.matcher(d))&&(d[0]==c._$streamItem[0]&&c._state=="explain"&&c._scribbler.scribe({action:"complete"}),c.dismissAll())})}}).click({".js-pip":function(){this._state=="icon"?(this.showState("prompt"),this._scribbler.scribe({action:"open"})):this._state=="explain"&&(this.dismissAll(),this._scribbler.scribe({action:"dismiss"}))},".js-dismiss":function(){this.dismissAll(),this._scribbler.scribe({action:"dismiss"})}}).statics({allPips:{},openPip:null}).methods({showState:function(a,b){function e(a){var b=new twttr.views.StorkPipText({contents:a,dismiss:!1});b.render(d.$node,"append"),d.$node.fadeIn("fast")}if(a=="prompt"&&!this._opts.promptHtml)return this.showState("explain",b);b=b||this._$streamItem;if(this._state==a)return;this._state=="icon"&&(a=="prompt"||a=="explain")&&twttr.stork.incrValue(this._opts.counter);if(a!="icon"){var c=this.constructor.openPip;c&&c!=this&&(c._state=="prompt"?c.showState("icon"):c._state=="explain"&&c.dismiss()),this.constructor.openPip=this}a=="explain"&&this.dismissOthers(),this._$streamItem[0]!=b[0]&&this.unhighlight(),this._state=a,this._$streamItem=b;var d=this;this.$find(".js-pip").prependTo(this.$node.parent()).fadeOut("fast",function(){$(this).remove();if(a=="icon"){var b=(new twttr.views.StorkPipIcon({icon:d._opts.icon})).render(d.$node);d.$node.fadeIn("fast")}else{var c=d._opts[a+"Html"],f=d._opts[a+"Highlight"];twttr.is.fn(c)?c(d._$streamItem,e):e(c),f&&f!="remove"?d.highlight(f):d.unhighlight(f=="remove")}}),this.$node.hide().prependTo(b)},highlight:function(a){this._$streamItem.find(a).is(".stork-highlighted")||(this.unhighlight(),this._$streamItem.find(a).each(function(){var a=$(this),b=$("<span>").addClass("stork-highlight-background"),c=$("<span>").addClass("stork-highlight-container").css({width:a.outerWidth(),height:a.outerHeight()});a.wrap(c).before(b).addClass("stork-highlighted"),b.fadeIn()}))},unhighlight:function(a){this._$streamItem.find(".stork-highlighted").each(function(){var b=$(this),c=b.parent().find(".stork-highlight-background"),d=function(){c.remove(),b.unwrap()};b.removeClass("stork-highlighted"),a?d():c.fadeOut(d)})},dismissOthers:function(){for(var a=0;a<this.constructor.allPips[this._opts.id].length;++a){var b=this.constructor.allPips[this._opts.id][a];b!=this&&b.dismiss()}this.constructor.allPips[this._opts.id]=[this]},dismissAll:function(){var a=this.$node.closest(".js-stream-items");for(var b=0;b<this.constructor.allPips[this._opts.id].length;++b){var c=this.constructor.allPips[this._opts.id][b];c.dismiss()}this.constructor.allPips[this._opts.id]=[],twttr.stork.storkifyTweets(a)},dismiss:function(){var a=this;this._$streamItem&&this.unhighlight(),this.$node.fadeOut(function(){a.destroy()}).find(".js-pip").removeClass("js-pip")}}),a(twttr.components.StorkPip)})}),provide("components/StreamEnd",function(a){using().as(function(b){twttr.klass("twttr.components.StreamEnd").subclassOf(twttr.components.Base).initializer(function(a,b){(new twttr.views.StreamEnd({show_stream_end_bird:b===undefined?!0:b,end_text:a})).render(this.$node,"append")}),a(twttr.components.StreamEnd)})}),provide("components/StreamEndInviteFriends",function(a){using().as(function(b){twttr.klass("twttr.components.StreamEndInviteFriends").subclassOf(twttr.components.StreamEnd).initializer(function(a,b){var c=new twttr.components.InviteFriends;c.$node.addClass("stream-item"),this.$node.append(c.$node),this._superInitializer.apply(this,arguments)}),a(twttr.components.StreamEndInviteFriends)})}),provide("components/StreamWhaleEnd",function(a){using().as(function(b){twttr.klass("twttr.components.StreamWhaleEnd").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.StreamWhaleEnd({stream_fail_header:a})).render(this.$node,"append"),this.$node.delegate(".try-again-after-whale","click",function(a){a.preventDefault(),b.trigger("tryAgain")})}),a(twttr.components.StreamWhaleEnd)})}),provide("components/ContactImportErrorEnd",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.ContactImportErrorEnd").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.StreamWhaleEnd({stream_fail_header:a})).render(this.$node,"append"),this.$node.delegate(".try-again-after-whale","click",function(a){b.trigger("tryImportAgain")})}),a(twttr.components.ContactImportErrorEnd)})}),provide("components/EmptyHome",function(a){using().as(function(b){var c=twttr.klass("twttr.components.EmptyHome").subclassOf(twttr.components.Base).initializer(function(){this.render(),this.hasRendered()}).methods({render:function(){var a=twttr.currentUser;(new twttr.views.EmptyHome({screen_name:a.screenName,protected_account:a["protected"]})).render(this.$node.empty(),"append")}});twttr.isT1&&c.methods({render:function(){(new twttr.views.EmptyHome({show_stream_end_bird:!0,end_text:(new twttr.views.EmptyTimelineMessage).html()})).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/AddPeople",function(a){using().as(function(b){var c=twttr.klass("twttr.components.AddPeople").subclassOf(twttr.components.Base).initializer(function(){this.render();var a=twttr.isT1?"userSearchPath":"whoToFollowSearchPath";twttr.helpers.addFormEvents(this.$find(".js-search-for-list-people"),function(){var b=this.q.value;b!=""&&(twttr.router.routeTo(twttr.router[a]({query:b})),trackClient({component:"empty_list_stream",action:"search"},"list"),_scribble("search-for-people",{input:"click"}))}),this.hasRendered()});twttr.isT1?c.methods({render:twttr.util.noopInT1}).setBaseView(twttr.views.AddPeople):c.methods({render:function(){(new twttr.views.AddPeople).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/NoListMembers",function(a){using().as(function(b){var c=twttr.klass("twttr.components.NoListMembers").subclassOf(twttr.components.Base).initializer(function(){var a=this;this.render(),this.hasRendered()});twttr.isT1?c.methods({render:twttr.util.noopInT1}).setBaseView(twttr.views.NoListMembers):c.methods({render:function(){(new twttr.views.NoListMembers).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/Media",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.components.Media").subclassOf(twttr.components.Base).initializer(function(a,b,c){this.tweet=a,this.urls=twttr.media.extractUrls(a),this.$node.prepend($('<div class="tweet-media"/>')),this.$mediaNode=this.$node.find("div.tweet-media"),this.width=b,this.options=c||{},this.hasCalledHasRendered=!1,this.notDisplayedClass=".media-not-displayed";var d=this;this.checkForMedia(function(a){a&&(d.$mediaNode.bind("hideMedia",function(){$("div.tweet-media").empty()}),d.$mediaNode.bind("showMedia",function(){d.restrictedMedia()?twttr.loggedIn?d.loggedInBehavior():d.loggedOutBehavior():d.renderMedia()}),d.$mediaNode.trigger("showMedia"))})}).deciderKey("inline_media_component").statics({restrictedCategories:{photo:!0,video:!0},dashboardThumbnailOptions:{itemWidth:66,itemHeight:66,itemDisplayWidth:70,width:276,viewClass:twttr.views.ThumbnailViewerFacet,thumbnailViewClass:twttr.views.ThumbnailFacet}}).methods({checkForMedia:function(a){var c=this;if(b.util.objKeys(this.urls).length===0&&!twttr.media.hasMedia(this.tweet)){a(!1);return}var d=c.tweet;twttr.Cards.prototype.hasCards(d)?(this.mediaTypes=[],a(!0)):twttr.media.mediaTypes(this.urls,function(d){c.mediaTypes=d;if(b.util.objKeys(c.mediaTypes).length===0){a(!1);return}a(!0)})},onProfilePage:function(){return twttr.profileUser&&twttr.profileUser.id==this.tweet.user.id},restrictedMedia:function(){var a=!1;return $.each(this.mediaTypes,function(b,c){var d=twttr.media.iconType(b,c);!twttr.components.Media.restrictedCategories[d]||(a=!0)}),a},_getUser:function(){return this.tweet.retweetingStatus?this.tweet.retweetingStatus.user:this.tweet.user},loggedInBehavior:function(){var a=this,b=this._getUser();if(twttr.helpers.isCurrentUser(b)||this.hasClickedShowMedia){this.renderMedia();return}this.checkPossiblySensitive()},_isPossiblySensitive:function(){return!!this.tweet.possiblySensitive},checkPossiblySensitive:function(){this._isPossiblySensitive()?this.possiblySensitiveBehavior():this.renderMedia()},checkNotFollowing:function(){var a=this,b=this._getUser();twttr.currentUser.relationshipWith(b,function(c){b.sync("following",c.following),a.renderMedia()})},possiblySensitiveBehavior:function(){var a=this;twttr.currentUser.viewPossiblySensitive({success:function(b){b?a.checkNotFollowing():a.renderBlockedMessage({possibly_sensitive:!0})}})},loggedOutBehavior:function(){this.onProfilePage()&&!this._isPossiblySensitive()?this.renderMedia():this._isPossiblySensitive()&&!twttr.media.getViewMediaCookie()?this.renderBlockedMessage({possibly_sensitive:!0}):this.renderMedia()},renderMedia:function(){var a=this,b=(new twttr.media.Embedder(this.tweet,{DOMContainer:a.$mediaNode,preProcess:function(b,c){c(twttr.aug(a.options,{maxwidth:a.width}))},afterRender:function(b,c){a.hasCalledHasRendered||(a.hasRendered(),a.hasCalledHasRendered=!0),a.options.afterRender&&a.options.afterRender(b)}})).render()},buildNotDisplayedView:function(a){return new twttr.views.MediaNotDisplayed(a)},renderBlockedMessage:function(a){var b=this;b.hasCalledHasRendered||(b.hasRendered(),b.hasCalledHasRendered=!0);if(this.$node.find(this.notDisplayedClass+":visible").get(0))return;this.buildNotDisplayedView(a).render(this.$node,"prepend"),this.options.whenNotDisplayed&&this.options.whenNotDisplayed(this.$node);var c=twttr.bind(this,function(a){this.renderMedia(),this.$node.find(this.notDisplayedClass).hide(),twttr.loggedIn?this.hasClickedShowMedia=!0:twttr.media.setViewMediaCookie(),a.stopPropagation()});this.$node.find(".display-this-media").click(c),this.$node.find(".always-display-media").click(function(a){twttr.currentUser.updateViewPossiblySensitive(!0,{success:function(){twttr.showMessage(_("Your media display settings have been changed.")),c(a)},error:function(a){twttr.showError(_("Couldn't set inline media settings."))}})})}}),a(twttr.components.Media)})}),provide("components/ProfilePane",function(a){using("mixins/userActionable",twttr.isT1?["mixins/userUpdateable","mixins/profilePopupActionable"]:[]).as(function(b){var c=twttr.klass("twttr.components.ProfilePane").subclassOf(twttr.components.Base).initializer(function(a){this.user=a,this.renderPane(),twttr.loggedIn&&this.$node.append((new twttr.components.ProfileActions(this.user,undefined,!0)).$node),this.hasRendered()}).methods({renderPane:function(){var a=new twttr.views.ProfilePane(this.user);a.render(this.$node)},renderStats:function(){var a=new twttr.views.MiniProfileStats(this.user);a.render(this.$node.find(".js-mini-profile-stats"),"replaceWith")}});twttr.isT1&&c.mixin(b.mixins.userActionable,b.mixins.userUpdateable,b.mixins.profilePopupActionable).initializer(function(a){var b=this,c=a.impressionId;this.user=a,this.renderPane(),this.registerUserActionEvents(),twttr.loggedIn&&(this.registerUserUpdateEvents(this.user),this.bind("userUpdated",function(a,d){b.user=d,c&&(b.user=twttr.API.util.PromotedStore.getPromotedUserInstance(b.user,c)),b.renderStats()})),this.hasRendered()}).methods({renderPane:function(){var a=this;this.getRelationship(this.user,function(b,c){a.updateUserAttributesFromRelationship(b);var d=new twttr.views.ProfilePane(a.user);d.render(a.$node),a.showFollowOrUnfollow(a.user),twttr.helpers.canViewUser(a.user)&&a.showMiniSocialProof(a.user),a.renderUserProfileMenu(a.$find(".js-follow-combo"),a.$find(".js-action-profilemenu"),c)})}}),a(c)})}),provide("components/JapaneseAd",function(a){using("constants").as(function(b){twttr.klass("twttr.components.JapaneseAd").subclassOf(twttr.components.Base).initializer(function(){if(twttr.components.JapaneseAd.shouldBeHidden()){this.$node.hide();return}(new twttr.views.JapaneseAd).render(this.$node,"append");if(twttr.decider.isAvailable("japanese_new_ad_provider"))this.constructor.getJapanAd()?this.constructor.refreshAds():this.constructor.createIframeAd(this.$node);else if(!this.constructor.loadedOnce){this.constructor.loadedOnce=!0;var a="loadedJsCallBack"+parseInt(Math.random()*1e5,10);twttr.components.JapaneseAd.callbacks[a]=function(b){delete twttr.components.JapaneseAd.callbacks[a],twttr.components.JapaneseAd.loadedJsCallback(b)},$.ajax({cache:!0,url:window.location.protocol+b.constants.japaneseAdUrl+a,dataType:"script"})}else this.constructor.refreshAds()}).statics({shouldBeHidden:function(){var a=["japan_olympic","akiko_lawson","docomo","mhamura","warnerjp","aquarius_sports"];return twttr.pageLocale!=="ja"||twttr.app.currentPageName()==="profile"&&$.inArray(twttr.profileUser.screenName.toLowerCase(),a)!=-1},callbacks:{},loadedJsCallback:function(a){this.etologyAdSrc=a[0];if(typeof renderAd=="function"){var b=renderAd;renderAd=function(a){document.getElementById(a.spaceTag)&&b.apply(this,arguments)}}this.refreshAds()},createIframeAd:function(a){$(a).append($('<iframe id="j_ad" src="'+b.constants.japaneseAdIframeUrl+'" width="300" height="185" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>')),trackClient({component:"japanese_ad",action:"impression"},{url:b.constants.japaneseAdIframeUrl})},getJapanAd:function(){return $("#j_ad")[0]},refreshAds:function(){var a="t="+(new Date).getTime();twttr.decider.isAvailable("japanese_new_ad_provider")?this.getJapanAd()&&($("#j_ad").attr("src",b.constants.japaneseAdIframeUrl+"&"+a),trackClient({component:"japanese_ad",action:"refresh"},{url:b.constants.japaneseAdIframeUrl})):this.etologyAdSrc&&(trackClient({section:"dashboard",component:"japanese_ad",action:"refresh"},{url:this.etologyAdSrc}),_scribble("japanese-ad-refresh",{adSource:this.etologyAdSrc}),$.getScript(this.etologyAdSrc+"?"+a))}}).deciderKey("japanese_ad_component"),a(twttr.components.JapaneseAd)})}),provide("components/ProtectedUser",function(a){using().as(function(b){twttr.klass("twttr.components.ProtectedUser").subclassOf(twttr.components.Base).initializer(function(a){(new twttr.views.ProtectedUser(a)).render(this.$node,"append")}),a(twttr.components.ProtectedUser)})}),provide("components/TweetStats",function(a){using().as(function(b){var c=twttr.klass("twttr.components.TweetStats").subclassOf(twttr.components.Base).initializer(function(a,b,c){this.maxUsersToShow=b;var d=this;a.summary(function(b){d.shouldRender(b)&&($.extend(b,{screen_name:a.user.screenName,id:a.id,retweeters_length:b.retweeters.length,favoriters_length:b.favoriters.length,has_retweets:!!parseInt(b.retweeters_count,10),has_favorites:!!parseInt(b.favoriters_count,10)}),(new twttr.views.TweetStats(b)).render(d.$node,"append"),d.$node.closest(".js-stream-tweet").addClass("with-social-proof"),d.getFacePile(b),c&&c())})}).methods({shouldRender:function(a){return a.retweeters.length+a.favoriters.length>0},getFacePile:function(a){var b=this,c=twttr.util.arrayUniq(a.retweeters.concat(a.favoriters));c=c.slice(0,this.maxUsersToShow),twttr.API.User.findAll(c,function(a){var d={};a.each(function(a){d[a.id]=a});var e=new twttr.anywhere.api.util.BaseCollection($.map(c,function(a){return d[a]})),f=e.map(function(a){return new twttr.views.BaseUser(a)});(new twttr.views.FacePile({users:f.array})).render(b.$find(".js-face-pile-container"),"append"),b.$node.closest(".js-stream-tweet").addClass("with-social-proof"),b.$find(".js-user-tipsy").tipsy({gravity:"s"})})}}).deciderKey(function(){return twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_status_summary")});a(c)})}),provide("components/PermalinkTweet",function(a){using().as(function(b){twttr.klass("twttr.components.PermalinkTweet").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet,twttr.mixins.userActionable,twttr.mixins.profilePopupActionable).initializer(function(a){this.view=new twttr.views.SingleTweet(a),this.view.render(this.$node,"append"),this._tweetId=a.id,this.registerTweetActionEvents(),this.updateI18nDisplay(),this.hasRendered(),this.scribeComponentName="tweet";if(twttr.isT1){var b=twttr.loggedIn?"TweetStats":"Retweeters",c=new twttr.components[b](a,9);this.$find("div.js-tweet-stats-container").append(c.$node)}this.registerUserActionEvents()}).methods({renderWithheld:function(){return this.view.render_withheld()},renderCreatorWithheld:function(){return this.view.is_withheld()&&this.view.is_current_user()},faveTweet:function(a){this.tweetActionFavorite(this.$find(".tweet"),a)},replyTweet:function(a){this.tweetActionReply(this.$find(".tweet"),a)},retweetTweet:function(a){this.tweetActionRetweet(this.$find(".tweet"),a)},onTweetActionDelete:function(a){a===this._tweetId&&this.trigger("deleted")}}).click({"img.user-profile-link":function(a,b){this.trigger("avatar_click.tweet",[b.closest(".js-actionable-tweet"),"avatar",b])},".tweet-user-block-screen-name":function(a,b){this.trigger("screen_name_click.tweet",[b.closest(".js-actionable-tweet"),"screen_name",b])},".stats .js-stat-count a":function(a,b){a.stopPropagation(),a.preventDefault()}}),a(twttr.components.PermalinkTweet)})}),provide("components/NoUserExists",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.NoUserExists").subclassOf(twttr.components.Base).initializer(function(){this.$node.append("<p class='no-user tweet-text tweet-text-large'>"+_("This user does not exist.")+"</p>"),this.hasRendered()}),a(twttr.components.NoUserExists)})}),provide("components/SignupCallOut",function(a){using().as(function(b){twttr.klass("twttr.components.SignupCallOut").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{};var c;if(b.profileUser){var d=twttr.merge({signup_source:a},b.profileUser.attributes);a=="permalink"?c=new twttr.views.PermalinkSignupCallOut(d):c=new twttr.views.ProfileSignupCallOut(d)}else c=new twttr.views.NewSignupCallOut({signup_source:a,query:b.query});c.render(this.$node.empty(),"append"),this.$node.delegate("form.signup-btn","submit",function(){trackClient({section:"signup_callout",component:"form",action:"signup_click"})});if(b.profileUser||twttr.isT1){var e=this.$find("form");twttr.helpers.addFormEvents(e),twttr.helpers.addHoldingInputEvents(e)}this.$node.delegate(".profile-subpage-call-out-button","click",function(){trackClient({section:"signup_callout",component:"discover_link",action:"click"},{profile_id:twttr.profileUser.id,context:"profile"})}),this.hasRendered()}),a(twttr.components.SignupCallOut)})}),provide("components/SuggestionCategoriesList",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.SuggestionCategoriesList").subclassOf(twttr.components.Base).initializer(function(a,b,c){var d=this.categoriesToLinks(a,b,c);(new twttr.views.LinkList(d,"&middot;")).render(this.$node,"append"),this.$find("ul").addClass("categories-list")}).mixin(twttr.mixins.discoveryHelper).methods({categoriesToLinks:function(a,b,c){var d=this;return a?a.map(function(a,e){var f={text:a.name};if(c==a.slug)return f;var g=d.pagePathFor(b,"InterestsCategory",{category:a.slug});return twttr.merge(f,{href:g})}).array:[]}}),a(twttr.components.SuggestionCategoriesList)})}),provide("components/ContactImportMatchesStats",function(a){using().as(function(b){twttr.klass("twttr.components.ContactImportMatchesStats").subclassOf(twttr.components.Base).initializer(function(a,b){var c=a.customHeaderView||"ContactImportMatchesStats";(new twttr.views[c](b)).render(this.$node,"append"),this.$node.delegate(".js-action-follow-all","click",function(b){a._followAll($(this)),b.preventDefault()}),this.$node.delegate(".save-as-list","click",function(b){a._saveAsList($(this)),b.preventDefault()}),this.$node.delegate(".invite-contacts","click",function(b){a.inviteOthers(),b.preventDefault()})}),a(twttr.components.ContactImportMatchesStats)})}),provide("components/media/Base",function(a){using().as(function(b){twttr.klass("twttr.components.media.Base").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.options=a,this.size=a.size||"medium",this.count=this.count||a.count||100,this.offset=this.offset||a.offset||0,this.score=a.score||!0,this.isDataReady=!1,this._urls=[]}).methods(twttr.EventProvider).methods({render:function(){throw new Error("You should implement this.")},dataReady:function(a,b){this._urls=a,this.isDataReady=!0,this.trigger("urlsLoaded",[this._urls,!!b])}}),a(twttr.components.media.Base)})}),provide("components/media/profile",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.media.profile.Images").subclassOf(twttr.components.media.Base).initializer(function(a){var b=this;this._superInitializer.apply(this,arguments),this.user=a.user,this.provider=new twttr.media.provider.UserMedia({user:this.user}),this.options=a||{},this._fetchedMedia=null,this.viewTemplate=twttr.views.FacetMedia,this.filter=a.filter||function(){return!0},this.thumbnailViewerOptions=$.extend({},{width:340,itemWidth:83,itemHeight:83,itemDisplayWidth:85,generateItemHref:function(a){return twttr.router.userMediaSlideshowPath({screen_name:b.user.screenName})+"?url="+encodeURIComponent(a)}},this.options),this.noSpacer=!!this.options.noSpacer}).methods({fetchImages:function(){var a=this;this.provider.fetch({count:this.count,page:this.offset,filter:this.filter,success:function(b){a._fetchedMedia=b;var c=!1;a.dataReady($.map(b,function(a){return c=c||a&&a.tweet&&a.tweet.possiblySensitive,a.url}),c)}})},render:function(){var a=this;if(!this.isDataReady)return;var b=4,c=this._urls.length>b;this.viewAllHref=twttr.router.userMediaGridPath({screen_name:a.user.screenName});if(this._urls.length>0){var d=(new this.viewTemplate({title:_("Recent images"),view_all_href:this.viewAllHref,show_view_all:c})).$html();this.$node.append(d),this.thumbnailViewer=new twttr.components.ThumbnailViewer(this._urls,this.thumbnailViewerOptions,this._fetchedMedia),this.thumbnailViewer.renderWithIndex(0),this.thumbnailViewer.bind("nextPage prevPage",function(a,b){trackClient({section:"dashboard",component:"photos_user_media",action:"page"},{event_info:"photos",cursor_or_page:b,profile_id:twttr.profileUser&&twttr.profileUser.id})}),this.thumbnailViewer.bind("allFailed",function(){a.trigger("failed")}),this.$find(".js-media-images").replaceWith(this.thumbnailViewer.$node)}this.hasRendered()}}),a(twttr.components.media.profile)})}),provide("components/media/facets/Base",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Base").subclassOf(twttr.components.media.Base).initializer(function(a){this._superInitializer(a)}).methods(twttr.EventProvider).methods({render:function(){throw new Error("You should implement this.")}});a(c)})}),provide("components/media/facets/Media",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Media").subclassOf(twttr.components.media.facets.Base).methods({render:function(){var a=this;if(!this.isDataReady)return;var b=a._type==="images"?4:3,c=this._urls.length>b;if(this._urls.length>0){var d=(new this.viewTemplate({title:this.title,view_all_href:!twttr.isT1||c?this.view_all_href:this.view_slideshow_href,show_view_all:c})).$html();this.$node.append(d);var e={imageSize:this.imageSize,cacheSize:this.cacheSize,width:340,itemWidth:this.itemWidth||83,itemHeight:this.itemHeight||83,itemDisplayWidth:this.itemDisplayWidth||85,delayLoading:!0,generateItemHref:function(b){return twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:a._type==="images"?"photos":a._type})+"?url="+encodeURIComponent(b)},containsVideos:a._type!=="images"?!0:!1};twttr.isT1&&twttr.aug(e,twttr.components.Media.dashboardThumbnailOptions),this.thumbnailViewer=new twttr.components.ThumbnailViewer(this._urls,e),this.thumbnailViewer.renderWithIndex(0),this.thumbnailViewer.bind("nextPage prevPage",function(b,c){var d=a._type=="images"?"photos":a._type;trackClient({section:"dashboard",component:d+"_search_facets",action:"page"},{event_info:d,query:a.options.query,page_or_cursor:c})}),this.thumbnailViewer.bind("failedToLoad",function(c,d){var e=$.inArray(d,a._urls);e>-1&&a._urls.splice(e,1),a._urls.length<=b&&a.hideViewAll()}),this.thumbnailViewer.bind("allFailed",function(){a.trigger("failed")}),this.$find(".js-media-images").replaceWith(this.thumbnailViewer.$node)}this.afterRender(),this.hasRendered()},hideViewAll:function(){this.$find(".view-all-link").remove()},afterRender:function(){},viewTemplate:twttr.views.FacetMedia});a(c)})}),provide("components/media/facets/Images",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Images").subclassOf(twttr.components.media.facets.Media).initializer(function(){var a=this;this.title=_("Top images"),this._type="images",this._superInitializer.apply(this,arguments),this.view_all_href=twttr.router.searchFacetsGridPath({query:a.options.query,mode:"photos"}),this.view_slideshow_href=twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:"photos"}),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"photos_search_facets",action:"view_all"},{query:a.options.query,event_info:"photos"}),scribble("facets_view_all_click",{mode:"images",query:a.options.query,userId:twttr.currentUser?twttr.currentUser.id:null})}),this.$node.delegate(".media-thumbnail","click",function(b){trackClient({section:"dashboard",component:"photos_search_facets",action:"click"},{query:a.options.query,event_info:"photos",url:$(this).attr("data-url")})}),twttr.SearchAPI.getImageFacets(this.options.query,{experimentId:this.options.expId,count:100,success:function(b){var c=$.map(b,function(a){return a.url});a.dataReady(c,!1)}})}).methods({scribeComponentName:"photos_search_facets"}).deciderKey("phoenix_facets_images");a(c)})}),provide("components/media/facets/Videos",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Videos").subclassOf(twttr.components.media.facets.Media).initializer(function(){var a=this;this.itemWidth=112,this.itemDisplayWidth=114,this.title=_("Top videos"),this._type="videos",this._superInitializer.apply(this,arguments),this.view_all_href=twttr.router.searchFacetsGridPath({query:a.options.query,mode:"videos"}),this.view_slideshow_href=twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:"videos"}),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"videos_search_facets",action:"view_all"},{query:a.options.query,event_info:"videos"})}),this.$node.delegate(".media-thumbnail","click",function(b){trackClient({section:"dashboard",component:"videos_search_facets",action:"click"},{query:a.options.query,event_info:"videos",url:$(this).attr("data-url")})}),twttr.SearchAPI.getVideoFacets(this.options.query,{experimentId:this.options.expId,count:100,success:function(b){var c=$.map(b,function(a){return a.url});a.dataReady(c,!1)}})}).methods({scribeComponentName:"videos_search_facets"}).deciderKey("phoenix_facets_videos");a(c)})}),provide("components/ThumbnailViewer",function(a){using("constants").as(function(b){var c=twttr.klass("twttr.components.ThumbnailViewer").subclassOf(twttr.components.Base).initializer(function(a,b,c){b?(this.imageSize=b.imageSize||this.imageSize,this.cacheSize=b.cacheSize||this.cacheSize,this.itemWidth=b.itemWidth||60,this.itemHeight=b.itemHeight||60,this.itemDisplayWidth=b.itemDisplayWidth||this.itemWidth,this.itemDisplayHeight=b.itemDisplayHeight||this.itemHeight,this.containsVideos=b.containsVideos||!1,this.width=b.width||304,this.viewClass=b.viewClass||twttr.views.ThumbnailViewer,this.thumbnailViewClass=b.thumbnailViewClass||twttr.views.Thumbnail,this.scribbler=b.scribbler||twttr.Scribbler.clientEvent,this.noRender=b.noRender,this.atEnd=!1,this.firstVisibleIndex=0,twttr.is.def(b.fadeOutNav)?this.fadeOutNav=b.fadeOutNav:this.fadeOutNav=!0,this.generateItemHref=b.generateItemHref||function(a){return a}):this.scribbler=twttr.Scribbler.clientEvent,this.originalCount=a.length,this.urls=a,this.embeddedMedia=c,(new this.viewClass).render(this.$node,"append"),this.thumbSetup(),this._registerEventHandlers(),this.updatePageNavigation()}).methods({animateTo:function(a){a<0&&(a=0);var b=this.getFullyVisibleThumbsPerPage();this.firstVisibleIndex=a-a%b;var c=this.determineLeftPosition(a,b),d=Modernizr.csstransitions?"animateWithCss":"animate";twttr.isRTL?this.$thumbs[d]({right:-c},400,"swing"):this.$thumbs[d]({left:-c},400,"swing"),this.loadSurroundingImages(a,b),this.updatePageNavigation()},determineLeftPosition:function(a,b){var c=this.firstVisibleIndex*this.itemDisplayWidth,d=this.getThumbsWidth(),e=a*this.itemDisplayWidth,f=this.getThumbsVisibleWidth(),g=c+f-d;if(g>=0&&this.firstVisibleIndex>=b)c-=g,this.atEnd=!0;else{var i=d-e;this.atEnd===!0&&i<f?(c-=g,this.atEnd=!0,this.firstVisibleIndex=this.urls.length-b):this.atEnd=!1}return c},loadNextImages:function(a,b){if(this.noRender)return;this.$thumbs.children().slice(a,b).trigger("loadImage")},loadSurroundingImages:function(a,b){var c=a-b;c<0&&(c=0),this.loadNextImages(c,a+b*2)},thumbSetup:function(){this.$thumbs=this.$find(".js-thumbnail-viewer-images"),this.$container=this.$find(".js-thumbnail-viewer-container"),this.$thumbs.width(this.getThumbsWidth()),this.generateThumbs(this.urls)},getThumbsWidth:function(){return this.urls.length*this.itemDisplayWidth},getThumbsVisibleWidth:function(){return this.$container.width()||this.width},getThumbsPerPage:function(){return Math.ceil(this.getThumbsVisibleWidth()/this.itemDisplayWidth)},getFullyVisibleThumbsPerPage:function(){var a=this.getThumbsVisibleWidth()/this.itemDisplayWidth;return a-Math.floor(a)>.95?Math.ceil(a):Math.floor(a)},renderWithIndex:function(a){a=this.resetIndex(a),this.animateTo(a)},removeUrl:function(a){var b=$.inArray(a,this.urls);b!==-1&&(this.urls.splice(b,1),this.trigger("failedToLoad",a),this.updatePageNavigation()),this.urls.length==0&&this.trigger("allFailed")},selectByUrl:function(a){var b=$.inArray(a,this.urls);return b==-1?!1:(this.renderWithIndex(b),this._select(this.getThumbnailByUrl(a)),!0)},selectByIndex:function(a){a=this.resetIndex(a),this.renderWithIndex(a);var b=this.$thumbs.find(".media-thumbnail");this._select($(b[a]))},resetIndex:function(a){return a>this.urls.length?0:a},getThumbnailByUrl:function(a){return this.$thumbs.find(".media-thumbnail[data-url='"+a+"']").first()},generateThumbs:function(a){var c=this;if(a.length===0)return;var d=b.constants.imageSizes,e=$(),f={width:this.itemWidth,height:this.itemHeight,dimension:Math.max(this.itemWidth,this.itemHeight),size:this.itemWidth<80&&this.itemHeight<80?d.small:d.medium,scalingMode:"trim",delayLoading:!0,thumbnailViewClass:this.thumbnailViewClass,componentName:this._namespace.split(".").pop()};this.embeddedMedia?e=twttr.images.renderProviderMedia(this.embeddedMedia,f):e=twttr.images.renderMediaUrls(a,f);if(e.length){var g=this.getFullyVisibleThumbsPerPage(),i=0,j=0,k=g*2,l=k;function m(){i+j===l&&j<=g&&(c.loadNextImages(j,j+k),l+=k)}e.addClass("thumbnail-image-wrapper").bind("failedToResolve failedToLoad",function(a,b){var d=$(this).attr("data-url");twttr.images.scribeImageFailure(c.scribbler,"photos_thumbnails",d),c.removeUrl(d),$(this).remove(),i++,m()}).bind("loaded",function(){twttr.images.animateImageFadeIn($(this).find("img"),500),j++,m()}),e.append('<div class="thumbnail-active-border"><div class="thumbnail-active-border-inner"></div></div>'),twttr.isT1||e.append('<div class="media-play-button"></div>'),this.containsVideos&&e.addClass("video"),e.each(function(){var a=$(this);a.attr("href",c.generateItemHref(a.attr("data-url")))}),this.$thumbs.append(e)}},updateWidth:function(a){this.width=a||this.$node.width(),this.animateTo(this.getActiveThumbnail().index()),this.updatePageNavigation()},prevPage:function(){var a=this.getFullyVisibleThumbsPerPage();this.animateTo(this.firstVisibleIndex-a),this.trigger("prevPage",Math.round(this.firstVisibleIndex/a)+1)},nextPage:function(){var a=this.getFullyVisibleThumbsPerPage();this.animateTo(this.firstVisibleIndex+a),this.trigger("nextPage",Math.round(this.firstVisibleIndex/a)+1)},updatePageNavigation:function(){var a=this.$find(".thumbnail-viewer-prev");this.firstVisibleIndex===0?a.addClass("disabled"):a.removeClass("disabled");var b=this.$find(".thumbnail-viewer-next");this.atEnd===!0?b.addClass("disabled"):b.removeClass("disabled");var c=this.$find(".thumbnail-viewer-nav");this.getFullyVisibleThumbsPerPage()>=this.urls.length?c.hide():c.css("display","")},deselect:function(){this.$node.find(".media-thumbnail").removeClass("media-thumbnail-active")},_select:function(a){if(a.length===0)return;this.deselect(),a.addClass("media-thumbnail-active"),this.selectedUrl=a.attr("data-url"),this.trigger("select",[{url:this.selectedUrl,index:a.prevAll().length+1,hasPrev:a.prev().length>0,hasNext:a.next().length>0}])},prev:function(){this.shiftOne("prev")},next:function(){this.shiftOne("next")},shiftOne:function(a){var b=this.getActiveThumbnail()[a]();b.length>0&&(this._select(b),this.trigger(a,[b.prevAll().length+1]),twttr.router.routeTo(b.attr("href")))},getActiveThumbnail:function(){return this.$find(".media-thumbnail-active")},_registerEventHandlers:function(){var a=this;this.$node.delegate(".media-thumbnail","click",function(b){a._select($(this))}),this.$node.delegate(".thumbnail-viewer-prev","click",function(b){a.prevPage()}),this.$node.delegate(".thumbnail-viewer-next","click",function(b){a.nextPage()});if(this.fadeOutNav){this.$nav=this.$find(".thumbnail-viewer-nav").css("opacity",0);var b=Modernizr.csstransitions?"animateWithCss":"animate";this.$node.hover(function(){a.fadeTimer&&clearTimeout(a.fadeTimer),a.$nav[b]({opacity:1},400,"swing")},function(){a.fadeTimer=window.setTimeout(function(){a.$nav[b]({opacity:0},400,"swing")},200)})}}});a(c)})}),provide("components/TheGrid",function(a){using("constants").as(function(b){twttr.klass("twttr.components.TheGrid").subclassOf(twttr.components.Base).initializer(function(a,b){(new twttr.views.TheGrid).render(this.$node,"append"),this.$grid=this.$find(".the-grid"),this.media=[],this.totalCount=0,this.imageWidth=a.imageWidth||150,this.imageHeight=a.imageHeight||150,this.margin=a.margin||10,this.chunksize=a.chunksize||100,this.gridCols=6,this.isEvent=a.isEvent||!1,this.generateItemHref=a.generateItemHref||$.noop,this.provider=a.provider,this.query=a.query,this.mode=a.mode,this.type=a.type,this.screenName=a.screenName,this.filter=a.filter,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.provider.fetch({count:100,score:!0,offset:0,mode:this.mode,query:this.query,is_event:this.isEvent,filter:this.filter,success:twttr.bind(this,this._loadMedia),error:twttr.bind(this,this.renderNoResults)}),this.setCols(b),this._registerEventHandlers()}).methods({setCols:function(a){var b=this.mode==="videos"?this._getWidthVideos(a):this._getWidthPhotos(a);this.$grid.width(b)},_getWidthPhotos:function(a){var b=960;return a>=640&&a<800?b=640:a>=800&&a<960&&(b=800),b},_getWidthVideos:function(a){var b=840;return a>=630&&a<840&&(b=630),b},decrementLoaded:function(){this.totalCount--,this.totalCount==0&&this.trigger("hideLoading")},_doLoad:function(a){var c=this,d=a.length,e=$(),f={width:this.imageWidth,height:this.imageHeight,size:b.constants.imageSizes.medium,scalingMode:"trim",componentName:this._namespace.split(".").pop()};a&&(e=twttr.images.renderProviderMedia(a,f)),e.length&&(e.addClass("grid-square").bind("failedToResolve failedToLoad",function(a,b){var e=$(this).attr("data-url");twttr.images.scribeImageFailure(c.scribbler,"photos",e),$(this).remove(),d--,d==0&&c.renderAndResolve(),c.decrementLoaded()}),this.mode=="videos"&&e.addClass("video").append('<div class="media-play-button"></div>'),e.each(function(){var a=$(this);a.attr("href",c.generateItemHref(a.attr("data-url")))}),e.bind("loaded",function(){d--,d==0&&c.renderAndResolve(),c.decrementLoaded(),twttr.images.animateImageFadeIn($(this).find("img"))}),this.mode=="videos"&&e.addClass("video").append('<div class="media-play-button"></div>'),this.$find(".the-grid").prepend(e))},renderAndResolve:function(){var a=this,b=this.media.splice(0,this.chunksize);b.length>0?this._doLoad(b):this.trigger("hideLoading")},_loadMedia:function(a){this.media=a,this.totalCount=this.media.length,this.$find(".the-grid").empty(),this.media.length>0?this.renderAndResolve():this.renderNoResults()},renderNoResults:function(){(new twttr.views.MediaGalleryNoResults({is_search:this.type==="search",is_usermedia:this.type==="userMedia",query:this.query,mode_photos:this.mode==="photos",mode_videos:this.mode==="videos",screen_name:this.screenName})).render(this.$find(".the-grid"),"append"),this.trigger("hideLoading")},_registerEventHandlers:function(){var a=this;setTimeout(function(){a.trigger("hideLoading")},1e4)}}),a(twttr.components.TheGrid)})}),provide("components/MediaGalleryControls",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.MediaGalleryControls").subclassOf(twttr.components.Base).initializer(function(a){this._options=a||{},this._eventId=a.eventId||!1,this._isEvent=!!this._eventId,this._type=a.type||"search",this._view=a.view||"grid",this._mode=a.mode||"photos",this._query=a.query||"",this.screenName=a.screenName,this._render(),this._registerEvents()}).methods({_registerEvents:function(){var a=this;this.$node.delegate(".media-gallery-back-nav","click",function(b){a.trigger("close")}),this.$detailView=this.$find(".toggle-button.detailview"),this.$gridView=this.$find(".toggle-button.gridview"),this.$detailView.bind("click",function(b){a.setMode("detail")}),this.$gridView.bind("click",function(b){a.setMode("grid")})},setMode:function(a){if(this._view==a)return;a=="grid"?(this.$gridView.addClass("selected"),this.$detailView.removeClass("selected"),this.trigger("gridViewSelected")):(this.$gridView.removeClass("selected"),this.$detailView.addClass("selected"),this.trigger("detailViewSelected")),this._view=a},_render:function(){(new twttr.views.MediaGalleryControls({is_search:this._type==="search",is_usermedia:this._type==="userMedia",screen_name:this.screenName,is_grid_view:this._view==="grid",is_detail_view:this._view==="detail",mode_photos:this._mode==="photos",mode_videos:this._mode==="videos",disable_grid:twttr.decider.isAvailable("disable_gallery_grid"),disable_thumbs:twttr.decider.isAvailable("disable_gallery_thumbs"),back_text:this._isEvent?_("Back to #{{event}}",{event:this._query}):_("Back to search results"),query:this._query})).render(this.$node,"append")}}),a(twttr.components.MediaGalleryControls)})}),provide("components/MediaSlideshow",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.components.MediaSlideshow").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.tweetFlagging,twttr.mixins.profilePopupActionable).initializer(function(a){var b=this;a=a||{},this._media=[],this.options=a,this.width=a.width||530,this.height=a.height||530,this.thumbContainerWidth=a.thumbContainerWidth||494,this.thumbHeight=a.thumbHeight||48,this.thumbWidth=a.thumbWidth||48,this.thumbDisplayWidth=a.thumbDisplayWidth||50,this.thumbDisplayHeight=a.thumbDisplayHeight||48,this.type=a.type,this.screenName=a.screenName,this.options.mode=this.options.mode||"photos",this.showFirstOnFail=this.options.showFirstOnFail||!1,this.arrowOutOpacity=twttr.decider.isAvailable("disable_gallery_thumbs")?.6:0,this.isEvent=a.isEvent||!1,this.generateItemHref=a.generateItemHref||$.noop,this.provider=a.provider,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.scribeComponentName=this.options.mode+"_tweet",this.render(),this.registerTweetActionEvents(),this.provider.fetch({count:100,score:!0,mode:this.options.mode,query:this.options.query,is_event:this.isEvent,filter:a.filter,success:function(a){b.addMedia(a),b.addMediaComplete()},error:twttr.bind(this,this.renderNoResults)})}).methods(twttr.EventProvider).methods({render:function(){(new twttr.views.MediaSlideshow).render(this.$node,"append"),this.$thumbnails=this.$find(".media-slideshow-thumbnails"),this.$bigPicture=this.$find(".media-slideshow-picture"),this.$bigPictureWrapper=this.$find(".media-slideshow-pictures"),this.$mediaContainer=this.$find(".media-slideshow-media-container"),this.$prevButton=this.$find(".media-control-button.prev"),this.$nextButton=this.$find(".media-control-button.next"),this.$nextButton=this.$find(".media-control-button.next"),this.$flagcontainer=$('<div class="flag-container"/>'),this.$bigPicture.css({height:this.height,width:this.width}),this._registerEventHandlers()},renderNoResults:function(){this.$node.empty(),(new twttr.views.MediaGalleryNoResults({is_search:this.type==="search",is_usermedia:this.type==="userMedia",query:this.options.query,mode_photos:this.options.mode==="photos",mode_videos:this.options.mode==="videos",screen_name:this.screenName})).render(this.$node,"append"),this.trigger("hideLoading")},addMediaComplete:function(){var a=this;if(this._media.length>1){var b={itemWidth:this.thumbWidth,itemHeight:this.thumbHeight,itemDisplayWidth:this.thumbDisplayWidth,itemDisplayHeight:this.thumbDisplayHeight,width:this.thumbContainerWidth,generateItemHref:this.generateItemHref,noRender:twttr.decider.isAvailable("disable_gallery_thumbs")};this.options.mode=="videos"&&(b.containsVideos=!0),this._thumbnailViewer=new twttr.components.ThumbnailViewer(this._mediaUrls(),b,this._media),this._thumbnailViewer.$node.appendTo(this.$thumbnails),twttr.decider.isAvailable("disable_gallery_thumbs")&&this._thumbnailViewer.$node.hide(),this._thumbnailViewer.bind("select",function(b,c){a.showPicture(a._findMedia(c.url,c.index),c.hasPrev,c.hasNext,c.index)}),this._thumbnailViewer.bind("failedToLoad",function(b,c){a.removeUrl(c)}),this._thumbnailViewer.bind("next prev",function(b,c){a.scribbler.scribe({component:a.options.mode,action:"page"},{cursor_or_page:c})}),this._thumbnailViewer.bind("nextPage prevPage",function(b,c){a.scribbler.scribe({component:a.options.mode+"_thumbnails",action:"page"},{cursor_or_page:c})}),this.selectUrl(this.options.url)}else this._media.length==1?this.showPicture(a._media[0],!1,!1,1):this.renderNoResults()},_registerEventHandlers:function(){var a=this;this.$nextButton.bind("click",twttr.bind(this,this.showNext)),this.$prevButton.bind("click",twttr.bind(this,this.showPrev)),this.$flagcontainer.delegate(".flaggable","click",function(b){a.flagLinkClicked(b,a.tweet)}),this.$nav=this.$find(".media-control-button").css("opacity",this.arrowOutOpacity);var b=Modernizr.csstransitions?"animateWithCss":"animate";this.$bigPictureWrapper.hover(function(){a.fadeTimer&&clearTimeout(a.fadeTimer),a.$nav[b]({opacity:.6},400,"swing")},function(){a.fadeTimer=window.setTimeout(function(){a.$nav[b]({opacity:this.arrowOutOpacity},400,"swing")},2e3)}),this.$nav=this.$find(".media-control-button").css("opacity",this.arrowOutOpacity),this.$bigPictureWrapper.mouseenter(twttr.bind(this,this._attachMouseMove)),this.$bigPictureWrapper.mouseleave(twttr.bind(this,this._detachMouseMove))},_mouseMoveHandler:function(){var a=this;clearTimeout(this.fadeOutTimer),this.fadeOutTimer=setTimeout(twttr.bind(this,this._fadeOutArrows),b.constants.slideshow.fadeOutArrowTimeout);if(this.fadeInTimer)return;this.fadeInTimer=setTimeout(function(){a._fadeInArrows(.6)},b.constants.slideshow.fadeInArrowTimeout)},_attachMouseMove:function(){var a=this;this.$bigPictureWrapper.bind("mousemove",twttr.bind(this,this._mouseMoveHandler)),a.fadeInTimer=setTimeout(function(){a._fadeInArrows(.6)},b.constants.slideshow.fadeInArrowTimeout)},_detachMouseMove:function(){this.$bigPictureWrapper.unbind("mousemove"),this.fadeInTimer&&(clearTimeout(this.fadeInTimer),this.fadeInTimer=undefined),this._fadeOutArrows()},_fadeInArrows:function(a){var c=Modernizr.csstransitions?"animateWithCss":"animate";this.$nav[c]({opacity:a},b.constants.slideshow.fadeAnimationTime,"swing"),clearTimeout(this.fadeInTimer),this.fadeInTimer=undefined},_fadeOutArrows:function(){var a=Modernizr.csstransitions?"animateWithCss":"animate";this.$nav[a]({opacity:this.arrowOutOpacity},b.constants.slideshow.fadeAnimationTime,"swing")},addMedia:function(a){this._media=this._media.concat(a)},_findMedia:function(a,b){var c=this._media[b-1];if(c&&c.url==a)return c;var d=this._mediaUrls(),e=$.inArray(a,d);return e>=0?this._media[e]:!1},_mediaUrls:function(){return twttr.map(this._media,function(a){return a.url})},selectUrl:function(a){a=a||this._mediaUrls()[0];var b=this._thumbnailViewer.selectByUrl(a);b||(this.showFirstOnFail?this._thumbnailViewer.selectByIndex(0):(this._showNotFound(a),this._thumbnailViewer.deselect(),this._thumbnailViewer.animateTo(0),this._updateArrows(!1,!1)))},removeUrl:function(a){for(var b=0;b<this._media.length;b++)if(this._media[b].url===a){this._media.splice(b,1);break}this.currentUrl===a&&(b==0&&this._mediaUrls().length?this._thumbnailViewer.selectByUrl(this._mediaUrls()[0]):this._showNotFound())},_showNotFound:function(a){this._resetMediaContainer(),(new twttr.views.MediaSlideshowNotFound({})).render(this.$mediaContainer,"append"),this.$mediaContainer.addClass("not-found"),this.trigger("hideLoading")},_resetMediaContainer:function(){return this._removeTweet(),this.$flagcontainer.detach(),this.$mediaContainer.css({top:null}).empty()},_updateArrows:function(a,b){a?this.$prevButton.addClass("enabled"):this.$prevButton.removeClass("enabled"),b?this.$nextButton.addClass("enabled"):this.$nextButton.removeClass("enabled")},showPicture:function(a,b,c,d){if(a&&this.currentUrl!=a.url){this.currentUrl=a.url,this.trigger("showSlideshowLoading"),this.$mediaContainer.removeClass("not-found"),this.options.mode=="photos"?this.renderPicture():this.renderVideo();if(this.tweetFlaggable(a.tweet)){this.$flagcontainer.html("<a href='#' class='flaggable'>"+_("Flag this media")+"</a>");var e=this.$flagcontainer.find(".flaggable");a.tweetId&&e.attr("tweet-id",a.tweetId)}}this._renderMedia(a),this._updateArrows(b,c),this.scribbler.scribe({component:this.options.mode+"_slide",action:"impression"},{url:a.url,cursor_or_page:d})},_removeTweet:function(){this.$find(".media-slideshow-tweet").empty().addClass("loading")},_renderMedia:function(a){var b=this;a.tweet&&a.tweet.entities?this._renderTweet(a.tweet,a.url):a.tweetId&&(this.tweetId=a.tweetId,twttr.API.Status.find(a.tweetId,{success:function(c,d){b._renderTweet(c,a.url)},error:function(){b.trigger("hideLoading")}}))},_renderTweet:function(a,b){this.tweet=a,this._removeTweet(),twttr.isT1?(a.attributes.is_slideshow=!0,(new twttr.views.SimpleTweet(a)).render(this.$find(".media-slideshow-tweet"),"append")):(new twttr.views.SlideshowTweet(a)).render(this.$find(".media-slideshow-tweet"),"append"),this.$find(".media-slideshow-tweet").removeClass("loading");var c=this,d=twttr.media.types.Twimg.matchers.twimg,e=twttr.media.types.Twimg.matchers.media;if(b&&(b.match(d)||b.match(e))&&a&&a.entities&&a.entities.media){var f=a.entities.media.length,g=b.split("/").pop().split(".")[0];for(var i=0;i<f;i++){var j=a.entities.media[i];if(j.display_url.indexOf(g)>=0||j.media_url.indexOf(g)>=0){c.$imageDiv.attr("href",j.url);break}}}this.scribbler.scribe({component:this.options.mode+"_tweet",action:"impression"},{url:a.url,item_ids:[a.id]}),this.trigger("hideTweetLoading")},renderVideo:function(){var a=this,c=twttr.media.matchInstance(this.currentUrl);this._resetMediaContainer();if(!c){this._showNotFound(this.currentUrl);return}c.process(function(){c.render(a.$mediaContainer),setTimeout(function(){a.trigger("mediaRendered"),a.trigger("hideMediaLoading"),a._renderAttribution(a.currentUrl)},1)},{maxwidth:b.constants.slideshow.videoMaxWidth})},renderPicture:function(){var a=this,c;this._resetMediaContainer();var d=twttr.filter(this._media,function(b){if(a.currentUrl==b.url)return b});d&&(d=[d[0]]),this.$imageDiv=twttr.images.renderProviderMedia(d,{width:this.width,height:this.height,size:b.constants.imageSizes.large,scalingMode:"fit",divMode:"snap",componentName:this._namespace.split(".").pop()}).bind("failedToResolve failedToLoad",function(b,c){var d=$(this).attr("data-url");twttr.images.scribeImageFailure(a.scribbler,"photos_slide",d),$(this).remove(),a._showNotFound(a.currentUrl)}).bind("loaded",function(){a.trigger("mediaRendered"),a.trigger("hideMediaLoading"),a._renderAttribution(a.currentUrl),a.renderTwimgAttribution()}).attr("target","_blank"),this.$mediaContainer.append(this.$imageDiv)},_renderAttribution:function(a){var b=twttr.media.matchInstance(a);if(b){var c=$("<div class='media-attribution-and-flag'/>"),d=$(b.attribution()).appendTo(c);if(this.tweetFlaggable(this.tweet)){var e=$(twttr.at(b._namespace).flagActionTemplate);this.$flagcontainer.html(e.html());var f=this.$flagcontainer.find(".flaggable");this.tweetId&&f.attr("tweet-id",this.tweetId),this.$flagcontainer.appendTo(c)}c.appendTo(this.$mediaContainer)}},renderTwimgAttribution:function(){var a=this,b=this.currentUrl.match(twttr.media.types.CopiedTwimg.matchers.media);if(b&&b[1]){var c=b[1];twttr.API.Status.find(c,function(b){var c=b.user.screenName,d=new twttr.views.CopiedTwimgAttribution({screen_name:c,time_ago:twttr.helpers.timeAgo(twttr.helpers.parseDateString(b.createdAt),!0)});a.$imageDiv.append(d.html()).find(".attribution-wrapper").css("display","none").fadeIn("fast"),a.$imageDiv.find(".user-profile-link").click(function(){return twttr.router.routeTo(twttr.router.profilePath({screen_name:c})),!1})})}},resizePicture:function(h,a){var b,c;this.$bigPicture.css({height:h,width:a});if(this.options.mode=="photos")twttr.images.resizeImageInDiv(this.$imageDiv,{width:a,height:h,size:"large",scalingMode:"fit",divMode:"snap"}),b=this.$imageDiv.find("img").width(),c=this._offset(h,this.$imageDiv.height());else{var d=this.$mediaContainer.children().first();b=d.width(),c=this._offset(h,d[0].height)}this.$mediaContainer.css({width:b,top:c})},_offset:function(a,b){return Math.max(0,Math.floor((a-b)/2))},showNext:function(){this._thumbnailViewer&&this._thumbnailViewer.next()},showPrev:function(){this._thumbnailViewer&&this._thumbnailViewer.prev()}}),a(twttr.components.MediaSlideshow)})}),provide("components/SearchFacets",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.SearchFacets").subclassOf(twttr.components.Base).initializer(function(a,b){this.query=a,this.shouldShowBlockMessage=!0,this.darkMode=!1;if(twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_facets_dark")||twttr.decider.isAvailable("phoenix_facets"))||!twttr.loggedIn&&twttr.decider.isAvailable("phoenix_facets_logged_out"))twttr.loggedIn&&!twttr.decider.isAvailable("phoenix_facets")&&twttr.decider.isAvailable("phoenix_facets_dark")&&(this.darkMode=!0),this.renderFacets()}).methods({renderFacets:function(){var a=this,b=twttr.Router.getCurrentQueryStringParams().experimentId;if(!this.darkMode){this.facetsImages=new twttr.components.media.facets.Images({query:this.query,expId:b}),this.facetsVideos=new twttr.components.media.facets.Videos({query:this.query,expId:b}),this.registerEventTracker(),this.facetsImages.bind("urlsLoaded",function(b,c){if(!c||c.length==0){a._scribeResults("photos",c);return}a.facetsImages.$node.appendTo(a.$node),a.shouldShowBlockMessage?a.showBlockedMessage():a.facetsImages.render(),a._scribeResults("photos",c)}),this.facetsImages.bind("failed",function(){a.facetsImages.$node.hide(),a._scribeResults("photos")}),this.facetsVideos.bind("urlsLoaded",function(b,c){if(!c||c.length==0){a._scribeResults("videos",c);return}a.facetsVideos.$node.appendTo(a.$node),a.shouldShowBlockMessage?a.showBlockedMessage():a.facetsVideos.render(),a._scribeResults("videos",c)}),this.facetsVideos.bind("failed",function(){a._scribeResults("videos"),a.facetsVideos.$node.hide()});if(twttr.loggedIn)a.shouldShowBlockMessage=!1,a.hideBlockedMessage();else{var c=twttr.media.getViewMediaCookie();c?(a.renderFacetsMedia(),a.shouldShowBlockMessage=!1):(a.shouldShowBlockMessage=!0,a.renderBlockedMessage())}}},renderFacetsMedia:function(){if(this.darkMode)return;this.facetsImages.render(),this.facetsVideos.render()},showBlockedMessage:function(){this.$notDisplayed||this.renderBlockedMessage(),this.$notDisplayed.show()},hideBlockedMessage:function(){this.$notDisplayed&&this.$notDisplayed.hide()},_scribeResults:function(a,b){var c=b&&b.length?"results":"no_results",d=a+"_search_facets";b=b||[],trackClient({section:"dashboard",component:d,action:c},{item_names:b.slice(0,4),item_count:b.length,event_info:a,query:this.query})},registerEventTracker:function(){function e(e,f){e?b=!0:c=!0,d=d||f&&f.length,allLoaded=b&&c,(b||c)&&a.trigger("urlsLoaded",[!!d,!!allLoaded])}var a=this,b=!1,c=!1,d=!1;this.facetsImages.one("urlsLoaded failed",function(a,b){e(!0,b)}),this.facetsVideos.one("urlsLoaded failed",function(a,b){e(!1,b)})},renderBlockedMessage:function(){var a=this;if(this.$notDisplayed||this.darkMode)return;(new twttr.views.FacetsMediaNotDisplayed).render(this.$node),this.$notDisplayed=this.$node.find(".facets-media-not-displayed"),this.$notDisplayed.hide();var b=twttr.bind(this,function(){this.renderFacetsMedia(),this.$notDisplayed.hide(),twttr.loggedIn||twttr.media.setViewMediaCookie()});this.$node.delegate(".display-this-media","click",b)}});a(c)})}),provide("components/FollowerRequestLink",function(a){using("_","components/Base","multiGlobals/more_views").as(function(b,_){var c=twttr.klass("twttr.components.FollowerRequestLink").subclassOf(b.components.Base).initializer(function(){twttr.currentUser&&twttr.currentUser["protected"]&&twttr.currentUser.friends.pending({success:twttr.bind(this,function(a){this.pendingFriendRequests=a,this.renderRequestButton()}),error:function(a){}}),this.noSpacer=!0,this.hasRendered()}).methods({renderRequestButton:function(){if(!this.pendingFriendRequests||this.pendingFriendRequests.length===0){this.destroy();return}var a;this.pendingFriendRequests.length===1?a=_("{{num}} new follower request",{num:this.pendingFriendRequests.length}):a=_("{{num}} new follower requests",{num:this.pendingFriendRequests.length}),(new twttr.views.DashboardFollowerRequestLink({button_label:a,screen_name:twttr.currentUser.screenName})).render(this.$node,"append")}});twttr.isT1&&c.setBaseView(twttr.views.Module),a(c)})}),provide("components/WebPersonalizationSettings",function(a){using("_","components/Base","mixins/userActionable","mixins/profilePopupActionable").as(function(b,_){var c=twttr.klass("twttr.components.WebPersonalizationSettings").subclassOf(b.components.Base).mixin(b.mixins.userActionable,b.mixins.profilePopupActionable).initializer(function(){var a=this;twttr.inEU||twttr.doNotTrack?(a._render({in_eu:twttr.inEU,do_not_track:!0}),a.trigger("disallow")):twttr.loggedIn?(a._hasAllowed=!1,a._render({loading:!0}),twttr.currentUser.personalizationSettings({success:function(b){!b.cookie_personalization_prompt_displayed||!b.use_cookie_personalization?a._render({show_results:!1}):(a._render({show_results:!0,results_loading:!0}),a._displayResults())},error:function(){twttr.showError(_("We can&#8217;t show you tailored suggestions at this time. Please try again later.")),a.trigger("disallow")}})):a._render({show_results:!1}),this.registerUserActionEvents()}).methods({_render:function(a){a=a||{},a.users&&(a.results=new twttr.views.WebPersonalizationResults(a.users)),(new twttr.views.WebPersonalizationSettings(a)).render(this.$node.empty())},_allow:function(){var a=this;a._render({show_results:!0,results_loading:!0}),a._hasAllowed=!0,this._updateSettings(!0,function(b){b?(twttr.showError(_("We&#8217;re not able to set your preference at this time. Please try again later.")),a._render({show_results:!1})):a._displayResults()})},_disallow:function(){var a=this;twttr.loggedIn?twttr.showError(_("Thanks. We&#8217;ve set your preference. This will go into effect on other browsers once you log into Twitter on that browser.")):twttr.showMessage(_("Thanks. We&#8217;ve set your preference.")),a._render({show_results:!1}),this._updateSettings(!1,function(b){b?(twttr.showError(_("We&#8217;re not able to set your preference at this time. Please try again later.")),a._render({show_results:a._hasAllowed,results_loading:!a._users,users:a._users})):a.trigger("disallow")})},_displayResults:function(){var a=this;this._render({show_results:!0,results_loading:!0}),twttr.API.User.recommendedUsers2({personalized:!0,force_bq:!0,limit:60,success:function(b,c){var d=b.map(function(a){return a.user});a._users=d,a._render({users:d,show_results:!0}),trackClient({component:"user_recommendations",element:"initial",action:"results"},{item_count:d.length()||0}),d.length()||trackClient({component:"user_recommendations",element:"initial",action:"no_results"},{item_count:0})},error:function(){twttr.showError(_("We can&#8217;t show you tailored suggestions at this time. Please try again later."))}})},_updateSettings:function(a,b){twttr.loggedIn?twttr.currentUser.updatePersonalizationSettings({use_cookie_personalization:a,cookie_personalization_prompt_displayed:!0},{error:function(){b("error :(")},complete:function(){b()}}):a?b():$.ajax({type:"POST",dataType:"json",url:"/account/turn_off_cookie_personalization.json",data:{authenticity_token:twttr.API.getConfig().postAuthenticityToken},complete:function(){b()},error:function(){b("error :(")}})}}).click({".js-web-personalization-allow":function(a,b){this._allow(),trackClient({element:"allow",action:"click"})},".js-web-personalization-disallow":function(a,b){this._disallow(),trackClient({element:"disallow",action:"click"})},".js-web-personalization-turnoff":function(a,b){this._disallow(),trackClient({element:"turnoff",action:"click"})},".js-web-personalization-signup .signup-btn":function(a,b){trackClient({section:"signup_callout",component:"form",action:"signup_click"})}});a(c)})}),provide("photo/turkey",function(a){using().as(function(b){twttr.provide("twttr.turkey",{tweetBoxId:1,imageMaxDim:2048,turkeyCallbacks:{},swfCallbacks:{},swfErrorCallbacks:{},swfPath:"/phoenix/flash/PhotoHelper.swf",swfPreloaded:!1,errorTypes:{tooLarge:"tooLarge",notImage:"notImage",ioError:"ioError",maxFiles:"maxFiles",dupe:"duplicate"},getTweetBoxId:function(){return twttr.turkey.preloadSwf(),"tweetbox_"+this.tweetBoxId++},getFileName:function(a){if(a.indexOf("/")==-1&&a.indexOf("\\")==-1)return a;var b=a.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/);return b[2]},validatePhoto:function(a){return/(.*)\.(jpg|jpeg|png|gif)/i.test(a)},getThumbnailOffsets:function(h,a,b){var c={};if(a==h)return{height:b,width:b,left:0,top:0};if(h<b||a<b)h<b&&a<b?(c.top=(b-h)/2,c.left=(b-a)/2):a>h?c.top=(b-h)/2:c.left=(b-a)/2;else if(a>h){var d=b/h*a;c={height:b,width:d,left:-(d-b)/2,top:0}}else if(h>a){var e=b/a*h;c={height:e,width:b,top:-(e-b)/2,left:0}}return c},hasFileReader:function(){try{return twttr.is.object(new FileReader)}catch(a){return!1}},resizeImage:function(a,b){var c=new FileReader;c.onerror=function(){b(!1)},c.onload=function(a){var c=new Image,d=document.createElement("canvas"),e=d.getContext("2d");c.onload=function(){if(c.width<twttr.turkey.imageMaxDim&&c.height<twttr.turkey.imageMaxDim){b(a.target.result.split(";base64,")[1]);return}var f,h;c.width>c.height?(f=twttr.turkey.imageMaxDim,h=c.height/c.width*twttr.turkey.imageMaxDim):(h=twttr.turkey.imageMaxDim,f=c.width/c.height*twttr.turkey.imageMaxDim),d.width=f,d.height=h,e.drawImage(c,0,0,f,h);var g=d.toDataURL("image/jpeg");b(g.split("data:image/jpeg;base64,")[1])},c.onerror=function(){b(!1)},c.src=a.target.result},c.readAsDataURL(a)},hasFlash:function(){try{return $.flash.available&&$.flash.hasVersion(10)}catch(a){return!1}},shouldUseFlash:function(){return!twttr.turkey.hasFileReader()&&twttr.turkey.hasFlash()&&twttr.decider.isAvailable("phoenix_turkey_flash")},tweetboxMode:function(){return twttr.turkey.hasFileReader()?"html5":twttr.turkey.shouldUseFlash()?"flash":"html4"},preloadSwf:function(){if(twttr.turkey.swfPreloaded||!twttr.turkey.shouldUseFlash())return;$node=twttr.turkey.loadSwf($("#flash-object-container"),0),setTimeout(function(){$node&&$node.remove()},1e3)},loadSwf:function(a,b){return a.flash({swf:twttr.turkey.swfPath,height:25,width:28,wmode:"transparent",AllowScriptAccess:"sameDomain",flashvars:{tweetBoxId:b}}),a.find("object")},shouldShowTurkeyPrompt:function(){return twttr.promptbird.getPromptByFormat(["modal"])},dismissShowTurkeyPrompt:function(a){var b={prompt_id:a},c={success:$.noop};twttr.API.Promptbird.dismissPrompt(b,c),delete twttr.promptbird.cache},showFirstTimeTurkey:function(){if(twttr.loggedIn){var a=this;using("boot/bootstrap_data",function(b){var c=a.shouldShowTurkeyPrompt();if(c&&c.prompt.format==="modal"&&c.prompt.template_name=="first_time_turkey"){a.dismissShowTurkeyPrompt(c.prompt.prompt_id);var d=600,e=new twttr.widget.Dialog({view:"FirstTimeTurkey",modal:!0,draggable:!1,css:{width:530},positioning:{top:twttr.$win.height()<=d?20:150}});e.$container.find(".button.ok-thanks").bind("click",function(a){a.preventDefault(),a.stopPropagation(),e.destroy()}),e.open()}})}}}),a(twttr.turkey)})}),provide("photo/photo_thumbnails",function(a){using("_").as(function(b,_){twttr.klass("twttr.turkey.PhotoThumbnails").subclassOf(twttr.components.Base).deciderKey("turkey").initializer(function(a,b,c,d){this.FILE_SIZE_LIMIT=3145728,this.TIMEOUT_BY_BYTES=10240,this.defaultTimeoutDelay=12e4,this.timeoutDelay=this.defaultTimeoutDelay,this.maxFiles=1,this.useIframe=!1,this.enabled=!0,this.files=[],this.$selectedFiles=b,this.$camera=c,this.$swf=this.$camera.find(".swf"),this.tweetBoxId=d,this.editor=a,this.$thumbsWrapper=$("<div/>").addClass("twitter-media-thumbs"),this.$thumbsWrapper.appendTo(this.editor.$container),this.thumbnailsMessage=_("Images will appear as links"),this.thumbnailMessage=_("Image will appear as a link"),this.$thumbnailMessage=$("<div/>").addClass("media-thumbnails-message"),this.$thumbnailMessage.appendTo(this.$thumbsWrapper),this.maxPhotosMessage=_("Maximum number of images reached."),this.addPhotoMessage=_("Add an image"),this.hasFileReader=twttr.turkey.hasFileReader(),this.shouldUseFlash=twttr.turkey.shouldUseFlash(),this.html4Mode=!this.hasFileReader&&!this.shouldUseFlash,this.$editorTextarea=this.editor.$container.find("textarea"),this.textareaPaddingBottom=this.$editorTextarea.css("padding-bottom"),this.createThumbnails(),this.createTipsy()}).methods(twttr.EventProvider).methods({animateShow:function(a){var b=this;this.html4Mode?(this.$editorTextarea.css("padding-bottom",a),this.editor.$container.addClass("has-thumbnails"),this.$camera.addClass("has-turkeys"),this.$thumbsWrapper.show()):(this.$camera.addClass("has-turkeys"),this.$editorTextarea.animate({paddingBottom:a},300,"linear",function(){b.editor.$container.addClass("has-thumbnails"),b.$thumbsWrapper.show()}))},animateHide:function(a,b){var c=this;this.editor.$container.removeClass("has-thumbnails").addClass("closing"),!this.html4Mode&&!b?(this.$camera.removeClass("has-turkeys"),this.$editorTextarea.animate({paddingBottom:a},200,"linear",function(){c.editor.$container.removeClass("has-thumbnails").removeClass("closing")})):(this.$editorTextarea.css("padding-bottom",a),this.$camera.removeClass("has-turkeys")),this.$thumbsWrapper.hide()},updateEmptyFeedback:function(){this.inst.$feedback.text()==""&&this.updateFeedback()},tweet:function(a,b){var c=this,d={};this.useIframe&&(d.iframe_callback="window.top.twttr.turkey.turkeyCallbacks."+this.tweetBoxId);switch(a){case"update":d.status=b[0],$.extend(d,b[1]);break;case"reply":d.status=b[1],d.in_reply_to_status_id=b[0],$.extend(d,b[2])}this.useIframe?this.tweetIframe(d):this.tweetAjax(d)},tweetAjax:function(a){var b=this;a["media_data[]"]=this.files[0].input.val(),a.timeout=$.noop;var c=a.error;a.error=function(a){c(a),b.scribeEvent("failure",{message:"serverError"})};var d=a.success;a.success=function(a){d(a,twttr.turkey.tweetboxMode())},twttr.API.Status.updateWithMedia(a.status,a)},tweetIframe:function(a){var b=this,c=setTimeout(function(){twttr.turkey.turkeyCallbacks[b.tweetBoxId]=$.noop,a.error({error:!0,response:{error:"Tweeting a photo timed out."}}),a.complete(),b.scribeEvent("failure",{message:"timeout",duration_ms:b.timeoutDelay})},this.timeoutDelay);twttr.turkey.turkeyCallbacks[this.tweetBoxId]=function(d){if(d.error){var e={error:!0,status:500,response:d,reason:"An error occured"};a.error(e),a.complete(),clearTimeout(c),b.scribeEvent("failure",{message:"serverError"})}else a.success(d,twttr.turkey.tweetboxMode()),a.complete(),clearTimeout(c)},this._submitTweetOptions(a)},_submitTweetOptions:function(a){this.resetForm();for(var b in a)!twttr.is.fn(a[b])&&!twttr.is.object(a[b])&&$('<input type="hidden" reset="true"/>').attr("name",b).attr("value",a[b]).appendTo(this.$selectedFiles);this.$selectedFiles.submit()},resetForm:function(){this.$selectedFiles.find("input[reset='true']").remove()},enable:function(){this.files.length>0&&this.animateShow(this.getPadding(this.files.length)),this.$camera.show(),this.enabled=!0},disable:function(){this.files.length>0&&this.animateHide(this.getPadding(0)),this.$camera.hide(),this.enabled=!1},hasItems:function(){return this.files.length>0&&this.enabled},count:function(){return this.files.length},hasDuplicate:function(a){for(var b=0;b<this.files.length;b++)if(this.files[b].input.value==a.value)return!0;return!1},getPadding:function(a){return a===0?this.textareaPaddingBottom:this.html4Mode?12+25*a+2*(a-1):60},checkFiles:function(){var a=this.files.length;a>=this.maxFiles?(this.$camera.addClass("max-turkeys"),this.editor.trigger("heightChange"),this.destroySwf()):(this.$camera.removeClass("max-turkeys"),this.editor.trigger("heightChange"),this.createSwf());var b=this.getPadding(a);a>0?(this.animateShow(b),a==1?this.$thumbnailMessage.text(this.thumbnailMessage):this.$thumbnailMessage.text(this.thumbnailsMessage)):this.animateHide(b),this.trigger("photoChanged")},removeAllFiles:function(){$.each(this.files,function(a,b){$(b.input).remove(),b.item.remove()}),this.files=[]},removeFile:function(a){var b=this;$(a.input).remove(),a.item.remove();var c=$.inArray(a,b.files);c!=-1&&b.files.splice(c,1),b.checkFiles(),this.scribeEvent("remove")},hasMaxFiles:function(){return this.files.length>=this.maxFiles},addFileError:function(a,b){this.killTipsy();if(a==twttr.turkey.errorTypes.tooLarge)twttr.showError(_("The file you selected is greater than the 3MB limit."));else if(a==twttr.turkey.errorTypes.notImage||a==twttr.turkey.errorTypes.ioError)twttr.showError(_("You did not select an image"));else if(a==twttr.turkey.errorTypes.maxFiles){var c;this.maxFiles===1?c=_("Can only tweet one image at a time."):c=_("Cannot tweet more than {{numberOfPhotos}} images at a time.",{numberOfPhotos:this.maxFiles}),twttr.showError(c)}else a==twttr.turkey.errorTypes.dupe&&twttr.showError(_("You already selected this file"));this.scribeEvent("failure",{message:a})},killTipsy:function(){this.$camera.data("tipsy")&&this.$camera.data("tipsy").$tip&&this.$camera.data("tipsy").$tip.hide()},scribeEvent:function(a,b){var c=b?b:{};c.context="photo_uploader",c.event_info=twttr.turkey.tweetboxMode(),trackClient({component:"tweetbox",action:a},c)},createThumbnailImage:function(a,b,c){var d=this,e=$("<img/>").attr("alt",a);return e.appendTo(c.item),e.bind("load",function(){var a=twttr.turkey.getThumbnailOffsets(e[0].height,e[0].width,55);e.css(a),c.item.find(".upload-file-close").bind("click",function(a){a.stopPropagation(),a.preventDefault(),d.removeFile(c)}),c.item[Modernizr.csstransitions?"animateWithCss":"animate"]({opacity:100},200,Modernizr.csstransitions?"default":"linear"),d.checkFiles()}),e.attr("src",b),e},createThumbnail:function(){var a;return this.html4Mode?a=$('<div class="upload-file upload-filename">        <span class="filename"></span><a href="#" class="thumbnail-close upload-file-close"><span></span></a>        </div>'):a=$('<div class="upload-file upload-thumbnail">        <a href="#" class="thumbnail-close upload-file-close"><span></span></a>        </div>').css({opacity:0}),a.appendTo(this.$thumbs),a},addFileItem:function(a,b){var c={input:a,item:b};return this.files.push(c),this.$selectedFiles.append(a),this.resetAddPhoto(),this.scribeEvent("add"),this.checkFiles(),c},addFileData:function(a,b,c){this.setTimeoutBySize(a.length);var d=$('<input type="hidden" maxlength="'+this.FILE_SIZE_LIMIT+'" name="media_data[]"/>');d.val(a);var e=this.createThumbnail(),f=this.addFileItem(d,e),g=this.createThumbnailImage(c,"data:image/jpeg;base64,"+b,f);this.killTipsy()},addFileInput:function(a){var b=this,c=this.createThumbnail(),d=this.addFileItem(a,c);if(this.hasFileReader&&a.files){var e=a.files[0];this.setTimeoutBySize(e.size);var f=new FileReader;f.onloadend=function(c){var e=c.target.result,f=b.createThumbnailImage(twttr.turkey.getFileName(a.value),e,d)},f.readAsDataURL(e)}else twttr.helpers.ellipsify(c.find(".filename").text(twttr.turkey.getFileName(a.value))),c.find(".upload-file-close").bind("click",function(a){a.stopPropagation(),a.preventDefault(),b.removeFile(d)}),this.inst&&this.inst.setFeedback(this.tweetboxFeedback)},addFile:function(a){var b=this;if(this.hasMaxFiles()){this.addFileError(twttr.turkey.errorTypes.maxFiles);return}if(!twttr.turkey.validatePhoto(a.value)){this.addFileError(twttr.turkey.errorTypes.notImage);return}if(this.hasDuplicate(a)){this.addFileError(twttr.turkey.errorTypes.dupe);return}var c;a.files&&a.files[0]&&(c=a.files[0]);var d=function(c){c?b.addFileData(c,c,twttr.turkey.getFileName(a.value)):b.addFileError(twttr.turkey.errorTypes.notImage)};if(c)if(!twttr.decider.isAvailable("phoenix_turkey_html5_resize")||!this.hasFileReader){if(!this.checkFileSize(c)){this.addFileError(twttr.turkey.errorTypes.tooLarge);return}this.useIframe=!0,this.addFileInput(a)}else twttr.turkey.resizeImage(c,d);else this.useIframe=!0,this.addFileInput(a);this.killTipsy()},checkFileSize:function(a){return!twttr.is.def(a.size)||a.size<=this.FILE_SIZE_LIMIT},getTimeoutBySize:function(a){var b=Math.ceil(a/this.TIMEOUT_BY_BYTES*1e3);return b<this.defaultTimeoutDelay?this.defaultTimeoutDelay:b},setTimeoutBySize:function(a){this.timeoutDelay=this.getTimeoutBySize(a)},resetPhotoPost:function(){this.useIframe=!1,this.$selectedFiles.empty();var a=twttr.API.getConfig().postAuthenticityToken;$('<input type="hidden" name="post_authenticity_token" value="'+a+'"/>"').appendTo(this.$selectedFiles),$('<input type="hidden" name="include_entities" value="true"/>').appendTo(this.$selectedFiles)},reset:function(){this.removeAllFiles(),this.$camera.removeClass("max-turkeys"),this.editor.trigger("heightChange"),this.animateHide(this.getPadding(0),!0),this.timeoutDelay=this.defaultTimeoutDelay},createThumbnails:function(){var a=this;this.$thumbs=$("<div class='media-thumbnails' />"),this.$thumbs.prependTo(this.$thumbsWrapper),this.html4Mode&&this.editor.$container.addClass("html4"),this.resetPhotoPost(),this.resetAddPhoto(),this.createSwf()},destroySwf:function(){if(!this.shouldUseFlash)return;this.$swf.empty()},createSwf:function(){if(!this.shouldUseFlash)return;var a=this;setTimeout(function(){twttr.turkey.swfErrorCallbacks[a.tweetBoxId]=twttr.bind(a,a.addFileError),twttr.turkey.swfCallbacks[a.tweetBoxId]=twttr.bind(a,a.addFileData),twttr.turkey.loadSwf(a.$swf,a.tweetBoxId)},500)},createTipsy:function(){var a=this;this.$camera.tipsy({gravity:"nw",fade:!0,opacity:.9,title:twttr.bind(this,this.getTipsyTitle)}),this.$camera.click(function(){setTimeout(function(){a.$camera.data("tipsy")&&a.$camera.data("tipsy").hide()},750)})},getTipsyTitle:function(){return this.files.length>=this.maxFiles?"":this.addPhotoMessage},resetAddPhoto:function(){var a=this;this.$camera.find('input[type="file"]').remove();var b=$('<input type="file" class="turkey-file-input" name="media[]"></input>');this.$camera.append(b),b.bind("change",function(b){a.addFile(b.target)}),this.$camera.bind("click",function(){a.scribeEvent("click")})},remove:function(){this.$thumbsWrapper.remove()}}),a(twttr.turkey.PhotoThumbnails)})}),provide("images",function(a){using().as(function(b){twttr.images={renderProviderMedia:function(a,b){var a=a.concat(),c=twttr.images.generateDivs($.map(a,function(a){return a.url}),b);this.bindLoadImageHandler(c,b.componentName);var d=function(a,b){setTimeout(function(){a.trigger("failedToResolve",[b])},0)};return $.each(a,function(a,e){var f=$(c[a]);e.mediaType.getImageURL(b.size,function(a){a?twttr.images.scaleImageIntoDiv(f,a,b):d(f,"getImageUrl did not return a resolvedURL")},b.dimension)}),c},renderMediaUrls:function(a,b,c){var d=twttr.images.generateDivs(a,b);this.bindLoadImageHandler(d,b.componentName);var e={success:function(a,c){twttr.images.scaleImageIntoDiv(a,c,b)},error:function(a,b){setTimeout(function(){a.trigger("failedToResolve",[b])},0)}};return twttr.images.resolveDataUrls(d,b,e,c),d},animateImageFadeIn:function(a,b,c){var d=Modernizr.csstransitions?"animateWithCss":"animate";a.css("opacity",0),a[d]({opacity:c||1},b||500,"swing")},renderMediaUrl:function(a,b,c){return this.renderMediaUrls([a],b,c)},generateDivs:function(a,b){var c=$(),d=b.thumbnailViewClass||twttr.views.Thumbnail;return $.each(a,function(a,e){var f=$((new d({url:e,width:b.width,height:b.height,lineHeight:b.height+"px"})).html());c=c.add(f)}),c},bindLoadImageHandler:function(a,b){var c=this;a.bind("loadImage",function(){var a=$(this);if(a.data("loaded")===!0)return;var d=a.data("resolvedUrl"),e=a.data("childImg");if(d&&e){if(twttr.decider.isAvailable("profile_image_latency")){var f=twttr.media.matchInstance(a.data("url")),g=new twttr.Profiler(c.createProfilingDescription(f.partnerName,d,b));$(e[0]).load(function(){g.done()})}e[0].src=d,a.data("loaded",!0)}else a.data("loadWhenResolved",!0)})},createProfilingDescription:function(a,b,c){return c=c?c:"",[a.toLowerCase(),JSON.stringify(b),c.toLowerCase()].join(".")},resolveDataUrls:function(a,b,c,d){a.each(function(a,e){var f=$(e),g=f.attr("data-url")||e.href;twttr.media.resolveImageUrl(g,b.size,{success:function(a){c.success&&c.success(f,a)},error:function(a){c.error&&c.error(f,a)},tweet:d,filter:b.filter},b.dimension)})},scaleImageIntoDiv:function(a,b,c){b=b.replace(/([^:])\/\//g,"$1/");var d=$("<img/>").addClass("scaled-image");d.bind("load",function(){var b=twttr.images.calculateScaleDimensions({containerWidth:c.width,containerHeight:c.height,itemWidth:this.width,itemHeight:this.height,scalingMode:c.scalingMode});d.attr({origHeight:this.height,origWidth:this.width}),c.divMode==="snap"?a.css(b).css("line-height",b.height+"px"):(d.css(b),d.css({top:Math.floor(c.height/2-b.height/2),left:Math.floor(c.width/2-b.width/2)})),setTimeout(function(){d.appendTo(a.find("div.thumbnail-wrapper")),twttr.images.addPrivacyCover(d),a.trigger("loaded")},0)}).bind("error",function(){a.trigger("failedToLoad")}),a.data("resolvedUrl",b).data("childImg",d),(!c.delayLoading||a.data("loadWhenResolved"))&&a.trigger("loadImage")},resizeImageInDiv:function(a,b){if(!a)return;var c=a.find("img.scaled-image");if(c.length==0)return;var d=twttr.images.calculateScaleDimensions({containerWidth:b.width,containerHeight:b.height,itemWidth:parseInt(c.attr("origWidth"),10),itemHeight:parseInt(c.attr("origHeight"),10),scalingMode:b.scalingMode});c.attr(d).trigger("resize"),b.divMode==="snap"?a.css(d).css("line-height",d.height+"px"):c.css({top:Math.floor(b.height/2-d.height/2),left:Math.floor(b.width/2-d.width/2)})},calculateScaleDimensions:function(a){function j(){return{width:e,height:d}}function k(){return{width:c,height:d/g}}function l(){return{width:e/i,height:b}}var b=a.containerHeight,c=a.containerWidth,d=a.itemHeight,e=a.itemWidth,f=a.scalingMode,g=e/c,i=d/b;switch(f){case"fit":return g<1&&i<1?j():g>i?k():l();case"trim":return g<1||i<1?j():g>i?l():k();default:return{width:c,height:b}}},addPrivacyCover:function(a,b){if(a.length<=0||!twttr.decider.isAvailable("prevent_right_click_on_images"))return;var c=function(){var b=a[0],d=d||a.parent();d.find(".cover").remove(),d.addClass("has-cover").height(b.height).width(b.width),d.closest(".media-instance-container").width(b.width),$("<div/>",{"class":"cover",height:b.height,width:b.width}).appendTo(d),a.bind("resize",c)},d=0,e=function(){a[0].complete===!0?setTimeout(c,0):(a.bind("load",function(){setTimeout(c,0)}),d<10&&setTimeout(e,500),d++)};e()},SCRIBABLE_PROVIDERS:["dailybooth","flickr","instagram","lockerz","photobucket","twimg","twitpic","yfrog","youtube"],scribeImageFailure:function(a,b,c){if(!twttr.decider.isAvailable("scribe_image_failures"))return;var d=twttr.media.match(c);if(d&&d.partnerName){var e=d.partnerName.toLowerCase();$.inArray(e,this.SCRIBABLE_PROVIDERS)&&a.scribe({component:b,action:"third_party_error"},{url:c,event_info:e})}}},a(twttr.images)})}),provide("components/ContactImportLauncher",function(a){using("externalOauthPopup").as(function(b){twttr.klass("twttr.components.ContactImportLauncher").subclassOf(twttr.components.Base).initializer(function(a){var b=this;this.bind("addedToPage",function(){if(!twttr.decider.isAvailable("contact_import"))return;twttr.API.AddressBook.contactsServices({success:function(c){if(!c||!c.length){b.trigger("notRendered","no_items");return}(new twttr.views.DashboardContactImport({services:c,compact:a})).render(b.$node,"append"),b.$node.delegate(".service-link","click",function(a){b.launchService($(this))}),b.trigger("servicesLoaded")},error:function(){b.trigger("notRendered","darkmoded")}})})}).methods({launchService:function(a){var c=a.attr("data-url"),d=a.attr("data-width"),e=a.attr("data-height");if(c){a.attr("data-popup")=="true"?b.externalOauthPopup({url:c,width:d,height:e,callbackUrl:twttr.router.whoToFollowImportMatchesPath()}):window.open(c,"_blank").focus();var f=a.find("strong.service-name").attr("data-service-id");trackClient({section:"dashboard",component:"contact_import_launcher",action:"launch_service"},{event_info:f,context:"import"})}}}),a(twttr.components.ContactImportLauncher)})}),provide("streams/ListStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.ListStream",function(a,b){this._cursor=-1,twttr.streams.Stream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent,twttr.loggedIn&&!twttr.isT1&&this._registerUpdateStreamEvent(twttr.API.List,"follow unfollow",function(a,b){return b.sync("following",a.type==="follow"),b})}).subclassOf(twttr.streams.Stream).methods({itemViewClass:"StreamList",streamItemType:"list",streamItemId:function(a){return a.uri},rerenderItem:function(a,b){var c=this.selectedItem(a);c.length===0&&(c=this.$find("div.js-list[data-list-id='"+a+"']").closest(".js-stream-item")),c.replaceWith(this._renderItemHtml(b))},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("list_streams")||this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}twttr.API.User.find(this.screenName)[this.API_METHOD]({cursor:this._cursor,success:function(c,d){b._cursor=d.response.next_cursor,b.push(c.array),a(b,twttr.streams.SUCCESS),b._cursor||b.reachedTheEnd()},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}})},_scribeResults:function(a,b,c){this._scribeEmptyResults(a,b,c);if(b.length){var d=twttr.map(b,function(a){return a.fullName});this.scribbler.scribe({component:"stream",action:"results"},{item_names:d,item_count:d.length,event_value:d.length,referring_event:a})}}});a(c)})}),provide("streams/OwnListsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.OwnLists",function(a,b){twttr.streams.ListStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"lists",_setTitle:function(a){this.stream_user_is_current_user()?a(_("Your lists")):a(_("{{username}}'s lists",{username:this.screenName}))},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You haven't created any lists yet."):_("@{{screen_name}} hasn't created any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"create",b),this._registerRemoveFromStreamEvent(twttr.API.List,"delete",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}).statics({_deciderKey:"list_stream_own_lists"});a(c)})}),provide("streams/SubscriptionsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Subscriptions",function(a,b){twttr.streams.ListStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent,this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"subscriptions",_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following any lists yet."):_("@{{screen_name}} isn't following any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"unfollow",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}).statics({_deciderKey:"list_stream_subscriptions"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!1))},_setHeaderButton:function(a,b){a(new twttr.views.CreateListButton)}}):c.methods({_setTitle:function(a){a(_("Lists {{username}} follows",{username:this.screenName}))}}),a(c)})}),provide("streams/MembershipsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Memberships",function(a,b){twttr.streams.ListStream.apply(this,arguments)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"memberships",_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't listed yet."):_("@{{screen_name}} isn't listed yet.",{screen_name:this.screenName})}}).statics({_deciderKey:"list_stream_memberships"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!0))},_setHeaderButton:function(a,b){twttr.helpers.isCurrentUser(b.screenName)&&a(new twttr.views.CreateListButton)}}):c.methods({_setTitle:function(a){a(_("Lists following {{username}}",{username:this.screenName}))}}),a(c)})}),provide("streams/MembershipsStreamUser",function(a){using("_","streams/MembershipsStream").as(function(b,_){var c=twttr.stream("twttr.streams.MembershipsUser",function(a,b){twttr.streams.Memberships.apply(this,arguments)}).subclassOf(twttr.streams.Memberships).methods({_setViewToggler:function(a,b){a(new twttr.views.ProfileListsStreamViewToggler(!1,{screen_name:b.screenName}))}});a(c)})}),provide("multiGlobals/trackSession",function(a){var b={};b._maxLength=1e3,b._cookieName="session_buffer",b._defaultJson="[]",b._getStorage=function(){var a=$.cookie(b._cookieName)||b._defaultJson,c;try{c=JSON.parse(a)}catch(d){c=JSON.parse(b._defaultJson)}return c},b._setStorage=function(a){var c=JSON.stringify(a);if(c.length>b._maxLength){var d=Math.floor(a.length/2);a.splice(d,a.length),c=JSON.stringify(a)}$.cookie(b._cookieName,c)},b._setSession=function(a){var c=b._getStorage();c=$.grep(c,function(b){return a.key!==b.key}),c.unshift(a),b._setStorage(c)},b._extractSessions=function(a){var c=b._getStorage(),d=[];return c=$.grep(c,function(b){return $.inArray(b.key,a)>-1?(d.unshift(b),!1):!0}),b._setStorage(c),d},b.start=function(a,c){c=c||{},b._setSession({key:a,data:c});var d={component:a,action:"session_start"};trackClient(d,c)},b.stop=function(a,c){"string"==typeof a&&(a=[a]);var d=b._extractSessions(a);$.each(d,function(a,b){var d={component:b.key,action:"session_stop"};trackClient(d,b.data),c&&c(b)})},window.startTrackSession=b.start,window.stopTrackSession=b.stop,a(b)}),provide("streams/SuggestionCategoriesStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoriesStreamT1":"","mixins/discoveryHelper").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoriesStream",function(a,b){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments),this.$node.addClass("suggestion-categories");var c=this;this.$node.delegate("div[data-item-type=suggestion_category]","click",function(a){var b=$(this).attr("data-item-id"),d={};return d[b]={item_position:$("div.js-stream-manager-container div.js-stream-item").index($(a.target).closest(".js-stream-item"))},b&&(trackClient({component:"suggestion_category",action:"click"},{step:"interests",query:b,item_details:d}),c.routePageTo(c.params.pathRoot,"InterestsCategory",{category:b})),!1})}).subclassOf(twttr.streams.Stream).statics({cacheCategories:function(a){this.CATEGORIES=a,this.CATEGORY_MAP=this.buildCategoryMap(a)},buildCategoryMap:function(a){return a.reduce({},function(a,b){return a[b.slug]=b,a})},filterTopTweetsCategories:function(a){var b=this.buildCategoryMap(a);return a.filter(function(a){if(a.slug.match(/^(.+)[_-]top-tweets$/i)){var c=b[RegExp.$1];return c&&(c.topTweetsCategory=a),!1}return!0})}}).methods({itemViewClass:"StreamSuggestionCategory",streamItemType:"suggestion_category",sampleSize:"",streamItemId:function(a){return a.slug},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},addTipsies:function(){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("suggestion_categories_streams")){a(this,twttr.streams.DECIDER);return}var c={sample_size:this.sampleSize,samples:!0,success:function(c){c=b.constructor.filterTopTweetsCategories(c),b.constructor.cacheCategories(c);var d=c.map(function(a){var c,d;return a.topTweetsCategory&&a.topTweetsCategory.sample&&(d=a.topTweetsCategory.sample.shift())&&(c=d.id),a.clone({category_link:b.pagePathFor(b.params.pathRoot,"InterestsCategory",{category:a.slug}),category_top_tweets_user_id:c,category_top_tweets_is_current_user:!!twttr.currentUser&&twttr.currentUser.id==c,following_category_top_tweets:a.topTweetsCategory?a.topTweetsCategory.followingTopTweets:null})});b.push(d.array),a(b,twttr.streams.SUCCESS),b.addTipsies(),b.reachedTheEnd();var e=c.map(function(a,b){return a.name});b.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length()})},error:function(){a(b,twttr.streams.ERROR)}};b.defaultOpts&&(c=twttr.merge(b.defaultOpts,c)),b.params.lang&&(c.lang=b.params.lang),b.params.country&&(c.country=b.params.country),b.params.city&&(c.city=b.params.city),c.top_tweets=!0,twttr.API.SuggestionCategory.getAll(c)},_setTitle:function(a){this.params.title!==undefined?a(this.params.title):a(_("Select the topics you are interested in. Find a few people you want to hear from, then follow them."))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(this.constructor.CATEGORIES,this.params.pathRoot)},_getStreamEndComponent:function(){return this._getHeaderComponent()}}).mixin(twttr.mixins.discoveryHelper);c&&d.mixin(c),a(d)})}),provide("streams/SuggestionCategoryMembersStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoryMembersStreamT1":"").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoryMembersStream",function(a,b){var c=this;a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.UserStream.apply(this,arguments),this.category=a.suggestionCategory,this.ignoreScribeItemPosition=!1}).subclassOf(twttr.streams.UserStream).statics({_deciderKey:"suggestion_categories_streams"}).methods({update:function(a){this.params.lang&&(a.lang=this.params.lang),this.params.country&&(a.country=this.params.country),this.params.city&&(a.city=this.params.city),this.category.members(a)},isCursorPagination:function(){return!1},_setTitle:function(a){var b={category:this.category.name,size:this.category.size};a(this.params.title||_("View {{category}} ({{size}})",b))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(twttr.streams.SuggestionCategoriesStream.CATEGORIES,this.params.pathRoot,this.category.slug)},_getStreamEndComponent:function(){return this.params.noHeaderFooter?twttr.streams.SuggestionCategoryMembersStream.uber._getStreamEndComponent.call(this):this._getHeaderComponent()}});c&&d.mixin(c),a(d)})}),provide("streams/SuggestionCategoriesDashboardStream",function(a){using().as(function(b){twttr.klass("twttr.streams.SuggestionCategoriesDashboardStream",function(a,b){a=a||{},twttr.streams.SuggestionCategoriesStream.call(this,a,b)}).subclassOf(twttr.streams.SuggestionCategoriesStream).methods({itemViewClass:twttr.isT1?"DashboardStreamInterestCategory":"StreamSuggestionCategory",_setHeader:function(a,b){a("")},addTipsies:function(){}}),a()})}),provide("streams/SuggestionCategoryMembersDashboardStream",function(a){using("streams/SuggestionCategoryMembersStream").as(function(b){twttr.klass("twttr.streams.SuggestionCategoryMembersDashboardStream",function(a,c){a=a||{},a.streamItemClass="unfocusable-stream-item",b.streams.SuggestionCategoryMembersStream.call(this,a,c)}).subclassOf(b.streams.SuggestionCategoryMembersStream).methods({_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a(twttr.streams.SuggestionCategoryMembersDashboardStream)})}),provide("streams/GovernmentSearchStream",function(a){using("_","mixins/hasGovernmentSearchHeader").as(function(b,_){var c=twttr.klass("twttr.streams.GovernmentSearchStream",function(a,b){var c=this;twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).mixin(b.mixins.hasGovernmentSearchHeader).methods({itemViewClass:"StreamUser",streamItemType:"user",afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},streamItemId:function(a){return a.id},_fetchItems:function(a){var b=this;twttr.API.UsPoliticalRep.findByZip(this.params.zipCode,{success:function(c,d){b.push(c.map(function(a){return a.user}).array),a(b,twttr.streams.SUCCESS),b.reachedTheEnd()},error:function(c){c.status===502?a(b,twttr.streams.WHALE):c.status===404?(a(b,twttr.streams.SUCCESS),b.reachedTheEnd()):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}})},_setTitle:function(a){a(_("Government"))},_getEmptyStreamHtml:function(){return _("Sorry, we couldn't find any representatives for that Zip Code.")},_setViewToggler:function(a){var b={route:twttr.router.whoToFollowInterestsPath(),name:_("View all categories")};a(new twttr.views.BackLink(b))}});a(c)})}),provide("widget/VerifyEmailDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.VerifyEmailDialog",function(a,b){this.bucket=a,twttr.widget.Dialog.call(this,twttr.merge({modal:!0,draggable:!1,css:{width:530},email:b.email_address||b.attributes.states.pending_email},b.attributes))}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this),this.$container.find(".button.ok-thanks").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","dialog_dismissed"),a.preventDefault(),a.stopPropagation(),$.cookie("abtest_email_verification_18","1",{expires:.0417}),this.destroy()})),this.$container.find(".send-verify-email").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","resend_verification_email"),$.ajax({url:"/account/resend_confirmation_email",dataType:"json",success:twttr.bind(this,function(a){var b=this.$container.find(".twttr-dialog-verify-email");b.length?b.fadeOut(300,function(){b.find("h2").html(_("Confirmation email sent!")),b.find(".verify-email-text").html(_("Please take this time to check your email for the confirmation message and to verify your email address by <strong>clicking the link in the email</strong>.")),b.fadeIn()}):twttr.showMessage(a.messageForFlash)}),error:function(a){twttr.showError(_("Oops!  There was an error sending the confirmation email."))}}),a.preventDefault(),a.stopPropagation()})),this.$container.find(".change-email").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","change_email"),this.destroy()}))}}),a(twttr.widget.VerifyEmailDialog)})}),provide("SearchAPI",function(a){using().as(function(b){twttr.SearchAPI={_generateFacetsQuery:function(a){var b=a.query,c=a.facets,d={q:b,imageResults:c.images?c.images.count:null,videoResults:c.videos?c.videos.count:null};return a.experimentId&&(d.experimentId=a.experimentId),d},getImageFacets:function(a,b){twttr.SearchAPI._wrapInCache("imageFacets",a,b)},getVideoFacets:function(a,b){twttr.SearchAPI._wrapInCache("videoFacets",a,b)},_wrapInCache:function(a,b,c){var d=this,e=twttr.SearchAPI.cacheKey(a,b,c);this._facetsCache[e]?setTimeout(function(){c.success&&c.success(d._facetsCache[e])},0):twttr.API.Search[a](b,twttr.merge({},c,{success:function(a){var b=[];a.each(function(a){b.push({url:a.url,tweet:a})}),d._facetsCache[e]=b,c.success&&c.success(b)},error:function(){c.error&&c.error()}}))},cacheKey:function(){return JSON.stringify(Array.prototype.slice.apply(arguments))},_facetsCache:{},flushCache:function(){this._facetsCache={}}},a(twttr.SearchAPI)})}),provide("media/providers",function(a){using().as(function(b){var c=function(a,b){return b=b||function(){return!0},function(c){var d=[];$.each(c,function(a,c){c.mediaType=twttr.media.matchInstance(c.url,c.tweet),c.mediaType&&b(c)&&d.push(c)}),a(d)}};twttr.klass("twttr.media.provider.Search",function(a){this.options=a||{}}).methods({fetch:function(a){var b=a.query;a.success=c(a.success,a.filter),a.mode=="videos"?twttr.SearchAPI.getVideoFacets(b,a):twttr.SearchAPI.getImageFacets(b,a)}}),twttr.klass("twttr.media.provider.UserMedia",function(a){this.defaults={offset:0,count:20},this.screenName=a.screenName||null,this.user=a.user||null}).methods({fetchWithUser:function(a){var b=a.success||$.noop;a.success=function(a){var c=[];twttr.each(a.array,function(a){a.entities&&a.entities.media&&$.each(a.entities.media,function(b,d){if(d.type&&d.type=="photo"&&d.display_url){var d={url:d.display_url,tweet:a};c.push(d)}}),a.entities&&a.entities.urls&&$.each(a.entities.urls,function(b,d){var e={url:d.expanded_url||d.url,tweet:a};c.push(e)})}),b(c)},this.user.media(a)},fetchWithScreenName:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){b.user=c,b.fetchWithUser(a)})},fetch:function(a){a=$.extend({},this.defaults,a),a.success=c(a.success,a.filter),this.user?this.fetchWithUser(a):this.screenName&&this.fetchWithScreenName(a)}}),a(twttr.media.provider)})}),provide("mixins/userRecommendationsHelper",function(a){using("_","constants").as(function(b,_){twttr.klass.mixin("twttr.mixins.userRecommendationsHelper",function(a){return a.methods({INTERESTING_RATING:6,BLOCK_RATING:5,USEFUL_RATING:1,LIST_ITEM_SELECTOR:"ul.recommended-followers > li.user-small-list-item",userRecommendationsAvailable:function(a){return twttr.loggedIn?a?twttr.decider.isAvailable("whotofollow_similarities"):twttr.decider.isAvailable("whotofollow_recommendations"):twttr.decider.isAvailable("whotofollow_logged_out_similarities")},trackImpressions:function(a,c,d,e,f){var g=[],i=[],j;a&&a.length()&&(a.each(function(a,c){g.push(a.id),i.push(a.feedback);if(a.promotedContent&&a.promotedContent.impression_id){var d={target_id:a.id,item_type:b.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id,item_position:c};j=j||{},j[a.id+""]=d}}),e?this.currentRecommendations=twttr.map(this.currentRecommendations,function(a,b){return a==e?g[0]:a}):this.currentRecommendations=g),this._trackOldImpressions(c,g,i,d),this._trackNewImpressions(g,i,j,f)},trackError:function(a,b){this._trackOldImpressions(a,[],[],b),this.getScribbler().scribe({component:this._getScribeComponentName(),action:"error"})},_trackOldImpressions:function(a,b,c,d){var e={recommended_users:b,recommended_users_count:b.length,tokens:c};twttr.merge(e,d||{});var f=this.mergeSimilarUserId(e);_scribble(a,f,"whotofollow")},_trackNewImpressions:function(a,b,c,d){var e={profile_id:this.getSimilarUserId(),item_ids:a,item_count:a.length,event_value:a.length,item_names:b,referring_event:d?"get_newer":"initial",duration_ms:new Date-this.initTime};c&&(e.item_details=c),this.getScribbler().scribe({component:this._getScribeComponentName(),action:a.length?"results":"no_results"},e)},_scribeResults:function(a,b,c){twttr.streams.Stream.prototype._scribeResults.apply(this,arguments);var b=b||[];c=c||{};if(a=="error"||a=="initial"&&!b.length)this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},twttr.merge(c,{item_ids:[0],item_count:0,event_value:0,cursor_or_page:this._cursorOrPage(),referring_event:a}));else if(b.length){var d=this,e=[],f=[],g;twttr.each(b,function(a,b){e.push(a.id),f.push(a.feedback);if(d.constructor._namespace.indexOf("UserRecommendations")!=-1){var c;a.promotedContent&&a.promotedContent.impression_id&&(c={item_type:twttr.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id}),c&&(g=g||{},c.item_position=b,g[a.id+""]=c)}}),g&&(c.item_details=g),this.scribbler.scribe({component:this._getScribeComponentName(),action:"results"},twttr.merge(c,{item_ids:e,item_names:f,item_count:e.length,event_value:e.length,cursor_or_page:this._cursorOrPage(),referring_event:a}))}},logPromotedImpressions:function(a){a.each(function(a){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)})},getSimilarUserId:function(){return this.similarUser&&this.similarUser.id||twttr.profileUser&&twttr.profileUser.id},mergeSimilarUserId:function(a){return this.screenName&&$.extend(a,{to_user_id:this.getSimilarUserId()}),a.phoenix_enabled=!0,a},recsToUsers:function(a){return a.map(twttr.bind(this,function(a,b){var c=this._namespace=="twttr.streams.UserRecommendationsStream"||this._namespace=="twttr.streams.UserSimilaritiesStream";return a.user.clone({following:a.user.following===!0,feedback:a.token,dismissable:!this.screenName||c&&twttr.profileUser&&twttr.currentUser.id==twttr.profileUser.id,socialcontext:this.makeSocialContextHtml(a,c)})}))},fetch:function(a){this.screenName?twttr.profileUser.similarUsers(a):(a.force_new_signup=this.forceNewSignup,twttr.currentUser.recommendedUsers(a))},registerUserRecommendationsActions:function(a){var b=this,c=function(b){return!a||b.parents(a).length};this.bind("avatar_click.user screen_name_click.user select.user",function(a,d,e,f){if(!c(d))return;var g=parseInt(d.attr("data-user-id")),i=b.mergeSimilarUserId({rating:b.INTERESTING_RATING,recommended_user_id:g,token:d.attr("data-feedback-token")||"0"});if(!g)return;i.recommendation_position=b.getRecPosition(d),scribble(b.whotofollowComponentName+"_profile_click",i,"whotofollow"),scribble("view-profile",{profile_user_id:g,component:b._namespace.indexOf(".stream.")?"stream":"dashboard",subcomponent:"who-to-follow",target:e.is("a")?"link":"image"})}),this.bind("follow.user",function(a,d,e,f){if(!c(d))return;var g=parseInt(d.attr("data-user-id")),i=b.mergeSimilarUserId({rating:b.USEFUL_RATING,recommended_user_id:g,token:d.attr("data-feedback-token")||"0"});if(!g)return;twttr.API.UserRecommendation.rate(i),i.recommendation_position=b.getRecPosition(d),scribble(b.whotofollowComponentName+"_follow",i,"whotofollow"),scribble("follow-user",{profile_user_id:g,component:b._namespace.indexOf(".stream.")?"stream":"dashboard",subcomponent:"who-to-follow"})}),this.bind("dismiss.user",function(a,d,e,f){if(!c(d))return;twttr.isT1&&d.hasClass("js-follow-combo")&&(d=d.parent(".js-actionable-user"));var g=parseInt(d.attr("data-user-id")),i=d.attr("data-impression-id"),j=b.getRecPosition(d),k=d.attr("data-feedback-token")||"0",l=d.find("a.js-action-follow, div.js-action-follow, .follow-action, .follow-button").length||b.screenName,m={};twttr.cache.local.dismissedIDs=twttr.cache.local.dismissedIDs||[],twttr.cache.local.dismissedIDs.push(g),d.animate({opacity:0},200);var n=function(a){var c;if(e.closest('[data-section-id="wtf"]').length)if(a&&a.length()&&!twttr.is.inArray(a.first().user.id,b.currentRecommendations||[])){c=b.recsToUsers(a);var f=c.first();if(f){var i=b.renderItemView(f).$html();i.css({opacity:0}),d.replaceWith(i),i.animate({opacity:1},300),b.trackImpressions(c,"whotofollow_sidebar_replace_dismissed",twttr.merge({recommended_user_id:g,recommendation_position:j},m),g)}}else d.fadeOut(200,function(){d.animate({height:1},100,null,function(){d.remove(),b.$find(b.LIST_ITEM_SELECTOR).length==0&&(b.trigger("notRendered","noMoreRecommendations"),b.$node.empty())})});else{var n=d.parent(".stream-item");n.slideUp(100,function(){n.remove()})}l&&scribble(b.whotofollowComponentName+"_block",b.mergeSimilarUserId({token:k,recommended_user_id:g,rating:b.BLOCK_RATING,recommendation_position:j}),"whotofollow")},o=function(){twttr.showError(_("Whoops! Something went wrong. Please try again!")),d.css({opacity:1})};m=b.mergeSimilarUserId({});var p=twttr.merge({user_id:m.to_user_id,excluded:b.currentRecommendations.concat(twttr.cache.local.dismissedIDs||[]).join(","),success:n,error:o,pc:!!i},m);d.find("a.js-action-unfollow:visible, div.js-action-unfollow:visible").length?b.fetch(twttr.merge(p,{limit:1})):d.find(".unfollow-button").length&&twttr.audit.currentPage()!="similar_to"?n():(p=twttr.merge({connections:!0},p),twttr.API.UserRecommendation.hide(g,k,p))})},attachUserRecommendationHideEvents:function(){this.$find("a.js-user-dropdown-dismiss").click(twttr.bind(this,function(){this.$find("a.js-user-dropdown, div.js-user-dropdown").fadeOut(300)}))},renderItemView:function(a){return new twttr.views.UserSmallListItem(a)},getRecPosition:function(a){}}),a}),a(twttr.mixins.userRecommendationsHelper)})}),provide("mixins/t1/genericComboButton",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.t1.genericComboButton",function(){this.methods({getButton:function(a){return a.closest(".js-combo-btn")},setState:function(a,b,c){b&&c!==b&&(a.removeClass(c),a.addClass(b),a.attr("data-state",b))}}).click({".js-combo-btn-dropdown":function(a,b){var c=this.getButton(b);c.toggleClass("open"),c.hasClass("open")&&($(document).bind("click.button",function(){c.removeClass("open"),$(document).unbind("click.button")}),a.stopPropagation())},".js-combo-btn-action, .js-combo-btn-dropdown-options a":function(a,b){var c=this.getButton(b);this.setState(c,b.attr("data-state"),c.attr("data-state"))}})});a(c)})}),provide("mixins/userUpdateable",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.userUpdateable",function(){return this.methods({registerUserUpdateEvents:function(a){var b=this;if(!twttr.loggedIn)return;twttr.API.User.bind("follow unfollow",function(c,d){var e=a.id==d.id,f=twttr.helpers.isCurrentUser(a);if(!e&&!f)return;twttr.helpers.isCurrentUser(b.user)?b.trigger("userUpdated",twttr.currentUser):b.trigger("userUpdated",d)})}}),this});a(c)})}),provide("components/UserMedia",function(a){using().as(function(b){twttr.klass("twttr.components.UserMedia").subclassOf(twttr.components.Media).deciderKey("phoenix_user_media_gallery").initializer(function(a,b){this.user=a,this.options=b||{},this.notDisplayedClass=".user-media-not-displayed",this.hasCalledHasRendered=!0,this.buildSubComponents()}).methods({buildSubComponents:function(){var a=this,b=function(){a.$node.hide()},c=twttr.aug({user:this.user,filter:function(a){return!a||!a.mediaType?!1:a.mediaType.icon()===twttr.constants.media.photoIcon}},this.options);twttr.isT1&&twttr.aug(c,twttr.components.Media.dashboardThumbnailOptions),this.images=new twttr.components.media.profile.Images(c),this.images.bind("urlsLoaded",function(c,d,e){a._possiblySensitive=e,d.length===0?b():twttr.loggedIn?a.loggedInBehavior():a.loggedOutBehavior(),a._scribeResults("photos",d)}),this.images.bind("failed",function(){b(),a._scribeResults("photos")}),this.images.fetchImages()},_isPossiblySensitive:function(){return!!this._possiblySensitive},_getUser:function(){return this.user},onProfilePage:function(){return!0},renderMedia:function(){this.images.$node.appendTo(this.$node),this.images.render(),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"photos_user_media",action:"view_all"},{event_info:"photos",profile_id:twttr.profileUser&&twttr.profileUser.id})}),this.$node.delegate(".media-thumbnail","click",function(a){trackClient({section:"dashboard",component:"photos_user_media",action:"click"},{event_info:"photos",url:$(this).attr("data-url"),profile_id:twttr.profileUser&&twttr.profileUser.id})})},buildNotDisplayedView:function(a){var b="";return a.possibly_sensitive?b=_("This media may contain sensitive content"):a.not_following&&(b=_("This media was shared by {{screen_name}}, someone you don&#8217;t follow.",{screen_name:this.user.screenName})),new twttr.views.UserMediaNotDisplayed({screenName:this.user.screenName,reason:b,renderHr:this.options.renderHr})},_scribeResults:function(a,b){var c=b&&b.length?"results":"no_results",d=a+"_user_media";b=b||[],trackClient({section:"dashboard",component:d,action:c},{item_names:b.slice(0,4),item_count:b.length,event_info:a,profile_id:twttr.profileUser&&twttr.profileUser.id})}}),a(twttr.components.UserMedia)})}),provide("components/UserRecommendations",function(a){using("_","mixins/userRecommendationsHelper","mixins/userActionable",twttr.isT1?"mixins/UserRecommendationsT1":"mixins/UserRecommendationsP1").as(function(b,_,c,d,e){var f=twttr.klass("twttr.components.UserRecommendations").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.screenName=a.screenName,this.showLinks=a.showLinks,this.currentRecommendations=[],this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.screenName&&twttr.profileUser&&twttr.profileUser.id}),this.scribeComponentName=this._determineScribeComponentName(a),this.whotofollowComponentName=this._determineWhotofollowComponentName(this.scribeComponentName),this.initTime=+(new Date),this.onDeck=[],this.scribbler.scribe({component:this.scribeComponentName,action:"impression"}),this.noSpacer=!this._shouldHaveSpacer(),this.bind("addedToPage",twttr.bind(this,function(){this.userRecommendationsAvailable()?this.loadRecommendations():this.trigger("notRendered","darkmoded")})),this.registerUserActionEvents(),this.registerUserRecommendationsActions()}).mixin(c,d,e).statics({wtfCycleTimeout:1e3}).click({".title-link":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:"dashboard_title",item:b.find(".dashboard-component-title").html()};scribble("dashboard_click",c)},".user-rec-inner h3 a":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:"view_all_recommendations",recommendations:this.currentRecommendations};scribble("dashboard_click",c)},".user-rec-inner .view-all":function(a,b){trackClient({component:this.scribeComponentName,action:"view_all"})},".flex-module-footer a[data-element-term=interests_link]":function(a,b){trackClient({component:this.scribeComponentName,element:"interests_link",action:"click"})},".flex-module-footer a[data-element-term=import_link]":function(a,b){trackClient({component:this.scribeComponentName,element:"import_link",action:"click"})},".user-rec-links a":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:b.html(),target_type:"recommendation_link",recommendations:this.currentRecommendations};scribble("dashboard_click",c)},"a.js-action-follow, div.js-action-follow":function(a,b){if(twttr.app.currentPageName()==="home"&&this.scribeComponentName!=="empty_timeline_recommendations"){var c=this,d=b.closest(".js-actionable-user");window.setTimeout(function(){c.loadRecommendations(d)},twttr.components.UserRecommendations.wtfCycleTimeout)}}}).methods({forceNewSignup:!1,renderItemView:function(a){return new twttr.views.UserSmallListItem(a)},renderModuleView:function(a,b){var c=this._getModuleViewName();(new twttr.views[c](a)).subview("recommended_followers",new twttr.views.UserSmallList(b)).render(this.$node,"append")},loadRecommendations:function(a){var b,c;this.screenName?(b="whotofollow_view_similar_users",c="profile"):(b="whotofollow_view_recommended_users",c="home"),this.fetch({limit:a?1:this._recommendationsLimit(),excluded:this.onDeck.concat(twttr.cache.local.dismissedIDs||[]).join(","),display_location:this.screenName?"st-component":"wtf-component",pc:!0,connections:!this.screenName,algorithm:this.useUserToUserRec()?"UserToUserRec":null,success:twttr.bind(this,function(d){var e=this.recsToUsers(d);this.trackImpressions(e,b,{tracking_context:c});if(e.length()>0){this.logPromotedImpressions(e);var f;if(a){f=this.renderItemView(e.first()).$html();var g=parseInt(f.attr("data-user-id"));if(this.onDeck.find(function(a){return a==g}))this.trigger("notRendered","recommendationAlreadyOnDeck");else{var i=parseInt(a.attr("data-user-id"));this.onDeck=this.onDeck.map(function(a){return a==i?g:a}),a.css({opacity:1}),f.css({opacity:0}),a.animate({opacity:0},400,function(){a.replaceWith(f),f.animate({opacity:1},400,function(){f.css({opacity:""})})})}}else{this.onDeck=e.map(function(a){return $(a).attr("id")});var j=this.screenName?{screen_name:this.screenName,self_sims:twttr.helpers.isCurrentUser(this.screenName),profile_name:twttr.profileUser.name,small_avatar:!0}:{show_links:this.showLinks};this.renderModuleView(j,e),this.attachUserRecommendationRefreshEvents(),this.hasRendered(),this.trigger("recommendationsLoaded"),f=this.$node}twttr.helpers.ellipsify(f.find(".user-screen-and-full-name")),twttr.helpers.ellipsify(f.find("div.bio"))}else this.trigger("notRendered","noMoreRecommendations")}),error:twttr.bind(this,function(a){this.trackError(b,{tracking_context:c,error_status:a.status}),this.trigger("notRendered",a)})})},refreshRecommendations:function(a){var b=this.$find(".js-recommended-followers");b.animate({opacity:0},200);var c=this.screenName?"whotofollow_refresh_similar_users":"whotofollow_refresh_recommended_users";twttr.cache.local.dismissedIDs=(twttr.cache.local.dismissedIDs||[]).concat(this.currentRecommendations),this.fetch({limit:this._recommendationsLimit(),excluded:this.onDeck.concat(twttr.cache.local.dismissedIDs).join(","),pc:a,display_location:"wtf-component",connections:!0,algorithm:this.useUserToUserRec()?"UserToUserRec":null,success:twttr.bind(this,function(d){var e=this.recsToUsers(d);if(e.length()>0){this.scribbler.scribe({component:this.scribeComponentName,action:"refresh"}),this.trackImpressions(e,c,{},!1,!0),a&&this.logPromotedImpressions(e);var f=this._generateUserList(e);f.css({opacity:0}),b.replaceWith(f),twttr.helpers.ellipsify(f.find(".user-screen-and-full-name")),f.animate({opacity:1},200)}else twttr.showMessage(_("You have no more recommendations today!")),this._removeRefreshLink(),b.css({opacity:1})}),error:function(a){this.trackError(c,{error_status:err.status}),twttr.helpers.showErrorFromResponse(a),b.css({opacity:1})}})},attachUserRecommendationRefreshEvents:function(){var a=this;this.$find("a.js-refresh-suggestions").click(twttr.bind(this,function(a){this.refreshRecommendations(!0)}))},_recommendationsLimit:function(){return 3},useUserToUserRec:function(){return this.screenName!=null&&twttr.abdecider.choose("wtf_user_to_user_rec_155")=="user_to_user_rec"},_determineScribeComponentName:function(a){return a=a||{},a.scribeComponentName?a.scribeComponentName:a.screenName?"similar_user_recommendations":"user_recommendations"},_determineWhotofollowComponentName:function(a){return a==="empty_timeline_recommendations"?"whotofollow_empty_timeline":"whotofollow_sidebar"}});a(twttr.components.UserRecommendations)})}),provide("components/Footer",function(a){using().as(function(b){var c=twttr.klass("twttr.components.Footer").subclassOf(twttr.components.Base).initializer(function(a){this.renderFooter(a),twttr.loggedIn||this.$node.delegate("a","click",function(a){var b={url:$(this).attr("href"),context:twttr.audit.currentPage()},c={section:"footer",component:"link",action:"click"};trackClient(c,b)}),this.hasRendered()}).method("renderFooter",function(a){(new(twttr.isT1?twttr.views.Footer:twttr.views.GenericFooter)({year:2012,is_slim:a=="slim"})).render(this.$node,"append")});a(c)})}),provide("components/Trends",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.Trends").subclassOf(twttr.components.Base).initializer(function(a){var b=this;trackClient({component:"trends",action:"impression"}),b.isFullPage=!!a&&!!a.isFullPage,this.renderTrends(),a&&a.wide&&b.$find(".trends-inner").addClass("wide-trends"),b.hasRendered(),b.registerEventHandlers(),twttr.API.CurrentUser.bind("changedLocation",function(){b.trendLocationUpdated=!0,b.updateTrends()}),twttr.TrendLocations.install(function(){b.trendLocationsLocated=!0,b.startUpdatePolling(),b.trigger("trendLocationsLocated")})}).statics({trendUpdateTime:3e5}).methods({registerEventHandlers:function(){var a=this,b=a.$find(".js-trend-toggle");b.click(function(b){var c=function(){a.dialog().open(),scribble("open-trend-dialog",{input:"click",woeid:a.currentWoeid()})};a.trendLocationsLocated?c():a.bind("trendLocationsLocated",c),b.preventDefault()}),b.hover(function(b){scribble("trend-location-selector-hover",{input:"hover",woeid:a.currentWoeid()})})},currentWoeid:function(){return twttr.trendLocations.current.woeid},dialog:function(){return this._dialog?this._dialog:this._dialog=twttr.dialogs.trends()},startUpdatePolling:function(){var a=this;!a.trendUpdateInterval&&a.trendLocationsLocated&&(a.updateTrends(),a.trendUpdateInterval=setInterval(function(){twttr.decider.isAvailable("trends_component_polling")&&a.updateTrends(!0)},twttr.components.Trends.trendUpdateTime))},stopUpdatePolling:function(){this.trendUpdateInterval&&(clearInterval(this.trendUpdateInterval),this.trendUpdateInterval=!1)},prettyHash:function(a){return a&&a[0]==="#"?a.slice(1):null},updateTrends:function(a){var b=this;b.$node.addClass("loading");var c={pc:twttr.loggedIn,promoted_location:twttr.util.params().promoted_location,success:function(c){var d=twttr.anywhere.api.util.buildCollection(twttr.anywhere.api.models.Trend,c.get(0).trends),e=c.get(0).personalized;twttr.trendLocations.current.isPersonalized!=e&&twttr.trendLocations.setPersonalized(e),b.updateTrendsLocation(),b._dialog&&b.dialog().rerender();var f=[],g=[];$trends=b.$find(".js-trends").empty(),d.each(function(c,d){var e=$.extend({attributes:{}},c);e.attributes=$.extend({index:d+1,is_full_page:b.isFullPage,pretty_hash:b.prettyHash(e.attributes.name)},e.attributes),twttr.isRTL&&(e.attributes.name=e.attributes.name.replace(/^#/,"‎#"));var i=(new twttr.views.TrendItem(e)).$html();c.promotedContent&&(a||twttr.API.util.PromotedContent.logTrendImpression(c.promotedContent.id),i.bind("click",function(a){twttr.API.util.PromotedContent.logTrendClick(c.promotedContent.id)}));var j={rank:d,woeid:b.currentWoeid(),component:"dashboard",input:"click",trend:c.name,dialog_open:b._dialog&&b._dialog.isOpen()};c.promotedContent&&(j.promoted_content_id=c.promotedContent.id),i.bind("click",function(a){scribble("show-trend",j),trackClient({section:"dashboard",component:"trend",action:"click"},{query:c.name,woeid:b.currentWoeid(),position:d}),c.promotedContent&&trackClient({section:"dashboard",component:"promoted_trend",action:"click"},{query:c.name,woeid:b.currentWoeid(),position:d})}),i.appendTo($trends),f.push(j),g.push(c.name)}),b.$node.removeClass("loading"),b.isFullPage&&$(".trends-page").removeClass("trends-page-loading"),b.showTrends(),trackClient({component:"trends",action:"results"},{item_names:g,item_count:g.length,referring_event:a||b.trendLocationUpdated?"get_newer":"initial",event_initiator:a?twttr.constants.scribe.CLIENT_SIDE_APP:twttr.constants.scribe.CLIENT_SIDE_USER}),scribble("trend-impression",{component:"dashboard",trends:f})},error:function(c){b.isFullPage&&($(".trends-page").removeClass("trends-page-loading"),a||twttr.helpers.showErrorFromResponse(c)),b.hideTrends()}};twttr.trendLocations.current.trends(c)},updateTrendsLocation:function(){var a=twttr.trendLocations.current,b=twttr.decider.isAvailable("personalized_trends")&&a.isPersonalized?_("Trends"):1===a.woeid?_("Worldwide trends"):Mustache.to_html(_("{{location}} trends"),{location:a.name});this.$find(".js-trend-location").text(b).attr("woeid",a.woeid)},showTrends:function(){!this.isFullPage&&this.$node.show()},hideTrends:function(){!this.isFullPage&&this.$node.hide()}}).deciderKey("trends_component");twttr.isT1?(c.setBaseView(twttr.views.DashboardTrends),c.methods({renderTrends:function(){this.hideTrends()}})):c.methods({renderTrends:function(){var a=this.isFullPage?twttr.views.FullPageTrends:twttr.views.DashboardTrends;(new a).render(this.$node,"append"),this.noSpacer=this.isFullPage}}),a(c)})}),provide("components/onebox/News",function(a){using("_","helpers").as(function(b,_,c){var d=twttr.klass.component("twttr.components.onebox.News").initializer(function(a){var b=this,c=b.getArticle(a);if(!c)return;b.$node.append((new twttr.views.CardNewsOnebox(c)).html()),b.$node.css("visibility","hidden")}).deciderKey("news_onebox").click({".js-news-headline,.onebox-news-url":function(a){trackClient({section:"onebox",component:"news",action:"click"})}}).methods({getTopicName:function(){return _("Top news")},getArticle:function(a){var b=twttr.at("content.articles",a);return b?b.get(0):null},render:function(){var a=this.$find(".js-news-headline"),c=this.$find(".js-news-snippet"),d=a.innerHeight();d>=36?c.css("height","18px"):d>=18&&c.css("height","36px"),b.helpers.ellipsify([a,c],!1,!0,null,{setTitle:"always",ellipsis:"&ellip;"}),b.helpers.ellipsify(this.$find(".onebox-news-url-text")),this.$node.css("visibility","")}});a(d)})}),provide("components/onebox/User",function(a){using("_","helpers","mixins/userActionable").as(function(b,_){var c=twttr.klass.component("twttr.components.onebox.User").initializer(function(a,b){this.items=[];var c=this.getUsers(a);if(!c)return;this.scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({section:"onebox"},{query:b}),this.$node.append((new twttr.views.CardAccountsOnebox(c,this.getViewAllPath(b))).html()),this.$node.css("visibility","hidden"),this.registerUserActionEvents()}).mixin(b.mixins.userActionable).statics({maxUsers:2}).deciderKey("user_onebox").methods({getTopicName:function(){return _("Top people")},getViewAllPath:function(a){var b={query:a};return twttr.isT1?twttr.router.userSearchPath(b):twttr.loggedIn?twttr.router.whoToFollowSearchPath(b):twttr.router.userSearchPath(b)},getUsers:function(a){var b=twttr.at("content.users",a),c=this;return!b||b.isEmpty()?null:(b.array=b.array.splice(0,twttr.components.onebox.User.maxUsers),b.each(function(a){c.items.push(a.idStr),a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)}),b)},render:function(){twttr.isT1?b.helpers.ellipsify(this.$find(".js-onebox-ellipsis")):b.helpers.ellipsify(this.$find(".bio"),!1,!0,null,{setTitle:"always",ellipsis:"&ellip;"}),this.$node.css("visibility","")}});a(c)})}),provide("components/onebox/Sports",function(a){using("_","helpers","mixins/profilePopupActionable").as(function(b,_,c){var d=twttr.klass.component("twttr.components.onebox.Sports").initializer(function(a,b){this._timerId=0,this._event=0;var c=this,d=c.getEvent(a);if(!d)return;if(d.sport!=="soccer")return;c._event=d,c.$node.append((new twttr.views.CardSoccerOnebox(d)).html()),d.events.getMatchState().current_status!=="final"&&c._startPolling(d),this.$node.css("visibility","hidden")}).deciderKey("sports_onebox").click({".team-logo":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"avatar"})},".fullname":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"screen_name"})},".follow-team":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"follow"})},".detail":function(a){trackClient({section:"onebox",component:"sports",action:"open_link"},{url:this._event.events.getMatchedEventData().preview_url})},".recap":function(a){trackClient({section:"onebox",component:"sports",action:"open_link"},{url:this._event.events.getMatchedEventData().recap_url})},".hashtag":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".ticker-event":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".matched-score":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".js-follow-news":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"news_link"})},".js-signup-callout":function(a){if(!twttr.loggedIn){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget).data("user-id");twttr.API.User.find(b,{success:function(a){twttr.dialogs.signinOrSignup({follow:a}).open()},error:function(a){twttr.errors.showErrorFromResponse(a)}})}}}).mixin(twttr.mixins.profilePopupActionable).methods({getEvent:function(a){return twttr.at("content",a)},_renderTicker:function(a){if(a.events.data().follow_news||a.events.getOtherMatchState().length>0)this.$node.find(".tickercontainer").size()===0&&this.$node.find(".js-onebox-soccer-item").append('<div class="tickercontainer"></div>'),this.$node.find(".tickercontainer").empty().append((new twttr.views.SoccerTicker(a)).html())},_renderMatchedEvent:function(a){this.$node.find(".matched-event").empty().append((new twttr.views.SoccerMatchedEvent(a)).html()),twttr.loggedIn||this.$find(".js-user-profile-link").removeClass("js-user-profile-link").addClass("js-signup-callout")},render:function(){this._event&&(this.$node.empty(),this.$node.append((new twttr.views.CardSoccerOnebox(this._event)).html()),this._renderMatchedEvent(this._event),this._renderTicker(this._event),this._event.events.getMatchState().current_status==="final"&&$(".score a").removeClass("live")),this.$node.css("visibility",""),trackClient({section:"onebox",component:"sports",action:"impression"}),this.$find(".ticker").length!==0&&this._tickerScroll(this.$find(".tickercontainer"))},_tickerScroll:function(a){function m(){var a=b.find("li")[l-1];$(a).animate({opacity:0},k,"linear"),b.animate({top:-l*100+"%"},k,"linear",function(){if(!j)return;++l,l-1>=b.find("li").length?(g._renderTicker(g._event),g._tickerScroll(g.$find(".tickercontainer"))):(clearTimeout(i),i=setTimeout(function(){m()},f))})}this._scrollStarted=!0;var b=$(a.children()[0]),c=0,d=0;b.find(".event-item").each(function(a){var b=$(this,a).outerHeight(!0);c+=b,d<b&&(d=b)}),a.height(d),b.height(c);var e=.03,f=2e3,g=this,i,j=!0,k=d/e,l=0;b.find("li").length===1?setTimeout(function(){g._renderTicker(g._event),g._tickerScroll(g.$find(".tickercontainer"))},f):(b.css("top",d),i=setTimeout(function(){m()},f),b.hover(function(){j=!1,clearTimeout(i)},function(){j=!0,i=setTimeout(function(){m()},f)}))},_getEventIds:function(a){var b=[];return $.each(a,function(a,c){b.push(a)}),b.join()},_startPolling:function(a){var b=this;b._timerId=setInterval(function(){var c={statuses:!1,stories:!0,is_t1:twttr.isT1,trim_user:!0,event_ids:b._getEventIds(a.events.items),success:function(a){if(a.stories.length()===0)return;var c=a.stories.get(0),d=$.extend(!0,b._event.events.data().items,b.getEvent(c).events.data().items);b._event.events.data().items=d,b._renderMatchedEvent(b._event),b.$find(".ticker").length===0&&b._renderTicker(b._event),b.$find(".ticker").length!==0&&!b._scrollStarted&&b._tickerScroll(b.$find(".tickercontainer")),b._event.events.getMatchState().current_status==="final"&&(clearInterval(b._timerId),$(".score a").removeClass("live"))}};$(b.$node).parents("body").size()===0||!twttr.decider.isAvailable("sports_onebox_polling")?clearInterval(b._timerId):new Date-a.events.getMatchedEventData().scheduled_start_time_utc>0&&twttr.API.Search.search(query,c)},3e4)}});a(d)})}),provide("components/onebox/Event",function(a){using("_","helpers").as(function(b,_){var c=twttr.klass.component("twttr.components.onebox.Event").initializer(function(a,b){this.scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({section:"onebox",component:"event"},{query:b});var c=a.content.events[0];c&&this.$node.append((new twttr.views.CardEventOnebox(c)).html())}).deciderKey("swift_events_reroute").click({".js-onebox-event-item":function(a){trackClient({section:"onebox",component:"event",action:"click"})}}).methods({render:function(){this.$node.css("visibility","")}});a(c)})}),provide("components/t1/EmptyTimelineRecommendations",function(a){using("components/UserRecommendations").as(function(b){twttr.klass("twttr.components.t1.EmptyTimelineRecommendations").subclassOf(twttr.components.UserRecommendations).initializer(function(a){var b=this;this.bucket=twttr.abdecider.chooseWithoutImpression("empty_timeline_176"),this.one("recommendationsLoaded.EmptyTimelineRecommendations",function(){using(">allCurrentUserDataLoaded",function(){twttr.currentUser.friends({success:function(a){b.friends=a,b.conditionallyEnableDoneButton(),twttr.API.User.bind("follow.EmptyTimelineRecommendations",function(a,c){b.friends.push(c);var d=b.$find('.js-list-item[data-user-id="'+c.id+'"]');d.length!==0&&(b.followEvent=!0,b.loadRecommendations(d)),b.conditionallyEnableDoneButton(),b.renderModuleHeaders()}),twttr.API.User.bind("unfollow.EmptyTimelineRecommendations",function(a,c){b.friends=b.friends.filter(function(a){return a.id!==c.id}),b.conditionallyDisableDoneButton(),b.renderModuleHeaders()})}})})}),this._superInitializer(a)}).destructor(function(){this.unbind(".EmptyTimelineRecommendations"),twttr.API.User.unbind(".EmptyTimelineRecommendations")}).statics({avatarLimit:5}).methods({forceNewSignup:!0,LIST_ITEM_SELECTOR:".js-empty-timeline .js-list-item",conditionallyEnableDoneButton:function(){this.friends.length()>twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1&&this.$find(".js-done").removeClass("disabled")},conditionallyDisableDoneButton:function(){this.friends.length()<twttr.components.t1.EmptyTimelineRecommendations.avatarLimit&&this.$find(".js-done").addClass("disabled")},renderItemView:function(a){var b=new twttr.views.BigAvatarListItem(a);return b.dismissable=!1,b},renderModuleView:function(a,b){var c=this,d={},e;d.following=this.setupFollowingContext(),d.avatar_limit=twttr.components.t1.EmptyTimelineRecommendations.avatarLimit,d.recommendations=[],b.each(function(a){var b=c.renderItemView(a);d.recommendations.push(b)}),(new twttr.views.EmptyTimelineRecommendationsModuleShort(d)).render(this.$node,"append")},getRecPosition:function(a){var b;return this.$find(".js-account-group").each(function(c,d){if(a.attr("data-user-id")==$(d).attr("data-user-id"))return b=c,!1}),b},renderModuleHeaders:function(){var a={},b=this.$find("h2"),c=this.$find("h3");a.following=this.setupFollowingContext(),b.length>0&&b.html((new twttr.views.EmptyTimelineTitle(a)).html()),c.length>0&&c.html((new twttr.views.EmptyTimelineSubtitle(a)).html())},setupFollowingContext:function(){if(twttr.currentUser.friendsCount!==0)return{goal:twttr.components.t1.EmptyTimelineRecommendations.avatarLimit,count:twttr.currentUser.friendsCount,follow_event:this.followEvent||!1,zero:twttr.currentUser.friendsCount===0,one:twttr.currentUser.friendsCount===1,two:twttr.currentUser.friendsCount===2,several:twttr.currentUser.friendsCount>=3&&twttr.currentUser.friendsCount<twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1,almost:twttr.currentUser.friendsCount===twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1,done:twttr.currentUser.friendsCount>=twttr.components.t1.EmptyTimelineRecommendations.avatarLimit}},_generateUserList:function(a){var b=this;return(new twttr.views.EmptyTimelineRecommendationsModuleFollowers({recommendations:a.map(function(a){return b.renderItemView(a)}).toArray()})).$html()}}).click({".js-done":function(a,b){if(b.hasClass("disabled"))return;twttr.mixins.emptyTimelineRecommendations.showing=!1,this.destroy()}}),a(twttr.components.t1.EmptyTimeline)})}),provide("components/t1/dashboard/AbstractDashboard",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.AbstractDashboard").subclassOf(twttr.components.Base).setBaseView(twttr.views.Module).initializer(function(a){var b=this;a=a||{},this.$sections={},this.$itemsContainer=this.$find(".js-items-container"),this.$itemsContainer.length||(this.$itemsContainer=this.$node),this.noSpacer=!0}).methods(twttr.EventProvider).methods({addSection:function(a){if(!a.id||!!this.$sections[a.id])return!1;a.tag=a.tag||"div",a.operation=a.operation||"append";var b=(new twttr.views.ModuleSection({tag:a.tag,id:a.id})).$html();return a.className&&b.addClass(a.className),this.$sections[a.id]=b,a.operation=a.operation||"append",this.$itemsContainer[a.operation](b),b},getSection:function(a){return this.$sections[a]?this.$sections[a]:!1},removeSection:function(a){if(!this.$sections[a])return!1;this.$sections[a].remove(),delete this.$sections[a]}});a(c)})}),provide("components/t1/dashboard/Tweetbox",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Tweetbox").subclassOf(twttr.components.t1.dashboard.AbstractDashboard).initializer(function(a){this.$node.html(a.addClass("flex-module"))});a(c)})}),provide("components/t1/dashboard/ProfileTweetbox",function(a){using("components/t1/dashboard/Tweetbox").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileTweetbox").subclassOf(b.components.t1.dashboard.Tweetbox).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/ProfileFollowCard",function(a){using("components/t1/dashboard/AbstractDashboard","mixins/userActionable","mixins/userUpdateable").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileFollowCard").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseViewOptions({class_name:"profile-card"}).mixin(b.mixins.userActionable,b.mixins.userUpdateable).initializer(function(a){function d(){b.registerUserActionEvents(),b.registerUserUpdateEvents(b.user),b.bind("userUpdated",function(a,c){b.user=c,b.renderStats()})}var b=this;this._superInitializer(),this.user=a;if(twttr.helpers.isCurrentUser(a)){var c=this.renderCard();(new twttr.views.ScreenNameFollowedBy({screen_name:a.screenName,is_current_user:!0})).render(c.$dom.find(".js-username")),d()}else this.getRelationship(a,function(c,e){b.updateUserAttributesFromRelationship(c);var f=b.renderCard();(new twttr.views.ScreenNameFollowedBy({screen_name:a.screenName,followed_by:c.followedBy})).render(f.$dom.find(".js-username")),b.renderUserProfileMenu(b.$find(".js-follow-combo"),b.$find(".js-action-profilemenu"),e),d()})}).methods({renderCard:function(){var a=this,b=new twttr.views.ProfileFollowCard(this.user),c=this.user.impressionId;return b.render(this.$node),setTimeout(function(){a.trigger("followCardRendered")},0),b},renderStats:function(){this.$find(".js-mini-profile-stats").remove(),(new twttr.views.MiniProfileStats(this.user)).render(this.$find(".js-profile-card-actions"),"append")}});a(c)})}),provide("components/t1/dashboard/Flex",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Flex").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.FlexModule).initializer(function(a){this._superInitializer(a)}).methods({addTitle:function(a){this.$itemsContainer.find(".flex-module-title").remove(),(new twttr.views.FlexModuleTitle({title:a.title,view_all_route:a.viewAllRoute})).render(this.$itemsContainer,"prepend")},addMoreLinks:function(a){this.$itemsContainer.find(".js-more-links").remove(),a.length&&(a[a.length-1].is_last=!0),(new twttr.views.FlexModuleMoreLinks({links:a})).render(this.$itemsContainer,"append")}});a(c)})}),provide("components/t1/dashboard/Nav",function(a){using("util").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Nav").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.$itemsContainer=this.$find(".js-items-container"),a.items&&(a.items=twttr.map(a.items,function(a){twttr.is.def(a.name)||(a.name=twttr.router.findMatchingRoute(a.route).name);if(a.type||a.name)a.element_term=b.util.underscore(a.type||a.name)+"_item";return twttr.merge({show_metadata_container:a.metadata,active:twttr.router.getCurrentRoute().name==a.name,count_commaized:a.count?b.util.formatNumber(a.count,twttr.pageLocale):"",visible:!0},a)})),(new twttr.views.Nav(a)).render(this.$node),this.afterRender(this.$node)}).methods({afterRender:$.noop});a(c)})}),provide("components/t1/dashboard/MiniHomeProfile",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass.component("twttr.components.t1.dashboard.MiniHomeProfile").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.MiniHomeProfile).initializer(function(a){var b=this;this._superInitializer(),this.showStats=!!a,this.user=twttr.currentUser,this.renderUser(),this.showStats&&(this.renderStats(),this.attachEvents()),using([twttr.bundleMore,"TweetBox"],function(){b.renderTweetBox()})}).methods({insertTweetbox:function(){if(this.tweetBox)return this.tweetBoxNode;var a=this,b=this.tweetBoxNode=$('<div class="tweet-box"/>');return this.tweetBox=new twttr.TweetBox(b.empty(),twttr.merge(this.getTweetBoxOptions(),{defaultContent:"",id:"main-tweet-box",condensed:!0,statusAction:"update",width:258,height:75,explainLinkShortening:!1,enableDraft:!0,enableAutoGrow:!0,template:{suppress_geo_text:!0,button_text:_("Tweet"),show_title:!1}})),this.tweetBox.bind("tweetSuccess",function(a,b){twttr.showMessage(_("Your Tweet has been sent!"))}),b},getTweetBoxOptions:function(){return{condensedContent:_("Compose new Tweet..."),autocompleteSuggestionLimit:5}},renderUser:function(){(new twttr.views.MiniCurrentUser(this.user)).render(this.$find(".js-profile-summary"),"append")},renderStats:function(){(new twttr.views.MiniProfileStats(this.user)).render(this.$find(".js-mini-profile-stats-container"))},renderTweetBox:function(){this.$tweetBox=this.insertTweetbox(),this.$find(".js-mini-profile-tweet-box").remove(),this.$itemsContainer.append(this.$tweetBox.addClass("tweet-user"))},tweetHandler:function(){twttr.currentUser.sync("statusesCount",twttr.currentUser.statusesCount+1),this.renderStats()},deleteTweetHandler:function(){twttr.currentUser.sync("statusesCount",twttr.currentUser.statusesCount-1),this.renderStats()},attachEvents:function(){var a=this;$(document).bind("currentUserUpdated",function(){a.renderStats()}),twttr.API.Status.bind("update retweet",function(){a.tweetHandler()}),twttr.API.Status.bind("delete unretweet",function(){a.deleteTweetHandler()})},_isCJK:function(){var a=twttr.pageLocale;return a==="ja"||a==="ko"||a==="zh-cn"||a==="zh-tw"}}).click({".js-profile-summary":function(){twttr.router.routeTo(twttr.router.profilePath({screen_name:this.user.screenName}))}});a(c)})}),provide("components/t1/dashboard/ConnectNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ConnectNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"connect-nav",items:[{title:_("Interactions"),route:twttr.router.connectPath(),visible:twttr.decider.isActivityEnabled(),type:"activity"},{name:"mentions",title:_("Mentions"),route:twttr.router.mentionsPath(),active:twttr.router.getCurrentRoute().name==="replies"||twttr.router.getCurrentRoute().name=="mentions",type:"mentions"}]})});a(c)})}),provide("components/t1/dashboard/ProfileNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"profile-nav",items:[{title:_("Tweets"),route:twttr.router.profilePath({screen_name:a.screenName})},{title:_("Following"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followingPath":"userFollowingPath"]({screen_name:a.screenName})},{title:_("Followers"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followersPath":"userFollowersPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="followers"||twttr.router.getCurrentRoute().name=="userFollowers"||twttr.router.getCurrentRoute().name=="followersYouFollow",show_metadata_container:!0},{title:_("Favorites"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"favoritesPath":"userFavoritesPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="favorites"||twttr.router.getCurrentRoute().name=="userFavorites"},{title:_("Requests"),route:twttr.router.followerRequestsPath({screen_name:a.screenName}),visible:twttr.helpers.isCurrentUser(a)&&a["protected"]},{title:_("Lists"),route:twttr.router.subscriptionsPath({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="subscriptions"||twttr.router.getCurrentRoute().name=="memberships"}]}),twttr.helpers.canViewUser(a)&&this.renderMedia()}).methods({renderMedia:function(){this.$find("ul").append((new twttr.components.UserMedia(twttr.profileUser,{view_all_href:twttr.router.userMediaGridPath({screen_name:twttr.profileUser.screenName}),renderHr:!0})).$node)}});a(c)})}),provide("components/t1/dashboard/SettingsNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SettingsNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"settings-nav",items:[{title:_("Accounts & Settings"),route:twttr.router.settingsPath()}]})});a(c)})}),provide("components/t1/dashboard/ListNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ListNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"list-nav",items:[{title:_("Tweets"),route:twttr.router.userListPath({screen_name:a.user.screenName,list_slug:a.slug})},{title:_("List members"),route:twttr.router.listMembersPath({screen_name:a.user.screenName,list_slug:a.slug})},{title:_("List subscribers"),route:twttr.router.listSubscribersPath({screen_name:a.user.screenName,list_slug:a.slug})}]})});a(c)})}),provide("components/t1/dashboard/SearchNav",function(a){using("components/t1/dashboard/Nav","components/SearchFacets").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._query=a,this._superInitializer.call(this,{name:"search-nav",items:[{title:_("Tweets"),route:twttr.router.searchResultsPath({query:a}),type:"tweets"},{title:_("People"),route:twttr.router.userSearchPath({query:a}),name:"userSearch",show_metadata_container:!0,type:"people"}]}),this.renderFacets(a)}).methods({loadUsers:function(a,b){var c=this,d={display_location:"search-component",pc:!1};twttr.API.User.search(a,twttr.merge(d,{success:function(a){var c=new twttr.components.t1.AvatarRow(a);b.find(".js-metadata").html(c.$node)}}))},afterRender:function(a){query=this._query.replace(/(^|\b)(from\:|to\:|near\:|source\:)/g,"");if(query.indexOf(":")!=-1)return;this.loadUsers(query,a)}}).methods({renderFacets:function(a){var c=this,d=!1;this.facets=new b.components.SearchFacets(a),this.facets.bind("urlsLoaded",function(a,b,e){b?d||(c.facets.$node.appendTo(c.$find(".js-items-container")),d=!0):e&&c.facets.$node.remove()})}});a(c)})}),provide("components/t1/dashboard/DiscoverNav",function(a){using("components/t1/dashboard/Nav","components/t1/AvatarRow").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.DiscoverNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"discover-nav",items:[{title:_("Stories"),route:twttr.router.discoverPath(),type:"discover"},{title:_("Activity"),route:twttr.router.networkActivityPath(),visible:twttr.decider.isActivityEnabled(),type:"activity"},{title:_("Who to follow"),route:twttr.router.whoToFollowSuggestionsPath(),show_metadata_container:!0,type:"suggestions"},{title:_("Find friends"),route:twttr.router.whoToFollowImportPath(),type:"import"},{title:_("Browse categories"),route:twttr.router.whoToFollowInterestsPath(),active:twttr.router.getCurrentRoute().name=="whoToFollowInterestsCategory"||twttr.router.getCurrentRoute().name=="whoToFollowInterests",type:"interests"}]}),twttr.loggedIn&&this.renderWTFFacePile()}).methods({renderWTFFacePile:function(){var a=this;twttr.currentUser.recommendedUsers2(function(b){var c=b.map(function(a){return a.user}),d=new twttr.components.t1.AvatarRow(c);a.$find('[data-name="whoToFollowSuggestions"] .js-metadata').html(d.$node)})}});a(c)})}),provide("components/t1/dashboard/ProfileSummary",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileSummary").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleProfileSummary).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/ListFollowCard",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass.component("twttr.components.t1.dashboard.ListFollowCard").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseViewOptions({class_name:"follow-card"}).initializer(function(a){this._superInitializer(),this.render(a),this._registerEvents(a)}).methods({render:function(a){(new twttr.views.ListFollowCard(a)).render(this.$node)},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"update follow unfollow add remove",function(c,d){d.id===a.id&&((c.type==="follow"||c.type==="unfollow")&&d.sync("following",c.type==="follow"),b.render(d))})}});a(c)})}),provide("components/t1/dashboard/SearchImages",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchImages").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleSearchImages).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/SearchVideos",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchVideos").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleSearchVideos).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/AvatarRow",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.AvatarRow").subclassOf(twttr.components.Base).initializer(function(a,b){var b=b||{};this.avatarLimit=b.avatarLimit||7,this.renderFacePile(a)}).methods({renderFacePile:function(a){var b=a.slice(0,this.avatarLimit);b.length()>0&&((new twttr.views.AvatarRow(b)).render(this.$node,"html"),this.$find(".js-user-tipsy").tipsy({gravity:"s"}))}});a(c)})}),provide("components/t1/SearchHeader",function(a){using("helpers").as(function(b){var c=twttr.klass("twttr.components.t1.SearchHeader").subclassOf(twttr.components.Base).mixin(twttr.mixins.i18nTweetBox).setBaseView(twttr.views.SearchHeader).initializer(function(a){this.setQuery(a),this.registerEvents(),this.registerSearchMenuAction(),twttr.search.isSavedSearch(a)&&this.toggleSavedSearchOn()}).methods({registerEvents:function(){var a=this;this.$find(".js-search-header-query").bind("keydown keypress keyup",function(b){a.markPunctuation(b,$(this))});var c=this.$find("form.js-search-form");b.helpers.addFormEvents(c,function(a,b){var c=b.q;c?(twttr.search.setLastQuerySource(twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.doSearch(c)):twttr.showMessage(_("Enter your query before submitting the search form!"))}),twttr.search.formifyLatestQuery(c)},toggleSavedSearchOn:function(){this.$find(".js-toggle-saved-search-link").html(_("Remove saved search")).addClass("saved").removeClass("not-saved"),this.$find(".js-search-title").html(_("Saved search results"))},toggleSavedSearchOff:function(){this.$find(".js-toggle-saved-search-link").html(_("Save search")).addClass("not-saved").removeClass("saved"),this.$find(".js-search-title").html(_("Search results"))},registerSearchMenuAction:function(){var a=this;this.$node.delegate(".js-search-dropdown-button","click",function(b){return a.toggleSearchMenu(),b.preventDefault(),b.stopPropagation(),!1})},showSearchMenu:function(a){var b=this;a.addClass("open"),$(document).bind("click.button",function(){b.hideSearchMenu(a)})},hideSearchMenu:function(a){a.removeClass("open"),$(document).unbind("click.button")},toggleSearchMenu:function(a){var b=this,c=this.$node.find(".js-search-dropdown");c.hasClass("open")?this.hideSearchMenu(c):this.showSearchMenu(c)},setQuery:function(a){this.$find(".js-search-header-query").val(a)},focusQuery:function(){this.$find(".js-search-header-query").focus()}});a(c)})}),provide("components/t1/PeopleSearchStreamHeader",function(a){using("helpers").as(function(b){var c=twttr.klass("twttr.components.t1.PeopleSearchStreamHeader").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},b.placeholder=b.placeholder||_("Search using a person’s full name or @username"),b.button_text=b.buttonText||_("Search Twitter"),this.searchRoute=b.searchRoute=a,(new twttr.views.StreamHeaderPeopleSearch(b)).render(this.$node,"append"),this.registerEvents()}).methods({registerEvents:function(){var a=this.$find("form.js-search-form"),c=this;b.helpers.addFormEvents(a,function(b,d){!a.find('input[name="q"]').hasClass("js-placeholded")&&d.q!=""&&(trackClient({component:"user_search_form",action:"search"},{query:d.q}),twttr.router.routeTo(c.searchRoute({query:d.q})))})}});a(c)})}),provide("components/t1/UserSimilaritiesList",function(a){using("_","mixins/userRecommendationsHelper","mixins/userActionable").as(function(b,_){var c=twttr.klass("twttr.components.t1.UserSimilaritiesList").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},this.profileUser=a,this.screenName=this.profileUser.screenName,this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.profileUser.id}),this.whotofollowComponentName="whotofollow_dropdown",this.ignoreScribeItemPosition=!0,this.initTime=+(new Date),this.userRecommendationsAvailable()?this.loadRecommendations():this.trigger("notRendered","darkmoded"),this.registerUserActionEvents(),this.registerUserRecommendationsActions()}).mixin(b.mixins.userRecommendationsHelper,b.mixins.userActionable).click({".js-close":function(a){a.preventDefault(),this.trigger("close")}}).methods({renderView:function(a){var b=(new twttr.views.UserSimilaritiesList).$html(),c=b.find(".js-users-list");a.map(function(a){var b=new twttr.views.StreamUser(a);(new twttr.views.StreamItem({item_html:b.html(),item_type:"user",item_class:"stream-item"})).render(c,"append")}),c.children(":last-child").addClass("stream-end-item"),this.$node.append(b)},loadRecommendations:function(a){this.fetch({limit:2,success:twttr.bind(this,function(a){var b=this.recsToUsers(a);this.trackImpressions(b,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:this.profileUser.id}),b.length()>0?(this.renderView(b),this.hasRendered(),this.trigger("recommendationsLoaded")):this.trigger("notRendered","noMoreRecommendations")}),error:twttr.bind(this,function(a){this.trackImpressions(null,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:this.profileUser.id,error_status:a.status}),this.trigger("notRendered",a)})})}});a(twttr.components.UserSimilaritiesList)})}),provide("components/pages/mixins/profileT1",function(a){using("_","components/t1/dashboard/ProfileNav","components/t1/dashboard/ProfileFollowCard","components/SignupCallOut").as(function(b,_){var c=twttr.klass.mixin("twttr.components.pages.mixins.profileT1",function(){this.view(twttr.views.PageProfile).methods({allLists:function(a){var b=this,c=this._defaultedScreenName(a.screen_name);this.getUserInfo(c,function(){twttr.helpers.canViewUser(b.profileUser)?(b.updatePageTitle(_("Twitter / {{screenName}}'s Subscriptions",{screenName:c})),b._highlightNavIfCurrentUser(c),b.selectCurrentSideNav(),b._switchToStream({screenName:c,stream:twttr.streams.AllSubscriptionsUser})):twttr.router.routeTo(twttr.router.profilePath({screen_name:c}))},{batch:!twttr.loggedIn,profiler:!0})},memberships:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Lists following {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.MembershipsUser})},with_replies:function(a,b){var c=this,d=a.screen_name.toLowerCase();this.loading(d),this.getUserInfo(d,function(){c.updatePageTitle(_("{{{fullName}}} ({{{screenName}}}) on Twitter",{fullName:c.profileUser.name,screenName:d})),c._highlightNavIfCurrentUser(d),c._switchToStream({screenName:d,stream:twttr.streams.User,tab:"tweets"}),c.selectSideNav("profile"),c.checkWithheld()},{batch:!twttr.loggedIn,profiler:!0},twttr.bind(this,this.noUserFoundCallback))},similarTo:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Similar to {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this.selectCurrentSideNav(),this._switchToStream({screenName:c,stream:twttr.streams.UserSimilaritiesStream})},getTweetBoxOptions:function(){return{width:258,height:75,explainLinkShortening:!1,condensedContent:"@"+this.profileUser.screenName+" ",dynamicTitle:!1,autoCompleteSuggestionLimit:5,template:{suppress_geo_text:!0,name:this.profileUser.name,button_text:_("Tweet")}}},getDashboardComponents:function(){var a=[],c=this;twttr.loggedIn||a.push(new b.components.SignupCallOut("profile",{profileUser:this.profileUser})),this.shouldShowTweetBox()&&a.push(new twttr.components.t1.dashboard.ProfileTweetbox(this.renderTweetbox()));var d=new twttr.components.UserRecommendations({screenName:twttr.profileUser.screenName});return d.bind("recommendationsLoaded",function(){"similarTo"===twttr.router.getCurrentRoute().name&&c.selectSideNav("similarTo")}),a.concat([new twttr.components.t1.dashboard.ProfileNav(this.profileUser),new twttr.components.JapaneseAd,d,new twttr.components.Footer])},addSimilarUsersDropdown:function(){var a=this,b=new twttr.components.t1.UserSimilaritiesList(this.profileUser);b.bind("recommendationsLoaded",function(){a.userSimilaritiesListComponent=b,(!$.browser.msie||$.browser.version!=7)&&b.$node.hide(),a.addContainerComponent(a.$find(".js-content-main"),b,"before"),(!$.browser.msie||$.browser.version!=7)&&b.$node.slideDown(300),twttr.router.one("routed",function(){a.removeSimilarUsersDropdown()})}),b.bind("notRendered",function(){b.destroy()}),b.bind("close",function(){a.removeSimilarUsersDropdown()})},removeSimilarUsersDropdown:function(){var a=this.userSimilaritiesListComponent;this.userSimilaritiesListComponent=null,a&&($.browser.msie&&$.browser.version==7?a.destroy():a.$node.slideUp(300,function(){a.destroy()}))},addBanner:function(){var a=this.bannerPreviewUrl||this.profileUser.profileBannerUrl;if(a){var b=(new twttr.views.ProfileBanner({banner_url:decodeURIComponent(a)})).html();this.$topContent.find(".profile-card").append(b)}},addImpressionData:function(a){a.profile_id=this.profileUser&&this.profileUser.id||twttr.profileUser&&twttr.profileUser.id}}).addAfterRender(function(){var a=this,c=new b.components.t1.dashboard.ProfileFollowCard(this.profileUser);c.bind("follow.user",function(){a.addSimilarUsersDropdown()}),c.bind("unfollow.user",function(){a.removeSimilarUsersDropdown()}),c.bind("followCardRendered",function(){a.addBanner()}),this.addTopContentComponent(c)}).addOnSwitchTo(function(){var a=this;$(document).bind("tweetSuccess",function(b,c){var d=a.streamManager.getCurrent().trigger("didTweet",[c])})}).addOnSwitchAway(function(){$(document).unbind("tweetSuccess")})});a(c)})}),provide("components/pages/mixins/profileP1",function(a){using("_","constants").as(function(b,_){var c=twttr.klass.mixin("twttr.components.pages.mixins.profileP1",function(){this.methods({getTweetBoxOptions:function(){return{width:482,condensedContent:_("Tweet to {{screen_name}}",{screen_name:"@"+this.profileUser.screenName}),template:{button_text:_("Tweet"),show_title:!1}}},getDashboardComponents:function(){var a=[];a.push(new twttr.components.JapaneseAd),this.renderTweetbox(),twttr.loggedIn||a.push(new twttr.components.SignupCallOut("profile",{profileUser:twttr.profileUser}));var c=twttr.helpers.userNoobLevel(twttr.currentUser),d=twttr.helpers.isProfileUser();return d&&c>=b.constants.noob.total?a=a.concat(this.getNoobDashboardComponents(c)):(a.push(new twttr.components.DashboardProfileStats(twttr.profileUser)),a.push(new twttr.components.UserMedia(twttr.profileUser,{renderHr:!0})),this._isSocialContextAvailable()&&a.push(new twttr.components.SocialContext),twttr.loggedIn&&twttr.decider.isAvailable("whotofollow_similarities")&&a.push(new twttr.components.UserRecommendations({screenName:twttr.profileUser.screenName})),twttr.loggedIn&&a.push(new twttr.components.RecentProfileActivity(twttr.profileUser)),twttr.API.User.bind("block",this.userWasBlocked)),a.push(new twttr.components.Footer),a},getNoobDashboardComponents:function(a){var c=[],d=twttr.profileUser;c.push(new twttr.components.DashboardProfileStats(d,this.dashStatsTitle()),new twttr.components.UserMedia(twttr.profileUser,{renderHr:!0}));var e=b.constants.noob;switch(a){case e.invited:case e.silent:case e.popular:case e.struggling:c.push(new twttr.components.RecentProfileActivity(d));break;case e.friendless:case e.lonely:c.push(new twttr.components.RecentlyFollowed);break;case e.total:case e.talking:default:}return c.push(new twttr.components.GettingStarted(a)),c},memberships:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Lists following {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.Memberships})}}).click({".stream-tab-lists":function(a,b){$(a.target).is(".tab-text, .tab-text *")&&twttr.viewHelpers.superListDropdown(twttr.profileUser,b,function(a){a.render(b,"append"),a.open()})},".stream-tab-following.dropdown-link":function(a,b){a.preventDefault();if(this._followingDropDown)return;var c=twttr.profileUser.screenName,d=[{name:_("View as list of people &rarr;"),href:twttr.router.userFollowingPath({screen_name:c})},{name:_("View as timeline &rarr;"),href:twttr.router.userFollowingTweetsPath({screen_name:c})}];$(a.target).hasClass("tab-text")&&(this._followingDropDown=new twttr.control.Dropdown(b,{itemView:"StreamLink",items:d}),this._followingDropDown.render(b,"append"),this._followingDropDown.open())},".stream-tab-followers.dropdown-link":function(a,b){if(!this._isSocialContextAvailable())return;var c=twttr.profileUser.screenName;if(this._followersDropDown)return;$(a.target).hasClass("tab-text")&&(this._followersDropDown=new twttr.control.Dropdown(b,{itemView:"StreamLink",items:[{name:_("All followers &rarr;"),href:twttr.router.userFollowersPath({screen_name:c})},{name:_("Followers you follow &rarr;"),href:twttr.router.followersYouFollowPath({screen_name:c})}]}),this._followersDropDown.render(b,"append"),this._followersDropDown.open())}})});a(c)})}),provide("components/t1/dashboard/ProfileNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"profile-nav",items:[{title:_("Tweets"),route:twttr.router.profilePath({screen_name:a.screenName})},{title:_("Following"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followingPath":"userFollowingPath"]({screen_name:a.screenName})},{title:_("Followers"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followersPath":"userFollowersPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="followers"||twttr.router.getCurrentRoute().name=="userFollowers"||twttr.router.getCurrentRoute().name=="followersYouFollow",show_metadata_container:!0},{title:_("Favorites"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"favoritesPath":"userFavoritesPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="favorites"||twttr.router.getCurrentRoute().name=="userFavorites"},{title:_("Requests"),route:twttr.router.followerRequestsPath({screen_name:a.screenName}),visible:twttr.helpers.isCurrentUser(a)&&a["protected"]},{title:_("Lists"),route:twttr.router.subscriptionsPath({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="subscriptions"||twttr.router.getCurrentRoute().name=="memberships"}]}),twttr.helpers.canViewUser(a)&&this.renderMedia()}).methods({renderMedia:function(){this.$find("ul").append((new twttr.components.UserMedia(twttr.profileUser,{view_all_href:twttr.router.userMediaGridPath({screen_name:twttr.profileUser.screenName}),renderHr:!0})).$node)}});a(c)})}),provide("components/pages/mixins/listT1",function(a){using("components/t1/dashboard/ListNav","components/t1/dashboard/ListFollowCard","components/NewestListMembers","components/MoreLists","components/Footer").as(function(b){var c=twttr.klass.mixin("twttr.components.pages.mixins.listT1",function(){this.view(twttr.views.Page).methods({_registerEvents:function(a){var c=this;twttr.API.List.bind("update",function(d,e){if(e.id===a.id){var f=c.$find(".list-nav").closest(".component"),g=c.$find(".dashboard > *").index(f);f.remove(),c.addDashboardComponent(new b.components.t1.dashboard.ListNav(e),g+1)}})},getDashboardComponents:function(a){return this.listFollowCard=new b.components.t1.dashboard.ListFollowCard(a),[this.listFollowCard,new b.components.t1.dashboard.ListNav(a),new b.components.NewestListMembers(a),new b.components.MoreLists(a),new b.components.Footer]},addImpressionData:function(a){a.profile_id=this.owner&&this.owner.id||twttr.profileUser&&twttr.profileUser.id,a.message=this._listSlug}})});a(c)})}),provide("multiGlobals/MessageManagerMonitor",function(a){using().as(function(a){if(twttr.isT1){var b;twttr.decider.isAvailable("phoenix_use_conversation_endpoint")?b=twttr.messageManager=new twttr.ConversationManager:b=twttr.messageManager=new twttr.MessageManager,b.bind("pendingThreads",function(){var a=b.hasPendingThreads();a?($("div.js-topbar li.js-session").addClass("new"),$("div.js-topbar span.js-direct-message-count").addClass("new").text(a)):($("div.js-topbar li.js-session").removeClass("new"),$("div.js-topbar span.js-direct-message-count").removeClass("new").text(""))}),b.setupContinuousPoll()}}),a()}),provide("google",function(a){using().as(function(b){using(twttr.bundleMore,function(){if(twttr.isTestEnv)return;jQuery.active>0?$(document).one("ajaxComplete",twttr.insertGAScriptElement):twttr.insertGAScriptElement()}),a()})}),provide("ttft_ajax",function(a){using().as(function(b){using(twttr.bundleMore,function(){var a=0,b=0,c=function(){++b>=a&&(window.ttft.ajaxComplete(a),$(document).unbind("ajaxComplete",c))};window.ttft&&$.active&&($(document).ajaxComplete(c),activeAjaxCount=$.active)}),a()})}),provide("mixins/ActivityViewHelpers",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.ActivityViewHelpers",function(){var a=3,b="sources",c="targets",d="target_objects",e="StreamTweet",f="ActivityItemTweet",g="StreamUser",i="StreamList",j="ActivityItemUser",k="ActivityItemTruncatedTweet",l="User",m="List",n="Status",o={User:{Status:["user"],List:["user"],User:[]},Status:{Status:[],User:["status"],List:[]},List:{Status:[],User:["user"],List:[]}},p={User:twttr.isT1?"ActivityUserLink":"UserLink",List:"ListLink"},q={your_activity:p,profile_activity:p,activity:p,dashboard:{User:"UserFullName",List:"ListLink"}},r={User:"screen_name",List:"list_title"};twttr.isT1&&(f="StreamTweet",j="UserAvatarLink24",k="LatestTweet");var s={your_activity:{favorite:{sources:{view:j,objectType:l,object:b,max:15,useTruncated:!0},targets:{view:k,objectType:n,object:c,max:1,useTruncated:!1}},mention:{view:e,objectType:n,object:d,max:1},reply:{view:e,objectType:n,object:c,max:1},retweet:{sources:{view:j,objectType:l,object:b,max:15,useTruncated:!0},targets:{view:k,objectType:n,object:d,max:1,useTruncated:!1}},follow:{view:j,objectType:l,object:b,max:15},list_member_added:{view:j,objectType:l,object:c,max:15},list_created:{view:i,objectType:m,object:c,max:1}},profile_activity:{favorite:{view:f,objectType:n,object:c,max:1},mention:{view:f,objectType:n,object:d,max:1},reply:{view:f,objectType:n,object:c,max:1},retweet:{view:f,objectType:n,object:d,max:1},follow:{view:g,objectType:l,object:c,max:12},list_member_added:{view:g,objectType:l,object:c,max:12},list_created:{view:i,objectType:m,object:c,max:1}},activity:{favorite:{primary:{view:f,objectType:n,object:c,max:1},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},mention:{view:f,objectType:n,object:d,max:1},reply:{view:f,objectType:n,object:c,max:1},retweet:{primary:{view:f,objectType:n,object:d,max:1},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},follow:{primary:{view:twttr.isT1?"StreamUser":"ActivityItemUser",objectType:l,object:c,max:twttr.isT1?10:12},secondary:{view:"UserAvatarLink24",objectType:l,object:b,max:15}},list_member_added:{view:twttr.isT1?"StreamUser":"ActivityItemUser",objectType:l,object:c,max:10},list_created:{view:i,objectType:m,object:c,max:1}},dashboard:{favorite:{max:0},mention:{max:0},reply:{max:0},retweet:{max:0},follow:{max:0},list_member_added:{max:12},list_created:{max:1}}},t={sources:b,targets:c,target_objects:d},u={favorite:t,mention:t,reply:t,retweet:t,follow:t,list_member_added:t,list_created:t},v=[[[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{{targets_screen_name_1}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}}, {{{targets_screen_name_1}}} and {{{targets_screen_name_2}}} to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others</span>{{#link_targets_count}}</a>{{/link_targets_count}}&#32;to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]]],w=[[_("{{{sources_screen_name_0}}} created list {{{targets_list_title_0}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}} and {{{targets_list_title_1}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}}, {{{targets_list_title_1}}} and {{{targets_list_title_2}}}"),_("{{{sources_screen_name_0}}} created lists {{{targets_list_title_0}}} and {{#link_targets_count}}<a class='activity-count' href='#'>{{/link_targets_count}}<span class='count-wrap'>{{targets_count}} others.</span>{{#link_targets_count}}</a>{{/link_targets_count}}")]],x={favorite:{your_activity:[[_("{{{sources_screen_name_0}}} favorited your Tweet"),_("{{{sources_screen_name_0}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited your Tweet"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited your Tweet"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited your Tweets")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited your Tweet"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited your Tweets")]],profile_activity:[_("{{{sources_screen_name_0}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:")],activity:[_("{{{sources_screen_name_0}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;favorited <span class='activity-target-screen-name'>{{{targets_screen_name_0}}}</span>:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>favorited</span> <span class='dashboard-activity-item-entity'>{{full_targets_count}} Tweets</span>")],_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} <span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>favorited</span> a <span class='dashboard-activity-item-entity'>Tweet</span>")]},mention:{your_activity:[_("{{{sources_screen_name_0}}} mentioned you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} mentioned you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} mentioned you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;mentioned you")],profile_activity:null,activity:null},reply:{your_activity:[_("{{{sources_screen_name_0}}} replied to you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} replied to you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} replied to you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;replied to you")],profile_activity:null,activity:null},retweet:{your_activity:[_("{{{sources_screen_name_0}}} retweeted you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} retweeted you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} retweeted you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;retweeted you")],profile_activity:[_("{{{sources_screen_name_0}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:")],activity:[_("{{{sources_screen_name_0}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;retweeted <span class='activity-target-screen-name'>{{{target_objects_screen_name_0}}}</span>:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{target_objects_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{full_target_objects_count}} people</span>")],_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} <span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{target_objects_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>retweeted</span> <span class='dashboard-activity-item-entity'>{{{full_target_objects_count}}} people</span>")]},follow:{your_activity:[_("{{{sources_screen_name_0}}} followed you"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} followed you"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} followed you"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;followed you")],profile_activity:[_("{{{sources_screen_name_0}}} followed:")],activity:[_("{{{sources_screen_name_0}}} followed:"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} followed:"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} followed:"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;followed:")],dashboard:[[_("{{{sources_screen_name_0}}} <span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} <span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{full_targets_count}} people</span>")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} other</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} other</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{targets_count}} people</span>")],[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{{targets_screen_name_0}}}</span>"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;<span class='activity-action'>followed</span> <span class='dashboard-activity-item-entity'>{{targets_count}} people</span>")]]},list_member_added:{your_activity:[[[_("{{{sources_screen_name_0}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{{sources_screen_name_1}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}}, {{{sources_screen_name_1}}} and {{{sources_screen_name_2}}} added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to list {{{target_objects_list_title_0}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}} and {{{target_objects_list_title_1}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}}, {{{target_objects_list_title_1}}} and {{{target_objects_list_title_2}}}"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<a class='activity-count' href='#'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</a>{{/link_sources_count}}&#32;added you to lists {{{target_objects_list_title_0}}} and {{#link_target_objects_count}}<a class='activity-count' href='#'>{{/link_target_objects_count}}<span class='count-wrap'>{{target_objects_count}} others.</span>{{#link_target_objects_count}}</a>{{/link_target_objects_count}}")]]],profile_activity:v,activity:v,dashboard:[[[_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to a list"),_("{{{sources_screen_name_0}}} added {{{targets_screen_name_0}}} to {{#link_target_objects_count}}<span class='dashboard-activity-item-count'>{{/link_target_objects_count}}<span class='count-wrap'>{{full_target_objects_count}}</span>{{#link_target_objects_count}}</span>{{/link_target_objects_count}}&#32;lists")],[_("{{{sources_screen_name_0}}} added {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;to a list"),_("{{{sources_screen_name_0}}} added {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;to {{#link_target_objects_count}}<span class='dashboard-activity-item-count'>{{/link_target_objects_count}}<span class='count-wrap'>{{full_target_objects_count}}</span>{{#link_target_objects_count}}</span>{{/link_target_objects_count}}&#32;lists")]],[[_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to a list"),_("{{{sources_screen_name_0}}} and {{#link_sources_count}}<span class='dashboard-activity-item-count'>{{/link_sources_count}}<span class='count-wrap'>{{sources_count}} others</span>{{#link_sources_count}}</span>{{/link_sources_count}}&#32;added {{{targets_screen_name_0}}} to lists")]]]},list_created:{your_activity:null,profile_activity:w,activity:w,dashboard:[_("{{{sources_screen_name_0}}} made a list"),_("{{{sources_screen_name_0}}} made {{#link_targets_count}}<span class='dashboard-activity-item-count'>{{/link_targets_count}}<span class='count-wrap'>{{full_targets_count}}</span>{{#link_targets_count}}</span>{{/link_targets_count}}&#32;lists")]}},y={your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:null},activity:{sourceClass:l,targetClass:l,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:null}},z={favorite:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:null},activity:{sourceClass:l,targetClass:l,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:null}},mention:y,reply:y,retweet:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:null},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:l},activity:{sourceClass:l,targetClass:l,targetObjectClass:l},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:l}},follow:y,list_member_added:{your_activity:{sourceClass:l,targetClass:null,targetObjectClass:m},profile_activity:{sourceClass:l,targetClass:l,targetObjectClass:m},activity:{sourceClass:l,targetClass:l,targetObjectClass:m},dashboard:{sourceClass:l,targetClass:l,targetObjectClass:m}},list_created:{your_activity:null,profile_activity:{sourceClass:l,targetClass:m,targetObjectClass:null},activity:{sourceClass:l,targetClass:m,targetObjectClass:null},dashboard:{sourceClass:l,targetClass:m,targetObjectClass:null}}},A={favorite:"activity-fav",mention:"activity-reply",reply:"activity-reply",retweet:"activity-rt",follow:"activity-follow",list_member_added:"activity-list",list_created:"activity-list"},B;twttr.isT1?B={favorite:[_("<span class='show-text'>{{hidden_count}} other favorite</span><span class='hide-text'>Hide other favorite</span>"),_("<span class='show-text'>{{hidden_count}} other favorites</span><span class='hide-text'>Hide other favorites</span>")],mention:null,reply:[_("<span class='show-text'>{{hidden_count}} other reply</span><span class='hide-text'>Hide other reply</span>"),_("<span class='show-text'>{{hidden_count}} other replies</span><span class='hide-text'>Hide other reply</span>")],retweet:[_("<span class='show-text'>{{hidden_count}} other retweet</span><span class='hide-text'>Hide other retweet</span>"),_("<span class='show-text'>{{hidden_count}} other retweets</span><span class='hide-text'>Hide other retweets</span>")],follow:null,list_member_added:null,list_created:null}:B={favorite:_("<span class='show-text'>View other favorited Tweets by {{screen_name}}</span><span class='hide-text'>Hide other favorited Tweets by {{screen_name}}</span>"),mention:null,reply:_("<span class='show-text'>View other replies by {{screen_name}}</span><span class='hide-text'>Hide other replies by {{screen_name}}</span>"),retweet:_("<span class='show-text'>View other retweets by {{screen_name}}</span><span class='hide-text'>Hide other retweets by {{screen_name}}</span>"),follow:null,list_member_added:null,list_created:null},this.statics({objectClasses:z,objectStrings:x,supplements:s,iconClasses:A,supplementViewAllSentences:B,lineItemObjects:u,maxQualifiedEntities:a,viewForObjectType:q,substitutionKeyForObjectType:r,translateToObjectType:o})}),a(twttr.mixins.ActivityViewHelpers)})}),provide("multiGlobals/more_views",function(a){using("_","util","constants").as(function(b,_){twttr.view("twttr.views.BaseAPIList",function(){var a=this;twttr.views.Base.apply(this,arguments),this.items=[];if(!this.obj)return;this.obj.each(function(b){a.items.push(new a.ItemView(b))})}).methods({ItemView:twttr.views.BaseAPI}),twttr.view("twttr.views.UserImage24").template(twttr.templates.user_image_24),twttr.view("twttr.views.UserAvatarLink24").template(twttr.templates.user_avatar_link_24),twttr.view("twttr.views.LinkSimpleList",function(a){this.links=a}),twttr.view("twttr.views.LinkList",function(a,b){var a=a.array||a,c=a.length-1;this.links=twttr.map(a,function(a,d){return twttr.merge({separator:d==c?!1:b},a)})}),twttr.view("twttr.views.SlideshowTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SimpleTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SimpleTweetLarge",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.SingleTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>").find("a[data-twitter-media-url='true']").attr("target","").end();return b.html()},include_embed_link:function(){return twttr.decider.isAvailable("embed_code_dialog")&&twttr.app.isOnPage("permalink")&&!this.user["protected"]},is_permalink:function(){return twttr.app.isOnPage("permalink")}}),twttr.view("twttr.views.FollowingTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({show_follow_action:!0}),twttr.view("twttr.views.DiscoveryStreamTweet",function(){twttr.views.StreamTweet.apply(this,arguments)}).subclassOf(twttr.views.StreamTweet).template(twttr.templates.stream_tweet_discovery).statics({has:function(a,b){var c=b.hasOwnProperty(a)&&!twttr.is.falsy(b[a]);if(c&&twttr.is.array(b[a])){if(b[a].length==0)return!1;b[a][b[a].length-1].is_last=!0}return c}}).methods({show_follow_action:!0,has_retweeters:function(){return twttr.views.DiscoveryStreamTweet.has("retweeters",this.network_activity)},has_retweet_count:function(){return twttr.views.DiscoveryStreamTweet.has("retweet_count",this)}}),twttr.view("twttr.views.ActivityItemTweet",function(){twttr.views.StreamTweet.apply(this,arguments)}).subclassOf(twttr.views.StreamTweet).methods({should_callout_tweet_actions:function(){return!0}}),twttr.view("twttr.views.UnclickableTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>");return b.find("a").replaceWith(function(){return"<a>"+$(this).contents().text()+"</a>"}),b.html()}}),twttr.view("twttr.views.SemiClickableTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).template(twttr.templates.unclickable_tweet).methods({linkified_text:function(){var a=twttr.views.BaseTweet.prototype.linkified_text.apply(this,arguments),b=$("<div>"+a+"</div>");return b.find("a.pretty-link").each(function(){$(this).addClass("non-link").removeAttr("href")}),b.html()}}),twttr.view("twttr.views.LatestTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet).methods({full_timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0,!1,!0)}}),twttr.view("twttr.views.ActivityItemTruncatedTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.EmbeddedTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.DetailsPaneTweet",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.InReplyTo",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.ProfilePane",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats).methods({impression_cookie:function(){if(!this.promoted_content)return;var a=[];return JSON.stringify([this.id,this.promoted_content.impression_id,this.promoted_content.disclosure_type,this.promoted_content.disclosure_text,a])}}),twttr.view("twttr.views.MessageThread",function(a){twttr.views.Base.apply(this,arguments),this.items=[];for(var b=0;b<a.length;b++)this.items.push(new twttr.views.Message(a[b]))}).subclassOf(twttr.views.Base),twttr.view("twttr.views.ConversationThread",function(a){twttr.views.Base.apply(this,arguments),this.items=[];var b=null;for(var c=0;c<a.messages.length;c++){var d=new twttr.views.Message(a.messages[c]);b&&b.time_ago()!==d.time_ago()&&(d.delimiter_text=d.time_ago()),this.items.push(d),b=d}}).subclassOf(twttr.views.Base).methods({screen_name:function(){return this.threadId}}),twttr.view("twttr.views.SmsFollow").methods({show_sms_prompt:function(){return $.inArray(twttr.pageLocale,["ja","ko"])==-1},sms_follow_text:function(){var a="<strong>follow "+this.screen_name+"</strong>";switch(twttr.requestFullCity.substr(0,2).toLowerCase()){case"us":var b="40404",c=_("the United States");break;case"ca":var b="21212",c=_("Canada");break;default:return _('Text {{{command}}} to <a href="#" class="sms-codes-link">your carrier\'s shortcode</a>',{command:a})}return _("Text {{{command}}} to {{{number}}} in {{{country}}}",{command:a,number:"<strong>"+b+"</strong>",country:'<a href="#" class="sms-codes-link">'+c+"</a>"})}}),twttr.view("twttr.views.PermalinkSignupCallOut").subclassOf(twttr.views.SmsFollow),twttr.view("twttr.views.ProfileActions").subclassOf(twttr.views.SmsFollow).methods({is_current_user:function(){return twttr.helpers.isCurrentUser(this.user)},can_view:function(){return twttr.helpers.canViewUser(this.user)},show_device_notifications:function(){return!this.is_current_user()&&this.following&&(twttr.currentUser.lang!="ja"||twttr.decider.isAvailable("email_device_settings"))},notifications_on_for_user:function(){return twttr.currentUser.deviceSetup&&this.notifications},is_admin:function(){return twttr.is.def(twttr.isAdmin)}}),twttr.view("twttr.views.MessageThreadPreview").methods({last_was_yours:function(){return twttr.helpers.isCurrentUser(this.last_message().sender)},message_count:function(){return this.messages.length},last_message:function(){return this._last_message?this._last_message:this._last_message=new twttr.views.Message(this.messages[0])},other_person:function(){return new twttr.views.User(this.last_was_yours()?this.last_message().recipient:this.last_message().sender)},has_new_message:function(){return this.obj.hasNewMessages()}}),twttr.view("twttr.views.ConversationThreadUser",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.ConversationThreadPreview",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({message_count:function(){return this.count},last_message_date:function(){return this.lastMessageDate},timestamp:function(){return twttr.helpers.timeAgo(this.lastMessageDate,!0,!0)},other_person:function(){return new twttr.views.ConversationThreadUser(this.user)}}),twttr.view("twttr.views.Message",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({linkified_text:function(){var a=b.util.linkify(this.text,{nofollow:!0});return a=b.util.linkifyEntities(a,this),a},timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0,!0)},time_ago:function(){return twttr.helpers.timeAgoRounded(this.actual_timestamp())},actual_timestamp:function(){return twttr.helpers.parseDateString(this.created_at)}}),twttr.view("twttr.views.ProfileSignupCallOut",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.DashboardProfileStats",function(a,b){twttr.views.BaseStats.apply(this,[a]),this.profileStatsTitle=b}).subclassOf(twttr.views.BaseStats).methods({profile_stats_title:function(){return this.profileStatsTitle||_("About @{{screen_name}}",{screen_name:this.obj.screenName})}}),twttr.view("twttr.views.UserStats",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.TrendItem",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({is_sponsored:function(){return!!this.promoted_content},promoted_badge_class:function(){return"badge-"+(this.promoted_content.disclosure_type||"promoted")},trend_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.TREND}}),twttr.view("twttr.views.LocalTrendLocation",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.LocalTrendLocationNew",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.FollowList").methods({follow_list:function(){return(new twttr.views.UserThumbList(this.users)).html()}}),twttr.view("twttr.views.LocalTrends",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({_sortPlaces:function(a){return a.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0})},country_locations:function(){var a=[],c;for(var d=0;d<this.items.length;d++){var e=this.items[d];if(e.placeType.code!==b.constants.placeTypes.city){if(e.placeType.code==19){c=e;continue}a.push(e)}}return a=this._sortPlaces(a),c&&a.unshift(c),a},city_locations:function(){var a=[];for(var c=0;c<this.items.length;c++){var d=this.items[c];d.placeType.code===b.constants.placeTypes.city&&a.push(d)}return a=this._sortPlaces(a),a}}),twttr.view("twttr.views.LocalTrendsNew",function(a,b){twttr.views.BaseAPIList.call(this,a),this.forceShowLocations=b}).subclassOf(twttr.views.BaseAPIList).methods({_sortPlaces:function(a){return a.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0})},breadcrumbs:function(){if(this.is_personalized())return null;var a=twttr.trendLocations.withFilterAncestors().reverse();if(twttr.decider.isAvailable("personalized_trends")){var b=twttr.trendLocations.current;a[a.length-1].woeid!=b.woeid&&a.push(b)}return a[a.length-1]=$.extend({is_last:!0},a[a.length-1]),a},is_personalized:function(){return twttr.decider.isAvailable("personalized_trends")&&twttr.trendLocations.current.isPersonalized},show_personalized:function(){return this.is_personalized()&&!this.forceShowLocations},locations:function(){var a=this._sortPlaces(twttr.trendLocations.currentChildren());return twttr.trendLocations.current.isPersonalized&&a.unshift(twttr.trendLocations.worldwide()),a},locationsFor:function(a){var b=this.locations(),c=Math.ceil(b.length/3);return b.slice(a*c,(a+1)*c)},locations0:function(){return this.locationsFor(0)},locations1:function(){return this.locationsFor(1)},locations2:function(){return this.locationsFor(2)}}),twttr.view("twttr.views.Dialog",function(a){this.options=a;var b=this.options.template||this.options;twttr.views.Base.call(this,b)}),twttr.view("twttr.views.TweetDialog",function(a){this.options=a,this.options.fixed=!0,twttr.views.Dialog.call(this,a)}).subclassOf(twttr.views.Dialog).template(twttr.templates.dialog).methods(twttr.EventProvider).methods({afterRender:function(a){var b={container_id:"tweetbox",condensed:!1,closeAfterSuccess:!1,template:{button_text:this.options.tweetButton||_("Tweet"),show_geo:this.options.template.show_geo,show_turkey:this.options.template.show_turkey},statusAction:this.options.statusAction||"update",data:this.options.data,defaultContent:this.options.defaultContent||"",height:56,width:452,origin:this.options.origin,enableDraft:this.options.enableDraft,enableAutoGrow:!0};this.tweetBox=new twttr.TweetBox(a.find(".twttr-dialog-content"),b),this.tweetBox.bind("ready",twttr.bind(this,function(){this.trigger("ready")}))}}),twttr.view("twttr.views.Footer",function(){twttr.views.Base.apply(this,arguments)}).methods({year:function(){return(new Date).getFullYear()}}),twttr.view("twttr.views.ReplyDialog",function(a){this.options=a,this.options.statusAction="reply",twttr.views.TweetDialog.call(this,this.options)}).subclassOf(twttr.views.TweetDialog).mixin(twttr.mixins.i18nTweet).template(twttr.templates.dialog).methods({afterRender:function(a){twttr.views.TweetDialog.prototype.afterRender.call(this,a);var c=this;twttr.API.Status.find(this.options.data.tweetId,twttr.bind(this,function(d){var e=new twttr.views.ReplyDialogFooter({screen_name:d.user.screenName,text:b.util.linkifyEntities(b.util.linkify(d.text,{nofollow:!0}),d),profile_image_url:d.user.profileImageUrl});e.render(a.find(".twttr-dialog-footer"),"append"),a.find("div.tweet").each(function(){c.updateRtlDisplay($(this))})}))}}),twttr.view("twttr.views.KeyboardShortcuts").methods({current_user_screen_name:function(){return twttr.currentUser.screenName}}),twttr.view("twttr.views.UserThumbList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.TweetActivityThumbList",function(){twttr.views.UserThumbList.apply(this,arguments),twttr.each(this.items.slice(this.constructor.max_items_to_show),function(a){a.is_hidden=!0})}).template(twttr.templates.user_thumb_list).subclassOf(twttr.views.UserThumbList).statics({max_items_to_show:5}),twttr.view("twttr.views.UserSmallListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserThumbListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserSmallList",function(a){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserSmallListItem}),twttr.view("twttr.views.UserDetailedListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserDetailedList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserDetailedListItem}),twttr.view("twttr.views.UserStaticListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.UserStaticList",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.UserStaticListItem}),twttr.view("twttr.views.UserItemAction",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.RecentlyViewed",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.ContactImportMatchesStats",function(){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({follow_all_text:function(){return this.count<=1?_("Follow all"):_("Follow all {{count}}",{count:this.count-this.following_count})}}),twttr.view("twttr.views.DashboardContactImportMatchesStats",function(){twttr.views.ContactImportMatchesStats.apply(this,arguments)}).subclassOf(twttr.views.ContactImportMatchesStats),twttr.view("twttr.views.MatchedContactUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.InviteContacts",function(){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({select_all_text:function(){return this.contacts.length==1?_("Select all"):_("Select all {{count}}",{count:this.contacts.length})},preview_link_url:twttr.router.invitationEmailPreviewPath,truncate:function(){return function(a,b){var c=28,d=b(a);return twttr.helpers.truncate(d,c)}}}),twttr.view("twttr.views.FollowingPage").methods({following_header_string:function(){var a=this.friends_count;if(a==1)return this.is_current_user()?_("You follow 1 person"):_("{{user}} follows 1 person",{user:this.name});var c=b.util.formatNumber(a,twttr.pageLocale);return this.is_current_user()?_("You follow {{num}} people",{num:c}):_("{{user}} follows {{num}} people",{user:this.name,num:c})},following_count_commaized:function(){return b.util.formatNumber(this.friends_count,twttr.pageLocale)}}),twttr.view("twttr.views.FollowingSubtabs",function(){twttr.views.Base.apply(this,arguments),this["active_subtab_"+this.subtab]=1,this.screen_name=this.screenName}).subclassOf(twttr.views.Base),twttr.view("twttr.views.FollowersPage").methods({followers_header_string:function(){var a=this.followers_count;if(a==1)return this.is_current_user()?_("You have 1 follower"):_("{{user}} has 1 follower",{user:this.name});var c=b.util.formatNumber(a,twttr.pageLocale);return this.is_current_user()?_("You have {{num}} followers",{num:c}):_("{{user}} has {{num}} followers",{user:this.name,num:c})},followers_count_commaized:function(){return b.util.formatNumber(this.followers_count,twttr.pageLocale)}}),twttr.view("twttr.views.FollowersSubtabs",function(){twttr.views.Base.apply(this,arguments),this["active_subtab_"+this.subtab]=1,this.screen_name=this.screenName}).subclassOf(twttr.views.Base),twttr.view("twttr.views.WelcomeAmbassador",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.WelcomeLearnFlow",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser).methods({name:function(){return twttr.currentUser.name}}),twttr.view("twttr.views.RecentTweets",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.SimpleTweet,screen_name:function(){return this.items[0].user.screen_name}}),twttr.view("twttr.views.Replies",function(a,b,c){twttr.views.BaseAPI.apply(this,arguments),this.descendants=b||[],this.forks=c||[]}).subclassOf(twttr.views.BaseAPI).methods({_viewFor:function(a){return new twttr.views.StreamTweet(a)},_viewsFor:function(a){var b=this;return twttr.map(a,function(a){return b._viewFor(a)})},has_replies:function(){return!0},has_tweets:function(){return this.descendants.length>0||this.forks.length>0},descendant_tweet_views:function(){return this._viewsFor(this.descendants)},fork_tweet_views:function(){return this._viewsFor(this.forks)},on_permalink:function(){return twttr.app.isOnPage("permalink")}}),twttr.view("twttr.views.TweetActivity").methods({_list_for:function(a){return userList=new twttr.API.util.BaseCollection(a),(new twttr.views.TweetActivityThumbList(userList)).html()},_count_for:function(a,b){return(new twttr.views.TweetActivityCount({length:a,is_retweets:b==="retweeters",is_favorites:b==="favoriters",is_replies:b==="repliers"})).html()},_show_count:function(a){return a.length>twttr.views.TweetActivityThumbList.max_items_to_show},show_retweets_count:function(){return this._show_count(this.activities.retweeters)},show_replies_count:function(){return this._show_count(this.activities.repliers)},show_favorites_count:function(){return this._show_count(this.activities.favoriters)},favorites_list:function(){return this._list_for(this.activities.favoriters)},retweets_list:function(){return this._list_for(this.activities.retweeters)},replies_list:function(){return this._list_for(this.activities.repliers)},retweets_count:function(){return this._count_for(this.counts.retweeters_count,"retweeters")},favorites_count:function(){return this._count_for(this.counts.favoriters_count,"favoriters")},replies_count:function(){return this._count_for(this.counts.repliers_count,"repliers")},is_retweets_empty:function(){return this.activities.retweeters.length===0},is_favorites_empty:function(){return this.activities.favoriters.length===0},is_replies_empty:function(){return this.activities.repliers.length===0},is_activity_empty:function(){var a=this.is_favorites_empty()&&this.is_retweets_empty(),b=!this.in_permalink_page&&a,c=this.in_permalink_page&&this.is_replies_empty()&&a;return b||c}}),twttr.view("twttr.views.ActivityOfMeStreamTitle").methods({should_see_activity_filters:function(){return twttr.currentUser&&twttr.currentUser.followersCount>=2e3}}),twttr.view("twttr.views.ActivityItemUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.ActivityItem",function(){twttr.views.BaseAPI.apply(this,arguments),this.is_your_activity=this.for_stream==="your_activity",this.is_network_activity=this.for_stream==="activity"}).subclassOf(twttr.views.BaseAPI).template(twttr.templates.activity_item).mixin(twttr.mixins.ActivityViewHelpers).methods({_getSupplement:function(a){var b=this.constructor.supplements[this.for_stream][this.event];b.primary&&(b=a?b.secondary:b.primary);if(b.sources&&b.targets){var c=(this.is_retweet||this.is_favorite)&&this.sources.length===1&&this.targets.length>1;b=c?b.targets:b.sources}return b},_traverse:function(a,b,c){twttr.is.def(c)||(c=0);if(!b||c>=b.length)return a;var d=b[c];if(twttr.is.def(a[d])&&!twttr.is.nil(a[d]))return this._traverse(a[d],b,c+1)},_populateSubsWithObjects:function(a,b,c,d){if(!d)return;var e=this;return twttr.inject(a,b,function(a,b,f){var g=e.constructor.substitutionKeyForObjectType[d],i=twttr.API.Activity.classMap[e.event][c],j=e._traverse(f,e.constructor.translateToObjectType[d][i]);return a[c+"_"+g+"_"+b]=(new twttr.views[e.constructor.viewForObjectType[e.for_stream][d]](j)).html(),a})},_populateSubsWithCounts:function(a,b,c){var d=c+"_count",e=this[c+"_size"];return b["full_"+d]=e,b[d]=e-1,b},_activity_supplement:function(a){var b=this,c=this._getSupplement(a||!1),d=4,e=twttr.views[c.view],f=this[c.object],g=Math.min(c.max,f.length)-1,i=twttr.views.StreamUser===e;return twttr.map(f,function(c,f){var j;return a&&f==0?"":(c.embedded_by_activity=!0,c.is_your_activity=b.is_your_activity,c.is_network_activity=b.is_network_activity,c.for_activity=c.is_your_activity||c.is_network_activity,f>g&&(twttr.isT1?(c.hidden_by_activity=!0,c.hidden_stack_class_name=f<d?"stack-item-"+f:"stack-item-hidden"):c.hidden=!0),j=new e(c),i&&(b.is_your_activity?(j.avatar_size_class="size24",j.profile_image_url=j.mini_profile_image_url()):(j.avatar_size_class="size73",j.profile_image_url=j.bigger_profile_image_url())),twttr.isT1?Mustache.to_html("<div class='supplement{{#is_hidden_supplement}} hidden-supplement {{hidden_stack_class_name}}{{/is_hidden_supplement}}{{^is_hidden_supplement}} visible-supplement{{/is_hidden_supplement}}'>{{{supplement}}}</div>",{supplement:j.html(),is_hidden_supplement:c.hidden_by_activity,hidden_stack_class_name:c.hidden_stack_class_name}):j.html())}).join("")},icon_class:function(){return this.constructor.iconClasses[this.event]},should_show_first_actor:function(){return!this.is_your_activity||this.is_list_member_added},first_actor:function(){return new twttr.views.BaseUser(this.sources[0])},view_all_supplements_sentence:function(){var a=this.constructor.supplementViewAllSentences[this.event];if(!a)return"";var b;if(twttr.isT1){var c=this.hidden_supplements_count();a=a[Math.min(a.length,c)-1],b={hidden_count:c}}else b=this.sources[0];return Mustache.to_html(a,b)},has_secondary_supplement:function(){var a=this.sources.length>this.constructor.maxQualifiedEntities;return!this.is_your_activity&&a&&(this.is_follow||this.is_retweet&&this.target_objects.length===1||this.is_favorite&&this.targets.length===1)},has_hidden_supplements:function(){var a=this._getSupplement(),b=this[a.object];return b.length>a.max&&a.objectType==="Status"},hidden_supplements_count:function(){if(!this.has_hidden_supplements())return 0;var a=this._getSupplement(),b=this[a.object];return b.length-a.max},supplement_count:function(){var a=this._getSupplement(),b=this[a.object];return b.length},user_supplement_and_count_greater_than_two:function(){return(this.is_follow||this.is_list_member_added)&&this.supplement_count()>2},user_supplement_and_count_exactly_two:function(){return(this.is_follow||this.is_list_member_added)&&this.supplement_count()===2},should_show_truncated_tweet:function(){return this.is_your_activity&&(this.is_retweet||this.is_favorite)&&this._getSupplement().useTruncated},truncated_tweet:function(){var a;if(this.is_retweet)a=this.target_objects[0];else{if(!this.is_favorite)throw new Error("You shouldn't be using truncated_tweet() if not a retweet or favorite!");a=this.targets[0]}return(new twttr.views.LatestTweet(a)).html()},activity_supplement:function(){return this._activity_supplement()},activity_secondary_supplement:function(){return this._activity_supplement(!0)},activity_line:function(){var a=this,b={},c=this.constructor.objectClasses[this.event][this.for_stream],d=this.constructor.objectStrings[this.event][this.for_stream];(!d||!c)&&console.error("Should not have an activity item with this verb in this stream!",this);var e=this.constructor.lineItemObjects;b.position=this.min_position,this._populateSubsWithObjects(this[e[this.event].sources],b,"sources",c.sourceClass),this._populateSubsWithObjects(this[e[this.event].targets],b,"targets",c.targetClass),this._populateSubsWithObjects(this[e[this.event].target_objects],b,"target_objects",c.targetObjectClass),this._populateSubsWithCounts(this.sources,b,"sources"),this._populateSubsWithCounts(this.targets,b,"targets"),this._populateSubsWithCounts(this.target_objects,b,"target_objects");var f=this._getSupplement();if(this.is_your_activity&&this.sources.length>f.max||this.has_secondary_supplement())b.link_sources_count=!0;var g=d[Math.min(this.sources.length,d.length)-1];return twttr.is.array(g)&&(g=g[Math.min(this.targets.length,g.length)-1],twttr.is.array(g)&&(g=g[Math.min(this.target_objects.length,g.length)-1])),Mustache.to_html(g,b)},full_timestamp:function(){return twttr.helpers.timeAgo(this.actual_timestamp(),!0)},actual_timestamp:function(){return twttr.helpers.parseDateString(this.created_at)},afterRender:function(a){twttr.isT1||this.is_your_activity&&setTimeout(function(){twttr.helpers.ellipsify(a.find(".stream-item-activity-line .tweet-row"))},0)}}),twttr.view("twttr.views.DashboardActivityItem",function(){twttr.views.ActivityItem.apply(this,arguments)}).subclassOf(twttr.views.ActivityItem),twttr.view("twttr.views.StreamUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.DashboardStreamUser",function(){this.constructor.uber.constructor.apply(this,arguments)}).subclassOf(twttr.views.StreamUser),twttr.view("twttr.views.StreamFollowerRequest",function(){this.constructor.uber.constructor.apply(this,arguments)}).subclassOf(twttr.views.StreamUser),twttr.view("twttr.views.ProfileUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.ProfileFollowCard",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.MiniProfileStats",function(){twttr.views.BaseStats.apply(this,arguments)}).subclassOf(twttr.views.BaseStats),twttr.view("twttr.views.List",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({is_public:function(){return this.mode==="public"||this.mode===undefined},is_own_list:function(){return twttr.helpers.isCurrentUser(this.user)},user_list_path:function(){return twttr.router.userListPath({screen_name:this.user.screen_name,list_slug:this.slug})},list_subscribers_path:function(){return twttr.router.listSubscribersPath({screen_name:this.user.screen_name,list_slug:this.slug})},list_members_path:function(){return twttr.router.listMembersPath({screen_name:this.user.screen_name,list_slug:this.slug})},full_name_sans_at:function(){return this.full_name.replace(/^[@＠]/,"")}}),twttr.view("twttr.views.ListLink",function(){twttr.views.List.apply(this,arguments)}).subclassOf(twttr.views.List),twttr.view("twttr.views.NewestListMembers").subclassOf(twttr.views.List),twttr.view("twttr.views.StreamList").subclassOf(twttr.views.List),twttr.view("twttr.views.ListStreamTitle").subclassOf(twttr.views.List),twttr.view("twttr.views.ListHeader").subclassOf(twttr.views.List),twttr.view("twttr.views.ListActions").subclassOf(twttr.views.List),twttr.view("twttr.views.ListStreamTabs").subclassOf(twttr.views.List),twttr.view("twttr.views.ListFollowCard").subclassOf(twttr.views.List),twttr.view("twttr.views.ListOfLists",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.List}),twttr.view("twttr.views.ListDialog").subclassOf(twttr.views.List),twttr.view("twttr.views.Retweeters",function(a){twttr.views.Base.apply(this,arguments),this.count=a.count,this.retweeters=a.retweeters.map(function(a){return new twttr.views.BaseUser(a)}).array}).methods({retweeted_by_count:function(){var a=this.tweet.retweetingStatus?new twttr.views.BaseUser(this.tweet.retweetingStatus.user):this.retweeters[0],b=Mustache.to_html('<a class="user-profile-link" data-user-id="{{id}}" href="{{path}}" >{{screen_name}}</a>',{id:a.id,path:twttr.router.profilePath({screen_name:a.screen_name}),screen_name:a.screen_name});return this.count===1?_("Retweeted by {{{user_link}}}",{user_link:b}):this.count===2?_("Retweeted by {{{user_link}}} and 1 other",{user_link:b}):this.count?_("Retweeted by {{{user_link}}} and {{count}} others",{user_link:b,count:this.count}):_("Retweeted by {{{user_link}}} and others",{user_link:b})}}),twttr.view("twttr.views.ProfilePage").methods({has_pending_requests:function(){return twttr.helpers.isProfileUser()&&twttr.currentUser["protected"]},is_withheld:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"},is_withheld_copyright:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"&&!!twttr.profileUser.withheldCopyright},is_current_user:function(){return twttr.helpers.isCurrentUser(twttr.profileUser.id)},render_withheld:function(){return this.is_withheld()&&!this.is_current_user()}}),twttr.view("twttr.views.StreamSuggestionCategory",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,2)):!1},category_name:function(){return this.obj.name}}),twttr.view("twttr.views.CardNewsOnebox").subclassOf(twttr.views.BaseAPI).methods({article_image:function(){return this.obj.getImage(twttr.isSSL())},article_url:function(){return this.obj.getExpandedUrl()},article_display_url:function(){return this.obj.getDisplayUrl()}}),twttr.view("twttr.views.CardEventOnebox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.CardAccountsOneboxItem").subclassOf(twttr.views.BaseUser).methods({is_onebox:!0}),twttr.view("twttr.views.CardAccountsOnebox",function(a,b){twttr.views.BaseAPIList.call(this,a),this.view_all_path=b}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.CardAccountsOneboxItem}),using(twttr.isT1?"multiGlobals/more_views_t1":"multiGlobals/more_views_p1",function(){twttr.views.makeDefaultViews(twttr.templates),a()})})}),provide("multiGlobals/more_views_t1",function(a){using("util","constants","mixins/t1/discoveryStoryHelpers").as(function(b){twttr.view("twttr.views.MiniProfileUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.MiniCurrentUser",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.Nav").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.AvatarRow",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BaseUser}),twttr.view("twttr.views.TypeaheadSearchItem",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({search_query_source:function(){return twttr.is.def(this.id)?twttr.search.searchQuerySource.SAVED_SEARCH:twttr.search.searchQuerySource.TYPEAHEAD}}),twttr.view("twttr.views.TypeaheadAccountsShortcut",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({search_query_source:function(){return twttr.search.searchQuerySource.TYPEAHEAD}}),twttr.view("twttr.views.ProtectedAncestorTweet").subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.CardNews",function(a){twttr.views.BaseAPI.call(this,a.content.articles.get(0)),this.position=a.position,this.social_proof=a.attributes.social_proof,this.scribeComponent="card_news"}).subclassOf(twttr.views.BaseAPI).mixin(twttr.mixins.discoverySearchHelper).methods({article_display_url:function(){return this.obj.getDisplayUrl()},article_image:function(){return this.obj.getImage(twttr.isSSL())},article_url:function(){return this.obj.getExpandedUrl()}}),twttr.view("twttr.views.CardTopic",function(a){twttr.views.BaseAPI.call(this,a.content),this.position=a.position,this.scribeComponent="card_topic";if(a.content.media&&a.content.media.length>0){var b=a.content.media[0];this.has_image=b.type==="photo"&&twttr.decider.isAvailable("t1d_topic_img"),this.has_video=b.type==="video"&&twttr.decider.isAvailable("t1d_topic_vid"),this.has_media=this.has_image||this.has_video,this.tweet=a.content.tweet,this.tweet&&this.tweet.user&&(this.tweet.user.profile_image_url=twttr.assets.getPathFromAbsoluteURL(this.tweet.user.profile_image_url,{isVersioned:!1})),this.has_media&&(this.mediaInstance=twttr.media.matchInstance(b.media_url),this.image_url=this.getImageUrl(["large","medium","original"]),this.has_media=!!this.image_url)}this.media_type=this.has_image?"image":this.has_video?"video":null}).subclassOf(twttr.views.BaseAPI).mixin(twttr.mixins.discoverySearchHelper,twttr.mixins.discoveryMediaRenderHelper).methods({getImageUrl:function(a){if(!this.media||this.media.length===0)return null;var b=this.media[0];for(var c=0;c<a.length;c++){var d=a[c];if(b.sizes[d]){var e=b.sizes[d].url;if(e){if(twttr.isSSL()){var f=b.sizes[d].url_https;return f?f:this.mediaInstance&&this.mediaInstance.constructor.ssl?e.replace(/^http:/,"https:"):e}return e}}}return null},tweet_text:function(){var a=this.text,b=this,c=this.entities&&this.entities.urls;c&&twttr.each(c,function(b){b.display_url&&(a=a.replace(h(b.url),h(b.display_url)))});var d=this.entities&&this.entities.media;return d&&twttr.each(d,function(c){var d=b.text.substring(c.indices[0],c.indices[1]);c.display_url&&(a=a.replace(h(d),h(c.display_url)))}),a},card_url:function(){return this.tweet?twttr.router.permalinkPath({screen_name:this.tweet.user.screen_name,id:this.tweet.id_str}):twttr.router.searchFacetsSlideshowPath({query:this.obj.query,mode:this.has_image?"photos":"videos"})+"?url="+encodeURIComponent(this.media[0].media_url)},attribution_url:function(){return this.mediaInstance?this.mediaInstance.domainUrl():""},attribution_img:function(){return this.mediaInstance?this.mediaInstance.iconUrl():""},attribution_name:function(){return this.mediaInstance?this.mediaInstance.attributionName():""},has_attribution:function(){return this.mediaInstance?this.mediaInstance.hasAttributionInDiscovery():!0}}),twttr.view("twttr.views.StreamInterestCategory").subclassOf(twttr.views.BaseAPI).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,7)):!1},interest_name:function(){return this.obj.name}}),twttr.view("twttr.views.DashboardStreamInterestCategory").subclassOf(twttr.views.StreamInterestCategory).template(twttr.templates.stream_interest_category).methods({user_sample:function(){return this.obj.sample&&this.obj.sample.length?new twttr.views.UserStaticList(this.obj.sample.slice(0,3)):!1}}),twttr.view("twttr.views.WelcomeLearnProfile").subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.StreamViewTogglerBase",function(){twttr.views.StreamViewToggler.apply(this,arguments)}),twttr.view("twttr.views.MentionsStreamViewToggler",function(a){twttr.views.StreamViewTogglerBase.call(this,{title1:_("All"),active1:!a,route1:twttr.router.connectPath(),title2:_("Mentions"),active2:a,route2:twttr.router.mentionsPath()})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ProfileStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("With Replies"),active1:a,route1:twttr.router.profileWithRepliesPath({screen_name:b.screenName}),title2:_("Without"),active2:!a,route2:twttr.router.profilePath({screen_name:b.screenName})})}).subclassOf(twttr.views.StreamViewTogglerBase).template(twttr.templates.stream_view_toggler),twttr.view("twttr.views.SearchStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Top"),active1:b=="relevance",route1:twttr.router.searchResultsPath({query:a}),tip1:"Find the most relevant tweets",title2:_("All"),active2:b=="tweets",tip2:"Find the most recent tweets",route2:twttr.router.searchRealtimePath({query:a}),title3:_("People you follow"),active3:b=="timeline",route3:twttr.router.searchTimelinePath({query:a}),tip3:"Find tweets from people you follow"})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ListsStreamViewToggler",function(a){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Subscribed to"),active1:!a,route1:twttr.router.listsYouFollowPath(),title2:_("Member of"),active2:a,route2:twttr.router.listsFollowingYouPath()})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.FollowersStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("All"),active1:!b,route1:twttr.router.userFollowersPath({screen_name:a}),title2:_("You know"),active2:b,route2:twttr.router.followersYouFollowPath({screen_name:a})})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.ProfileListsStreamViewToggler",function(a,b){twttr.views.StreamViewTogglerBase.call(this,{title1:_("Subscribed to"),active1:a,route1:twttr.router.subscriptionsPath(b),title2:_("Member of"),active2:!a,route2:twttr.router.membershipsPath(b)})}).subclassOf(twttr.views.StreamViewTogglerBase),twttr.view("twttr.views.StreamSavedSearch",function(){twttr.views.BaseAPI.apply(this,arguments)}).subclassOf(twttr.views.BaseAPI).methods({saved_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.SAVED_SEARCH}}),twttr.view("twttr.views.DirectMessageDialogConversationList",function(){var a=this;twttr.views.Base.apply(a,arguments),a.items=[],twttr.each(a.threads,function(b){a.items.push(new twttr.views.DirectMessageDialogConversationListItem(b))})}).subclassOf(twttr.views.Base),twttr.view("twttr.views.DirectMessageDialogConversationListItem",function(){twttr.views.Base.apply(this,arguments),this.last_message=new twttr.views.Message(this.messages[0]),this.is_last_message_mine=twttr.helpers.isCurrentUser(this.last_message.sender)}).methods({is_unread:function(){return this.obj.hasNewMessages()},last_message_text:function(){var a=this.last_message,c=a.text;return a.entities&&a.entities.urls&&twttr.each(a.entities.urls,function(a){a.display_url&&(c=c.replace(new RegExp(b.util.escapeRegExpChars(h(a.url))),h(a.display_url)))}),c},last_message_timestamp:function(){return this.last_message.timestamp()},last_message_actual_timestamp:function(){return this.last_message.actual_timestamp()},is_replied:function(){return this.is_last_message_mine&&this.messages.length>1},other_person:function(){return this.last_message[this.is_last_message_mine?"recipient":"sender"]}}),twttr.view("twttr.views.DirectMessageDialogConversation",function(){var a=this;twttr.views.Base.apply(a,arguments),a.items=[];for(var b=a.messages.length-1;b>=0;b--)a.items.push(new twttr.views.DirectMessageDialogConversationItem(a.messages[b]))}).subclassOf(twttr.views.Base),twttr.view("twttr.views.DirectMessageDialogConversationItem",function(){twttr.views.Message.apply(this,arguments)}).subclassOf(twttr.views.Message).methods({sent_or_received:function(){return twttr.helpers.isCurrentUser(this.sender)?"sent":"received"}}),twttr.view("twttr.views.TweetDetails",function(){twttr.views.BaseTweet.apply(this,arguments)}).subclassOf(twttr.views.BaseTweet),twttr.view("twttr.views.Ancestors",function(a){twttr.views.BaseAPI.apply(this,arguments),this._ancestors=a||[]}).subclassOf(twttr.views.BaseAPI).methods({_viewFor:function(a){return new twttr.views.SimpleTweet(a)},_viewsFor:function(a){var b=this;return twttr.map(a,function(a){return b._viewFor(a)})},ancestors:function(){return this._ancestors.length?this._viewsFor(this._ancestors):null}}),twttr.view("twttr.views.TweetStats",function(a){twttr.views.Base.apply(this,arguments)}).subclassOf(twttr.views.Base).methods({replies_count:function(){return this.repliers&&this.repliers.length?this.repliers_count:!1},retweets_count:function(){return this.retweeters&&this.retweeters.length?this.retweeters_count:!1},favorites_count:function(){return this.favoriters&&this.favoriters.length?this.favoriters_count:!1}}),twttr.view("twttr.views.BigAvatarListItem",function(){twttr.views.BaseUser.apply(this,arguments)}).subclassOf(twttr.views.BaseUser),twttr.view("twttr.views.WebPersonalizationResults",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.BigAvatarListItem,has_recs:function(){return this.items&&this.items.length>0}}),twttr.view("twttr.views.GlobalNavSavedSearch").subclassOf(twttr.views.BaseAPI).methods({saved_search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.SAVED_SEARCH}}),twttr.view("twttr.views.GlobalNavSavedSearches",function(){twttr.views.BaseAPIList.apply(this,arguments)}).subclassOf(twttr.views.BaseAPIList).methods({ItemView:twttr.views.GlobalNavSavedSearch}),twttr.view("twttr.views.GeoMapSmall").subclassOf(twttr.views.Base).methods({place_map_url:function(){return twttr.geo.getPlaceFullAddressAndMapLink(this).map_link}}),twttr.view("twttr.views.PageProfile").methods({is_withheld:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"},is_withheld_copyright:function(){return twttr.decider.isAvailable("phoenix_pctd")&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope=="user"&&!!twttr.profileUser.withheldCopyright},is_current_user:function(){return twttr.helpers.isCurrentUser(twttr.profileUser.id)},render_withheld:function(){return this.is_withheld()&&!this.is_current_user()}}),twttr.view("twttr.views.InlineReplyBox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.SoccerMatchedEvent").subclassOf(twttr.views.BaseAPI).methods({_currentStatus:function(){return this.obj.events.getMatchState().current_status},_appendTeamPage:function(a){return a.user?a.team_page=twttr.router.profilePath({screen_name:a.user.screen_name}):a.team_page=a.landing_page_url,a},getEvents:function(){return this.obj.events},home_team:function(){return this._appendTeamPage(this.obj.events.getMatchedTeam(!0))},score:function(){if(this._currentStatus()==="scheduled")return null;var a=this.obj.events.getMatchState().score;return a.search_path=this.search_path(),a},away_team:function(){return this._appendTeamPage(this.obj.events.getMatchedTeam(!1))},match_state:function(){var a=this.obj.events.getMatchState();a.show_time_elapsed_time=!1;if(a.current_status==="inprogress"){a.show_time_elapsed_time=!0;var b=0,c=0,d=a.current_period_elapsed_time+1;return a.overtime?d>15?(b=a.current_period===2?120:105,c=d-15):b=(a.current_period===2?105:90)+d:d>45?(b=a.current_period===2?90:45,c=d-45):b=(a.current_period===2?45:0)+d,a.penalty_shootout?(a.current_period_string=_("PK"),a.current_period_elapsed_time_string=null):(a.current_period_elapsed_time_string=Mustache.to_html(_("{{minutes}} min{{#extra_time}} (+{{extra_time}}){{/extra_time}}",{minutes:b,extra_time:c})),a.overtime?a.current_period_string=_("ET"):a.current_period===1?a.current_period_string=_("1st half"):a.current_period_string=_("2nd half")),a}return a.current_status==="halftime"?(a.overtime?a.current_period_string=_("ET"):a.penalty_shootout?a.current_period_string=_("PK"):a.current_period_string=_("Halftime"),a):null},preview:function(){return this._currentStatus()==="scheduled"?{time:twttr.helpers.prettyTime(this.obj.events.getMatchedEventData().scheduled_start_time_utc,!0),url:this.obj.events.getMatchedEvent().preview_url,search_path:this.search_path()}:null},recap:function(){var a=this.obj.events.getMatchState();return a.current_status==="final"?{url:this.obj.events.getMatchedEvent().recap_url}:null},hashtag:function(){return this.obj.events.getMatchedEvent().event_data.match_hashtag},search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.obj.events.getMatchedEvent().event_data.match_hashtag)})},show_follow:function(){return!twttr.loggedIn}}),twttr.view("twttr.views.CardSoccerOnebox").subclassOf(twttr.views.BaseAPI),twttr.view("twttr.views.SoccerTicker").subclassOf(twttr.views.BaseAPI).methods({ticker_list:function(){return this.obj.events.getOtherMatchState()},preview:function(){return this.obj.events.getOtherMatchState().length===0?this.obj.events.data().follow_news:null}}),a()})}),provide("$lib/easyXDM.js",function(a){(function(a,b,c,d,e,f){function t(a,b){var c=typeof a[b];return c=="function"||c=="object"&&!!a[b]||c=="unknown"}function u(a,b){return typeof a[b]=="object"&&!!a[b]}function v(a){return Object.prototype.toString.call(a)==="[object Array]"}function w(a){try{var b=new ActiveXObject(a);return b=null,!0}catch(c){return!1}}function C(){C=j,z=!0;for(var a=0;a<A.length;a++)A[a]();A.length=0}function E(a,b){if(z){a.call(b);return}A.push(function(){a.call(b)})}function F(){var a=parent;if(n!=="")for(var b=0,c=n.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function G(b){return a.easyXDM=p,n=b,n&&(q="easyXDM_"+n.replace(".","_")+"_"),o}function H(a){return a.match(k)[3]}function I(a){var b=a.match(k),c=b[2],d=b[3],e=b[4]||"";if(c=="http:"&&e==":80"||c=="https:"&&e==":443")e="";return c+"//"+d+e}function J(a){a=a.replace(m,"$1/");if(!a.match(/^(http||https):\/\//)){var b=a.substring(0,1)==="/"?"":c.pathname;b.substring(b.length-1)!=="/"&&(b=b.substring(0,b.lastIndexOf("/")+1)),a=c.protocol+"//"+c.host+b+a}while(l.test(a))a=a.replace(l,"");return a}function K(a,b){var c="",d=a.indexOf("#");d!==-1&&(c=a.substring(d),a=a.substring(0,d));var e=[];for(var g in b)b.hasOwnProperty(g)&&e.push(g+"="+f(b[g]));return a+(s?"#":a.indexOf("?")==-1?"?":"&")+e.join("&")+c}function M(a){return typeof a=="undefined"}function N(){var a={},b={a:[1,2,3]},c='{"a":[1,2,3]}';return typeof JSON!="undefined"&&typeof JSON.stringify=="function"&&JSON.stringify(b).replace(/\s/g,"")===c?JSON:(Object.toJSON&&Object.toJSON(b).replace(/\s/g,"")===c&&(a.stringify=Object.toJSON),typeof String.prototype.evalJSON=="function"&&(b=c.evalJSON(),b.a&&b.a.length===3&&b.a[2]===3&&(a.parse=function(a){return a.evalJSON()})),a.stringify&&a.parse?(N=function(){return a},a):null)}function O(a,b,c){var d;for(var e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],typeof d=="object"?O(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a}function P(){var c=b.createElement("iframe");c.name=q+"TEST",O(c.style,{position:"absolute",left:"-2000px",top:"0px"}),b.body.appendChild(c),r=c.contentWindow!==a.frames[c.name],b.body.removeChild(c)}function Q(a){M(r)&&P();var c;r?c=b.createElement("<iframe name='"+a.props.name+"' frameborder='0' allowtransparency='false' tabindex='-1', role='presentation' scrolling='no' />"):(c=b.createElement("IFRAME"),c.name=a.props.name,c.setAttribute("frameborder","0"),c.setAttribute("allowtransparency","false"),c.setAttribute("tabindex","-1"),c.setAttribute("role","presentation"),c.setAttribute("scrolling","no")),c.id=c.name=a.props.name,delete a.props.name,a.onLoad&&x(c,"load",a.onLoad),typeof a.container=="string"&&(a.container=b.getElementById(a.container)),a.container||(c.style.position="absolute",c.style.top="-2000px",a.container=b.body);var d=a.props.src;return delete a.props.src,O(c,a.props),c.border=c.frameBorder=0,a.container.appendChild(c),c.src=d,a.props.src=d,c}function R(a,b){typeof a=="string"&&(a=[a]);var c,d=a.length;while(d--){c=a[d],c=new RegExp(c.substr(0,1)=="^"?c:"^"+c.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$");if(c.test(b))return!0}return!1}function S(d){var e=d.protocol,f;d.isHost=d.isHost||M(L.xdm_p),s=d.hash||!1,d.props||(d.props={});if(!d.isHost){d.channel=L.xdm_c,d.secret=L.xdm_s,d.remote=L.xdm_e,e=L.xdm_p;if(d.acl&&!R(d.acl,d.remote))throw new Error("Access denied for "+d.remote)}else d.remote=J(d.remote),d.channel=d.channel||"default"+i++,d.secret=Math.random().toString(16).substring(2),M(e)&&(I(c.href)==I(d.remote)?e="4":t(a,"postMessage")||t(b,"postMessage")?e="1":t(a,"ActiveXObject")&&w("ShockwaveFlash.ShockwaveFlash")?e="6":navigator.product==="Gecko"&&"frameElement"in a&&navigator.userAgent.indexOf("WebKit")==-1?e="5":d.remoteHelper?(d.remoteHelper=J(d.remoteHelper),e="2"):e="0");switch(e){case"0":O(d,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0);if(d.isHost){if(!d.local){var g=c.protocol+"//"+c.host,j=b.body.getElementsByTagName("img"),k,l=j.length;while(l--){k=j[l];if(k.src.substring(0,g.length)===g){d.local=k.src;break}}d.local||(d.local=a)}var m={xdm_c:d.channel,xdm_p:0};d.local===a?(d.usePolling=!0,d.useParent=!0,d.local=c.protocol+"//"+c.host+c.pathname+c.search,m.xdm_e=d.local,m.xdm_pa=1):m.xdm_e=J(d.local),d.container&&(d.useResize=!1,m.xdm_po=1),d.remote=K(d.remote,m)}else O(d,{channel:L.xdm_c,remote:L.xdm_e,useParent:!M(L.xdm_pa),usePolling:!M(L.xdm_po),useResize:d.useParent?!1:d.useResize});f=[new o.stack.HashTransport(d),new o.stack.ReliableBehavior({}),new o.stack.QueueBehavior({encode:!0,maxLength:4e3-d.remote.length}),new o.stack.VerifyBehavior({initiate:d.isHost})];break;case"1":f=[new o.stack.PostMessageTransport(d)];break;case"2":f=[new o.stack.NameTransport(d),new o.stack.QueueBehavior,new o.stack.VerifyBehavior({initiate:d.isHost})];break;case"3":f=[new o.stack.NixTransport(d)];break;case"4":f=[new o.stack.SameOriginTransport(d)];break;case"5":f=[new o.stack.FrameElementTransport(d)];break;case"6":d.swf||(d.swf="../../tools/easyxdm.swf"),f=[new o.stack.FlashTransport(d)]}return f.push(new o.stack.QueueBehavior({lazy:d.lazy,remove:!0})),f}function T(a){var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var d=0,e=a.length;d<e;d++)b=a[d],O(b,c,!0),d!==0&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function U(a){a.up.down=a.down,a.down.up=a.up,a.up=a.down=null}var g=this,i=Math.floor(Math.random()*1e4),j=Function.prototype,k=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,l=/[\-\w]+\/\.\.\//,m=/([^:])\/\//g,n="",o={},p=a.easyXDM,q="easyXDM_",r,s=!1,x,y;if(t(a,"addEventListener"))x=function(a,b,c){a.addEventListener(b,c,!1)},y=function(a,b,c){a.removeEventListener(b,c,!1)};else{if(!t(a,"attachEvent"))throw new Error("Browser not supported");x=function(a,b,c){a.attachEvent("on"+b,c)},y=function(a,b,c){a.detachEvent("on"+b,c)}}var z=!1,A=[],B;"readyState"in b?(B=b.readyState,z=B=="complete"||~navigator.userAgent.indexOf("AppleWebKit/")&&(B=="loaded"||B=="interactive")):z=!!b.body;if(!z){if(t(a,"addEventListener"))x(b,"DOMContentLoaded",C);else{x(b,"readystatechange",function(){b.readyState=="complete"&&C()});if(b.documentElement.doScroll&&a===top){var D=function(){if(z)return;try{b.documentElement.doScroll("left")}catch(a){d(D,1);return}C()};D()}}x(a,"load",C)}var L=function(a){a=a.substring(1).split("&");var b={},c,d=a.length;while(d--)c=a[d].split("="),b[c[0]]=e(c[1]);return b}(/xdm_e=/.test(c.search)?c.search:c.hash);O(o,{version:"2.4.12.108",query:L,stack:{},apply:O,getJSONObject:N,whenReady:E,noConflict:G}),o.DomHelper={on:x,un:y,requiresJSON:function(c){u(a,"JSON")||b.write('<script type="text/javascript" src="'+c+'"><'+"/script>")}},function(){var a={};o.Fn={set:function(b,c){a[b]=c},get:function(b,c){var d=a[b];return c&&delete a[b],d}}}(),o.Socket=function(a){var b=T(S(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){a.onReady&&a.onReady(b)}}])),c=I(a.remote);this.origin=I(a.remote),this.destroy=function(){b.destroy()},this.postMessage=function(a){b.outgoing(a,c)},b.init()},o.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];typeof d=="function"&&(b.local[c]={method:d})}var e=T(S(a).concat([new o.stack.RpcBehavior(this,b),{callback:function(b){a.onReady&&a.onReady(b)}}]));this.origin=I(a.remote),this.destroy=function(){e.destroy()},e.init()},o.stack.SameOriginTransport=function(a){var b,e,f,g;return b={outgoing:function(a,b,c){f(a),c&&c()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){g=I(a.remote),a.isHost?(O(a.props,{src:K(a.remote,{xdm_e:c.protocol+"//"+c.host+c.pathname,xdm_c:a.channel,xdm_p:4}),name:q+a.channel+"_provider"}),e=Q(a),o.Fn.set(a.channel,function(a){return f=a,d(function(){b.up.callback(!0)},0),function(a){b.up.incoming(a,g)}})):(f=F().Fn.get(a.channel,!0)(function(a){b.up.incoming(a,g)}),d(function(){b.up.callback(!0)},0))},init:function(){E(b.onDOMReady,b)}}},o.stack.FlashTransport=function(a){function m(a){d(function(){e.up.incoming(a,i)},0)}function p(d){var e=a.swf,f="easyXDM_swf_"+Math.floor(Math.random()*1e4),g=l+'easyXDM.Fn.get("flash_'+f+'_init")';o.Fn.set("flash_"+f+"_init",function(){o.stack.FlashTransport.__swf=j=k.firstChild,d()}),k=b.createElement("div"),O(k.style,{height:"1px",width:"1px",postition:"abosolute",left:0,top:0}),b.body.appendChild(k);var i="proto="+c.protocol+"&domain="+H(c.href)+"&init="+g;k.innerHTML="<object height='1' width='1' type='application/x-shockwave-flash' id='"+f+"' data='"+e+"'>"+"<param name='allowScriptAccess' value='always'></param>"+"<param name='wmode' value='transparent'>"+"<param name='movie' value='"+e+"'></param>"+"<param name='flashvars' value='"+i+"'></param>"+"<embed type='application/x-shockwave-flash' FlashVars='"+i+"' allowScriptAccess='always' wmode='transparent' src='"+e+"' height='1' width='1'></embed>"+"</object>"}var e,f,g,i,j,k,l=n?n+".":"";return e={outgoing:function(b,c,d){j.postMessage(a.channel,b),d&&d()},destroy:function(){try{j.destroyChannel(a.channel)}catch(b){}j=null,f&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){i=I(a.remote),j=o.stack.FlashTransport.__swf;var b=function(){a.isHost?o.Fn.set("flash_"+a.channel+"_onMessage",function(b){b==a.channel+"-ready"&&(o.Fn.set("flash_"+a.channel+"_onMessage",m),d(function(){e.up.callback(!0)},0))}):o.Fn.set("flash_"+a.channel+"_onMessage",m),j.createChannel(a.channel,a.remote,a.isHost,l+'easyXDM.Fn.get("flash_'+a.channel+'_onMessage")',a.secret),a.isHost?(O(a.props,{src:K(a.remote,{xdm_e:I(c.href),xdm_c:a.channel,xdm_s:a.secret,xdm_p:6}),name:q+a.channel+"_provider"}),f=Q(a)):(j.postMessage(a.channel,a.channel+"-ready"),d(function(){e.up.callback(!0)},0))};j?b():p(b)},init:function(){E(e.onDOMReady,e)}}},o.stack.PostMessageTransport=function(b){function j(a){if(a.origin)return I(a.origin);if(a.uri)return I(a.uri);if(a.domain)return c.protocol+"//"+a.domain;throw"Unable to retrieve the origin of the event"}function k(a){var c=j(a);c==i&&a.data.substring(0,b.channel.length+1)==b.channel+" "&&e.up.incoming(a.data.substring(b.channel.length+1),c)}var e,f,g,i;return e={outgoing:function(a,c,d){g.postMessage(b.channel+" "+a,c||i),d&&d()},destroy:function(){y(a,"message",k),f&&(g=null,f.parentNode.removeChild(f),f=null)},onDOMReady:function(){i=I(b.remote),b.isHost?(x(a,"message",function j(c){c.data==b.channel+"-ready"&&(g="postMessage"in f.contentWindow?f.contentWindow:f.contentWindow.document,y(a,"message",j),x(a,"message",k),d(function(){e.up.callback(!0)},0))}),O(b.props,{src:K(b.remote,{xdm_e:I(c.href),xdm_c:b.channel,xdm_p:1}),name:q+b.channel+"_provider"}),f=Q(b)):(x(a,"message",k),g="postMessage"in a.parent?a.parent:a.parent.document,g.postMessage(b.channel+"-ready",i),d(function(){e.up.callback(!0)},0))},init:function(){E(e.onDOMReady,e)}}},o.stack.FrameElementTransport=function(e){var f,g,i,j;return f={outgoing:function(a,b,c){i.call(this,a),c&&c()},destroy:function(){g&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){j=I(e.remote),e.isHost?(O(e.props,{src:K(e.remote,{xdm_e:I(c.href),xdm_c:e.channel,xdm_p:5}),name:q+e.channel+"_provider"}),g=Q(e),g.fn=function(a){return delete g.fn,i=a,d(function(){f.up.callback(!0)},0),function(a){f.up.incoming(a,j)}}):(b.referrer&&I(b.referrer)!=L.xdm_e&&(a.top.location=L.xdm_e),i=a.frameElement.fn(function(a){f.up.incoming(a,j)}),f.up.callback(!0))},init:function(){E(f.onDOMReady,f)}}},o.stack.NixTransport=function(e){var f,i,j,k,l;return f={outgoing:function(a,b,c){j(a),c&&c()},destroy:function(){l=null,i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){k=I(e.remote);if(e.isHost){try{t(a,"getNixProxy")||a.execScript("Class NixProxy\n    Private m_parent, m_child, m_Auth\n\n    Public Sub SetParent(obj, auth)\n        If isEmpty(m_Auth) Then m_Auth = auth\n        SET m_parent = obj\n    End Sub\n    Public Sub SetChild(obj)\n        SET m_child = obj\n        m_parent.ready()\n    End Sub\n\n    Public Sub SendToParent(data, auth)\n        If m_Auth = auth Then m_parent.send(CStr(data))\n    End Sub\n    Public Sub SendToChild(data, auth)\n        If m_Auth = auth Then m_child.send(CStr(data))\n    End Sub\nEnd Class\nFunction getNixProxy()\n    Set GetNixProxy = New NixProxy\nEnd Function\n","vbscript"),l=getNixProxy(),l.SetParent({send:function(a){f.up.incoming(a,k)},ready:function(){d(function(){f.up.callback(!0)},0)}},e.secret),j=function(a){l.SendToChild(a,e.secret)}}catch(m){throw new Error("Could not set up VBScript NixProxy:"+m.message)}O(e.props,{src:K(e.remote,{xdm_e:I(c.href),xdm_c:e.channel,xdm_s:e.secret,xdm_p:3}),name:q+e.channel+"_provider"}),i=Q(e),i.contentWindow.opener=l}else{b.referrer&&I(b.referrer)!=L.xdm_e&&(a.top.location=L.xdm_e);try{l=a.opener}catch(n){throw new Error("Cannot access window.opener")}l.SetChild({send:function(a){g.setTimeout(function(){f.up.incoming(a,k)},0)}}),j=function(a){l.SendToParent(a,e.secret)},d(function(){f.up.callback(!0)},0)}},init:function(){E(f.onDOMReady,f)}}},o.stack.NameTransport=function(a){function l(b){var d=a.remoteHelper+(c?"#_3":"#_2")+a.channel;e.contentWindow.sendMessage(b,d)}function m(){c?(++g===2||!c)&&b.up.callback(!0):(l("ready"),b.up.callback(!0))}function n(a){b.up.incoming(a,j)}function p(){i&&d(function(){i(!0)},0)}var b,c,e,f,g,i,j,k;return b={outgoing:function(a,b,c){i=c,l(a)},destroy:function(){e.parentNode.removeChild(e),e=null,c&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){c=a.isHost,g=0,j=I(a.remote),a.local=J(a.local),c?(o.Fn.set(a.channel,function(b){c&&b==="ready"&&(o.Fn.set(a.channel,n),m())}),k=K(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),O(a.props,{src:k+"#"+a.channel,name:q+a.channel+"_provider"}),f=Q(a)):(a.remoteHelper=a.remote,o.Fn.set(a.channel,n)),e=Q({props:{src:a.local+"#_4"+a.channel},onLoad:function b(){var c=e||this;y(c,"load",b),o.Fn.set(a.channel+"_load",p),function f(){typeof c.contentWindow.sendMessage=="function"?m():d(f,50)}()}})},init:function(){E(b.onDOMReady,b)}}},o.stack.HashTransport=function(b){function p(a){if(!m)return;var c=b.remote+"#"+k++ +"_"+a;(f||!n?m.contentWindow:m).location=c}function r(a){j=a,c.up.incoming(j.substring(j.indexOf("_")+1),o)}function s(){if(!l)return;var a=l.location.href,b="",c=a.indexOf("#");c!=-1&&(b=a.substring(c)),b&&b!=j&&r(b)}function t(){g=setInterval(s,i)}var c,e=this,f,g,i,j,k,l,m,n,o;return c={outgoing:function(a,b){p(a)},destroy:function(){a.clearInterval(g),(f||!n)&&m.parentNode.removeChild(m),m=null},onDOMReady:function(){f=b.isHost,i=b.interval,j="#"+b.channel,k=0,n=b.useParent,o=I(b.remote);if(f){b.props={src:b.remote,name:q+b.channel+"_provider"};if(n)b.onLoad=function(){l=a,t(),c.up.callback(!0)};else{var e=0,g=b.delay/50;(function p(){if(++e>g)throw new Error("Unable to reference listenerwindow");try{l=m.contentWindow.frames[q+b.channel+"_consumer"]}catch(a){}l?(t(),c.up.callback(!0)):d(p,50)})()}m=Q(b)}else l=a,t(),n?(m=parent,c.up.callback(!0)):(O(b,{props:{src:b.remote+"#"+b.channel+new Date,name:q+b.channel+"_consumer"},onLoad:function(){c.up.callback(!0)}}),m=Q(b))},init:function(){E(c.onDOMReady,c)}}},o.stack.ReliableBehavior=function(a){var b,c,d=0,e=0,f="";return b={incoming:function(a,g){var i=a.indexOf("_"),j=a.substring(0,i).split(",");a=a.substring(i+1),j[0]==d&&(f="",c&&c(!0)),a.length>0&&(b.down.outgoing(j[1]+","+d+"_"+f,g),e!=j[1]&&(e=j[1],b.up.incoming(a,g)))},outgoing:function(a,g,i){f=a,c=i,b.down.outgoing(e+","+ ++d+"_"+a,g)}}},o.stack.QueueBehavior=function(a){function n(){if(a.remove&&c.length===0){U(b);return}if(g||c.length===0||j)return;g=!0;var e=c.shift();b.down.outgoing(e.data,e.origin,function(a){g=!1,e.callback&&d(function(){e.callback(a)},0),n()})}var b,c=[],g=!0,i="",j,k=0,l=!1,m=!1;return b={init:function(){M(a)&&(a={}),a.maxLength&&(k=a.maxLength,m=!0),a.lazy?l=!0:b.down.init()},callback:function(a){g=!1;var c=b.up;n(),c.callback(a)},incoming:function(c,d){if(m){var f=c.indexOf("_"),g=parseInt(c.substring(0,f),10);i+=c.substring(f+1),g===0&&(a.encode&&(i=e(i)),b.up.incoming(i,d),i="")}else b.up.incoming(c,d)},outgoing:function(d,e,g){a.encode&&(d=f(d));var i=[],j;if(m){while(d.length!==0)j=d.substring(0,k),d=d.substring(j.length),i.push(j);while(j=i.shift())c.push({data:i.length+"_"+j,origin:e,callback:i.length===0?g:null})}else c.push({data:d,origin:e,callback:g});l?b.down.init():n()},destroy:function(){j=!0,b.down.destroy()}}},o.stack.VerifyBehavior=function(a){function f(){c=Math.random().toString(16).substring(2),b.down.outgoing(c)}var b,c,d,e=!1;return b={incoming:function(e,g){var i=e.indexOf("_");i===-1?e===c?b.up.callback(!0):d||(d=e,a.initiate||f(),b.down.outgoing(e)):e.substring(0,i)===d&&b.up.incoming(e.substring(i+1),g)},outgoing:function(a,d,e){b.down.outgoing(c+"_"+a,d,e)},callback:function(b){a.initiate&&f()}}},o.stack.RpcBehavior=function(a,b){function g(a){a.jsonrpc="2.0",c.down.outgoing(d.stringify(a))}function i(a,b){var c=Array.prototype.slice;return function(){var d=arguments.length,i,j={method:b};d>0&&typeof arguments[d-1]=="function"?(d>1&&typeof arguments[d-2]=="function"?(i={success:arguments[d-2],error:arguments[d-1]},j.params=c.call(arguments,0,d-2)):(i={success:arguments[d-1]},j.params=c.call(arguments,0,d-1)),f[""+ ++e]=i,j.id=e):j.params=c.call(arguments,0),a.namedParams&&j.params.length===1&&(j.params=j.params[0]),g(j)}}function k(a,b,c,d){if(!c){b&&g({id:b,error:{code:-32601,message:"Procedure not found."}});return}var e,f;b?(e=function(a){e=j,g({id:b,result:a})},f=function(a,c){f=j;var d={id:b,error:{code:-32099,message:a}};c&&(d.error.data=c),g(d)}):e=f=j,v(d)||(d=[d]);try{var i=c.method.apply(c.scope,d.concat([e,f]));M(i)||e(i)}catch(k){f(k.message)}}var c,d=b.serializer||N(),e=0,f={};return c={incoming:function(a,c){var e=d.parse(a);if(e.method)b.handle?b.handle(e,g):k(e.method,e.id,b.local[e.method],e.params);else{var i=f[e.id];e.error?i.error&&i.error(e.error):i.success&&i.success(e.result),delete f[e.id]}},init:function(){if(b.remote)for(var d in b.remote)b.remote.hasOwnProperty(d)&&(a[d]=i(b.remote[d],d));c.down.init()},destroy:function(){for(var d in b.remote)b.remote.hasOwnProperty(d)&&a.hasOwnProperty(d)&&delete a[d];c.down.destroy()}}},g.easyXDM=o})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),a()}),provide("libwrap/easyxdm",function(a){using("$lib/easyXDM.js",function(){a(easyXDM)})}),provide("lib/lazyload",function(a){a(function(a){function i(b,c){var d=a.createElement(b),e;for(e in c)c.hasOwnProperty(e)&&d.setAttribute(e,c[e]);return d}function j(a){var b=d[a],c,g;b&&(c=b.callback,g=b.urls,g.shift(),e=0,g.length||(c&&c.call(b.context,b.obj),d[a]=null,f[a].length&&l(a)))}function k(){var c=navigator.userAgent;b={async:a.createElement("script").async===!0},(b.webkit=/AppleWebKit\//.test(c))||(b.ie=/MSIE/.test(c))||(b.opera=/Opera/.test(c))||(b.gecko=/Gecko\//.test(c))||(b.unknown=!0)}function l(e,g,l,o,p){var q=function(){j(e)},r=e==="css",s=[],t,u,v,w,x,y;b||k();if(g){g=typeof g=="string"?[g]:g.concat();if(r||b.async||b.gecko||b.opera)f[e].push({urls:g,callback:l,obj:o,context:p});else for(t=0,u=g.length;t<u;++t)f[e].push({urls:[g[t]],callback:t===u-1?l:null,obj:o,context:p})}if(d[e]||!(w=d[e]=f[e].shift()))return;c||(c=a.head||a.getElementsByTagName("head")[0]),x=w.urls;for(t=0,u=x.length;t<u;++t)y=x[t],r?v=b.gecko?i("style"):i("link",{href:y,rel:"stylesheet"}):(v=i("script",{src:y}),v.async=!1),v.className="lazyload",v.setAttribute("charset","utf-8"),b.ie&&!r?v.onreadystatechange=function(){/loaded|complete/.test(v.readyState)&&(v.onreadystatechange=null,q())}:r&&(b.gecko||b.webkit)?b.webkit?(w.urls[t]=v.href,n()):(v.innerHTML='@import "'+y+'";',m(v)):v.onload=v.onerror=q,s.push(v);for(t=0,u=s.length;t<u;++t)c.appendChild(s[t])}function m(a){var b;try{b=!!a.sheet.cssRules}catch(c){e+=1,e<200?setTimeout(function(){m(a)},50):b&&j("css");return}j("css")}function n(){var a=d.css,b;if(a){b=g.length;while(--b>=0)if(g[b].href===a.urls[0]){j("css");break}e+=1,a&&(e<200?setTimeout(n,50):j("css"))}}var b,c,d={},e=0,f={css:[],js:[]},g=a.styleSheets;return{css:function(a,b,c,d){l("css",a,b,c,d)},js:function(a,b,c,d){l("js",a,b,c,d)}}}(window.document))}),provide("phoenix-more-css-wrapper",function(a){var b=[];if(!twttr.isTestEnv)if(twttr.isT1){var c=twttr.isRTL?".rtl":"";b.push(twttr.hasHoversInCss?"css!/t1/css/t1_more.bundle"+c+".css":"css!/t1/css/t1_more_no_hovers.bundle"+c+".css")}else b.push("css!/phoenix/css/phoenix_more.bundle.css");using(b,function(){a()})}),provide("$lib/jquery.ui.core.js",function(a){(function($,a){function b(a,b){var d=a.nodeName.toLowerCase();if("area"===d){var e=a.parentNode,f=e.name,g;return!a.href||!f||e.nodeName.toLowerCase()!=="map"?!1:(g=$("img[usemap=#"+f+"]")[0],!!g&&c(g))}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||b:b)&&c(a)}function c(a){return!$(a).parents().andSelf().filter(function(){return $.curCSS(this,"visibility")==="hidden"||$.expr.filters.hidden(this)}).length}$.ui=$.ui||{};if($.ui.version)return;$.extend($.ui,{version:"1.8.16",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),$.fn.extend({propAttr:$.fn.prop||$.fn.attr,_focus:$.fn.focus,focus:function(a,b){return typeof a=="number"?this.each(function(){var c=this;setTimeout(function(){$(c).focus(),b&&b.call(c)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return $.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.curCSS(this,"position",1))&&/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?$(document):a},zIndex:function(b){if(b!==a)return this.css("zIndex",b);if(this.length){var c=$(this[0]),d,e;while(c.length&&c[0]!==document){d=c.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){e=parseInt(c.css("zIndex"),10);if(!isNaN(e)&&e!==0)return e}c=c.parent()}}return 0},disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.each(["Width","Height"],function(b,c){function g(a,b,c,e){return $.each(d,function(){b-=parseFloat($.curCSS(a,"padding"+this,!0))||0,c&&(b-=parseFloat($.curCSS(a,"border"+this+"Width",!0))||0),e&&(b-=parseFloat($.curCSS(a,"margin"+this,!0))||0)}),b}var d=c==="Width"?["Left","Right"]:["Top","Bottom"],e=c.toLowerCase(),f={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+c]=function(b){return b===a?f["inner"+c].call(this):this.each(function(){$(this).css(e,g(this,b)+"px")})},$.fn["outer"+c]=function(a,b){return typeof a!="number"?f["outer"+c].call(this,a):this.each(function(){$(this).css(e,g(this,a,!0,b)+"px")})}}),$.extend($.expr[":"],{data:function(a,b,c){return!!$.data(a,c[3])},focusable:function(a){return b(a,!isNaN($.attr(a,"tabindex")))},tabbable:function(a){var c=$.attr(a,"tabindex"),d=isNaN(c);return(d||c>=0)&&b(a,!d)}}),$(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));$.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),$.support.minHeight=b.offsetHeight===100,$.support.selectstart="onselectstart"in b,a.removeChild(b).style.display="none"}),$.extend($.ui,{plugin:{add:function(a,b,c){var d=$.ui[a].prototype;for(var e in c)d.plugins[e]=d.plugins[e]||[],d.plugins[e].push([b,c[e]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if($(a).css("overflow")==="hidden")return!1;var c=b&&b==="left"?"scrollLeft":"scrollTop",d=!1;return a[c]>0?!0:(a[c]=1,d=a[c]>0,a[c]=0,d)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(a,b,c,d,e,f){return $.ui.isOverAxis(a,c,e)&&$.ui.isOverAxis(b,d,f)}})})(jQuery),a()}),provide("$lib/jquery.ui.widget.js",function(a){(function($,a){if($.cleanData){var b=$.cleanData;$.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)try{$(d).triggerHandler("remove")}catch(e){}b(a)}}else{var c=$.fn.remove;$.fn.remove=function(a,b){return this.each(function(){return b||(!a||$.filter(a,[this]).length)&&$("*",this).add([this]).each(function(){try{$(this).triggerHandler("remove")}catch(a){}}),c.call($(this),a,b)})}}$.widget=function(a,b,c){var d=a.split(".")[0],e;a=a.split(".")[1],e=d+"-"+a,c||(c=b,b=$.Widget),$.expr[":"][e]=function(b){return!!$.data(b,a)},$[d]=$[d]||{},$[d][a]=function(a,b){arguments.length&&this._createWidget(a,b)};var f=new b;f.options=$.extend(!0,{},f.options),$[d][a].prototype=$.extend(!0,f,{namespace:d,widgetName:a,widgetEventPrefix:$[d][a].prototype.widgetEventPrefix||a,widgetBaseClass:e},c),$.widget.bridge(a,$[d][a])},$.widget.bridge=function(b,c){$.fn[b]=function(d){var e=typeof d=="string",f=Array.prototype.slice.call(arguments,1),g=this;return d=!e&&f.length?$.extend.apply(null,[!0,d].concat(f)):d,e&&d.charAt(0)==="_"?g:(e?this.each(function(){var c=$.data(this,b),e=c&&$.isFunction(c[d])?c[d].apply(c,f):c;if(e!==c&&e!==a)return g=e,!1}):this.each(function(){var a=$.data(this,b);a?a.option(d||{})._init():$.data(this,b,new c(d,this))}),g)}},$.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,b){$.data(b,this.widgetName,this),this.element=$(b),this.options=$.extend(!0,{},this.options,this._getCreateOptions(),a);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(b,c){var d=b;if(arguments.length===0)return $.extend({},this.options);if(typeof b=="string"){if(c===a)return this.options[b];d={},d[b]=c}return this._setOptions(d),this},_setOptions:function(a){var b=this;return $.each(a,function(a,c){b._setOption(a,c)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,b,c){var d=this.options[a];b=$.Event(b),b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),c=c||{};if(b.originalEvent)for(var e=$.event.props.length,f;e;)f=$.event.props[--e],b[f]=b.originalEvent[f];return this.element.trigger(b,c),!($.isFunction(d)&&d.call(this.element[0],b,c)===!1||b.isDefaultPrevented())}}})(jQuery),a()}),provide("$lib/jquery.ui.mouse.js",function(a){(function($,a){var b=!1;$(document).mouseup(function(a){b=!1}),$.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===$.data(b.target,a.widgetName+".preventClickEvent"))return $.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(a){if(b)return;this._mouseStarted&&this._mouseUp(a),this._mouseDownEvent=a;var c=this,d=a.which==1,e=typeof this.options.cancel=="string"&&a.target.nodeName?$(a.target).closest(this.options.cancel).length:!1;if(!d||e||!this._mouseCapture(a))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=this._mouseStart(a)!==!1;if(!this._mouseStarted)return a.preventDefault(),!0}return!0===$.data(a.target,this.widgetName+".preventClickEvent")&&$.removeData(a.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),a.preventDefault(),b=!0,!0},_mouseMove:function(a){return!$.browser.msie||document.documentMode>=9||!!a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return $(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&$.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery),a()}),provide("$lib/jquery.ui.draggable.js",function(a){(function($,a){$.widget("ui.draggable",$.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var b=this.options;return this.helper||b.disabled||$(a.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(a),this.handle?(b.iframeFix&&$(b.iframeFix===!0?"iframe":b.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(a){var b=this.options;return this.helper=this._createHelper(a),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),b.containment&&this._setContainment(),this._trigger("start",a)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!b.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,a),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(a,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,a),!0)},_mouseDrag:function(a,b){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute");if(!b){var c=this._uiHash();if(this._trigger("drag",a,c)===!1)return this._mouseUp({}),!1;this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return $.ui.ddmanager&&$.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var b=!1;$.ui.ddmanager&&!this.options.dropBehaviour&&(b=$.ui.ddmanager.drop(this,a)),this.dropped&&(b=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,b)){var c=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",a)!==!1&&c._clear()})}else this._trigger("stop",a)!==!1&&this._clear();return!1},_mouseUp:function(a){return this.options.iframeFix===!0&&$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,a),$.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){var b=!this.options.handle||!$(this.options.handle,this.element).length?!0:!1;return $(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(b=!0)}),b},_createHelper:function(a){var b=this.options,c=$.isFunction(b.helper)?$(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return c.parents("body").length||c.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo),c[0]!=this.element[0]&&!/(fixed|absolute)/.test(c.css("position"))&&c.css("position","absolute"),c},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),$.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left"in a&&(this.offset.click.left=a.left+this.margins.left),"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top"in a&&(this.offset.click.top=a.top+this.margins.top),"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&$.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:$(window).scrollLeft())+$(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:$(window).scrollTop())+($(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var b=$(a.containment),c=b[0];if(!c)return;var d=b.offset(),e=$(c).css("overflow")!="hidden";this.containment=[(parseInt($(c).css("borderLeftWidth"),10)||0)+(parseInt($(c).css("paddingLeft"),10)||0),(parseInt($(c).css("borderTopWidth"),10)||0)+(parseInt($(c).css("paddingTop"),10)||0),(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt($(c).css("borderLeftWidth"),10)||0)-(parseInt($(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt($(c).css("borderTopWidth"),10)||0)-(parseInt($(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=b}else a.containment.constructor==Array&&(this.containment=a.containment)},_convertPositionTo:function(a,b){b||(b=this.position);var c=a=="absolute"?1:-1,d=this.options,e=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop())*c),left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*c)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(c[0].tagName),e=a.pageX,f=a.pageY;if(this.originalPosition){var g;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();g=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else g=this.containment;a.pageX-this.offset.click.left<g[0]&&(e=g[0]+this.offset.click.left),a.pageY-this.offset.click.top<g[1]&&(f=g[1]+this.offset.click.top),a.pageX-this.offset.click.left>g[2]&&(e=g[2]+this.offset.click.left),a.pageY-this.offset.click.top>g[3]&&(f=g[3]+this.offset.click.top)}if(b.grid){var j=b.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY;f=g?j-this.offset.click.top<g[1]||j-this.offset.click.top>g[3]?j-this.offset.click.top<g[1]?j+b.grid[1]:j-b.grid[1]:j:j;var k=b.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/b.grid[0])*b.grid[0]:this.originalPageX;e=g?k-this.offset.click.left<g[0]||k-this.offset.click.left>g[2]?k-this.offset.click.left<g[0]?k+b.grid[0]:k-b.grid[0]:k:k}}return{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():d?0:c.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():d?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(a,b,c){return c=c||this._uiHash(),$.ui.plugin.call(this,a,[b,c]),a=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,a,b,c)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.extend($.ui.draggable,{version:"1.8.16"}),$.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=$(this).data("draggable"),d=c.options,e=$.extend({},b,{item:c.element});c.sortables=[],$(d.connectToSortable).each(function(){var b=$.data(this,"sortable");b&&!b.options.disabled&&(c.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,e))})},stop:function(a,b){var c=$(this).data("draggable"),d=$.extend({},b,{item:c.element});$.each(c.sortables,function(){this.instance.isOver?(this.instance.isOver=0,c.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,d))})},drag:function(a,b){var c=$(this).data("draggable"),d=this,e=function(a){var b=this.offset.click.top,c=this.offset.click.left,d=this.positionAbs.top,e=this.positionAbs.left,f=a.height,g=a.width,i=a.top,j=a.left;return $.ui.isOver(d+b,e+c,i,j,f,g)};$.each(c.sortables,function(e){this.instance.positionAbs=c.positionAbs,this.instance.helperProportions=c.helperProportions,this.instance.offset.click=c.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(d).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return b.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",a),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",a),c.dropped=!1)})}}),$.ui.plugin.add("draggable","cursor",{start:function(a,b){var c=$("body"),d=$(this).data("draggable").options;c.css("cursor")&&(d._cursor=c.css("cursor")),c.css("cursor",d.cursor)},stop:function(a,b){var c=$(this).data("draggable").options;c._cursor&&$("body").css("cursor",c._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(a,b){var c=$(b.helper),d=$(this).data("draggable").options;c.css("opacity")&&(d._opacity=c.css("opacity")),c.css("opacity",d.opacity)},stop:function(a,b){var c=$(this).data("draggable").options;c._opacity&&$(b.helper).css("opacity",c._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(a,b){var c=$(this).data("draggable");c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"&&(c.overflowOffset=c.scrollParent.offset())},drag:function(a,b){var c=$(this).data("draggable"),d=c.options,e=!1;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!d.axis||d.axis!="x")c.overflowOffset.top+c.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:a.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed);if(!d.axis||d.axis!="y")c.overflowOffset.left+c.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:a.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed)}else{if(!d.axis||d.axis!="x")a.pageY-$(document).scrollTop()<d.scrollSensitivity?e=$(document).scrollTop($(document).scrollTop()-d.scrollSpeed):$(window).height()-(a.pageY-$(document).scrollTop())<d.scrollSensitivity&&(e=$(document).scrollTop($(document).scrollTop()+d.scrollSpeed));if(!d.axis||d.axis!="y")a.pageX-$(document).scrollLeft()<d.scrollSensitivity?e=$(document).scrollLeft($(document).scrollLeft()-d.scrollSpeed):$(window).width()-(a.pageX-$(document).scrollLeft())<d.scrollSensitivity&&(e=$(document).scrollLeft($(document).scrollLeft()+d.scrollSpeed))}e!==!1&&$.ui.ddmanager&&!d.dropBehaviour&&$.ui.ddmanager.prepareOffsets(c,a)}}),$.ui.plugin.add("draggable","snap",{start:function(a,b){var c=$(this).data("draggable"),d=c.options;c.snapElements=[],$(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var a=$(this),b=a.offset();this!=c.element[0]&&c.snapElements.push({item:this,width:a.outerWidth(),height:a.outerHeight(),top:b.top,left:b.left})})},drag:function(a,b){var c=$(this).data("draggable"),d=c.options,e=d.snapTolerance,f=b.offset.left,g=f+c.helperProportions.width,i=b.offset.top,j=i+c.helperProportions.height;for(var k=c.snapElements.length-1;k>=0;k--){var l=c.snapElements[k].left,m=l+c.snapElements[k].width,n=c.snapElements[k].top,o=n+c.snapElements[k].height;if(!(l-e<f&&f<m+e&&n-e<i&&i<o+e||l-e<f&&f<m+e&&n-e<j&&j<o+e||l-e<g&&g<m+e&&n-e<i&&i<o+e||l-e<g&&g<m+e&&n-e<j&&j<o+e)){c.snapElements[k].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,a,$.extend(c._uiHash(),{snapItem:c.snapElements[k].item})),c.snapElements[k].snapping=!1;continue}if(d.snapMode!="inner"){var p=Math.abs(n-j)<=e,q=Math.abs(o-i)<=e,r=Math.abs(l-g)<=e,s=Math.abs(m-f)<=e;p&&(b.position.top=c._convertPositionTo("relative",{top:n-c.helperProportions.height,left:0}).top-c.margins.top),q&&(b.position.top=c._convertPositionTo("relative",{top:o,left:0}).top-c.margins.top),r&&(b.position.left=c._convertPositionTo("relative",{top:0,left:l-c.helperProportions.width}).left-c.margins.left),s&&(b.position.left=c._convertPositionTo("relative",{top:0,left:m}).left-c.margins.left)}var t=p||q||r||s;if(d.snapMode!="outer"){var p=Math.abs(n-i)<=e,q=Math.abs(o-j)<=e,r=Math.abs(l-f)<=e,s=Math.abs(m-g)<=e;p&&(b.position.top=c._convertPositionTo("relative",{top:n,left:0}).top-c.margins.top),q&&(b.position.top=c._convertPositionTo("relative",{top:o-c.helperProportions.height,left:0}).top-c.margins.top),r&&(b.position.left=c._convertPositionTo("relative",{top:0,left:l}).left-c.margins.left),s&&(b.position.left=c._convertPositionTo("relative",{top:0,left:m-c.helperProportions.width}).left-c.margins.left)}!c.snapElements[k].snapping&&(p||q||r||s||t)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,a,$.extend(c._uiHash(),{snapItem:c.snapElements[k].item})),c.snapElements[k].snapping=p||q||r||s||t}}}),$.ui.plugin.add("draggable","stack",{start:function(a,b){var c=$(this).data("draggable").options,d=$.makeArray($(c.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(!d.length)return;var e=parseInt(d[0].style.zIndex)||0;$(d).each(function(a){this.style.zIndex=e+a}),this[0].style.zIndex=e+d.length}}),$.ui.plugin.add("draggable","zIndex",{start:function(a,b){var c=$(b.helper),d=$(this).data("draggable").options;c.css("zIndex")&&(d._zIndex=c.css("zIndex")),c.css("zIndex",d.zIndex)},stop:function(a,b){var c=$(this).data("draggable").options;c._zIndex&&$(b.helper).css("zIndex",c._zIndex)}})})(jQuery),a()}),provide("$lib/jquery.ui.progressbar.js",function(a){(function($,a){$.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),$.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===a?this._value():(this._setOption("value",b),this)},_setOption:function(a,b){a==="value"&&(this.options.value=b,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),$.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),$.extend($.ui.progressbar,{version:"1.8.16"})})(jQuery),a()}),provide("$lib/jquery.swfobject.js",function(a){(function(a,h,b){function c(a,b){var d=(a[0]||0)-(b[0]||0);return d>0||!d&&a.length>0&&c(a.slice(1),b.slice(1))}function d(a){if(typeof a!=g)return a;var b=[],c="";for(var e in a)c=typeof a[e]==g?d(a[e]):[e,i?encodeURI(a[e]):a[e]].join("="),b.push(c);return b.join("&")}function e(a){var b=[];for(var c in a)a[c]&&b.push([c,'="',a[c],'"'].join(""));return b.join(" ")}function f(a){var b=[];for(var c in a)b.push(['<param name="',c,'" value="',d(a[c]),'" />'].join(""));return b.join("")}var g="object",i=!0;try{var j=b.description||function(){return(new b("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}()}catch(k){j="Unavailable"}var l=j.match(/\d+/g)||[0];a[h]={available:l[0]>0,activeX:b&&!b.name,version:{original:j,array:l,string:l.join("."),major:parseInt(l[0],10)||0,minor:parseInt(l[1],10)||0,release:parseInt(l[2],10)||0},hasVersion:function(a){return a=/string|number/.test(typeof a)?a.toString().split("."):/object/.test(typeof a)?[a.major,a.minor]:a||[0,0],c(l,a)},encodeParams:!0,expressInstall:"expressInstall.swf",expressInstallIsActive:!1,create:function(a){if(!a.swf||this.expressInstallIsActive||!this.available&&!a.hasVersionFail)return!1;if(!this.hasVersion(a.hasVersion||1)){this.expressInstallIsActive=!0;if(typeof a.hasVersionFail=="function"&&!a.hasVersionFail.apply(a))return!1;a={swf:a.expressInstall||this.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:this.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:a.swf,type:"application/x-shockwave-flash",id:a.id||"flash_"+Math.floor(Math.random()*999999999),width:a.width||320,height:a.height||180,style:a.style||""},i=typeof a.useEncode!="undefined"?a.useEncode:this.encodeParams,a.movie=a.swf,a.wmode=a.wmode||"opaque",delete a.fallback,delete a.hasVersion,delete a.hasVersionFail,delete a.height,delete a.id,delete a.swf,delete a.useEncode,delete a.width;var b=document.createElement("div");return b.innerHTML=["<object ",e(attrs),">",f(a),"</object>"].join(""),b.firstChild}},a.fn[h]=function(b){var c=this.find(g).andSelf().filter(g);return/string|object/.test(typeof b)&&this.each(function(){var c=a(this),d;b=typeof b==g?b:{swf:b},b.fallback=this;if(d=a[h].create(b))c.children().remove(),c.html(d)}),typeof b=="function"&&c.each(function(){var c=this;c.jsInteractionTimeoutMs=c.jsInteractionTimeoutMs||0,c.jsInteractionTimeoutMs<660&&(c.clientWidth||c.clientHeight?b.call(c):setTimeout(function(){a(c)[h](b)},c.jsInteractionTimeoutMs+66))}),c}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject),a()}),provide("$lib/jquery.hotkeys.js",function(a){(function(a){function b(b){if(typeof b.data!="string"&&!a.isArray(b.data))return;var c=b.handler,d=a.isArray(b.data),e=0,f=b.data.length;b.handler=function(g){var i=b.data,j;d&&(i=i[e]),j=i.toLowerCase().split(" ");if(!(this===g.target||!/textarea|select/i.test(g.target.nodeName)&&g.target.type!=="text"))return;var k=g.type!=="keypress"&&a.hotkeys.specialKeys[g.which],l=String.fromCharCode(g.which).toLowerCase(),m,n="",o={};g.altKey&&k!=="alt"&&(n+="alt+"),g.ctrlKey&&k!=="ctrl"&&(n+="ctrl+"),g.metaKey&&!g.ctrlKey&&k!=="meta"&&(n+="meta+"),g.shiftKey&&k!=="shift"&&(n+="shift+"),k?o[n+k]=!0:(o[n+l]=!0,o[n+a.hotkeys.shiftNums[l]]=!0,n==="shift+"&&(o[a.hotkeys.shiftNums[l]]=!0));for(var p=0,q=j.length;p<q;p++)if(o[j[p]])return!d||e===f-1?(e=0,c.apply(this,arguments)):(e+=1,!0);if(d&&e!==0){j=b.data[0].toLowerCase().split(" ");for(var p=0,q=j.length;p<q;p++)if(o[j[p]])return e=1,!0;e=0}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})})(jQuery),a()}),provide("$lib/jquery.autoellipsis.js",function(a){(function($){function e(a,b){var c=a.data();c||(c={});var d=c.wrapperElement;d||(d=a.wrapInner("<div/>").find(">div"));var e=d.data(),j=e.originalContent;j?d=e.originalContent.clone(!0).data({originalContent:j}).replaceAll(d):d.data({originalContent:d.clone(!0)}),a.data({wrapperElement:d,containerWidth:a.innerWidth(),containerHeight:a.innerHeight()});var k=!1,l=d;b.selector&&(l=$(d.find(b.selector).get().reverse())),l.each(function(){var c=$(this),e=c.text(),j=!1;if(d.innerHeight()-c.innerHeight()>a.innerHeight())c.remove();else{i(c);if(c.contents().length){k&&(g(c).get(0).nodeValue+=b.ellipsis,k=!1);while(d.innerHeight()>a.innerHeight()){j=f(c);if(!j){k=!0,c.remove();break}i(c);if(!c.contents().length){k=!0,c.remove();break}g(c).get(0).nodeValue+=b.ellipsis}b.setTitle=="onEllipsis"&&j||b.setTitle=="always"?c.attr("title",e):b.setTitle!="never"&&c.removeAttr("title")}}})}function f(a){var b=g(a);if(b.length){var c=b.get(0).nodeValue,d=c.lastIndexOf(" ");return d>-1?(c=$.trim(c.substring(0,d)),b.get(0).nodeValue=c):b.get(0).nodeValue="",!0}return!1}function g(a){if(a.contents().length){var b=a.contents().last();return b.filter(j).length?b:g(b)}return a.append(""),a.contents().last()}function i(a){if(a.contents().length){var b=a.contents().last();if(b.filter(j).length){var c=b.get(0).nodeValue;return c=$.trim(c),c==""?(b.remove(),!0):!1}while(i(b));return b.contents().length?!1:(b.remove(),!0)}return!1}function j(){return this.nodeType===3}function k(c,d){a[c]=d,b||(b=window.setInterval(function(){m()},200))}function l(c){a[c]&&(delete a[c],a.length||b&&(window.clearInterval(b),b=undefined))}function m(){if(!c){c=!0;for(var b in a)$(b).each(function(){var c,d;c=$(this),d=c.data(),(d.containerWidth!=c.innerWidth()||d.containerHeight!=c.innerHeight())&&e(c,a[b])});c=!1}}var a={},b,c=!1,d={ellipsis:"...",setTitle:"never",live:!1};$.fn.ellipsis=function(a,b){var c,f;return c=$(this),typeof a!="string"&&(b=a,a=undefined),f=$.extend({},d,b),f.selector=a,c.each(function(){var a=$(this);e(a,f)}),f.live?k(c.selector,f):l(c.selector),this}})(jQuery),a()}),provide("mixins/tweetFlagging",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.tweetFlagging",function(a){a.methods({flagLinkClicked:function(a,b){var c=$(a.target),d=this,e=twttr.decider.isAvailable("flag_yourself_nsfw")&&twttr.helpers.isCurrentUser(b.user),f=b.possiblySensitive,g={isOurTweet:e,before:function(){if(e){var a=c.attr("alternateText");c.attr("alternateText",c.html()),c.html(a)}else{var b='&nbsp;<a target="_blank" href="'+twttr.router.flagTurkeySupportPath()+'">'+_("(learn more)")+"</a>";c.replaceWith("<span>"+_("Flagged")+b+"</span>")}}};f&&!e?twttr.dialogs.sensitiveFlagConfirmation(function(){b.flag(g)}).open():(e&&(b.sync("possiblySensitive",!b.possiblySensitive),g.possibly_sensitive=b.possiblySensitive),b.flag(g))},tweetFlaggable:function(a){return twttr.loggedIn&&twttr.decider.isAvailable("media_flagging")&&(!a||a.possiblySensitiveEditable!==!1)}})}),a(twttr.mixins.tweetFlagging)})}),provide("promptbird",function(a){using("util","components/Promptbird").as(function(b){twttr.promptbird=twttr.promptbird||{},twttr.promptbird.renderComponentFromPrompt=function(a){var c=b.util.camelize("Prompt_"+a.prompt.template_name);if(!twttr.components[c]){var d=new Error('Promptbird component "'+c+'" is undefined');twttr.isLocalhost&&console.log(d,d.stack||"error.stack is unavailable :(");return}var e=new twttr.components[c](a);return e.bind("destroyed",twttr.promptbird.destroyCallback),e},twttr.promptbird.destroyCallback=function(){delete twttr.promptbird.cache},twttr.promptbird.getPrompt=function(){var a=(new b.util.Location(location.href)).search;if(!twttr.decider.isAvailable("promptbird_phoenix")&&!/force_prompt_id/.test(a))return;if(!twttr.promptbird.cache)return;if(!twttr.promptbird.cache.prompt.template_name)return;return twttr.promptbird.cache},twttr.promptbird.getPromptByFormat=function(a){var b=twttr.promptbird.getPrompt();if(!b)return;for(var c=0;c<a.length;c++)if(b.prompt.format===a[c])return b},a(twttr.promptbird)})}),provide("MessageManager",function(a){using().as(function(b){twttr.klass("twttr.MessageThread",function(a,b){this.threadId=a,this.messages=b}).methods({hasNewMessages:function(){return twttr.app.caches.dmThreads.get(this.threadId)!==this.messages[0].id&&!twttr.helpers.isCurrentUser(this.messages[0].sender)}}),twttr.klass("twttr.MessageManager",function(){var a=this;if(!twttr.loggedIn)return;twttr.isT1||this.setupContinuousPoll(),twttr.isT1&&twttr.decider.isAvailable("t1_dm_poll")&&($(document).on("active",function(){a.poll(twttr.MessageManager.activePollInterval)}),$(document).on("inactive",function(){a.poll(twttr.MessageManager.inactivePollInterval)}))}).statics({activePollInterval:9e4,inactivePollInterval:3e5}).methods(twttr.EventProvider).methods({setupContinuousPoll:function(){var a=this;this._pollingState?this._pollingState=="running"&&this._fetchMessages():(this._pollingState="starting",this._fetchMessages(function(){a._sort(),a.bind("messagesArrived",function(b,c){if(twttr.isT1)for(var d=c.length()-1;d>=0;d--)a.addMessage(c.get(d));else c.each(function(b){a.addMessage(b)})}),!twttr.isT1||twttr.decider.isAvailable("t1_dm_poll")?a.poll(twttr.MessageManager.activePollInterval):a.stopContinuousPoll(),a._intializeThreadState(),a.trigger("firstMessagesReceived"),a.trigger("pendingThreads")}))},isContinuouslyPolling:function(){return!!this._pollingState&&this._pollingState!=="starting"},stopContinuousPoll:function(){this.isContinuouslyPolling()&&(clearInterval(this._pollId),delete this._pollId,this._pollingState=null)},poll:function(a){var b=this;b.stopContinuousPoll(),b.currentPollInterval=a,b._pollId=setInterval(function(){b._fetchMessages()},a),b._pollingState="running"},reset:function(){this.threads=[],this.sentMessages=null,this.receivedMessage=null,twttr.app.caches.dmThreads.clear()},getAllThreads:function(a){var b=this;this.threads?a(this.threads):this.one("firstMessagesReceived",function(){a(b.threads)})},getThread:function(a,b){var c=this;if(this.threads){for(var d=0;d<this.threads.length;d++)if(this.threads[d].threadId===a)return b(this.threads[d]);return b()}this.getAllThreads(function(d){c.getThread(a,b)})},addMessage:function(a,b){var c=this;this.getThread(a.threadId,function(d){if(d){if(twttr.helpers.isCurrentUser(a.sender))for(var e=0,f=d.messages,g=f.length;e<g;e++){var i=f[e].id;if(i<a.id)break;if(i===a.id)return}d.messages.unshift(a);for(var e=0,j=c.threads.length;e<j;e++)if(c.threads[e].threadId===d.threadId){c.threads.splice(e,1);break}}else d=new twttr.MessageThread(a.threadId,[a]);c.threads||(c.threads=[]),c.threads.unshift(d),b&&c._markMessageAsRead(a),c.trigger("updatedThread",[d,"new",{message:a}]),c.trigger("newMessage."+a.threadId,[a]),c.trigger("pendingThreads")})},deleteMessage:function(a,b){var c=this;this.getThread(b,function(d){if(d){for(var e=0,f=d.messages,g=f.length;e<g;e++)if(f[e].id===a){var i=f.splice(e,1)[0];i.destroy({error:function(){c.addMessage(i)},success:function(a){var b={};b[a.id+""]={item_type:twttr.constants.clientEvent.itemType.message,target_id:a.id},trackClient({component:"stream",action:"delete"},{item_ids:[a.id],item_details:b})}});break}if(d.messages.length===0){for(var j=0;j<c.threads.length;j++)if(c.threads[j].threadId===b){c.threads.splice(j,1);break}c.trigger("deletedThread",[b])}else c.trigger("updatedThread",[d,"delete",{messageId:a}])}c.trigger("deletedMessage."+b,[a]),c.trigger("pendingThreads")})},hasPendingThreads:function(){var a=0,b=this.threads;if(b)for(var c=0,d=b.length;c<d;c++)b[c].hasNewMessages()&&a++;return a},markThreadAsRead:function(a){var b=this;this.getThread(a,function(c){if(!c)return;b._markMessageAsRead(c.messages[0]),b.trigger("readThread",[a]),b.trigger("pendingThreads")})},_markMessageAsRead:function(a){twttr.app.caches.dmThreads.set(a.threadId,a.id)},_intializeThreadState:function(){if(!twttr.app.caches.dmThreads.get("##initialized")){twttr.app.caches.dmThreads.set("##initialized",!0);var a=this.threads;for(var b=0,c=a.length;b<c;b++)twttr.app.caches.dmThreads.set(a[b].threadId,a[b].messages[0].id);return!0}return!1},_fetchMessages:function(a){function e(){c++;if(c===2||!d)b.isFetching=!1,a&&a()}var b=this,c=0;if(this.isFetching)return;this.isFetching=!0;var d=!twttr.isT1||this._pollingState==="starting",f,g={count:50,success:function(a){a.length()>0&&(b.receivedMessages?b.receivedMessages.concat(a):b.receivedMessages=a,b.trigger("messagesArrived",[a]),b._receivedSinceID=a.first().id),f=a,e()},cancel:function(){},error:function(a,b){a.status===502&&b.retry()}};b._receivedSinceID&&(g.since_id=b._receivedSinceID),twttr.currentUser&&twttr.currentUser.receivedMessages(g);var i={count:50,success:function(a){a.length()>0&&(b.sentMessages?b.sentMessages.concat(a):b.sentMessages=a,b.trigger("messagesArrived",[a]),b._sentSinceID=a.first().id),e()},cancel:function(){},error:function(a,b){a.status===502&&b.retry()}};b._sentSinceID&&(i.since_id=b._sentSinceID),twttr.currentUser&&d&&twttr.currentUser.sentMessages(i)},_sort:function(){this.allMessages=[],this.sentMessages&&(this.allMessages=this.allMessages.concat(this.sentMessages.array)),this.receivedMessages&&(this.allMessages=this.allMessages.concat(this.receivedMessages.array)),this.allMessages.sort(function(a,b){return twttr.natcompare(b.id,a.id)});var a={},b=[];for(var c=0;c<this.allMessages.length;c++){var d=this.allMessages[c],e=d.threadId;a[e]||(a[e]=[],b.push(e)),a[e].push(d)}this.threads=[];for(var c=0;c<b.length;c++)this.threads.push(new twttr.MessageThread(b[c],a[b[c]]))}}),a(twttr.MessageManager)})}),provide("ConversationManager",function(a){using("constants").as(function(b){twttr.klass("twttr.ConversationThread",function(a){this.threadId=a.user.screenName,this.user=a.user,this.count=a.count,this.lastMessageDate=a.lastMessageDate,this.lastMessageId=a.lastMessageId,this.messages=[]}).methods(twttr.EventProvider).methods({sort:function(){this.messages.sort(function(a,b){return b.id-a.id})},addMessage:function(a){if($.inArray(a,this.messages)>-1)return;this.messages.push(a),this.sort(),a.id>this.lastMessageId&&(this.lastMessageDate=a.createdAt,this.lastMessageId=a.id,this.count++),this.trigger("newMessage",[a])},deleteMessage:function(a,b){var c=!1;this.messages=$.grep(this.messages,function(b,d){return b.id===a&&(b.destroy(),c=!0),b.id!==a});if(!c)return;if(this.messages.length>0){var d=this.messages[this.messages.length-1];d.id>this.lastMessageId&&(this.lastMessageDate=d.createdAt,this.lastMessageId=d.id)}this.count--,this.trigger("deletedMessage",[a]),b()},getMessages:function(a){var b=this,c={user_id:this.user.id,since_id:this.since_id||0,count:100,success:function(c){c.each(function(a){b.addMessage(a)}),a(b)}};twttr.currentUser.conversationWith(c)}}),twttr.klass("twttr.ConversationManager",function(){this.threads={},this.since_id=0}).methods(twttr.EventProvider).methods({_fetchMessages:$.noop,_sort:$.noop,setupContinuousPoll:function(){if(this._pollId)return;var a=this;this._pollId=setInterval(function(){a.getAllThreads($.noop)},b.constants.directMessagePollInterval)},isContinuouslyPolling:function(){return twttr.is.def(this._pollId)},stopContinuousPoll:function(){this.isContinuouslyPolling()&&(clearInterval(this._pollId),delete this._pollId)},getThread:function(a,b){var c=this.threads[a];return c?c.getMessages(b):b()},getAllThreads:function(a){function c(c){var d;for(var e=c.array.length-1;e>=0;e--){var f=c.array[e];b.threads[f.user.screenName]?(d=b.threads[f.user.screenName],d.getMessages($.noop)):(d=new twttr.ConversationThread(f),b.threads[d.threadId]=d),b.since_id=d.lastMessageId,b.trigger("updatedThread",[d,"new"])}a()}var b=this;twttr.currentUser.conversations({success:c,since_id:this.since_id,count:100})},addMessage:function(a){var b=this.threads[a.threadId];b?(b.addMessage(a),this.trigger("updatedThread",[b,"new"])):(b=new twttr.ConversationThread({threadId:a.threadId,user:a.user,count:1,lastMessageDate:a.createdAt,lastMessageId:a.id}),this.threads[b.threadId]=b)},deleteMessage:function(a,b){var c=this,d=this.threads[b];d&&d.deleteMessage(a,function(){c.trigger("updatedThread",[d,""]),d.count===0&&(c.trigger("deletedThread",[b]),delete c.threads[b])})}}),a(twttr.ConversationManager)})}),provide("externalOauthPopup",function(a){using().as(function(b){a(function(a){var b,c=a.url,d=c.indexOf("?")==-1?"?":"&";c+=d+"callback_hash="+encodeURIComponent(a.callbackUrl);var e=$(window),f=window.screenY||window.screenTop||0,g=window.screenX||window.screenLeft||0,i=(e.height()-500)/2+f,j=(e.width()-500)/2+g,a=["width="+(a.width?a.width:500),"height="+(a.height?a.height:500),"top="+i,"left="+j,"toolbar=no","location=yes"];window.open(c,"twitter_oauth",a.join(",")).focus()})})}),provide("mixins/photoBox",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.photoBox",function(a){a.methods({_initPhotobox:function(){var a=this;if(!twttr.decider.isAvailable("turkey")||this.options.statusAction==="directMessage"||this.options.template.show_turkey===!1)return;this.tweetBoxId=twttr.turkey.getTweetBoxId(),this.options.template.tweet_box_id=this.tweetBoxId,(new twttr.views.PhotoControl(this.options.template)).render(this.$find("div.tweet-button-container"),"prepend");var b=this._getTextLength;this._getTextLength=function(){var a=b.apply(this,arguments);return this.turkey&&this.turkey.hasItems()&&(a+=this.turkey.count()*(twttr.constants.tcoLength+1)),a};var c=this.makeRequest;this.makeRequest=function(a,b,d){this.turkey&&this.turkey.hasItems()?(this._sendingStatus=!0,this.turkey.tweet(b,d)):c.apply(this,[a,b,d])};var d=this.resetTweetContent;this.resetTweetContent=function(){d.apply(this,arguments),this.turkey&&this.turkey.reset()};var e=function(){a.createFunc(),a._registerPhotoboxEvents();if(a.options.origin&&(a.options.origin=="main_tweet_box"||a.options.origin=="new-tweet-titlebar-button")){var b={context:a.options.origin=="main_tweet_box"?"timeline":"popup",event_info:twttr.turkey.tweetboxMode()};trackClient({component:"tweetbox",action:"impression"},b)}};this.bind("open",e),(!this.options.condensed||!this.options.condensedContent&&this.options.defaultContent||this._getDraftTweet())&&e()},_registerPhotoboxEvents:function(){var a=this;this.turkey.bind("photoChanged",function(){a.editor.trigger("didChangeContent",[a.editor.content()])});var b=function(){a.turkey&&a.turkey.destroy()};this.bind("close",b),this.bind("destroy",b),this.bind("titleChanged",function(b,c,d){if(d=="dm")a.turkey&&a.turkey.disable(),a.$find(".turkey-control").hide();else if(d=="reply"||d=="mention"||d=="update")a.turkey&&a.turkey.enable(),a.$find(".turkey-control").show()})},createFunc:function(){this.turkey&&this.turkey.remove(),this.turkey=new twttr.turkey.PhotoThumbnails(this.editor,this.$find(".turkey-selected-files"),this.$find(".turkey-add-action"),this.tweetBoxId)}})}),a()})}),provide("mixins/profileStreamMixin",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.profileStreamMixin",function(){this.methods({beforeShowNewItems:function(){this.keepPromotedTweetsAtTop=!0,this.constructor.uber.beforeShowNewItems.apply(this,arguments),this.promotedTweetWasExpanded=this.promotedTweetIsExpanded(),this.collapsePromotedTweet(),this.movePromotedTweetToTop()},onShowNewItems:function(a){this.constructor.uber.onShowNewItems.apply(this,arguments),this.trigger("onShowNewItems"),this.promotedTweetWasExpanded&&this.expandPromotedTweet(),this.logPromotedImpressions(this.items.slice(0,this.newItemsCount))},onShowOldItems:function(a){this.constructor.uber.onShowOldItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(this.items.length-this.oldItemsCount))},afterFirstSwitchingTo:function(){this.constructor.uber.afterFirstSwitchingTo.apply(this,arguments),$(document).trigger("profileVisit",twttr.profileUser)},_getPromotedStreamTweet:function(){return this.$find("div.stream-items .promoted-tweet")},_collapseExpandPromotedTweet:function(a){var b=this._getPromotedStreamTweet();b.length&&twttr.app.currentPageName()==="profile"&&twttr.app.currentPage().send("showHide",[b,{autoExpanded:!0,forceClose:!a,noAnimation:!0,containerClass:".expanding-stream-item"}])},collapsePromotedTweet:function(){this._collapseExpandPromotedTweet(!1)},expandPromotedTweet:function(){this._collapseExpandPromotedTweet(!0)},domNodeSelector:function(){return this.streamManagerDomNodeSelector?this.streamManagerDomNodeSelector+" .profile-stream":null},_getStreamErrorComponent:function(a){return this._getUserStreamErrorComponent(a)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You haven't tweeted yet."):_("@{{screen_name}} hasn't tweeted yet.",{screen_name:this.screenName})},_updateSinceId:function(a){var b=a.length==1&&a[0].isPromoted(),c=a.length>1&&a[0].isPromoted()&&twttr.natcompare(a[0].id,a[1].id)>0;b||c?this._sinceId=a[0].id:this.constructor.uber._updateSinceId.apply(this,arguments)},wokeUp:function(){signal(">streamWokeUp")}}),twttr.isT1&&this.methods({_setTitle:function(a){a(_("Tweets"))},_setViewToggler:function(a){twttr.streams.Profile.shouldDisplay()&&a(new twttr.views.ProfileStreamViewToggler(!0,this.params))}})});a(c)})}),provide("streams/Mentions",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.Mentions").statics({isLoadingRelationships:!1}).setTitle(function(a){twttr.isT1?a(_("Mentions")):a(_("Tweets mentioning {{username}}",{username:"@"+twttr.currentUser.screenName}))}).update(function(a,b,c){var d=this;twttr.decider.isAvailable("activity_dark_read")&&!twttr.decider.isAvailable("activity_read")&&$.ajax({url:"/i/gooble.json",headers:{"X-PHX":"true"},xhr:function(){return new twttr.anywhere.remote.server.contentWindow.XMLHttpRequest},success:function(){}});if(twttr.secrets&&twttr.secrets.hideMentions){var e=a.success;a.success=function(b){e.apply(a,arguments);if(d.constructor.isLoadingRelationships)return;d.constructor.isLoadingRelationships=!0,setTimeout(function(){var a={user_a:twttr.currentUser.id,user_ids:b.map(function(a){return a.user.id}).join(",")};$.ajax({url:"/account/batch_followed_by",data:a,dataType:"jsonp",type:"get",success:function(a){var b=[];for(var c in a.relationships)a.relationships[c]||b.push(".stream-tweet[data-user-id="+c+"]");b.length>0&&$(b.join(",")).hide(),d.constructor.isLoadingRelationships=!1}})},10)}}twttr.currentUser.mentions(a)}).methods({_getEmptyStreamHtml:function(){return _("Tweets that mention you, or are in reply to you, appear here.")}}).deciderKey("tweet_stream_mentions").pollingDeciderKey("tweet_stream_mentions_polling"),a()})}),provide("streams/Favorites",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.Favorites",function(){twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this._registerEvents()}).setTitle(function(a){twttr.isT1?a(_("Favorites")):!this.screenName||this.stream_user_is_current_user()?a(_("Your Favorites")):a(_("{{username}}'s Favorites",{username:this.screenName}))}).update(function(a,b,c){this.screenName?twttr.API.User.find(this.screenName).favorites(a):twttr.currentUser.favorites(a)}).methods({_getEmptyStreamHtml:function(){return!this.screenName||this.stream_user_is_current_user()?_("Your favorite tweets get saved here. To favorite a tweet, hover over it and click: <span class='favorite-icon'></span> <strong>Favorite</strong>"):_("<b>@{{screen_name}}</b> hasn't favorited any Tweets yet.",{screen_name:this.screenName})},_registerEvents:function(){if(twttr.loggedIn){var a=function(a,b){return twttr.helpers.isProfileUser()?b:null};this._registerAddToStreamEvent(twttr.API.Status,"favorite",a),this._registerRemoveFromStreamEvent(twttr.API.Status,"unfavorite",a)}}}).deciderKey("tweet_stream_favorites").pollingDeciderKey("tweet_stream_favorites_polling"),a()})}),provide("streams/User",function(a){using().as(function(b){var c=twttr.tweetStream("twttr.streams.User",function(a){var b=this;twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this.one("onShowNewItems",function(){b.expandPromotedTweet()}),twttr.helpers.isCurrentUser(a.screenName)&&twttr.API.Status.bind("unretweet",function(a,c){b.$node.find("[data-item-id="+c.id+"][data-item-type=tweet]").remove()})}).mixin(twttr.mixins.profileStreamMixin).statics({_supportsPromotedContent:twttr.isT1}).update(function(a,b,d){a.cacheOptions={shouldCacheAssociated:!1},a.pc=!!c._supportsPromotedContent,a.include_rts=!this.params.noRetweets,this.params.canViewUser?twttr.API.User.find(this.params.screenName).timeline(a):d(this,twttr.streams.PROTECTED)}).deciderKey("tweet_stream_user").pollingDeciderKey("tweet_stream_user_polling");a(c)})}),provide("streams/Profile",function(a){using().as(function(b){var c=twttr.tweetStream("twttr.streams.Profile",function(a){var b=this;twttr.streams.TweetStream.apply(this,arguments),this.one("onShowNewItems",function(){b.expandPromotedTweet()})}).mixin(twttr.mixins.profileStreamMixin).statics({_supportsPromotedContent:!0,shouldDisplay:function(){return twttr.profileUser.verified&&twttr.loggedIn&&twttr.abdecider.choose("replies_stripped_on_verified_profiles_222")=="stripped_replies_on_verified"}}).update(function(a,b,d){a.cacheOptions={shouldCacheAssociated:!1},a.pc=!!c._supportsPromotedContent,a.include_rts=!this.params.noRetweets,this.params.canViewUser?twttr.API.User.find(this.params.screenName).profileTimeline(a):d(this,twttr.streams.PROTECTED)}).methods({_setViewToggler:function(a){a(new twttr.views.ProfileStreamViewToggler(!1,this.params))}}).statics({_supportsPromotedContent:!0}).deciderKey("tweet_stream_profile").pollingDeciderKey("tweet_stream_profile_polling");a(c)})}),provide("streams/FollowingTweets",function(a){using().as(function(b){twttr.tweetStream("twttr.streams.FollowingTweets",function(){twttr.streams.TweetStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id}}),this.registerUserActionEvents()}).mixin(twttr.mixins.userActionable).update(function(a,b,c){a.cacheOptions={shouldCacheAssociated:!1},this.params.canViewUser?twttr.API.User.find(this.params.screenName).followingTweets(a):c(this,twttr.streams.PROTECTED)}).methods({itemViewClass:"FollowingTweet",onUserActionFollowSync:function(a){this._findTweetsAndUpdateFollowState(a,!0)},onUserActionUnfollowSync:function(a){this._findTweetsAndUpdateFollowState(a,!1)},onShowNewItems:function(a){this._addFollowButtonsToNewTweets(a),this.constructor.uber.onShowNewItems.apply(this,arguments),this.trigger("showedNewItems")},onShowOldItems:function(a){this._addFollowButtonsToNewTweets(a),this.constructor.uber.onShowOldItems.apply(this,arguments),this.trigger("showedOldItems")},selectedItemsByUserId:function(a){var b=".stream-item:has(.stream-item-content[data-user-id="+a+"])";return this.$streamItems().find(b)},_reRenderTweetsByUserId:function(a){var b=this;this.selectedItemsByUserId(a).each(function(a,c){var d=$(c),e=d.find(".stream-tweet").attr("data-tweet-id");twttr.API.Status.find(e,function(a){d.replaceWith(b._renderItemHtml(a))})})},_getStreamErrorComponent:function(a){return this._getUserStreamErrorComponent(a)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("The people you follow haven't tweeted anything recently."):_("The people that @{{screen_name}} follows haven't tweeted recently.",{screen_name:this.screenName})},_setTitle:function(){$("#following-page-context").html(_("Here&rsquo;s what they&rsquo;re tweeting right now."))},_findUserIds:function(a){var b=[];return a.find(".stream-item-content").each(function(a,c){b.push(parseInt($(c).attr("data-user-id"),10))}),b.slice(0,twttr.constants.users.maxLookupSize)},_addFollowButtonsToNewTweets:function(a){if(!twttr.loggedIn||a.length===0)return!1;var b=this,c=this._findUserIds(a);twttr.API.User.findAll(c,{reload:!0,success:function(a){a.each(function(a){(!a.following||twttr.loggedIn&&a.id!==twttr.currentUser.id)&&b._findTweetsAndUpdateFollowState(a.id,a.following?null:!1)})}})},_findTweetsAndUpdateFollowState:function(a,b){var c;twttr.is.nil(b)?c="":b?c=Mustache.to_html('<span class="follow-text-quiet">&middot; {{action}}</span>',{action:_("Following")}):c=Mustache.to_html('<span class="follow-text-quiet">&middot;</span> <a href="#" class="js-action-follow tweet-follow-action follow-action" data-user-id="{{id}}">{{action}}</a>',{id:a,action:_("Follow")});var d=this.selectedItemsByUserId(a);d.each(function(a,b){$(b).find(".tweet-user-follow").html(c)})}}).deciderKey("tweet_stream_following").pollingDeciderKey("tweet_stream_following_polling"),a()})}),provide("streams/List",function(a){using("components/AddPeople","components/NoListMembers","streams/TweetStream",function(b,c,d){twttr.tweetStream("twttr.streams.List",function(){d.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id},message:this.params.listSlug})}).setTitle(function(a){twttr.isT1?a((new twttr.views.ListStreamTitle({full_name:_("Tweets")})).html()):(twttr.merge(this.params,{full_name:_("@{{screenName}}/{{listSlug}}",this.params),slug:this.params.listSlug,user:{screen_name:this.params.screenName}}),a((new twttr.views.ListStreamTitle(this.params)).html()))}).update(function(a,b,c){this._getList(function(b){b.statuses(a)})}).methods({_getEmptyStreamComponent:function(){return twttr.helpers.isCurrentUser(this.screenName)?new b:new c},_getList:function(a){var b=this;this._fetchingCallbacks=this._fetchingCallbacks||[],this._fetchingCallbacks.push(a);if(this._fetching)return;this._fetching=!0,twttr.API.User.find(this.screenName,{success:function(a){a.lists.find(b.params.listSlug,function(a){if(!a){b.trigger("notFound");return}b.memberCount=a.memberCount;var c;while(c=b._fetchingCallbacks.pop())c(a);b._list=a,b._fetching=!1})},error:function(){b.trigger("notFound")}})}}).deciderKey("tweet_stream_list").pollingDeciderKey("tweet_stream_list_polling"),a(twttr.streams.List)})}),provide("streams/Search",function(a){using().as(function(b,c){var d=twttr.tweetStream("twttr.streams.Search",function(a){return twttr.is.def(a.pretty_query)||(a.pretty_query=a.query),twttr.streams.TweetStream.apply(this,arguments),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:a.query}),this}).setTitle(function(a){var b=this;if(this.params.hideTitle)return;var c=twttr.merge({top_mode:this.params.mode=="relevance",all_mode:this.params.mode=="tweets",timeline_mode:this.params.mode=="timeline",with_links_mode:this.params.mode=="links"},this.params);a((new twttr.views.SearchStreamTitle(c)).html());var d=$(".js-stream-title .stream-tab-dropdown"),e=new twttr.control.Dropdown(d,{items:[{label:_("Top"),handlers:this._getSearchHandlers("relevance")},{label:_("All"),handlers:this._getSearchHandlers("tweets")},{label:_("With links"),handlers:this._getSearchHandlers("links")}],direction:"left"});e.render(d,"append")}).update(function(a,b,c){var d=this;!twttr.is.def(a.since_id)&&this.items.length>0&&!twttr.is.def(a.max_id)&&(a.since_id="1");if(!a.since_id){var e=a.success;a.success=function(a,b){d.logSearchImpressions(a),d._next_page=b.response.next_page;var c=e.apply({},arguments);return!d._next_page&&!b.response.served_by_blender&&d.reachedTheEnd(),c}}a.max_id&&(a.page=d._next_page),this.params.debug&&(a.debug=this.params.debug);var f=twttr.util.params().promoted_location;f&&(a.promoted_location=f),this.params.experimentId&&(a.experimentId=this.params.experimentId),this.params.mode==="links"?a.filter="links":this.params.mode==="relevance"?a.mode="relevance":this.params.mode==="timeline"&&(a.mode="timeline"),this.search(this.params.query,a)}).methods({_shouldCache:!1,search:function(a,b){var c=this;if(this.inProgress)return;var d=function(a,b){return a=a||$.noop,function(){return c.inProgress=b,a.apply(this,arguments)}};b.before=d(b.before,!0),b.success=d(b.success,!1),b.error=d(b.error,!1),b.cancel=d(b.cancel,!1),b.query_source=twttr.search.getLastQuerySource(),twttr.API.Status.search(a,b)},_getSearchHandlers:function(a){var b=this;return{click:function(){b.params.mode=a,twttr.app.currentPage().send("getStreamManager",function(a){a.switchTo(twttr.streams.Search,b.params)})}}},scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{query:this.params.query,type:this.params.mode})},logSearchImpressions:function(a){var b=[],c=[],d=[],e=[];a.each(function(a){a.isPromoted()?(d.push(a.id),e.push(a.impressionId)):a.resultCategory==="popular"?c.push(a.id):b.push(a.id)}),scribble("integrated_search_impression",{mode:this.params.mode,query:this.params.query,pretty_query:this.params.pretty_query,top_tweets:c,promoted_tweets:d,impression_ids:e,tweet_count:a.length()})},_getEmptyStreamHtml:function(){if(this.params.mode==="links")return _("No Tweet results with links for <strong>{{pretty_query}}</strong>.",this.params);if(this.params.mode==="relevance"){var a={path:twttr.router.searchRealtimePath({query:this.params.query}),pretty_query:this.params.pretty_query};return twttr.router.routeTo(twttr.router.searchRealtimePath({query:this.params.query}))}return _("No Tweet results for <strong>{{pretty_query}}</strong>.",this.params)},_getStreamEndHtml:function(){if(this.params.mode==="links")return _("Older Tweet results with links for <strong>{{pretty_query}}</strong> are unavailable.",this.params);if(this.params.mode==="relevance"){var a={path:twttr.router.searchRealtimePath({query:this.params.query}),pretty_query:this.params.pretty_query};return _('You&rsquo;ve reached the end of the Top Tweets for <strong>{{pretty_query}}</strong>. <div><a href="{{path}}">View all Tweets</a>.</div>',a)}return _("Older Tweet results for <strong>{{pretty_query}}</strong> are unavailable.",this.params)},beforeShowNewItems:function(){this.constructor.uber.beforeShowNewItems.apply(this,arguments),this.movePromotedTweetToTop()},onShowNewItems:function(a){this.constructor.uber.onShowNewItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(0,this.newItemsCount))},onShowOldItems:function(a){this.constructor.uber.onShowOldItems.apply(this,arguments),this.logPromotedImpressions(this.items.slice(this.items.length-this.oldItemsCount))}}).deciderKey("tweet_stream_search").pollingDeciderKey("tweet_stream_search_polling");twttr.isT1&&d.methods({_setHeader:function(a,b){a((new twttr.views.TweetSearchStreamHeader(b)).$html())},_setTitle:function(a){a(_("Tweets"))},_setViewToggler:function(a){a(new twttr.views.SearchStreamViewToggler(this.params.query,this.params.mode))}}),a(d)})}),provide("streams/UserStream",function(a){using().as(function(b){twttr.stream("twttr.streams.UserStream",function(a,b,c){var d=this;twttr.streams.Stream.apply(this,arguments),this.scribbler=this.params.scribbler||twttr.Scribbler.clientEvent,this.isCursorPagination()?this.cursor=-1:this.page=0,this.registerUserActionEvents()}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.userActionable).methods({itemViewClass:"StreamUser",streamItemType:"user",IDS_PER_REQUEST:5e3,update:function(a){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("people_streams")||this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}var c={success:function(c,d){var e=b.isCursorPagination();b.push(c.array);var f=d&&d.fetchedFullPage||c.length()===b.PAGE_SIZE;e?b.cursor=d.response.next_cursor:f?b.page=b.page+1:b.page=-1,(e&&!b.cursor||!e&&b.page===-1)&&b.reachedTheEnd(),c.each(function(a){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)}),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR),b._scribeResults("error",[],{status_code:c.status})},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT),b._scribeResults("error",[],{status_code:502})}};c=twttr.merge(c,this.isCursorPagination()?{cursor:this.cursor}:{page:this.page+1}),this.update(c)},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},PAGE_SIZE:20,isCursorPagination:function(){return!0},_getStreamErrorComponent:function(a){return a===twttr.streams.PROTECTED?new twttr.components.ProtectedUser({screen_name:this.params.screenName}):twttr.streams.Stream.prototype._getStreamErrorComponent.apply(this,arguments)},_scribeResults:function(a,b,c){twttr.streams.Stream.prototype._scribeResults.apply(this,arguments);var b=b||[];c=c||{};if(a=="error"||a=="initial"&&!b.length)this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},twttr.merge(c,{item_count:0,event_value:0,cursor_or_page:this._cursorOrPage(),referring_event:a}));else if(b.length){var d=this,e=[],f;twttr.each(b,function(a,b){e.push(a.id);if(d.constructor._namespace.indexOf("UserRecommendations")!=-1||d.constructor._namespace.indexOf("PeopleSearch")!=-1){var c;a.promotedContent&&a.promotedContent.impression_id&&(c={item_type:twttr.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id}),c&&(f=f||{},c.item_position=b,f[a.id+""]=c)}}),f&&(c.item_details=f),this.scribbler.scribe({component:"stream",action:"results"},twttr.merge(c,{item_ids:e,item_count:e.length,event_value:e.length,cursor_or_page:this._cursorOrPage(),referring_event:a}))}},sortUsersByIds:function(a,b){var c=[],d={};return twttr.each(a,function(a){d[a.id]=a}),twttr.each(b,function(a){d[a]&&c.push(d[a])}),c},fetchUsersById:function(a,b){var c=this,d,e,f;twttr.API.User.find(this.screenName,function(d){if(!twttr.helpers.canViewUser(d)){c._showError(twttr.streams.PROTECTED),c.doneLoadingMore();return}e=c.page*c.PAGE_SIZE,f=c.fetchedIds&&e<c.IDS_PER_REQUEST,f?c.hydrateUsers(a):(c.page=0,d[b]({cursor:c.idsCursor,success:function(b,d){d.response.next_cursor&&(c.idsCursor=d.response.next_cursor),c.fetchedIds=b,c.hydrateUsers(a)}}))})},hydrateUsers:function(a){var b=this,c=this.fetchedIds,d=a.success;a.success=function(a){var c=b.sortUsersByIds(a.array,e);a.array=c,d.call(this,a,{fetchedFullPage:e.length==b.PAGE_SIZE})};var e=c.slice(this.page*this.PAGE_SIZE,(this.page+1)*this.PAGE_SIZE);twttr.decider.isAvailable("people_stream_fresh")?e.length?twttr.API.User.findAll(e,{success:a.success,reload:!0}):a.success(new twttr.anywhere.api.util.BaseCollection([])):twttr.API.User.findAll(e,a.success)}}),a(twttr.streams.UserStream)})}),provide("streams/Friends",function(a){using("_","util").as(function(b,_){var c=twttr.stream("twttr.streams.Friends",function(a,b){twttr.streams.UserStream.apply(this,arguments);var c=this;this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"}),this._registerEvents()}).subclassOf(twttr.streams.UserStream).methods({PAGE_SIZE:100,update:function(a){this.fetchUsersById(a,"friendIds")},isCursorPagination:function(){return!1},_countString:function(a){return a===1?_("You follow 1 person"):_("You follow {{friendsCount}} people",{friendsCount:b.util.formatNumber(a,twttr.pageLocale)})},_setTitle:function(a){$("#following-page-context").html(_("Here&rsquo;s more about them."));if(this.params.subtab){var b=new twttr.views.FollowingSubtabs(this.params);a(b.html())}},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following anyone yet."):_("@{{screen_name}} isn't following anyone yet.",{screen_name:this.screenName})},_registerEvents:function(){if(twttr.loggedIn){var a=function(a,b){return twttr.helpers.isProfileUser()?b:null};this._registerAddToStreamEvent(twttr.API.User,"follow",a),this._registerRemoveFromStreamEvent(twttr.API.User,"unfollow",a)}}}).statics({_deciderKey:"people_stream_friends"});twttr.isT1&&c.methods({_setTitle:function(a){a(_("Following"))}}),a(c)})}),provide("streams/FollowerRequests",function(a){using("_","mixins/protectedUserActionable").as(function(b,_){twttr.stream("twttr.streams.FollowerRequests",function(a,b){var c=this;this.constructor.uber.constructor.apply(this,arguments),this.cursor=0,this.oldItemsCount=-1,this.pending_users=[],this.getFollowerRequestCount=function(a){var b=this;b.oldItemsCount==-1?twttr.currentUser.friends.pending(function(c,d){b.oldItemsCount=c.length,b.pending_users=c,a(b.oldItemsCount)}):(b.oldItemsCount=b.pending_users.length,a(b.oldItemsCount))},this.registerProtectedUserActions()}).subclassOf(twttr.streams.UserStream).mixin(b.mixins.protectedUserActionable).methods({itemViewClass:"StreamFollowerRequest",streamItemType:"user",update:function(a){},_fetchItems:function(a){var b=this;b.getFollowerRequestCount(function(c){var d={success:function(d,e){b.push(d.array),b.cursor=b.cursor+b.constructor.PAGE_SIZE,b.cursor>=c&&b.reachedTheEnd(),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}};sliced_list=b.pending_users.slice(b.cursor,b.cursor+b.constructor.PAGE_SIZE),twttr.API.User.findAll(sliced_list,d)})},_setTitle:function(a){a(_("Your pending follower requests"))}}).statics({PAGE_SIZE:20,_deciderKey:"people_stream_follower_requests"}),a(twttr.streams.FollowerRequests)})}),provide("streams/Followers",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Followers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"}),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({PAGE_SIZE:100,update:function(a){this.fetchUsersById(a,"followerIds")},isCursorPagination:function(){return!1},_setTitle:function(a){if(this.params.subtab){var b=new twttr.views.FollowersSubtabs(this.params);a(b.html())}},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You don't have any followers yet."):_("@{{screen_name}} doesn't have any followers yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return!twttr.helpers.isProfileUser()&&c.screenName===a.screenName?twttr.currentUser:null};this._registerAddToStreamEvent(twttr.API.User,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.User,"unfollow",b)}}}).statics({_deciderKey:"people_stream_followers"});twttr.isT1&&c.methods({_setTitle:function(a){a(_("Followers"))},_setViewToggler:function(a,b){twttr.loggedIn&&!twttr.helpers.isProfileUser()&&a(new twttr.views.FollowersStreamViewToggler(b.screenName,!1))}}),a(c)})}),provide("streams/SocialContextStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.SocialContextStream",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.params=a;var c=a.socialContextType=="followsInCommonWith"?"following_social_context":"followers_social_context";this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile",event_info:c})}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){if(!twttr.helpers.canViewUser(c)){b._showError(twttr.streams.PROTECTED),b.doneLoadingMore();return}twttr.currentUser[b.params.socialContextType](twttr.profileUser.id,a)})},_getEmptyStreamHtml:function(){var a={user:twttr.profileUser.screenName};return this.params.socialContextType=="followsInCommonWith"?_("You and @{{user}} don't follow anyone in common.",a):_("You don't follow anyone who follows @{{user}}.",a)}}).statics({_deciderKey:"social_context"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Followers"))},_setViewToggler:function(a,b){twttr.loggedIn&&!twttr.helpers.isProfileUser()&&a(new twttr.views.FollowersStreamViewToggler(b.screenName,!0))}}):c.methods({_setTitle:function(a){if(this.params.socialContextType=="followsInCommonWith")var b=new twttr.views.FollowingSubtabs(this.params);else var b=new twttr.views.FollowersSubtabs(this.params);a(b.html())}}),a(twttr.streams.SocialContextStream)})}),provide("streams/SuggestionCategoriesStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoriesStreamT1":"","mixins/discoveryHelper").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoriesStream",function(a,b){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments),this.$node.addClass("suggestion-categories");var c=this;this.$node.delegate("div[data-item-type=suggestion_category]","click",function(a){var b=$(this).attr("data-item-id"),d={};return d[b]={item_position:$("div.js-stream-manager-container div.js-stream-item").index($(a.target).closest(".js-stream-item"))},b&&(trackClient({component:"suggestion_category",action:"click"},{step:"interests",query:b,item_details:d}),c.routePageTo(c.params.pathRoot,"InterestsCategory",{category:b})),!1})}).subclassOf(twttr.streams.Stream).statics({cacheCategories:function(a){this.CATEGORIES=a,this.CATEGORY_MAP=this.buildCategoryMap(a)},buildCategoryMap:function(a){return a.reduce({},function(a,b){return a[b.slug]=b,a})},filterTopTweetsCategories:function(a){var b=this.buildCategoryMap(a);return a.filter(function(a){if(a.slug.match(/^(.+)[_-]top-tweets$/i)){var c=b[RegExp.$1];return c&&(c.topTweetsCategory=a),!1}return!0})}}).methods({itemViewClass:"StreamSuggestionCategory",streamItemType:"suggestion_category",sampleSize:"",streamItemId:function(a){return a.slug},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},addTipsies:function(){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("suggestion_categories_streams")){a(this,twttr.streams.DECIDER);return}var c={sample_size:this.sampleSize,samples:!0,success:function(c){c=b.constructor.filterTopTweetsCategories(c),b.constructor.cacheCategories(c);var d=c.map(function(a){var c,d;return a.topTweetsCategory&&a.topTweetsCategory.sample&&(d=a.topTweetsCategory.sample.shift())&&(c=d.id),a.clone({category_link:b.pagePathFor(b.params.pathRoot,"InterestsCategory",{category:a.slug}),category_top_tweets_user_id:c,category_top_tweets_is_current_user:!!twttr.currentUser&&twttr.currentUser.id==c,following_category_top_tweets:a.topTweetsCategory?a.topTweetsCategory.followingTopTweets:null})});b.push(d.array),a(b,twttr.streams.SUCCESS),b.addTipsies(),b.reachedTheEnd();var e=c.map(function(a,b){return a.name});b.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length()})},error:function(){a(b,twttr.streams.ERROR)}};b.defaultOpts&&(c=twttr.merge(b.defaultOpts,c)),b.params.lang&&(c.lang=b.params.lang),b.params.country&&(c.country=b.params.country),b.params.city&&(c.city=b.params.city),c.top_tweets=!0,twttr.API.SuggestionCategory.getAll(c)},_setTitle:function(a){this.params.title!==undefined?a(this.params.title):a(_("Select the topics you are interested in. Find a few people you want to hear from, then follow them."))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(this.constructor.CATEGORIES,this.params.pathRoot)},_getStreamEndComponent:function(){return this._getHeaderComponent()}}).mixin(twttr.mixins.discoveryHelper);c&&d.mixin(c),a(d)})}),provide("streams/PeopleSearch",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.PeopleSearch",function(a,b){twttr.streams.UserStream.apply(this,arguments),this.ignoreScribeItemPosition=!1}).subclassOf(twttr.streams.UserStream).methods({scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{name:"Search",query:this.params.query,type:"people"})},update:function(a){a.display_location="search-view-all-stream",a.pc=!0,twttr.API.User.search(this.params.query,a)},isCursorPagination:function(){return!1},_getEmptyStreamHtml:function(){return _("No people results for <strong>{{query}}</strong>.",{query:this.params.query})},getStreamEndHtml:function(){return _("No more people results for <strong>{{query}}</strong>.",{query:this.params.query})},_setHeader:function(a,b){this.header?a(this.header.$node):a((new twttr.views.StreamHeader(b)).$html())},_setTitle:function(a){twttr.isT1?a(_("People")):a(_("Results for: <strong>{{query}}</strong>",{query:this.params.query}))}}).statics({_deciderKey:"people_stream_people_search"}),a(twttr.streams.PeopleSearch)})}),provide("streams/t1/HeadlessPeopleSearch",function(a){using("_").as(function(a,_){twttr.klass("twttr.streams.HeadlessPeopleSearch",function(a,b){twttr.streams.PeopleSearch.apply(this,arguments);var c=new twttr.streams[a.headerStreamClass](a,b);this._setHeader=c._setHeader,this._setTitle=c._setTitle,this._setHeaderButton=c._setHeaderButton,this._updateHeaderFromStream=c._updateHeaderFromStream}).subclassOf(twttr.streams.PeopleSearch).methods({_setViewToggler:function(a,b){a(new twttr.views.BackLink(b.backLinkOptions))}})}),a(twttr.streams.HeadlessPeopleSearch)}),provide("streams/DashboardPeopleSearch",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardPeopleSearch",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",twttr.streams.PeopleSearch.apply(this,arguments)}).subclassOf(twttr.streams.PeopleSearch).methods({scribeData:function(){return twttr.merge(twttr.streams.Stream.prototype.scribeData.apply(this),{name:"Search",query:this.params.query,type:"people"})},update:function(a){a.display_location="search-view-all-stream",a.pc=!1,twttr.API.User.search(this.params.query,a)},_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a()})}),provide("streams/DashboardTopPeopleSearch",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardTopPeopleSearch",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b={is_t1:twttr.isT1,statuses:!1,stories:!0,related_queries:!1,spelling_corrections:!1,query_source:twttr.search.searchQuerySource.TYPED_QUERY};twttr.merge(b,a);var c=this,d=b.success||$.noop;b.success=function(a,b){var e=new twttr.anywhere.api.util.BaseCollection;a.stories.each(function(a){a.type=="user"&&(e=e.concat(a.content.users))}),d(e,b),c.trigger("results",[e])},twttr.API.Search.search(this.params.query,b)},_setHeader:function(a,b){a("")},_getStreamEndComponent:function(){return new twttr.components.TopPeopleStreamEnd(this.params.query)},itemViewClass:"DashboardStreamUser"}),twttr.klass("twttr.components.TopPeopleStreamEnd").subclassOf(twttr.components.Base).initializer(function(a){(new twttr.views.TopPeopleStreamEnd({query:a})).render(this.$node,"append")}),a()})}),provide("streams/ListFollowers",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ListFollowers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName).lists(function(c){c.find(function(a){return a.slug===b.params.listSlug}).followers(a)})},_setTitle:function(a){twttr.isT1?a(_("List subscribers")):a(_("People following this list"))},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return c.slug===a.listSlug?twttr.currentUser:null};this._registerAddToStreamEvent(twttr.API.List,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"unfollow",b)}}}).statics({_deciderKey:"people_stream_list_followers"}),a(twttr.streams.ListFollowers)})}),provide("streams/ListMembers",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ListMembers",function(a,b){twttr.streams.UserStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName).lists(function(c){c.find(function(a){return a.slug===b.params.listSlug}).members(a)})},_setTitle:function(a){twttr.isT1?a(_("List members")):a(_("People this list follows"))},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c,d){return c.slug===a.listSlug?d:null};this._registerAddToStreamEvent(twttr.widget.ListMembershipDialog,"addListMember",b),this._registerRemoveFromStreamEvent(twttr.widget.ListMembershipDialog,"removeListMember",b)}}}).statics({_deciderKey:"people_stream_list_members"}),a(twttr.streams.ListMembers)})}),provide("streams/Discover",function(a){using("_","util","mixins/t1/cardActionable","helpers","constants").as(function(b,_){twttr.klass("twttr.streams.Discover",function(a,b){var c=this;twttr.streams.Stream.apply(c,arguments),this.scribbler=twttr.Scribbler.clientEvent,c.registerCardActions(),this.registerTweetActionEvents(),this.initComponentEvents(),c.$find(".js-user-tipsy").tipsy({gravity:"s"}),twttr.API.CurrentUser.bind("changedLocation.discovery",function(){jQuery.contains(document.body,c.$node[0])?c._fetchItems($.noop):c._lastUpdate=null})}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.cardActionable,twttr.mixins.componentEvents,twttr.mixins.tweetActionable).statics({discoveryRefreshRate:3e5}).methods({streamItemType:"story",_expandable:!0,itemViewClass:function(a){return twttr.views["Card"+b.util.capitalize(a.type)]},streamItemId:function(a){return a.getId()},addTipsies:function(){this.$find(".js-user-tipsy").tipsy({gravity:"s"})},afterFirstSwitchingTo:function(a){this._fetchItems(a)},afterSwitchingToAgain:function(a){!this._lastUpdate||this._lastUpdate+twttr.streams.Discover.discoveryRefreshRate<=this.now()?this._fetchItems(a):a&&a()},now:function(){return(new Date).getTime()},reset:function(){this.$streamItems().empty(),this.items=[],this.itemIds=null,this.$find(".js-discovery-error").remove()},_setTitle:function(a){a(_("Stories"))},_fetchItems:function(a){var b=this;!this.items.length&&this.showLoadingSpinner();var c=function(){b.reset(),b._lastUpdate=null,b.hideLoadingSpinner(),(new twttr.views.DiscoveryStreamError).$html().appendTo(b.dom()),a(b,twttr.streams.ERROR)},d=function(d){if(d.stories.isEmpty()){c();return}b.reset(),b.hideLoadingSpinner(),b._lastUpdate=b.now(),$.each(d.stories.array,function(a,b){b.position=a+1}),b.push(d.stories.array),b.newItemsCount=d.stories.length(),b.render(),b.ellipsify(),b.addTipsies(),a&&a(b,twttr.streams.SUCCESS),b.reachedTheEnd()};twttr.API.Discovery.discovery({success:d,error:c,include_entities:!0,tweet_count:0})},ellipsify:function(){b.helpers.ellipsify(this.$find("h3.js-story-title,p.js-metadata")),b.helpers.ellipsify(this.$find("p.js-news-snippet, h4.js-news-headline"),!1,!0,null,{ellipsis:"&ellip;"})},_scribeResults:function(a,c,d){this._scribeEmptyResults(a,c,d);if(c.length){var e=[],f={};twttr.each(c,function(a,c){var d,g=a.content&&a.content.articles&&a.content.articles.array[0];g?d=g.query:a.content&&(d=a.content.query),d&&(e.push(d),f[d]={item_type:b.constants.clientEvent.itemType.story,item_position:c,item_description:a.type})}),this.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length,event_value:e.length,item_details:f,referring_event:a})}}}).click({".story-social-new-tweet":function(a,b){a.stopPropagation(),a.preventDefault();var c=b.data("url");(new twttr.widget.TweetDialog({draggable:!0,template:{title:_("Tweet this link")},defaultContent:c,origin:"discovery-story-tweet-button"})).open().focus()}}),a(twttr.streams.Discover)})}),provide("streams/SavedSearches",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.SavedSearches",function(a,b){twttr.streams.Stream.apply(this,arguments),this.oldItemsCount=-1,this.scribbler=twttr.Scribbler.clientEvent}).subclassOf(twttr.streams.Stream).methods({itemViewClass:"StreamSavedSearch",streamItemType:"saved_search",streamItemId:function(a){return a.id}}).methods({afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_setTitle:function(a){a("Saved searches")},_fetchItems:function(a){var b=this;twttr.currentUser.savedSearches(function(c){b.items=c.array,b.oldItemsCount==-1&&(b.oldItemsCount=b.items.length),a(b,twttr.streams.SUCCESS),b.reachedTheEnd()})},_scribeResults:function(a,b,c){this._scribeEmptyResults(a,b,c);if(b.length){var d=twttr.map(b,function(a){return a.query});this.scribbler.scribe({component:"stream",action:"results"},{item_names:d,item_count:d.length,event_value:d.length,referring_event:a})}}}),a(twttr.streams.SavedSearches)})}),provide("mixins/SinceMaxPagination",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.SinceMaxPagination",function(){this.statics({deciderKey:function(a){return this._deciderKey=a,this}}),this.methods({_fetchItems:function(a){this.fetcher(!0,a)},fetcher:function(a,b,c){var d=this;twttr.is.fn(a)&&(c=b,b=a,a=!1);if(this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){b(this,twttr.streams.DECIDER);return}var e=a?this._optionsForOld(b):this._optionsForNew(b);c=c||{},e=twttr.merge(c,e),this.excludeEntities||(e.include_entities=1),this.update(e,this.params,b)},fetchUntilScreenIsFull:function(){var a=this;!this.noMoreOldItems&&this._isInDOM()&&this._shorterThanWindow()&&this.getMoreOldItems(function(b,c){c!==twttr.streams.SUCCESS?a._showError(c):a.fetchUntilScreenIsFull()})},_isInDOM:function(){return jQuery.contains(document.body,this.$node[0])},_shorterThanWindow:function(){return this.$node.height()<$(window).height()},_optionsForNew:function(a){var b=this,c={success:function(c){c instanceof twttr.API.util.BaseCollection&&(c=c.array),c.length&&(b._updateIds(c),b.unshift(c)),a&&a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)}};return this.items.length&&(c.since_id=this._sinceId),c},_optionsForOld:function(a){var b=this,c={success:function(d){c.max_id&&(d=d.slice(1)),d instanceof twttr.API.util.BaseCollection&&(d=d.array),d.length?(b._updateIds(d),b.push(d)):b.reachedTheEnd(),a&&a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}};return this.items.length?(c.max_id=this._maxId,c.count=this.PAGE_SIZE+1):c.count=this.PAGE_SIZE,c},_updateIds:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));var b=a[0],c=a[a.length-1],d,e;this._idForItem?(d=this._idForItem(b,"first"),e=this._idForItem(c,"last")):(d=b.id,e=c.id);if(!this._sinceId||twttr.natcompare(d,this._sinceId)>0)this._sinceId=d;if(!this._maxId||twttr.natcompare(e,this._maxId)<0)this._maxId=e}})}),a(twttr.mixins.SinceMaxPagination)})}),provide("mixins/PollingStream",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.PollingStream",function(){var a={ACTIVE:3e4,INACTIVE:9e4},b=!0,c=a.ACTIVE;$(window).focus(function(){c=a.ACTIVE,b=!0}),$(window).blur(function(){c=a.INACTIVE,b=!1}),this.statics({pollingDeciderKey:function(a){return this._pollingDeciderKey=a,this}}),this.methods({_getInterval:function(){return this.timeouts?b?this.timeouts.ACTIVE:this.timeouts.INACTIVE:c},_pollFetch:function(){var a={headers:{"X-Twitter-Polling":!0}};this.fetcher(twttr.bind(this,function(a){var b=a.newItemsCount;b>0&&(this.showNewItems(b,!0),this.trigger("newItems",[a,b]))}),a)},startPeriodicFetcher:function(){if(this.periodicUpdater||this.constructor._pollingDeciderKey&&!twttr.decider.isAvailable(this.constructor._pollingDeciderKey))return;this.periodicUpdater=setTimeout(twttr.bind(this,this.fetchNewItemsThenPoll),this._getInterval())},stopPeriodicFetcher:function(){this.periodicUpdater&&(clearTimeout(this.periodicUpdater),this.periodicUpdater=null)},fetchNewItemsThenPoll:function(){var a=!0;this._pollShouldFetch&&(a=this._pollShouldFetch()),a&&this._pollFetch(),this.restartFetcher()},restartFetcher:function(){this.stopPeriodicFetcher(),this.startPeriodicFetcher()}})}),a(twttr.mixins.PollingStream)})}),provide("mixins/activityStreamEvents",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.activityStreamEvents",function(){var a;twttr.isT1?a="div.stream-item-activity-me div.activity-supplement img.avatar,     div.stream-item-activity-network div.follow-more-than-two img.avatar,     div.stream-item-activity-network.stream-item-list_member_added img.avatar,     div.stream-item-activity-network div.activity-secondary-supplement img.user-profile-link":a=".stream-item-activity-me .sub-stream-item img.user-content-image,     .stream-item-activity-network .follow-more-than-two img.user-content-image,     .stream-item-activity-network.stream-item-list_member_added img.user-content-image,     .stream-item-activity-network .activity-secondary-supplement .user-profile-link",$(a).tipsy({live:!0,gravity:"s"})}),a(twttr.mixins.activityStreamEvents)})}),provide("mixins/inviteFriends",function(a){using("util","constants").as(function(b){twttr.klass.mixin("twttr.mixins.inviteFriends",function(){this.methods({sendInvitesByEmailSuccess:function(a){var b=a.invited&&a.invited.length;b?(this.scribbler.scribe({section:"dashboard",component:"invite_friends",action:"invited"},{event_value:b,item_count:b}),twttr.showMessage(b>1?_("OK, we will send invites to your {{count}} friends!",{count:b}):_("OK, we will send an invite to {{email}}!",{email:a.invited[0]})),this.$textarea.val("")):twttr.showError(_("Something is wrong, nobody was invited :-(")),this.$textarea.removeAttr("disabled").blur()},sendInvitesByEmailError:function(a){var b=twttr.helpers.extractEmailAddresses(this.$textarea.val()),c=b.length===1?b[0].split(","):b.length,d=twttr.API.util.RemoteRequest.apiErrorCodeFromResponse(a)||a.status;this.scribbler.scribe({component:"invite_friends",action:"error"},{status_code:d,item_count:c});switch(d){case 47:twttr.showError(_("We couldn't send invitations to any of those addresses."));break;case 37:twttr.showError(_("There was an error emailing your friends. Please try again later."));break;default:twttr.showMessage(_("OK, we will send invites to your friends!"))}this.$textarea.removeAttr("disabled").focus()},formSubmitCallback:function(){if(this.$textarea.attr("disabled"))return;var a=twttr.helpers.extractEmailAddresses(this.$textarea.val());if(a.length){this.$textarea.attr("disabled","disabled").val(a.join(", "));var b=this;twttr.API.AddressBook.sendInvitesByEmail(a,{source:"invite_friends",success:twttr.bind(this,this.sendInvitesByEmailSuccess),error:twttr.bind(this,this.sendInvitesByEmailError)})}else twttr.showError(_("Please check the address you entered."))},addFormEvents:function(a){this.scribbler=a||new twttr.Scribbler,this.$textarea=this.$textarea||this.$find("textarea"),this.$textarea.bind("keyup",function(a){var c=$(this);(a.which==b.constants.keyCodes.enter||c.val().indexOf(",")>0)&&c.addClass("expanded")}),twttr.helpers.addFormEvents(this.$find("form"),twttr.bind(this,this.formSubmitCallback))}})}),a(twttr.mixins.inviteFriends)})}),provide("mixins/newStreamItemsBar",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.newStreamItemsBar",function(){this.methods({showNewStreamItemsBar:function(a){var b=this.$find(".js-new-tweets-bar"),c;this.newStreamItemsBarPhrase?c=this.newStreamItemsBarPhrase(a):c=a==1?_("1 new item"):_("{{count}} new items",{count:a}),b.length>0?b.html(c):(b=$((new twttr.views.NewTweetsBar({tweets_count_phrase:c,is_tweet:!1})).html()),b.hide().prependTo(this.dom()).slideDown())}})}),a(twttr.mixins.newStreamItemsBar)})}),provide("mixins/typeaheadScribing",function(a){using().as(function(b,_){var c=twttr.klass.mixin("twttr.mixins.typeaheadScribing",function(){return this.methods({startStatsTimer:function(){this._statsTimerStart||(this._statsTimerStart=+(new Date)),this._lastTimerEvent="start"},pauseStatsTimer:function(){this._statsTimerStart!==0&&this._lastTimerEvent=="start"&&(this._statsCumulativeTime+=+(new Date)-this._statsTimerStart,this._statsTimerStart=0),this._lastTimerEvent="pause"},resetStatsTimer:function(){this._statsCumulativeTime=0,this._statsTimerStart=0,this._lastTimerEvent="pause"},addLocalLatency:function(a,b){this._localLatencies.push(b)},addRemoteLatency:function(a,b){this._remoteLatencies.push(b)},medianAndStdDev:function(a){var b=twttr.reduce(a,0,function(a,b,c){return a+c}),c=a.length,d=b/c,e=twttr.reduce(a,0,function(a,b,c){return a+(c-d)*(c-d)}),f=Math.sqrt(e/c);return{median:d,stdDev:f}},scribe:function(a,b){twttr.is.def(this._scribbler)||(this._scribbler=twttr.Scribbler.global.spawn({context:"typeahead"}),this._scribbler.component={}),this._scribbler.scribe(a,b)},browserInfo:function(){var a="unknown";return $.browser.webkit?a="webkit":$.browser.msie?a="msie":$.browser.mozilla?a="mozilla":$.browser.opera&&(a="opera"),{browser:a,version:$.browser.version}},scribeLocalStorageLatency:function(a,b,c){var d=this.browserInfo();this.scribe("typeahead_localstorage_latency",{type:b,latency:c,browser:d.browser,version:d.version})},scribeSelect:function(a,b,c){var d=this._statsCumulativeTime,e=a.type==="click"?"click":"enter",f=c.length>0,g=c.data("remote")===!0,i="unknown";c.data("query")?i="saved search":c.find("a").data("search-query")?i="query suggestion":c.data("user-id")&&(i="users");var j=this.$node.find(".js-selectable").index(c)+1||0,k=this.medianAndStdDev(this._localLatencies),l=this.medianAndStdDev(this._remoteLatencies),m=twttr&&twttr.users&&twttr.users.typeahead?twttr.users.typeahead.length:0,n;try{n=JSON.stringify(localStorage).length}catch(o){n=0}this.scribe("typeahead_select",{time_to_completion:d,keystrokes_to_completion:this._keystrokes,item_count:f.toString(),item_details:i,index:j,query:b,was_remote:g.toString(),local_latency_median:k.median,local_latency_std_dev:k.stdDev,remote_latency_median:l.median,remote_latency_std_dev:l.stdDev,click_or_enter:e,local_storage_size:n,users_in_local_storage:m,people_from_api:twttr.caches.User.get("typeahead_people_from_api")||0,people_followed:twttr.caches.User.get("typeahead_people_followed"),profile_visits:twttr.caches.User.get("typeahead_profile_visits"),people_blocked:twttr.caches.User.get("typeahead_people_blocked"),people_unblocked:twttr.caches.User.get("typeahead_people_unblocked")}),this.resetStatsTimer(),this._keystrokes=0}}),this});a(c)})}),provide("mixins/discoveryHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.discoveryHelper",function(a){return a.methods({pagePathFor:function(a,b,c){return twttr.router[a+(b||"")+"Path"](c)},routePageTo:function(a,b,c){twttr.router.routeTo(this.pagePathFor(a,b,c))},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a}}),a}),a(twttr.mixins.discoveryHelper)})}),provide("mixins/usesRelatedResults",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.usesRelatedResults",function(a){return a.methods({_conversationRoleFor:function(a){return a.annotations.ConversationRole},tweetsForConversationRole:function(a,b){var c=this,d=twttr.filter(a.results.array,function(a){return c._conversationRoleFor(a)===b});return twttr.map(d,function(a){return a.value})},_groupNamed:function(a,b){return twttr.filter(a.array,function(a){return a.groupName===b})[0]},conversationGroupFor:function(a){return this._groupNamed(a,"TweetsWithConversation")},withRelatedResults:function(a,b,c){var d=this;twttr.API.Status.related(a.id,{include_entities:1,success:function(b){d._logResultGroups(b,a),c.success(b)},error:c.error||function(){}})},_logResultGroups:function(a,b){var c=this,d=(new Date).getTime()+"-"+(twttr.currentUser?twttr.currentUser.id:"guest")+"-"+b.id,e=[],f={related_impression_id:d,groups:e},g;$.each(a.array,function(a,b){var f=[],i=[];e.push(c._scribeDataFor(b,a)),g||(g=c._abDataFor(b)),b.sync("relatedImpressionId",d)}),scribble("show-related-tweets",f),g&&scribble("show-related-tweets",g,"www_ab_testing")},_scribeDataFor:function(a,b){var c={pos:b,groupName:a.groupName,resultType:a.resultType,annotations:this._annotationsFor(a),tweets:this._tweetsFor(a)};return a.sync("relatedGroupName",a.groupName),c},_abDataFor:function(a){var b;for(var c in a.annotations)c=="abData"&&(b||(b=a.annotations[c]));if(b)for(var d in b)a.sync("ab_data_"+d,b[d]);return b},_annotationsFor:function(a){var b=[],c="";for(var d in a.annotations)if(d!="abData"){var e={type:d,value:a.annotations[d]};b.push(e),c+=a.annotations[d]+" "}return c.length>0&&(c=c.substring(0,c.length-1)),a.sync("relatedAnnotations",c),b},_tweetsFor:function(a){var b=[];return $.each(a.results.array,function(c,d){a.resultType=="Tweet"&&b.push(d.value.id)}),b}}),a}),a(twttr.mixins.usesRelatedResults)})}),provide("mixins/profileHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.profileHelper",function(a){return a.methods({getUserInfo:function(a,b,c,d){c=c||{},this._screenName=a?a.toLowerCase():a;var e;c.batch===!0&&twttr.decider.isAvailable("profile_combined_api")?e=twttr.API.User.findForProfile:e=twttr.API.User.find,e.call(twttr.API.User,this._screenName,{success:twttr.bind(this,function(a){this.profileUser=twttr.profileUser=a,b&&b()}),error:twttr.bind(this,function(a){signal(">wokeUp"),a.status==403?twttr.isT1?twttr.app.switchToPage("403").send("suspendedUser"):twttr.Router.performRedirect(twttr.router.suspendedPath()):this.trigger("notFound"),d&&d()})})},_isSocialContextAvailable:function(){return twttr.decider.isAvailable("social_context")&&twttr.loggedIn&&twttr.currentUser.id!=twttr.profileUser.id},_defaultedScreenName:function(a){return!a&&twttr.loggedIn?twttr.currentUser.screenName:a},_addPromotedData:function(){twttr.promotedAccountStore.hasAccount()&&twttr.promotedAccountStore.getAccount().id==this.profileUser.id&&(this.profileUser=twttr.API.util.PromotedStore.getPromotedUserInstance(this.profileUser,twttr.promotedAccountStore.getAccount().impressionId),twttr.promotedAccountStore.clear())},noAutoRender:!0}).addViewData(function(){return{profile_user:new twttr.views.ProfileUser(twttr.profileUser)}}),a}),a(twttr.mixins.profileHelper)})}),provide("mixins/commonDashboardClickHandlers",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.commonDashboardClickHandlers",function(a){return a.click({".title-link":function(b,c){var d={input:"click",component:"dashboard",subcomponent:a._name,target:"dashboard_title",item:c.find(".dashboard-component-title").html()};scribble("dashboard_click",d)},".user-profile-link":function(b,c){var d=c.is("img")||c.find("img")[0],e=c.attr("data-user-id")||c.closest("a").attr("data-user-id"),f={input:"click",component:"dashboard",subcomponent:a._name,target:"user_profile_link",target_type:d?"image":"link",profile_id:e};scribble("dashboard_click",f)}}),a}),a(twttr.mixins.commonDashboardClickHandlers)})}),provide("mixins/t1/cardActionable",function(a){using("constants").as(function(b){var c=twttr.klass.mixin("twttr.mixins.cardActionable",function(){this.methods({registerCardActions:function(){var a=this;a.$node.delegate(".js-action-card-search","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("search","card_"+a._getElementCardType(this),{query:a._getCardQuery(this),item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-news","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("open_link","card_news",{url:$(this).attr("href"),query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)}),b.stopPropagation()}),a.$node.delegate(".js-action-card-expandtweets","simpleExpandoContract",function(b){var c=a._getCardQuery(this);a._scribeCardAction("deselect","card_news",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-expandtweets","simpleExpandoExpand",function(b){var c=a._getCardQuery(this);a._scribeCardAction("select","card_news",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-tweetlink","click",function(b){var c=a._getCardQuery(this),d=a._getStreamItemId(this);a._scribeCardAction("compose_tweet","card_news",{url:d,item_names:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-card-permalink","click",function(b){var c=a._getCardTweetId(this);a._scribeCardAction("permalink","card_tweet",{item_count:1,item_ids:[c],item_details:a._getCardItemDetails(this,c)})}),a.$node.delegate(".js-action-profile","click",function(b){var c=a._getCardTweetId(this);a._scribeCardAction("profile_click","card_tweet",{item_count:1,item_ids:[c],item_details:a._getCardItemDetails(this,c,a._getElementUserId(this))})}),a.$node.delegate(".js-action-card-media","click",function(b){var c=a._getCardQuery(this);a._scribeCardAction("click",a._getCardMediaType(this)+"_card_topic",{query:c,item_names:[c],item_details:a._getCardItemDetails(this,c)})})},_scribeCardAction:function(a,b,c){trackClient({action:a,component:b},c)},_getCardAttribute:function(a,b){var c=$(a).closest(".js-story-item");return c.attr(b)},_getElementUserId:function(a){var b=$(a).closest(".js-actionable-tweet");return b.attr("data-user-id")},_getCardTweetId:function(a){return this._getCardAttribute(a,"data-tweet-id")},_getCardQuery:function(a){return this._getCardAttribute(a,"data-query")},_getStreamItemId:function(a){var b=$(a).closest(".js-stream-item");return b.attr("data-item-id")},_getElementCardType:function(a){return this._getCardAttribute(a,"data-story-type")},_getCardMediaType:function(a){return this._getCardAttribute(a,"data-card-media-type")},_getCardItemPosition:function(a,b){var c=$(a).closest("div.js-stream-items"),d;return c.length&&c.find("[data-query]").each(function(a){var c=$(this),e=c.attr("data-query");if(b+""==e)return d=a,!1}),d},_getCardItemDetails:function(a,c,d){var e={},f={item_type:b.constants.clientEvent.itemType.story,item_description:this._getElementCardType(a),item_position:this._getCardItemPosition(a,c)};return d&&(f.target_id=d),e[""+c]=f,e}})});a(c)})}),provide("mixins/t1/discoveryStoryHelpers",function(a){using("_","constants","util").as(function(b){var c=twttr.klass.mixin("twttr.mixins.discoverySearchHelper",function(a){this.methods({formatted_tweet_count_text:function(){return _("{{count}} Tweets",{count:b.util.formatNumber(this.tweet_count,twttr.pageLocale)})},story_name:function(){return this.name||this.query},is_hashtag:function(){return this.story_name().substring(0,1)==="#"},search_path:function(){return twttr.router.searchResultsPath({query:decodeURIComponent(this.query)})},search_query_source:function(){return twttr.search.searchQuerySource.TREND}})}),d=twttr.klass.mixin("twttr.mixins.discoveryMediaRenderHelper",function(a){this.methods({escaped_query:function(){return escape(this.id||this.query)},afterHtml:function(){if(!this.has_media)return;var a=this;setTimeout(function(){var b=(new Date).getTime(),c=a.escaped_query(),d=$("div.js-story-item[data-query='"+c+"']");d.find("div.js-story-load-status").show();var e=d.find("img.js-story-media").error(function(b){twttr.decider.isAvailable("t1d_scribe_errors")&&a._scribe("error",{id:c,url:a.image_url}),d.removeClass("js-loading loading"),d.addClass("js-nomedia nomedia")}).load(function(){twttr.decider.isAvailable("t1d_scribe_times")&&a._scribe("complete",{id:c,time:(new Date).getTime()-b,url:a.image_url}),d.removeClass("js-loading loading")});e.attr("src",a.image_url)},0)},_scribe:function(a,b){trackClient({action:a,component:this.scribeComponent},b)}})});a(c,d)})}),provide("mixins/UserSimilaritiesStreamT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.UserSimilaritiesStreamT1",function(){this.methods({_setTitle:function(a){twttr.helpers.isCurrentUser(twttr.profileUser.screenName)?a(_("Similar to you")):a(_("Similar to {{full_name}}",{full_name:twttr.profileUser.name}))}})});a(c)})}),provide("mixins/SuggestionCategoriesStreamT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.SuggestionCategoriesStreamT1",function(){this.methods({itemViewClass:"StreamInterestCategory",sampleSize:"large",addTipsies:function(){this.$find(".js-user-tipsy").tipsy({gravity:"s"})},_setHeader:function(a,b){b.header_help=_("Select topics you&rsquo;re interested in. Follow people you want to hear from."),b.placeholder=_("Search for a topic, full name, or @username");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowInterestsSearchPath,b);a(c.$node)},_setTitle:function(a){a(_("Browse categories"))},_getStreamEndComponent:function(){return new twttr.components.StreamEnd(this._getStreamEndHtml(),this._getStreamEndShowBird())}})});a(c)})}),provide("mixins/SuggestionCategoryMembersStreamT1",function(a){using("helpers","mixins/hasGovernmentSearchHeader").as(function(b){var c=twttr.klass.mixin("twttr.mixins.SuggestionCategoryMembersStreamT1",function(){this.mixin(b.mixins.hasGovernmentSearchHeader),this.methods({_setTitle:function(a){a(this.category.name)},_setViewToggler:function(a){var b={route:twttr.router.whoToFollowInterestsPath(),name:_("View all categories")};a(new twttr.views.BackLink(b))},_getStreamEndComponent:function(){return new twttr.components.StreamEnd(this._getStreamEndHtml(),this._getStreamEndShowBird())},_showGovernmentSearchHeader:function(){return twttr.abdecider.choose("government_sul_your_reps_195")!=="show_in_government_sul"?!1:this.category.slug===(twttr.isLocalhost?"celebrities":"government")}})});a(c)})}),provide("mixins/UserRecommendationsT1",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.UserRecommendationsT1",function(){this.methods({getRecPosition:function(a){var b;return this.$find(".js-account-summary").each(function(c,d){if(a.attr("data-user-id")==$(d).attr("data-user-id"))return b=c,!1}),b},LIST_ITEM_SELECTOR:".js-recommended-followers > .js-actionable-user",_generateUserList:function(a){return $('<div class="js-recommended-followers flex-module-inner" data-section-id="wtf">'+(new twttr.views.UserSmallList(a)).html()+"</div>")},_removeRefreshLink:function(){this.$find("a.js-refresh-suggestions").parent("span").remove()},_getModuleViewName:function(){return this.screenName?"DashboardUserSimilarities":"DashboardUserRecommendations"},_shouldHaveSpacer:function(){return!1}})});a(c)})}),provide("mixins/hasGovernmentSearchHeader",function(a){using("helpers").as(function(b){var c=twttr.klass.mixin("twttr.mixins.hasGovernmentSearchHeader",function(){this.methods({_setHeader:function(a){var c=this;if(this._showGovernmentSearchHeader()){var d=(new twttr.views.GovernmentAccountSearch({zip_code:this.params&&this.params.zipCode||""})).$html();b.helpers.addFormEvents(d.find(".js-government-account-search"),function(a,b){c.trigger("governmentSearch",[b.zip])}),a(d)}else a()},_showGovernmentSearchHeader:function(){return!0}})});a(c)})}),provide("mixins/prefollowingStream",function(a){using("_").as(function(b,_){twttr.klass.mixin("twttr.mixins.prefollowingStream",function(a){return a.methods({deferredFollows:{},preFollows:{},userActionPrefollow:function(a){var b=twttr.helpers.getUserId(a);this.preFollows[b]=!0,this.userActionFollow(a)},userActionFollow:function(a){var b=this,c=twttr.helpers.getUserId(a);this.deferFollows?(this.deferredFollows[c]=!0,twttr.API.User.trigger("prefollow_before"),twttr.API.User.find(c,function(c){b.updateButtonFollow(a,c["protected"]),twttr.API.User.trigger(c["protected"]?"prefollow_request_success":"prefollow_success",c)})):this.constructor.uber.userActionFollow.apply(this,arguments)},userActionUnfollow:function(a){var b=twttr.helpers.getUserId(a);this.deferFollows&&this.deferredFollows[b]?(delete this.deferredFollows[b],twttr.API.User.trigger("unprefollow_before"),twttr.API.User.find(b,function(a){twttr.API.User.trigger("unprefollow_success",a)}),this.preFollows[b]&&(delete this.preFollows[b],this.scribbler.scribe({action:"unprefollow"},{item_ids:[""+b],item_count:1}))):this.constructor.uber.userActionUnfollow.apply(this,arguments)},commitPrefollows:function(a){var b=this,c=[],d=[],e=0;for(var f in this.deferredFollows)c.push(f);for(var f in this.preFollows)d.push(f);if(c.length==0){a();return}this.scribbler.scribe({action:"prefollow"},{item_ids:d,item_count:d.length}),twttr.currentUser.friends.followAll(c,{stringifiedIds:!0,success:function(_,c){for(var d=0;d<c.response.length;++d){var e=c.response[d];b.scribbler.scribe({action:"follow"},{item_ids:[""+e.id],item_count:1})}a()},error:function(){twttr.currentUser.friendsCount+=c.length,a()}}),this.deferFollows=!1,this.deferredFollows={},this.preFollows={}}}),a}),a(twttr.mixins.prefollowingStream)})}),provide("streams/StarterList",function(a){using("_").as(function(b,_){twttr.klass("twttr.streams.StarterList",function(a,b){twttr.streams.ListMembers.apply(this,arguments)}).subclassOf(twttr.streams.ListMembers).mixin(twttr.mixins.discoveryHelper).methods({update:function(a){this.params.list.members(a)},_setTitle:function(a){a(_("{{name}} suggests you also follow these accounts:",this.params.list.user.attributes))},_getEmptyStreamHtml:function(){return _("Sorry, {{name}} doesn't recommend anybody in particular.<br />Find users by <a href='{{url}}'>Interests</a>.",{url:this.pagePathFor(this.params.pathRoot,"Interests"),name:this.params.list.user.name})}}),a(twttr.streams.StarterList)})}),provide("streams/StarterFriends",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.StarterFriends",function(){twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).methods({update:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){if(!twttr.helpers.canViewUser(c)){b._showError(twttr.streams.PROTECTED),b.doneLoadingMore();return}c.friends(a)})},_setTitle:function(a){a(_("@{{screen_name}} follows these accounts:",{screen_name:this.screenName}))}}).statics({_deciderKey:"people_stream_friends"}),a(twttr.streams.StarterFriends)})}),provide("streams/UserRecommendationsStream",function(a){using("_","streams/UserStream","mixins/userRecommendationsHelper","mixins/userActionable").as(function(b,_){var c=twttr.klass("twttr.streams.UserRecommendationsStream",function(a,c,d){b.streams.UserStream.call(this,a,c),c&&(this._processLoadedUsers(c),a.cursor&&(this.cursor=a.cursor)),this.whotofollowComponentName="whotofollow_stream",this.registerUserRecommendationsActions()}).subclassOf(b.streams.UserStream).mixin(b.mixins.userRecommendationsHelper,b.mixins.userActionable).methods({afterFirstSwitchingTo:function(a){this.items&&this.items.length?(a(this,twttr.streams.SUCCESS),this.render()):this.getMoreOldItems(a)},_processLoadedUsers:function(a,b){a&&this.doneLoadingMore();var c="whotofollow_view_all_recommended_users",d=this.params.inWelcomeFlow?"welcome_flow":"find_users",e={tracking_context:d};return b&&(e.error_status=b.status),this.trackImpressions(a,c,e),a},loadRecommendedUsers:function(a){a.personalized=a.personalized||this.params.personalized||!1,a.force_bq=a.personalized,a.algorithm=a.algorithm||this.params.algorithm||"",a.connections=!0;if(this.params.inWelcomeFlow){var b=twttr.abdecider.choose("wtf_welcome_persistent_100"),c=b&&b.match(/bucket(\d+)/),d=c?c[1]:0;a.high_timeout=!0,a.display_location="welcome-flow-recommendations",a.bucket_id=d}twttr.decider.isAvailable("wtf_visited_users")&&(a.related_users=twttr.recentlyViewedUsers.stack.concat(twttr.loggedOutViewedUsers.stack)),a.cursor===undefined&&(a.cursor=-1);var e=this,f=a.success;a.success=function(a,b){e.hadBqResults=b.response.had_bq_results;var c=e.recsToUsers(a);f(c,b)},twttr.loggedIn?twttr.currentUser.recommendedUsers2(a):twttr.API.User.recommendedUsers2(a)},update:function(a){var b=this,c=a.success,d=a.error,e=function(){var a={success:function(a,d){a=b._processLoadedUsers(a),c(a,d)}};b.params.lang&&(a.lang=b.params.lang),b.params.country&&(a.country=b.params.country),b.params.city&&(a.city=b.params.city),a.bypass_cache=!0,twttr.API.SuggestionCategory.randomSample(a),b.sulFallback=!0,b._streamManager&&b._streamManager.setTitle(b)};a.success=function(a,d){a=b._processLoadedUsers(a);if(!a.length()){if(twttr.decider.isAvailable("whotofollow_random_sample")&&b.params.useSulFallback!==!1&&(!b.params.inWelcomeFlow||b.params.useSulFallback)){e();return}b.trigger("noMoreRecommendations")}b.sulFallback=!1,c(a,d),b._streamManager&&b._streamManager.setTitle(b)},a.error=function(a){b._processLoadedUsers(null,a),d&&d(a)},a.cursor==-1&&twttr.decider.isAvailable("promoted_accounts_in_whotofollow_viewall")&&!b.params.inWelcomeFlow&&(a.pc=!b.params.noPromotedContent,a.display_location="wtf-view-all-stream"),this.params.sulWithNoFollows&&twttr.currentUser.friendsCount==0?e():this.loadRecommendedUsers(a)},setStreamManager:function(a){this._streamManager=a},_setTitle:function(a){if(this.params.invisibleWhenEmpty&&(!this.items||this.items.length==0)){a("");return}if(twttr.is.def(this.params.title)){a(this.params.title);return}if(twttr.isT1){a(_("Who to follow"));return}this.params.inWelcomeFlow?a(_("Follow these people to get started:")):this.params.inHomePage?(this.$find(".stream-title").css("border-bottom","1px solid #EBEBEB"),a(_('<div class="wtf-timeline-title"><div class="wtf-timeline-text">It looks like you aren&#39;t following anyone yet.<br /><b>Go ahead and follow some people!</b></div><button class="done-right button selected" type="button">Done following</button></div>'))):this.sulFallback?a(_('We&#39;re building a list of personalized suggestions for you. In the meantime, here are some other <a href="{{url}}">interesting accounts</a> to follow.',{url:twttr.router.whoToFollowInterestsPath()})):a(_("Twitter accounts suggested for you based on who you follow and more."))},_getEmptyStreamHtml:function(){return this.params.invisibleWhenEmpty&&(!this.items||this.items.length==0)?"":this.params.personalizedOnly?_("We&#39;re sorry, Twitter does not have any personalized suggestions to show you at this time. You can browse our regular <a href='{{url}}'>Who to Follow</a> list.",{url:twttr.router.whoToFollowPath()}):_("Sorry, we&#39;ve temporarily run out of recommendations for you. We're out there looking for more right now. Please check back soon!")},_getStreamEndHtml:function(){return this.params.inHomePage?_('<button class="done-right button selected" type="button">Done following</button></div>'):_("<a href='#' class='back-to-top'>Back to top &uarr;</a>")},_getStreamEndShowBird:function(){return this.params.inHomePage?!1:!0},_trackNewImpressions:function(){}});twttr.isT1&&c.methods({_setHeader:function(a,b){b.header_help=_("Twitter accounts suggested for you based on who you follow and more.");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowSuggestionsSearchPath,b);a(c.$node)}}),a(twttr.streams.UserRecommendationsStream)})}),provide("streams/UserRecommendationsDashboardStream",function(a){using().as(function(b){twttr.klass("twttr.streams.UserRecommendationsDashboardStream",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",this.deferFollows=!!a.deferFollows,twttr.streams.UserRecommendationsStream.call(this,a,b)}).subclassOf(twttr.streams.UserRecommendationsStream).mixin(twttr.mixins.prefollowingStream).methods({_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a(twttr.streams.UserRecommendationsDashboardStream)})}),provide("streams/UserSimilaritiesStream",function(a){using("_",twttr.isT1?"mixins/UserSimilaritiesStreamT1":"").as(function(b,_,c){var d=twttr.klass("twttr.streams.UserSimilaritiesStream",function(a,b){twttr.streams.UserStream.call(this,a,b),this.registerUserRecommendationsActions(),this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"})}).subclassOf(twttr.streams.UserStream).mixin(twttr.mixins.userRecommendationsHelper).methods({update:function(a){var b=this,c=a.success,d=a.error,e="whotofollow_view_all_similar_users",f="similar_to";a.success=function(a,d){var g=b.recsToUsers(a);b.trackImpressions(g,e,{tracking_context:f}),c(g,d)},a.error=function(a){b.trackImpressions(null,e,{tracking_context:f,error_status:a.status}),d&&d(a)},a.connections=!1,a.pc=!0,a.display_location="st-view-all-stream",twttr.profileUser.similarUsers(a)},setStreamManager:function(a){this._streamManager=a},_setTitle:function(a){a(_("Accounts similar to @{{screen_name}}:",{screen_name:this.params.screenName}))},_getEmptyStreamHtml:function(){return _("Sorry, we've temporarily run out of users similar to @{{screen_name}}. We're out there looking for more right now. Please check back soon!",{screen_name:this.params.screenName})},_trackNewImpressions:function(){}});c&&d.mixin(c),a(twttr.streams.UserSimilaritiesStream)})}),provide("streams/ContactImportMatches",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.streams.ContactImportMatches",function(a,b,c){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.UserStream.apply(this,arguments),this.$node.addClass("contact-import-matches"),a.noBigImages||(this.$node.addClass("contact-import-images"),this.itemViewClass="MatchedContactUser"),this._loadedMatches=!1,this._loadingCount=0,this._loadingComponent=new twttr.views.ContactImportLoading,this._followingCount=0,this._showFollowing=!1,this.$headerNode=this.getHeaderContainer();var d=this;this.$headerNode.delegate(".js-toggle-following","click",function(a){return d._toggleFollowing(),!1})}).subclassOf(twttr.streams.UserStream).mixin(twttr.mixins.discoveryHelper).methods({streamViewClass:"ContactImportMatches",afterSwitchingToAgain:function(a){this.afterFirstSwitchingTo(a)},afterFirstSwitchingTo:function(a){twttr.API.User.bind("follow.ContactImportMatches",twttr.bind(this,this._incrementFollowingCount)),twttr.API.User.bind("follow_request.ContactImportMatches",twttr.bind(this,this._incrementFollowingCount)),twttr.API.User.bind("unfollow.ContactImportMatches",twttr.bind(this,this._decrementFollowingCount)),this._loadedMatches||this.getMoreOldItems(a)},beforeSwitchingAway:function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),twttr.API.User.unbind(".ContactImportMatches")},update:function(a){this._loadingError=!1;var b=this,c=a.success,d=a.error;a.success=function(a,d){var e=!b._loadedMatches;b._loadedMatches="users"in d.response;if(b._loadedMatches){delete b._loadingComponent;if(d.response.count){b.showInviteesPopup=!!d.response.others_count&&b.params.pathRoot=="welcome";var f=twttr.merge(d.response,{retry_service_path:b.pagePathFor(b.params.pathRoot,"Import")});d.response.following_count==d.response.count&&(f.following_count=0,b._showFollowing=!0),e&&b.scribbler.scribe({component:"stream",action:"matches"}),b._followingCount=d.response.following_count,b._othersCount=d.response.others_count,b._matchesHeaderComponent=new twttr.components.ContactImportMatchesStats(b,f)}else e&&b.scribbler.scribe({component:"stream",action:"no_matches"}),d.response.others_count?b._inviteOthersInline():window.setTimeout(function(){b.routePageTo(b.params.pathRoot,"Import"),twttr.showMessage(_("There was no one in your address book"))},0)}c(a,d),b._loadedMatches&&b._followingCount&&b.$node.parents(".dashboard").length==0&&Math.abs(twttr.$doc.scrollTop()+twttr.windowHeight-twttr.$doc.height())<500&&b.getMoreOldItems(),b._loadedMatches||(b._loadingCount++<b.constructor._retryCount?b._scheduleRetry():(b.scribbler.scribe({component:"stream",action:"timeout"}),b._loadingCount=0,b._showError(twttr.streams.TIMEOUT)))},a.error=function(a,c){if(a.error=="denied"){b.routePageTo(b.params.pathRoot,"Import"),twttr.showMessage(_("Authorization to access your contacts was denied"));return}a.error&&(b._loadingError=!0),b.trigger("error"),d(a,c)},twttr.API.AddressBook.contactsMatches(a)},_scribeResults:function(a,b,c){if(a=="initial"&&!this._loadedMatches)return;c=c||{},c.message=""+this._othersCount,twttr.streams.UserStream.prototype._scribeResults.apply(this,[a,b,c])},_toggleFollowing:function(){this._showFollowing=!this._showFollowing;for(var a=0;a<this.items.length;++a){var b=this.items[a];if(b.following||b.followRequestSent){var c=this.$node.find(this.itemSelector(b.id));this._showFollowing?c.fadeIn():c.fadeOut()}}this._updateFollowingToggle()},_incrementFollowingCount:function(a,b){this._updateFollowing(b,!0)},_decrementFollowingCount:function(a,b){this._updateFollowing(b,!1)},_updateFollowing:function(a,b){for(var c=0;c<this.items.length;++c){var d=this.items[c];if(d.id==a.id){this.items[c]=a;break}}this._followingCount=Math.max(0,this._followingCount+(b?1:-1)),this._showFollowing&&this._updateFollowingToggle()},_updateFollowingToggle:function(){var a={following_count:this._followingCount},b;this._showFollowing?b=_("Hide {{following_count}} following",a):b=_("Show {{following_count}} following",a),this.$headerNode.find(".js-toggle-following").text(b)},_followAll:function(a){var b=this;if(a.hasClass("disabled"))return;a.addClass("disabled");var c={success:function(c,d){a.removeClass("disabled");var e="";switch(c.followed_ids.length){case 0:e=_("Requests were sent to everybody.");break;case 1:e=_("Congratulations! You are now following 1 more user.");break;default:e=_("Congratulations! You are now following {{count}} more users.",{count:c.followed_ids.length})}twttr.showMessage(e),twttr.API.User.startBulkFollowing();var f=0;twttr.API.User.findAllCached(c.followed_ids).each(function(a){a.data("following",!0),a.following=!0;var b={requestParameters:[{user_id:a.id}]};twttr.API.User.trigger("follow_before",b),twttr.API.User.trigger("follow_success",a),f++}),twttr.API.User.findAllCached(c.requested_ids).each(function(a){a.data("follow_request_sent",!0),a.followRequestSent=!0;var b={requestParameters:[{user_id:a.id}]};twttr.API.User.trigger("follow_request_before",b),twttr.API.User.trigger("follow_request_success",a),f++}),twttr.API.User.stopBulkFollowing(),b.scribbler.scribe({component:"stream_header",action:"follow"},{item_count:c.followed_ids.length,item_ids:c.followed_ids,event_value:c.followed_ids.length,event_info:"follow_all",context:"import"}),b.scribbler.scribe({component:"stream_header",action:"follow_all"},{item_count:c.followed_ids.length,event_value:c.followed_ids.length,context:"import"}),b._followingCount+=c.followed_ids.length+c.requested_ids.length-f,this._showFollowing&&this._updateFollowingToggle()},error:function(b){a.removeClass("disabled"),twttr.showError(_("There was an error following your contacts."))}};twttr.API.AddressBook.followAllContacts(c)},_saveAsList:function(){var a=this;(new twttr.widget.ListDialog({template:{content:(new twttr.views.ListDialog({name:_("Friends"),mode:"private"})).html()},onSuccess:function(b){options={success:function(b,c){twttr.API.User.findAllCached(b).each(function(b){a.isDuplicate(b)&&a.rerenderItem(b.id,b)}),a.scribbler.scribe({component:"stream_header",action:"save_list"},{event_value:b.length,item_count:b.length})},error:function(){twttr.showError(_("There was an error adding your contacts to the list."))}},twttr.API.AddressBook.addContactsToList(b.id,options)}})).open()},inviteOthers:function(a){a||this.scribbler.scribe({component:"invite_contacts_link",action:"click"}),this.showInviteesPopup=!1;var b=this,c={success:function(c,d){b.scribbler.scribe({component:"invite_contacts_dialog",action:"open"}),b.inviteDialog=(new twttr.widget.InviteContactsDialog(d.response,{css:{},onSuccess:function(){this.close()},scribbler:b.scribbler,routeToHome:a})).open()}};twttr.API.AddressBook.contactsOthers(c)},_inviteOthersInline:function(){this.showInviteesPopup=!1,this._suppressStreamEnd=!0;var a=this,b={success:function(b,c){a.doneLoadingMore();var d=new twttr.components.InviteContacts(c.response,{scribbler:a.scribbler});a.scribbler.scribe({component:"invite_contacts",action:"impression"}),a.$node.find("div.stream-items").append(d.$node),a._renderInviteHeader(b.length),a.reachedTheEnd()},error:function(b){a.doneLoadingMore(),a._loadingError=!0,a._showError(twttr.streams.ERROR)}};twttr.API.AddressBook.contactsOthers(b),window.setTimeout(function(){a._loadingComponent=new twttr.views.ContactImportLoading,a.showLoadingSpinner()},0)},_scheduleRetry:function(){var a=this;this._timeout=window.setTimeout(function(){a._timeout=null,a._loadingComponent=new twttr.views.ContactImportLoading,a.getMoreOldItems()},5e3),this.showLoadingSpinner()},_renderItemHtml:function(a){var b=twttr.streams.UserStream.prototype._renderItemHtml.call(this,a);return!this._showFollowing&&(a.following||a.followRequestSent)&&!this.selectedItem(a.id).length&&(b=b.replace(/^<div /,"<div style='display:none' ")),b},_getStreamLoadingComponent:function(){return this._loadingComponent||twttr.streams.UserStream.prototype._getStreamLoadingComponent.call(this)},_getStreamErrorComponent:function(a){var b=this._loadingError?_("There was an error loading your contacts."):_("Loading seems to be taking a while."),c=new twttr.components.ContactImportErrorEnd(b),d=this;return c.bind("tryImportAgain",function(a){d.routePageTo(d.params.pathRoot,"Import")}),c},_getHeaderComponent:function(){return this._matchesHeaderComponent}}).statics({_deciderKey:"contact_import_stream",_retryCount:13});twttr.isT1?c.methods({_setHeader:function(a,b){if(this.header)a(this.header.$node);else{var c=new twttr.views.ContactImportMatchesHeader(b);a(c.html())}},_updateHeaderFromStream:function(a){this._matchesHeaderComponent&&(this.header=this._matchesHeaderComponent,a.html(this._matchesHeaderComponent.$node))},_renderInviteHeader:function(a){this.$headerNode.find(".js-contact-import-header-placeholder").html((new twttr.views.InviteContactsHeader({count:a})).html())},getHeaderContainer:function(){return this.streamManager?this.streamManager.$headerContainer():null},_setTitle:function(a){a(_("Find friends"))},_setViewToggler:function(a){a(new twttr.views.BackLink({route:twttr.router.whoToFollowImportPath(),name:_("Try another service")}))}}):c.methods({getHeaderContainer:function(){return this.$node},_setTitle:function(a){a("")},_renderInviteHeader:function(a){(new twttr.views.InviteContactsHeader({count:a})).render(this.$find(".invite-contacts-component"),"prepend"),twttr.helpers.handlePopupLinks(this.$node)}}),a(twttr.streams.ContactImportMatches)})}),provide("streams/DashboardContactImportMatches",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardContactImportMatches",function(a,b){a=a||{},a.streamItemClass="unfocusable-stream-item",a.noBigImages=!0,twttr.streams.ContactImportMatches.apply(this,arguments)}).subclassOf(twttr.streams.ContactImportMatches).methods({_setHeader:function(a,b){this.header?a(this.header.$node):a("")},_updateHeaderFromStream:function(a){twttr.streams.ContactImportMatches.prototype._updateHeaderFromStream.apply(this,arguments),$(window).trigger("resize")},itemViewClass:"DashboardStreamUser",customHeaderView:"DashboardContactImportMatchesStats"}),a()})}),provide("streams/ContactImportServices",function(a){using("externalOauthPopup",twttr.isT1?"mixins/ContactImportServicesT1":"").as(function(b,c,d){twttr.klass("twttr.streams.ContactImportServices",function(a,c){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments);var d=this;this.$node.addClass("contact-import-services"),this.$node.delegate(".js-wipe-addressbook","click",function(a){(new twttr.widget.Prompt({modal:!0,draggable:!0,template:{container_id:"wipe-addressbook",title:_("Are you sure you want to remove your contacts? Who To Follow suggestions may become less relevant.")},callback:function(a){a&&$.ajax({type:"POST",dataType:"json",url:"/users/wipe_addressbook.json",headers:{"X-PHX":!0},data:{authenticity_token:twttr.API.getConfig().postAuthenticityToken},success:function(){twttr.showMessage(_("Your contacts have been removed."))},error:function(){twttr.showMessage(_("Oops, we couldn't remove your contacts at this time."))}})}})).open()}),this.$node.delegate("div.service-button, .js-service-row","click",function(c){var e=$(this),f=e.find(".js-service-name").attr("data-service-id"),g={query:f};e.hasClass("selected")&&(g.event_info="selected"),d.scribbler.scribe({component:"stream",action:"launch_service"},g),e.attr("data-popup")==="true"?b.externalOauthPopup({url:e.attr("data-url"),width:e.attr("data-width"),height:e.attr("data-height"),callbackUrl:d.pagePathFor(a.pathRoot,"ImportMatches")}):window.open(e.attr("data-url"),"_blank").focus(),d._matchesStreamKey?d._streamManager.clearKeyFromCache(d._matchesStreamKey):d._streamManager.clearFromCache(twttr.streams.ContactImportMatches,{pathRoot:a.pathRoot}),c.preventDefault()})}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.discoveryHelper).methods({setStreamManager:function(a){this._streamManager=a},setMatchesStreamKey:function(a){this._matchesStreamKey=a},update:function(a){this.params.lang&&(a.lang=this.params.lang),this.params.country&&(a.country=this.params.country),this.params.context&&(a.context=this.params.context),twttr.API.AddressBook.contactsServices(a)},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_fetchItems:function(a){var b=this;if(this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}var c={success:function(c,d){b.push(c),b.reachedTheEnd();var e,f=twttr.map(c,function(a,b){return a.matched_email&&(e=a.matched_email),a.id}),g={item_names:f,item_count:f.length};e&&(g.message=e),b.scribbler.scribe({component:"stream",action:"results"},g),a(b,twttr.streams.SUCCESS)},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)}};this.update(c)},_renderItemsHtml:function(a){var b=null;for(var c=0;c<a.length;++c){a[c].matched_email&&(b=a[c]);var d=a[c].name_template;d&&twttr.views[d]&&(a[c].html_name=(new twttr.views[d]).html())}return this.params.onlyMatched&&b&&(a=[b]),(new twttr.views.ContactImportServicesVertical({services:a,matched_service:b,matched_service_name:(b||{}).name,in_welcome_flow:this.params.inWelcomeFlow})).html()},_setTitle:function(a){a(_("Search the services you use to discover which of your friends are already using Twitter. Follow any of the friends you find to add their Tweets to your timeline."))},_getStreamEndComponent:function(){return null}}).statics({_deciderKey:"contact_import_stream"}),d&&twttr.streams.ContactImportServices.mixin(twttr.mixins.ContactImportServicesT1),a(twttr.streams.ContactImportServices)})}),provide("mixins/ContactImportServicesT1",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.ContactImportServicesT1",function(){this.methods({_setHeader:function(a,b){b.header_help=_("Search your contacts for friends already on Twitter, or invite them via email.");var c=new twttr.components.t1.PeopleSearchStreamHeader(twttr.router.whoToFollowImportSearchPath,b);a(c.$node)},_setTitle:function(a){a(_("Find friends"))},_getStreamEndComponent:function(){return new twttr.components.StreamEndInviteFriends(this._getStreamEndHtml(),this._getStreamEndShowBird())}})}),a(twttr.streams.ContactImportServicesT1)})}),provide("streams/DashboardContactImportServices",function(a){using().as(function(b){twttr.klass("twttr.streams.DashboardContactImportServices",function(a,b){a=a||{},twttr.streams.ContactImportServices.call(this,a,b)}).subclassOf(twttr.streams.ContactImportServices).methods({_setHeader:function(a,b){a("")}}),a()})}),provide("StoredUserStack",function(a){using().as(function(b){twttr.klass("twttr.StoredUserStack",function(a,b){this.storageKey=a,b||(b=twttr.caches.User);var c=b.get(this.storageKey);this.cache=c?c.index:{},this.stack=c?c.stack:[],this.timestamps=c&&c.timestamps?c.timestamps:{}}).methods(twttr.EventProvider).statics({MAX_SIZE:10}).methods({push:function(a){if(!twttr.helpers.isCurrentUser(a)){var b=a.id||a.toString();twttr.is.def(this.cache[b])&&(this.stack=twttr.filter(this.stack,function(a){return a!=b})),this.cache[b]=this.stack.push(b),this.timestamps[b]=(new Date).getTime();if(this.size()>twttr.StoredUserStack.MAX_SIZE){var c=this.stack.shift();delete this.timestamps[c],delete this.cache[c]}this.trigger("push",b)}return this.save()},save:function(){return twttr.caches.User.set(this.storageKey,{index:this.cache,stack:this.stack,timestamps:this.timestamps}),this.size()},clear:function(){this.cache={},this.stack=[],this.timestamps={},this.save()},size:function(){return this.stack.length},getLatestUserId:function(){var a=this.size();return a?this.stack[a-1]:null},getLastPushTime:function(a){return this.timestamps[a]},findAll:function(a){twttr.API.User.findAll(this.stack.reverse(),a)}}),twttr.app.waitForSignal("init",function(){twttr.recentlyViewedUsers=new twttr.StoredUserStack("recentlyViewedUsers"),twttr.loggedOutViewedUsers=new twttr.StoredUserStack("recentlyViewedUsers",new twttr.cache.local.User($.cookie("guest_id")))}),a(twttr.StoredUserStack)})}),provide("PasswordStrength",function(a){using().as(function(b){twttr.PasswordStrength=function(){function a(a){return typeof a=="function"}function b(a,b){var c="";for(var d=0;d<b.length;d++){var e=!0;for(var f=0;f<a&&f+d+a<b.length;f++)e=e&&b.charAt(f+d)==b.charAt(f+d+a);f<a&&(e=!1),e?(d+=a-1,e=!1):c+=b.charAt(d)}return c}return{check:function(c,d){var e=0,d=d||{};if(c.length<(d.minlength||6))return{score:0,msgClass:"tooshort"};var f=c.toLowerCase();if(d.username&&f==(a(d.username)?d.username():d.username).toLowerCase())return{score:0,msgClass:"obvious"};if($.inArray(f,twttr.BANNED_PASSWORDS||[])!=-1)return{score:0,msgClass:"banned"};if(c.match(/^\s*$/))return{score:0,msgClass:"whitespace"};if(d.requireStrong){var g="# ` ~ ! @ $ % ^ & * ( ) - _ = + [ ] { }  | ; : ' \" , . < > / ?".split(" ");g=$.map(g,function(a){return"\\"+a}).join("");var i=["\\d","[a-z]","[A-Z]","["+g+"]"],j=$.map(i,function(a){return"(?=.*"+a+")"}).join("");if(!c.match(new RegExp("("+j+"){10,}")))return{score:0,msgClass:"tooweak"}}e+=c.length*4,e+=(b(1,c).length-c.length)*1,e+=(b(2,c).length-c.length)*1,e+=(b(3,c).length-c.length)*1,e+=(b(4,c).length-c.length)*1,c.match(/(.*[0-9].*[0-9].*[0-9])/)&&(e+=5),c.match(/(.*[!@#$%^&*?_~].*[!@#$%^&*?_~])/)&&(e+=5),c.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(e+=10),c.match(/([a-zA-Z])/)&&c.match(/([0-9])/)&&(e+=15),c.match(/([!@#$%^&*?_~])/)&&c.match(/([0-9])/)&&(e+=15),c.match(/([!@#$%^&*?_~])/)&&c.match(/([a-zA-Z])/)&&(e+=15);if(c.match(/^\w+$/)||c.match(/^\d+$/))e-=10;return e<0&&(e=0),e>100&&(e=100),e<34?{score:e,msgClass:"weak"}:e<50?{score:e,msgClass:"good"}:e<75?{score:e,msgClass:"strong"}:{score:e,msgClass:"verystrong"}}}}(),a(twttr.PasswordStrength)})}),provide("mixins/urlShortener",function(a){using("_","util","constants").as(function(b,_){twttr.klass.mixin("twttr.mixins.urlShortener",function(a){a.mixin(twttr.mixins.caretHelper).statics({matchers:{tco:/^https?:\/\/t.co\/\w+$/}}).methods({_registerUrlShortenerEvents:function(){this._explainLinkShortening&&this.editor.bind("didChangeContent",twttr.bind(this,this._showCounterTipsy)),this.$counterText=$('<span class="tweetbox-counter-tipsy"></span>'),this.$counter.before(this.$counterText),this.$counterText.css("opacity",0),this.$links=[],this._a=!1,this._isTipShowing=!1,this._oldLinkLen=0;var a=this._getTextLength;this._getTextLength=function(c){var d=a.apply(this,arguments),e=twttr.txt.extractUrls(c);return d-=e.join("").length,twttr.each(e,function(a){d+=b.constants.tcoLength,a.match(/https:/)&&(d+=1)}),d}},_getLinkCounterText:function(a){var b=_("Links will appear shortened"),c=_("Link will appear shortened");return a>1?b:c},_showCounterTipsy:function(){var a=this,b,c,d=15;a._linkLen=a._extractUrls().length,a._linkLen&&a._linkLen!==a._oldLinkLen?(a.$counterText.html(a._getLinkCounterText(a._linkLen)),c=a.$container.find("div.tweet-button-container"),b=c.width(),c.children().each(function(){b-=$(this).outerWidth(!0)}),twttr.helpers.ellipsify(a.$container.find(".geo-text").width(function(a,c){return b<0||!c?c+b-d:c}),!0),a.$counterText.animate({opacity:1},100),a._isTipShowing=!0):a._isTipShowing&&!a._linkLen&&(a.$counterText.animate({opacity:0},100,function(){a.$counterText.html(""),twttr.helpers.ellipsify(a.$container.find(".geo-text").width(""),!0)}),a._isTipShowing=!1),a._oldLinkLen=a._linkLen},_showCounterFade:function(){if(twttr.txt.extractUrls(this.getCurrentWord(this.getCaret())).length){this.$counter.css({color:"green"});if(!this._a){var a=this.$counter.clone(),b=this.$counter.position();a.css({left:b.left,top:b.top}),a.addClass("tweet-counter-proxy"),this.$counter.after(a);function c(){a.remove()}a.animate({fontSize:"40px",opacity:0,marginTop:-20,marginLeft:-Math.round(a.width()/2)},200,c),this._a=!0}}else this.$counter.css({color:""}),this._a&&(this._a=!1)},_tweetReady:function(){this.lock(),this.callTalon(this._extractUrls(),twttr.bind(this,function(a){this.setTweetContent(this.replaceWithTalonUrls(a)),this.unlock(),this.tweet()}))},_extractUrls:function(){return this.filterInvalidLinks(twttr.txt.extractUrls(this.editor.content()))},replaceWithTalonUrls:function(a){var b=this.editor.content();return twttr.each(a,function(a){b=this.replaceContent(b,a)},this),b},callTalon:function(a,b){a.length?twttr.API.Urls.shortenMultiple(a,b):b([])},replaceContent:function(a,b){return a.replace(b.expanded_url,b.url)},filterInvalidLinks:function(b){return twttr.filter(b,function(b){return!b.match(a.matchers.tco)})},_mousemove:function(a){var b=a.pageX,c=a.pageY;twttr.each(this.$links,function(a){var d=$(a),e=d.offset(),f=d.attr("data-mouse-entered");if(b>=e.left&&b<=e.left+d.width()&&c>=e.top&&c<=e.top+d.height()){if(!f||f==="false")d.attr("data-mouse-entered","true"),d.trigger("mouseenter");return!1}f==="true"&&(d.attr("data-mouse-entered","false"),d.trigger("mouseleave"))})},_matchUrls:function(){setTimeout(twttr.bind(this,function(){this.$links=this.$find("a.twitter-timeline-link"),this.$links.tipsy({html:!0,gravity:"n",offset:3,"class":"tweetbox-tipsy",title:function(){return'<span class="tweetbox-tipsy-text">'+_("Link will be displayed as {{url}}",{url:twttr.helpers.displayUrl(this.href)})+"</span>"}})}),0)}})}),a(twttr.mixins.urlShortener)})}),provide("mixins/caretHelper",function(a){using().as(function(b){twttr.klass.mixin("twttr.mixins.caretHelper",function(){return this.statics({spaceBoundary:/\s|$/,wordEnd:/\S+$/}).methods({init:function(){this.$input.bind("blur",twttr.bind(this,function(a){setTimeout(twttr.bind(this,function(){this.hide()}),1e3)})).bind("mouseup",twttr.bind(this,function(a){setTimeout(twttr.bind(this,function(){this.getCaret()}),0)})).bind("focus",twttr.bind(this,function(a){this.getCaret()}))},getCurrentText:function(){return this.$input.val()},setCaretPosition:function(a){var b=this.$input[0];if(b.setSelectionRange)b.focus(),b.setSelectionRange(a,a);else if(b.createTextRange){var c=b.createTextRange();c.collapse(!0),c.moveEnd("character",a),c.moveStart("character",a),c.select()}this.lastCaret=a},getCaret:function(){var a=this.$input[0],b=0;if(document.selection){try{a.focus()}catch(c){}var d=document.selection.createRange();if(d==null)return this.lastCaret=0,0;var e=a.createTextRange(),f=e.duplicate();e.moveToBookmark(d.getBookmark()),f.setEndPoint("EndToStart",e),b=f.text.length}else if(a.selectionStart||a.selectionStart=="0")b=a.selectionStart;return this.lastCaret=b,b},insertOrReplaceSelection:function(a,b){var c=this.$input[0],d=this.getCaret(),e=d+a.length;if(document.selection){c.focus();var f=document.selection.createRange();f.text=a;if(b){var g=c.createTextRange();g.collapse(!0),g.moveEnd("character",e),g.moveStart("character",d),g.select()}else this.setCaretPosition(e)}else if(c.selectionStart||c.selectionStart=="0"){var i=c.selectionStart,j=c.selectionEnd,k=c.scrollTop;c.value=c.value.substring(0,i)+a+c.value.substring(j,c.value.length),c.focus(),c.selectionStart=b?d:e,c.selectionEnd=e,c.scrollTop=k}else c.value+=a,this.setCaretPosition(e),c.focus();this.lastCaret=e,this.$input.change()},getCurrentWord:function(a){var b=this.getCurrentText(),c=b.slice(0,a),d=b.slice(a,b.length),e=b.charAt(a-1);if(!e||e===" ")return"";this.leftBoundary=c.search(this.constructor.wordEnd);var f=c.slice(this.leftBoundary,c.length),g=d.slice(0,d.search(this.constructor.spaceBoundary)),i=f.concat(g);return this.rightBoundary=this.leftBoundary+i.length,i},replaceCurrentWord:function(a){var b=this.getCurrentText().split("");this.oldValueArray=b;var c=b.slice(0,this.leftBoundary),d=b.slice(this.rightBoundary,b.length);if(d.length<1||!d[0].match(/\s/))a+=" ";var e=(c.join("")+a).length+1;return{value:c.join("")+a+d.join(""),cursor:e}}}),this}),a(twttr.mixins.caretHelper)})}),provide("geo",function(a){using("_","util").as(function(b,_){twttr.provide("twttr.geo",{LOG_VERSION:3,UI_VERSION:2,LOCATION_CACHE_INTERVAL:3e4,BROWSER_GEO_BANNER_APPEAR_DELAY:500,BROWSER_GEO_BANNER_DISAPPEAR_INTERVAL:100,PLACE_SEARCH_AUTOCOMPLETE_DELAY:250,MAX_NEARBY_PLACES:12,MAX_NEARBY_NEIGHBORHOODS:5,MAX_PLACE_SEARCH_RESULTS:50,MAX_PLACE_AUTOCOMPLETE_RESULTS:8,PLACE_SEARCH_RESULTS_PER_PAGE:5,PLACE_CREATION_DEFAULT_ZOOM_LEVEL:15,SIMILAR_PLACES_MAX_ZOOM_LEVEL:17,ACCEPTABLE_LOCATION_ACCURACY:1e3,ACCEPTABLE_LOCATION_TIMEOUT:5e3,LOCATION_TIMEOUT:15e3,LOCATION_MAXIMUM_AGE:6e4,MAX_SIMILAR_PLACES:5,TARGET_POI_NAME_LENGTH:40,TARGET_PLACE_NAME_LENGTH:50,POI_MARKER_SIZE:{width:43,height:32},POI_MARKER_HOTSPOT:{x:14,y:33},POI_MAP_DEAD_ZONE:{left:4,top:24,right:6,bottom:0},geoEnabled:null,currentLocation:{},mapsTimeout:1e4,mapsListeners:[],Exceptions:{GeoSupportException:function(){this.msg=_("This browser does not support GeoLocation")}},mapsInitialized:function(){while(twttr.geo.mapsListeners.length){var a=twttr.geo.mapsListeners.shift();a()}},loadMaps:function(a){if(twttr.geo.mapsAvailable())a();else{twttr.geo.mapsListeners.push(a);if(twttr.geo.mapsListeners.length==1){var b=window.location.protocol==="https:"?"https://maps-api-ssl.google.com":"http://maps.google.com";b+="/maps/api/js?v=3.4&sensor=false&callback=twttr.geo.mapsInitialized",window.location.hostname.match(/^(.+\.)?twitter\.com$/)&&(b+="&client=free-twitter");var c=document.createElement("script");c.type="text/javascript",c.src=b,document.body.appendChild(c),setTimeout(twttr.geo.mapsInitialized,twttr.geo.mapsTimeout)}}},mapsAvailable:function(){return typeof google!="undefined"&&google.maps!==undefined},getBestContainer:function(a){if(!a)return{name:"",full_name:"",contained_within:[],place_type:"city",bounding_box:{type:"Polygon",coordinates:[[[-122.51368188,37.70813196],[-122.35845384,37.70813196],[-122.35845384,37.83245301],[-122.51368188,37.83245301]]]}};var b={name:a.part_of_name||"",full_name:a.part_of_name||"",contained_within:[],place_type:"city"};return a.contained_within&&twttr.every(a.contained_within,function(a){return b=a,a.place_type!="city"}),b},getPlaceFullAddressAndMapLink:function(a){var b=[twttr.geo.getPlaceAttribute(a,"street_address"),a.contained_within&&a.contained_within.length>0?a.contained_within[0].full_name:null];b=twttr.filter(b,function(a){return a}).join(", ");var c=a.place_type=="poi"?b:a.name+", "+b;return{full_address:b,map_link:"http://maps.google.com/maps?"+$.param({q:c})}},placesFromApi:function(a){var b=[];return a.each(function(a){b.push(a.data())}),b},getPlaceAttribute:function(a,b){return a.attributes&&a.attributes[b]||""},getPlaceDetails:function(a){var b=twttr.geo.getPlaceAttribute(a,"street_address");if(b)return b;switch(a.place_type){case"city":return _("a city");case"neighborhood":return _("a neighborhood");case"country":return _("a country");case"admin":return _("a state or province");default:return twttr.geo.getBestContainer(a).name}},getFullPlace:function(a){return $.extend({},a,{address:twttr.geo.getPlaceAttribute(a,"street_address"),container:twttr.geo.getBestContainer(a).full_name,phone:twttr.geo.getPlaceAttribute(a,"phone"),place_id:a.id,place_name:a.full_name},twttr.geo.getPlaceFullAddressAndMapLink(a))}}),a(twttr.geo)})}),provide("components/Autocomplete",function(a){using("_","util","constants").as(function(b,_){twttr.provide("twttr.users",{autocompleted:[]}),twttr.klass("twttr.components.Autocomplete",function(a){var c={limit:5,textarea:!1,preselect:!0};this.options=twttr.merge({},c,a),this.$input=$(this.options.input),this.$container=$('<ul class="autocomplete-container"></ul>').insertAfter(this.options.input),this._isCompletionsOpen=!1,twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_autocomplete")||b.util.params().autocomplete)&&this.registerEvents(),this.init()}).mixin(twttr.mixins.caretHelper).statics({cache:{},regCache:new twttr.cache.Simple,hashtagCache:{},_isCompletionsOpen:!1,nextCursor:-1,cursorCount:0,requestedUsers:!1,getAutocompletedUsers:function(a){!!twttr.currentUser;var c=this;if(twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_autocomplete")||b.util.params().autocomplete)){function d(a){return twttr.map(a,function(a,b){return[a.id,a.screenName,a.name,a.profileImageUrl]})}if(!this.requestedUsers){this.requestedUsers=!0;var e=twttr.caches.User.get("autocomplete_friends");e?(twttr.users.autocompleted=e,a&&a()):function(){function b(e){++c.cursorCount<=5&&twttr.currentUser?twttr.currentUser.friends({count:100,cursor:e,success:twttr.bind(c,function(c,e){twttr.components.Autocomplete.invalidateCache();if(c.isEmpty()){a&&a();return}c=d(c.toArray()),twttr.users.autocompleted.push.apply(twttr.users.autocompleted,c),twttr.components.Autocomplete.resetStorageCache(),e.response.next_cursor?b(e.response.next_cursor):a&&a()})}):a&&a()}twttr.currentUser&&twttr.components.Autocomplete.addToList([twttr.currentUser.id,twttr.currentUser.screenName,twttr.currentUser.name,twttr.currentUser.profileImageUrl]),b(twttr.components.Autocomplete.nextCursor)}()}else a&&a()}}}).methods(twttr.EventProvider).statics({username:/^[@＠]([a-zA-Z0-9_]{1,20})$/,hashtag:/^[#＃]([a-zA-Z0-9_]+)/,transformAvatar:/(.+)(?:_normal)\.(\w+)$/,_matchesContiguously:function(a,b){var c=twttr.components.Autocomplete,d=c._matchesContiguouslyCaches.matchers=c._matchesContiguouslyCaches.matchers||{},e=c._matchesContiguouslyCaches.results=c._matchesContiguouslyCaches.results||{};return e[a]&&e[a][b]!==undefined?e[a][b]:(d[a]=d[a]||new RegExp("^"+a,"i"),e[a]=e[a]||{},e[a][b]=d[a].test(b.replace(/\W/,"")),e[a][b])},_matchesConsecutively:function(a,b){var c=twttr.components.Autocomplete,d=c._matchesConsecutivelyCaches.matchers=c._matchesConsecutivelyCaches.matchers||{},e=c._matchesConsecutivelyCaches.results=c._matchesConsecutivelyCaches.results||{};return e[a]&&e[a][b]!==undefined?e[a][b]:(d[a]=d[a]||new RegExp(a.split("").join(".*"),"i"),e[a]=e[a]||{},e[a][b]=d[a].test(b),e[a][b])},levenSorter:function(a,c){var d=twttr.components.Autocomplete._currentPrefix,e=b.util.leven(a,d),f=b.util.leven(c,d);return e<f?-1:e>f?1:0},sorter:function(a,c){var d=twttr.components.Autocomplete._matchesContiguously,e=twttr.components.Autocomplete._matchesConsecutively,f=twttr.components.Autocomplete._currentPrefix;if(d(f,a[1])&&!d(f,c[1]))return-1;if(!d(f,a[1])&&d(f,c[1]))return 1;if(d(f,a[2])&&!d(f,c[2]))return-1;if(!d(f,a[2])&&d(f,c[2]))return 1;if(e(f,a[1])&&!e(f,c[1]))return-1;if(!e(f,a[1])&&e(f,c[1]))return 1;if(e(f,a[2])&&!e(f,c[2]))return-1;if(!e(f,a[2])&&e(f,c[2]))return 1;var g=b.util.leven(a[1],f),i=b.util.leven(c[1],f);if(g<i)return-1;if(g>i)return 1;var j=b.util.leven(a[2],f),k=b.util.leven(c[2],f);return j<k?-1:j>k?1:0},_htmlEscapeAndStrongifyMatches:function(a,b){return h(a.replace(b,"<strong>$1</strong>")).replace(/&lt;(\/?strong)&gt;/g,"<$1>")}}).statics({_matchesContiguouslyCaches:{results:{},matchers:{}},_matchesConsecutivelyCaches:{results:{},matchers:{}}}).statics({invalidateCache:function(a){if(!a){this.cache={},twttr.components.Autocomplete._matchesConsecutivelyCaches.results={},twttr.components.Autocomplete._matchesConsecutivelyCaches.matchers={},twttr.components.Autocomplete._matchesContiguouslyCaches.results={},twttr.components.Autocomplete._matchesContiguouslyCaches.matchers={};return}var b="";a=a.split("");for(var c=a.length-1;c>=0;c--)b+=a.shift(),delete this.cache[b],delete twttr.components.Autocomplete._matchesConsecutivelyCaches.results[b],delete twttr.components.Autocomplete._matchesConsecutivelyCaches.matchers[b],delete twttr.components.Autocomplete._matchesContiguouslyCaches.results[b],delete twttr.components.Autocomplete._matchesContiguouslyCaches.matchers[b]},resetStorageCache:function(){var a=[],b=0;twttr.users.autocompleted.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0});for(var c=0,d=twttr.users.autocompleted.length;c<d;c++){if(twttr.users.autocompleted[c+1]&&twttr.users.autocompleted[c][0]==twttr.users.autocompleted[c+1][0])continue;a[b++]=twttr.users.autocompleted[c]}twttr.users.autocompleted=a,twttr.caches.User.set("autocomplete_friends",twttr.users.autocompleted,2592e5)},addToList:function(a){var b=!1;for(var c=0,d=twttr.users.autocompleted.length;c<d;++c)if(twttr.users.autocompleted[c][1]===a[1]){b=!0;break}b||twttr.users.autocompleted.push(a),twttr.components.Autocomplete.invalidateCache(a[1]),this.resetStorageCache()}}).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.bind("close",twttr.bind(this,function(){this.hide()}));var b="keypress"+($.browser.webkit||$.browser.msie?" keydown":"");this.$input.bind("keyup click",twttr.bind(this,this.keyup)),this.$input.bind("change",twttr.bind(this,this.change)),this.$input.bind(b,twttr.bind(this,this.keypress)),this.$container.delegate("li.selectable","mouseenter",function(b){a.$container.find("li.selected").removeClass("selected"),$(this).addClass("selected")}).delegate("li.selectable","click",twttr.bind(this,function(a){a.preventDefault();if($(a.target).hasClass("twttr-follow-notice"))return;$(a.target).addClass("selected").siblings(".selected").removeClass("selected"),this.select(),this.focus()})),this.$input.bind("keydown",function(b){if(b.ctrlKey)return;if(!a._isCompletionsOpen&&b.which==twttr.constants.keyCodes.escape)return;b.stopPropagation()}),this.position()},focus:function(){this.$input.focus()},set:function(a){if(this.options.textarea){var b=this.replaceCurrentWord(a);this.$input.val(b.value),this.setCaretPosition(b.cursor)}else this.$input.val(a);this.$input.change()},hide:function(){setTimeout(twttr.bind(this,function(){this.$container.css("visibility","hidden"),this._isCompletionsOpen&&this.trigger("hide"),this._isCompletionsOpen=!1,this.constructor._isCompletionsOpen=!1}),0)},show:function(){this.$container.css("visibility","visible"),this.constructor._isCompletionsOpen=!0,this._isCompletionsOpen=!0},keypress:function(a){if(a.ctrlKey)return;switch(a.keyCode){case b.constants.keyCodes.tab:case b.constants.keyCodes.enter:case b.constants.keyCodes.escape:if(!this._isCompletionsOpen)return;a.preventDefault();break;case b.constants.keyCodes.upArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.previous(),a.preventDefault());break;case b.constants.keyCodes.downArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.next(),a.preventDefault())}a.stopPropagation(),setTimeout(twttr.bind(this,this.change),0)},keyup:function(a){if(a.ctrlKey)return;a.stopPropagation();if(a&&(a.keyCode===b.constants.keyCodes.tab||a.keyCode===b.constants.keyCodes.shift)&&!this._isCompletionsOpen)return;var c="",d=!1;if(this.options.textarea){var e=this.getCaret();c=this.getCurrentWord(e).replace(twttr.constants.regexps.dirMark,""),c.match(this.constructor.username)?(c=RegExp.$1,this.autocompleteType="username",d=!0):c.match(this.constructor.hashtag)&&(c=RegExp.$1,this.autocompleteType="hashtag",d=!0)}else this.autocompleteType="username",c=this.$input.val(),d=!0;if(c.length&&d)switch(a.keyCode){case b.constants.keyCodes.escape:this.hide(),a.stopPropagation();break;case b.constants.keyCodes.upArrow:case b.constants.keyCodes.downArrow:break;case b.constants.keyCodes.tab:case b.constants.keyCodes.enter:!a.shiftKey&&this._isCompletionsOpen&&this.select();break;default:this.autocompleteType=="hashtag"?this.lookUpHashtag(c):this.lookUpUser(c)}else this.hide()},select:function(){var a=this.$container.find("li.selected"),b=a.find("b").text(),c=a.find("img").attr("src");this.set(b),this.hide();if(this.autocompleteType==="username"){var d=a.attr("data-user-screenname"),e=a.attr("data-user-id");this.trigger("select",[this.autocompleteType,b,c,d,e])}else this.trigger("select",[this.autocompleteType,b,c])},change:function(){var a=this.getCurrentText(),b=this.lastText||"";if(a===b)return;var c=0,d=a.length,e=b.length,f=Math.min(d,this.getCaret());for(var g=0;g<f;g++){if(b.charAt(g)!==a.charAt(g))break;c+=1}var i=0;for(var g=1;g<=d-c;g++){if(b.charAt(e-g)!==a.charAt(d-g))break;i+=1}var j=c+i;this.lastText=a,this.trigger("substitution",[c,e-j,d-j,a])},sanitize:function(a){return this.constructor._currentPrefix=a.replace(/ /g,""),this.constructor._currentPrefix},appendNotice:function(a){return twttr.currentUser&&twttr.currentUser.friendsCount>500&&(a+='<li class="twttr-follow-notice">'+_("<em>Showing most recent 500 you're following</em>")+"</li>"),a},lookUpHashtag:function(a){var b=this;a=this.sanitize(a);var c=this.constructor.hashtagCache[a];if(c){this.$container.html(c),this.$container.find("li.selectable:first").addClass("selected"),this.show();return}var d=function(a){if(a.match(b.regexPrefix))return a},e=twttr.merge({},this.getFilteredResults(a,twttr.suggestedHashtags||[],d,this.constructor.levenSorter),!0),f=this.getItemTemplate(e,function(a,c){return'<li class="hashtag-completion selectable"><b>#'+b.constructor._htmlEscapeAndStrongifyMatches(a,c)+"</b></li>"}).slice(0,this.options.limit);if(f.length>0){var g=f.join("");this.constructor.hashtagCache[a]=g,this.$container.html(g),this.$container.find("li.selectable:first").addClass("selected"),this.show()}else this.hide()},lookUpUser:function(a){var b=this;a=this.sanitize(a);var c=this.constructor.cache[a];if(c){this.$container.html(c),this.options.preselect&&this.$container.find("li.selectable:first").addClass("selected"),this.show();return}var d=function(a){if(a[1].match(b.regexPrefix))return a;if(a[2].replace(/ /g,"").match(b.regexPrefix))return a},e=twttr.merge({},this.getFilteredResults(a,twttr.users.autocompleted,d,this.constructor.sorter),!0),f=this.getItemTemplate(e,function(a,c){var d=a[3].replace(b.constructor.transformAvatar,"$1_mini.$2");return'<li data-user-id="'+h(a[0])+'" data-user-screenname="'+h(a[1])+'" class="selectable"><img src="'+h(d)+'"/> <span><b>@'+b.constructor._htmlEscapeAndStrongifyMatches(a[1],c)+"</b> <em>"+b.constructor._htmlEscapeAndStrongifyMatches(a[2],c)+"</em></span></li>"}).slice(0,this.options.limit);this.options.defaultResults&&twttr.each(this.options.defaultResults,function(b){(!b.show||b.show(a,e))&&f.splice(f.length,0,b.format(a))});if(f.length>0){var g=f.join("");g=this.appendNotice(g),this.constructor.cache[a]=g,this.$container.html(g),this.options.preselect&&this.$container.find("li.selectable:first").addClass("selected"),this.show()}else this.hide()},position:function(){setTimeout(twttr.bind(this,function(){if(this.$input.offsetParent().length){var a=this.$input.position(),b=Math.round(a.top+this.$input.innerHeight()+1),c=Math.round(a.left);this.$container.css({top:b,left:c})}}),0),this.$container.css({width:this.$input.innerWidth()})},getItemTemplate:function(a,b){var c=new RegExp("("+this.constructor._currentPrefix.split("").join("|")+")","gi");return twttr.map(a,twttr.bind(this,function(a,d){return b(a,c)}),null,"array")},getFilteredResults:function(a,b,c,d){var e=this,f,g=this.constructor.regCache.get(a);if(g)this.regexPrefix=g;else{var i=a.split(""),j="^"+i.join("\\w*");this.regexPrefix=new RegExp(j,"i"),this.constructor.regCache.set(a,this.regexPrefix)}var k=twttr.filter(b,c);return d?k.sort(d):k},next:function(){var a=this.$container.find("li.selected");if(!a.length){this.$container.find("li.selectable:first").addClass("selected");return}a=a.removeClass("selected").nextAll("li.selectable:first"),a.length?a.addClass("selected"):this.$container.find("li.selectable:first").addClass("selected")},previous:function(){var a=this.$container.find("li.selected");if(!a.length){this.$container.find("li.selectable:last").addClass("selected");return}a=a.removeClass("selected").prevAll("li.selectable:first"),a.length?a.addClass("selected"):this.$container.find("li.selectable:last").addClass("selected")}}),a(twttr.components.Autocomplete)})}),provide("components/Typeahead",function(a){using("constants","mixins/typeaheadScribing").as(function(b,c,d){var e=twttr.klass.component("twttr.components.Typeahead",function(a){var b=this,c={pauseInterval:300,closeDelay:500,select:$.noop};this.options=twttr.merge({},c,a),this.datasources=this.options.datasources,this._select=this.options.select,this.val=this._val="",this.typingPauseDetectionTimeoutId=null,this.$input=$(this.options.input),this.$inputHint=$(this.options.inputHint),this.$node=$((new twttr.views.Typeahead).html()).insertAfter(this.$inputHint),this._isCompletionsOpen=this._wasCompletionsOpen=!1,this._keystrokes=0,this._localLatencies=[],this._remoteLatencies=[],this._lastTimerEvent="none",this._statsTimerStart=0,this._statsCumulativeTime=0,this._resultsDirty=!1,this._lastHint="",this._placeholder=this.$input.attr("placeholder"),this.resizeTimer=null,this.heightLimit={1:0,2:1,3:2,4:3,5:5,6:6};var d=twttr.abdecider.choose("typeahead_271");this.inBucket=d!=="control"&&(d==="typeahead"||twttr.decider.isAvailable("swift_typeahead")),this.registerTypeaheadEvents();if(twttr.loggedIn&&(twttr.decider.isAvailable("typeahead")||this.inBucket)){var e=this.$find(".js-typeahead-results");twttr.each(this.datasources,function(a){a.bind("show",function(a,c){c===b._val&&b.$input.hasClass("focus")&&b.show()}),a.bind("scribeLocalStorageLatency",twttr.bind(b,b.scribeLocalStorageLatency)),a.bind("localLatency",twttr.bind(b,b.addLocalLatency)),a.bind("remoteLatency",twttr.bind(b,b.addRemoteLatency)),a.bind("resultsDirty",twttr.bind(b,b.resultsDirty)),a.bind("hint",twttr.bind(b,b.hint)),a.init(),e.append(a.$node)}),this.bind("hint",twttr.bind(this,this.hint)),this.resizeHeight(),this.executeQueryIfAlreadyFocused()}}).deciderKey("typeahead").mixin(d).methods({registerTypeaheadEvents:function(){var a=this,b="keypress"+($.browser.webkit||$.browser.msie?" keydown":"");this.$input.bind("keyup click",twttr.bind(this,this.keyup)),this.$input.bind(b,twttr.bind(this,this.keypress)),this.$node.delegate(".js-selectable","mouseenter",function(b){a.$find(".selected").removeClass("selected"),$(this).addClass("selected");var c=$(this).data("hint");c=c?c:"",a.trigger("hint",[c,a.$input.val()])}).delegate(".js-selectable","click",twttr.bind(this,function(a){this.select(a)})),this.$input.bind("keydown",function(b){b.keyCode===27&&(a.$input.removeClass("focus"),a.$inputHint.removeClass("focus"),a.hide(),a.$input.trigger("blur")),clearTimeout(a.typingPauseDetectionTimeoutId)}),this.$input.bind("focus",twttr.bind(this,this.focus)),this.$input.bind("blur",twttr.bind(this,this.blur)),this.$node.bind({mouseenter:function(){a.mouseOverDropDown=!0},mouseleave:function(){a.mouseOverDropDown=!1}}),twttr.widget.Dialog.bind("close",twttr.bind(this,function(){this.hide()})),$(window).resize(function(){clearTimeout(a.resizeTimer),a.resizeTimer=setTimeout(twttr.bind(a,a.resizeHeight),100)}),$(document).click(function(b){a.$node.parent().find($(b.target))||a.hide()}),$(document).bind("searchPlaceholderUpdate",function(b,c){a._placeholder=c})},hint:function(a,b,c){if(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket){var d=this.$input.val();d.toLowerCase()===c.toLowerCase()&&this.inputIsFocused()&&this.$input[0].scrollWidth<=this.$input.width()?this.$inputHint.val(d+b.slice(d.length)):this.$inputHint.val(""),c===""&&b!==""&&this.$input.attr("placeholder",""),this.$inputHint.css("direction",this.$input.css("direction"))}},resultsDirty:function(){this._resultsDirty=!0;if(this.$input.hasClass("focus")){var a=this.$input.val();this.queryLocalData(a),this.queryRemoteData(a)}},executeQueryIfAlreadyFocused:function(){this.inputIsFocused()&&(this.$input.addClass("focus"),this.$inputHint.addClass("focus"),this.focus())},focus:function(a){var b=this.$input.val();b===this._val&&this._wasCompletionsOpen&&!this._resultsDirty?(this.show(),this._lastHint!==""&&(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket)&&(this.$inputHint.val(this._lastHint),this.$input.attr("placeholder",""))):setTimeout(twttr.bind(this,function(){this.queryLocalData(b),this.typingPauseDetectionTimeoutId=setTimeout(twttr.bind(this,function(){this.queryRemoteData(b)}),this.options.pauseInterval)}),0),this.startStatsTimer()},blur:function(a){this._lastHint=this.$inputHint.val();if(twttr.decider.isAvailable("typeahead_hinting")||this.inBucket)this.$inputHint.val(""),this.$input.attr("placeholder",this._placeholder);!this.mouseOverDropDown&&!twttr.search.mouseOverMagnifying&&setTimeout(twttr.bind(this,function(){this.hide()}),this.options.closeDelay),this.pauseStatsTimer()},inputIsFocused:function(){return this.$input.is(":focus")||this.$input[0]==document.activeElement},resizeHeight:function(){var a=$(window).height(),b=Math.ceil(a/100),c=b in this.heightLimit?this.heightLimit[b]:b<2?1:6;twttr.each(this.datasources,function(a){a.trigger("newLimit",c)})},autocompleteHint:function(a){if(this._isCompletionsOpen&&!a.shiftKey&&this.isCursorAtEnd()){var c=this.$input.css("direction")==="rtl";if(c&&a.keyCode===b.constants.keyCodes.rightArrow||!c&&a.keyCode===b.constants.keyCodes.leftArrow)return;var d=this.$node.find(".js-selectable.selected[data-hint]:visible").first();if(d.length===0&&this.$node.find(".js-selectable.selected").length===1)return;d.length===0&&(d=this.$node.find(".js-selectable[data-hint]:visible").first()),this.$input.val(d.data("hint")),a.preventDefault()}},isCursorAtEnd:function(){var a;return document.selection?(this.$input.focus(),a=document.selection.createRange(),a.moveStart("character",-this.$input[0].value.length),this.$input.val().length-a.text.length===0):typeof this.$input[0].selectionStart=="number"?this.$input.val().length-this.$input[0].selectionStart===0:!0},hide:function(){setTimeout(twttr.bind(this,function(){this._isCompletionsOpen&&(this.$node.hide(),this._wasCompletionsOpen=this._isCompletionsOpen,this._isCompletionsOpen&&this.trigger("hide"),this._isCompletionsOpen=!1)}),0)},show:function(){this.$find(".js-selectable").length>0&&(this.$node.show(),this._isCompletionsOpen=!0)},keypress:function(a){a.stopPropagation();switch(a.keyCode){case b.constants.keyCodes.enter:if(this.inputIsFocused()&&!a.shiftKey&&a.type==="keypress"||this.inputIsFocused()&&!a.shiftKey&&a.type==="keydown"&&(a.metaKey||a.ctrlKey))a.preventDefault(),this.select(a);break;case b.constants.keyCodes.escape:this._isCompletionsOpen&&a.preventDefault();break;case b.constants.keyCodes.rightArrow:if(a.charCode===39)break;case b.constants.keyCodes.leftArrow:case b.constants.keyCodes.tab:this.autocompleteHint(a);break;case b.constants.keyCodes.upArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.previous(),a.preventDefault());break;case b.constants.keyCodes.downArrow:this._isCompletionsOpen&&!a.shiftKey&&(this.next(),a.preventDefault())}},keyup:function(a){a.type!=="click"&&(a.stopPropagation(),a.keyCode!==b.constants.keyCodes.enter&&this._keystrokes++);if(a&&(a.keyCode===b.constants.keyCodes.tab||a.keyCode===b.constants.keyCodes.shift)&&!this._isCompletionsOpen)return;val=this.$input.val();var c=this;if(val!==this._val||this._resultsDirty)this.hide(),setTimeout(twttr.bind(this,function(){this.queryLocalData(val),this.typingPauseDetectionTimeoutId=setTimeout(function(){c.queryRemoteData(val)},this.options.pauseInterval)}),0),this._resultsDirty=!1},queryLocalData:function(a){twttr.loggedIn&&(twttr.decider.isAvailable("typeahead_local_queries")||this.inBucket)&&(this._val=a,twttr.each(this.datasources,function(b){b.localQueryAndRenderResults(a)}))},queryRemoteData:function(a){var b=this;twttr.loggedIn&&(twttr.decider.isAvailable("typeahead_remote_queries")||this.inBucket)&&twttr.each(b.datasources,function(b){b.remoteQueryAndRenderResults(a)})},select:function(a){var b=this.$find(".selected"),c=this.$input.val();if(c===""&&b.length===0)return;var d=a.metaKey||a.ctrlKey;this.$input.val(""),this.$inputHint.val(""),this.hide(),this.$input.blur(),trackClient({section:"top_nav",component:"searchbox",action:"search"},{query:c}),this.scribeSelect(a,c,b,d),this._select(a,c,b,d)},next:function(){var a=this.$find(".selected").removeClass("selected"),b=this.$find(".js-selectable:visible"),c=b.index(a),d=c===b.length?0:c+1;d!==b.length&&$(b[d]).addClass("selected");var e=d===b.length,f=$(b[d]),g=$(b[0]);this.hintForNextOrPreviousItem(e,f,g)},previous:function(){var a=this.$find(".selected").removeClass("selected"),b=this.$find(".js-selectable:visible"),c=b.index(a),d=c===-1?b.length-1:c-1;d!==-1&&$(b[d]).addClass("selected");var e=d===-1,f=$(b[d]),g=$(b[0]);this.hintForNextOrPreviousItem(e,f,g)},hintForNextOrPreviousItem:function(a,b,c){var d=this.$input.val(),e=b.data("hint"),f="";e?f=e:a&&(f=c.data("hint")),this.trigger("hint",[f,d])}});a(e)})}),provide("components/TypeaheadDatasource",function(a){using().as(function(b,_){var c=twttr.klass.component("twttr.components.TypeaheadDatasource").methods({init:$.noop,localQueryAndRenderResults:$.noop,remoteQueryAndRenderResults:$.noop,inBucket:function(){var a=twttr.abdecider.choose("typeahead_271");return a!=="control"&&(a==="typeahead"||twttr.decider.isAvailable("swift_typeahead"))},tokenizeName:function(a){return $.trim(a.replace(/[@#]/,"")).toLowerCase().split(/[\s-_]+/)},tokenizeScreenName:function(a){return $.trim(a).toLowerCase().split(/_/)},tokenizeText:function(a){return $.trim(a).toLowerCase().split(/[\s-_]+/)},queryTopicAndAccountRemoteApi:function(a,b,c){twttr.API.User.typeaheadGlobal(a,{count:b,success:function(b){$(document).trigger("accountResults",[a,c,b.users]),$(document).trigger("topicResults",[a,c,b.topics])}})},updateStorageCache:function(){var a=2592e5;twttr.caches.User.set("typeahead_friends",twttr.users.typeahead,a),twttr.caches.User.set("typeahead_people_from_api",twttr.users.typeahead.length-1||0)},reset:function(){twttr.caches.User.reset()},get:function(a){twttr.caches.User.get(a)},set:function(a,b,c){var d=2592e5;c=c||d,twttr.caches.User.set(a,b,c)},update:function(a,b){twttr.caches.User.update(a,b)},"delete":function(a){twttr.caches.User.set(a,null,-1)}});a(c)})}),provide("components/TypeaheadSearchQueryDatasource",function(a){using("components/TypeaheadDatasource").as(function(b,_){var c=twttr.klass("twttr.components.TypeaheadSearchQueryDatasource",function(a){var b={limit:6};this.options=twttr.merge({},b,a),this.$node=(new twttr.views.TypeaheadSavedSearches).render(),this.$results=this.$find("ul"),this.savedSearches=[],this._version=10,this._lastQuery=""}).subclassOf(b.components.TypeaheadDatasource).deciderKey("typeahead_saved_searches").methods({init:function(){var a=this;this.$node.hide(),this._version!==twttr.caches.User.get("saved_searches_version")&&(twttr.caches.User.set("saved_searches",null,-1),twttr.caches.User.set("saved_searches_version",this._version)),this.cacheSavedSearches(),twttr.API.SavedSearch.bind("create",function(b,c){b.type==="create"&&(($.inArray(c),a.savedSearches)&&a.savedSearches.push(c),twttr.caches.User.update("saved_searches",a.savedSearches),a.savedSearches.length===1&&$(".global-nav .js-search-form").addClass("has-saved-searches"),a.updateOrDirtyResults())}),twttr.API.SavedSearch.bind("delete",function(b,c){b.type==="delete"&&(a.savedSearches=a.savedSearches.filter(function(a){return a.query!=c.query}),twttr.caches.User.update("saved_searches",a.savedSearches),a.savedSearches.length===0&&$(".global-nav .js-search-form").removeClass("has-saved-searches"),a.updateOrDirtyResults())}),this.bindLimitBasedOnWindowHeight(),this.bindRemoteApiListener()},bindRemoteApiListener:function(){var a=this;(twttr.decider.isAvailable("typeahead_searches")||this.inBucket())&&$(document).bind("topicResults",function(b,c,d,e){var c=a._lastQuery,f="",g=[];if(c==="")g=a.savedSearches;else{e.length&&twttr.each(e,function(b){var c=b.topic,d=b.rounded_score;a.isSavedSearch(c)||g.push(a.mapQuerySuggestionsToApiSearchItem(c,d))});if(twttr.decider.isAvailable("typeahead_new_style_saved_searches")||a.inBucket())g=g.concat(twttr.filter(a.savedSearches,twttr.bind(a,a.matcher(c))));g=g.slice(0,Math.min(4,a.options.limit))}f=g.length>0?g[0].name:"",a.trigger("hint",[f,c]),a.render(g,c);var i=new Date-d;a.trigger("remoteLatency",i)})},bindLimitBasedOnWindowHeight:function(){this.bind("newLimit",twttr.bind(this,function(a,b){this.options.limit=b}))},updateOrDirtyResults:function(){this.$node.is(":visible")?this.localQueryAndRenderResults(this._lastQuery):this.trigger("resultsDirty")},cacheSavedSearches:function(){var a=this;savedSearches=twttr.caches.User.get("saved_searches"),savedSearches?a.savedSearches=savedSearches:twttr.currentUser.savedSearches(function(b){a.savedSearches=b.array,$(".global-nav .js-search-form").addClass("has-saved-searches");var c=36e5;twttr.caches.User.set("saved_searches",a.savedSearches,c),a.trigger("resultsDirty")})},mapQuerySuggestionsToApiSearchItem:function(a,b){return{debug_info:twttr.decider.isAvailable("typeahead_debug_info")?' title="score = '+b+'"':"",search_results_path:twttr.router.searchResultsPath({query:a}),query:a,name:a,search_query_source:"typeahead_click"}},localQueryAndRenderResults:function(a){if(twttr.decider.isAvailable("typeahead_saved_searches")||this.inBucket()){var b=new Date;this._lastQuery=a;var c=twttr.filter(this.savedSearches,twttr.bind(this,this.matcher(a)));this.render(c,a);var d=c[0]?c[0].name:"";this.trigger("hint",[d,a]);var e=new Date-b;this.trigger("localLatency",e)}},remoteQueryAndRenderResults:$.noop,matcher:function(a){return function(b){if(b.name.toLowerCase().indexOf(a.toLowerCase())===0)return b}},ranker:function(a){return function(b,c){return a.length/c.length+c.matched_count-(a.length/b.length+b.matched_count)}},renderSearch:function(a){return(new twttr.views.TypeaheadSearchItem(a)).html()},render:function(a,b){this.$results.attr("data-search-query",b.toLowerCase());var c=twttr.map(a,this.renderSearch);if(c.length>0){var d=c.join("");this.$results.html(d),this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b)}else this.$results.empty(),this.$node.hide(),this.$node.removeClass("has-results")},isSavedSearch:function(a){for(var b=0,c=this.savedSearches.length;b<c;b++)if(this.savedSearches[b].name.toLowerCase()===a)return!0}});a(c)})}),provide("components/TypeaheadAccountsDatasource",function(a){using("components/TypeaheadDatasource").as(function(b,_){twttr.provide("twttr.users",{typeahead:{adjacencyList:{},userHash:{},length:0}});var c=twttr.klass.component("twttr.components.TypeaheadAccountsDatasource",function(a){var b={limit:6};this.options=twttr.merge({},b,a),this.$node=(new twttr.views.TypeaheadAccounts).render(),this.$results=this.$find("ul"),this.weights={PROFILE_VISIT_BOOST:10,UNCACHED_PROFILE_VISIT:75,FOLLOW:100,UNBLOCK:50,SELF:250},this.IE8_ACCOUNT_LIMIT=1e3,this.ACCOUNT_LIMIT=2500,this.addUsersQueue=[],this.blocks={},this.userIdsCurrentlyRendered={},this._version=66,this.isFullySupportedBrowser=!($.browser.msie&&parseInt($.browser.version,10)<8)}).subclassOf(b.components.TypeaheadDatasource).deciderKey("typeahead_people").methods({init:function(){this.$node.hide(),this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_local_queries")||this.inBucket())&&(this.clearCacheIfNewVersion(),this.bindRemoteApiListener(),this.bindProfileVisitHandler(),this.bindFollowEventHandler(),this.bindBlockEventHandler(),this.bindUnblockEventHandler(),this.bindLimitBasedOnWindowHeight(),this.getTypeaheadUsers(),this.userIdsCurrentlyRendered={})},clearCacheIfNewVersion:function(){this._version!==twttr.caches.User.get("typeahead_people_version")&&(twttr.caches.User.set("typeahead_friends",null,-1),twttr.caches.User.set("blocks",null,-1),twttr.caches.User.set("typeahead_people_version",this._version),twttr.caches.User.set("typeahead_people_from_api",0),twttr.caches.User.set("typeahead_people_followed",0),twttr.caches.User.set("typeahead_profile_visits",0),twttr.caches.User.set("typeahead_people_blocked",0),twttr.caches.User.set("typeahead_people_unblocked",0))},mapJavaScriptUser:function(a,b){return{id:a.id,screen_name:a.screenName,name:a.name,profile_image_url:a.profileImageUrl,profile_image_url_https:a.profileImageUrlHttps,verified:a.verified,tokens:a.tokens||this.tokenizeJavascriptUserObject(a),weight:b||a.weight||0}},mapApiUser:function(a,b){return{id:a.id,screen_name:a.screen_name,name:a.name,profile_image_url:a.profile_image_url,profile_image_url_https:a.profile_image_url_https,verified:a.verified,tokens:a.tokens,weight:b||parseFloat(a.rounded_graph_weight)||0}},bindRemoteApiListener:function(){$(document).bind("accountResults",twttr.bind(this,function(a,b,c,d){if(this.$results.attr("data-query")===b.toLowerCase()){d=twttr.filter(d,twttr.bind(this,this.filterBlockedUsers)),d=twttr.filter(d,twttr.bind(this,this.filterAlreadyDisplayedUsers)),this.renderRemoteUsers(d,b);var e=new Date-c;this.trigger("remoteLatency",e)}}))},bindProfileVisitHandler:function(){var a=this;$(document).bind("profileVisit",function(b,c){if(!c.screenName)return;var d=a.removeFromList(a.mapJavaScriptUser(c));d?(d.tokens=a.tokenizeJavascriptUserObject(d),a.addToList(a.mapApiUser(d,d.weight+a.weights.PROFILE_VISIT_BOOST))):(c.tokens=a.tokenizeJavascriptUserObject(c),a.addToList(a.mapJavaScriptUser(c,a.weights.UNCACHED_PROFILE_VISIT)));var e=a.get("typeahead_profile_visits")||0;a.set("typeahead_profile_visits",e+1)})},bindFollowEventHandler:function(){var a=this;twttr.API.User.bind("follow",function(b,c){a.addToList(a.mapJavaScriptUser(c,a.weights.FOLLOW)),a.set("typeahead_people_followed",a.get("typeahead_people_followed")+1),a.trigger("resultsDirty")})},bindBlockEventHandler:function(){var a=this;twttr.API.User.bind("block",function(b,c){a.blocks[c.id]=c,a.update("blocks",a.blocks),a.removeFromList(a.mapJavaScriptUser(c)),a.set("typeahead_people_blocked",a.get("typeahead_people_blocked")+1),a.trigger("resultsDirty")})},bindUnblockEventHandler:function(){var a=this;twttr.API.User.bind("unblock",function(b,c){delete a.blocks[c.id],a.update("blocks",a.blocks),a.addToList(a.mapJavaScriptUser(c,a.weights.UNBLOCK)),a.set("typeahead_people_unblocked",a.get("typeahead_people_unblocked")+1),a.trigger("resultsDirty")})},bindLimitBasedOnWindowHeight:function(){this.bind("newLimit",twttr.bind(this,function(a,b){this.options.limit=b}))},localQueryAndRenderResults:function(a){this.userIdsCurrentlyRendered={},this.$results.attr("data-query",a.toLowerCase());if(this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_local_queries")||this.inBucket())){var b=new Date,c;a.length&&twttr.users.typeahead?(processedQuery=this.processQuery(a),c=this.getPossiblyMatchingAccounts(processedQuery),c=twttr.filter(c,twttr.bind(this,this.matcher(processedQuery,twttr.users.typeahead.length))),c=twttr.filter(c,twttr.bind(this,this.filterBlockedUsers)),c=c.sort(this.ranker),c=c.slice(0,this.options.limit)):c=[],this.renderLocalUsers(c,a);var d=new Date-b;this.trigger("localLatency",d)}},remoteQueryAndRenderResults:function(a){var b=this;if(this.isFullySupportedBrowser&&(twttr.decider.isAvailable("typeahead_people")&&twttr.decider.isAvailable("typeahead_people_remote_queries")||this.inBucket())){var c=new Date,d;a.length&&this.queryTopicAndAccountRemoteApi(a,this.options.limit+2,c)}},processQuery:function(a){var b=this.tokenizeText(a);return{raw:a,length:a.length,terms:twttr.map(this.tokenizeText(a),function(a){return{val:a}})}},getUserObjectsFromIds:function(a){var b=[],c=twttr.users.typeahead.userHash;for(var d=0,e=a.length;d<e;d++)$.inArray(c[a[d]],b)===-1&&b.push(c[a[d]]);return b},getPossiblyMatchingAccounts:function(a){var b={},c={};for(var d=0,e=a.terms.length;d<e;d++){var f=a.terms[d],g=f.val[0],i=twttr.users.typeahead.adjacencyList[g];f&&i&&!b[g]&&(b[g]=!0,twttr.map(i,function(a){c[a]=!0}))}var j=[];return $.each(c,function(a){j.push(a)}),this.getUserObjectsFromIds(j)},matcher:function(a,b){return function(b){var c=b.tokens,d=[];for(var e=0,f=c.length;e<f;e++)for(var g=0,i=a.terms.length;g<i;g++)c[e].token.indexOf(a.terms[g].val)===0&&d.push(g);b.matchedCount=$.unique(d).length;if(b.matchedCount===a.terms.length)return b}},ranker:function(a,b){return b.weight-a.weight},renderLocalUsers:function(a,b){var c=twttr.map(a,twttr.bind(this,this.renderAccount));b&&a.length&&c.push((new twttr.views.TypeaheadAccountsShortcut({query:b})).html()),this.$results.html(c.join("")),c.length>0?(this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b)):(this.$node.hide(),this.$node.removeClass("has-results"))},renderRemoteUsers:function(a,b){var c=this.$results.find('li a[data-shortcut="true"]').length,d=this.$results.find("li").length-c;a=a.slice(0,Math.max(0,this.options.limit-d));var e=twttr.map(a,twttr.bind(this,this.renderAccount));b&&c===0&&a.length?(e.push((new twttr.views.TypeaheadAccountsShortcut({query:b})).html()),this.$results.html(e.join(""))):$(e.join("")).insertBefore(this.$results.find(".js-shortcut")),e.length>0&&(this.$node.show(),this.$node.addClass("has-results"),this.trigger("show",b))},tokenizeJavascriptUserObject:function(a){var b=this.tokenizeScreenName(a.screenName).concat(["@"+a.screenName],this.tokenizeName(a.name));return twttr.map(b,function(a){return{token:a}})},mapApiUsers:function(a){var b=this;return twttr.map(a,function(a,c){return b.mapApiUser(a)})},addCurrentUser:function(){if(twttr.currentUser){var a=twttr.currentUser;a.tokens=this.tokenizeJavascriptUserObject(a),this.addToList(this.mapJavaScriptUser(twttr.currentUser,this.weights.SELF))}},getTypeaheadUsers:function(){if(twttr.decider.isAvailable("typeahead_local_queries")||this.inBucket())if(!this.requestedUsers){var a=this;this.requestedUsers=!0;var b=twttr.caches.User.get("typeahead_people_from_api"),c=+(new Date);twttr.users.typeahead=twttr.caches.User.get("typeahead_friends"),b&&b!==0&&!!twttr.users.typeahead?(this.trigger("scribeLocalStorageLatency",["load",+(new Date)-c]),this.processQueuedUsers(),this.trigger("resultsDirty")):twttr.API.User.typeaheadSocial(twttr.currentUser.id,{count:$.browser.msie&&parseInt($.browser.version,10)===8?a.IE8_ACCOUNT_LIMIT:a.ACCOUNT_LIMIT,success:function(b){b.length&&(b=a.mapApiUsers(b),a.getBlockedUsers(function(){b=a.filterBlockedUsers(b);var c=twttr.is.def(twttr.users.typeahead)?twttr.users.typeahead:{adjacencyList:{},userHash:{},length:0};twttr.users.typeahead=a.preprocessUsers(b,c),a.addCurrentUser();var d=+(new Date);a.updateStorageCache(),a.trigger("scribeLocalStorageLatency",["save",+(new Date)-d]),a.trigger("resultsDirty")}),a.processQueuedUsers())}})}},preprocessUsers:function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];for(var f=0,g=e.tokens.length;f<g;f++){var i=e.tokens[f].token[0];if(!i)break;b.adjacencyList[i]||(b.adjacencyList[i]=[]),$.inArray(e.id,b.adjacencyList[i])===-1&&b.adjacencyList[i].push(e.id)}b.userHash[a[c].id]=a[c]}return b.length=b.length+a.length,b},getBlockedUsers:function(a){var b=this;blocks=b.get("blocks"),blocks?a(blocks):twttr.currentUser.blocks(function(c){c=c.array;for(var d=0,e=c.length;d<e;d++)b.blocks[c[d].id]=c[d];var f=36e5;b.set("blocks",b.blocks,f),a(b.blocks)})},filterBlockedUsers:function(a){if(!twttr.is.def(this.blocks[a.id]))return a},filterAlreadyDisplayedUsers:function(a){if(!twttr.is.def(this.userIdsCurrentlyRendered[a.id]))return a},renderAccount:function(a){this.userIdsCurrentlyRendered[a.id]=a;var b=twttr.isSSL()?a.profile_image_url_https:a.profile_image_url;return a.avatar=twttr.helpers.transformProfileImageUrl(b,"mini"),a.verified=a.verified?' <i class="verified"></i>':"",twttr.decider.isAvailable("typeahead_debug_info")?(isUserLocal=twttr.is.def(a.weight),a.debug_info=twttr.util.supplant(' title="{datasource} user, weight/score: {score}"',{datasource:isUserLocal?"local":"remote",score:isUserLocal?a.weight:a.rounded_score})):a.debug_info="",(new twttr.views.TypeaheadAccountItem(a)).html()},processQueuedUsers:function(){for(var a=0,b=this.addUsersQueue.length;a<b;a++)this.addToList(this.addUsersQueue[a])},addToList:$.noop,removeFromList:function(a){return a}});a(c)})}),provide("components/GlobalNavTypeahead",function(a){using("constants","components/Typeahead","components/TypeaheadSearchQueryDatasource","components/TypeaheadAccountsDatasource").as(function(b,c,_){var d=twttr.klass("twttr.components.GlobalNavTypeahead",function(a){var c={input:$("#search-query"),inputHint:$("#search-query-hint"),datasources:[new b.components.TypeaheadSearchQueryDatasource,new b.components.TypeaheadAccountsDatasource],select:function(a,b,c,d){var e=c.find("a").attr("data-shortcut"),f=c.attr("data-user-screenname"),b=c.find("a").attr("data-search-query")||b,g=c.find("a").attr("data-query-source")==="saved_search_click",i=g?twttr.search.searchQuerySource.SAVED_SEARCH_CLICK:twttr.search.searchQuerySource.TYPEAHEAD_CLICK;!c.find("a").attr("data-search-query")&&!f&&(i=twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.setLastQuerySource(i);var j;e?j=c.find("a")[0].href:f?j=twttr.router.profilePath({screen_name:f}):(twttr.search.$searchQuery.val(b),j=twttr.router.searchResultsPath({query:b})),d?window.open(j):twttr.router.routeTo(j),a.preventDefault()}},a=twttr.merge({},c,a);(twttr.decider.isAvailable("typeahead_global_nav")||twttr.abdecider.choose("typeahead_271")==="typeahead")&&b.components.Typeahead.call(this,a)}).subclassOf(b.components.Typeahead);a(d)})}),provide("components/Editor",function(a){using("util","constants").as(function(b){twttr.klass("twttr.components.Editor",function(a,b){var c=this;this.$container=$(a),this.$container.addClass("twttr-editor"),this.options=b||{},this._defaultContent=this.options.defaultContent||"",this._enableAutoGrow=this.options.enableAutoGrow||!1,this._isIE7()&&(this._enableAutoGrow=!1),this._autoGrowMinHeight=this.options.height||75;var d=this.options.width||"100%",e=this.options.height||"auto";this.$editor=$("<textarea/>").addClass("twitter-anywhere-tweet-box-editor").css({width:d,height:e}).val(this._defaultContent),this.options.condensed&&this.$container.addClass("condensed"),this.css={width:$.browser.mozilla?d-2:d,height:e,"min-height":e},this.$container.append(this.$editor),this._enableAutoGrow&&(this.$editor.css("overflow","hidden"),this.$shadow=this._createShadowForTextArea(this.$editor),this.$shadow.appendTo(this.$editor.parent())),this._registerEvents()}).methods(twttr.EventProvider).methods({moveCursorToEnd:function(){var a=this.$editor[0];setTimeout(function(){try{if(a.createTextRange){var b=a.createTextRange();b.collapse(!0),b.moveStart("character",a.value.length),b.moveEnd("character",a.value.length),b.select()}else a.selectionStart=a.value.length}catch(c){}},0)},content:function(){return this.$editor.val().replace(twttr.constants.regexps.dirMark,"")},setContent:function(a){a=a||"",this.$editor.val(a),this.trigger("didChangeContent",[a])},height:function(a){this.$editor.css("height",a)},width:function(a){this.$editor.css("width",a)},focus:function(){this.$editor.focus(),this.moveCursorToEnd()},blur:function(){this.$editor.blur()},toggle:function(){this.$editor.toggle()},reset:function(){this.setContent("")},_tryAutoGrow:function(){var a=this._autoGrowMinHeight,b=150,c="xyz",d=this.$editor;this._copyCssPropertiesFromTextArea(this.$shadow,d),this.$shadow.text(d.val()+c);var e=this.$shadow.height();e>a&&e<=b?(d.css("overflow","hidden"),d.height(e)):e<a?(d.css("overflow","hidden"),d.height(a)):e>b&&d.css("overflow","auto")},_isIE7:function(){return $.browser.msie&&parseInt($.browser.version,10)===7},_copyCssPropertiesFromTextArea:function(a,b){var c=["font-family","font-size","font-weight","line-height","padding-bottom","padding-left","padding-right","padding-top","white-space","width","word-wrap"];$.each(c,function(c,d){a.css(d,b.css(d))})},_createShadowForTextArea:function(a){var b=$("<div />").css("display","none");return this._copyCssPropertiesFromTextArea(b,a),b},_registerEvents:function(){var a=this;this.$editor.bind("focus blur",function(b){a.trigger(b.type,Array.prototype.slice.call(arguments,1))}),this.$editor.bind("keypress",function(a){if(a.ctrlKey)return;a.stopPropagation()}),this.$editor.bind("keydown",function(c){if(c.ctrlKey)return;switch(c.keyCode){case b.constants.keyCodes.tab:c.preventDefault(),a.trigger("blurFromTab",[c]);break;case b.constants.keyCodes.esc:c.preventDefault(),a.trigger("blurFromEscape");break;default:c.stopPropagation()}}),$.browser.mozilla?this.$editor.bind("input mousedown mouseup",twttr.bind(this,this._keyEvents)):this.$editor.bind("keydown keyup paste change mousedown mouseup input",twttr.bind(this,this._keyEvents)),this._enableAutoGrow&&this.$editor.bind("change cut keyup paste",twttr.bind(this,this._tryAutoGrow))},_keyEvents:function(a){!$.browser.webkit||a.type!="paste"&&a.type!="keydown"?this._inputCallback(a):setTimeout(twttr.bind(this,function(){this._inputCallback(a)}),0)},_inputCallback:function(a){this.trigger("didChangeContent",[this.content(),a])}}),twttr.klass("twttr.components.RichEditor",function(a,c){function e(a){var b=d.$editor.offset();d.$proxy=$(a.contentWindow.document.body),twttr.i18n&&twttr.i18n.rtl&&(d.$proxy[0].dir="rtl"),d.$proxy.append("<style>"+d.constructor.css+"</style>"),d._$proxyWrapper=$('<pre class="proxy-wrapper"></pre>').appendTo(d.$proxy),d._applyStyles(),d._queue.flush()}var d=this;this.supr=twttr.components.Editor,this.supr.apply(this,arguments),this._queue=new b.util.WaitQueue,this._$proxyWrapper={length:0},this.$iframe=$('<iframe allowtransparency="false" src="../../receiver.html" frameborder="0" tabindex="-1" role="presentation" scrolling="no"/>'),this.$iframe.insertBefore(this.$editor),this.$iframe.bind("load",function(){e(this)}),this.$iframe.addClass("proxy-editor"),this.$container.addClass("rich-editor"),this._tweetBoxHeight=0,$('<div class="tweet-meta"><div class="tweetbox-media-icon"/></div>').appendTo(this.$container),this.$mediaicon=this.$container.find(".tweetbox-media-icon"),this._foundMedia=!1,this.bind("didChangeContent",twttr.bind(this,this._proxyLinkify))}).subclassOf(twttr.components.Editor).statics({css:'body {        margin: 0;        width: 482px;        height: 56px;        color: #222;        overflow-x: hidden;        overflow-y: hidden;      }      .proxy-wrapper {        margin: 0;        padding: 0;        font: 14px/18px "Helvetica Neue", Arial, sans-serif;        white-space: pre-wrap;        word-wrap: break-word;      }      a {        color: #0084b4;        text-decoration: none;      }      a.twitter-timeline-link {        background-color: #bedff8;        -moz-border-radius: 5px;        -webkit-border-radius: 5px;        border-radius: 5px;      }      em {        font-style: normal;        display: inline-block;        width: 2px;      }'}).methods({_applyStyles:function(){this.$editor.css("min-height",this.css.height),this.$proxy.css("width",this.css.width),this.$iframe.css("width",this.css.width)},_growTweetBox:function(){var a=this._$proxyWrapper.height();$.browser.webkit&&(a+=10),a!==this._tweetBoxHeight&&(this.$editor.height(a),this.$iframe.height(a),this.trigger("heightChange")),this._tweetBoxHeight=a},_replaceAndys:function(a){return a.replace(/&amp;/g,"&")},_proxyLinkify:function(){this._queue.add(twttr.bind(this,function(){var a=b.util.linkify(this._replaceAndys(h(this.content())))+"<em>&nbsp;</em>";this._$proxyWrapper.html(a),this._growTweetBox(),this._showMediaIcon()}))},_showMediaIcon:function(){var a=twttr.txt.extractUrls(this.content()),b;for(var c=0;c<a.length;c++){var d=a[c];b=twttr.media.matchInstance(d);if(b){var e=twttr.is.fn(b.icon)?b.icon():b.icon;this.$mediaicon.addClass(e),this._foundMedia=!0;return}}!b&&this._foundMedia&&(this.$mediaicon[0].className="tweetbox-media-icon",this._foundMedia=!1)},reset:function(){this.supr.prototype.reset.apply(this,arguments),this._$proxyWrapper.html(""),this._applyStyles()}}),a(twttr.components.Editor)})}),provide("TweetBox",function(a){using("_","util","constants","components/TweetboxAutocomplete","mixins/urlShortener","mixins/photoBox").as(function(b,_){var c={condensed:!0,condensedContent:"",closeAfterSuccess:!0,defaultContent:!1,width:560,height:56,autocomplete:!0,autocompleteSuggestionLimit:10,displayError:!0,template:{show_geo:!0,show_title:!0,title:_("What’s happening?"),button_text:_("Tweet"),api_url:window.location.protocol+"//"+twttr.domains.upload},enableDraft:!1,statusAction:"update",draggable:!0},d=1,e={},f={update:"Status",reply:"Status",dm:"DirectMessage",directMessage:"DirectMessage"},g=/^(?:d|m|dm)\s+[@＠]?([a-zA-Z0-9_]{1,20}) /;twttr.klass("twttr.TweetBox",function(a,f){var g=this;c.template.title=_("What’s happening?"),c.template.button_text=_("Tweet"),c.template.post_authenticity_token=twttr.API.getConfig().postAuthenticityToken,this.options=twttr.merge({},c,f||{},!0),this.places=[],this._explainLinkShortening=twttr.is.def(this.options.explainLinkShortening)?this.options.explainLinkShortening:!0,this._isButtonEnabled=!1,this._hasWarned=!0,this._hasSuperWarned=!1,this._hasNoWarned=!1;var i={defaultContent:this._getDraftTweet()||this.options.condensedContent||this.options.defaultContent,width:this.options.width,height:this.options.height,enableAutoGrow:this.options.enableAutoGrow||!1};this.id=this.options.id||d++,e[this.id]=this,this.$container=$(a),this.view=(new twttr.views.TweetBox(this.options.template)).render(a,"append");var j=twttr.decider.isAvailable("phoenix_tweetbox_talon")&&twttr.decider.isAvailable("phoenix_rich_editor")&&!$.browser.msie,k=j?"RichEditor":"Editor";this.editor=new twttr.components[k](this.$container.find(".text-area-editor"),i),this.$counter=this.$find(".tweet-counter"),this.$tweetButton=this.$container.find(".tweet-button"),this.$title=this.$container.find("h2"),this.options.autocomplete&&(this.autocomplete=new b.components.TweetboxAutocomplete(this)),this._updateDraftTweet=twttr.bind(this,this._updateDraftTweet),!this.options.condensed||!this.options.condensedContent&&this.options.defaultContent||i.defaultContent!==(this.options.condensedContent||this.options.defaultContent)?this.open():this.editor.blur(),twttr.is.def(this.options.dynamicTitle)&&(this._dynamicTitle=this.options.dynamicTitle),this._registerUrlShortenerEvents(),this.registerEvents(),this._initPhotobox(),this._toggleCounterState(null,i.defaultContent||"")}).mixin(twttr.mixins.i18nTweetBox,twttr.mixins.urlShortener,twttr.mixins.photoBox).statics({focus:function(a){e[a].editor.focus()},_getDefaultContentForReply:function(a,b,c){var d=!1,e=a?a.find("a.twitter-atreply"):[],f="@"+b+" ";if(e.length){d=!0;var g=[];e.each(function(a,d){var e=$(this).text().replace("@","");!e.match(new RegExp("^"+b+"$"),"i")&&!twttr.is.inArray(e,g)&&!e.match(new RegExp("^"+c+"$","i"))&&g.push(e)}),g.unshift(b),f=twttr.map(g,function(a){return"@"+a+" "}).join("")}return{defaultContent:f,multiple:d}}}).statics(twttr.EventProvider).methods(twttr.EventProvider).methods({$find:function(a){return this.$container.find(a)},_locked:!1,_dynamicTitle:!0,lock:function(){this._locked=!0},unlock:function(){this._locked=!1},focus:function(){this.editor.focus(),this.editor.moveCursorToEnd()},_getTextLength:function(a){var c=b.util.displayLength(a);return c},_noPhotosPresent:function(){return!this.turkey||this.turkey&&!this.turkey.hasItems()},_toggleButtonState:function(a,b){var c=this._getTextLength(b),d=this.options.defaultContent||"";(c>140||$.trim(this.getTweetContent())==$.trim(d))&&this._noPhotosPresent()?this._isButtonEnabled&&(this._isButtonEnabled=!1,this.$tweetButton.addClass("disabled").removeClass("primary-btn")):this._isButtonEnabled||(this._isButtonEnabled=!0,this.$tweetButton.removeClass("disabled").addClass("primary-btn"))},_toggleCounterState:function(a,b){var c=this._getTextLength(b);this._updateCounter(c),c>120&&c<130?this._hasWarned||(this._hasWarned=!0,this._hasSuperWarned=!1,this._hasNoWarned=!1,this.$counter.addClass("warn").removeClass("superwarn")):c>=130?this._hasSuperWarned||(this._hasSuperWarned=!0,this._hasWarned=!1,this._hasNoWarned=!1,this.$counter.addClass("superwarn").removeClass("warn")):this._hasNoWarned||(this._hasNoWarned=!0,this._hasSuperWarned=!1,this._hasWarned=!1,this.$counter.removeClass("superwarn").removeClass("warn"))},_updateCounter:function(a){this.$counter.val(140-a)},open:function(){var a=this;if(this._isOpen)return;this._isOpen=!0,this.$container.find(".tweet-box").removeClass("condensed");var b=this._getDraftTweet();b?this.setTweetContent(b):twttr.is.string(this.options.defaultContent)&&this.setTweetContent(this.options.defaultContent),this.editor.bind("didChangeContent",this._updateDraftTweet),this.trigger("open");var c={};twttr.audit.currentPage()=="profile"&&(c.profile_id=twttr.profileUser.id);var d=a.options.statusAction==="directMessage"||a.editor.content().match(g);d||(twttr.profileUser&&twttr.profileUser.verified&&twttr.app.currentPageName()=="profile"&&twttr.abdecider.track("replies_stripped_on_verified_profiles_222","compose_tweet"),trackClient({component:"tweetbox",action:"compose_tweet"},c))},close:function(){if(!this._isOpen)return;this.options.condensed&&this.$container.find(".tweet-box").addClass("condensed"),this.editor.unbind("didChangeContent",this._updateDraftTweet),this.turkey&&this.turkey.reset(),this.trigger("close"),this._isOpen=!1},disable:function(){this.close(),this.editor.$editor.val(""),this.editor.$editor.bind("keypress",function(a){a.preventDefault()})},getTweetContent:function(){return this.editor.content()},setTweetContent:function(a){this._setDraftTweet(a),this.editor.setContent(a)},resetTweetContent:function(){this.editor.reset(),this._setDraftTweet(null),this.$container.find("textarea").val(this.options.condensedContent)},_tweet:function(){this.trigger("readyToTweet"),this.tweet()},tweet:function(){var a=this._shouldTweet();a.shouldTweet&&(this.setTweetBoxToBusyState(),this._setDraftTweet(null),this.trigger("sendingTweet",{action:this.options.statusAction}),this.makeRequest.apply(this,a.args)),a.msg&&(this.options.displayError&&twttr.showError(a.msg),this.trigger("error",[a.msg])),a.redirectToProfile&&twttr.router.routeTo(twttr.router.profilePath({screen_name:a.redirectToProfile}))},_getDraftTweet:function(){return this.options.enableDraft?twttr.app.caches.draftTweets.get(this.options.enableDraft===!0?window.location.href:this.options.enableDraft):null},_setDraftTweet:function(a){if(this.options.enableDraft){var b=this.options.enableDraft===!0?window.location.href:this.options.enableDraft;a?twttr.app.caches.draftTweets.set(b,a,864e5):twttr.app.caches.draftTweets.remove(b)}},_updateDraftTweet:function(){this._setDraftTweet(this.getTweetContent())},_shouldTweet:function(){var a=[],c=this.options.statusAction,d=f[c],e=$.trim(this.editor.content());if((this.options.condensedContent&&e==$.trim(this.options.condensedContent)||this.options.defaultContent&&e==$.trim(this.options.defaultContent))&&this._noPhotosPresent())return{shouldTweet:!1};if(this._sendingStatus||this._locked)return{shouldTweet:!1};var g=this.turkey&&this.turkey.hasItems();if(c==="update"&&this.editor.content().match(b.constants.regexps.usernameWithSpace)&&!g){var i=RegExp.$1;return this.$container.find(".tweet-spinner").show(),this.$container.find(".tweet-counter").hide(),{shouldTweet:!1,redirectToProfile:i}}if(this._getTextLength(e)>140)return{shouldTweet:!1,msg:(new twttr.views.TooLongErrorMessage({is_dm:c==="directMessage"})).html()};if(this._getTextLength(e)===0)return{shouldTweet:!1};if(c=="directMessage")if(!twttr.is.def(this.options.data.getUser())||twttr.is.blank(this.options.data.getUser()))return{shouldTweet:!1,msg:_("Whoops! You forgot to type in a username.")};var j=this,k=this._getRequestOptions();this.options.inReplyToStatusId&&twttr.merge(k,{in_reply_to_status_id:this.options.inReplyToStatusId});if(twttr.geo.location){var l=twttr.geo.location.isLocationOn()&&twttr.geo.location.cityId();l&&(k.place_id=l)}twttr.decider.isAvailable("geo_place_entities_write")&&this.places.length&&(k.places=JSON.stringify(this.places)),k.timeout=function(a){a.retry()};switch(c){case"update":a=[this.getTweetContent(),k];break;case"reply":k.impression_id=this.options.data.impressionId,a=[this.options.data.tweetId,this.getTweetContent(),k];break;case"directMessage":c="send",a=[this.options.data.getUser(),this.getTweetContent(),k]}return{shouldTweet:!0,args:[d,c,a]}},setTweetBoxToBusyState:function(){this.$container.find(".tweetbox-counter-tipsy").hide(),this.$container.find(".tweet-spinner").show(),this.$container.find(".tweet-counter").hide(),this.$tweetButton.addClass("disabled")},unSetTweetBoxToBusyState:function(){this.$container.find(".tweet-spinner").hide(),this.$container.find(".tweet-counter").show(),this.$container.find(".tweetbox-counter-tipsy").show(),this.$tweetButton.removeClass("disabled")},_getRequestOptions:function(){var a=this,b=a.options.statusAction==="directMessage"||a.editor.content().match(g);return{complete:function(){a.unSetTweetBoxToBusyState(),a._sendingStatus=!1},success:function(c,d){var e="";a.options.closeAfterSuccess&&a.close(),b||(a.trigger("tweetSuccess",[c,a.options.statusAction]),a.constructor.trigger("tweetSuccess",[c,a.options.statusAction]),e=a.options.inReplyToStatusId||c.text.indexOf("@")==0?"send_reply":"send_tweet"),a.editor.reset(),a.places=[],delete a.options.inReplyToStatusId;var f={item_ids:[c.id]};twttr.profileUser&&(f.profile_id=twttr.profileUser.id);var g=a.options.id||"unspecified-tweetbox";g.indexOf("send-message-box")!=-1&&(g="send-message-box"),b?(a.trigger("dmSuccess",[c,a.options.statusAction]),trackClient({component:"direct_message",action:"send_dm"},f)):trackClient({component:g,action:e},f),a.options.condensed&&a.$container.find(".tweet-box").addClass("condensed"),a.resetTweetContent()},error:function(c){a.$tweetButton.removeClass("disabled");if(twttr.isT1&&b)var d=twttr.errors.errorCodeFromResponse(c);else var d=twttr.helpers.showErrorFromResponse(c,b?"dm":"tweet");a.trigger(b?"dmError":"tweetError",[d])}}},makeRequest:function(a,b,c){this._sendingStatus=!0,twttr.API[a][b].apply(twttr.API[a],c)},destroy:function(){this.trigger("destroy")},collapseOnBlur:function(){if(this.preventBlur)return;var a=this.editor.content(),b=a===this.options.defaultContent||a==="";b&&this._noPhotosPresent()&&(this.close(),this.editor.setContent(this.options.condensedContent||this.options.defaultContent||""),$(document).unbind("click.tweetbox"))},registerEvents:function(){var a=this;this.$tweetButton.addClass("disabled"),this.editor.bind("focus",function(b){setTimeout(function(){a.open(),twttr.geo.location&&twttr.geo.location.onFocusTweetBox(a.$container)},0)}),twttr.isT1&&(this.editor.bind("blur",function(){a.collapseOnBlur()}),this.editor.bind("focus",function(){$(document).unbind("click.tweetbox"),$(document).bind("click.tweetbox",function(b){$(b.target).is(".tweet-box, .tweet-box *")||a.collapseOnBlur()})}),this.$container.bind("mouseenter",function(){a.preventBlur=!0}),this.$container.bind("mouseleave",function(){a.preventBlur=!1})),this.editor.bind("didChangeContent",twttr.bind(this,this._toggleButtonState)),this.editor.bind("didChangeContent",twttr.bind(this,this._toggleCounterState)),this.registerTextDirEvents(),this.editor.bind("blurFromTab",function(b,c){twttr.components.Autocomplete._isCompletionsOpen||a.$container.find(".tweet-button").focus()}),this.editor.bind("blurFromEscape",function(b){twttr.components.Autocomplete._isCompletionsOpen||(a.preventBlur=!1,a.editor.blur(),a.trigger("blurFromEscape"))}),!this.options.condensedContent&&this.options.defaultContent.length>0&&(this.editor.trigger("didChangeContent",[this.options.defaultContent]),setTimeout(twttr.bind(this,function(){this.open(),this.focus(),this.editor.$editor.trigger(jQuery.Event("keyup"))}),0)),this.$tweetButton.bind("keypress",twttr.bind(this,function(a){a.stopPropagation();if(a.keyCode===b.constants.keyCodes.enter||a.charCode===b.constants.charCodes.space)return this._tweet(),a.preventDefault(),this.blur(),!1})).bind("click",function(b){a._tweet(),this.blur(),b.preventDefault()});var d,e,f,i;if(this.options.statusAction=="update"||this.options.statusAction=="reply")this.bind("titleChanged",function(b,c,d){a.$tweetButton[0].childNodes[0].nodeValue=d=="dm"?_("Send Message"):_("Tweet")}),this._dynamicTitle&&this.editor.bind("didChangeContent",twttr.bind(this,function(a,j){if(j.match(g)){if(!d){d=!0,e=f=i=!1;var k=RegExp.$1,l=_("Message {{username}}",{username:k});this.$title.html(l),this.trigger("titleChanged",[l,"dm"])}}else if(this.options.statusAction=="reply"&&j.match(new RegExp("[@＠]"+this.options.data.screenName+" "))){if(!e){e=!0,d=f=i=!1;var l=_("Reply to @{{username}}",{username:this.options.data.screenName});this.$title.html(l),this.trigger("titleChanged",[l,"reply"])}}else if(j.match(b.constants.regexps.usernameWithAt)){if(!f){f=!0,d=e=i=!1;var l=_("Tweet to {{username}}",{username:RegExp.$1});this.$title.html(l),this.trigger("titleChanged",[l,"mention"])}}else i||(i=!0,d=e=f=!1,this.$title.html(c.template.title),this.trigger("titleChanged",[c.template.title,"update"]))}));twttr.geo.location&&twttr.geo.location.onRegisterTweetBox(this.$container,this.options.whenGeoPopupOpens),this.trigger("ready")}}),a(twttr.TweetBox)})}),provide("components/TweetboxAutocomplete",function(a){using().as(function(){twttr.klass("twttr.components.TweetboxAutocomplete").subclassOf(twttr.components.Base).initializer(function(a){var b=this;this.tweetbox=a,this.places=a.places,this.autocomplete=new twttr.components.Autocomplete({input:a.editor.$editor,textarea:!0,limit:a.options.autocompleteSuggestionLimit}),this.autocomplete.bind("select",function(a){b.tweetbox.editor.trigger("didChangeContent",[b.tweetbox.editor.content()])}),this.tweetbox.editor.bind("heightChange",twttr.bind(this.autocomplete,this.autocomplete.position)),a.bind("open",function(a){twttr.components.Autocomplete.getAutocompletedUsers(),b.autocomplete.position()}),a.$container.delegate(".geo-insert-place-button","click",twttr.bind(this,function(a){return this.autocomplete.insertPlace(),!1}))}),a(twttr.components.TweetboxAutocomplete)})}),provide("shortcuts_t1",function(a){using("_","constants").as(function(b,_){twttr.shortcuts={delegateToApp:function(){$(document).bind("keypress",function(a){return twttr.app.currentPage().send("onkeypress",[a])}),$(document).bind("keyup",function(a){return twttr.app.currentPage().send("onkeyup",[a])}),$(document).bind("keydown",function(a){return twttr.app.currentPage().send("onkeydown",[a])})},focusSearchBox:function(a){a.preventDefault(),$("#search-query").focus(),scribble("search-box-focus",{input:"keyboard"})},initCombos:function(){twttr.shortcuts.currentKey=null;var a=[],b={65:"a",67:"c",68:"d",71:"g",76:"l",85:"u",82:"r",83:"s",80:"p",72:"h",70:"f",86:"v",88:"x",77:"m"};$(document).keydown(function(a){if(twttr.helpers.isModifier(a))return;twttr.shortcuts.verify(a)&&$(a.target).is(":not(input)")?a.preventDefault():twttr.shortcuts.currentKey=null}),twttr.augmentString("twttr.shortcuts.combo",function(b,c){a.push({keys:b,fn:c})}),twttr.augmentString("twttr.shortcuts.verify",function(c){var d=c.keyCode,e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(b[d]===g.keys[0]){e=!0,twttr.shortcuts.currentKey=b[d];break}if(b[d]===g.keys[1]&&twttr.shortcuts.currentKey===g.keys[0]){e=!0,twttr.shortcuts.currentKey=null,g.fn();break}}return e}),twttr.shortcuts.combo(["g","u"],function(){scribble("open-goto-user-dialog",{input:"keyboard"}),twttr.components.Autocomplete.getAutocompletedUsers(),twttr.dialogs.goToUser().open()});if(twttr.loggedIn){function c(){scribble("switch-stream",{input:"keyboard",toStream:"connect"}),twttr.router.routeTo(twttr.router.connectPath())}function d(){scribble("switch-stream",{input:"keyboard",toStream:"activity"}),twttr.router.routeTo(twttr.router.networkActivityPath())}function e(){scribble("switch-stream",{input:"keyboard",toStream:"mentions"}),twttr.router.routeTo(twttr.router.mentionsPath())}twttr.decider.isActivityEnabled()?(twttr.shortcuts.combo(["g","a"],d),twttr.shortcuts.combo(["g","c"],c),twttr.shortcuts.combo(["g","r"],e)):twttr.shortcuts.combo(["g","r"],e),twttr.shortcuts.combo(["g","d"],function(){scribble("switch-page",{input:"keyboard",toPage:"discover"}),twttr.router.routeTo(twttr.router.discoverPath())}),twttr.shortcuts.combo(["g","l"],function(){scribble("switch-stream",{input:"keyboard",toPage:"lists"}),twttr.router.routeTo(twttr.router.listsPath())}),twttr.shortcuts.combo(["g","p"],function(){scribble("switch-page",{input:"keyboard",toPage:"profile"}),twttr.router.routeTo(twttr.router.profilePath({screen_name:twttr.currentUser.screenName}))}),twttr.shortcuts.combo(["g","m"],function(){scribble("switch-page",{input:"keyboard",toPage:"messages"}),twttr.dialogs.directMessage({origin:"message-dialog-hotkey"}).open().switchToConversationListView()}),twttr.shortcuts.combo(["g","h"],function(){scribble("switch-stream",{input:"keyboard",toStream:"home"}),twttr.router.routeTo(twttr.router.homePath())}),twttr.shortcuts.combo(["g","f"],function(){scribble("switch-stream",{input:"keyboard",toStream:"favorites"}),twttr.router.routeTo(twttr.router.favoritesPath())}),twttr.shortcuts.combo(["g","s"],function(){scribble("switch-page",{input:"keyboard",toPage:"settings"}),twttr.router.routeTo(twttr.router.settingsPath())}),twttr.decider.isAvailable("phoenix_facets")&&(twttr.shortcuts.combo(["s","p"],function(){scribble("open-search-facets-dialog",{input:"keyboard",facetsType:"photos"}),twttr.dialogs.searchFacets("photos").open()}),twttr.shortcuts.combo(["s","v"],function(){scribble("open-search-photos-dialog",{input:"keyboard",facetsType:"videos"}),twttr.dialogs.searchFacets("videos").open()})),twttr.shortcuts.combo(["g","x"],function(){twttr.decider.isAvailable("muteUsers")&&(twttr.components.Autocomplete.getAutocompletedUsers(),(new twttr.widget.MuteDialog).open())})}},initSecrets:function(){twttr.loggedIn&&(twttr.provide("twttr.secrets"),twttr.secrets.secretSauce=function(a,b){$(document).bind("keydown",b.split("->"),function(b){twttr.decider.isAvailable(a)&&(twttr.secrets[a]=!twttr.secrets[a])})},twttr.secrets.secretSauce("hideMentions","x->o"),twttr.secrets.secretSauce("allMedia","x->i"))},openDialogs:function(a){if(!twttr.loggedIn||twttr.shortcuts.currentKey)return;if(twttr.helpers.isModifier(a)||$(a.target).is("input"))return;a.keyCode===77?(twttr.dialogs.directMessage({origin:"message-dialog-hotkey"}).open().switchToNewMessageView(),scribble("dialog-direct-message",{input:"keyboard"}),a.preventDefault()):a.keyCode===78&&((new twttr.widget.TweetDialog({draggable:!0,template:{title:_("What’s happening?")},origin:"new-tweet-hotkey"})).open().focus(),scribble("dialog-new-tweet",{input:"keyboard"}),a.preventDefault())},closeDialogs:function(a){a.keyCode===b.constants.keyCodes.escape&&twttr.widget.Dialog.currentModal&&twttr.widget.Dialog.currentModal.options.closable&&(twttr.widget.Dialog.close(),a.stopPropagation(),a.preventDefault())},openKeyboardDialog:function(a){a.which===b.constants.charCodes.questionMark&&(a.preventDefault(),twttr.dialogs.keyboardShortcuts().toggle(),scribble("shortcut-dialog",{input:"keyboard"}))}},twttr.app.waitForSignal("init",function(){$(document).bind("keydown",twttr.shortcuts.openDialogs),$(document).bind("keydown",twttr.shortcuts.closeDialogs),$(document).bind("keypress","/",twttr.shortcuts.focusSearchBox),$(document).bind("keypress",twttr.shortcuts.openKeyboardDialog),twttr.shortcuts.delegateToApp(),twttr.shortcuts.initCombos(),twttr.shortcuts.initSecrets(),$("a.js-keyboard-shortcut-trigger").live("click",function(a){a.preventDefault(),twttr.dialogs.keyboardShortcuts().open()})}),a(twttr.shortcuts)})}),provide("stork",function(a){using("util").as(function(b){function c(a){return function(b){if(twttr.stork.isEnabled())return a("stork."+b)}}twttr.provide("twttr.stork",twttr.merge({init:function(){twttr.isT1&&twttr.decider.isAvailable("stork_guidance")&&(this.EXPIRE_TIME=12096e5,twttr.caches.User.set("stork.enabled",!0,this.EXPIRE_TIME),$.each(twttr.stork.STORKS,function(a,b){twttr.caches.User.set("stork."+b.counter,0,twttr.stork.EXPIRE_TIME)}))},STORKS:[{id:"expand_photo",counter:"expand_tweet",icon:"stork-help",matcher:function(a){return a.find(".js-sm-icon.sm-image").length>0},promptHtml:_("There’s a photo in this Tweet. Check it out."),explainHtml:_("<p>You’ll also find music, videos, and replies inside Tweets, so keep expanding them.</p>"),promptHighlight:".original-tweet .js-view-details",explainHighlight:"remove",explainOn:"expanded.tweet",dismissOn:"collapsed.tweet"},{id:"expand_video",counter:"expand_tweet",icon:"stork-help",matcher:function(a){return a.find(".js-sm-icon.sm-video").length>0},promptHtml:_("There’s a video in this Tweet. Check it out."),explainHtml:_("You’ll also find photos, music, and replies inside Tweets, so keep expanding them."),promptHighlight:".original-tweet .js-view-details",explainHighlight:"remove",explainOn:"expanded.tweet",dismissOn:"collapsed.tweet"},{id:"retweet_profile",counter:"retweet_profile",icon:"stork-help",matcher:function(a){return a.find("[data-retweet-id]").length>0},explainHtml:_("<p>A <strong>retweet</strong> is a Tweet that was shared by someone you’re following.</p> <p>The author of that Tweet may be someone you don’t follow, so it’s a great way to check out somebody new.</p>"),explainHighlight:".stream-item-footer .context .js-retweet-text",explainOn:"expanded.tweet",dismissOn:"profile_popup.tweet collapsed.tweet"},{id:"hashtag",counter:"hashtag",icon:"stork-help",matcher:function(a){return a.find(".original-tweet .js-tweet-text .twitter-hashtag").length>0},explainHtml:_("<p>The # symbol makes this word a <strong>hashtag</strong>. People add hashtags to their Tweets to give them topics.</p> <p>Click on it to find other Tweets with the same hashtag.</p>"),explainHighlight:".original-tweet .js-tweet-text .twitter-hashtag",explainOn:"expanded.tweet",dismissOn:{selector:".js-tweet-text .twitter-hashtag",event:"click"}},{id:"mention",counter:"mention",icon:"stork-help",matcher:function(a){return a.find(".original-tweet .js-tweet-text .twitter-atreply").length>0},explainHtml:_("<p>The @ symbol is used to <strong>mention</strong> another person by username. Mentions call attention to someone and can start a conversation.</p> <p>Click on it to see that user’s profile.</p>"),explainHighlight:".original-tweet .js-tweet-text .twitter-atreply",explainOn:"expanded.tweet",dismissOn:{selector:".js-tweet-text .twitter-atreply",event:"click"}}],getValue:c(function(a){return twttr.caches.User.get(a)||0}),incrValue:c(function(a){var b=twttr.caches.User.get(a)||0;twttr.caches.User.set(a,b+1,twttr.stork.EXPIRE_TIME)}),isEnabled:function(){return twttr.isT1&&twttr.caches.User.get("stork.enabled")},storkifyTweets:function(a){if(!this.isEnabled())return;var b=[];$.each(twttr.stork.STORKS,function(a,c){twttr.stork.getValue(c.counter)==0&&b.push(c)});var c=a.find(".js-stream-item").slice(0,10),d=!!c.find(".js-pip").length;if(d)return;c.each(function(a,c){var d=$(c),e=!1;if(d.attr("data-promoted")||d.find("[data-promoted]").length>0)return;$.each(b,function(a,b){if(b.matcher(d)){var c=new twttr.components.StorkPip(d,b);return e=!0,!1}});if(e)return!1})}},twttr.EventProvider)),a(twttr.stork)})}),provide("streams/ActivityStream",function(a){using().as(function(b){twttr.stream("twttr.streams.ActivityStream",function(a,b){twttr.streams.Stream.apply(this,arguments),this.page=0,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.registerTweetActionEvents(),this.registerUserActionEvents(),this.updateI18nDisplay(),this.initComponentEvents()}).subclassOf(twttr.streams.Stream).mixin(twttr.mixins.componentEvents,twttr.mixins.SinceMaxPagination,twttr.mixins.PollingStream,twttr.mixins.tweetActionable,twttr.mixins.i18nTweet,twttr.mixins.userActionable,twttr.mixins.activityStreamEvents,twttr.mixins.streamablePageWithInlineMedia).deciderKey(function(){return twttr.decider.isActivityEnabled()}).pollingDeciderKey(function(){return twttr.decider.isActivityEnabled()}).methods({PAGE_SIZE:20,timeouts:{ACTIVE:15e3,INACTIVE:9e4},itemViewClass:"ActivityItem",streamItemType:"activity",additionalStreamItemClass:function(a){return"js-activity js-activity-"+a.event},_idForItem:function(a,b){return b==="first"?a.maxPosition:a.minPosition},_pollShouldFetch:function(){var a=$(".stream-container").offset().top,b=$(window).scrollTop();return b<=a},streamItemId:function(a){return[a.minPosition,a.maxPosition,a.event,a.timestamp].join("_")},update:function(){},beforeSwitchingAway:function(){this.stopPeriodicFetcher()},afterFirstSwitchingTo:function(a){var b=this;this.startPeriodicFetcher(),this._loadedStreamOnce=!0,this.isLoadingMore(),this.fetcher(!0,function(c,d){c.render(),c.doneLoadingMore(),d!==twttr.streams.SUCCESS?(b._scribeResults("error",[],{status_code:502}),b._showError(d)):b.fetchUntilScreenIsFull(),a?a():$.noop}),twttr.isT1&&this.addInlineMediaIcons(this.$node)},afterSwitchingToAgain:function(a){this.fetcher(twttr.bind(this,function(b){var c=this.newItemsCount;this.newItemsCount>0&&this.showNewItems(this.newItemsCount),this.restartFetcher(),a?a():$.noop}))},showNewItems:function(a,b){this._showNewItems()},_showNewItems:function(a){var b=this.$streamItems();this.beforeShowNewItems(),this.newItemsCount>this.NEW_ITEMS_COUNT_MAX&&(b.empty(),this.items=this.items.slice(0,this.NEW_ITEMS_COUNT_CUTOFF),this.newItemsCount=this.NEW_ITEMS_COUNT_CUTOFF);var c=this.items.slice(0,this.newItemsCount),d=this._renderItems(c);!a&&this.newItemsCount>0&&this.onGotNewItems(c),a&&this.onGotInitialResults(this.items);var e=d.children();e.hide(),b.prepend(d),e.fadeIn(),this.newItemsCount=0,this.onShowNewItems(d),this.trigger("newItemsCountChanged",[0])},onShowNewItems:function(a){twttr.isT1&&this.addInlineMediaIcons(a),twttr.streams.Stream.prototype.onShowNewItems.apply(this,arguments),this.updateI18nDisplay(),this.trigger("onShowNewItems",a)},onShowOldItems:function(a){twttr.isT1&&this.addInlineMediaIcons(a),twttr.streams.Stream.prototype.onShowOldItems.apply(this,arguments),this.updateI18nDisplay(),this.trigger("onShowOldItems",a)},unshift:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));for(var b=0,c=a.length;b<c;++b)a[b].sync("for_stream",this.constructor.activityType);twttr.streams.Stream.prototype.unshift.call(this,a)},push:function(a){twttr.is.array(a)||(a=Array.prototype.slice.call(arguments));for(var b=0,c=a.length;b<c;++b)a[b].sync("for_stream",this.constructor.activityType);twttr.streams.Stream.prototype.push.call(this,a)},_getStreamErrorComponent:function(a){return a===twttr.streams.PROTECTED?new twttr.components.ProtectedUser({screen_name:this.params.screenName}):twttr.streams.Stream.prototype._getStreamErrorComponent.apply(this,arguments)},_scribeResults:function(a,b,c){var d=[],e=[];twttr.each(b,function(a){var b=[a.minPosition,a.maxPosition,a.event,a.timestamp].join("_");e.push(b),d.push(a.position||a.minPosition)});if(a=="error"||a=="initial"&&!d.length){var f={item_count:0,event_value:0,cursor_or_page:this._sinceId,referring_event:a};a=="error"&&c&&c.status_code&&(f.status_code=c.status_code),this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},f)}else a!="initial"&&this.scribbler.scribe({component:"stream",action:a},{item_count:d.length,cursor_or_page:this._sinceId});d.length&&this.scribbler.scribe({component:"stream",action:"results"},{item_ids:d,item_names:e,item_count:d.length,event_value:d.length,cursor_or_page:this._sinceId,referring_event:a})},showActivitySupplements:function(a){var b=a.closest(".stream-item");b.find(".hidden-supplement").removeClass("hidden-supplement").addClass("hidden-supplement-expanded"),b.find(".sub-stream-item-hidden").removeClass("sub-stream-item-hidden").addClass("sub-stream-item-showing"),b.find(".view-all-supplements").removeClass("show").addClass("hide")},hideActivitySupplements:function(a){var b=a.closest(".stream-item");b.find(".hidden-supplement-expanded").removeClass("hidden-supplement-expanded").addClass("hidden-supplement"),b.find(".sub-stream-item-showing").removeClass("sub-stream-item-showing").addClass("sub-stream-item-hidden"),b.find(".view-all-supplements").removeClass("hide").addClass("show")},oldShowActivitySupplements:function(a){var b=a.closest(".stream-item"),c=b.find(".sub-stream-item"),d=c.filter(".sub-stream-item-hidden"),e=b.find(".stream-item-activity"),f=c.length,g=d.length;a.removeClass("show").addClass("hide"),b.addClass("parent");var i;for(var j=f-g;j<f;++j)i=b.clone(),i.find(".view-all-supplements").remove(),i.addClass("expanded"),i.find(".activity-supplement > div").each(function(a,b){var c=$(b);a!=j?c.remove():c.removeClass("sub-stream-item-hidden")}),b.after(i)},oldHideActivitySupplements:function(a){var b=a.closest(".stream-item"),c=b.find(".stream-item-activity");b.removeClass("parent"),b.nextUntil(".stream-item:not('.expanded')").remove(),a.removeClass("hide").addClass("show")}}).click({".stream-item-activity .activity-count":function(a,b){var c=b.closest(".stream-item");return c.find(".sub-stream-item-hidden").removeClass("sub-stream-item-hidden"),c.find(".activity-secondary-supplement").show(),b.find("span").unwrap(),!1},".stream-item-activity-network .stream-item-activity-header":function(a,b){if(!twttr.isT1)return;var c=b.find(".view-all-supplements");c.get(0)&&(c.hasClass("show")?this.showActivitySupplements(c):this.hideActivitySupplements(c))},"div.js-activity .view-all-supplements":function(a,b){return twttr.isT1?b.hasClass("show")?this.showActivitySupplements(b):this.hideActivitySupplements(b):b.hasClass("show")?this.oldShowActivitySupplements(b):this.oldHideActivitySupplements(b),a.stopPropagation(),a.preventDefault(),!1},".js-activity .hidden-supplement":function(a,b){this.showActivitySupplements(b)}}),a(twttr.streams.ActivityStream)})}),provide("streams/ActivityByUserStream",function(a){using("_").as(function(b,_){twttr.stream("twttr.streams.ActivityByUserStream").subclassOf(twttr.streams.ActivityStream).statics({activityType:"profile_activity"}).methods({update:function(a){twttr.API.User.find(this.params.screenName).activity(a)},_setTitle:function(a){a(_("Activity by {{screen_name}}",{screen_name:this.params.screenName}))}}),a(twttr.streams.ActivityByUserStream)})}),provide("streams/ActivityByNetworkStream",function(a){using("streams/ActivityStream").as(function(b){twttr.stream("twttr.streams.ActivityByNetworkStream").subclassOf(b.streams.ActivityStream).statics({activityType:"activity"}).methods({afterFirstSwitchingTo:function(){b.streams.ActivityStream.prototype.afterFirstSwitchingTo.apply(this,arguments)},onShowNewItems:function(a){b.streams.ActivityStream.prototype.onShowNewItems.apply(this,arguments)},onShowOldItems:function(a){b.streams.ActivityStream.prototype.onShowOldItems.apply(this,arguments)},_getEmptyStreamHtml:function(){return _("Favorites, follows, retweets, and more by people you follow will appear here.")},update:function(a){twttr.currentUser.networkActivity(a)},_setTitle:function(a){twttr.isT1?a(_("Activity")):a(_("Favorites, follows, retweets, and more by people you follow"))}}),a(twttr.streams.ActivityByNetworkStream)})}),provide("streams/ActivityOfMeStream",function(a){using().as(function(b){twttr.stream("twttr.streams.ActivityOfMeStream").subclassOf(twttr.streams.ActivityStream).mixin(twttr.mixins.newStreamItemsBar).statics({activityType:"your_activity"}).methods({itemForRender:function(a){return a.isMention?a.targetObjects.get(0):a.isReply?a.targets.get(0):a},additionalStreamItemClass:function(a){var b=twttr.streams.ActivityStream.prototype.additionalStreamItemClass.apply(this,arguments);return twttr.isT1&&(a.isReply||a.isMention)&&(b+=" expanding-stream-item"),b},itemViewClass:function(a){return a.isMention||a.isReply?twttr.views.StreamTweet:twttr.views.ActivityItem},_getEmptyStreamHtml:function(){return _("@mentions, favorites, follows and more on you and your Tweets will appear here.")},_afterItemsRendered:function(a){twttr.helpers.ellipsify(a.find(".activity-truncated-tweet .tweet-row"))},onShowNewItems:function(a){twttr.streams.ActivityStream.prototype.onShowNewItems.apply(this,arguments),this.$find(".js-new-tweets-bar").remove(),this._afterItemsRendered(a)},onShowOldItems:function(a){twttr.streams.ActivityStream.prototype.onShowOldItems.apply(this,arguments),this._afterItemsRendered(a)},update:function(a){!twttr.isT1&&$.cookie("should_filter_mentions")&&(a.filter=["mention","reply"]),twttr.currentUser.inboundActivity(a)},newStreamItemsBarPhrase:function(a){return a==1?_("1 New interaction"):_("{{count}} New interactions",{count:a})},_setTitle:function(a){twttr.isT1?a(_("Interactions")):a((new twttr.views.ActivityOfMeStreamTitle({})).html())},showNewItems:function(a,b){b?this.showNewStreamItemsBar(a):this._showNewItems()},afterSwitchingToAgain:function(a){twttr.streams.ActivityStream.prototype.afterSwitchingToAgain.apply(this,arguments),this.afterSwitchingTo()},afterFirstSwitchingTo:function(a){twttr.streams.ActivityStream.prototype.afterFirstSwitchingTo.apply(this,arguments);var b=this;this._attachedTweetBarEvent||(this._attachedTweetBarEvent=!0,this.dom().delegate(".js-new-tweets-bar","click",function(){b._showNewItems()})),this.afterSwitchingTo()},afterSwitchingTo:function(){this.updateI18nDisplay();var a=this,b=this.$node.closest(".stream-manager").find("#show_mentions_only"),c=!!$.cookie("should_filter_mentions");b.attr("checked",c?"checked":null),setTimeout(function(){b.one("click",function(){return c=!c,$.cookie("should_filter_mentions",c||null,{expires:3650}),b.attr("checked",c?"checked":null),trackClient({component:"mentions_filter",action:c?"select":"deselect"}),a.trigger("reloadCurrentStream",[a.constructor]),!1})},0)}}),a(twttr.streams.ActivityOfMeStream)})}),provide("streams/AllSubscriptions",function(a){using("_","streams/ListStream").as(function(b,_){twttr.stream("twttr.streams.AllSubscriptions",function(a,b){twttr.streams.ListStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"allLists",_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!1))},_setHeaderButton:function(a,b){twttr.helpers.isCurrentUser(b.screenName)&&a(new twttr.views.CreateListButton)},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following any lists yet."):_("@{{screen_name}} isn't following any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"create follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"delete unfollow",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}),a()})}),provide("streams/AllSubscriptionsUser",function(a){using("_","streams/AllSubscriptions").as(function(b,_){twttr.stream("twttr.streams.AllSubscriptionsUser",function(a,b){twttr.streams.AllSubscriptions.apply(this,arguments)}).subclassOf(twttr.streams.AllSubscriptions).methods({_setViewToggler:function(a,b){a(new twttr.views.ProfileListsStreamViewToggler(!0,{screen_name:b.screenName}))}}),a()})}),provide("media",function(a){using().as(function(b){twttr.provide("twttr.media");var c={};twttr.aug(twttr.media,{match:function(a){if(twttr.is.nil(a))return;var b,d,e;return(d=c[a])?d.mediaType:($.each(twttr.media.types,function(b,f){if(!f.isEnabled())return!0;$.each(f.matchers,function(b,g){d=twttr.is.regex(g)?a.match(g):g(a);if(d)return c[a]={mediaType:f,matchLabel:b,match:RegExp.$1},e=f,!1});if(d)return!1}),e)},matchInstance:function(a,b){var d=this.match(a);if(d)return new d({url:a,matchLabel:c[a].matchLabel,slug:c[a].match,tweet:b})},expand:function(a,b){twttr.urlResolver.expand(a,function(a){b(a)})},mediaTypes:function(a,b){var c=[],d={},e=function(a,b){var e=twttr.media.match(b);if(e){d[b]=e;return}c.push(a)};$.each(a,e);if(c.length===0){b(d);return}twttr.media.expand(c,function(a){$.each(a,e),b(d)})},extractUrls:function(a){var b={};return a.entities?(a.entities.urls&&$.each(a.entities.urls,function(a,c){c.url&&(b[c.url]=c.expanded_url||c.url)}),twttr.media.extractMedia(a,b),b):($.each(twttr.txt.extractUrls(a.text),function(a,c){b[c]||(b[c]=c)}),b)},extractMedia:function(a,b){return a.entities&&a.entities.media&&$.each(a.entities.media,function(a,c){c.type&&c.type=="photo"&&c.display_url&&(b[c.display_url]=c.display_url)}),b},hasMedia:function(a){var b=a.entities&&a.entities.media&&a.entities.media.length,c=twttr.Cards.prototype.hasCards(a);return b||c},resolveImageUrl:function(a,b,c,d){var e=this;c=c||{};var f=twttr.media.matchInstance(a,c.tweet),g=c.error?c.error:$.noop;if(f&&f.getImageURL){if(c.filter&&c.filter(f)!==!0){g("your filter function filtered out this media");return}f.getImageURL(b,function(a){!twttr.is.nil(a)&&twttr.is.def(a)?c.success(a):g("getImageUrl did not return a resolvedURL")},d)}else g("url did not match any media types")},iconType:function(a,b){var d=new b({url:a,matchLabel:c[a].matchLabel,slug:c[a].match});return d.icon()},getViewMediaCookie:function(){var a=$.cookie("show_all_inline_media");return!!a},setViewMediaCookie:function(){$.cookie("show_all_inline_media",!0)},matchCache:c}),a(twttr.media)})}),provide("media/Iconifier",function(a){using("media").as(function(b){twttr.provide("twttr.media");var c=twttr.klass("twttr.media.Iconifier",function(a,b){var c=this,d=$(a);d.attr("media",!0),twttr.isT1&&c.iconifyGeo(d),twttr.decider.isAvailable("platform_enable_cards")&&(c.iconifyNativeMedia(d.find(".js-stream-tweet.has-native-media")),c.iconifyCards(d.find(".js-stream-tweet.has-cards:not(.iconified)"))),c.iconify(d.find(".js-stream-tweet a.twitter-timeline-link").get(),!0,b)});c.methods({expand:function(a,c){var d=[],e=[];$.each(a,function(a,b){d.push(b.href)}),b.media.expand(d,function(b){var d;$.each(a,function(a,c){d=b[c.href],d&&(c.setAttribute("data-ultimate-url",d),e.push(c))}),c(e)})},iconifyGeo:function(a){var b=this,c=a.find('div.js-stream-tweet[data-geo="true"] span.js-icon-container'),d=(new twttr.views.InlineMediaIcon({is_geo:!0})).html();c.each(function(){var a=$(this);a.append(d),b.updateHandleText(a,"geo")})},iconifyNativeMedia:function(a){var b=this;a.each(function(){var a=$(this),c=a.find("span.js-icon-container"),d="photo";b.updateHandleText(a,d),b.addSmallIcon(c,d,d),a.addClass("iconified")})},iconifyCards:function(a){var b=this;a.each(function(){var a=$(this),c=a.find("span.js-icon-container"),d=a.data("card-type");b.updateHandleText(a,d),b.addSmallIcon(c,d,d),a.addClass("iconified")})},preloadTwimgs:function(a){if(twttr.decider.isAvailable("phoenix_preload_twimgs")){var b=a.closest("div.js-stream-tweet").attr("data-item-id");twttr.API.Status.find(b,function(b){b.entities&&b.entities.media&&twttr.each(b.entities.media,function(b){var c=new Image;c.src=twttr.isSSL()?b.media_url_https:b.media_url,a.trigger("preloadedImage",[c])})})}},iconify:function(a,c,d){var e=this,f=[];$.each(a,function(a,d){var g=$(d),i=g.closest("div.js-stream-tweet"),j=d.getAttribute("data-ultimate-url")||d.getAttribute("data-expanded-url")||d.href,k=b.media.match(j);if(twttr.abdecider.choose("long_tweet_urls_248")==="long"){var l=j.replace(/^https?:\/\//,"");l.length>32&&(l=l.slice(0,29)+"..."),g.html(l)}if(k||!c){var m=0;switch(twttr.abdecider.choose("long_tweet_urls_2_259")){case"p25":m=.25;break;case"p50":m=.5;break;case"p75":m=.75;break;case"p100":m=1;break;case"control":default:m=0}if(m&&Math.random()<=m){var l=j.replace(/^https?:\/\//,"");l.length>32&&(l=l.slice(0,29)+"..."),g.attr("data-long_tweet_urls_2_259","expanded"),g.html(l)}}if(!k){f.push(d);return}var n=!!g.parents().filter(function(a,b){return $(b).hasClass("js-old-content")}).length;if(n)return;g.data("media-type",k);var o=b.media.iconType(j,k),p=i.find(".js-icon-container");p.find('[data-media-class="'+o+'"]').length===0&&(!g.closest(".js-stream-tweet:not(.iconified)").length||(e.addSmallIcon(p,o,k._name.toLowerCase()),e.updateHandleText(p,o)),k._name.toLowerCase()==="CopiedTwimg"&&e.preloadTwimgs(p))}),c&&f.length>0?this.expand(f,function(a){e.iconify(a,!1,d)}):d&&d()},addSmallIcon:function(a,b,c){(new twttr.views.InlineMediaIcon({icon:b,media_name:c,is_image:b==="photo",is_video:b==="video"||b==="player",is_audio:b==="song"||b==="album",is_summary:b==="summary",is_embed:b==="generic"||b==="software"||b==="tweet"})).render(a,"append")},updateHandleText:function(a,b){if(!twttr.decider.isExpando())return;var c=a.data("placename");c?(c=_("from {{placename}}",{placename:c}),c=[c,c]):c=[_("View location"),_("Hide location")];var d={photo:[_("View photo"),_("Hide photo")],video:[_("View video"),_("Hide video")],generic:[_("View media"),_("Hide media")],song:[_("View song"),_("Hide song")],album:[_("View album"),_("Hide album")],software:[_("View app"),_("Hide app")],tweet:[_("View tweet"),_("Hide tweet")],geo:c,player:[_("View media"),_("Hide media")],summary:[_("View summary"),_("Hide summary")]}[b],e="tweet_anatomy_hide_view_179",f=twttr.abdecider.choose(e);f!=="hide"&&(f==="always"?(d||(d=[_("View details"),_("Hide details")]),d&&a.show().parent().find("span.js-view-details").html(d[0]).end().find("span.js-hide-details").html(d[1])):d&&a.show().parent().find("span.js-view-details").html(d[0]).end().find("span.js-hide-details").html(d[1]))}}),a(c)})}),provide("media/Embedder",function(a){using("media").as(function(b){var c=twttr.klass("twttr.media.Embedder",function(a,b){this.tweet=a,this.options=b||{},this.options.preProcess=this.options.preProcess||function(a,b){b()},this.options.postProcess=this.options.postProcess||function(){},this.options.beforeRender=this.options.beforeRender||function(a,b){b({shouldRender:!0})},this.options.afterRender=this.options.afterRender||function(){}});c.mixin(twttr.mixins.tweetFlagging),c.methods({expand:function(a,c){var d=[];b.media.expand(a,function(a){$.each(a,function(a,b){d.push(b)}),c(d)})},render:function(a){var c=this,d=twttr.Cards.prototype;if(d.hasCardPhotoEntities(this.tweet))$(this.tweet.entities.media).each(function(a,b){c.embed(b.url,twttr.media.types.nativePhoto,b)});else if(d.hasPhotos(this.tweet))c.embed(this.tweet.cards.photos[0].url,twttr.media.types.photo,this.tweet.cards);else if(d.hasPlayers(this.tweet))c.embed(this.tweet.cards.players[0].url,twttr.media.types.player,this.tweet.cards);else if(d.hasSummaries(this.tweet))c.embed(this.tweet.cards.summaries[0].url,twttr.media.types.summary,this.tweet.cards);else{var e=b.media.extractUrls(this.tweet),f=this.embedMatchedAndReturnUnmatched(e);f.length&&this.expand(f,function(a){c.embedMatchedAndReturnUnmatched(a)})}a&&a()},embedMatchedAndReturnUnmatched:function(a){var c=this,d=[];return $.each(a,function(a,e){var f=b.media.match(e);f?c.embed(e,f):d.push(a)}),d},embedThumbnail:function(a){var c=this,d=b.media.match(a);if(!d)return;var e=new d({url:a,matchLabel:b.media.matchCache[a].matchLabel,slug:b.media.matchCache[a].match,size:this.options.size});e.process(function(){e.renderThumbnail(c.options.DOMContainer)})},embed:function(a,c,d){var e=this,f;d?f=new c({url:a,tweet:this.tweet,mediaEntity:d}):f=new c({url:a,matchLabel:b.media.matchCache[a].matchLabel,slug:b.media.matchCache[a].match,tweet:this.tweet}),e.options.preProcess(f,function(b){f.process(function(){e.options.postProcess(f,b||{}),e.options.beforeRender(f,function(b){var c=(new twttr.views.MediaTypeContainer({url:a,media_type:f.constructor._name,media_type_class:f.constructor._name.toLowerCase()})).$html(),d=c.data("url-id");e.options.DOMContainer.find('div[data-url-id="'+d+'"]').remove().end().append(c),f.render(c);if(!f.data||!f.data.is_card)e.tweetFlaggable(e.tweet)&&c.append(f.flaggable()),c.append(f.attribution());setTimeout(function(){c.closest(".tweet").delegate(".flaggable","click",function(a){e.flagLinkClicked(a,e.tweet)})},0),e.options.afterRender(f,b||{}),twttr.images.addPrivacyCover(c.find("a img"))})},b||{},d)})}}),a(c)})}),provide("media/mediaType",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.media.MediaType",function(a){this.url=a.url,this.matchLabel=a.matchLabel,this.slug=a.slug,this.tweet=a.tweet||null,this.options=a||{},this.location=new b.util.Location(this.url),this.data={}}),twttr.mediaType=function(a,c){var d="twttr.media.types."+a,e=twttr.klass(d,function(){twttr.media.MediaType.apply(this,arguments)});e.subclassOf(twttr.media.MediaType).statics({partnerName:a,domain:c.domain||"",attributionName:c.attributionName||a,skipAttributionInDiscovery:c.skipAttributionInDiscovery||!1,title:c.title||null,_icon:c.icon||"generic",deciderKey:c.deciderKey||null,screenName:c.screenName||null,aspectRatio:c.aspectRatio||b.constants.videos.fullscreen,height:c.height,ssl:c.ssl||!1,isEnabled:function(){return this.deciderKey?twttr.decider&&twttr.decider.isAvailable(this.deciderKey):!0},attributionTemplate:c.attributionTemplate||"MediaAttribution",validActions:$.extend({resizeFrame:!0},c.validActions),enableAPI:c.enableAPI||!1,addMatchers:function(a){for(var c in a)this.matchers[c]=b.util.regexSupplant(a[c])},flagActionTemplate:c.flagActionTemplate||"<span class='flag-container'><a href='#' class='flaggable' alternateText='"+_("Un-flag this media")+"'>"+_("Flag this media")+"</a></span>"}).methods({process:c.process||function(){},content:c.content||function(){},getImageURL:c.getImageURL||function(){},partnerName:a,metadata:function(a){if(twttr.is.fn(c.metadata))return c.metadata.apply(this,[a])},calcHeight:function(a,b){b||(b=this.constructor.aspectRatio);var c=parseInt(b.split(":")[0],10),d=parseInt(b.split(":")[1],10),e=30;return Math.round(a*(d/c))+e},resizeHtmlEmbed:function(a,b,c,d){if(a&&b&&b.maxwidth&&b.maxwidth<c){var e=Math.round(b.maxwidth*d/c);a=a.replace(new RegExp('width=("?)'+c+"(?=\\D|$)","g"),"width=$1"+b.maxwidth).replace(new RegExp('height=("?)'+d+"(?=\\D|$)","g"),"height=$1"+e)}return a},useOpaqueModeForFlash:function(a){return a.replace(/(<\/object>)/,'<param name="wmode" value="opaque">$1').replace(/(<embed .*?)(\/?>)/,'$1 wmode="opaque"$2')},icon:function(){return twttr.is.fn(this.constructor._icon)?this.constructor._icon.call(this,this.url):this.constructor._icon},flaggable:function(){return!twttr.loggedIn||!c.flaggable||!twttr.decider.isAvailable("media_flagging")?!1:$(Mustache.to_html(this.constructor.flagActionTemplate))},attribution:function(){return c.attribution&&twttr.is.fn(c.attribution)?c.attribution.call(this):(new twttr.views[this.constructor.attributionTemplate]({url:this.domainUrl(),icon_url:this.iconUrl(),title:this.data.attribution_title||this.constructor.title||this.constructor._name,media_type:this.constructor._name})).html()},iconUrl:function(){return this.data.attribution_icon||twttr.assets.path("/images/partner-favicons/"+this.constructor._name+".png")},domainUrl:function(){return this.data.attribution_url||this.constructor.domain},attributionName:function(){return this.constructor.attributionName},hasAttributionInDiscovery:function(){return!this.constructor.skipAttributionInDiscovery},render:function(a){if(c.render&&twttr.is.fn(c.render))return c.render.call(this,a);var b=this.content();if($.browser.msie&&$.browser.version<=8)$(a).html(b);else{b="<div class='tweet-media'>"+b+"</div>";var d=new twttr.platform.SandboxedApplication(this.constructor,{tweet:this.tweet,originalUrl:this.url}),e={DOMContainer:a,htmlContent:b,height:this.data.height,width:this.data.width,security:this.constructor.ssl};d.run(e)}},content:function(){return c.content&&twttr.is.fn(c.content)?c.content.call(this):""},renderThumbnail:function(a){var b=this;this.metadata(function(c){c.alt=b.constructor.title;var d=Mustache.to_html('<img src="{{image}}" alt="{{alt}}" title="{{title}}" />',c);$(a).append(d)})},renderIframe:function(a,b){t="<iframe src='{{url}}' width='{{width}}' height='{{height}}'></iframe>",$(a).append(Mustache.to_html(t,$.extend({url:b},this.data)))},renderEmbeddedApplication:function(a,b){var c=new twttr.platform.EmbeddedApplication(this.constructor,{tweet:this.tweet,originalUrl:this.url}),d={DOMContainer:a,height:this.data.height,width:this.data.width};c.run(b,d)}}),e.matchers=c.matchers||{};for(var f in e.matchers)(function(){var a=f;e.matchers[a]=b.util.regexSupplant(e.matchers[a])})();return e},a(twttr.mediaType)})}),provide("media/expandodo",function(a){using("util","constants").as(function(b){function e(a){return a.expanded_url.replace(/^https?:\/\//,"//")+"/large"}function f(a){a&&(a.profile_path="/"+a.screen_name)}function g(a){var b=["players","summaries","photos"],c,d,e,g;for(c=0;c<b.length;c++){g=a[b[c]];if(g&&g.length)for(d=0;d<g.length;d++)e=g[d],f(e.author_user),f(e.site_user)}}function i(a,b,c){this.data=c,this.data.is_card=!0,g(this.data),a()}function j(a,b,c){var d=this;c&&c.source_status_id_str?twttr.API.Status.find(c.source_status_id_str,function(e){k(c,e.user,function(c){i.apply(d,[a,b,c])})}):k(c,!1,function(c){i.apply(d,[a,b,c])})}function k(a,b,f){var g=l(a.sizes.medium.w,a.sizes.medium.h,d,c),i={photos:[{url:e(a),title:!1,description:!1,images:{web:{image_url:a.media_url_https+":medium",width:g.width,height:g.height}},twimg_attribution:!0,permalink_continuity:!0}]};b&&(i.photos[0].author_user={id_str:b.id,screen_name:b.screenName,name:b.name,profile_image_url:b.profileImageUrl,profile_image_url_https:b.profileImageUrlHttps}),f(i)}function l(a,b,c,d){return b>=a&&b>d?(a*=d/b,b=d):a>b&&a>c&&(b*=c/a,a=c),{width:Math.ceil(a),height:Math.ceil(b)}}function m(a){$(a).append(Mustache.to_html(twttr.templates.cards_base,this.data,twttr.templates))}var c=375,d=435;twttr.mediaType("photo",{icon:"photo",process:i,render:m}),twttr.mediaType("nativePhoto",{icon:"photo",attribute:!1,process:j,render:m}),twttr.mediaType("summary",{icon:"summary",process:i,render:m}),twttr.mediaType("player",{icon:"player",process:i,render:m}),a()})}),provide("platform/BaseApplication",function(a){using("_").as(function(b,_){(function(){function a(a){var b=twttr.platform.runningApplications[a];b&&(b.stop(),delete twttr.platform.runningApplication[a])}twttr.platform||(twttr.platform={}),twttr.platform.application_types={embedded:"embedded"},twttr.platform.runningApplications={};var b=50,c=36e5,d={trends:!0,"geo/nearby_places":!0,"statuses/retweets/:id":!0,"followers/ids":!0,"geo/id/:id":!0,"geo/search":!0,"lists/statuses":!0,"users/suggestions":!0,"friendships/show":!0,"statuses/show":!0,"trends/current":!0,"geo/similar_places":!0,"statuses/user_timeline":!0,"friends/ids":!0,"trends/:woeid":!0,"statuses/followers":!0,"statuses/friends":!0,"statuses/public_timeline":!0,"users/show":!0},e={"users/search":!0,"users/typeahead":!0,":user/lists/subscriptions":!0,"statuses/network_timeline":!0,"statuses/friends_timeline":!0,":user/:list_id/members":!0,":user/lists/memberships":!0,"statuses/:id/retweeted_by/ids":!0,":user/lists":!0,"statuses/mentions":!0,"geo/reverse_geocode":!0,"friendships/exists":!0,":user/:list_id/members/:id":!0,search:!0,"statuses/retweeted_to_me":!0,"statuses/retweets_of_me":!0,"statuses/retweeted_by_me":!0,":user/:list_id/subscribers":!0,":user/:list_id/subscribers/:id":!0,"favorites/:id":!0,"statuses/:id/retweeted_by":!0,"account/verify_credentials":!0,"users/lookup":!0,"trends/weekly":!0,"trends/daily":!0,"statuses/home_timeline":!0,"lists/show":!0};twttr.platform.events={resize:function(){var a=this;$(window).bind("resize."+this.config._name,function(){var b=$("div.details-pane.opened");b.length!==0&&a.socket.trigger("resize",b.width())})}},twttr.platform.interfaceActions={openTab:function(a){window.open(a.url,"_blank")},openProfile:function(a,b){twttr.app.currentPage().send("loadUserInDetailsPane",[this.config.screenName,{}],function(){a(!0)},function(){b("Profile pane not available or no registered screen name")})},tweet:function(a,b,c){(new twttr.widget.TweetDialog({defaultContent:a,draggable:!0,template:{title:_("What’s happening?")},origin:"new-tweet-titlebar-button"})).open().focus()},notify:function(a,b){twttr.Notifications.notify(a.type,a.subject,a.message,a.icon,function(){b(a)})},resizeFrame:function(a){this.DOMContainer.firstChild.style.height=a+"px"},bind:function(a,b,c){var d=twttr.platform.events[a];d?(d.call(this),b(!0)):c("You tried to bind to an event that is not bindable")},unbind:function(a,b,c){var d=twttr.platform.events[a];d?($(window).unbind(a+"."+this.config._name),b(!0)):c("You tried to unbind from an event that is not bindable")}};var f=0,g=twttr.klass("twttr.platform.BaseApplication",function(a){this.limiter=0,this.interval=(new Date).getTime(),this.socket=null,this.config=a,this.minimized=!1,this.id=++f});g.methods({run:function(a,b){var c=this;this.options=b||{},this.url=a;var d=b.DOMContainer||$(document.body);d instanceof jQuery&&(this.DOMContainer=d[0]),this.socket=new easyXDM.Rpc({remote:this.url,container:this.DOMContainer,props:{width:b.width||"100%",height:b.height||0},onReady:function(){twttr.platform.runningApplications[c.id]=c,c.limiter=0,c.interval=(new Date).getTime();var a=c.initialData();c.socket.initialize(a),b.loaded&&b.loaded.call(c)}},{local:{api:twttr.bind(this,this.api),ui:twttr.bind(this,this.ui),log:twttr.bind(this,this.log)},remote:{trigger:{},initialize:{}}})},initialData:function(){var a={},b=$("div.details-pane.opened");return b.length!==0&&(a.size=b.width()),twttr.currentUser&&twttr.currentUser.profileLinkColor&&(a.styles=[["a",["color","#"+twttr.currentUser.profileLinkColor]]]),a},stop:function(){this.socket.destroy()},maximize:function(){this.minimized&&(this.minimized=!1,this.run(this.url,this.options))},minimize:function(){this.stop(),this.attribution=$(this.DOMContainer).find(".media-attribution").detach(),this.minimized=!0},isRateLimited:function(){var a=(new Date).getTime();return a-this.interval>c?(this.limiter=0,this.interval=a,!1):this.limiter>=b},isPermitted:function(){return!0},isProtectedEndpoint:function(a){return twttr.currentUser["protected"]&&!this.isPermitted(this.socket.origin)?!0:!d[a]&&!e[a]?!0:!1},log:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b=b||{},c=c||$.noop,d=d||$.noop;if(this.minimized)return d("You cannot log information while your application is minimized");scribble("partner_event",{partner:this.config._name,origin:this.socket.origin,eventName:a,data:b}),c(!0)},api:function(a,b,c,d){d=d||$.noop;if(this.minimized)return d("You cannot access the API while your application is minimized");if(!this.config.enableAPI)return d("You do not have API Access");if(!!this.isRateLimited())return d("You have been rate-limited.");this.limiter++;if(this.isProtectedEndpoint(a))return d("You do not have access to that endpoint.");twttr.is.fn(b)&&(d=c,c=b,b=[]),twttr.API.util.makeRemoteRequest(a,b,{success:function(a){c&&c(a)},error:function(a){d&&d(a)}})},ui:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b=b||{},c=c||$.noop,d=d||$.noop;if(!this.config.validActions[a])return d("This is not a valid UI action.");if(this.minimized)return d("You cannot access interface components while your application is minimized");scribble("partner_ui_action",{partner:this.config._name,origin:this.socket.origin,actionName:a,data:b}),twttr.platform.interfaceActions[a].apply(this,[b,c,d])}})})(),a(twttr.platform.BaseApplication)})}),provide("platform/EmbeddedApplication",function(a){using().as(function(b){var c=twttr.klass("twttr.platform.EmbeddedApplication",function(a,b){b=b||{},twttr.platform.BaseApplication.apply(this,arguments),this.tweet=b.tweet||null,this.originalUrl=b.originalUrl||null,this.applicationType=twttr.platform.application_types.embedded});c.subclassOf(twttr.platform.BaseApplication),c.methods({initialData:function(){var a=twttr.platform.BaseApplication.prototype.initialData.call(this);return a},log:function(a,b,c,d){twttr.is.fn(b)&&(d=c,c=b,b={}),b.original_url=this.originalUrl,twttr.platform.BaseApplication.prototype.log.apply(this,arguments)}}),a(c)})}),provide("platform/SandboxedApplication",function(a){using().as(function(b){twttr.klass("twttr.platform.SandboxedApplication",function(a,b){twttr.platform.EmbeddedApplication.apply(this,arguments)}).subclassOf(twttr.platform.EmbeddedApplication).statics({remoteUrl:function(a){var b=twttr.domains.local.match(/localhost/),c="/details_pane_content_sandbox.html";return b?"http://localhost:3000"+c:twttr.assets.path(c,{isSSL:twttr.isSSL()&&a})}}).methods({run:function(a){twttr.platform.EmbeddedApplication.prototype.run.call(this,twttr.platform.SandboxedApplication.remoteUrl($.browser.msie||a.security),a)},initialData:function(){var a=twttr.platform.EmbeddedApplication.prototype.initialData.call(this);return twttr.currentUser&&twttr.currentUser.profileLinkColor&&a.styles.push([".sandboxed-media a",["color","#"+twttr.currentUser.profileLinkColor]]),$.extend({},a,{htmlContent:this.options.htmlContent})}}),a(twttr.platform.SandboxedApplication)})}),provide("sandboxedAjax",function(a){using().as(function(b){twttr.klass("twttr.AjaxSandboxer",function(){this._nextRequestId=0,this._requests={},this._sockets=[null,null]}).statics({TIMEOUT:5e3}).methods({send:function(a){a.timeout||(a.timeout=twttr.AjaxSandboxer.TIMEOUT),this._useSandbox()?this._sendWithSandbox(a):this._sendWithoutSandbox(a)},_useSandbox:function(){return twttr.isSSL()},_sendWithSandbox:function(a){security=!!(a.url.match(/^https:/)||twttr.isSSL()&&a.url.match(/^\/\//)),$.browser.msie&&(security=1),index=security?0:1,this._sockets[index]||(this._sockets[index]=this._generateSocket(this._remoteUrl(security)));var b=this._generateSandboxRequest(a);this._sockets[index].postMessage(JSON.stringify(b))},_sendWithoutSandbox:function(a){$.ajax(a)},_generateSandboxRequest:function(a){var b=++this._nextRequestId;a=twttr.merge({},a);var c={id:b,callbacks:{success:a.success,error:a.error,before:a.before,complete:a.complete},request:{id:b,data:a}};return delete a.success,delete a.error,delete a.complete,delete a.before,this._requests[b]=c,c.request},_remoteUrl:function(a){var b="/jsonp_sandbox.html";return twttr.domains.local.match(/localhost/)?"http://localhost:3000"+b:twttr.assets.path(b,{isSSL:a})},_generateSocket:function(a){var b=this;return new easyXDM.Socket({remote:a,onMessage:function(a,c){var d=JSON.parse(a),e=b._requests[d.id];e&&e.callbacks[d.callbackName]&&e.callbacks[d.callbackName].apply(null,d.callbackArgs),d.callbackName==="complete"&&delete b._requests[d.id]}})}}),twttr.sandboxedAjax=new twttr.AjaxSandboxer,a(twttr.sandboxedAjax)})}),provide("media/types",function(a){using("util","constants").as(function(b){function c(a){return twttr.isSSL()?a.replace(/^http:/,"https:"):a}twttr.provide("twttr.regexps",{protocol:/(?:https?\:\/\/)/,protocol_no_ssl:/(?:http\:\/\/)/,optional_protocol:/(?:(?:https?\:\/\/)?(?:www\.)?)/,protocol_subdomain:/(?:(?:https?\:\/\/)?(?:[\w\-]+\.))/,optional_protocol_subdomain:/(?:(?:https?\:\/\/)?(?:[\w\-]+\.)?)/,wildcard:/[a-zA-Z0-9_#\.\-\?\&\=\/]+/,itunes_protocol:/(?:https?\:\/\/)?(?:[a-z]\.)?itunes\.apple\.com(?:\/[a-z][a-z])?/}),twttr.mediaType("Youtube",{title:"YouTube",icon:"video",domain:"//www.youtube.com",ssl:!0,flaggable:!0,height:359,matchers:{tinyUrl:/^#{optional_protocol}?youtu\.be\/([a-zA-Z0-9_\-\?\&\=\/]+)/i,standardUrl:/^#{optional_protocol}?youtube\.com\/watch[a-zA-Z0-9_\-\?\&\=\/]+/i},process:function(a,b){this.data.width=b&&b.maxwidth||390,this.data.height=b&&b.maxwidth?this.calcHeight(b.maxwidth):307,this.url.match(this.constructor.matchers.tinyUrl)?(this.data.id=this.location.pathname.replace(/\//g,""),a()):this.location.search.match(/[\?\&]v\=([\w\-]+)(?:\&|$)/)&&(this.data.id=this.location.query("v"),a())},metadata:function(a){var c={image:b.util.supplant("//img.youtube.com/vi/{id}/0.jpg",this.data)};a(c)},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},render:function(a){this.renderIframe(a,twttr.proto+"://www.youtube.com/embed/"+this.data.id+"?wmode=opaque")}}),twttr.mediaType("Twitter",{icon:"tweet",domain:"//twitter.com",ssl:!0,skipAttributionInDiscovery:!0,matchers:{permalink:/^#{optional_protocol}?twitter\.com\/(?:#!?\/)?\w{1,20}\/status\/(\d+)[\/]?$/i},process:function(a){var b=this;twttr.API.Status.find(this.slug,function(c){b.data.tweet=c,twttr.isT1?using("//platform.twitter.com/js/vendor/twt/dist/twt.all.min.js","css!//platform.twitter.com/twt/twt.css",function(){if(!window.twt)return;for(var c=twttr.languages.length;c--;)if(twttr.languages[c].current){twt.settings.lang=twttr.languages[c].code;break}var d=twt.tweet(b.data.tweet.attributes);b.tweetHtml=d.html(),a()}).load():a()})},render:function(a){if(!twttr.isT1)$(a).append((new twttr.views.EmbeddedTweet(this.data.tweet)).html());else{var b=this;$(a).append(Mustache.to_html("<div class='tweet-embed'>{{{tweet}}}</div>",{tweet:b.tweetHtml}))}}}),twttr.mediaType("CopiedTwimg",{icon:"photo",domain:"//twitter.com",ssl:!0,flaggable:!0,deciderKey:"photo_copy_paste_inception",skipAttributionInDiscovery:!0,attributionTemplate:"PhotobucketAttribution",matchers:{media:/^#{optional_protocol}?twitter\.com\/(?:#!?\/)?\w{1,20}\/status\/(\d+)\/photo\/\d*$/i},getImageURL:function(){twttr.media.types.Twimg.prototype.getImageURL.apply(this,arguments)},metadata:function(){twttr.media.types.Twimg.prototype.metadata.apply(this,arguments)},process:function(a){var b=this;twttr.API.Status.find(this.slug,function(c){b.data.tweet=c,c.entities&&c.entities.media&&$.each(c.entities.media,function(a,c){if(c.expanded_url.indexOf(b.slug)>-1)return b.foundMedia=c,!1});var d;twttr.isSSL()?d=b.foundMedia.media_url_https:d=b.foundMedia.media_url,b.data.src=d,b.data.url=b.foundMedia.expanded_url,b.data.name=b.constructor._name,a()})},render:function(a){var b=this.data.tweet;if(!this.foundMedia)return;var c={name:"copied-twimg",time_ago:twttr.helpers.timeAgo(twttr.helpers.parseDateString(b.createdAt),!0),url:this.foundMedia.url,media_url:twttr.isSSL()?this.foundMedia.media_url_https:this.foundMedia.media_url,screen_name:b.user.screenName},d=$(a);d.append((new twttr.views.CopiedTwimg(c)).html()),d.find(".inline-media-image img").bind("load",function(){$(this).closest(".media-instance-container").width(this.width)}),twttr.app.isOnPage("permalink")&&d.find(".user-profile-link").click(function(){return twttr.router.routeTo(twttr.router.profilePath({screen_name:$(this).data("screen-name")})),!1})}}),twttr.mediaType("Twimg",{icon:"photo",domain:"//twitter.com",attributionName:"Twitter",flaggable:!0,ssl:!0,skipAttributionInDiscovery:!0,matchers:{twimg:/^#{optional_protocol}?p\.twimg\.com\/[a-zA-Z0-9_-]+\.(?:jpg|png|gif)$/i,media:/^#{optional_protocol}?pic\.twitter\.com\/[a-zA-Z0-9]+$/i},attributionTemplate:"PhotobucketAttribution",getImageURL:function(a,c){var d=this;this.process(function(){d.metadata(function(d){if(d&&d.image){var e=d.image;a==b.constants.imageSizes.small?e+=":thumb":a==b.constants.imageSizes.large&&(e+=":large"),c(e)}else c(null)})})},metadata:function(a){a({image:this.data.src,name:this.data.name,expandedUrl:this.data.url})},process:function(a,b){var d=twttr.media.types.Twimg.matchers,e=this,f,g;if(this.url.match(d.twimg))this.data.src=c(this.url),this.data.url=c(this.url),this.data.displayUrl=this.url,this.data.name=this.constructor._name;else{if(!this.tweet||!this.tweet.entities.media){a();return}var i=$.map(this.tweet.entities.media,function(a){return a.display_url});if($.inArray(this.url,i)<0){a();return}$.each(this.tweet.entities.media,function(){if(this.display_url==e.url){g=this;return}});if(!g){a();return}twttr.isSSL()?f=g.media_url_https:f=g.media_url,this.data.src=f,this.data.url=b&&b.linkLarge===!0?g.expanded_url+"/large":g.url,this.data.displayUrl=g.display_url,this.data.name=this.constructor._name}a()},render:function(a){var b='<div class="twimg">                <a class="inline-media-image" data-inline-type="{{name}}" href="{{url}}" target="_blank" title="{{displayUrl}}">                  <img src="{{src}}" alt="{{displayUrl}}"/>                 </a>              </div>';$(a).append(Mustache.to_html(b,this.data))}}),twttr.mediaType("Ustream",{icon:"video",domain:"http://ustream.tv",ssl:!1,flaggable:!0,matchers:{recorded:/^#{optional_protocol}?ustream\.tv\/(recorded\/(?:\d+))/i,channel:/^#{optional_protocol}?ustream\.tv\/(channel\/(?:[\w\-]+)\/?)/i},metadata:function(a){var b=null;this.data&&this.data.imageUrl&&this.data.imageUrl.small&&(b=this.data.imageUrl.small),a({title:this.data.title,description:this.data.description?twttr.helpers.truncate(this.data.description,255,"..."):"",image:b})},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){b(a.image)})})},process:function(a,b){var c=this;this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),(this.slug.match(this.constructor.re.channel)||this.slug.match(this.constructor.re.video))&&twttr.sandboxedAjax.send({url:"http://api.ustream.tv/json/channel/"+RegExp.$1+"/getInfo",dataType:"jsonp",data:{key:this.constructor.API_KEY,maxwidth:this.data.width},success:function(b){b!==null&&(c.data.type="channel",c.data.embed=c.useOpaqueModeForFlash(b.embedTag),c.data.imageUrl=b.imageUrl),a()}})},content:function(){return this.data.type==="channel"?this.data.embed:Mustache.to_html(this.constructor.templates[this.data.type],this.data)}}).statics({API_KEY:"12ab548e85128e0d3182ba3a346c3428",re:{video:/^recorded\/(\d+)/,channel:/^channel\/([\w\-]+)\/?/},templates:{video:'        <object width="{{width}}" height="{{height}}">          <param name="flashvars" value="autoplay=false&amp;vid={{videoId}}&amp;"/>          <param name="allowfullscreen" value="true"/>          <param name="allowscriptaccess" value="always"/>          <param name="wmode" value="opaque"/>          <param name="src" value="http://www.ustream.tv/flash/video/{{videoId}}"/>          <embed            flashvars="loc=%2F&amp;autoplay=false&amp;vid={{videoId}}&amp;"            width="{{width}}"            height="{{height}}"            allowfullscreen="true"            allowscriptaccess="always"            wmode="opaque"            src="http://www.ustream.tv/flash/video/{{videoId}}"            type="application/x-shockwave-flash" />        </object>'}}),twttr.mediaType("Vevo",{icon:"video",domain:"http://vevo.com",ssl:!1,flaggable:!0,matchers:{standardVideo:/^#{optional_protocol}?vevo\.com\/watch\/[\w-]+\/[\w-]+\/([a-zA-Z0-9_]+)/i},process:function(a,b){this.data.id=this.slug,this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),a()},content:function(){var a='<object width="{{width}}" height="{{height}}">                <param name="movie" value="http://www.vevo.com/VideoPlayer/Embedded?videoId={{id}}&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961&playerType=embedded"/>                <param name="bgcolor" value="#000000"/>                <param name="allowFullScreen" value="true"/>                <param name="allowScriptAccess" value="always"/>                <param name="wmode" value="opaque"/>                <embed                  src="http://www.vevo.com/VideoPlayer/Embedded?videoId={{id}}&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961&playerType=embedded"                   type="application/x-shockwave-flash"                   allowfullscreen="true"                   allowscriptaccess="always"                   wmode="opaque"                   width="{{width}}"                   height="{{height}}"                   bgcolor="#000000" />              </object>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Flickr",{icon:"photo",favicon:twttr.isSSL()?"https://secure.flickr.com/favicon.ico":"http://www.flickr.com/favicon.ico",domain:twttr.isSSL()?"https://secure.flickr.com":"http://www.flickr.com",deciderKey:"phoenix_flickr_details",flaggable:!0,matchers:{profile:/^#{optional_protocol}?flickr\.com\/(?:photos|people)\/([\w\@\-]+)\/?$/i,photo:/^#{optional_protocol}?flickr\.com\/photos\/[\w\@\-]+\/(\d+)\/?/i,sets:/^#{optional_protocol}?flickr\.com\/photos\/(?:[\w\@\-]+)\/sets\/(\d+)\/?(?:show\/?)?$/i,galleries:/^#{optional_protocol}?flickr\.com\/photos\/([\w\@\-]+)\/galleries\/(\d+)\/?$/i,pool:/^#{optional_protocol}?flickr\.com\/groups\/([\w\@\-]+)\/?(?:pool\/|discuss\/)?$/i},ssl:!0,metadata:function(a){var b;this.data.photos&&this.data.photos.length>=1?(b=this.data.photos[0],a({image:Mustache.to_html("//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}.jpg",b),title:this.data.title,description:this.data.description,author:{name:this.data.author_name,url:this.data.author_url}})):a(null)},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},process:function(a,b){this.data.width=b&&b.maxwidth||390,this.data.height=this.calcHeight(this.data.width),this.data.domain=this.constructor.domain;var c=twttr.media.types.Flickr.matchers,d=this,e=this.url;if(e.match(c.photo)){var f=RegExp.$1;this.makeRequest({data:{method:"flickr.photos.getInfo",photo_id:f},success:function(b){b.photo&&(d.data.author_name=b.photo.owner.realname,d.data.author_url=d.constructor.domain+"/photos/"+b.photo.owner.nsid,b.photo.media&&b.photo.media=="video"&&(d.data.isVideo=!0),d.data.photos=[b.photo]),a()}})}else e.match(c.sets)?this._makeSetRequest(RegExp.$1,a):e.match(c.profile)?this.lookUpUserPhotos(RegExp.$1,this.slug,a):e.match(c.pool)?this._makeGroupRequestByName(RegExp.$1,a):e.match(c.galleries)&&this.makeRequest({data:{method:"flickr.urls.lookupGallery",url:"flickr.com/photos/"+RegExp.$1+"/galleries/"+RegExp.$2},success:function(b){var c=b.gallery.id;d.makeRequest({data:{method:"flickr.galleries.getPhotos",gallery_id:c},success:function(b){d.data.photos=b.photos.photo.slice(0,16),d.data.isGallery=1,a()}})}});return},content:function(){var a="",b=twttr.media.types.Flickr;if(this.data.photos.length==1)if(this.data.isVideo){var c=this.data.photos[0];c.domain=this.data.domain,a+=Mustache.to_html(b.templates.video,c)}else this.data.photos[0].href=this.data.photos[0].urls.url[0]._content,a+=Mustache.to_html(b.templates.photo,this.data.photos[0]);else{a='<div class="flickr-group">'+this.createThumbList(this.data.photos)+"</div>";if(this.data.isGallery)return a;var d;this.data.set_id?d=b.photoSetFlashVars:this.data.group_id?d=b.photoGroupFlashVars:d=b.photoUserFlashVars,d=twttr.merge({},b.defaultSlideshowFlashVars,d,!0);var e=[];jQuery.each(d,function(a,b){e.push(a+"="+b)}),e=Mustache.to_html(e.join("&"),this.data),a+=Mustache.to_html(b.templates.slideshow,{flashvars:e,domain:this.data.domain})}return a}}).statics({API_KEY:"2a56884b56a00758525eaa2fee16a798",SECRET:"7c794fe3256175b6",REST_DOMAIN:"//widgets.platform.twitter.com",defaultSlideshowFlashVars:{lang:"en-us",offsite:!0,minH:100,minW:100},templates:{video:'<object width="{{width}}" height="{{height}}"                   type="application/x-shockwave-flash"                   data="{{domain}}/apps/video/stewart.swf?v=71377"                   classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">                   <param name="flashvars" value="intl_lang=en-us&photo_secret={{secret}}&photo_id={{id}}"/>                   <param name="movie" value="{{domain}}/apps/video/stewart.swf?v=71377"/>                   <param name="bgcolor" value="#000000"/>                   <param name="allowFullScreen" value="true"/>                   <param name="wmode" value="opaque"/>                   <embed                     type="application/x-shockwave-flash"                     src="{{domain}}/apps/video/stewart.swf?v=71377"                     bgcolor="#000000"                     allowfullscreen="true"                     wmode="opaque"                     flashvars="intl_lang=en-us&photo_secret={{secret}}&photo_id={{id}}"                     height="{{height}}"                     width="{{width}}" />                 </object>',photo:'<div class="flickr-photo">                   <a href="{{href}}" target="_blank">                     <img src="//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}.jpg"/>                   </a>                 </div>',set:'<a href="{{href}}" style="text-decoration:none;" target="_blank">                <img class="flickr-thumb" src="//farm{{farm}}.static.flickr.com/{{server}}/{{id}}_{{secret}}_s.jpg"/>              </a>',slideshow:'<embed type="application/x-shockwave-flash"                             src="{{domain}}/apps/slideshow/show.swf?v=107931"                             width="{{width}}"                             height="{{height}}"                             id="slideShowMovie"                             bgcolor="#000000"                             quality="high"                             allowfullscreen="true"                             allowscriptaccess="always"                             wmode="opaque"                             flashvars={{flashvars}} />'},photoUserFlashVars:{user_id:"{{user_id}}",page_show_back_url:"/photos/{{user_name}}/",page_show_url:"/photos/{{user_name}}/show/"},photoGroupFlashVars:{group_id:"{{group_id}}",page_show_url:"/groups/{{group_id}}/pool/show/",page_show_back_url:"/groups/{{group_id}}/pool/"},photoSetFlashVars:{set_id:"{{set_id}}",page_show_back_url:"/photos/{{user_name}}/sets/{{set_id}}/",page_show_url:"/photos/{{user_name}}/sets/{{set_id}}/show/"}}).methods({base58:function(a){var b="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",c=a.length,d=0,e=1;for(var f=c-1;f>=0;f--)d+=e*b.indexOf(a[f]),e*=b.length;return d},lookUpUserPhotos:function(a,b,c){var d=this;this.makeRequest({data:{method:"flickr.urls.lookupUser",url:"flickr.com/photos/"+a},success:function(b){if(b.stat==="fail"){c();return}var e=b.user.id,f=b.user.username._content;d.makeRequest({data:{method:"flickr.people.getPublicPhotos",user_id:e},success:function(b){d.data.photos=b.photos.photo.slice(0,16),d.data.user_id=e,d.data.user_name=a,d.data.author_name=f,d.data.author_url=d.constructor.domain+"/photos/"+e,c()}})}})},createThumbList:function(a){var b="http://www.flickr.com/photos",c=this;return $.map(a,function(a,c){return a.href=[b,a.owner,a.id].join("/"),Mustache.to_html(twttr.media.types.Flickr.templates.set,a)}).join("")},_makeGroupRequestByName:function(a,b){this.makeRequest({data:{method:"flickr.urls.lookupGroup",url:"flickr.com/groups/"+a},success:twttr.bind(this,function(a){this._makeGroupRequestById(a.group.id,b)})})},_makeGroupRequestById:function(a,b){this.makeRequest({data:{method:"flickr.groups.pools.getPhotos",group_id:a},success:twttr.bind(this,function(c){this.data.photos=c.photos.photo.slice(0,16),this.data.group_id=a,b()})})},_makeSetRequest:function(a,b){this.makeRequest({data:{method:"flickr.photosets.getPhotos",photoset_id:a},success:twttr.bind(this,function(a){var c=a.photoset.owner;this.data.photos=a.photoset.photo.slice(0,16),twttr.each(this.data.photos,function(a){a.owner=c}),this.data.set_id=a.photoset.id,this.data.user_name=c,this.data.author_name=a.photoset.ownername,this.data.author_url=this.constructor.domain+"/photos/"+a.photoset.owner,b()})})},makeRequest:function(a){var b={url:twttr.media.types.Flickr.REST_DOMAIN+"/services/rest",dataType:"jsonp",jsonp:"jsoncallback",data:{format:"json",api_key:twttr.media.types.Flickr.API_KEY},success:function(a){}};twttr.sandboxedAjax.send(twttr.merge({},b,a,!0))}}),twttr.mediaType("DeviantArt",{title:"deviantART",icon:"photo",domain:"http://deviantart.com",flaggable:!0,matchers:{canonical:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/art\/(?:[\w\@-]+))/i,oldStyle:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/deviation\/(?:[\w\@-]+))/i,gallery:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/gallery\/#\/d(?:[\w\@-]+))/i,favMe:/^(#{protocol}?fav\.me\/(?:[\w\@-]+))/i,oldView:/^(#{protocol}?(?:[\w\-]+\.)deviantart\.com\/view\/(?:[\w\@-]+))/i},process:function(a,b){b=b||{},twttr.sandboxedAjax.send({url:"http://backend.deviantart.com/oembed",data:{url:this.slug,format:"jsonp",maxwidth:b.maxwidth},dataType:"jsonp",success:twttr.bind(this,function(b){this.data.href=this.url,this.data.name=this.constructor._name,this.data.src=b.thumbnail_url,this.data.author_name=b.author_name,this.data.author_url=b.author_url,a()})})},attribution:function(){var a="         <div class='media-attribution'>           <span>via</span>            <a target='_blank' class='media-attribution-link' href='{{author_url}}'>{{author_name}}</a>            from <img src='{{icon_url}}'/>           <a target='_blank' data-media-type='{{media_type}}' class='media-attribution-link' href='{{url}}'>{{title}}</a>         </div>";return Mustache.to_html(a,{url:this.constructor.domain,icon_url:twttr.assets.path("/partner-favicons/DeviantArt.ico"),title:this.constructor.title||this.constructor._name,media_type:this.constructor._name,author_name:this.data.author_name,author_url:this.data.author_url})},content:function(){var a='<div class="deviantart">                <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                  <img src="{{src}}"/>                </a>              </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Vimeo",{icon:"video",domain:"//vimeo.com",ssl:!0,flaggable:!0,height:150,matchers:{video:/^#{optional_protocol}?vimeo\.com\/(\d+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.thumbnail_url?b(c.data.thumbnail_url):b(null)})},process:function(a,b){var c=this;b=b||{},this.data.video_id=this.slug,twttr.sandboxedAjax.send({url:"//vimeo.com/api/oembed.json",dataType:"jsonp",data:{url:"http://vimeo.com/"+this.slug,width:b.maxwidth||446},success:function(b){c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a()}})},render:function(a){this.renderIframe(a,"//player.vimeo.com/video/"+this.data.video_id.replace(/[^0-9]/g,""))}}),twttr.mediaType("Etsy",{icon:"photo",domain:"http://etsy.com",ssl:!1,matchers:{itemListing:/^#{optional_protocol}?etsy\.com\/listing\/(\d+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.images&&c.data.images.length>0?b(c.data.images[0].url_170x135):b(null)})},process:function(a,b){var c=this;b=b||{},this.data.itemId=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,twttr.sandboxedAjax.send({url:"http://openapi.etsy.com/v2/public/listings/"+this.slug+".js",dataType:"jsonp",data:{detail_level:"high",api_key:"qev732j7b8j44eg5pqsb38k4",includes:"Images(url_170x135):6",fields:"listing_id,title,price,currency_code,quantity",maxwidth:b.maxwidth},success:function(b){var d=b.results[0];c.data.title=d.title;switch(d.currency_code){case"USD":c.data.price=d.quantity+" for $"+(d.price||0);break;default:c.data.price=d.quantity+" for "+(d.price||0)+" "+d.currency_code}c.data.images=d.Images;var e=$.map(d.Images,function(a,b){return'<a class="inline-media-image" data-inline-type="{{name}}" target="_blank" href="{{href}}">                      <img class="thumb" src="'+a.url_170x135+'"/>                    </a>'}).join(""),f='            <div class="etsy">              <h3>{{title}}</h3>              <p>{{price}}</p>              <p>'+e+"</p>            </div>";c.data.html=Mustache.to_html(f,c.data),a()}})},content:function(){return this.data.html}}),twttr.mediaType("Photozou",{icon:"photo",domain:"http://photozou.jp",flaggable:!0,matchers:{photo:/^#{optional_protocol}?photozou\.(?:com|jp)\/photo\/show\/\d+\/(\d+)/i},ssl:!1,getImageURL:function(a,c,d){var e=this;this.process(function(){e.data&&e.data.src?d&&d<120||a==b.constants.imageSizes.small?c(e.data.smallSrc):c(e.data.src):c(null)})},process:function(a){this.data.src="http://photozou.jp/p/img/"+this.slug,this.data.smallSrc="http://photozou.jp/p/thumb/"+this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="photozou">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("TwitPic",{icon:"photo",domain:"//twitpic.com",flaggable:!0,matchers:{media:/^#{optional_protocol}?twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i},ssl:!0,process:function(a){this.data.src=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},getImageURL:function(a,c){if(this.slug){var d="";a==b.constants.imageSizes.medium?d="//twitpic.com/show/thumb/"+this.slug:a=="small"?d="//twitpic.com/show/mini/"+this.slug:d="//twitpic.com/show/iphone/"+this.slug,c(d)}else c(null)},content:function(){var a='<div class="twitpic">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="//twitpic.com/show/large/{{src}}"/>                 </a>              </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("Twitgoo",{icon:"photo",domain:"http://twitgoo.com",ssl:!1,flaggable:!0,matchers:{image:/^#{optional_protocol}?twitgoo\.com\/(?!a\/)([a-zA-Z0-9\-\?\=]+)/i},getImageURL:function(a,c){this.slug?c(b.util.supplant("http://twitgoo.com/{src}/img",{src:this.slug})):c(null)},process:function(a){this.data.src=this.slug,this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="twitgoo">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="http://twitgoo.com/{{src}}/img"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("DailyBooth",{icon:"photo",domain:"//dailybooth.com",ssl:!0,matchers:{photo1:/^#{optional_protocol}?dailybooth\.com\/(u\/\w+)/i,photo2:/^#{optional_protocol}?dailybooth\.com\/(\w+\/\w+)/i},getImageURL:function(a,c){var d=this;this.process(function(){d.data?a===b.constants.imageSizes.original?c(d.data.src):c(d.data.smallImage):c(null)})},process:function(a){var b=this;this.data.href=c(this.url),this.data.name=this.constructor._name;if(this.slug.match(/^u\/(\w+)/))var d=parseInt(RegExp.$1,36),e=this.getBaseTen(d);else{var e=this.slug.match(/\w+\/(\w+)/);if(!e){a();return}e=e[1]}twttr.sandboxedAjax.send({url:"//api.dailybooth.com/v1/picture/"+e+".json",dataType:"jsonp",type:"get",success:function(d){b.data.src=c(d.urls.large),b.data.smallImage=c(d.urls.small),a()}})},content:function(){var a='<div class="dailybooth">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}"/>                 </a>               </div>';return Mustache.to_html(a,this.data)}}).methods({getBaseTen:function(a){if(Number.prototype.toFixed)a=a.toFixed(5),a=parseFloat(a);else{var b=Math.floor(a),c=a-b;a=b+Math.round(c*1e14)/1e14}return a}}),twttr.mediaType("YFrog",{domain:"//yfrog.com",ssl:!0,flaggable:!0,icon:function(a){var b=this.slug.charAt(this.slug.length-1);switch(b){case"j":case"p":case"b":case"t":case"g":return"photo";case"z":case"f":case"s":return"video"}},matchers:{media:/^#{optional_protocol}?yfrog\.(?:com|ru|com\.tr|it|fr|co\.il|co\.uk|com\.pl|pl|eu|us)\/(\w+)/i},getImageURL:function(a,c){this.slug?this.icon()==="video"?c(b.util.supplant("//yfrog.com/{id}:frame",{id:this.slug})):a===b.constants.imageSizes.small?c(b.util.supplant("//yfrog.com/{id}:twthumb",{id:this.slug})):c(b.util.supplant("//yfrog.com/{id}:tw1",{id:this.slug})):c(null)},process:function(a){this.data.media_id=this.slug,this.data.href=this.url.replace(/\/$/,""),this.data.name=this.constructor._name,a()},content:function(){var a,b=this.data.media_id.charAt(this.data.media_id.length-1);if(b=="j"||b=="p"||b=="b"||b=="t"||b=="g")a='<div class="yfrog">               <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                 <img src="//yfrog.com/{{media_id}}:iphone">               </a>             </div>';else if(b=="z"||b=="f"||b=="s")a='<embed                src="//yfrog.com/{{media_id}}:embed"                width="100%"                allowFullScreen="true"                wmode="transparent"                type="application/x-shockwave-flash"/>';return a||(a=""),Mustache.to_html(a,this.data)}}),twttr.mediaType("Lockerz",{icon:"photo",domain:"//www.lockerz.com",ssl:!0,matchers:{tweetphoto:/^#{optional_protocol}?tweetphoto\.com\/(\d+)/i,plixi:/^#{protocol}?(?:(?:m|www)\.)?plixi\.com\/p\/(\d+)/i,lockerz:/^#{protocol}?(?:(?:m|www)\.)?lockerz\.com\/s\/([0-9\?\=\- ]+)/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.src?b(c.data.src):b(null)})},process:function(a){this.data.src="//api.plixi.com/api/tpapi.svc/imagefromurl?size=medium&url="+encodeURIComponent(this.url),this.data.href=this.url,this.data.name=this.constructor._name,a()},content:function(){var a='<div class="lockerz">                 <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                   <img src="{{src}}" />                 </a>              </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Kiva",{icon:"generic",domain:"http://www.kiva.org",ssl:!1,matchers:{project:/^#{optional_protocol}?kiva\.org\/lend\/(\d+)/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.kiva.org/services/oembed",dataType:"jsonp",jsonp:"jsonp",data:{url:"http://www.kiva.org/lend/"+this.slug,format:"jsonp",maxwidth:b.maxwidth},success:function(b){c.data.html=b.html,a()}})},content:function(){return this.data.html}}),twttr.mediaType("TwitVid",{icon:"video",domain:"//www.twitvid.com",ssl:!0,flaggable:!0,favicon:"//www.twitvid.com/favicon.ico",matchers:{video:/^#{optional_protocol}?twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i},process:function(a,b){this.data.media_id=this.slug,this.data.width=b&&b.maxwidth||425,this.data.height=this.calcHeight(this.data.width),a()},metadata:function(a){a({image:b.util.supplant("//www.twitvid.com/{media_id}:largethumb",this.data)})},getImageURL:function(a,b){var c=this;this.process(function(){c.metadata(function(a){a&&a.image?b(a.image):b(null)})})},render:function(a){this.renderIframe(a,twttr.proto+"://www.twitvid.com/embed.php?autoplay=0&guid="+this.data.media_id)}}),twttr.mediaType("GoogleVideo",{icon:"video",domain:"http://video.google.com",ssl:!1,flaggable:!0,matchers:{video:/^#{optional_protocol}video\.google\.com\/([a-zA-Z0-9_\-\?\=\&\#]+)/i},process:function(a,b){this.data.width=400,this.data.height=326,b&&b.maxwidth&&b.maxwidth<this.data.width&&(this.data.width=b.maxwidth,this.data.height=Math.round(b.maxwidth*326/400)),this.slug.match(/#docid=(\-?\d+)/)?(this.data.doc_id=RegExp.$1,a()):this.slug.match(/\?docid=(\-?\d+)/)&&(this.data.doc_id=RegExp.$1,a())},content:function(){var a='         <embed type="application/x-shockwave-flash"                 id="VideoPlayback"                 src="http://video.google.com/googleplayer.swf?docid={{doc_id}}&hl=en&fs=true"                 style="width:{{width}}px;height:{{height}}px"                 allowFullScreen="true"                 allowScriptAccess="always"                wmode="opaque" />';return Mustache.to_html(a,this.data)}}),twttr.mediaType("JustinTV",{icon:"video",domain:"http://justin.tv",ssl:!1,flaggable:!0,matchers:{embed:/^#{protocol_no_ssl}([a-zA-Z0-9_\-\?\=]*\.)?justin\.tv\/[a-zA-Z0-9]+(\/b\/\d+)?\/?(\?\w*?)?(#\w*)?$/i},getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.thumbnail_url?b(c.data.thumbnail_url):b(null)})},process:function(a,b){var c=this,d=400,e=300;twttr.sandboxedAjax.send({url:"http://api.justin.tv/api/embed/from_url.json",dataType:"jsonp",jsonp:"jsonp",data:{url:c.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),f.thumbnail_url&&(c.data.thumbnail_url=f.thumbnail_url),a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Kickstarter",{icon:"generic",domain:"//kickstarter.com",ssl:!0,matchers:{project:/^#{optional_protocol}?(kickstarter\.com\/projects\/[a-zA-Z0-9_\-]+\/[a-zA-Z0-9_\-]+)/i},process:function(a){this.data.height="380px",this.data.width="220px",a()},render:function(a){var b=this.slug;b.slice(-1)!=="/"&&(b+="/"),b+="widget/card.html",this.renderIframe(a,twttr.proto+"://www."+b)}}),twttr.mediaType("MTV",{icon:"video",domain:"http://mtv.com",ssl:!1,matchers:{video:/^#{optional_protocol}?mtv\.com\/videos\/([a-z0-9\-\_]+\/)+[0-9]+\/[a-z0-9\-\_]+\.jhtml(#[a-z0-9\=\&]+)?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.mtv.com/videos/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.url=b.url,b.width>315?(c.data.width=315,c.data.height=Math.floor(b.height*315/b.width)):(c.data.height=b.height,c.data.width=b.width),a())}})},content:function(){var a='<object width="{{width}}" height="{{height}}">                <param name="movie" value="{{url}}"/>                <param name="allowFullScreen" value="true"/>                <param name="allowscriptaccess" value="always"/>                <param name="wmode" value="opaque"/>                <embed src="{{url}}"                        type="application/x-shockwave-flash"                        allowscriptaccess="always"                        allowfullscreen="true"                        wmode="opaque"                        width="{{width}}"                        height="{{height}}"/>              </object>';return Mustache.to_html(a,this.data)}}),twttr.mediaType("WashingtonPost",{icon:"video",domain:"http://washingtonpost.com",matchers:{video:/(^(?:#{protocol}?(?:[\w\-\_]+\.))?washingtonpost\.com\/wp-dyn\/content\/video\/\d{4}\/\d{2}\/\d{2}\/VI\d+\.html(#{wildcard})?)/i},ssl:!1,process:function(a,b){var c=this,d=400,e=225;twttr.sandboxedAjax.send({url:"http://specials.washingtonpost.com/tv/info.json",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("MSNBC",{icon:"video",domain:"http://msnbc.com",ssl:!1,matchers:{video:/(^(?:#{protocol}?(?:[\w\-\_]+\.))?msnbc\.msn\.com\/id\/\d{1,8}\/vp\/\d{1,8}(#{wildcard})?)/i},process:function(a,b){var c=this,d=420,e=245;twttr.sandboxedAjax.send({url:"http://www.polls.newsvine.com/_labs/twitter/oembed",type:"GET",dataType:"jsonp",data:{format:"jsonp",url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.resizeHtmlEmbed(f.html,b,d,e),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("CNN",{icon:"video",domain:"http://cnn.com",title:"CNN Video",ssl:!1,deciderKey:"phoenix_cnn_details",matchers:{video:/(^(?:#{protocol}?(?:(?:www|edition|us)\.)?)?cnn\.com\/video\/[\?|#]\/#{wildcard})/i},process:function(a,b){var c=this,d=this.url,e=416,f=374,g=d.split("?");g.length>2&&(g.pop(),d=g.join("?")),twttr.sandboxedAjax.send({url:"http://newspulse.cnn.com/widget/json/twitter-video",type:"GET",dataType:"jsonp",data:{format:"jsonp",maxwidth:b&&b.maxwidth||e,url:d},success:function(d){d.error||(c.data.embed=c.resizeHtmlEmbed(d.html,b,e,f),c.data.attribution_url="http://cnn.com/video",c.data.width=d.width,c.data.height=d.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Apple",{icon:twttr.isT1?function(){switch(this.matchLabel){case"song":return"song";case"album":return"album";case"music_video":case"video":case"movie":case"tv":return"video";case"software":return"software";case"event":case"preorder":case"playlist":case"ping_playlist":case"podcast":case"book":default:return"generic"}}:"song",domain:"http://itunes.apple.com",deciderKey:"phoenix_apple_itunes",matchers:{song:/^#{itunes_protocol}(?:\/album)\/.*\?i=/i,album:/^#{itunes_protocol}(?:\/album)\//i,event:/^#{itunes_protocol}\/event\//i,music_video:/^#{itunes_protocol}(?:\/music-video)\//i,video:/^#{itunes_protocol}(?:\/video)\//i,software:/^#{itunes_protocol}(?:\/app)\//i,playlist:/^#{itunes_protocol}(?:\/imix)\//i,ping_playlist:/^#{itunes_protocol}(?:\/imixes)\?/i,preorder:/^#{itunes_protocol}(?:\/preorder)\//i},ssl:!1,getImageURL:function(a,b){var c=this;this.process(function(){c.data&&c.data.src?b(c.data.src):b(null)})},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://itunes.apple.com/WebObjects/MZStore.woa/wa/remotePreview",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,c.data.attribution_icon=b.attribution_icon,c.data.attribution_url=b.attribution_url,c.data.attribution_title="iTunes",b.favicon&&(c.data.attribution_icon=b.favicon),b.faviconLink&&(c.data.attribution_url=b.faviconLink),b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}});var d={_queue:[],push:function(a,b){b===!0?this._queue.unshift(a):this._queue.push(a),this._process()},_process:function(){var a=this;if(this._isProcessing)return;this._isProcessing=!0,setTimeout(function(){var b=a._queue.shift();a._isProcessing=!1,b&&(b(),a._process())},200)}};twttr.mediaType("Instagram",{icon:"photo",domain:"//instagr.am",title:"Instagram",deciderKey:"phoenix_instagram_and_friends",ssl:!0,height:301,matchers:{video:/^#{optional_protocol_subdomain}?(?:instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+\/?)/i},getImageURL:function(a,c){var d=this;this.process(function(){if(d.data&&d.data.href){var e=b.constants.imageSizes;a===e.small||a===e.medium?c(d.data.smallSrc):c(d.data.src)}else c(null)},{size:a})},process:function(a,c){this.data.href=Mustache.to_html("{{domain}}/p/{{slug}}",{domain:this.constructor.domain,slug:this.slug}),this.data.src=b.util.joinPath(this.data.href,"media/?size=l"),this.data.smallSrc=b.util.joinPath(this.data.href,"media/?size=t"),this.data.name=this.constructor._name,d.push(a,c&&c.size===b.constants.imageSizes.large)},content:function(){var a='        <div class="instagram">          <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">            <img src="{{src}}"/>          </a>        </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Rdio",{icon:"song",domain:"//rdio.com",ssl:!0,matchers:{rdio:/^#{optional_protocol}(?:rd\.io|rdio\.com)\/#{wildcard}/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//rdio.com/api/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth||390},success:function(b){b.error||(c.data.embed=c.resizeHtmlEmbed(b.html),a())}})},content:function(){return this.data.embed},getImageURL:function(a,b){var c=this;this.process(function(){b(this.url)},{maxwidth:500})}}),twttr.mediaType("Dipdive",{domain:"http://dipdive.com",ssl:!1,deciderKey:"phoenix_dipdive_details",matchers:{photos:/^#{optional_protocol_subdomain}?dipdive\.com\/(((?:member\/[a-zA-Z0-9\-]+\/)?pictures\/([0-9]+))|(v\/[a-zA-Z0-9]+))/i,videos:/^#{optional_protocol_subdomain}?dipdive\.com\/(((?:member\/[a-zA-Z0-9\-]+\/)?media\/([0-9]+))|(v\/[a-zA-Z0-9]+))/i},icon:function(a){return this._icon?this._icon:(this.url.match(/pictures/)?this._icon="photo":this._icon="video",this._icon)},process:function(a,b){var c=this,d=425,e=385;b=b||{},twttr.sandboxedAjax.send({url:"http://api.dipdive.com/oembed.jsonp",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(f.type==="photo"?(c.data.type="photo",c.data.href=f.url,c.data.name=c.constructor._name):(c.data.embed=c.resizeHtmlEmbed(f.html,b,d,e),c.data.width=f.width,c.data.height=f.height),a())}})},content:function(){var a;return this.data.type==="photo"?(a='<div class="dipdive">               <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                 <img src="{{href}}"/>               </a>             </div>',Mustache.to_html(a,this.data)):this.data.embed},flaggable:!0}),twttr.mediaType("SlideShare",{icon:"generic",domain:"http://slideshare.com",ssl:!0,deciderKey:"phoenix_instagram_and_friends",matchers:{slides:/^#{optional_protocol}?slideshare\.(?:com|net)\/[a-zA-Z0-9\.]+\/[a-zA-Z0-9-]+\/?#{wildcard}?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"https://www.slideshare.net/api/oembed/2",type:"GET",dataType:"jsonp",data:{url:this.url,format:"json",maxwidth:b.maxwidth||390},success:function(b){b.error||(c.data.embed=c.resizeHtmlEmbed(b.html),c.data.attribution_url=b.author_url,c.data.attribution_title=b.author_name,a())}})},content:function(){return this.data.embed},flaggable:!0}),twttr.mediaType("BlipTV",{icon:"video",domain:"//blip.tv",flaggable:!0,title:"blip.tv",ssl:!1,deciderKey:"phoenix_instagram_and_friends",matchers:{videos:/^#{optional_protocol}?blip\.tv\/(?:(?:file\/[\w-]+)|(?:(?:[\w-]+\/)?[\w-]+-(?:\d+)))\/?/i},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.thumbnail_url)})},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//blip.tv/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Livestream",{icon:"video",domain:"http://www.livestream.com",ssl:!1,flaggable:!0,matchers:{wwwlivestream:/^#{optional_protocol}?livestream\.com\/[\w_]+(\/#{wildcard})?/i,livestream:/^#{protocol}?livestre\.am\/[\w_]+(\/#{wildcard})?/i,twitcam:/^#{protocol}?twitcam\.(?:livestream\.)com\/[\w_]+(\/#{wildcard})?/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.livestream.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("WallStreetJournal",{icon:"video",domain:"http://online.wsj.com",title:"The Wall Street Journal Digital Network",ssl:!1,matchers:{video:/^#{protocol}?online\.wsj\.com\/video\/[A-Z0-9a-z\-]+\/[A-Z0-9a-z\-]+\.html/i},process:function(a,b){var c=this,d=450,e=344;b=b||{},twttr.sandboxedAjax.send({url:"http://online.wsj.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b&&b.maxwidth||d},success:function(f){f.error||(c.data.embed=c.useOpaqueModeForFlash(c.resizeHtmlEmbed(f.html,b,d,e)),c.data.width=f.width,c.data.height=f.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Hulu",{icon:"video",domain:"http://www.hulu.com",ssl:!1,height:253,matchers:{video:/^#{optional_protocol}?hulu\.com\/w(atch)?\/([a-zA-Z0-9]+)/i},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.thumbnail_url)})},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://www.hulu.com/api/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=c.useOpaqueModeForFlash(b.html),c.data.thumbnail_url=b.thumbnail_url,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("NHL",{icon:"video",domain:"http://www.nhl.com",ssl:!1,matchers:{video:/^#{protocol}?video\.([a-z]{4,11}\.)?nhl\.com\/videocenter\/console\?(((catid=-?\d+&)?id=\d+)|(hlg=\d{8},\d,\d{1,4}(&event=[A-Z0-9]{4,6})?)|(hlp=\d{5,10}(&event=[A-Z0-9]{4,6})?))/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://video.nhl.com/videocenter/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=c.useOpaqueModeForFlash(b.html),c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Meetup",{icon:"generic",domain:"//www.meetup.com",deciderKey:"phoenix_local_meetup",ssl:!0,matchers:{anevent:/^#{protocol_no_ssl}?(?:(((www|dev)\.){0,2}?meetup.com)|meetu.ps)\/(?:u\/)?[\w\-]{3,}(?:[a-zA-Z0-9_#\.\-\?\&\=\/]+)/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//api.meetup.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.html=b.html,a())}})},content:function(){return this.data.html}}),twttr.mediaType("Plancast",{icon:"generic",domain:"//plancast.com",deciderKey:"phoenix_local_plancast",ssl:!0,matchers:{anevent:/^#{protocol}?(?:[a-z0-9]+\.)?plancast\.com\/p\/(?:[a-z0-9]+)\/?$/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var d=this;b=b||{},twttr.sandboxedAjax.send({url:"//plancast.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(d.data.src=c(b.src),b.height&&(d.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Gowalla",{icon:"generic",domain:"//www.gowalla.com",deciderKey:"phoenix_local_gowalla",ssl:!0,matchers:{anevent:/^#{protocol}?(((go)?wal.la)\/([chpnt])\/\w+\/?|gowalla.com\/(trips|challenges|checkins|pins)\/\d+\/?)/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//gowalla.com/api/twitter_oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Foursquare",{icon:"generic",domain:"//www.foursquare.com",deciderKey:"phoenix_local_foursquare",ssl:!0,matchers:{anevent:/^#{optional_protocol}?foursquare\.com\/([a-zA-Z0-9\-]+)\/checkin\/(#{wildcard})/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"https://api.foursquare.com/services/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.src=b.src,b.height&&(c.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("Amazon",{icon:"generic",domain:"//www.amazon.com",deciderKey:"phoenix_amazon_details",ssl:!0,matchers:{review:/^#{protocol}?www\.amazon\.(com|de|fr|ca|it|(?:co\.(?:jp|uk)))(?:(?!(\/[^\/]*)?\/[bs][\/\?]|\/gp\/browse\.html|\/aw\/ri\/|\/gp\/search|\/search|\/gp\/feature|\/gp\/goldbox|\/gp\/registry))(?:#{wildcard}?)/i},enableAPI:!1,validActions:{resizeFrame:!0,bind:!0,unbind:!0},process:function(a,b){var c=twttr.media.types.Amazon.matchers,d=this,e=this.url;b=b||{},matches=e.match(c.review),matches[1]&&twttr.sandboxedAjax.send({url:"//www.amazon."+matches[1]+"/gp/twitter/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(d.data.src=b.src,b.height&&(d.data.height=b.height),a())}})},render:function(a){this.renderEmbeddedApplication(a,this.data.src)}}),twttr.mediaType("AolVideo",{icon:"video",domain:"http://www.aol.com",title:"Aol",deciderKey:"phoenix_aol_video",matchers:{video:/^#{protocol_no_ssl}?share\.aolvideo\.com\/twitter\.php\?video\=(#{wildcard})/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://share.aolvideo.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){b.error||(c.data.embed=b.html,c.data.width=b.width,c.data.height=b.height,a())}})},content:function(){return this.data.embed}}),twttr.mediaType("Photobucket",{icon:"photo",domain:"http://photobucket.com",flaggable:!0,matchers:{user_groups:/^#{protocol}?(?:g?(?:i|s)(?:\d+|mg))\.photobucket\.com\/(?:albums|groups)\/(?:#{wildcard})/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"http://photobucket.com/oembed",type:"GET",dataType:"jsonp",data:{url:this.url.replace(/^([^?]*[^/])(?=\?)/,"$1/"),maxwidth:b.maxwidth},success:function(b){b.error||(c.data.href=b.url,c.data.name=c.constructor._name,a())}})},getImageURL:function(a,b){var c=this;this.process(function(){b(c.data.href)})},render:function(a){var b='        <div class="photobucket">          <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">            <img src="{{href}}"/>          </a>        </div>';$(a).append(Mustache.to_html(b,this.data))}}),twttr.mediaType("With",{icon:"photo",domain:twttr.isSSL()?"https://with.me":"http://with.me",ssl:!0,deciderKey:"phoenix_withme_details",matchers:{project:/^#{optional_protocol}?with\.me[\/\?]\??[a-zA-Z0-9]+$/i},process:function(a,b){var c=this;b=b||{},twttr.sandboxedAjax.send({url:"//with.me/services/oembed",dataType:"jsonp",type:"GET",data:{url:this.url,maxwidth:b.maxwidth},success:function(b){!b.error&&b.hasOwnProperty("url")&&(c.data.href=c.url,c.data.src=b.url,c.data.title=b.title,a())}})},content:function(){var a='           <div class="with-me">             <a class="inline-media-image" href="{{href}}" target="_blank">               <img src="{{src}}"/>             </a>           </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("Facebook",{icon:"photo",domain:twttr.isSSL()?"https://facebook.com":"http://facebook.com",ssl:!0,deciderKey:"phoenix_facebook_details",matchers:{project:/^#{optional_protocol}?facebook\.com\/([a-zA-Z0-9_#\.\-\?\&\=\/])*pid=(#{wildcard})/i},process:function(a,b){var c="https://www.facebook.com/twitter/photo/?id={{id}}&l={{l}}&pid={{pid}}",d=this;d.data.href=this.url;var e=twttr.util.paramsFromUrl(this.url);e&&e.id&&e.l&&e.pid&&(d.data.src=Mustache.to_html(c,e),a())},getImageURL:function(a,b){var c=this;this.process(function(){c.data.src?b(c.data.src):b(null)})},content:function(){var a='            <div class="facebook-dp">              <a class="inline-media-image" href="{{href}}" target="_blank">                <img src="{{src}}"/>              </a>            </div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("WordPress",{icon:"generic",domain:"//wordpress.com",ssl:!0,deciderKey:"phoenix_wordpress_details",matchers:{tinyUrl:/^#{optional_protocol}?(?:[a-z0-9]+\.)?wp\.me[\/\?][a-zA-Z0-9_#\.\-\?\&\=\/]+$/i,standardUrl:/^#{optional_protocol}?(?:[a-z0-9]+\.)?wordpress\.com[\/\?][a-zA-Z0-9_#\.\-\?\&\=\/]+$/i},process:function(a,b){var c=this;b=b||{};var d="//public-api.wordpress.com/oembed/1.0/?for=twitter.com&as_article=true",e={url:this.url};twttr.app.isOnPage("permalink")||(e.maxwidth=433),twttr.sandboxedAjax.send({url:d,dataType:"jsonp",type:"GET",data:e,success:function(b){!b.error&&b.title&&(c.data.href=c.url,b.thumbnail_url&&b.thumbnail_url.indexOf("http:")>=0&&(b.thumbnail_url=b.thumbnail_url.replace("http","https")),c.data=twttr.merge(c.data,b),a())}})},content:function(){var a='                  <div id="wp-details" class="component"><div class="wp-inset">                  <a href="{{href}}" class="wp-link" target="_blank">                  <h1 class="wp-news-headline">{{title}}</h1></a>                  <p class="wp-news-description">{{{body}}}</p>                  {{#thumbnail_url}}                  <div><a class="inline-media-image" href="{{href}}" target="_blank">                  <img class="wp-img" src="{{thumbnail_url}}"/>                  </a></div>                  {{/thumbnail_url}}                  </div></div>';return Mustache.to_html(a,this.data)},flaggable:!0}),twttr.mediaType("WhoSay",{domain:"//www.whosay.com",ssl:!0,flaggable:!0,deciderKey:"phoenix_whosay_details",icon:"photo",matchers:{media:/^#{optional_protocol}?whosay\.com\/[^\/\s]+\/photos\/(\d+)/i},getImageURL:function(a,c){if(this.slug){if(a===b.constants.imageSizes.medium)return c(b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_melt.jpg",{id:this.slug}));if(a===b.constants.imageSizes.large)return c(b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_lalt.jpg",{id:this.slug}))}c(null)},process:function(a){this.data.href=this.url,this.data.name=this.constructor._name,this.data.src=b.util.supplant("//d1au12fyca1yp1.cloudfront.net/{id}/{id}_melt.jpg",{id:this.slug}),a()},content:function(){var a='<div class="whosay">                  <a class="inline-media-image" data-inline-type="{{name}}" href="{{href}}" target="_blank">                    <img alt="" src="{{src}}">                  </a>                </div>';return Mustache.to_html(a,this.data)}}),a()})}),provide("geo/Map",function(a){using().as(function(b){twttr.klass("twttr.geo.Map",function(a,b){var c=this;if(!twttr.geo.mapsAvailable())return;var d={mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,scrollwheel:!1,navigationControl:!0,navigationControlOptions:{position:google.maps.ControlPosition.TOP_LEFT,style:google.maps.NavigationControlStyle.SMALL}};c.map=new google.maps.Map(a.get(0),twttr.merge(d,b)),c.bounds=new google.maps.LatLngBounds,c.initialized=!0,c.$canvas=a,c.addListener("tilesloaded",function(){c.resize()})}).methods({addListener:function(a,b){google.maps.event.addListener(this.map,a,b)},createOverlay:function(a){function c(){this.setMap(b.map)}var b=this;c.prototype=new google.maps.OverlayView,c.prototype.onAdd=function(){},c.prototype.onRemove=function(){},c.prototype.draw=function(){a&&(setTimeout(a,0),a=null)},b.mapOverlay=new c},getProjection:function(){var a=this.mapOverlay;return a&&a.getProjection()},latLngToContainerPoint:function(a){var b=this;a=b.normalizeLatLng(a);var c=b.getProjection();return c?c.fromLatLngToContainerPixel(a):null},latLngToOverlayPoint:function(a){var b=this;a=b.normalizeLatLng(a);var c=b.getProjection();return c?c.fromLatLngToDivPixel(a):null},containerPointToLatLng:function(a,b){return this.getProjection().fromContainerPixelToLatLng(new google.maps.Point(a,b))},extendBounds:function(a){this.bounds.extend(a)},normalizeLatLng:function(a){return $.isArray(a)?new google.maps.LatLng(a[1],a[0]):a},addPoint:function(a,b){var c=this;a=c.normalizeLatLng(a),c.extendBounds(a);var d=twttr.geo.POI_MARKER_SIZE,e=twttr.geo.POI_MARKER_HOTSPOT,f=new google.maps.MarkerImage("/phoenix/img/pin.png",new google.maps.Size(d.width,d.height),null,new google.maps.Point(e.x,e.y));c.marker=new google.maps.Marker({flat:!0,icon:f,map:c.map,position:a,clickable:!1,zIndex:2});if(b){var g=new google.maps.MarkerImage(b,null,null,new google.maps.Point(13,32),new google.maps.Size(24,24));c.avatar=new google.maps.Marker({flat:!0,icon:g,map:c.map,position:a,zIndex:3})}},addPoi:function(a,b){var c=twttr.is.fn(b);a=this.normalizeLatLng(a),this.extendBounds(a);var d=new google.maps.MarkerImage("/phoenix/img/poi-pin.png",null,null,new google.maps.Point(twttr.geo.POI_MARKER_HOTSPOT.x,twttr.geo.POI_MARKER_HOTSPOT.y)),e=new google.maps.Marker({flat:!0,icon:d,map:this.map,position:a,draggable:c,clickable:c,zIndex:2});return c&&google.maps.event.addListener(e,"position_changed",function(){var a=e.getPosition();b(a.lat(),a.lng())}),e},addFocusablePoint:function(a,b,c){var d=this;a=d.normalizeLatLng(a),d.extendBounds(a);var e=new google.maps.MarkerImage("/phoenix/img/place-minor10x.png",new google.maps.Size(10,10),new google.maps.Point(10,0),new google.maps.Point(5,5)),f=new google.maps.MarkerImage("/phoenix/img/place-minor10x.png",new google.maps.Size(10,10),null,new google.maps.Point(5,5)),g=new google.maps.Marker({flat:!0,icon:f,map:d.map,position:a,clickable:b!==undefined,zIndex:2});return b&&(google.maps.event.addListener(g,"mouseover",function(c){b(!0,d.latLngToContainerPoint(a))}),google.maps.event.addListener(g,"mouseout",function(c){b(!1,d.latLngToContainerPoint(a))})),c&&google.maps.event.addListener(g,"click",function(a){c()}),function(a){a?(g.setIcon(e),g.setZIndex(3)):(g.setIcon(f),g.setZIndex(2))}},extendBoundsToIncludeCircle:function(a,b){if(b<200)return;var c=new google.maps.Circle({map:null,center:this.normalizeLatLng(a),radius:b,clickable:!1,fillColor:"#0040FF",fillOpacity:.08,strokeColor:"#2929D4",strokeOpacity:.7,strokeWeight:.5,zIndex:1}),d=c.getBounds();this.extendBounds(d.getNorthEast()),this.extendBounds(d.getSouthWest())},addPlacePolygon:function(a){a=a[0];var b=[];for(var c=0;c<a.length;c++){var d=this.normalizeLatLng(a[c]);b.push(d),this.extendBounds(d)}new google.maps.Polygon({path:b,strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:.5,fillColor:"#FF0000",fillOpacity:.2,map:this.map})},isEmpty:function(){return this.bounds.isEmpty()},adjustBounds:function(a,b){var c=this;if(this.isEmpty())return;c.fitBounds(c.bounds,a,b)},MIN_LAT:-85.05113,MAX_LAT:85.05113,X_FROM_LNG:256/360,Y_FROM_RADIANS:-256/(2*Math.PI),DEGREES_FROM_RADIANS:180/Math.PI,MAX_CONTENT_WIDTH_RATIO:.9,MAX_CONTENT_HEIGHT_RATIO:.9,_worldXFromLng:function(a){return a*this.X_FROM_LNG},_worldYFromLat:function(a){var b=this;a=Math.max(b.MIN_LAT,Math.min(b.MAX_LAT,a));var c=Math.sin(a/b.DEGREES_FROM_RADIANS);return Math.log((1+c)/(1-c))*.5*b.Y_FROM_RADIANS},_lngFromWorldX:function(a){return a/this.X_FROM_LNG},_latFromWorldY:function(a){var b=2*Math.atan(Math.exp(a/this.Y_FROM_RADIANS));return(b-.5*Math.PI)*this.DEGREES_FROM_RADIANS},_zoomFromPixelDelta:function(a,b,c){var d=Math.floor(Math.log(Math.abs(a/b))/Math.LN2);return isNaN(d)?c:Math.max(0,Math.min(c,d))},fitBounds:function(a,b,c){var d=this;d.bounds=a;var e=a.getNorthEast(),f=a.getSouthWest(),g=d._worldXFromLng(f.lng()),i=d._worldXFromLng(e.lng()),j=d._worldYFromLat(e.lat()),k=d._worldYFromLat(f.lat()),l=d._zoomFromPixelDelta(d.$canvas.width()*d.MAX_CONTENT_WIDTH_RATIO,i-g,b),m=d._zoomFromPixelDelta(d.$canvas.height()*d.MAX_CONTENT_HEIGHT_RATIO,k-j,b);d.map.setZoom(Math.min(l,m));if(!c){var n=d._latFromWorldY((j+k)*.5);c=new google.maps.LatLng(n,a.getCenter().lng())}d.map.setCenter(d.normalizeLatLng(c))},getCenter:function(){return this.map.getCenter()},resize:function(){google.maps.event.trigger(this.map,"resize")}}),a(twttr.geo.Map)})}),provide("geo/Location",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.geo.Location",function(){var a=this;a.$empty=a.$fakeFocus=a.$dropdown=a.$input=a.$helpText=$([]),a.clearLocation(),a.closeDropdownClick=function(b){var c=a.$dropdown.get(0);c&&b.target!==c&&!$.contains(c,b.target)&&a.closeDropdown()}}).statics({GEO_WEBCLIENT_COOKIE:"geo_webclient",MS_WAIT_BETWEEN_GET_LOCATIONS:9e5,LOCATION_URL:"/account/location.json"}).methods({onRegisterTweetBox:function(a,b){var c=this,d=a.find(".geo-control");c.showGeoState(),d.find("a.geo-location").click(function(a){a.preventDefault(),d.find(".geo-location-dropdown").length||setTimeout(function(){$(".geo-control .geo-icon").tipsy("hide"),c.isLocationOn()?(c.openDropdown(d),b&&b()):c.isGeoEnabled()?c.turnLocationOn():(new twttr.widget.GeoPromoDialog).show()},0)}),d.find(".geo-icon").tipsy({gravity:"nw",offset:5,fade:!0,opacity:.9,title:function(){return c.isLocationOn()?"":h(_("Add your location"))}})},onFocusTweetBox:function(a){this.isLocationOn()&&!this.isUpdatingLocation()&&(!this.cityId()||this.now()-this.lastLocationTime>=this.constructor.MS_WAIT_BETWEEN_GET_LOCATIONS)&&this.updateLocation()},clearLocation:function(){this.location={},this.cache={},this.searchKeyShowing=null,this.$dropdown.remove(".override-location"),this.lastMessage="",this.lastFetchId=null},isUpdatingLocation:function(){return!!this.lastFetchId},updateLocation:function(a){var c=this;if(!c.isGeoUiAllowed()){c.processNewLocation(null);return}c.isUpdatingLocation()||(c.clearLocation(),c.showGeoState(a?_("Changing location..."):_("Getting location...")));var d={};c.lastFetchId=d,twttr.currentUser.geoLocation({override_place_id:a,spoof_ip:b.util.params().spoof_ip,success:function(a){c.lastFetchId===d&&c.processNewLocation(a)},error:function(a){if(c.lastFetchId===d){var b=a.status&&a.status===503;c.processNewLocation(b?{status:"busy"}:null)}}})},places:function(){return this.location&&this.location.places||[]},place:function(){return this.places()[0]||{}},cityId:function(){var a=this.place();return a.full_name&&a.id||""},cityName:function(){var a=this.place();return a.id&&a.full_name||""},isGeoUiAllowed:function(){return twttr.decider.isAvailable("geo_ui")&&twttr.decider.isAvailable("geo_location")},isGeoEnabled:function(){return twttr.currentUser&&twttr.currentUser.geoEnabled},isLocationOn:function(){return this.isGeoEnabled()&&!!$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE)},turnLocationOn:function(){$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE,"1",{expires:3650}),this.updateLocation()},turnLocationOff:function(){$.cookie(this.constructor.GEO_WEBCLIENT_COOKIE,null),this.clearLocation(),this.showGeoState()},processNewLocation:function(a){var b=this;b.lastFetchId=null;var c=a&&a.status;if(c==="busy"||c==="ok")b.lastLocationTime=this.now();b.location=a,b.cache={},b.showGeoState(b.cityName()||c==="unresolved"&&_("Unknown location")||_("Location service unavailable")),b.inputChanged(),b.showPlaceSuggestions()},now:function(){return(new Date).getTime()},showGeoState:function(a){var b=this.isLocationOn();this.lastMessage=b&&(a||this.lastMessage)||"";var c=this.lastMessage!=="";$("span.geo-control span.geo-icon").toggleClass("geo-icon-on",b).toggleClass("geo-icon-ok",b&&!!this.cityId()),twttr.helpers.ellipsify($("span.geo-control span.geo-text").html(h(this.lastMessage)),!0),$("span.geo-control span.geo-dropdown-icon").toggle(c).css("visibility","visible")},openDropdown:function(a){var b=this;b.closeDropdown(),$(document).add("textarea").bind("click",b.closeDropdownClick);var c=(new twttr.views.GeoLocationDropdown).$html();b.$dropdown=c,b.$input=c.find("input"),b.$helpText=c.find(".help-text"),b.$helpText.click(function(a){a.preventDefault(),a.stopPropagation(),b.$input.focus()}),c.find(".geo-turn-off-item a").bind("select",function(){b.closeDropdown(),b.turnLocationOff()}).click(function(a){a.preventDefault(),$(this).trigger("select")}),c.find(".glass").click(function(a){a.stopPropagation(),b._updateSearchResults(!0)}),c.delegate(".override-location a","select",function(){b.updateLocation($(this).attr("data-place-id")),b.closeDropdown()}).delegate(".override-location a","click",function(a){a.preventDefault(),$(this).trigger("select")}).delegate(".focusable","mousemove",function(){b.setFakeFocus($(this))}).delegate(".focused","mouseout",function(){b.setFakeFocus(b.$empty)});var d=a.find(".geo-icon"),e=d.position(),f=Math.round(e.top+d.outerHeight());c.css({left:e.left,top:f}),b.searchKeyShowing=null,b.showPlaceSuggestions(),b.setupInput(),a.append(c),b.$input.focus().select()},closeDropdown:function(){this.$dropdown.remove(),this.$fakeFocus=this.$empty,$(document).add("textarea").unbind("click",this.closeDropdownClick)},showSearchError:function(a){this.$dropdown.find(".location-error").text(a)},showPlaceSuggestions:function(){var a=this.$dropdown,b=(new twttr.views.GeoLocationDropdownItems({places:this.places()})).html();a.find(".override-location").remove(),a.find(".geo-turn-off-item").before(b),a.find(".override-location:first").addClass("checked-item padding-above"),this.updateMenuSeparators()},updateMenuSeparators:function(){var a=this.$dropdown;a.find(".location-search-result:first").addClass("padding-above"),a.find(".override-location:last,").addClass("separator-below"),a.find(".location-search-result:last").addClass("separator-below"),a.find("li:last").removeClass("separator-below")},setupInput:function(){var a=this;a.$input.click(function(a){a.stopPropagation()}).keydown(function(c){c.stopPropagation();if(c.keyCode===b.constants.keyCodes.escape)a.closeDropdown();else switch(c.keyCode){case b.constants.keyCodes.upArrow:a.arrowUp(),a.arrowKeyDownEvent=!0,c.preventDefault();break;case b.constants.keyCodes.downArrow:a.arrowDown(),a.arrowKeyDownEvent=!0,c.preventDefault();break;case b.constants.keyCodes.enter:a.hasFakeFocus()?a.$fakeFocus.find("a").trigger("select"):a.updateSearchResults(!0);default:a.inputChanged()}}).keypress(function(c){c.stopPropagation();if(c.charCode===0&&!a.arrowKeyDownEvent)switch(c.keyCode){case b.constants.keyCodes.upArrow:a.arrowUp(),c.preventDefault();break;case b.constants.keyCodes.downArrow:a.arrowDown(),c.preventDefault()}a.arrowKeyDownEvent=!1}).keyup(function(a){a.stopPropagation()}).change(function(){a.inputChanged()}).mousedown(function(){a.setFakeFocus(a.$empty)}).focus(function(){a.setFakeFocus(a.$empty)})},arrowUp:function(){var a=this.$fakeFocus.prevAll(".focusable:first");a.length||(a=this.$dropdown.find(".focusable:last")),this.setFakeFocus(a)},arrowDown:function(){var a=this.$fakeFocus.nextAll(".focusable:first");a.length||(a=this.$dropdown.find(".focusable:first")),this.setFakeFocus(a)},hasFakeFocus:function(){return!!this.$fakeFocus.length},setFakeFocus:function(a){this.$fakeFocus.removeClass("focused"),this.$fakeFocus=a.addClass("focused")},inputChanged:function(){var a=this;setTimeout(function(){(a.$input.val()||"")!==""&&a.$helpText.hide(),setTimeout(function(){a.updateSearchResults(!1)},0)},0)},updateSearchResults:function(a){var b=this,c=b.$input.val()||"";a&&c?b.enterQuery=c:c!==b.enterQuery&&(b.enterQuery=null);if(b.isUpdatingLocation())return;var d=!b.enterQuery,e=(d?"~":"=")+c;e!=b.searchKeyShowing&&b.setFakeFocus(b.$empty);if(b.searchKeyShowing===e||b.searchKeySearching===e||d&&b.searchKeySearching)return;var f=c?b.cache[e]:[];f?b.showSearchResults(f,e):b.search(e)},centroid:function(){var a=this.place();if(!a.bounding_box||a.bounding_box.type!=="Polygon"||!a.bounding_box.coordinates)return null;var b=a.bounding_box.coordinates[0];return!b||b.length!==4?null:{lat:(b[0][1]+b[2][1])*.5,lon:(b[0][0]+b[2][0])*.5}},search:function(a){var b=this,c=a.charAt(0)==="~",d=a.substr(1);b.$dropdown.addClass("geo-location-dropdown-searching"),b.searchKeySearching=a,b.showSearchError(_("Searching places...")),twttr.API.Place.search(twttr.merge({max_results:5,granularity:"neighborhood",autocomplete:c?"true":"false",query:d,full_geom:"false",success:function(c){var d=twttr.geo.placesFromApi(c);b.cache[a]=d,b.searchKeySearching===a&&(b.searchKeySearching=null,b.showSearchError("")),b.$dropdown.removeClass("geo-location-dropdown-searching"),b.updateSearchResults()},error:function(){b.$dropdown.removeClass("geo-location-dropdown-searching"),b.searchKeySearching===a?(b.showSearchError(_("Location service unavailable")),b.searchKeySearching=null):b.updateSearchResults()}},b.centroid()))},showSearchResults:function(a,b){this.searchKeyShowing=b,a.length===0&&b.length>1&&this.showSearchError(_("No search results")),this.$dropdown.find(".location-search-result").remove();var c=(new twttr.views.GeoLocationDropdownItems({places:a,for_search_results:!0})).html();this.$dropdown.find(".query-location").after(c),this.updateMenuSeparators()}}),twttr.app.waitForSignal("init",function(a){twttr.geo.location=new twttr.geo.Location}),a(twttr.geo.Location)})}),provide("control/Dropdown",function(a){using().as(function(b){(function(){var a={view:"Control"};twttr.klass("twttr.control.Base",function(b){this.options=$.extend({},a,b),this.itemView=twttr.views.DefaultDropdownItem,this.options.itemView&&(this.itemView=twttr.is.string(this.options.itemView)?twttr.views[this.options.itemView]:this.options.itemView)}).methods(twttr.EventProvider).methods({render:function(a,b){var c=this.viewData();this.view=new twttr.views[this.options.view](c),this.$dropdown=this.view.$html(),$(a)[b](this.$dropdown)},viewData:function(){return this.options}}),twttr.augmentString("twttr.helpers.control",function(a,b){var c=twttr.klass("twttr.control."+a,b);return c.subclassOf(twttr.control.Base),c}),function(){var a={direction:"left",view:"Dropdown"},b=[];twttr.helpers.control("Dropdown",function(c,d){b.push(this),this.$controller=$(c);var d=$.extend({},a,d);this.items=d.items||[],twttr.control.Dropdown.uber.constructor.call(this,d),this.registerEvents()}).statics({_registeredHtmlClick:!1,caches:{},createCache:function(a){this.caches[a]={}},closeAll:function(){twttr.each(b,function(a){a.close()})}}).methods({defaultDividerView:twttr.views.DefaultDropdownDivider,registerEvents:function(){this.$controller.bind("click",twttr.bind(this,function(a){this.toggle()}))},applyDirection:function(){this.$dropdown.css({left:this.options.direction=="left"?"0":"auto",right:this.options.direction=="right"?"0":"auto"})},flushItems:function(){this.$dropdown.empty(),this.items=[]},setItemsFromCallback:function(){var a=this;a.flushItems(),a.itemsCallback(function(b){a.addItems(b),a.registerItemHandlers()})},disable:function(){this.close(),this.$controller.unbind("click")},enable:function(){this.registerEvents()},open:function(a){this.constructor.closeAll(),this.itemsCallback&&this.setItemsFromCallback(),this.$controller.addClass("open").addClass("button-active"),this.$dropdown.css({top:this.$container?this.$container.outerHeight():this.$controller.outerHeight(),visibility:"visible"}),a&&this.$dropdown.css({opacity:0}).animate({opacity:1},{duration:500,queue:!1});var b=twttr.bind(this,function(a){this.$controller.get(0)!==a.target&&!$.contains(this.$controller.get(0),a.target)&&($("#doc").unbind("click",b),this.close())});$("#doc").bind("click",b)},close:function(a){if(a){var b=this;this.$dropdown.animate({opacity:0},500,function(){b.$controller.removeClass("open").removeClass("button-active"),b.$dropdown.css("visibility","hidden"),b.$dropdown.css("opacity",1)})}else this.$controller.removeClass("open").removeClass("button-active"),this.$dropdown.css("visibility","hidden")},toggle:function(){this.$controller.hasClass("open")?this.close():this.open()},addItem:function(a,b,c){b=b||"appendTo",this.items.push(a);var d=this.getItemView(a).$html();return b=="insertBefore"||b=="insertAfter"?d[b](c):d[b](this.$dropdown),d},addItems:function(a){var b=this;b.items=b.items.concat(a);var c=twttr.map(b.items,function(a){return b.getItemView(a).html()});$(c.join("")).appendTo(b.$dropdown)},itemsFrom:function(a){this.itemsCallback=a},registerItemHandlers:function(){var a=this.$dropdown.children();for(var b=0;b<this.items.length;b++){var c=this.items[b];if(!c.handlers)continue;$.each(c.handlers,function(c,d){var e=$(a[b]),f=[c];twttr.is.array(d)?f=f.concat(d):f.push(d),e.bind.apply(e,f)})}},render:function(a,b,c){if(b==="before"||b==="after")this.$controller.parent().hasClass("drop-down-container")?this.$container=this.$controller.parent():this.$container=this.$controller.wrap('<div class="drop-down-container"/>').parent();return twttr.control.Base.prototype.render.apply(this,arguments),c&&(this.constructor.caches[c.key]||(this.constructor.caches[c.key]={}),this.constructor.caches[c.key][c.id]=!0),this.registerItemHandlers(),this.applyDirection(),this},getItemView:function(a){return a.itemView?new twttr.views[a.itemView](a):a.divider?new this.defaultDividerView:new this.itemView(a)},viewData:function(){var a=this,b=twttr.map(this.items,function(b,c){return a.getItemView(b).html()});return{items:b.join("")}}})}()})(),a(twttr.control.Dropdown)})}),provide("widget/Dialog",function(a){using("constants","util").as(function(b){twttr.provide("twttr.dialogs"),twttr.dialogs.defaultOptions={modal:!1,stackPreviousModal:!1,draggable:!1,closable:!0,closeOnClickOutside:!1,closeOnNavigate:!1,destroyOnClose:!0,css:{width:500,height:"auto"},fixed:!0,template:{container_id:null,title:null,footer:null,content:null}};var c=!1,d=function(){c=!0;var a=$("<div>",{height:100,width:100,position:"absolute",top:-300,left:-300}).prependTo($("body")),b=$("<div>",{height:200}).appendTo(a);a.css("overflow-y","scroll");var d=a.width()-b.width();a.remove(),$("head").append("<style>          .modal-enabled,          .modal-enabled .global-nav-inner {            margin-right: "+d+"px        } </style>")},e=twttr.klass("twttr.widget.Dialog",function(a){var c=this;this.options=twttr.merge({},twttr.dialogs.defaultOptions,a||{},!0),this.options.template.closable=this.options.closable,this._isOpen=!1,this.view=new twttr.views[this.options.view||this.constructor._name](this.options),twttr.isT1?(this.options.modal=!0,this.$container=this.view.render(this.options.node||$(".twttr-dialog-wrapper"),"append")):this.$container=this.view.render(this.options.node||"body","append"),this.$dialog=this.$container.find(".twttr-dialog"),this.$title=this.$container.find(".twttr-dialog-header h3"),twttr.isT1?this.$container.css(twttr.merge({top:$(".js-banners").height()},this.options.css)):this.$dialog.css(this.options.css),this.$dialog.attr("data-component-term",b.util.underscore(this.constructor._name)),twttr.is.nil(c.options.template.footer)&&this.$container.find(".twttr-dialog-footer").hide(),this.options.draggable&&this.applyDraggability(),this.options.modal&&(this.$overlay=$('<div class="twttr-dialog-overlay"></div>').appendTo($("body"))),this._escKeyHandler=function(a){c.options.closable&&a.keyCode===b.constants.keyCodes.esc&&(c.close(),a.stopPropagation())};if(this.options.closeOnClickOutside||this.options.modal)this._clickOutsideHandler=function(a){!$.contains(c.$container.get(0),a.target)&&($.contains(document.body,a.target)||document.body===a.target)&&(c.close(),c.options.modal||(a.preventDefault(),a.stopPropagation()))};if(this.options.closeOnNavigate){var d=twttr.bind(this,this.close);twttr.router.bind("routeFollowed",d),this.bind("close",function(){twttr.router.unbind("routeFollowed",d)})}this.registerEvents()}).statics(twttr.EventProvider).statics({currentModal:!1,close:function(){var a=0;while(this.currentModal&&a++<8)this.currentModal.close()}}).methods(twttr.EventProvider).methods({$find:function(a){return this.$container.find(a)},registerEvents:function(){var a=this;this.$find("textarea, input[type=text], input[type=password]").bind("keydown keypress keyup",function(c){twttr.components.Autocomplete._isCompletionsOpen||(c.stopPropagation(),c.type==="keydown"&&c.keyCode===b.constants.keyCodes.esc&&a.close())}),this.$container.delegate(".twttr-dialog-close","click",function(b){b.preventDefault(),b.stopPropagation(),a.close()}),twttr.router.bind("urlChanged",this.urlChangedListener=function(b,c){a.close()});if($.browser.mozilla&&$.browser.version.slice(0,1)=="8"){var c=null;this.bind("close",function(){twttr.$win.scrollTop(c)}),this.bind("open",function(){c=twttr.$win.scrollTop()})}},applyDraggability:function(){var a=this;this.$container.addClass("draggable").draggable({cursor:"move",handle:this.$container.find(".js-twttr-dialog-draggable"),start:function(){a.$container.addClass("unselectable"),$("#doc").addClass("unselectable")},stop:function(){a.$container.removeClass("unselectable"),$("#doc").removeClass("unselectable")},cancel:":input,option,.js-twttr-dialog-not-draggable"})},toggle:function(){return this[this._isOpen?"close":"open"](),this},open:function(){c||d();var a=this;return twttr.widget.Dialog.currentModal&&(this.options.stackPreviousModal&&this.options.modal?(this.previousModal=twttr.widget.Dialog.currentModal,this.previousModal._close()):twttr.widget.Dialog.close()),this.options.modal&&(twttr.widget.Dialog.currentModal=this,this.$overlay.show(),$("body").addClass("modal-enabled")),this.position(),this.$container.css({visibility:"visible",display:"block"}),this.trigger("open"),twttr.widget.Dialog.trigger("open"),this._isOpen=!0,twttr.$win.bind("keydown",this._escKeyHandler),this._clickOutsideHandler&&setTimeout(function(){$("body").bind("click",a._clickOutsideHandler)},0),this},_close:function(){return this.options.modal&&(twttr.widget.Dialog.currentModal=!1,this.$overlay.hide(),$("body").removeClass("modal-enabled")),document.activeElement&&$.contains(this.$container.get(0),document.activeElement)&&$(document.activeElement).blur(),this.$container.css({visibility:"hidden",display:"none"}),$(".tipsy").remove(),this.trigger("close"),twttr.widget.Dialog.trigger("close"),this._isOpen=!1,twttr.$win.unbind("keydown",this._escKeyHandler),this._clickOutsideHandler&&$("body").unbind("click",this._clickOutsideHandler),this.previousModal&&(this.previousModal.open(),delete this.previousModal),this},show:function(){return this.open()},hide:function(){return this._close()},setFooterText:function(a){this.$find(".twttr-dialog-footer").html(a)},setError:function(a){this.$find(".twttr-dialog-error").show().html(_("<p>{{message}}</p>",{message:a}))},clearError:function(){this.$find(".twttr-dialog-error").hide().empty()},position:function(){this.options.fixed||this.$container.addClass("static");var a=$(window).scrollTop(),b=this.$container.innerHeight(),c=$(window).height(),d=Math.round(c/2-b/2);this.options.fixed||(d+=a);var e=this.$container.innerWidth(),f=$(window).width(),g=twttr.i18n&&twttr.i18n.rtl?"right":"left",i=Math.round(f/2-e/2);d=this.options.positioning&&this.options.positioning.top?this.options.positioning.top:d,i=this.options.positioning&&this.options.positioning.left?this.options.positioning.left:i;var j={top:d};return j[g]=i,this.$container.css(j),this},destroy:function(){return this._close(),this.remove(),this},remove:function(){return this.$container.unbind().remove(),this.$overlay&&this.$overlay.unbind().remove(),this._isOpen=!1,this},close:function(){return this[this.options.destroyOnClose?"destroy":"_close"]()},isOpen:function(){return this._isOpen}});twttr.isT1&&e.methods({position:twttr.util.noopInT1}),a(e)})}),provide("dialogs",function(a){using("_","constants").as(function(b,_){twttr.aug(twttr.dialogs,{reply:function(a,b){var c=a.dataFields||twttr.TweetBox._getDefaultContentForReply(a.$tweet,a.screenName,twttr.currentUserScreenName),d={multiple:c.multiple,modal:!0,draggable:!0,defaultContent:c.defaultContent,template:{title:_("Reply to @<strong>{{screen_name}}</strong>",{screen_name:a.screenName}),footer:""},data:a,origin:a.origin};return b?d:new twttr.widget.ReplyDialog(d)},directMessage:function(a){if(twttr.isT1)var b=twttr.widget.DirectMessageDialog.views.newConversation;else var c=twttr.assets.path("sticky/default_profile_images/default_profile_6_mini.png",{isVersioned:!1}),b={modal:!1,draggable:!0,basic:!1,template:{title:_("Message")+' <div><img class="avatar" src="'+c+'"/> <input class="twttr-directmessage-input" type="text"/></div> <span class="twttr-dm-check"/>',footer:_("Tip: you can send a message to anyone who follows you")},origin:a.origin};return new twttr.widget.DirectMessageDialog(b)},dmSingle:function(a){return twttr.isT1?new twttr.widget.DirectMessageDialog(twttr.widget.DirectMessageDialog.views.conversation,a.user.screenName):(twttr.merge(a,{draggable:!0,basic:!1,template:{title:'<img src="'+a.user.profile_image_url+'"/> '+_("<strong>Send <b>{{user_name}}</b> a message</strong>",{user_name:a.user.name})}}),new twttr.widget.DirectMessageDialogSingle(a))},keyboardShortcuts:function(){return twttr.dialogs._keyboardShortcuts=twttr.dialogs._keyboardShortcuts||new twttr.widget.Dialog({css:{width:twttr.loggedIn?600:300},modal:!0,draggable:!0,destroyOnClose:!1,template:{title:_("Keyboard shortcuts"),content:(new twttr.views.KeyboardShortcuts).html()}}),twttr.dialogs._keyboardShortcuts},discoverable:function(){var a=twttr.currentUser,b={help_url:twttr.router.helpDiscoveryPath(),email_checked:!a.emailDiscoverabilitySet||a.discoverableByEmail,phone_checked:!a.mobilePhoneDiscoverabilitySet||a.discoverableByMobilePhone};return new twttr.widget.DiscoveryDialog(twttr.merge(b,a.attributes))},verifyEmail:function(a){return new twttr.widget.VerifyEmailDialog(a,twttr.currentUser)},retweet:function(a,b,c){var d,e,f=twttr.isT1&&twttr.currentUser&&new Date(2012,6,3)<new Date(twttr.currentUser.createdAt)&&twttr.abdecider.choose("change_deutsch_verbs_229")==="change_verbs";f?(d="Diesen Tweet mit Deinen Followern teilen?",e="Teilen"):(d=_("Retweet this to your followers?"),e=_("Retweet"));var g={modal:!0,draggable:!0,callback:c,template:{title:d,container_id:"retweet-dialog",footer:"",content:(new twttr.views.Prompt({ok:e,cancel:_("Cancel")})).html()},data:{tweetId:a},tweetText:b,css:{width:500}};return new twttr.widget.RetweetDialog(g)},deleteMessage:function(a){var b={modal:!0,stackPreviousModal:!0,draggable:!0,callback:a,template:{title:_("Are you sure you want to delete this message?")},css:{width:450}};return new twttr.widget.Prompt(b)},deleteSavedSearch:function(a){return new twttr.widget.Prompt({modal:!0,template:{title:_("Are you sure you want to delete this search?"),content:(new twttr.views.Prompt({ok:_("Yes"),cancel:_("No")})).html()},callback:a})},goToUser:function(){var a={modal:!0,draggable:!0,template:{title:_("Go to a person's profile"),content:'<input class="twttr-goto-user-input" type="text"/>'},css:{width:450},positioning:{top:75}},c=new twttr.widget.Dialog(a),d=c.$find(".twttr-goto-user-input"),e=function(a){c.close(),twttr.router.one("routed",function(){$('<input type="text"/>').css({position:"absolute",top:0,left:0}).appendTo("body").focus().remove()});var b=a.replace("@","").split("/");b.length===1?(screen_name=b[0],twttr.API.User.find(screen_name,{success:function(a){twttr.router.routeTo(twttr.router.profilePath({screen_name:screen_name}))},error:function(a){twttr.router.routeTo(twttr.router.userSearchPath({query:screen_name}))}})):twttr.router.routeTo(twttr.router.userListPath({screen_name:b[0],list_slug:b[1]}))},f=new twttr.components.Autocomplete({limit:8,input:d,type:"username",preselect:!0,defaultResults:[{format:function(a){return(new twttr.views.CurrentTextUserAutocompleteItem({screenname:a.charAt(0)==="@"?a.substring(1):a})).html()},show:function(a,b){for(var c in b)if(b[c][1]===a)return!1;return!0}}]});return f.bind("select",function(a,b,c,d,f,g){e(f)}),d.bind("keypress",function(a){a.keyCode===b.constants.keyCodes.enter&&!f._isCompletionsOpen&&(a.preventDefault(),e(d.val()))}),c.bind("open",function(){d.focus()}),c},searchFacets:function(a){if(!twttr.decider.isAvailable("phoenix_facets"))return!1;var c={modal:!0,draggable:!0,template:{title:a==="photos"?_("Search photos"):_("Search videos"),content:'<input class="twttr-search-facets-input" type="text"/>'},css:{width:450},positioning:{top:75}},d=new twttr.widget.Dialog(c),e=d.$find(".twttr-search-facets-input");return e.bind("keypress",function(c){c.keyCode===b.constants.keyCodes.enter&&(c.preventDefault(),d.close(),twttr.router.one("routed",function(){$('<input type="text"/>').css({position:"absolute",top:0,left:0}).appendTo("body").focus().remove()}),twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:e.val(),mode:a})))}),d.bind("open",function(){e.focus()}),d},_trendsOptions:function(){return options={draggable:!0,css:{width:520},template:{title:_("Choose a trend location")}}},trends:function(){return arguments.callee._ret=arguments.callee._ret||new twttr.widget.TrendsDialog(this._trendsOptions())},signinOrSignup:function(a){a=a||{};var c=a.follow?a.follow.screenName:!1,d={screen_name:c,signup_source:twttr.audit.currentPage()};if(c)d.redirect_after_login=twttr.router.profilePath(d);else if(twttr.audit.currentPage()==="permalink"||twttr.audit.currentPage()==="profile"||twttr.audit.currentPage()==="search")d.redirect_after_login=twttr.audit.currentPath();var e=c?_("Sign in to Twitter &amp; follow @{{screen_name}}",d):_("Sign in to Twitter");a.justSignup&&(d.is_signup_only=!0,d.guest_modal=!0,d.signup_source=twttr.audit.currentPage(),e=c?_("Sign up for Twitter &amp; follow @{{screen_name}}",d):_("Sign up for Twitter"));var f=new twttr.widget.Dialog({css:{width:500},modal:!0,draggable:!0,template:{title:e,content:(new twttr.views.SigninOrSignup(d)).html()}}),g=f.$find("form.signin"),i=g.find(".textbox input");return a.justSignup&&f.$dialog.addClass("signup-only-dialog"),twttr.helpers.addHoldingInputEvents(g),twttr.helpers.addFormEvents(g),i.bind("keypress",function(a){a.keyCode===b.constants.keyCodes.enter&&$(this).val()&&(a.preventDefault(),g.submit())}),f.bind("open",function(){i.first().focus();var b={section:"auth_dialog",component:a.follow?"unauth_follow":"unauth_action",action:"open"};trackClient(b,twttr.audit.currentPage())}),f.$find("form").bind("submit",function(){setTimeout(function(){f.close(),trackClient({section:"auth_dialog",component:"signup_form",action:"signup_click"},twttr.audit.currentPage())},0)}),f},signupModalDialogGuest:function(a,b){var c=[],d=[],e=0;for(var f=0;f<a;f++)twttr.API.User.find(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-f-1],{success:function(f){c.push({name:f.name,screen_name:f.screenName,profile_image_url:f.profileImageUrl,id:f.id,description:"@"+f.screenName,count_num:e}),d.push(f.screenName),e++;if(e==a){var g={screen_names:d.join(","),signup_source:twttr.audit.currentPage(),user_data_list:c,guest_modal:!0},i=new twttr.widget.Dialog({css:{width:575},modal:!0,draggable:!0,template:{title:_("Follow your interests on Twitter!"),content:(new twttr.views.GuestModalSignup(g)).html()}});$signup=i.$find("form.signup-btn"),$inputs=$signup.find(".textbox input"),twttr.helpers.addFormEvents($signup),twttr.helpers.addHoldingInputEvents($signup),i.bind("open",function(){$inputs.first().focus()});var j=i.$find("input[type=checkbox]");j.bind("click",function(a){var b=i.$find("input[type=checkbox]:checked"),c=$.map(b,function(a,b){return a.value}).join(",");$signup.find("input[name=follows]").val(c)}),i.$find("form").bind("submit",function(){i.close(),trackClient({section:"profiles_viewed_dialog",component:"signup_form",action:"signup_click"},twttr.audit.currentPage())}),b(i)}}})},searchOperators:function(){return twttr.dialogs._searchOperators=new twttr.widget.Dialog({css:{width:600},modal:!1,draggable:!0,template:{title:_("Search Operators"),content:(new twttr.views.SearchOperators).html()}}),twttr.dialogs._searchOperators},smsCodes:function(){return twttr.dialogs._smsCodes=twttr.dialogs._smsCodes||new twttr.widget.Dialog({modal:!1,draggable:!0,template:{title:_("Two-way (sending and receiving) short codes:"),content:(new twttr.views.SmsCodes).html()}}),twttr.dialogs._smsCodes},sensitiveFlagConfirmation:function(a){var b=new twttr.widget.Prompt({modal:!1,draggable:!0,template:{title:_("Flag this media"),content:(new twttr.views.SensitiveFlagConfirmation).html()},callback:function(c){c&&(b.$find("#sensitive-settings-checkbox").attr("checked")&&twttr.currentUser.updateViewPossiblySensitive(!1,{success:function(){twttr.showMessage(_("Your media display settings have been changed."))},error:function(a){twttr.showError(_("Couldn't set inline media settings."))}}),b.$find("#sensitive-illegal-checkbox").attr("checked")&&a())}});return b},embedCode:function(a){return new twttr.widget.EmbedDialog(a)}}),a(twttr.dialogs)})}),provide("widget/TweetDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.TweetDialog",function(a){a=twttr.merge({basic:!0,modal:!0,fixed:!0},a),a.template=twttr.merge({show_geo:!0,container_id:"tweet_dialog"},a&&a.template),a=$.extend(!0,{basic:!0,template:{show_geo:!0,container_id:"tweet_dialog"}},a),twttr.widget.TweetDialog.uber.constructor.call(this,a),this._ready=!1}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.view.bind("ready",twttr.bind(this,function(){this._ready=!0,setTimeout(twttr.bind(this,function(){this.onReady()}),0)})),this.view.tweetBox.bind("tweetSuccess",twttr.bind(this,function(a,b,c){c==="reply"&&b.inReplyToScreenName?twttr.showMessage(_("Your Tweet to @{{username}} has been sent!",{username:b.inReplyToScreenName})):(twttr.showMessage(_("Your Tweet was posted!")),$(document).trigger("tweetSuccess",b)),this.destroy()})),this.view.tweetBox.bind("dmSuccess",twttr.bind(this,function(b,c){twttr.is.def(twttr.messageManager)&&twttr.messageManager.addMessage(c),twttr.showMessage(_("Your message was sent!")),a.close()})),this.view.tweetBox.bind("dmFail",twttr.bind(this,function(b,c){a.close()})),this.options.basic&&this.view.tweetBox.bind("titleChanged",twttr.bind(this,function(a,b){this.$title.html(b||this.options.template.title)}))},onReady:function(){var a=[];return function(b){b?a.push(b):(twttr.each(a,function(a){a()}),a=[])}}(),open:function(){return twttr.widget.Dialog.prototype.open.call(this),this.onReady(twttr.bind(this,function(){setTimeout(twttr.bind(this,function(){this.options.defaultContent&&(this.focus(),this.setContent(this.options.defaultContent))}),0)})),this},setContent:function(a){return this.view.tweetBox.editor.setContent(a),this},setCaretPosition:function(a,b){b=b||a;var c=this.view.tweetBox.editor.$editor[0];if(c.setSelectionRange)c.focus(),c.setSelectionRange(a,b);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveStart("character",a),d.moveEnd("character",b),d.select()}},focus:function(){if(this.options.defaultContent){var a=this.view.tweetBox.editor.$editor.val().length;this.setCaretPosition(a)}else this.view.tweetBox.editor.focus();return this}}),a(twttr.widget.TweetDialog)})}),provide("widget/Prompt",function(a){using("_","constants").as(function(b,_){var c=twttr.isT1?"primary-btn":"selected";twttr.klass("twttr.widget.Prompt",function(a){var b={view:"Dialog",template:{content:(new twttr.views.Prompt({ok:_("Yes"),cancel:_("No")})).html()}};this.options=twttr.merge({},b,a,!0),twttr.widget.Prompt.uber.constructor.call(this,this.options)}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this),this.$ok=this.$container.find(".js-prompt-ok"),this.$cancel=this.$container.find(".js-prompt-cancel"),this.$ok.addClass(c).bind("click",twttr.bind(this,function(a){a.preventDefault(),this.close(),this.options.callback(!0)})),this.$cancel.bind("click",twttr.bind(this,function(a){a.preventDefault(),this.options.callback(!1),this.close()})),this.$container.bind("keypress",twttr.bind(this,function(a){a.stopPropagation();if(a.metaKey)return;if(a.keyCode===b.constants.keyCodes.tab)this.$cancel.toggleClass(c),this.$ok.toggleClass(c);else if(a.keyCode===b.constants.keyCodes.enter||a.keyCode===b.constants.keyCodes.spacebar)a.preventDefault(),this.options.callback(this.$ok.hasClass(c)),this.close()})),this._$tabInput=$('<input type="text" class="twttr-hidden-input"/>').appendTo(this.$dialog).bind("keypress",function(a){a.preventDefault()})},open:function(){return twttr.widget.Dialog.prototype.open.call(this),setTimeout(twttr.bind(this,function(){this._$tabInput.focus()}),10),this}}),a(twttr.widget.Prompt)})}),provide("widget/DeviceSetupDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.DeviceSetupDialog",function(a){a=twttr.merge({modal:!0,draggable:!0,css:{width:550,height:"auto"},positioning:{top:80},template:{title:_("Get notifications and Tweet via SMS"),content:(new twttr.views.DeviceSetupDialog).html()}},a||{},!0),a.view="Dialog",this._fetchStatus();var b=this;this._carriers=twttr.API.Device.carriers({success:function(a){b._carriers=a}}),twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).statics({POLLING_DELAY:15e3}).methods({close:function(){this._clearDelayedStatusFetch(),twttr.widget.Dialog.prototype.close.call(this)},_fetchStatus:function(){this._clearDelayedStatusFetch();var a=this;twttr.API.Device.list({success:twttr.bind(this,this._updateStatus),error:function(b){a.close(),twttr.showError(b.response.error.message)}})},_fetchStatusDelayed:function(){this._fetchTimeout=window.setTimeout(twttr.bind(this,this._fetchStatus),twttr.widget.DeviceSetupDialog.POLLING_DELAY)},_clearDelayedStatusFetch:function(){this._fetchTimeout&&(window.clearTimeout(this._fetchTimeout),this._fetchTimeout=null)},_updateStatus:function(a){if(a.length==0)this._showCreate();else{var b=a[0];b.verified?this._showVerified(b):this._showWaiting(b)}},_showCreate:function(){var a=this,b=this.$container.find(".twttr-dialog-device-setup"),c=new twttr.views.DeviceSetupDialogCreate;b.empty().append('<div class="loading"></div>'),this._carriers.get(function(d){b.empty();var e=c.render(b,"append"),f=e.find("select.country-or-region"),g=e.find("select.country-in-region"),i=e.find("select.carrier"),j=e.find("select.language"),k=!1;for(var l=0;l<d.regionsAndCountryCodes.length;++l){var m=d.regionsAndCountryCodes[l];m[0]=="-------------"?$('<option disabled="disabled">').text(m[0]).val(m[1]).appendTo(f):$("<option>").text(m[0]).val(m[1]).appendTo(f)}var n=function(){var a=$(this),b=a.find("option:selected"),c=b.text(),f=b.val();if(d.countries[c]){var l=c;g.empty();var m=d.countries[l];for(var o=0;o<m.length;++o){var p=m[o];$("<option>").text(p[0]).val(p[1]).appendTo(g)}g.parents(".field").first().show(),n.call(g.get(0));return}var q=c;e.find(".country-code").text(f),a.hasClass("country-or-region")&&(g.empty(),g.parents(".field").first().hide()),i.empty(),j.empty();var r=d.carriers[q],s=d.languages[q];k=!1;if(d.countries[_("Satellite")])for(var o=0;o<d.countries[_("Satellite")].length;o++)if(d.countries[_("Satellite")][o][0]==q){k=!0;break}if(r){for(var o=0;o<r.length;++o){var t=r[o];$("<option>").text(t.display).val(t.value).appendTo(i)}k?i.parents(".field").first().hide():i.parents(".field").first().show()}else i.parents(".field").first().hide();if(s){for(var o=0;o<s.length;++o){var u=s[o];$("<option>").text(u.display).val(u.value).appendTo(j)}j.parents(".field").first().show()}else j.parents(".field").first().hide()};f.change(n),g.change(n),n.call(f.get(0)),twttr.helpers.addFormEvents(e.find("form"),function(b,c){var d=$(this);c.device_country_intl_prefix=d.find(".country-code").text(),d.find(".error").removeClass("error"),d.find(".error-text").remove(),d.addClass("submitting"),twttr.API.Device.create(c,{success:function(b){d.removeClass("submitting");var e=b.devices[0];b.duplicate?a._showDuplicate(e,c):b.errors?a._showCreateErrors(d,b.errors):(k||(e.carrier_name=i.find(":selected").text()),a._showWaiting(e))},error:function(a){d.removeClass("submitting");var b=a.response.errors;b&&b.length&&b[0].message?twttr.showError(b[0].message):twttr.showError(_("Whoops! Something went wrong. Please try again!"))}})})})},_showCreateErrors:function(a,b){var c=b.device;for(var d=0;d<c.length;++d){var e=c[d],f=a.find("input[name='device["+e[0]+"]']"),g=f.parents(".field").first();$error=$("<div>").addClass("error-text").text(e[1]),g.addClass("error"),g.find(".label").first().append($error)}},_showDuplicate:function(a,b){this._updateDeviceForRendering(a);var c=this,d=this.$container.find(".twttr-dialog-device-setup");d.empty();var e=(new twttr.views.DeviceSetupDialogDuplicate(a)).render(d,"append");e.find(".retry").click(function(a){a.preventDefault();var d=$(this);if(d.hasClass("disabled"))return;d.addClass("disabled"),twttr.API.Device.create(b,{success:function(a){d.removeClass("disabled"),a.duplicate||(a.errors?c._showCreate():c._showWaiting(a.devices[0]))},error:function(){d.removeClass("disabled")}})}),e.find(".cancel-instructions a").click(function(a){a.preventDefault(),c._showCreate()})},_showWaiting:function(a){this._fetchStatusDelayed();var b=this,c=this.$container.find(".twttr-dialog-device-setup"),d=c.find(".twttr-dialog-device-setup-waiting");if(d.length)return;c.empty(),this._updateDeviceForRendering(a),d=(new twttr.views.DeviceSetupDialogWaiting(a)).render(c,"append"),d.find(".refresh a").click(function(a){a.preventDefault(),b._fetchStatus()}),d.find(".cancel-instructions a").click(function(c){c.preventDefault(),b._clearDelayedStatusFetch(),twttr.API.Device.destroy(a.id,{success:twttr.bind(b,b._showCreate)})})},_showVerified:function(a){var b=this.$container.find(".twttr-dialog-device-setup");b.empty(),this._updateDeviceForRendering(a),(new twttr.views.DeviceSetupDialogVerified(a)).render(b,"append")},_updateDeviceForRendering:function(a){a.address_without_country_code=a.address.replace("+"+a.country_code,""),a.stop_command="Stop",a.go_command="Go"}}),a(twttr.widget.DeviceSetupDialog)})}),provide("widget/InviteContactsDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.InviteContactsDialog",function(a,b){b=b||{},this.routeToHome=b.routeToHome,b.template=b.template||{},b.template.title=b.template.title||_("Invite your friends who aren't on Twitter"),b.template.content=b.template.content||"",defaultOptions={modal:!0,draggable:!0},b=twttr.merge({},defaultOptions,b,!0),b.view="Dialog",twttr.widget.Dialog.call(this,b);var c=b.onSuccess||$.noop,d=this,e={onSuccess:function(){c.call(d)},onSubmit:function(){d.clearError()},showError:function(a){d.setError(a)},scribbler:b.scribbler,clientEventComponent:"invite_contacts_dialog"},f=new twttr.components.InviteContacts(a,e);this.$container.find(".twttr-dialog-content").append(f.$node),this.$container.find(".twttr-dialog-footer").remove()}).subclassOf(twttr.widget.Dialog).methods({close:function(){this.constructor.uber.close.call(this),this.routeToHome&&twttr.router.routeTo(twttr.router.homePath())}}),a(twttr.widget.InviteContactsDialog)})}),provide("widget/ListDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.ListDialog",function(a){a=a||{},a.template=a.template||{},a.template.title=a.template.title||a.list?_("Edit list details"):_("Create a new list"),a.template.content=a.template.content||(new twttr.views.ListDialog(a.list)).html(),twttr.is.def(a.modal)||(a.modal=!0),twttr.is.def(a.draggable)||(a.draggable=!0),a.view="Dialog",twttr.is.fn(a.onSuccess)||(a.onSuccess=function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:a.slug}))}),twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).methods({open:function(){twttr.widget.Dialog.prototype.open.call(this),this.$container.find("input[name=name]").focus()},registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this);var b=this.$container.find(".update-list-button");this.$container.find(".field .text").bind("focus blur keyup",function(a){this.value.length?b.removeClass("disabled"):b.addClass("disabled")}),b.click(function(b){if($(this).hasClass("disabled"))return;$(this).addClass("disabled");var c={name:a.$container.find("[name=name]").val(),description:a.$container.find("[name=description]").val(),mode:a.$container.find("[name=mode]:checked").val(),error:function(b){twttr.helpers.showErrorFromResponse(b),$(a).removeClass("disabled")},complete:function(b){a.close()}};a.options.list?a.options.list.update(twttr.merge(c,{success:function(b){twttr.showMessage(_("List updated!")),a.options.onSuccess(b)}})):twttr.currentUser.lists.create(c.name,twttr.merge(c,{success:function(b){twttr.showMessage(_("List created!")),a.options.onSuccess(b)}}))})},close:function(){this.constructor.uber.close.call(this),this.remove()}}),a(twttr.widget.ListDialog)})}),provide("components/t1/DirectMessageDialog",function(a){using("widget/Dialog","constants","TweetBox",function(b,c,d){var e=twttr.klass("twttr.widget.DirectMessageDialog",function(a,b,c){twttr.messageManager._fetchMessages(),c=c||{},d=c.tweetBox||d,twttr.widget.Dialog.call(this,{modal:!0,draggable:!0,view:"DirectMessageDialog",closeOnNavigate:!0,template:{footer:!0},positioning:{top:55}}),this.initComponentEvents(this.$container);var e=this;twttr.messageManager.bind("updatedThread",function(a,b,c,d){e._updateConversation(b,c,d)}),twttr.messageManager.bind("deletedThread",function(a,b){e._deleteThread(b)}),this._hideTweetBox(),this.tweetBox=new d(".twttr-dialog-container .js-dm-tweetbox",{data:{getUser:twttr.bind(this,this._getRecipient)},closeAfterSuccess:!1,condensed:!1,width:450,height:56,statusAction:"directMessage",displayError:!1,template:{button_text:_("Send message"),show_geo:!1,show_turkey:!1,show_title:!1}}),this.tweetBox.bind("dmSuccess",function(a,b,c){twttr.messageManager.addMessage(b,!0),e.switchToConversationView(b.threadId)}),this.tweetBox.bind("dmError",function(a,b){var b=twttr.errors.getViewForErrorCode(b,"dm").html();e._showError($("<span>").html(b))}),this.tweetBox.bind("error",function(a,b){e._showError(b)});var e=this;a=a||twttr.widget.DirectMessageDialog.views.conversationList,this.bind("close",function(){twttr.messageManager.unbind("updatedThread"),twttr.messageManager.unbind("deletedThread")}),this.bind("open",function(){switch(a){case twttr.widget.DirectMessageDialog.views.newConversation:e.switchToNewMessageView(b),e._trackClientDialogImpression("dm_new_conversation");break;case twttr.widget.DirectMessageDialog.views.conversation:e.switchToConversationView(b),e._trackClientDialogImpression("dm_existing_conversation");break;case twttr.widget.DirectMessageDialog.views.conversationList:default:e.switchToConversationListView(),e._trackClientDialogImpression("dm_conversation_list")}})}).subclassOf(b).mixin(twttr.mixins.componentEvents,twttr.mixins.i18nTweet).statics({views:{conversationList:1,conversation:2,newConversation:3}}).methods({_getRecipient:function(){var a=this.$find(".js-dm-conversation[data-thread-id]").attr("data-thread-id");return a||this.$find(".js-dm-user-autocomplete").val()},_trackClientDialogImpression:function(a){trackClient({component:a,action:"open"},{})},_trackClientDelete:function(a){trackClient({component:"direct_message",action:"delete"},{item_ids:[a],item_count:1})},switchToConversationListView:function(){var a=this;this._updateHeader({conversation_list:!0}),this._hideTweetBox(),twttr.messageManager.getAllThreads(function(b){a._updateContent("DirectMessageDialogConversationList",{threads:b}),a.$find("div.dm-thread-content").each(function(){a.updateRtlDisplay($(this))})})},switchToConversationView:function(a){var b=this;twttr.messageManager.getThread(a,function(c){if(!c){b.switchToNewMessageView(a);return}var d=c.messages[0],e=twttr.helpers.isCurrentUser(d.recipient)?d.sender:d.recipient;b._updateHeader({conversation:!0,name:e.name}),b._updateContent("DirectMessageDialogConversation",c),b.$find("div.dm-content").each(function(){b.updateRtlDisplay($(this))}),b._showTweetBox(a),b.tweetBox.focus(),b.$find("a.js-dm-delete").tipsy({gravity:"s"});var f=b.$find(".js-dm-conversation");f.scrollTop(f[0].scrollHeight),twttr.messageManager.markThreadAsRead(c.threadId)})},switchToNewMessageView:function(a){var b=this;this._updateHeader({new_dm:!0}),this._updateContent("DirectMessageDialogNew",{}),twttr.components.Autocomplete.getAutocompletedUsers(function(){b.autocomplete=new twttr.components.Autocomplete({limit:8,input:b.$find(".js-dm-user-autocomplete")}),b.autocomplete.bind("select",function(a,c,d,e,f,g){b._setProfileImageUrl(e),b.switchToConversationView(f),b.tweetBox.focus()}),b.autocomplete.bind("hide",function(){!b.$find(".js-dm-user-autocomplete:focus").length&&b._verifyUser()}),b._setProfileImageUrl(),b.autocomplete.focus(),a&&(b.autocomplete.set(a),b._verifyUser())}),this._showTweetBox()},_updateConversation:function(a,b,c){var d=this._getCurrentView();switch(d){case twttr.widget.DirectMessageDialog.views.conversationList:this._updateConversationListView(a,b);break;case twttr.widget.DirectMessageDialog.views.conversation:this._updateConversationView(a,b,c)}},_deleteThread:function(a){this.$find(".js-dm-threads .js-dm-thread[data-thread-id="+a+"]").remove(),this.$find(".js-dm-conversation[data-thread-id="+a+"]").empty()},_updateConversationListView:function(a,b){var c=this.$find(".js-dm-threads"),d=c.find(".js-dm-thread[data-thread-id="+a.threadId+"]"),e=$((new twttr.views.DirectMessageDialogConversationListItem(a)).html());d.length>0&&d.replaceWith(e),d=e,b==="new"&&c.find(".js-dm-thread-list").prepend(d)},_updateConversationView:function(a,b,c){var d=this.$find(".js-dm-conversation[data-thread-id="+a.threadId+"]");if(d.length>0){var e=d.find(".js-dm-item[data-message-id="+c.messageId+"]");switch(b){case"new":if(e.length)break;d.append((new twttr.views.DirectMessageDialogConversationItem(c.message)).html()),d.animate({scrollTop:d.attr("scrollHeight")},500);break;case"delete":e.remove()}twttr.messageManager.markThreadAsRead(a.threadId)}},_getCurrentView:function(){return this.$find(".js-dm-threads").length>0?twttr.widget.DirectMessageDialog.views.conversationList:this.$find(".js-dm-conversation").length>0?twttr.widget.DirectMessageDialog.views.conversation:this.$find(".js-dm-new").length>0?twttr.widget.DirectMessageDialog.views.newConversation:null},_updateHeader:function(a){return this._replaceDivWithView(".js-dm-header","DirectMessageDialogHeader",a)},_setProfileImageUrl:function(a){a=a||twttr.assets.path("sticky/default_profile_images/default_profile_6_mini.png",{isVersioned:!1}),this.$find("img.js-dm-avatar").attr("src",a)},_updateContent:function(a,b){return this._replaceDivWithView(".js-dm-content",a,b)},_replaceDivWithView:function(a,b,c){return this.$find(a).html((new twttr.views[b](c)).html())},_hideTweetBox:function(){this.$find(".js-dm-tweetbox").hide()},_showTweetBox:function(a){this.tweetBox.resetTweetContent(),this.$find(".js-dm-tweetbox").show()},_showError:function(a){var b=this.$find(".js-dm-error");b.find(".dm-error-text").html(a),b.show()},_hideError:function(){this.$find(".js-dm-error").hide()},_verifyUser:function(){var a=this,b=this.$find(".js-dm-user-autocomplete").val();this._hideError();if(!b||twttr.is.blank(b))return;if(!b.match(c.regexps.username)){a._setProfileImageUrl(),a._showError(_("Whoops! That's not a valid username."));return}twttr.API.User.find(b,{success:function(b){twttr.currentUser.relationshipWith(b.screenName,function(c){c.canDM?a._setProfileImageUrl(b.profileImageUrl):a._showError(_("You can't send a message to a user who is not following you."))})},error:function(b){a._setProfileImageUrl(),a._showError(_("Whoops! That user does not exist."))}})}}).click({".js-dm-thread-link":function(a){var b=$(a.currentTarget).attr("data-thread-id");this.switchToConversationView(b),a.preventDefault()},".js-dm-header-title":function(a){this.switchToConversationListView(),a.preventDefault()},".js-dm-header-new":function(a){this.switchToNewMessageView(),a.preventDefault()},".js-dm-delete":function(a){this.$find(".js-dm-delete").tipsy("hide"),$("div.js-dm-tweetbox").addClass("dm-deleting");var b=$(a.currentTarget).attr("data-message-id"),c=".js-dm-delete-confirm";this._replaceDivWithView(c,"DirectMessageDeleteConfirm",{messageId:b}),$(c).show(),a.preventDefault()},".js-dm-delete-confirm .js-prompt-ok":function(a){var b=$(a.currentTarget).attr("data-message-id"),c=this.$find(".js-dm-conversation").attr("data-thread-id");this.$find(".js-dm-item[data-message-id="+b+"]").remove(),this.$find(".js-dm-item").length==0&&this.switchToConversationListView(),$("div.js-dm-tweetbox").removeClass("dm-deleting"),twttr.messageManager.deleteMessage(b,c),this._trackClientDelete(b),a.preventDefault()},".js-dm-delete-confirm .js-prompt-cancel":function(a){var b=$(a.currentTarget).attr("data-message-id");this.$find(".js-dm-item[data-message-id="+b+"]").hide(),$("div.js-dm-tweetbox").removeClass("dm-deleting"),a.preventDefault()},".js-dm-error .js-dismiss":function(a){this._hideError(),a.preventDefault()}}).focus({".twitter-anywhere-tweet-box-editor":function(a){this._getCurrentView()===twttr.widget.DirectMessageDialog.views.newConversation&&(this._verifyUser(),this.autocomplete&&this.autocomplete.hide())}});a(e)})}),provide("widget/MuteDialog",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.widget.MuteDialog",function(){this.peoples=twttr.caches.User.get("muted"),this.peoples||(this.peoples={});var a={fixed:!1,draggable:!0,modal:!1,view:"Dialog",template:{title:_("Mute a User"),content:(new twttr.views.MuteUsers).html()}};twttr.widget.Dialog.call(this,a)}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.autocomplete=new twttr.components.Autocomplete({input:this.$find(".mute-input"),limit:10}),this.currentSelection={},this.autocomplete.bind("select",function(b,c,d,e,f,g){a.currentSelection.screenName=f,a.currentSelection.userId=g,a.currentSelection.profileImageUrl=e}),this.$dialog.delegate(".remove-muted-person","click",function(b){var c=$(this).parent(),d=c.attr("data-user-id");delete a.peoples[d],twttr.caches.User.set("muted",a.peoples),c.remove()}),this.$find(".mute-input,.twttr-dialog").bind("keydown",function(c){c.keyCode===b.constants.keyCodes.enter&&!twttr.components.Autocomplete._isCompletionsOpen&&(c.stopPropagation(),a.fetchUser())}),this.$find(".button").bind("click",function(b){a.fetchUser()}),this.populateUsers()},fetchUser:function(){var a=this.$find("input[type=text]");twttr.API.User.find(a.val().toString(),twttr.bind(this,function(b){a.val(""),$(".stream-tweet[data-user-id="+b.id+"]").parent().hide();var c={screenName:b.screenName,userId:b.id,profileImageUrl:twttr.helpers.transformProfileImageUrl(b.profileImageUrl,"mini")};this.peoples[b.id]=c,twttr.caches.User.set("muted",this.peoples),this.populateUsers()}))},populateUsers:function(){var a=[];for(var b in this.peoples)a.push('<li data-user-id="'+this.peoples[b].userId+'" data-user-screenname="'+this.peoples[b].screenName+'">                  <img width="24" height="24" src="'+this.peoples[b].profileImageUrl+'"/> '+this.peoples[b].screenName+' <span class="remove-muted-person">&times;</span></li>');a=a.join(""),this.$find(".muted-user-list").html(a)},open:function(){return twttr.widget.Dialog.prototype.open.call(this),this.$find("input[type=text]").focus(),this},close:function(){return twttr.widget.Dialog.prototype.close.call(this),this.remove(),this}}),a(twttr.widget.MuteDialog)})}),provide("widget/DiscoveryDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.DiscoveryDialog",function(a){twttr.widget.Dialog.call(this,twttr.merge({modal:!0,draggable:!1,css:{width:530}},a))}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this);var a=this,b=this.$find("form"),c=function(){b.find("input, textarea").attr("disabled","disabled"),b.find(".button").addClass("disabled")},d=function(){twttr.Router.performRedirect(twttr.router.homePath())};twttr.helpers.addFormEvents(b,function(e,f){if(b.find(".button").hasClass("disabled"))return;c(),twttr.currentUser.updateDiscoverability(f,{success:function(b){twttr.currentUser.sync("name",b.name),twttr.currentUser.sync("description",b.description),twttr.currentUser.sync("location",b.location),twttr.currentUser.sync("email_discoverability_set",b.email_discoverability_set),twttr.currentUser.sync("mobile_phone_discoverability_set",b.mobile_phone_discoverability_set),twttr.currentUser.sync("discoverable_by_email",b.discoverable_by_email),twttr.currentUser.sync("discoverable_by_mobile_phone",b.discoverable_by_mobile_phone),a.destroy(),d()},error:function(b){twttr.showError(_("Whoops! Something went wrong. Please try again!")),a.destroy()}})}),this.$find(".button.cancel").bind("click",function(){c(),d()})}}),a(twttr.widget.DiscoveryDialog)})}),provide("widget/GeoPromoDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.GeoPromoDialog",function(){twttr.widget.Dialog.call(this,{template:{title:_("Add a location to your tweets"),content:(new twttr.views.GeoPromoDialog).html()},view:"Dialog",modal:!0,stackPreviousModal:!0})}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){var a=this;twttr.widget.Dialog.prototype.registerEvents.call(this),this.$find("#geo_turn_location_on").click(function(){a.enableGeoForCurrentUser()}),this.$find(".geo_dialog_close").click(function(b){b.preventDefault(),a.destroy()})},enableGeoForCurrentUser:function(){var a=this,b=$("#geo_promo_dialog_content .geo-progress"),c=$("#geo_promo_dialog_content .geo-unable-to-turn-location-on");if(b.hasClass("geo-spinner"))return;b.addClass("geo-spinner"),c.hide(),twttr.currentUser.setGeoEnabled(!0,{success:function(){twttr.geo.geoEnabled=!0,a.destroy(),twttr.geo.location.turnLocationOn()},error:function(){b.removeClass("geo-spinner"),c.show()}})}}),a(twttr.widget.GeoPromoDialog)})}),provide("widget/RetweetDialog",function(a){using().as(function(b){twttr.klass("twttr.widget.RetweetDialog",function(a){twttr.widget.RetweetDialog.uber.constructor.call(this,a),this.$dialog.attr("type","retweet"),this.$container.find(".twttr-dialog-footer").hide(),twttr.API.Status.find(this.options.data.tweetId,twttr.bind(this,function(b){var c=new twttr.views.ReplyDialogFooter({screen_name:b.user.screenName,text:a.tweetText,profile_image_url:b.user.profileImageUrl});c.render(this.$container.find(".twttr-dialog-content"),"prepend")}))}).subclassOf(twttr.widget.Prompt),a()})}),provide("widget/TrendsDialog",function(a){using().as(function(b){var c=twttr.klass("twttr.widget.TrendsDialog",function(a){var b=this,a=twttr.merge({view:"Dialog",destroyOnClose:!1,template:{container_id:"trends_dialog"}},a,!0);a.template.title=twttr.decider.isAvailable("personalized_trends")?_("Trends"):_("Choose a trend location"),twttr.widget.Dialog.call(b,a),b.resetChangeCount(),b.bind("close",function(){b.logClose()}),b.bind("open",function(){trackClient({section:"trends_location_dialog",action:"open"}),b.rerender()}),this.initComponentEvents(this.$container),b.position()}).subclassOf(twttr.widget.Dialog).mixin(twttr.mixins.componentEvents).methods({resetChangeCount:function(){this.changeCount=0},logClose:function(){scribble("close-trend-location-dialog",{woeid:twttr.trendLocations.current.woeid,change_count:this.changeCount,input:"click"}),this.resetChangeCount()},updateFooter:function(a){var b=this.$find(".twttr-dialog-footer");twttr.decider.isAvailable("personalized_trends")&&!twttr.trendLocations.current.isPersonalized||a?(b.html((new twttr.views.TrendsDialogFooter).html()),b.show()):b.hide()},rerender:function(a){var b=this.$container.find(".twttr-dialog-content");b.empty(),this.updateFooter(a),(new twttr.views.LocalTrendsNew(twttr.trendLocations.all,a)).render(b,"append"),this.markLocation()},registerEvents:function(){var a=this;twttr.widget.TrendsDialog.uber.constructor.prototype.registerEvents.call(a),a.$container.delegate("li a","click",function(b){a.changeCurrentLocation($(this),"dialog"),b.preventDefault()}),a.$container.delegate("a.trend-breadcrumb-location","click",function(b){a.changeCurrentLocation($(this),"dialog-breadcrumb"),b.preventDefault()})},position:function(){this.options.fixed||this.$dialog.addClass("static");var a=twttr.app.currentPage().$find(".dashboard");if(twttr.isT1||a.length===0)var b=($(document).width()+this.$dialog.outerWidth())/2;else var b=Math.max(a.offset().left,this.$dialog.outerWidth());var c=$(window).scrollTop(),d=this.$dialog.innerHeight(),e=$(window).height(),f=Math.round(e/2-d/2);f=Math.max(f,$("#top-stuff").innerHeight()+1),this.options.fixed||(f+=c),this.$container.css({left:b-this.$dialog.outerWidth(),top:f})},changeCurrentLocation:function(a,b){if(a){a.closest(".twttr-dialog-content").find(".selected").removeClass("selected"),a.addClass("selected");var c=parseInt(a.attr("data-woeid"),10)}twttr.trendLocations.setCurrent({isPersonalized:!c,woeid:c,origin:b}),this.changeCount+=1},markLocation:function(){var a=twttr.trendLocations.current;if(!a.isPersonalized){var b=a&&a.woeid||1;this.$container.find("[data-woeid="+b+"]").addClass("selected")}}}).click({".customize-by-location":function(){this.rerender(!0)},"button.done":function(){this.close()},".select-personalized":function(){this.changeCurrentLocation(null,"dialog"),this.close()}});twttr.isT1&&c.methods({position:twttr.util.noopInT1}),a(c)})}),provide("widget/ReplyDialog",function(a){using().as(function(b){twttr.klass("twttr.widget.ReplyDialog",function(a){var a=twttr.merge({},twttr.dialogs.defaultOptions,a,{},!0);twttr.widget.ReplyDialog.uber.constructor.call(this,a),this.$dialog.attr("type","reply")}).subclassOf(twttr.widget.TweetDialog).statics({openReplyDialog:!1}).methods({open:function(){return this.constructor.openReplyDialog&&this.constructor.openReplyDialog.close(),twttr.widget.TweetDialog.prototype.open.call(this),this.constructor.openReplyDialog=this,this.focus(),this},focus:function(){var a=this.view.tweetBox.editor.$editor.val().length,b=this.view.tweetBox.editor.$editor.val().length;this.options.multiple&&(a=this.options.data.screenName.length+2),this.setCaretPosition(a,b)}}),a(twttr.widget.ReplyDialog)})}),provide("widget/ListMembershipDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.ListMembershipDialog",function(a,b){b=twttr.merge({view:"Dialog",modal:!0,draggable:!0,css:{width:340,height:"auto"},positioning:{top:80},template:{container_id:"list_membership_dialog",title:_("Your lists"),content:(new twttr.views.AddToListDialog({screen_name:a.screenName})).html()}},b||{},!0),this.makeListItems(a),twttr.widget.Dialog.call(this,b),this.addSpinner()}).subclassOf(twttr.widget.Dialog).methods({makeListItems:function(a){var b=this;this.getListDialogItems(a,function(a){b.spinner&&b.spinner.hide(),a.length>1&&b.$container.find(".add-to-list-prompt").show(),b.renderItems(a),b.attachHandlers(a)})},addSpinner:function(){this.spinner=$("<span class='spinner' title='{{_i}}Loading...{{/i}}'></span>"),this.spinner.appendTo(this.$container.find(".twttr-dialog-body"))},attachHandlers:function(a){var b=this.$container.find(".list-membership-container").children();for(var c=0;c<a.length;c++){var d=a[c];if(!d.handlers)continue;$.each(d.handlers,function(a,d){var e=$(b[c]),f=[a,d];e.bind.apply(e,f)})}},renderItems:function(a){var b=twttr.map(a,function(a){return(new twttr.views.CheckboxListItem(a)).html()});$(b.join("")).appendTo(this.$container.find(".list-membership-container"))},getListDialogItems:function(a,b){var c=this;twttr.currentUser.lists({count:twttr.currentUser.listsLimit,success:function(d){var e=[],f={},g=function(f){d.each(function(a){e.push(i(a))}),e.push({label:_("Create a list"),icon:"list",className:"btn create-a-list",handlers:{click:function(){c.destroy(),(new twttr.widget.ListDialog({onSuccess:function(b){b.add(a,{success:function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:b.slug}))},error:function(a){twttr.helpers.showErrorFromResponse(a)}})}})).open()}}}),b(e)},i=function(b){return{label:h(b.name),id:b.id,user_is_member:f[b.id],is_private:b.mode==="private",handlers:{click:c.handler(b,a)}}};d.length()?a.memberships({filter_to_owned_lists:!0,success:function(a){a.each(function(a,b){f[a.id]=!0}),g()}}):g()}})},handler:function(a,b){return function(c){c.stopPropagation(),c.preventDefault();var d=$(this).find("input[type=checkbox]"),e=d.attr("data-is-checked"),f=!!e&&e==="true",g=$(this).find("img");d.hide(),g.show();var i=f?"remove":"add";a[i](b,{success:function(){twttr.widget.ListMembershipDialog.trigger(i+"ListMember",[a,b]),d.attr("data-is-checked",!f),d.attr("checked",!f)},error:function(){d.attr("data-is-checked",f),d.attr("checked",f),twttr.showError(_("There was an error updating the list"))},complete:function(){g.hide(),d.show()}})}}}),a(twttr.widget.ListMembershipDialog)})}),provide("widget/MiniProfileDialog",function(a){using("components/ProfilePane","components/RecentTweets",function(b,c){twttr.klass("twttr.widget.MiniProfileDialog",function(a,d){var e=this;d=d||!1;var f="";d&&(f=" js-unclickable unclickable"),twttr.widget.Dialog.call(this,{modal:!0,draggable:!0,view:"Dialog",closeOnNavigate:!0,template:{container_id:"mini-profile",title:twttr.isT1?null:"@"+a.screenName,content:"<div class='expando-profile-popup expanding-stream-item js-expando-profile-popup"+f+"'/>"},css:{width:400},positioning:{top:95}});var g=new b(a),i=new c(a);this.$find(".js-expando-profile-popup").append(g.$node).append(i.$node),this.$dialog.delegate(".js-unclickable, .js-unclickable a","click",function(a){!$(a.target).hasClass("js-action-follow")&&!$(a.target).hasClass("js-action-unfollow")&&!$(a.target).hasClass("twttr-dialog-close")&&(a.stopPropagation(),a.preventDefault())}).delegate(".js-mini-profile-user","click",function(){setTimeout(function(){e.close()},0)})}).subclassOf(twttr.widget.Dialog),a(twttr.widget.MiniProfileDialog)})}),provide("widget/EmbedDialog",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.widget.EmbedDialog",function(a){return this.status=a,twttr.widget.Dialog.call(this,{modal:!0,fixed:!1,draggable:!1,destroyOnClose:!0,positioning:{top:$(window).scrollTop()+100},view:"Dialog",template:{title:_("Embed this Tweet"),content:(new twttr.views.EmbedDialog).html()}})}).subclassOf(twttr.widget.Dialog).methods({open:function(){function n(a){setTimeout(function(){l.select()},0),x()}function o(){using("//platform.twitter.com/js/vendor/twt/dist/twt.all.min.js","css!//platform.twitter.com/twt/twt.css",function(){if(!window.twt)return;twt.settings.lang=f;var b=twt.tweet(a.status.attributes,{expandMedia:!0});a.status.isReply?a.status.inReplyTo({success:function(a){m.html(b.inReplyTo(a.attributes).html())},error:function(){m.html(b.html())}}):m.html(b.html())}).load()}function p(a,b){var c=b.find(".active");if(c[0]==a[0])return;c.removeClass("active"),a.addClass("active")}function q(a){p($(this).prev(),$(a.delegateTarget)),y($("input:checked",i).val()),u()}function r(a){a.preventDefault();var b=$(this);p(b,$(a.delegateTarget));var c=b.data().target;y(c),u()}function s(){var a={lang:f,target:$(".active",j).data().target,align:$("input:checked",i).val()},b=t(a);return a.success=v(b),a}function t(a){return a.lang+a.target+a.align}function u(){var b=s(),f=t(b),g={html:"https://twitter.com/"+a.status.user.screenName+"/statuses/"+a.status.id+""};e++||l.addClass(c).attr(c,c);if(d[f])return b.success(d[f]);if(b.target=="link")return b.success(g);a.status.oembed(b)}function v(a){return function(f){var g=s();d[a]=f,--e||l.val(d[t(g)].html).removeClass(c).removeAttr(c),b&&(b=!1,n())}}function w(){var a={section:"embed_code_dialog",component:"embed_tweet_code",action:"open"};trackClient(a,twttr.audit.currentPage())}function x(){var a={section:"embed_code_dialog",component:"embed_tweet_code",action:"focus"};trackClient(a,twttr.audit.currentPage())}function y(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"target_"+a};trackClient(b,twttr.audit.currentPage())}function z(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"align_"+a};trackClient(b,twttr.audit.currentPage())}function A(a){var b={section:"embed_code_dialog",component:"embed_tweet_code",action:"language_"+a};trackClient(b,twttr.audit.currentPage())}var a=this,b=!0,c="disabled",d={},e=0,f;twttr.widget.Dialog.prototype.open.call(this);for(var g=twttr.languages.length;g--;)if(twttr.languages[g].current){f=twttr.languages[g].code;break}var i=this.$container,j=i.find(".embed-target"),k=i.find(".embed-alignment"),l=i.find("textarea"),m=i.find(".embed-preview");return u(),o(),w(),A(f),j.delegate("a","click",r),k.delegate("input","click",q),l.focus(n),this},destroy:function(){twttr.widget.Dialog.prototype.destroy.call(this),twttr.router.unbind("urlChanged",this.urlChangedListener),twttr.router.routeTo(twttr.router.permalinkPath({screen_name:this.status.user.screenName,id:this.status.id}))}}),a(twttr.widget.EmbedDialog)})}),provide("components/pages/mixins/searchT1",function(a){using("mixins/sideNavigationT1","components/t1/SearchHeader","components/t1/dashboard/SearchNav","components/SignupCallOut").as(function(b){var c=twttr.klass.mixin("twttr.components.pages.mixins.searchT1",function(){this.mixin(b.mixins.sideNavigationT1).view(twttr.views.SearchPage).addOnSwitchAway(function(){this.removeSearchHeader(),this.removeSearchAssistance()}).addOnSwitchTo(function(){this.registerSearchAssistanceDecider(),this.$node.find(".js-search-header").length||this.addSearchHeader()}).addAfterRender(function(){this.isNewSearchHeaderAvailable()?(this.setQuery(this._query),this.focusQuery()):(this.addSearchHeader(),$("#search-query").val(""))}).methods({getDashboardComponents:function(){var a=[];return twttr.loggedIn||a.push(new b.components.SignupCallOut("search",{query:this._query})),this._nav=new b.components.t1.dashboard.SearchNav(this._query),this.trendsComponent=this.trendsComponent||new twttr.components.Trends,a.concat([this._nav,this.trendsComponent,new twttr.components.Footer])},noAutoRender:!0,people:function(a,c){var d=a.query||c.q,e=this._query!==d;this._query=d;if(!d)return this.routePageTo(this.PATH_ROOT);this.streamManager||this.render({query:d,pretty_query:d,has_relevance_search:!1,top_mode:!1,all_mode:!1,timeline_mode:!1,with_links_mode:!1}),this.streamManager.switchTo(twttr.streams.PeopleSearch,{query:d,pathRoot:this.PATH_ROOT,hideTitle:!1});if(e){var f=new b.components.t1.dashboard.SearchNav(this._query);this._nav.$node.replaceWith(f.$node),delete this._nav,this._nav=f}this.setQuery(d),this.focusQuery(),this.selectCurrentSideNav(),this.removeOnebox(),this.removeSearchAssistance(),this.updatePageTitle(_("Twitter / User Search"))},registerSearchAssistanceDecider:function(){if(twttr.decider.isAvailable("search_assistance")){this._isNewSearchHeaderAvailable=!0,this._isSearchAssistanceAvailable=!0;return}var a=twttr.abdecider.choose("search_assistance_192");this._isNewSearchHeaderAvailable=a==="no_header_no_assistance"||a==="no_header_with_assistance",this._isSearchAssistanceAvailable=a==="no_header_with_assistance"},isNewSearchHeaderAvailable:function(){return!!this._isNewSearchHeaderAvailable},isSearchAssistanceAvailable:function(){return!!this._isSearchAssistanceAvailable},renderRelatedQueries:function(a){if(!$.isArray(a)||!a.length)return;var b=a.length,c=[],d=[];for(var e=0;e<b;e++)c[e]={search_query_source:twttr.search.searchQuerySource.RELATED_QUERY,query:this._query,related_query:a[e].query,url:twttr.router.searchResultsPath({query:a[e].query}),delimiter:e<b-1?", ":""},d[e]=a[e].query;this.$find(".js-search-header").append((new twttr.views.RelatedQueries({related_queries:c})).html()),trackClient({section:"search",component:"related_queries",action:"impression"},{query:this._query,item_count:d.length,item_names:d})},renderSpellingCorrections:function(a){if(!$.isArray(a)||!a.length)return;var b=a[0].query,c=[];if(a[0].indices&&a[0].indices.length){var d=a[0].indices,e=0,f=b.length;for(var g=0;g<d.length;g++)c[g]={nonhighlighted:b.substring(e,d[g][0]),highlighted:b.substring(d[g][0],d[g][1])},e=d[g][1];c[d.length]={nonhighlighted:b.substring(e,f),highlighted:""}}else c[0]={nonhighlighted:"",highlighted:b};this.$find(".js-stream-header").before((new twttr.views.SpellingCorrections({query:this._query,correction:b,partitions:c,url:twttr.router.searchResultsPath({query:b}),search_query_source:twttr.search.searchQuerySource.SPELLING_CORRECTION})).html()),trackClient({section:"search",component:"spelling_corrections",action:"impression"},{query:this._query,item_count:a.length,item_names:a})},removeSearchAssistance:function(){this.$find(".js-spelling-corrections").remove(),this.$find(".js-related-queries").remove()},addSearchHeader:function(){this.isNewSearchHeaderAvailable()||(this._header=new b.components.t1.SearchHeader(this._query),this.$node.prepend(this._header.$node))},removeSearchHeader:function(){this.isNewSearchHeaderAvailable()||this._header&&this._header.destroy()},setupSavedSearchAction:function(){var a=twttr.search.isSavedSearch(this._query);a?this.toggleSavedSearchOn(a):this.toggleSavedSearchOff()},toggleSavedSearchOn:function(a){this.isNewSearchHeaderAvailable()?(this.$find(".js-toggle-saved-search-link").html(_("Remove saved search")).addClass("saved").removeClass("not-saved"),this.$find(".js-search-title").html(Mustache.to_html(_('Saved search: <strong class="search-query">{{query}}</strong>'),{query:this._query}))):this._header.toggleSavedSearchOn(),this._savedSearch=a},toggleSavedSearchOff:function(){this.isNewSearchHeaderAvailable()?(this.$find(".js-toggle-saved-search-link").html(_("Save search")).addClass("not-saved").removeClass("saved"),this.$find(".js-search-title").html(Mustache.to_html(_('Results for <strong class="search-query">{{query}}</strong>'),{query:this._query}))):this._header.toggleSavedSearchOff(),this._savedSearch=null},showSearchMenu:function(a){var b=this;a.addClass("open"),$(document).bind("click.button",function(){b.hideSearchMenu(a)})},hideSearchMenu:function(a){a.removeClass("open"),$(document).unbind("click.button")},toggleSearchMenu:function(a){var b=this.$node.find(".js-search-dropdown");b.hasClass("open")?this.hideSearchMenu(b):this.showSearchMenu(b)},setQuery:function(a){this.isNewSearchHeaderAvailable()?$("#search-query").val(a):this._header.setQuery(a)},focusQuery:function(){this.isNewSearchHeaderAvailable()?($("#search-query").addClass("focus"),$("#search-query").blur()):this._header.focusQuery()},addDropdownMenu:twttr.util.noopInT1,renderPeopleResults:twttr.util.noopInT1,renderOneboxContainer:function(a){this.$find(".js-onebox-container").html(a.$node)},removeOnebox:function(){this.$find(".js-onebox-container").empty()},addImpressionData:function(a){a.query=this._query}}).click({"a.js-toggle-saved-search-link":function(a,b){this._savedSearch?twttr.dialogs.deleteSavedSearch(twttr.bind(this,function(a){if(a){var b=this._savedSearch;this._savedSearch.destroy({before:twttr.bind(this,this.toggleSavedSearchOff),error:twttr.bind(this,function(){this.toggleSavedSearchOn(b),twttr.showError(_("Error deleting search"))})})}})).open():twttr.currentUser.savedSearches.create(this._query,{before:twttr.bind(this,this.toggleSavedSearchOn),error:twttr.bind(this,function(){this.toggleSavedSearchOff(),twttr.showError(_("Error saving search"))})}),a.preventDefault()},"button.js-search-dropdown-button":function(a,b){return this.toggleSearchMenu(),a.preventDefault(),a.stopPropagation(),!1},"div.js-related-queries a":function(a,b){trackClient({section:"search",component:"related_queries",action:"search"},{query:b.data("query"),item_names:[b.data("search-assistance")]})},"div.js-spelling-corrections a":function(a,b){trackClient({section:"search",component:"spelling_corrections",action:"search"},{query:b.data("query"),item_names:[b.data("search-assistance")]})},"div.js-spelling-corrections div.js-action-dismiss":function(a,b){this.$find(".js-spelling-corrections").animate({opacity:"0"},250).slideUp(),trackClient({section:"search",component:"spelling_corrections",action:"dismiss"},{query:b.data("query"),item_names:[b.data("search-assistance")]})}})});a(c)})}),provide("components/pages/ProfileAbstract",function(a){using().as(function(b){var c=twttr.klass.page("twttr.components.pages.ProfileAbstract").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage,twttr.mixins.profileHelper).methods({_addAdminTools:function(){if(twttr.admin&&!twttr.helpers.isCurrentUser(this.profileUser)){var a=this;using(">defaultViews",function(){twttr.admin.addToolsFor(a.profileUser.screenName,a.profileUser.id)})}},_highlightNavIfCurrentUser:function(a){twttr.app.highlightGlobalNav("profile",twttr.helpers.isCurrentUser(a))},_switchToStream:function(a,b){var c=this;this.unfocusStreamItem(),this.loading(a.screenName),this.getUserInfo(a.screenName,function(){c._addPromotedData(),!c._renderedScreenName||c._renderedScreenName.toLowerCase()!==a.screenName?c._renderPage():twttr.themes.loadUserStyleFor(c.profileUser),c.streamManager.switchTo(a.stream,twttr.merge({canViewUser:twttr.helpers.canViewUser(c.profileUser)},a),b),twttr.components.JapaneseAd.refreshAds(),c.trigger("switchedToStream")},{batch:!twttr.loggedIn},twttr.bind(this,this.noUserFoundCallback)),this.focusStreamTab(a.tab),twttr.isT1||trackClient({action:"impression"},{profile_id:twttr.profileUser&&twttr.profileUser.id,context:"profile"})},loading:function(a){a=a.toLowerCase();if(this.preRendered){this.preRenderedScreenName=this.$find("div.profile-header").attr("data-screen-name").toLowerCase();if(this.preRenderedScreenName==a)return}if(!this._renderedScreenName||this._renderedScreenName.toLowerCase()!==a)this.streamManager&&this.streamManager.getCurrent()&&this.streamManager.getCurrent().$node.detach(),this.$node.children().empty(),$("div.tipsy").remove()},_renderPage:function(){this.profileUser.screenName.toLowerCase()!==this.preRenderedScreenName&&twttr.themes.loadUserStyleFor(this.profileUser),this._addAdminTools(),this.render({can_view:twttr.helpers.canViewUser(this.profileUser),screen_name:this.profileUser.screenName,social_context:this._isSocialContextAvailable()}),this._renderedScreenName=this.profileUser.screenName,this.renderUserInfo(),this._followingDropDown=null,this._followersDropDown=null},noAutoRender:!0});twttr.isT1?c.methods({renderUserInfo:twttr.util.noopInT1}):c.methods({renderUserInfo:function(){var a=this,b=this.profileUser;this.panes.push(new twttr.views.Dashboard("profile.dashboard",b.attributes));var c=new twttr.components.ProfileActions(b);c.$node.appendTo(this.$find(".profile-actions-container"))}}),a(c)})}),provide("components/pages/Search",function(a){using("_",twttr.isT1?"components/pages/mixins/searchT1":"components/pages/mixins/searchP1","util","constants").as(function(b,_,c){var d=twttr.klass("twttr.components.pages.Search").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).view(twttr.views.SearchPage).addOnSwitchAway(function(){twttr.search.clear(),this.trendsComponent&&this.trendsComponent.stopUpdatePolling()}).addOnSwitchTo(function(){twttr.themes.loadCurrentUserStyle(),this.trendsComponent&&this.trendsComponent.startUpdatePolling()}).addAfterRender(function(){this.addDashboardComponents(this.getDashboardComponents()),this.trendsComponent&&this.trendsComponent.registerEventHandlers()}).statics({addSearchClickLogging:function(a,b){if(a.length){var c={};b.tweet_click_info=c,c.tweet_id=a.attr("data-tweet-id"),c.pos=a.closest(".stream-item").prevAll(".stream-item").length,c.type=a.is(".promoted-tweet")?"promoted":a.is(".top-tweet")?"popular":"recent"}}}).methods({realtime:function(a,b){var c=a.query||b.q;twttr.decider.isAvailable("phoenix_search_relevance")?this.updatePageTitle(_("Twitter / Search - {{{query}}} - All Tweets",{query:c})):this.updatePageTitle(_("Twitter / Search - {{{query}}}",{query:c})),this.enterMode(c,"tweets")},timeline:function(a,b){var c=a.query||b.q;this.updatePageTitle(_("Twitter / Timeline Search - {{{query}}}",{query:c})),this.enterMode(c,"timeline")},links:function(a,b){var c=a.query||b.q;if(!c)return this.search({query:"links"});this.updatePageTitle(_("Twitter / Search - {{{query}}} - Tweets with links",{query:c})),this.enterMode(c,"links")},searchShow:function(a,b){if(twttr.decider.isAvailable("swift_events")&&twttr.decider.isAvailable("swift_events_search")){var c=twttr.griffin.isEvent(a.query);twttr.griffin.setNoRedirectOnSearch(c,!0)}this.search(a,b)},search:function(a,b){if(!twttr.currentUser&&!twttr.decider.isAvailable("phoenix_search_relevance_logged_out")||twttr.currentUser&&!twttr.decider.isAvailable("phoenix_search_relevance")){this.realtime(a,b);return}b&&b.partner=="mozilla"&&b.source=="desktop-search"&&(a.query=a.query.replace(/\+/g," ")),this.query=a.query||b.q,this.query===!0&&(this.query=!1);if(twttr.decider.isAvailable("swift_events")&&twttr.decider.isAvailable("swift_events_search")){var c=twttr.griffin.isEvent(this.query);twttr.griffin.isEuroSearchTakeover(this.query)&&(c="euro2012");if(twttr.griffin.redirectOnSearch(c))return}this.updatePageTitle(_("Twitter / Search - {{{query}}}",{query:this.query})),this.enterMode(this.query,"relevance",b)},placeTweetSearch:function(a){var b=a.place_name,c=a.place_id;this.updatePageTitle(_("Twitter / Tweets at {{placeName}}",{placeName:b})),this._placeName=b,this.enterMode("place:"+c,"placeTweetSearch")},noAutoRender:!0,enterMode:function(a,b,c){twttr.search.latestQuery=a,c=c||{};if(!a){twttr.router.redirectTo(twttr.router.searchHomePath());return}twttr.isT1||trackClient({action:"impression"},{query:a}),this.unfocusStreamItem(),twttr.SearchAPI.flushCache();var d=this;d._mode=b;if(a!==this._query){this._query=a,!twttr.isT1&&twttr.loggedIn&&(this.setupSavedSearchAction(),this.registerSavedSearchListeners()),this.streamManager&&this.streamManager.$node.detach();var e=!1;twttr.currentUser?e=twttr.decider.isAvailable("phoenix_search_relevance"):e=twttr.decider.isAvailable("phoenix_search_relevance_logged_out");var f=b=="placeTweetSearch";this.render({query:a,pretty_query:f&&this._placeName||a,has_relevance_search:e,top_mode:b=="relevance",all_mode:b=="tweets",timeline_mode:b=="timeline",with_links_mode:b=="links"})}else twttr.decider.isAvailable("phoenix_search_dropdown")&&this.$find(".stream-tabs").empty().append((new twttr.views.SearchPageTabs({top_mode:b=="relevance",all_mode:b=="tweets",timeline_mode:b=="timeline",with_links_mode:b=="links"})).html());twttr.decider.isAvailable("phoenix_search_dropdown")&&this.addDropdownMenu(this._query,this.$find(".stream-tab-dropdown")),this.streamManager.switchTo(twttr.streams.Search,{query:a,pretty_query:this._placeName||a,mode:b,hideTitle:!0,debug:c.debug,experimentId:c.experimentId,is_new_search_header_available:this.isNewSearchHeaderAvailable()}),this.focusStreamTab(b),this.focusQuery(a),twttr.router.getCurrentRoute().name==="searchRealtime"?this.selectSideNav("searchResults"):this.selectCurrentSideNav(),twttr.isT1&&twttr.loggedIn&&(this.setupSavedSearchAction(),this.registerSavedSearchListeners()),this.addSearchExtras(),this.renderPeopleResults()},focusQuery:function(a){twttr.search.focusQuery(a)},isNewSearchHeaderAvailable:function(){return!1},isSearchAssistanceAvailable:function(){return!1},removeSearchAssistance:$.noop,isOneboxAvailable:function(){return!!this._query&&twttr.decider.isAvailable("onebox")},renderOnebox:function(a){if(a.length()===0)return;var c,d=a.get(0),e=twttr.components.onebox[b.util.capitalize(d.type)];if(!e)return;var c=new e(d,this._query);if(!c||c.$node.children().size()==0)return;this.renderOneboxContainer(c,d),this.$find("div.onebox").show(),c.render();var f=c.items||[];trackClient({section:"onebox",component:d.type,action:"impression"},{item_count:f.length,item_ids:f,query:this._query})},addSearchExtras:function(){var a=this,b=a.isSearchAssistanceAvailable(),c=a.isOneboxAvailable();if(!c&&!b)return;c&&this.$find("div.onebox").hide();var d=twttr.search.getLastQuerySource(),e={is_t1:twttr.isT1,statuses:!1,stories:c,related_queries:b,spelling_corrections:b,query_source:d,success:function(d){a.removeSearchAssistance(),c&&a.renderOnebox(d.stories),b&&(d.spellingCorrections&&a.renderSpellingCorrections(d.spellingCorrections),!d.spellingCorrections.length&&d.relatedQueries&&a.renderRelatedQueries(d.relatedQueries))}};this._query&&twttr.API.Search.search(this._query,e)},setupSavedSearchAction:function(){var a=this;twttr.currentUser.savedSearches(function(b){var c=b.filter(function(b){return b.query===a._query});c.length()?a.toggleSavedSearchOn(c.first()):a.toggleSavedSearchOff()})},registerSavedSearchListeners:function(){var a=this;twttr.API.SavedSearch.bind("create",function(b,c){c.query==a._query&&a.toggleSavedSearchOn(c)}),twttr.API.SavedSearch.bind("delete",function(b,c){c.query==a._query&&a.toggleSavedSearchOff()})},_getSearchHandlers:function(a,b){return{click:function(){twttr.router.routeTo(twttr.router[b]({query:a}))}}}});d.mixin(c),a(d)})}),provide("components/pages/SearchHome",function(a){using("_").as(function(b,_){twttr.klass.page("twttr.components.pages.SearchHome").view(twttr.views.SearchHome).click({".operators a:not(.advanced-search)":function(a){a.preventDefault(),twttr.dialogs.searchOperators().open()},".operators a.advanced-search":function(a){twttr.search.latestQuery=this.$find("input:text[name=q]").val()}}).addAfterRender(function(){this.$find(".bottompart").append((new twttr.components.Footer).$node)}).addOnSwitchTo(function(){twttr.themes.clear()}).methods({noAutoRender:!0,initSearchForm:function(){var a=this.$find(".search form"),b=a.is(".advanced-search form");twttr.helpers.addFormEvents(a,function(a,c){var d=$(this),e=b?twttr.search.serializeAdvancedForm(d):c.q;e?(twttr.search.setLastQuerySource(twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.doSearch(e)):twttr.showMessage(_("Enter your query before submitting the search form!"))}),twttr.search.formifyLatestQuery(a);if(b){var c=a.find("input[name=near]"),d=a.find("fieldset.geo div.sel");c.val()?d.show():c.one("keyup change",function(){d.slideDown()})}},languages:function(){return this.searchLanguages().sort(function(a,b){return a=a.localized_name.toLowerCase(),b=b.localized_name.toLowerCase(),a==b?0:a<b?-1:1})},searchLanguages:function(){return[{code:"am",localized_name:_("Amharic"),name:"አማርኛ"},{code:"ar",localized_name:_("Arabic"),name:"العربية"},{code:"bg",localized_name:_("Bulgarian"),name:"Български"},{code:"bn",localized_name:_("Bengali"),name:"বাংলা"},{code:"bo",localized_name:_("Tibetan"),name:"བོད་སྐད"},{code:"chr",localized_name:_("Cherokee"),name:"ᏣᎳᎩ"},{code:"da",localized_name:_("Danish"),name:"Dansk"},{code:"de",localized_name:_("German"),name:"Deutsch"},{code:"dv",localized_name:_("Maldivian"),name:"ދިވެހި"},{code:"el",localized_name:_("Greek"),name:"Ελληνικά"},{code:"en",localized_name:_("English"),name:"English"},{code:"es",localized_name:_("Spanish"),name:"Español"},{code:"fa",localized_name:_("Persian"),name:"فارسی"},{code:"fi",localized_name:_("Finnish"),name:"Suomi"},{code:"fr",localized_name:_("French"),name:"Français"},{code:"gu",localized_name:_("Gujarati"),name:"ગુજરાતી"},{code:"iw",localized_name:_("Hebrew"),name:"עברית"},{code:"hi",localized_name:_("Hindi"),name:"हिंदी"},{code:"hu",localized_name:_("Hungarian"),name:"Magyar"},{code:"hy",localized_name:_("Armenian"),name:"Հայերեն"},{code:"in",localized_name:_("Indonesian"),name:"Bahasa Indonesia"},{code:"is",localized_name:_("Icelandic"),name:"Íslenska"},{code:"it",localized_name:_("Italian"),name:"Italiano"},{code:"iu",localized_name:_("Inuktitut"),name:"ᐃᓄᒃᑎᑐᑦ"},{code:"ja",localized_name:_("Japanese"),name:"日本語"},{code:"ka",localized_name:_("Georgian"),name:"ქართული"},{code:"km",localized_name:_("Khmer"),name:"ខ្មែរ"},{code:"kn",localized_name:_("Kannada"),name:"ಕನ್ನಡ"},{code:"ko",localized_name:_("Korean"),name:"한국어"},{code:"lo",localized_name:_("Lao"),name:"ລາວ"},{code:"lt",localized_name:_("Lithuanian"),name:"Lietuvių"},{code:"ml",localized_name:_("Malayalam"),name:"മലയാളം"},{code:"my",localized_name:_("Myanmar"),name:"မြန်မာဘာသာ"},{code:"ne",localized_name:_("Nepali"),name:"नेपाली"},{code:"nl",localized_name:_("Dutch"),name:"Nederlands"},{code:"no",localized_name:_("Norwegian"),name:"Norsk"},{code:"or",localized_name:_("Oriya"),name:"ଓଡ଼ିଆ"},{code:"pa",localized_name:_("Panjabi"),name:"ਪੰਜਾਬੀ"},{code:"pl",localized_name:_("Polish"),name:"Polski"},{code:"pt",localized_name:_("Portuguese"),name:"Português"},{code:"ru",localized_name:_("Russian"),name:"Русский"},{code:"si",localized_name:_("Sinhala"),name:"සිංහල"},{code:"sv",localized_name:_("Swedish"),name:"Svenska"},{code:"ta",localized_name:_("Tamil"),name:"தமிழ்"},{code:"te",localized_name:_("Telugu"),name:"తెలుగు"},{code:"th",localized_name:_("Thai"),name:"ไทย"},{code:"tr",localized_name:_("Turkish"),name:"Türkçe"},{code:"ur",localized_name:_("Urdu"),name:"ﺍﺭﺩﻭ"},{code:"vi",localized_name:_("Vietnamese"),name:"Tiếng Việt"},{code:"zh",localized_name:_("Chinese"),name:"中文"}]},index:function(){this.updatePageTitle(_("Twitter / Search")),this.render(),this.initSearchForm(),this.$find("input").focus();var a=new twttr.components.Trends;this.$find(".trends-container").append(a.$node)},advanced:function(){if(!twttr.decider.isAvailable("advanced_search"))return twttr.router.routeTo(twttr.router.searchHomePath());this.updatePageTitle(_("Twitter / Advanced Search")),this.render({languages:this.languages(),is_advanced:!0}),this.initSearchForm()}}),a(twttr.components.pages.SearchHome)})}),provide("components/pages/Front",function(a){using("_").as(function(b,_){var c=twttr.klass.page("twttr.components.pages.Front",function(){twttr.components.Page.apply(this,arguments)}).methods({$find:function(a){return $("#front-container").find(a)}}).view(twttr.views.Nothing).addAfterRender(function(){var a=twttr.abdecider.choose("lohp_video_experiment_258");a==="video"&&this.$find(".front-welcome").click(function(){if($(this).hasClass("playing"))return;var a=['type="text/html"','width="520" height="293"','src="http://www.youtube.com/embed/1xgLJpBbdDE?showinfo=0&rel=0&modestbranding=1&controls=0&autohide=1&autoplay=1&origin='+window.location.protocol+"//"+window.location.host+'"','frameborder="0"'];$(this).append("<iframe "+a.join(" ")+"></iframe>").addClass("playing"),trackClient({component:"video",element:"play_button",action:"click"});var b=1,c=setInterval(function(){trackClient({component:"video",element:"second"+b*10,action:"impression"}),b++},1e4);setTimeout(function(){clearInterval(c)},9e4)});var b=twttr.abdecider.choose("nascar_homepage_276");b!="homepage_off"&&this.$find('a[href="/hashtag/nascar"]').click(function(){trackClient({page:"front",section:"",action:"click"},"nascar")}),twttr.pageLocale==="ja"?(twttr.abdecider.choose("japanese_signup_text_214"),twttr.abdecider.choose("localized_tagline_loggedout_front_page_244")):twttr.pageLocale==="de"&&twttr.abdecider.choose("localized_image_germany_loggedout_front_page_294");var c=this.$find(".js-front-signup form");c.find("input[type=text], input[type=password]").focus(function(){trackClient({section:"signup_callout",component:$(this).attr("name").split(/[\[|\]]/)[1],action:"focus_field"})}),c.submit(function(){trackClient({section:"signup_callout",component:"form",action:"signup_click"})}),twttr.helpers.addFormEvents(c);var d=this.$find(".js-front-signin form"),e=c.data("front_page_full_signup_256");e&&(d=$(".global-nav .js-front-signin form")),(!e||e&&!$("form input.focused").length)&&d.find(".email-input").focus(),d.submit(function(){trackClient({section:"login_callout",component:"form",action:"login_click"})}),twttr.helpers.addFormEvents(d),e&&(twttr.helpers.addHoldingInputEvents(d),d.find(".placeholding-input .placeholder").each(function(){var a=$(this);a.text(twttr.helpers.truncate(a.text(),20,"...")),a.show()}))}).addOnSwitchAway(function(){twttr.themes.loadDefaultTheme()}).methods({index:function(a,b){if(b.in_reply_to_status_id){twttr.router.routeTo(twttr.router.loginRedirectPath({redirect_after_login:"/"+window.location.search}));return}window._scribedFrontImpression?window._scribedFrontImpression=!1:$(".front-image-nascar").length>0?trackClient({page:"front",section:"",action:"impression"},"nascar"):trackClient({page:"front",section:"",action:"impression"},"front"),this.updatePageTitle(_("Twitter")),twttr.themes.loadFrontPageTheme()}});twttr.isT1?c.addAfterRender(function(){var a=$(".js-front-language form");a.submit(function(){trackClient({section:"language_dropdown",component:"form",action:"select"},{event_info:this.lang.value})})}):c.addAfterRender(function(){this.$find(".bottompart").empty().append((new twttr.components.LanguageLinks).$node.fadeIn()).append((new twttr.components.CountrySelect).$node.fadeIn()).append((new twttr.components.Footer).$node)}).addOnSwitchTo(function(){twttr.$elements.page.css("padding-top","")}),a(c)})}),provide("components/pages/Login",function(a){using("_","constants").as(function(b,_,c){var d=twttr.abdecider.choose("remember_me_checked_by_default_287")=="checked",e=jQuery.cookie("remember_checked")=="1"||jQuery.cookie("remember_checked")==null&&d,f=twttr.klass.page("twttr.components.pages.Login").view(twttr.views.LoginPage).addBeforeRender(function(){this.updatePageTitle(_("Sign in to Twitter")),twttr.themes.clear()}).addAfterRender(function(){if(twttr.loggedIn)twttr.showMessage(_("You are already logged in!")),twttr.router.routeTo(twttr.router.homePath());else{twttr.helpers.addFormEvents(this.$find("form.js-signin")),this.$find("p.js-forgot a[title]").tipsy({gravity:"se"});var a=this.$find(".js-bottompart");twttr.isT1?twttr.helpers.addHoldingInputEvents(this.$find("form")):a.append((new twttr.components.LanguageLinks).$node).append((new twttr.components.CountrySelect).$node),a.append((new twttr.components.Footer).$node);var b=this.$find(".username input").focus();setTimeout(function(){b.focus()},1)}}).addOnSwitchTo(function(){twttr.themes.loadDefaultTheme()}).methods({noAutoRender:!0,index:function(a,b){this.render({redirect_after_login:a.redirect_after_login||b.redirect_after_login,password_reset_title:_("If you remember your password, try logging in with your email"),remember_checked:e}),trackClient({section:"",component:"",action:"impression"},"login")},error:function(a,b){this.render({redirect_after_login:a.redirect_after_login||b.redirect_after_login,username_or_email:b.username_or_email,remember_checked:e}),twttr.loggedIn||(a.error=="captcha"?(this._addCaptcha(),twttr.showMessage(_("We gotta check... are you human?")),trackClient({section:"form",component:"captcha",action:"show"},"login")):(twttr.showError(_("Wrong Username/Email and password combination.")),trackClient({section:"form",component:"username_password",action:"validation_error"},"login")))},loginRequired:function(){twttr.router.routeTo(twttr.router.loginRedirectPath({redirect_after_login:twttr.Router.getCurrentPath()})),twttr.showMessage(_("You must log in to do that!"))},_addCaptcha:function(){var a=this;using(b.constants.recaptcha.srcUrl).load().then(function(){Recaptcha.create(b.constants.recaptcha.publicKey,a.$find(".js-signin .js-captcha")[0],{lang:twttr.pageLocale,theme:"white"})})}});a(twttr.components.pages.Login)})}),provide("components/pages/Logout",function(a){using("_").as(function(b,_){twttr.klass.page("twttr.components.pages.Logout").view(twttr.views.LogoutPage).addAfterRender(function(){twttr.helpers.addFormEvents(this.$find("form.signout")),this.$find(".cancel").click(function(){return twttr.router.routeTo(twttr.router.homePath()),!1});var a=this.$find(".bottompart");twttr.isT1||a.append((new twttr.components.LanguageLinks).$node).append((new twttr.components.CountrySelect).$node),a.append((new twttr.components.Footer).$node)}).methods({index:function(a,b){if(!twttr.loggedIn)return twttr.decider.isAvailable("mobile_download_gallery_logged_out")?twttr.router.routeTo("/download?logged_out=1"):twttr.router.routeTo(twttr.router.homePath());this.updatePageTitle(_("Twitter / Sign out of Twitter")),twttr.themes.loadCurrentUserStyle()}}),a(twttr.components.pages.Logout)})}),provide("components/pages/Profile",function(a){using("_",twttr.isT1?"components/pages/mixins/profileT1":"components/pages/mixins/profileP1",twttr.isT1?"mixins/t1/emptyTimelineRecommendations":"mixins/emptyTimelineRecommendations","constants").as(function(b,_,c,d){var e=twttr.klass("twttr.components.pages.Profile").subclassOf(twttr.components.pages.ProfileAbstract).view(twttr.views.ProfilePage).containerCssClass("profile-container").mixin(c,d).methods({checkWithheld:function(){twttr.decider.isAvailable("phoenix_pctd")&&twttr.profileUser&&!!twttr.profileUser.withheldScope&&twttr.profileUser.withheldScope==="user"&&!twttr.helpers.isCurrentUser(twttr.profileUser.id)?this.renderWithheld():this.renderNotWithheld()},renderWithheld:function(){$("#page-container").removeClass("profile-container").addClass("wrapper-permalink permalink-container withheld")},renderNotWithheld:function(){$("#page-container").addClass("profile-container").removeClass("wrapper-permalink permalink-container withheld")},userWasBlocked:function(a,b){b.screenName===twttr.profileUser.screenName&&$(".profile-actions-container a.js-direct-message-action, .profile-actions-container div.js-direct-message-action").remove()},getUserInfo:function(a,b,c){if(this.profileUser&&a==this.profileUser.screenName){twttr.profileUser=this.profileUser,twttr.is.def(this.profileUser.promotedContent)&&(twttr.promotedAccount={id:this.profileUser.id,impressionId:this.profileUser.promotedContent.impression_id}),b&&b();return}var d=this.preRendered?this.$find("div.profile-header").attr("data-user"):null;if(d){data=JSON.parse(d),this.profileUser=twttr.profileUser=new twttr.anywhere.api.models.User(data),b&&b();return}return twttr.components.pages.ProfileAbstract.prototype.getUserInfo.apply(this,arguments)},profile:function(a,b){var c=this,d=a.screen_name.toLowerCase().replace(/^@/,"");this.loading(d),!twttr.loggedIn&&twttr.pageLocale==="ja"&&twttr.abdecider.choose("japanese_signup_text_profile_232"),this.getUserInfo(d,function(){c.updatePageTitle(_("{{fullName}} ({{screenName}}) on Twitter",{fullName:c.profileUser.name,screenName:d})),c._highlightNavIfCurrentUser(d),c.selectCurrentSideNav(),b.banner_preview_url&&twttr.helpers.isCurrentUser(c.profileUser)&&(c.bannerPreviewUrl=b.banner_preview_url),c._switchToStream({screenName:d,stream:c.initialProfileStream(),tab:"tweets"}),c.checkWithheld()},{batch:!twttr.loggedIn,profiler:!0},twttr.bind(this,this.noUserFoundCallback))},message:function(a){this.profile(a),a=a||{},twttr.API.User.find(a.screen_name,function(b){twttr.dialogs.dmSingle({user:{screenName:a.screen_name,user_id:b.attributes.id,name:b.attributes.name,profile_image_url:b.attributes.profile_image_url},origin:a.origin}).open()})},favorites:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Favorites",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.Favorites,tab:"favorites"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},profile_activity:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Activity",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.ActivityByUserStream,tab:"activity"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},followers:function(a){var b=this._defaultedScreenName(a.screen_name);this.updatePageTitle(_("Twitter / People who follow {{screenName}}",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.Followers,tab:"followers"})},following:function(a){var b=this._defaultedScreenName(a.screen_name);this.updatePageTitle(_("Twitter / People {{screenName}} is following",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this.one("switchedToStream",twttr.bind(this,this.insertEmptyTimeline)),this._switchToStream({screenName:b,stream:twttr.streams.Friends,tab:"following"})},youBothFollow:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){this.updatePageTitle(_("Twitter / People you and @{{screenName}} both follow",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.SocialContextStream,socialContextType:"followsInCommonWith",tab:"following"})}))},followersYouFollow:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){this.updatePageTitle(_("Twitter / People you follow who follow @{{screenName}}",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectSideNav("userFollowers"),this._switchToStream({screenName:b,stream:twttr.streams.SocialContextStream,socialContextType:"followingFollowersOf",tab:"followers"})}))},lists:function(a){var b=this._defaultedScreenName(a.screen_name);this.getUserInfo(b,twttr.bind(this,function(){twttr.helpers.canViewUser(this.profileUser)?(this.updatePageTitle(_("Twitter / {{screenName}}'s Lists",{screenName:b})),this._highlightNavIfCurrentUser(b),this.selectCurrentSideNav(),this._switchToStream({screenName:b,stream:twttr.streams.OwnLists,tab:"lists"})):twttr.router.routeTo(twttr.router.profilePath({screen_name:this.profileUser.screenName}))}),{batch:!twttr.loggedIn,profiler:!0})},subscriptions:function(a){var b=a.screen_name;this.updatePageTitle(_("Twitter / Lists {{screenName}} is following",{screenName:b})),this._highlightNavIfCurrentUser(b),this._switchToStream({screenName:b,stream:twttr.streams.Subscriptions,tab:"lists"})},followerRequests:function(a){var b=twttr.util.params().uid;b&&!twttr.helpers.isCurrentUser(+b)&&twttr.router.redirectTo("/?badLinkRecipient="+b);var c=this._defaultedScreenName(a.screen_name);if(!twttr.helpers.isCurrentUser(c))twttr.router.routeTo(twttr.router.profilePath({screen_name:c}));else{this.updatePageTitle(_("Twitter / My follower requests")),this.selectCurrentSideNav(),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.FollowerRequests,tab:"pending"});if(!this.didBindUserBlockedEvent){this.didBindUserBlockedEvent=!0;var d=this;twttr.API.User.bind("block",function(){d.streamManager.resetCache()})}}},listDeleted:function(a){this.streamManager.getCurrent().remove(a.uri)},dashStatsTitle:function(){return twttr.helpers.isProfileUser()?_("About you"):null},shouldShowTweetBox:function(){return twttr.loggedIn&&!twttr.helpers.isProfileUser()&&twttr.decider.isAvailable("profile_tweetbox")},renderTweetbox:function(){if(this.tweetBox&&this._renderedScreenName===twttr.profileUser.screenName)return this.tweetBoxNode;var a=this;this.$find("div.profile-tweet-box-placeholder").remove();if(this.shouldShowTweetBox()){var b=this.tweetBoxNode=$('<div class="profile-tweet-box"/>'),c="@"+this.profileUser.screenName;this.$find(".profile-actions-container").addClass("preceeding-profile-tweet-box").after(b),this.tweetBox=new twttr.TweetBox(b.empty(),twttr.merge({defaultContent:c+" ",id:"profile-tweet-box",condensed:!0,enableDraft:twttr.isT1,enableAutoGrow:twttr.isT1,statusAction:"update"},this.getTweetBoxOptions())),this.tweetBox.bind("tweetSuccess",function(a,b){b.inReplyToScreenName?twttr.showMessage(_("Your Tweet to @{{username}} has been sent!",{username:b.inReplyToScreenName})):twttr.showMessage(_("Your Tweet was posted!"))})}return b},getTweetbox:function(){return this.tweetBox},initialProfileStream:function(){return twttr.isT1&&twttr.streams.Profile.shouldDisplay()?twttr.streams.Profile:twttr.streams.User},noUserFoundCallback:function(){this._renderedScreenName=null,this.streamManager&&(this.streamManager.switchOut(),this.streamManager.setCurrent(null))}}).addOnSwitchAway(function(){twttr.admin&&twttr.admin.removeTools(),this.renderNotWithheld(),twttr.API.User.unbind("block",this.userWasBlocked)}).addAfterRender(function(){if(!window.location.hash)return;var a=twttr.util.paramsFromUrl(window.location.hash);a&&a.protected_redirect&&(window.location.hash=window.location.hash.replace("?protected_redirect=true",""),twttr.showError(_("Sorry, you are not authorized to see this status.")))}).addAfterRender(function(){this.preRendered&&!this.didEmptyDashboard&&(this.$find("div.dashboard").empty(),this.didEmptyDashboard=!0),this.addDashboardComponents(this.getDashboardComponents())});a(e)})}),provide("components/pages/List",function(a){using("_","util",twttr.isT1?"components/pages/mixins/listT1":"components/pages/mixins/listP1","streams/List","streams/ListMembers","streams/ListFollowers","components/SignupCallOut",function(_,b,c,d,e,f,g){var i=twttr.klass("twttr.components.pages.List").subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).methods(twttr.EventProvider).methods({list:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}}",a)),this.switchToStream(d,a),this.selectCurrentSideNav(),this.focusStreamTab("tweets")},members:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}} - Following",a)),this.switchToStream(e,a),this.selectCurrentSideNav(),this.focusStreamTab("members")},followers:function(a){a=b.camelizeObject(a),this.updatePageTitle(_("Twitter / @{{screenName}}/{{listSlug}} - Followers",a)),this.switchToStream(f,a),this.selectCurrentSideNav(),this.focusStreamTab("followers")},noAutoRender:!0,listDeleted:function(a){twttr.showMessage(_("List deleted")),twttr.router.routeTo(twttr.router.homePath())},listUpdated:function(a){twttr.router.routeTo(twttr.router.userListPath({screen_name:twttr.currentUser.screenName,list_slug:a.slug}))},_getList:function(a){var b=this;if(!this.listOwnerName||!this.listId)throw"You tried to use _getList before defining .listOwnerName and .listId";twttr.API.User.find(this.listOwnerName,function(c){c.lists.find(b.listId,function(b){a(b,c)})})},switchToStream:function(a,b){var c=this,d=function(){c.trigger("notFound")};this.loading(b.screenName,b.listSlug),twttr.API.User.find(b.screenName,{success:function(e){twttr.profileUser=e,e.lists.find(b.listSlug,{success:function(d){c.listId=d.id,c.listOwnerName=d.user.screenName,c._listSlug=d.slug,c.fullName=d.fullName;var e=new twttr.views.List(d);twttr.themes.loadUserStyleFor(d.user),c._renderedListId!==d.id&&(c.render({list:e}),c._registerEvents(d),c._renderedListId=d.id),c.streamManager.switchTo(a,b)},error:d})},error:d})},loading:function(a,b){this.unfocusStreamItem(),this._listSlug!==b&&this.listOwnerName!==a&&this.$node.children().empty()}}).addAfterRender(function(){var a=this;this._getList(function(b,c){a.owner=c,twttr.loggedIn||a.addDashboardComponent(new g("list",{profileUser:c})),a.addDashboardComponents(a.getDashboardComponents(b)),a.owner&&!twttr.isT1&&trackClient({action:"impression"},{profile_id:a.owner.id,message:b.slug})})}).mixin(c);a(i)})}),provide("components/pages/Permalink",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.pages.Permalink").subclassOf(twttr.components.Page).view(twttr.views.PermalinkPage).addOnSwitchAway(function(){twttr.$elements.page.css("padding-top",""),twttr.widget.Dialog.close()}).methods({permalink:function(a){this.loadPage(a)},loadPage:function(a,b){var c=this;twttr.widget.Dialog.close();if(this._renderedTweetId==a.id)return b&&b.call(this);this._renderedTweetId=a.id,this.loading();var d=function(b){b.status==403?twttr.router.routeTo(twttr.router.profilePath({screen_name:a.screen_name})):c.trigger("notFound")},e=function(d){c.tweetComponent=new twttr.components.PermalinkTweet(d),c.tweetComponent.$node.appendTo(c.$find(".components-middle")),c.tweetComponent.bind("deleted",function(){twttr.app.isOnPage("permalink")&&twttr.router.routeTo(twttr.router.homePath())});if(a.photo_index&&!twttr.decider.isAvailable("phoenix_turkey_permalink")){c.trigger("notFound");return}var e=c.$find(".permalink");if(c.tweetComponent.renderWithheld())e.addClass("withheld");else{c.tweetComponent.renderCreatorWithheld()?e.addClass("withheld-creator"):e.removeClass("withheld-creator");var f=c.$find("div.js-tweet-media-container");c.mediaComponent=new twttr.components.Media(d,f.width(),{linkLarge:!0}),c.mediaComponent.$node.appendTo(f);var g=new twttr.components.InReplyTo(d),i=new twttr.components.TweetGeoSmall(d),j=new twttr.components.Footer("slim"),k=new twttr.components.MachineTranslatedTweet(d);g.$node.appendTo(c.$find(".components-above"));if(!twttr.isT1){var l=new twttr.components.MentionedInTweet(d);l.$node.appendTo(c.$find(".components-below"))}c.renderActivity(d),i.$node.appendTo(c.$find(twttr.isT1?".components-middle .permalink-inner":".components-below")),c.renderReplies(d),j.$node.appendTo(c.$find(".permalink-footer")),k.$node.appendTo(c.$find("div.js-machine-translated-tweet-container")),e.removeClass("withheld"),b&&b.call(c)}if(!twttr.loggedIn){var m=new twttr.components.SignupCallOut("permalink",{profileUser:d.user});twttr.isT1?m.$node.prependTo(c.$find(".permalink-footer")):m.$node.appendTo(c.$find(".permalink-header")),twttr.$elements.page.css("padding-top","30px")}};twttr.API.Status.find(a.id,{success:function(a){c.status=a,c.updatePageTitle(_("Twitter / @{{screenName}}: {{{truncatedText}}} ...",{screenName:a.user.screenName,truncatedText:a.text.slice(0,26)})),twttr.themes.loadUserStyleFor(a.user),c.render(),twttr.loggedIn?twttr.currentUser.relationshipWith(a.user.screenName,{success:function(b){a.user.following=b.following,a.user.attributes.following=b.following,a.attributes.user.following=b.following,e(a)},error:d}):(a.user.following=!1,a.user.attributes.following=!1,a.attributes.user.following=!1,e(a)),trackClient({component:"tweet",action:"results"},{item_ids:[a.id],item_count:1,event_value:1})},error:d}),trackClient({action:"impression"})},loading:function(){this.$find(".permalink").empty()}}).methods({noAutoRender:!0}).click({".js-tweets-at-this-place":function(a,b){var c=b.attr("data-place-id"),d=b.attr("data-place-name");return c&&d&&twttr.router.routeTo(twttr.router.placeTweetSearchPath({place_id:c,place_name:d})),a.stopPropagation(),a.preventDefault(),!1},"a[data-twitter-media-url='true']":function(a){a.stopPropagation()}}).keydown({f:function(a){$(a.target).is(":not(input)")&&this.tweetComponent.faveTweet("keyboard")},r:function(a){$(a.target).is(":not(input)")&&(this.tweetComponent.replyTweet("keyboard"),a.preventDefault())},t:function(a){$(a.target).is(":not(input)")&&this.tweetComponent.retweetTweet("keyboard")}});twttr.isT1?c.containerCssClass("wrapper-permalink").methods({renderReplies:function(a){var b=this;new twttr.components.Conversation(a,null,function(c){var d=new twttr.components.Replies(a,null,c.resultGroups);d.$node.appendTo(b.$find(".components-below")),new twttr.components.InlineReplyBox(b.tweetComponent.$node.find(".tweet"),b.$find(".components-below"),d.$node,481,425)})},permalinkWithEmbedDialog:function(a){this.loadPage(a,this.showEmbedDialog)},showEmbedDialog:function(){twttr.decider.isAvailable("embed_code_dialog")&&twttr.dialogs.embedCode(this.status).open()},renderActivity:twttr.util.noopInT1}).click({"a.embed-link":function(a){a.preventDefault(),a.stopPropagation(),twttr.router.routeTo(twttr.router.embedDialogPermalinkPath({screen_name:this.status.user.screenName,id:this.status.id}))}}):c.containerCssClass("permalink-container").methods({permalinkWithEmbedDialog:twttr.util.noopInP1,showEmbedDialog:twttr.util.noopInP1,renderReplies:twttr.util.noopInP1,renderActivity:function(a){var b=twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_social_context"),c=new twttr.components[b?"TweetActivity":"Retweeters"](a);c.$node.appendTo(this.$find(".components-below"))}}),a(c)})}),provide("components/pages/WhoToFollow",function(a){using("_","constants","streams/SuggestionCategoryMembersStream").as(function(b,_){twttr.klass.page("twttr.components.pages.WhoToFollow",function(){twttr.components.Page.apply(this,arguments),this.dashboardNeedsToBeCreated=!1}).mixin(twttr.mixins.streamablePage).mixin(twttr.mixins.discoveryHelper).view(twttr.views.WhoToFollow).addAfterRender(function(){this._rendered=!0;var a=this;this._createDashboard(!0),twttr.helpers.addFormEvents(this.$find(".who-to-follow-header form"),function(){var b=twttr.audit.currentAction(),c=this.q.value,d;twttr.audit.currentPage()=="welcome"?d=twttr.components.pages.Welcome.ROUTES_TO_STEP[b]:d=twttr.components.pages.WhoToFollow.ROUTES_TO_STEP[b],c!=""&&(trackClient({component:"user_search_form",action:"search"},{step:d,query:c}),a.routePageTo(a.PATH_ROOT,"Search",{query:c}))})}).addOnSwitchTo(function(){this._createDashboard(),trackClient({section:"",component:"",action:"impression"})}).addOnSwitchAway(function(){twttr.API.User.unbind("follow.RecentlyFollowedComponent"),twttr.recentlyViewedUsers.unbind("push.RecentlyViewedComponent"),this.dashboardNeedsToBeCreated=!0,this._rendered=!1,this.$find(".dashboard > .component").remove()}).statics({ROUTES_TO_STEP:{whoToFollow:"suggestions",suggestions:"suggestions",interests:"interests",category:"interests","import":"import",matches:"import",search:"search"}}).methods({switchToStream:function(){var a=this.streamManager.switchTo.apply(this.streamManager,arguments);return a},search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo(this.PATH_ROOT);this._switchTabAndRender("search",c),this.updatePageTitle(_("Twitter / User Search")),trackClient({action:"impression"},{context:"search",query:c});var d=twttr.Scribbler.clientEvent.spawn({context:"search",query:c});this.switchToStream(twttr.streams.PeopleSearch,{query:c,scribbler:d,pathRoot:this.PATH_ROOT})},suggestions:function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("suggestions"),this.updatePageTitle(_("Twitter / Who to follow / Suggestions")),trackClient({action:"impression"},"suggestions");var c=twttr.Scribbler.clientEvent.spawn({context:"suggestions"});if(twttr.decider.isAvailable("whotofollow_recommendations")){var d=this.switchToStream(twttr.streams.UserRecommendationsStream,{scribbler:c,pathRoot:this.PATH_ROOT});d&&d.setStreamManager(this.streamManager)}else twttr.router.redirectTo(twttr.router.whoToFollowInterestsPath())},interests:function(a,b){this._switchTabAndRender("interests"),this.updatePageTitle(_("Twitter / Who to follow / Interests")),trackClient({action:"impression"},"interests");var c=twttr.Scribbler.clientEvent.spawn({context:"interests"}),d={scribbler:c,pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.SuggestionCategoriesStream,this.localizeQuery(d,b))},category:function(a,c){var d=this,e=function(a){if(!a)return d.routePageTo(d.PATH_ROOT,"Interests");var e=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});d._switchTabAndRender("interests"),d.updatePageTitle(_("Twitter / Who to follow / Interests / {{category}}",{category:a.name})),d.switchToStream(b.streams.SuggestionCategoryMembersStream,d.localizeQuery({category:f,suggestionCategory:a,scribbler:e,pathRoot:d.PATH_ROOT},c))},f=a.category||c.category;trackClient({action:"impression"},{query:f,context:"interests"});var g=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;g?e(g[f]):twttr.API.SuggestionCategory.getAll(this.localizeQuery({success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[f];e(b)}},c))},"import":function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("import","","services"),this.updatePageTitle(_("Twitter / Who to follow / Find friends")),trackClient({action:"impression"},"import");var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:this.PATH_ROOT},b),e=this.switchToStream(twttr.streams.ContactImportServices,d);e&&e.setStreamManager(this.streamManager)},matches:function(){if(!twttr.loggedIn)return this.trigger("loginRequired");this._switchTabAndRender("import","","matches"),this.updatePageTitle(_("Twitter / Who to follow / Find friends / Results")),trackClient({action:"impression"},"import");var a=twttr.Scribbler.clientEvent.spawn({context:"import"});this.switchToStream(twttr.streams.ContactImportMatches,{scribbler:a,pathRoot:this.PATH_ROOT})},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a},PATH_ROOT:"whoToFollow",noAutoRender:!0,_createDashboard:function(a){if(a||this.dashboardNeedsToBeCreated)this.addDashboardComponents(this._dashboardComponents()),this.dashboardNeedsToBeCreated=!1},_dashboardComponents:function(){var a=twttr.Scribbler.clientEvent.spawn({context:function(){var a=twttr.audit.currentAction();return twttr.audit.currentPage()=="welcome"?twttr.components.pages.Welcome.ROUTES_TO_STEP[a]:twttr.components.pages.WhoToFollow.ROUTES_TO_STEP[a]}});if(!twttr.loggedIn)return[new twttr.components.SignupCallOut("who_to_follow"),new twttr.components.Footer];var b=twttr.abdecider.choose("wtf_with_less_122"),c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer];return b=="empty_dashboard"?c=[]:b=="no_recent_follow"?c=[new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_recent_view"?c=[new twttr.components.RecentlyFollowed,new twttr.components.InviteFriends(a),new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_invite_friends"?c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.RelatedServices,new twttr.components.Footer]:b=="no_related_services"?c=[new twttr.components.RecentlyFollowed,new twttr.components.RecentlyViewed,new twttr.components.InviteFriends(a),new twttr.components.Footer]:b=="invite_friends_only"&&(c=[new twttr.components.InviteFriends(a)]),c},_switchTabAndRender:function(a,b,c){this._rendered||this.render();var d=this.$find(".who-to-follow-header form input");b?d.val(b).addClass("actasfocused").focus():d.val("").removeClass("actasfocused").blur(),this.focusStreamTab(a,c),this.$find(".who-to-follow-stream").removeClass().addClass("who-to-follow-stream who-to-follow-"+a+"-stream"),twttr.themes.loadDefaultTheme()}}),a(twttr.components.pages.WhoToFollow)})}),provide("components/pages/WebPersonalizationPreview",function(a){using("_","constants","components/WebPersonalizationSettings","components/Footer").as(function(b,_){var c=twttr.klass.page("twttr.components.pages.WebPersonalizationPreview").view(twttr.views.WebPersonalizationPreview).containerCssClass("wrapper-narrow").methods({preview:function(a,c){if(!twttr.decider.isAvailable("personalization_preview")&&!c.force_bq)return twttr.router.redirectTo(twttr.router.whoToFollowInterestsPath());this.updatePageTitle(_("Twitter / Web Personalization Preview")),twttr.inEU&&trackClient({element:"eu",action:"impression"}),twttr.doNotTrack&&trackClient({element:"dnt",action:"impression"}),twttr.themes.loadDefaultTheme(),this.$node.empty();var d=new b.components.WebPersonalizationSettings;d.$node.appendTo(this.$node),d.bind("disallow",function(a){twttr.router.routeTo(twttr.router.homePath())}),(new b.components.Footer("slim")).$node.appendTo(this.$node)}});a(c)})}),provide("components/pages/404",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.404").subclassOf(twttr.components.Page).view(twttr.views["404Page"]).containerCssClass("error-page").methods({notFound:function(a){this.render(),this.updatePageTitle(_("Twitter / ?")),twttr.themes.loadCurrentUserStyle()}}).methods({noAutoRender:!0}).addAfterRender(function(){var a=this,b=new twttr.components.Footer("slim");this.$find("div.four-oh-four-footer").remove(),b.$node.appendTo(this.$find(".four-oh-four")),twttr.helpers.addFormEvents(this.$find(".user-search-form"),function(){var a=this.q.value;a!=""&&(twttr.isT1?twttr.router.routeTo(twttr.router.userSearchPath({query:a})):twttr.router.routeTo(twttr.router.whoToFollowSearchPath({query:a})))}),a.$find(".user-search-form").addClass("ready")}),a(twttr.components.pages[404])})}),provide("components/pages/403",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.403").subclassOf(twttr.components.Page).view(twttr.views.SuspendedUserPage).containerCssClass("error-page").methods({suspendedUser:function(a){this.render(),this.updatePageTitle(_("Twitter / Suspended")),twttr.themes.loadCurrentUserStyle()}}).methods({noAutoRender:!0}),a(twttr.components.pages[403])})}),provide("components/pages/PlaceT1",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.pages.PlaceT1",function(){twttr.components.Page.apply(this,arguments)}).subclassOf(twttr.components.Page).methods({tweets:function(a){var b=this;twttr.API.Place.find(a.place_id,{success:function(a){twttr.router.redirectTo(twttr.geo.getPlaceFullAddressAndMapLink(a.data()).map_link)},error:function(a){b.trigger("notFound")}})},noAutoRender:!0});a(c)})}),provide("components/pages/RateLimit",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.pages.RateLimit").subclassOf(twttr.components.Page).view(twttr.views.RateLimitPage).methods({tooMuch:function(a){this.render(),this.updatePageTitle(_("Twitter / Error")),twttr.themes.loadDefaultTheme()}}).methods({noAutoRender:!0}).containerCssClass("four-twenty-container"),a(twttr.components.pages.RateLimit)})}),provide("components/pages/mixins/welcomeLearnFlowT1",function(a){using().as(function(){twttr.klass.mixin("twttr.components.pages.mixins.welcomeLearnFlowT1",function(){return this.click({".js-account-group":function(a,b){a.stopPropagation(),a.preventDefault(),this.showMiniProfile(b.closest(".js-actionable-user").data("user-id")),twttr.scribbles.logViewProfileDetails.call(b,a)},".js-who-to-follow-search .js-submit":function(){trackClient({component:"user_search_form",element:"search_button",action:"click"})}}).methods({showMiniProfile:function(a){twttr.API.User.find(a,function(a){using("widget/MiniProfileDialog",function(b){(new b(a,!0)).open()})})},_slideDrawer:function(a,b){a?$(".js-welcome-dashboard").show():$(".js-welcome-dashboard").hide(),b&&b()},_customRenderStep:function(a){a=="matches"?this.$find(".js-back-to-import").show():this.$find(".js-back-to-import").hide()},_pulseFollowButton:function(){},_resizeFlow:function(){var a=$(window).height()-$(".js-flow-step").outerHeight()-$(".js-welcome-stream-header").outerHeight()-$("div.js-stream-header").outerHeight()-($(".js-back-to-import:visible").outerHeight()||0)-114;a>100&&$(".stream-manager-container").css("max-height",a);var b=$(window).height()-$(".js-welcome-faux-tweet-stream").height()-$(".js-content-header").height()-153+30;b>20&&$(".route-welcome .content-main .stream-end-inner").css("padding-bottom",b)},_getNextButtonText:function(a){return a?_("Done"):_("Next")},_setTheme:function(){twttr.themes.loadDefaultTheme()}}).addOnSwitchTo(function(){twttr.cache.local.shownWelcomeFlow=!0})}),a()})}),provide("components/pages/WelcomeLearnFlow",function(a){using("streams/SuggestionCategoryMembersDashboardStream","stork").as(function(b){twttr.klass.page("twttr.components.pages.WelcomeLearnFlow",function(){twttr.components.Page.apply(this,arguments),this._steps=this._firstStep=null;var a=twttr.Router.getCurrentQueryStringParams();this._resurrect=!!a.resurrect;var b=[];for(var c=0;c<b.length;++c){var d=twttr.abdecider.choose(b[c]);if(d!="")break}d||(this._bucket=a.welcomeBucket),this._showIntro=!0,this._showProgress=!0,this.PROFILE_SIZE_LIMIT=716800}).subclassOf(twttr.components.Page).mixin(twttr.mixins.streamablePage).mixin(twttr.mixins.discoveryHelper).mixin(twttr.mixins.welcomeScribing).mixin(twttr.isT1?twttr.components.pages.mixins.welcomeLearnFlowT1:twttr.components.pages.mixins.welcomeLearnFlowP1).view(twttr.views.WelcomeLearnFlow).click({".user-content-image, .display-name, .screen-name":function(a){$(a.target).closest(".stream-item-content").find(".more-info").slideDown()},".glass .submit":function(a){$(a.target).closest("form").submit()},".js-image-error .js-dismiss":function(){this._hideImageError()},".js-back-to-stream .js-button":function(){this.$find(".js-welcome-search input[type='text']").val("");var a=this._steps[this._currentSearchStepId].route;twttr.router.routeTo(a)},".js-full-results-link":function(a){var b=$(a.target).data("query")||"";trackClient({section:"search",element:"full_results_link",action:"click"},{query:b}),this.routePageTo(this.PATH_ROOT,"Search",{query:b})},".js-skip-link":function(a){var b=this,c=$(a.target),d=this._steps[this._currentStepId],e=function(){b._scribeStepCompletion("skip"),b._isOnLastStep()?b.finish():twttr.router.routeTo(c.attr("href"))};return d&&d.skip_handler?d.skip_handler(e):window.setTimeout(e,0),!1},".js-next-btn":function(a){var b=this,c=$(a.target);if(c.is(".disabled"))return!1;var d=this._steps[this._currentStepId],e=function(){b._scribeStepCompletion("done"),b._isOnLastStep()?b.finish():twttr.router.routeTo(c.attr("href"))},f;return b._lastStream&&b._lastStream.deferFollows?f=function(){d.suppress_follow_progress=!0,b._addNextDisableReason("prefollowing"),b._lastStream.commitPrefollows(function(){d.suppress_follow_progress=!1,e()})}:f=e,d&&d.next_handler?d.next_handler(f):window.setTimeout(f,0),!1}}).addOnSwitchTo(function(){this.updatePageTitle(_("Twitter / Welcome")),twttr.app.resetPadding(),this.setWelcomeSkipCookie(),this._setSteps(),twttr.abdecider.choose("growth_stork_persistent_239")!="no_stork"&&twttr.stork.init(),twttr.decider.isAvailable("welcome_timeline_stats")&&(twttr.streams.Home.scribeTweetDensity=!0,twttr.components.pages.Home.scribeScroll=!0);var a=this;twttr.API.User.bind("follow_request.WelcomeLearnFlow prefollow_request.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(1)}}),twttr.API.User.bind("follow.WelcomeLearnFlow prefollow.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(1)},success:function(b,c){a._previewFollow(c)}}),twttr.API.User.bind("unfollow.WelcomeLearnFlow unprefollow.WelcomeLearnFlow",{before:function(b){var c=a._steps[a._currentStepId];c.suppress_follow_progress||a._updateProgress(-1)},success:function(b,c){a._previewUnfollow(c)}}),$(window).bind("resize.WelcomeLearnFlow",twttr.bind(this,this._resizeFlow))}).addOnSwitchAway(function(){twttr.app.recalculatePadding(),this._steps=this._firstStep=null,twttr.API.User.unbind(".WelcomeLearnFlow"),$(window).unbind("resize.WelcomeLearnFlow"),this._profileImageInterval&&(window.clearInterval(this._profileImageInterval),this._profileImageInterval=null),twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=$.noop}).addAfterRender(function(){var a=this;this._rendered=!0,this.streamManager.noInfiniteScroll=!0,this.$find(".welcome-dashboard div.js-stream-manager-container").bind("scroll",function(b){var c=$(this);Math.abs(c.scrollTop()+c.height()-c.children().height())<100&&a.streamManager.getMoreOldItems(function(a){scribble("stream-scrolled",{page:a._page,stream:a._cacheKey,focused_tweet_id:a.focusedItemId||""})})}),twttr.helpers.addFormEvents(a.$find(".js-welcome-search form"),function(b,c){var d=c.q;if(d!=""){var e=function(){trackClient({component:"user_search_form",action:"search"},{query:d});var b=twttr.abdecider.choose("welcome_top_people_286")=="top_people"?"SearchTop":"Search";a.routePageTo(a.PATH_ROOT,b,{query:d})};a._lastStream&&a._lastStream.deferFollows?a._lastStream.commitPrefollows(e):e()}})}).statics({ROUTES_TO_STEP:{intro:"intro",interests:"interests",category:"interests","import":"import",matches:"import",search:"search",starter:"starter",recommendations:"recommendations",profile:"profile"}}).methods({PATH_ROOT:"welcome",noAutoRender:!0,_addressBookAvailable:function(){return twttr.decider.isAvailable("wtf_signup_suggestions")},_previewFollow:function(a){var b=this,c=this.$find('.js-tweet-preview-container .js-unclickable-tweet[data-user-id="'+a.idStr+'"]');if(c.length){c.slideDown();return}var d=function(a){var c=new twttr.views.UnclickableTweet(a),d=$(c.html()).hide();b.$find(".js-tweet-preview-container").prepend(d),d.slideDown()};a.status&&!a.status.inReplyToUserId&&!a.status.attributes.was_retweeted?(a.status.attributes.user=a.attributes,d(a.status)):a.timeline({count:25,exclude_replies:!0,success:function(a){a.length()&&d(a.first())}})},_previewUnfollow:function(a){var b=this,c=this.$find(".js-tweet-preview-container .js-unclickable-tweet[data-user-id="+a.id+"]");c.slideUp()},_setSteps:function(){var a=this;this._steps={intro:{route:twttr.router.welcomeIntroPath(),title:_("Welcome, {{{name}}}.",twttr.currentUser),subtitle:_("Get started in less than 60 seconds."),next_step:"recommendations",show_progress:!1,show_search:!1,next_enabled:!0,no_drawer:!0,show_intro_text:!1},recommendations:{route:twttr.router.welcomeRecommendationsPath(),title:_("Build your timeline."),subtitle:_("Follow people to get their Tweets."),next_step:"interests",show_search:!0,show_progress:!0,initial_progress_copy:_("Start by following 5"),min_progress:3,suggested_progress:5,next_enabled:!1,show_intro_text:!0},"import":{route:twttr.router.welcomeImportPath(),title:_("Find people you know."),subtitle:_("Add your contacts securely."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:2,suggested_progress:5,next_enabled:!1,show_intro_text:!0},matches:{route:twttr.router.welcomeImportMatchesPath(),title:_("Find people you know."),subtitle:_("Add your contacts securely."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:2,suggested_progress:5,next_enabled:!1,show_intro_text:!0},interests:{route:twttr.router.welcomeInterestsPath(),title:_("See who’s here."),subtitle:_("Find and follow well-known people."),next_step:"finish",show_search:!0,show_progress:!0,initial_progress_copy:_("Try 5 more"),min_progress:3,suggested_progress:5,next_enabled:!1,show_intro_text:!0},profile:{route:twttr.router.welcomeProfilePath(),title:_("Add character."),subtitle:_("Upload a photo and describe yourself.",twttr.currentUser),next_step:"finish",show_search:!1,show_progress:!1,min_progress:1,suggested_progress:1,next_enabled:twttr.abdecider.choose("hide_skip_in_profile_welcome_step_288")==="skip_disabled",skip_disabled:twttr.abdecider.choose("hide_skip_in_profile_welcome_step_288")==="skip_disabled",next_handler:function(b){a._handleProfileNext(b)},show_intro_text:!0}},this._firstStep=this._showIntro?"intro":"recommendations";var b="interests",c;this._resurrect&&(this._steps["import"].min_progress=0),twttr.abdecider.choose("welcome_prefollow_213")=="prefollow"&&(this._steps.recommendations.subtitle+=" "+_("Here are 3 accounts to get you started.")),twttr.abdecider.choose("welcome_email_import_copy_change_264")=="nospam"&&(this._steps["import"].subtitle=_("We won't email your contacts without your permission."),this._steps.matches.subtitle=_("We won't email your contacts without your permission.")),twttr.decider.isAvailable("contact_import")&&(c=this._steps[b],c.next_step="import",b="import"),twttr.decider.isAvailable("welcome_profile")&&twttr.decider.isAvailable("avatar_upload")&&!this._resurrect&&(c=this._steps[b],c.next_step="profile",b="profile"),twttr.decider.isAvailable("welcome_ad_track")&&(this._steps.intro.ad_referal=$.cookie("ad_partner")=="adparlor",this._steps.intro.ad_parlor=$.cookie("ad_partner")=="adparlor"),this._currentSearchStepId=this._steps.intro.next_step,this._steps.matches.next_step=this._steps["import"].next_step},_addAmbassadorList:function(a,b){twttr.currentUser.friendsCount>0?twttr.currentUser.friends().first(function(c){if(!c){b();return}c.lists(function(c){var d=c.find(function(a){return a.description.match(/\#WelcomeToTwitter/i)});if(d){var e=[],f=-1,g=function(){d.members({cursor:f,success:function(c,d){e=e.concat(c.toArray()),d.response.next_cursor?(f=d.response.next_cursor,g()):(a.unshift(e),a.render(),b())}})};g()}else b()})}):b()},_routeToFirstStep:function(){var a=this;window.setTimeout(function(){a._steps?twttr.router.routeTo(a._steps[a._firstStep].route):twttr.router.routeTo(twttr.router.welcomePath())},0)},welcome:function(a,b){this._steps?(trackClient({action:"impression"}),this._welcomeSetupSpinner&&(this._welcomeSetupSpinner.detach(),this._welcomeSetupSpinner=null),this._routeToFirstStep()):(this.render(),this.$find(".js-welcome-search").hide(),this.streamManager.setTitle({_setTitle:function(a){a(_("Please wait…"))}}),this._welcomeSetupSpinner=(new twttr.views.StreamLoading).render(this.$find(".js-who-to-follow-stream .stream-container"),"html"))},_recommendationsStreamOptions:function(){var a={inWelcomeFlow:!0,pathRoot:this.PATH_ROOT,title:"",scribbler:this._createScribbler("recommendations_stream",{context:"starter"})};return a},recommendations:function(a,b){var c=new twttr.streams.UserRecommendationsStream(this._recommendationsStreamOptions()),d=this,e=function(){return twttr.router.routeTo(d._nextRoute(d._steps.recommendations))};if(!this._addressBookAvailable()){e();return}c.loadRecommendedUsers({success:function(a,b){if(a.length()>0){c.scribbler.scribe({action:"found_results",section:"recommendations"}),d._renderStep("recommendations"),d.bqPrefollow&&d.$find(".js-welcome-faux-tweet-stream").hide();var f=d._recommendationsStreamOptions();f.initialItems=a,f.cursor=b.response.next_cursor;var g=d.switchToStream(twttr.streams.UserRecommendationsDashboardStream,f);d.bqPrefollow&&g.reachedTheEnd(),twttr.decider.isAvailable("welcome_warm_signup")&&!d.bqPrefollow?d._addAmbassadorList(g,function(){d._loadedRecommendations(g)}):d._loadedRecommendations(g),g.bind("rendered_recs.WelcomeLearnFlow",function(){d._pulseFollowButton()}),f.scribbler.scribe({action:"impression"})}else c.scribbler.scribe({action:"not_found_results",section:"recommendations"}),e()},error:function(a){e()}})},_loadedRecommendations:function(a){twttr.abdecider.choose("welcome_prefollow_213")=="prefollow"&&twttr.currentUser.friendsCount<=1&&this._prefollow(a,3),this.bqPrefollow&&this._prefollow(a,100)},_prefollow:function(a,b){var c=this,d=this._steps[this._currentStepId];a.deferFollows=!0,window.setTimeout(function(){c.$find(".js-welcome-dashboard .js-stream-item .js-follow-combo").each(function(c,d){if(c>=b)return!1;a.userActionPrefollow($(d),"prefollow.user")}),d.next_enabled||window.setTimeout(function(){c._addNextDisableReason("progress")},0)},0)},intro:function(a,b){trackClient({action:"impression"}),this._renderStep("intro"),this.switchToStream(null)},resurrect:function(a,b){var c=twttr.router.welcomeRecommendationsPath();trackClient({action:"impression"},"resurrect"),c="/?resurrect=1"+c.slice(1),window.location.href=c},"import":function(a,b){if(!twttr.loggedIn)return this.trigger("loginRequired");this._renderStep("import"),trackClient({action:"impression"},"import");var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:this.PATH_ROOT,onlyMatched:twttr.abdecider.choose("welcome_flow_no_choice_contact_import_160")=="no_choice_contact_import",inWelcomeFlow:!0,context:"welcome"},b),e=this.switchToStream(twttr.streams.DashboardContactImportServices,d);e&&(e.setStreamManager(this.streamManager),e.setMatchesStreamKey(this._lastMatchesStreamKey))},matches:function(){if(!twttr.loggedIn)return this.trigger("loginRequired");this._renderStep("matches"),trackClient({action:"impression"},"import");var a=twttr.Scribbler.clientEvent.spawn({context:"import"}),b={scribbler:a,pathRoot:this.PATH_ROOT},c=this.switchToStream(twttr.streams.DashboardContactImportMatches,b),d=this;c.bind("error.WelcomeLearnFlow",function(){d._removeNextDisableReason("progress")}),this._lastMatchesStreamKey=c._cacheKey},interests:function(a,b){var c=this;this._renderStep("interests"),trackClient({action:"impression"});var d=twttr.Scribbler.clientEvent.spawn({context:"interests"}),e={scribbler:d,noHeaderFooter:!0,title:"",pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.SuggestionCategoriesDashboardStream,this.localizeQuery(e,b))},category:function(a,c){var d=this,e=function(a){if(!a)return d.routePageTo(d.PATH_ROOT,"Interests");var e=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});d._renderStep("interests"),d.$find(".js-back-to-stream .js-dashboard-stream-title").text(a.name),d.$find(".js-back-to-stream").show(),d._resizeFlow();var g=d.localizeQuery({category:f,suggestionCategory:a,scribbler:e,noHeaderFooter:!0,title:a.name+" ("+a.size+")",pathRoot:d.PATH_ROOT},c);d.switchToStream(b.streams.SuggestionCategoryMembersDashboardStream,g)},f=a.category||c.category;trackClient({action:"impression"},{query:f,context:"interests"});var g=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;g?e(g[f]):twttr.API.SuggestionCategory.getAll(this.localizeQuery({success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[f];e(b)}},c))},switchToStream:function(a){return this._lastStream&&(this._lastStream.unbind(".WelcomeLearnFlow"),this._lastStream=null),a?this._lastStream=this.streamManager.switchTo.apply(this.streamManager,arguments):(this.streamManager.switchOut(),this.streamManager.setCurrent(null),this.streamManager.$moreButton&&this.streamManager.$moreButton.hide()),this._lastStream},search:function(a,b){var c=a.query||b.q;if(!c)return twttr.router.routeTo(this._steps[this._currentSearchStepId].route);this._renderStep(this._currentSearchStepId);var d=this.$find(".js-back-to-stream");d.find("h3").html(_("Results for: <strong>{{query}}</strong>",{query:""})).find("strong").text(c),d.show(),this.$find('.js-welcome-search input[type="text"]').focus();var e=this._createScribbler({section:"search",component:"full_stream"},{context:"search",query:c});e.scribe({action:"impression"});var f={query:c,scribbler:e,pathRoot:this.PATH_ROOT};this.switchToStream(twttr.streams.DashboardPeopleSearch,f)},searchTop:function(a,b){var c=a.query||b.q;if(!c)return twttr.router.routeTo(this._steps[this._currentSearchStepId].route);this._renderStep(this._currentSearchStepId);var d=this.$find(".js-back-to-stream");d.find("h3").html(_("Top results for: <strong>{{query}}</strong>",{query:""})).find("strong").text(c),this.$find('.js-welcome-search input[type="text"]').focus();var e=this._createScribbler({section:"search",component:"top_stream"},{context:"search",query:c});e.scribe({action:"impression"});var f={query:c,scribbler:e,pathRoot:this.PATH_ROOT},g=this,i=this.switchToStream(twttr.streams.DashboardTopPeopleSearch,f);i.bind("results.WelcomeLearnFlow",function(a,b){b.isEmpty()?g.routePageTo(g.PATH_ROOT,"Search",{query:c}):d.show()})},profile:function(a,b){var c=this;trackClient({action:"impression"});var d=twttr.currentUser.profileImageUrl;d.indexOf("default_profile_image")!=-1&&(d=twttr.assets.path("t1/img/upload_placeholder.png"));var e={description:twttr.currentUser.description,location:twttr.currentUser.location,url:twttr.currentUser.url,profile_image_url:d,api_url:"//"+twttr.domains.remote,post_authenticity_token:twttr.API.getConfig().postAuthenticityToken};this._renderStep("profile"),this.switchToStream(null),(new twttr.views.WelcomeLearnProfile(e)).render(this.$find(".js-content-container"),"html");var f=this.$find(".js-profile-image-input"),g=this.$find(".js-profile-form"),i=this.$find(".js-bio-count");f.bind("change",function(){c._uploadProfileImage()}),twttr.helpers.addFormEvents(g,$.noop),g.find("input, textarea").bind("change keypress",function(){c._removeNextDisableReason("error_"+$(this).attr("name")),c._updateProfileProgress()}),this._updateProfileProgress();var j=function(){var a=$(this);window.setTimeout(function(){var b=a.is(".js-placeholded")?0:a.val().length;i.text(""+b),i.removeClass("warn superwarn"),b>150?i.addClass("superwarn"):b>140&&i.addClass("warn"),b>160?c._addNextDisableReason("bio"):c._removeNextDisableReason("bio")},0)};g.find("textarea").bind("keyup change",j).each(j)},_enableProfileImageUploadControls:function(){var a=this.$find(".js-current-profile-picture-wrapper"),b=this.$find(".js-upload-form");a.removeClass("loading"),b.find(".btn").removeClass("disabled"),b.find('input[type="file"]').attr("disabled",null)},_showImageError:function(a){this.$find(".js-image-error .js-image-error-text").text(a).parent().fadeIn()},_hideImageError:function(a){this.$find(".js-image-error").fadeOut()},_uploadProfileImage:function(){this._hideImageError(),this.$find(".js-current-profile-picture-wrapper").addClass("loading");if(twttr.turkey.hasFileReader()){var a=this.$find(".js-profile-image-input").get(0);if(a.files&&a.files[0]){var b=a.files[0];if(!twttr.turkey.validatePhoto(a.value)){this._showImageError(_("Profile pictures must be JPG, GIF or PNG")),this._enableProfileImageUploadControls(),trackClient({section:"profile",component:"picture",action:"error"}),trackClient({section:"profile",component:"picture",action:"error_format"});return}if(!twttr.is.def(b.size)||b.size>=this.PROFILE_SIZE_LIMIT){this._showImageError(_("Profile pictures must be smaller than 700K")),this._enableProfileImageUploadControls(),trackClient({section:"profile",component:"picture",action:"error"}),trackClient({section:"profile",component:"picture",action:"error_size"});return}}}this._submitProfileImageForm()},_submitProfileImageForm:function(){var a=this,b=this.$find(".js-upload-form");twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=function(b){twttr.components.pages.WelcomeLearnFlow.profileImageUploadCallback=$.noop,b.error?(trackClient({section:"profile",component:"picture",action:"error"}),a._showImageError(b.error),a._enableProfileImageUploadControls()):(trackClient({section:"profile",component:"picture",action:"success"}),a._uploadProfileImageCallback())},b[0].submit(),b.find(".btn").addClass("disabled"),b.find('input[type="file"]').attr("disabled","disabled")},_uploadProfileImageCallback:function(){var a=this,b=/profile_images\/.*/,c=twttr.currentUser.profileImageUrl.match(b)[0],d=0,e=function(){a._enableProfileImageUploadControls(),window.clearInterval(a._profileImageInterval),a._profileImageInterval=null};a._profileImageInterval=window.setInterval(function(){if(d++>20){e();return}twttr.currentUser.profileImage(twttr.currentUser.screenName,{size:"normal",zx:Math.random(),ssl:!0,success:function(d){var f=d.profile_image_url,g=f.match(b)[0];g!=c&&(a._updateProfileImageUrl(f),e())},error:function(){e()}})},5e3)},_updateProfileImageUrl:function(a){twttr.currentUser.profileImageUrl=a,twttr.currentUser.profileImageUrlHttps=a,twttr.currentUser.attributes.profile_image_url=a,twttr.currentUser.attributes.profile_image_url_https=a,$(".js-mini-current-user img").each(function(){$(this).attr("src",a)});var b=twttr.helpers.transformProfileImageUrl(a,"reasonably_small");this.$find(".js-current-profile-picture-wrapper").find("img").attr("src",b),this._updateProfileProgress()},_handleProfileNext:function(a){var b=this,c=this.$find('.js-profile-form input[type="text"], .js-profile-form textarea'),d=this.$find(".js-profile-form .control-group"),e={success:function(){c.each(function(){var a=$(this);a.val()&&a.val().length>1&&trackClient({section:"profile",component:a.attr("name"),action:"complete"})}),a()},error:function(a){var c=twttr.showError(_('Sorry, we weren’t able to update your profile. Try again or <a class="js-skip-link" href="#">skip this step</a>.'));c.$dom.find(".js-skip-link").click(function(){b.$find(".js-skip-link").click()})}};if(c.length==0){a();return}c.each(function(){var a=$(this);a.is(".js-placeholded")||(e[a.attr("name")]=a.val())}),d.removeClass("error").find(".js-error-msg").remove(),twttr.currentUser.update(e)},_nextRoute:function(a){var b=this._steps[a.next_step].route;return this._resurrect&&(b="/?resurrect=1"+b.slice(1)),b},_updateProfileProgress:function(){var a=0;this.$find('.js-profile-form input[type="text"], .js-profile-form textarea').each(function(){var b=$(this);b.val()&&!b.is(".js-placeholded")&&a++}),this.$find(".js-current-profile-picture").attr("src").indexOf("upload_placeholder.png")==-1&&a++,a>0&&this._removeNextDisableReason("progress"),this._setProgress(a)},_addNextDisableReason:function(a){this._nextDisableReasons[a]||(this._nextDisableReasons[a]=!0,this._nextDisableReasons._reasonCount++),this._setNextButton(!1)},_removeNextDisableReason:function(a){this._nextDisableReasons[a]&&(delete this._nextDisableReasons[a],this._nextDisableReasons._reasonCount--,this._setNextButton(this._nextDisableReasons._reasonCount==0))},_setProgress:function(a){var b=this._steps[this._currentStepId];this.$find(".js-progressbar").progressbar({value:1+Math.floor(100*a/b.suggested_progress)})},_updateProgress:function(a){var b=this._steps[this._currentStepId];b._currentProg||(b._currentProg=0),b._currentProg+=a,b._currentProg<0&&(b._currentProg=0),this._setProgress(b._currentProg),b._currentProg>=b.min_progress&&this._removeNextDisableReason("progress"),b._currentProg>=b.suggested_progress?this.$find(".js-progress-label").html(_("Great!")):b._currentProg==0?this.$find(".js-progress-label").html(b.initial_progress_copy):b.progress_copy_function?this.$find(".js-progress-label").html(b.progress_copy_function(b.suggested_progress-b._currentProg)):this.$find(".js-progress-label").html(_("Follow {{count}} more!",{count:b.suggested_progress-b._currentProg}))},_setNextButton:function(a){a?(this.$find(".js-next-btn").toggleClass("disabled",!1).fadeIn().toggleClass("selected",!0),this.$find(".js-progressbar").closest("td").width("99%")):(this.$find(".js-next-btn").toggleClass("disabled",!0).hide().toggleClass("selected",!1),this.$find(".js-progressbar").closest("td").width("100%")),this.$find(".js-save-btn").toggleClass("primary-btn",a)},_isOnLastStep:function(){var a=this._steps[this._currentStepId];return a&&a.next_step=="finish"},finish:function(){this.clearWelcomeSkipCookie(),trackClient({section:"finished",action:"impression"}),this._slideDrawer(!1,function(){twttr.router.routeTo(twttr.router.homePath())})},_scribeStepCompletion:function(a){var b=this.constructor.ROUTES_TO_STEP[this._currentStepId];trackClient({section:b,action:"complete"}),trackClient({section:b,component:"progress",action:a})},_renderStep:function(a){this._rendered||this.render(),this._setTheme();var b=this._steps[a];this.$find(".js-content-container").empty(),this._customRenderStep(a),this.$find(".js-welcome-search").toggle(b.show_search),this.$find(".js-back-to-stream").hide(),this._currentStepId=a,a!="search"&&(this._currentSearchStepId=this._currentStepId);var c;a=="matches"||a=="import"?c=_("Find people by name..."):c=_("Search for..."),this.$find(".js-who-to-follow-search input").attr("placeholder",c),this._slideDrawer(!b.no_drawer),this.$find(".js-welcome-intro").hide(),this.$find(".js-welcome-dashboard-footer").show();var d=b.next_step=="finish",e={last_step:d,button_text:this._getNextButtonText(d),continue_route:d?twttr.router.homePath():this._nextRoute(b),show_progress:b.show_progress,next_enabled:b.next_enabled,stream_arrow:!b.no_drawer};twttr.merge(e,b),(new twttr.views.WelcomeLearnHeader(e)).render(this.$find(".js-flow-step"),"html");var f=this.$find(".js-next-btn"),g=this.$find(".js-skip-link");f.attr("href",e.continue_route),g.attr("href",e.continue_route).toggle(!b.next_enabled),a=="intro"?this.$find(".js-intro-tweet").show():this.$find(".js-intro-tweet").hide(),this._nextDisableReasons={_reasonCount:0},b.next_enabled||(this._addNextDisableReason("progress"),this._updateProgress(0)),b.skip_disabled&&this.$find(".js-welcome-dashboard-footer").hide(),this._resizeFlow();var i=this.$find(".example-tweet-info");b.show_intro_text?i.show():i.hide()},_createScribbler:function(a,b){twttr.is.string(a)&&(a={component:a});var c=function(b){var c=twttr.Scribbler.clientAppDefaultTerms();return b=twttr.merge({},b,a),twttr.Scribbler.clientAppEventNameGenerator(b,c)};return twttr.Scribbler.clientEvent.spawn(b,c)},localizeQuery:function(a,b){return b.lang&&(a.lang=b.lang),b.country&&(a.country=b.country),b.city&&(a.city=b.city),a.top_tweets=!0,a}}),a()})}),provide("components/pages/Welcome",function(a){using("boot/bootstrap_data").as(function(b){var c=twttr.components.pages.WelcomeLearnFlow,d=twttr.Router.getCurrentQueryStringParams();if(d.welcomePage&&d.welcomePage.match(/^Welcome/)&&twttr.components.pages[d.welcomePage])c=twttr.components.pages[d.welcomePage];else if(!twttr.isT1){var e=[];for(var f=0;f<e.length;++f){var g=e[f][0],i=e[f][1],j=twttr.abdecider.choose(g,!0);if(j){j!="control"&&(c=i);break}}}twttr.components.pages.Welcome=c,a(twttr.components.pages.Welcome)})}),provide("components/pages/AbstractMediaGallery",function(a){using("_","util","constants").as(function(b,_){twttr.klass("twttr.components.pages.AbstractMediaGallery").subclassOf(twttr.components.Page).addAfterRender(function(){}).view(twttr.views.MediaGalleryPage).addOnSwitchAway(function(){$("#page-container").show(),$(twttr.isT1?".js-topbar":"#top-stuff").show(),$("body").removeClass("has-media-gallery"),this.$gallery.remove(),this.$gallery=null,this.$content=null,this._query=null,this._viewMode=null}).addOnSwitchTo(function(){$("#page-container").hide(),$(twttr.isT1?".js-topbar":"#top-stuff").hide(),this.$gallery=(new twttr.views.MediaGalleryPage).$html().appendTo("#doc"),this.$content=this.$gallery.find(".media-gallery-content"),$("body").addClass("has-media-gallery")}).keydown({left:function(){this._grid&&this._grid.showPrev&&this._grid.showPrev()},right:function(){this._grid&&this._grid.showNext&&this._grid.showNext()},esc:function(){this.closeGalleryAction()}}).methods({showSlideshowLoading:function(){this.addClass("loading loadingTweet loadingMedia")},showLoading:function(){this.addClass("loading")},hideTweetLoading:function(){this.removeClass("loading loadingTweet")},hideMediaLoading:function(){this.removeClass("loading loadingMedia")},hideLoading:function(){this.removeClass("loading loadingTweet loadingMedia")},addClass:function(a){this.$content&&this.$content.addClass(a)},removeClass:function(a){this.$content&&this.$content.removeClass(a)},grid:function(a,b){if(twttr.decider.isAvailable("disable_gallery_grid")){this.slideshow(a,b);return}this.setup(a,b),this._viewMode="grid";if(this.deciderKey&&!twttr.decider.isAvailable(this.deciderKey)){this.trigger("notFound");return}this.buildGrid(a,b),this.scribbler.scribe({component:this._mode,action:"impression"})},buildGrid:function(){throw new Exception("buildGrid is an abstract method that must be implemented in your subclass.")},completeGridRender:function(a){a.generateItemHref=twttr.bind(this,this.generateItemHref),a.provider=this._provider,a.scribbler=this.scribbler,this._renderControls("grid"),this._grid&&(this._grid.$node.remove(),this._grid=null),this.showLoading(),this.$content.addClass("grid"),this._grid=new twttr.components.TheGrid(a,this.$content.width()),this._grid.$node.appendTo(this.$content),this._mode=="videos"&&this._grid.$node.addClass("grid-videos"),this._grid.bind("showLoading",twttr.bind(this,this.showLoading)),this._grid.bind("hideLoading",twttr.bind(this,this.hideLoading)),b.util.lazyBind(window,"resize",twttr.bind(this,this.resizeGrid))},slideshow:function(a,b){if(this.alreadySlideshow(a))return;this.setup(a,b),this._viewMode="slideshow",this._displayMode="slideshow";if(this.deciderKey&&!twttr.decider.isAvailable(this.deciderKey)){this.trigger("notFound");return}this._renderControls("detail");var c={width:this.$content.width(),height:$(window).height()-300,thumbContainerWidth:880,url:b.url||null,mode:this._mode};this._grid&&(this._grid.$node.remove(),this._grid=null),this.buildSlideshow(a,b,c),this.$content.removeClass("grid"),this.scribbler.scribe({component:this._mode,action:"impression"})},buildSlideshow:$.noop,completeSlideshowRender:function(a){a.generateItemHref=twttr.bind(this,this.generateItemHref),a.provider=this._provider,a.scribbler=this.scribbler,this._grid=new twttr.components.MediaSlideshow(a),this._grid.$node.appendTo(this.$content),this._grid.bind("showSlideshowLoading",twttr.bind(this,this.showSlideshowLoading)),this._grid.bind("hideTweetLoading",twttr.bind(this,this.hideTweetLoading)),this._grid.bind("hideMediaLoading",twttr.bind(this,this.hideMediaLoading)),this.showLoading(),b.util.lazyBind(window,"resize",twttr.bind(this,this.resizeSlideshow)),this._grid.bind("mediaRendered",twttr.bind(this,this.resizeSlideshow))},resizeGrid:function(){if(this._viewMode=="slideshow"||!this.$content)return;var a=this.$content.width();this._grid.setCols(a)},resizeSlideshow:function(){var a=this;if(this._viewMode!="slideshow"||!this.$content)return;var c=this._mode=="photos"?b.constants.slideshow.photoMinHeight:b.constants.slideshow.videoMinHeight,h=$(window).height()-(twttr.decider.isAvailable("disable_gallery_thumbs")?220:300),d=this.$content.width();h=Math.max(h,c),this._grid.resizePicture(h,d),this._grid._thumbnailViewer&&(this.resizeThumbnailViewerTimer&&clearTimeout(this.resizeThumbnailViewerTimer),this.resizeThumbnailViewerTimer=setTimeout(function(){a._grid._thumbnailViewer&&a._grid._thumbnailViewer.updateWidth()},500))},_renderControls:function(a){this._controls&&(this._controls.$node.remove(),this._controls=null);var b=$.extend(this.getControlsOptions(),{view:a});this._controls=new twttr.components.MediaGalleryControls(b),this._controls.$node.appendTo(this.$content),this._controls.bind("close",twttr.bind(this,this.closeGalleryAction)),this._controls.bind("detailViewSelected",twttr.bind(this,this.detailViewSelected)),this._controls.bind("gridViewSelected",twttr.bind(this,this.gridViewSelected)),$("div.tipsy").remove(),this._controls.$node.find(".detailview, .gridview").tipsy({gravity:"s",fade:!0})},closeGalleryAction:$.noop,detailViewSelected:$.noop,gridViewSelected:$.noop}),a(twttr.components.pages.AbstractMediaGallery)})}),provide("components/pages/UserMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.UserMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a){this.type="userMedia",this.screenName=a.screen_name,this.deciderKey="phoenix_user_media_gallery",this._mode="photos",this._provider=new twttr.media.provider.UserMedia({screenName:this.screenName}),this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:function(){return twttr.profileUser&&twttr.profileUser.id},event_info:this._mode}),this.filter=function(a){return!a||!a.mediaType?!1:a.mediaType.icon()===twttr.constants.media.photoIcon}},getControlsOptions:function(){return{type:this.type,screenName:this.screenName,profilePath:twttr.router.profilePath({screen_name:this.screenName}),mode:this._mode}},generateItemHref:function(a){return twttr.router.userMediaSlideshowPath({screen_name:this.screenName})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this.updatePageTitle(_("Twitter / Recent images by @{{screen_name}}",{screen_name:this.screenName})),this.completeGridRender({type:this.type,screenName:this.screenName,generateItemHref:twttr.bind(this,this.generateItemHref),filter:this.filter}),this.updateBackButton();var c=this;this._grid.$node.delegate("a","click",function(){c.scribbler.scribe({component:c._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){this.updatePageTitle(_("Twitter / Recent images by @{{screen_name}}",{screen_name:this.screenName})),c.type=this.type,c.screenName=this.screenName,c.filter=this.filter,this.completeSlideshowRender(c),this.updateBackButton()},alreadySlideshow:function(a){return this.$content&&a.screen_name===this.screenName&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.userMediaSlideshowPath({screen_name:this.screenName})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.userMediaGridPath({screen_name:this.screenName})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(this.pathBack),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})},updateBackButton:function(){var a=twttr.audit.trail(),b=null;this.pathBack=twttr.router.profilePath({screen_name:this.screenName});if(a.length>1)for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e.page!=="userMediaGallery"){b=e.page,this.pathBack=e.path;break}var f=e.path.split("/")[2];if(f!==this.screenName){b="profile";break}}var g=this._controls.$find(".media-gallery-back-nav span"),i="";switch(b){case"home":i=_("Back to Home");break;case"permalink":i=_("Back to Tweet page");break;case"profile":twttr.helpers.isCurrentUser(this.screenName)?i=_("Back to your profile",{screen_name:this.screenName}):i=_("Back to @{{screen_name}}'s profile",{screen_name:this.screenName});break;case"list":var j=this.pathBack.split("/");i=_("Back to @{{screen_name}}'s list '{{list_name}}'",{screen_name:j[2],list_name:j[3]});break;case"search":i=_("Back to search results");break;default:i=_("@{{screen_name}}'s profile",{screen_name:this.screenName})}g.text(i)}}),a(twttr.components.pages.UserMediaGallery)})}),provide("components/pages/FacetsMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.FacetsMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a,b){var c=this;this.type="search",this.deciderKey="phoenix_facets",this._mode=a.mode,this._query=a.query||b.q,this._provider=new twttr.media.provider.Search,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:this._query,event_info:this._mode})},getControlsOptions:function(){return{type:this.type,mode:this._mode,query:this._query}},slideshow:function(){twttr.components.pages.AbstractMediaGallery.prototype.slideshow.apply(this,arguments)},generateItemHref:function(a){return twttr.router.searchFacetsSlideshowPath({query:this._query,mode:this._mode})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this._mode!="videos"&&this._mode!="photos"&&twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:this._query,mode:"photos"})),this.updatePageTitle(_("Twitter / Gallery - {{{query}}}",{query:this._query}));var c={query:this._query,mode:this._mode,type:this.type};this._mode=="videos"&&(c.imageWidth=200,c.imageHeight=150,c.margin=10),this.completeGridRender(c);var d=this;this._grid.$node.delegate("a","click",function(){d.scribbler.scribe({component:d._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){var d=b.url||null;if(this._query&&this._mode!="videos"&&this._mode!="photos"){var e=twttr.router.searchFacetsSlideshowPath({query:this._query,mode:"photos"});d&&(e=e+"?url="+encodeURIComponent(d)),twttr.router.routeTo(e);return}this._mode=="videos"&&twttr.merge(c,{thumbHeight:48,thumbWidth:64,thumbDisplayWidth:66,thumbDisplayHeight:48}),this.updatePageTitle(_("Twitter / Gallery - {{{query}}}",{query:this._query})),c.type=this.type,c.query=this._query,this.completeSlideshowRender(c)},alreadySlideshow:function(a){return this.$content&&a.query===this._query&&a.mode===this._mode&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.searchFacetsSlideshowPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.searchFacetsGridPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(twttr.router.searchResultsPath({query:this._query})),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})}}),a(twttr.components.pages.FacetsMediaGallery)})}),provide("components/pages/EventsMediaGallery",function(a){using().as(function(b){twttr.klass("twttr.components.pages.EventsMediaGallery").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({setup:function(a,b){var c=this;this.type="search",this._mode="photos",this._query=a.query||b.q,this._eventId=this._query,twttr.griffin.isEvent(this._eventId)||twttr.router.routeTo(twttr.router.homePath()),this._provider=new twttr.media.provider.Search,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent.spawn({query:this._query,event_info:"events"})},getControlsOptions:function(){return{type:this.type,mode:this._mode,query:this._query,eventId:this._eventId}},slideshow:function(){twttr.components.pages.AbstractMediaGallery.prototype.slideshow.apply(this,arguments)},generateItemHref:function(a){return twttr.router.eventsSlideshowPath({query:this._query,mode:this._mode})+"?url="+encodeURIComponent(a)},buildGrid:function(a,b){this._mode!="videos"&&this._mode!="photos"&&twttr.router.routeTo(twttr.router.eventsGridPath({query:this._query,mode:"photos"})),this.updatePageTitle(_("Twitter / Events - {{{query}}}",{query:this._query}));var c={query:this._query,mode:this._mode,type:this.type};this._mode=="videos"&&(c.imageWidth=200,c.imageHeight=150,c.margin=10),c.isEvent=!0,this.completeGridRender(c);var d=this;this._grid.$node.delegate("a","click",function(){d.scribbler.scribe({component:d._mode,action:"click"},{url:$(this).attr("data-url")})})},buildSlideshow:function(a,b,c){var d=b.url||null;if(this._query&&this._mode!="videos"&&this._mode!="photos"){var e=twttr.router.eventsSlideshowPath({query:this._query,mode:"photos"});d&&(e=e+"?url="+encodeURIComponent(d)),twttr.router.routeTo(e);return}this._mode=="videos"&&twttr.merge(c,{thumbHeight:48,thumbWidth:64,thumbDisplayWidth:66,thumbDisplayHeight:48}),this.updatePageTitle(_("Twitter / Events - {{{query}}}",{query:this._query})),c.type=this.type,c.query=this._query,c.showFirstOnFail=!0,c.isEvent=!0,this.completeSlideshowRender(c)},alreadySlideshow:function(a){return this.$content&&a.query===this._query&&a.mode===this._mode&&this._viewMode==="slideshow"},detailViewSelected:function(){twttr.router.routeTo(twttr.router.eventsSlideshowPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},gridViewSelected:function(){twttr.router.routeTo(twttr.router.eventsGridPath({query:this._query,mode:this._mode})),this.scribbler.scribe({component:"toggle_"+this._mode+"_view",action:"click"})},closeGalleryAction:function(){twttr.router.routeTo(twttr.router[this._query+"StaticPath"]()),this.scribbler.scribe({component:this._mode+"_back_link",action:"click"})}}),a(twttr.components.pages.EventsMediaGallery)})}),provide("components/pages/BigPhotoPermalink",function(a){using().as(function(b){var c=twttr.components.pages.AbstractMediaGallery.prototype;twttr.klass("twttr.components.pages.BigPhotoPermalink").subclassOf(twttr.components.pages.AbstractMediaGallery).methods({permalink:function(a){var b=this;this.$content.empty(),this.index=a.photo_index,twttr.API.Status.find(a.id,{success:twttr.bind(this,this.renderTweet),error:function(){b.trigger("notFound")}})},renderTweet:function(a){this.updatePageTitle(_("Twitter"));if(!a.entities||!a.entities.media||!a.entities.media[this.index-1]){this.trigger("notFound");return}this.$content.addClass("big-photo-permalink media-slideshow-tweet"),(new twttr.views.SlideshowTweet(a)).render(this.$content,"append");var b=a.entities.media[this.index-1];this.dimensions=b.sizes.large;var c=twttr.isSSL()?b.media_url_https:b.media_url;c+=":large",this.loadImage(c)},loadImage:function(a){this.$image=$("<img/>",{"class":"large",src:a,height:this.dimensions.h,width:this.dimensions.w}).appendTo(this.$content),this.refit(),twttr.util.lazyBind(window,"resize",twttr.bind(this,this.refit),200)},refit:function(){var a=twttr.$win.width(),h=twttr.$win.height()-this.$content.find(".tweet").height()-40;this.$image.css({top:Math.max(0,Math.round((h-this.dimensions.h)/2)),left:Math.max(0,Math.round((a-this.dimensions.w)/2))})}}),a()})}),provide("components/pages/Discover",function(a){using(twttr.isT1?"mixins/t1/emptyTimelineRecommendations":"mixins/emptyTimelineRecommendations","components/t1/dashboard/DiscoverNav","components/UserRecommendations","components/Trends","components/Footer","streams/Discover","streams/SuggestionCategoriesStream","mixins/streamablePage","mixins/discoveryHelper").as(function(b,c){var d=twttr.klass("twttr.components.pages.Discover").subclassOf(twttr.components.Page).mixin(b.mixins.streamablePage,b.mixins.discoveryHelper,c).view(twttr.views.Page).methods({setupPage:function(a,b){b=b||{},this.updatePageTitle(a),twttr.themes.loadCurrentUserStyle(),b.sideNavRoute?this.selectSideNav(b.sideNavRoute):this.selectCurrentSideNav()},discover:function(a,c){this.setupPage(_("Twitter / Discover")),this.streamManager.switchTo(b.streams.Discover,{})},networkActivity:function(a,b){this.setupPage(_("Twitter / Activity")),this.streamManager.switchTo(twttr.streams.ActivityByNetworkStream,{}),this.insertEmptyTimeline()},suggestions:function(a,b){this.setupPage(_("Twitter / Who to follow / Suggestions"),{sideNavRoute:"whoToFollowSuggestions"}),this.streamManager.switchTo(twttr.streams.UserRecommendationsStream,{})},suggestions_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowSuggestions");this.setupPage(_("Twitter / Who to follow / Search"),{sideNavRoute:"whoToFollowSuggestions"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"UserRecommendationsStream",backLinkOptions:{route:twttr.router.whoToFollowSuggestionsPath(),name:_("View suggestions")},query:c})},find_friends:function(a,b){this.setupPage(_("Twitter / Find Friends"));var c=twttr.Scribbler.clientEvent.spawn({context:"import"}),d=this.localizeQuery({scribbler:c,pathRoot:"whoToFollow"},b),e=this.streamManager.switchTo(twttr.streams.ContactImportServices,d);e&&e.setStreamManager(this.streamManager)},matches:function(a,b){this.setupPage(_("Twitter / Find Friends / Results"),{sideNavRoute:"whoToFollowImport"});var c=twttr.Scribbler.clientEvent.spawn({context:"import"});this.streamManager.switchTo(twttr.streams.ContactImportMatches,{scribbler:c,pathRoot:"whoToFollow"})},find_friends_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowImport");this.setupPage(_("Twitter / Find Friends / Search"),{sideNavRoute:"whoToFollowImport"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"ContactImportServices",backLinkOptions:{route:twttr.router.whoToFollowImportPath(),name:_("View services")},query:c})},interests:function(a,b){this.setupPage(_("Twitter / Categories"));var c=twttr.Scribbler.clientEvent.spawn({context:"interests"}),d={scribbler:c,pathRoot:"whoToFollow"};d=this.localizeQuery(d,b),this.streamManager.switchTo(twttr.streams.SuggestionCategoriesStream,d)},interests_search:function(a,b){var c=a.query||b.q;if(!c)return this.routePageTo("whoToFollowInterests");this.setupPage(_("Twitter / Categories / Search"),{sideNavRoute:"whoToFollowInterests"}),this.streamManager.switchTo(twttr.streams.HeadlessPeopleSearch,{headerStreamClass:"SuggestionCategoriesStream",backLinkOptions:{route:twttr.router.whoToFollowInterestsPath(),name:_("View categories")},query:c})},government_by_zip:function(a,b){this.setupPage(_("Twitter / Government Search"),{sideNavRoute:"whoToFollowInterests"}),this.streamManager.switchTo(twttr.streams.GovernmentSearchStream,{zipCode:a.zipCode})},category:function(a,b){var c=this,d=function(a){if(!a)return c.routePageTo("whoToFollow","Interests");var d=twttr.Scribbler.clientEvent.spawn({context:"interests",query:a.slug});c.setupPage(_("Twitter / Categories / {{category}}",{category:a.name}),{sideNavRoute:"whoToFollowInterests"});var f={category:e,suggestionCategory:a,scribbler:d,pathRoot:"whoToFollow"};f=c.localizeQuery(f,b),c.streamManager.switchTo(twttr.streams.SuggestionCategoryMembersStream,f)},e=a.category||b.category;this._category=e;var f=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP;if(f)d(f[e]);else{var g={success:function(a){a=twttr.streams.SuggestionCategoriesStream.filterTopTweetsCategories(a),twttr.streams.SuggestionCategoriesStream.cacheCategories(a);var b=twttr.streams.SuggestionCategoriesStream.CATEGORY_MAP[e];d(b)}};g=this.localizeQuery(g,b),twttr.API.SuggestionCategory.getAll(g)}},renderDashboard:function(){this.trendsComponent=new b.components.Trends,this.addDashboardComponents([new b.components.t1.dashboard.DiscoverNav,new twttr.components.JapaneseAd,this.trendsComponent,new b.components.Footer])},addImpressionData:function(a){var b=twttr.audit.currentAction();switch(b){case"find_friends":case"matches":a.context="import";break;case"interests":a.context="interests";break;case"category":a.context="interests",a.query=this._category}}}).addAfterRender(function(){this.renderDashboard()}).addOnSwitchTo(function(){this.trendsComponent&&this.trendsComponent.startUpdatePolling()}).addOnSwitchAway(function(){this.trendsComponent&&this.trendsComponent.stopUpdatePolling()});a(d)})}),provide("components/pages/Connect",function(a){using("_","components/t1/dashboard/MiniHomeProfile","components/t1/dashboard/ConnectNav","components/Trends","components/UserRecommendations","components/Footer","mixins/streamablePage","multiGlobals/more_views").as(function(b){var c=twttr.klass("twttr.components.pages.Connect",function(){twttr.components.Page.apply(this,arguments)}).subclassOf(twttr.components.Page).mixin(b.mixins.streamablePage).view(twttr.views.Page).methods({connect:function(a,b){this.updatePageTitle(_("Twitter / Interactions")),twttr.themes.loadCurrentUserStyle(),this.selectCurrentSideNav(),this.streamManager.switchTo(twttr.streams.ActivityOfMeStream,{})},mentions:function(a,b){this.updatePageTitle(_("Twitter / Mentions")),this.selectSideNav("mentions"),twttr.themes.loadCurrentUserStyle(),this.streamManager.switchTo(twttr.streams.Mentions,{})},renderDashboard:function(){this.addDashboardComponents([new b.components.t1.dashboard.ConnectNav,new twttr.components.JapaneseAd,new twttr.components.UserRecommendations({screenName:null,showLinks:!0}),new b.components.Footer])}}).addAfterRender(function(){this.renderDashboard()});a(c)})}),provide("widget/Banner",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.widget.Banner",function(a){this.$node=$("<div/>"),this.view=new twttr.views[a.view](a),this.$node.delegate(".pane-close","click",twttr.bind(this,this.remove)),this.$node.attr("data-component-term",b.util.underscore(a.view)),this.newBanner=a.newBanner}).methods(twttr.EventProvider).methods({insert:function(){this.view.render(this.$node),$(this.newBanner?".new-js-banners":".js-banners").append(this.$node),twttr.app.recalculatePadding()},remove:function(){this.$node.remove(),twttr.app.recalculatePadding(),this.trigger("closed")}}),twttr.provide("twttr.banners",twttr.augmentObject({pending_new:0,pending_changed:1,pending_bouncing:2,stacked:3,nonStacked:4,display:function(){twttr.currentUser&&twttr.profileUser&&twttr.currentUser!=twttr.profileUser&&twttr.currentUser.isAdmin&&twttr.profileUser.suspended&&this.viewing_suspended_user().insert();if(twttr.currentUser&&twttr.currentUser.states){var a=[],b=!1,c=twttr.currentUser.states;twttr.is.falsy(c.pending_email)||(b=this.pending_new),c.bouncing_email&&(a=twttr.is.array(c.bouncing_email)?c.bouncing_email:[c.bouncing_email]),b!==!1&&twttr.currentUser.emailAddress&&(b=this.pending_changed),b!==!1&&$.inArray(c.pending_email,a)>=0&&(b=this.pending_bouncing);if(twttr.currentUser.emailAddress&&$.inArray(twttr.currentUser.emailAddress,a)>=0){var d=b!==!1?this.stacked:this.nonStacked;this.bouncingEmail(d,twttr.currentUser.emailAddress).insert()}if(b!==!1){var e=twttr.abdecider.choose("email_verification-18",!0);(!e||e=="control")&&this.verifyEmail(b,c.pending_email).insert()}c.detached_email&&this.detachedEmail().insert(),c.suspended&&this.suspended(twttr.currentUser.screenName).insert(),$.cookie("show_reactivated_"+twttr.currentUser.id)&&this.reactivated().insert()}},detachedEmail:function(){return new twttr.widget.Banner({view:"DetachedEmailBanner",newBanner:!0})},verifyEmail:function(a,b){var c=new twttr.widget.Banner({view:"VerifyEmailBanner",pending_email:b,pending_new:a==this.pending_new,pending_changed:a==this.pending_changed,pending_bouncing:a==this.pending_bouncing,newBanner:!0});return c.$node.delegate(".resend-confirmation-email-link","click",function(a){twttr.currentUser.emailResendConfirmation({success:function(a){twttr.showMessage(a.messageForFlash)},error:function(a){twttr.showError(_("Oops!  There was an error sending the confirmation email."))}})}),c},bouncingEmail:function(a,b){var c=new twttr.widget.Banner({view:"BouncingEmailBanner",current_email:b,stacked:a==this.stacked,newBanner:!0});return c.$node.delegate(".reset-bounce-link","click",function(a){twttr.currentUser.emailBounceReset(function(a){twttr.showMessage(_("Your email notifications should resume shortly.")),c.$node.fadeOut("fast",function(){c.remove()})})}),c},suspended:function(a){return new twttr.widget.Banner({view:"SuspendedBanner",screen_name:a,newBanner:!0})},reactivated:function(){var a=new twttr.widget.Banner({view:"ReactivatedBanner"});return a.bind("closed",function(){$.cookie("show_reactivated_"+twttr.currentUser.id,null)}),a.$node.delegate("a.reactivate-settings-link","click",function(b){b.preventDefault(),a.trigger("closed"),window.location.href=b.target}),a},emailAlreadyVerified:function(){var a;for(var b=0;b<twttr.currentUser.email.length;b++)twttr.currentUser.email[b].current&&(a=twttr.currentUser.email[b]);return new twttr.widget.Banner({view:"EmailAlreadyVerifiedBanner",already_verified_message:_("Someone has already confirmed the email {{email}}",{email:a.address})})},welcomeToPhoenix:function(){return new twttr.widget.Banner({view:"WelcomeToPhoenixBanner",welcome_search_results_path:twttr.router.searchResultsPath({query:"#NewTwitter"})})},becameUser:function(){return new twttr.widget.Banner({view:"BecameUserBanner"})}},twttr.EventProvider)),twttr.app.waitForSignal("init",function(){twttr.banners.display()}),a(twttr.widget.Banner)})}),provide("components/Promo",function(a){using().as(function(b){twttr.klass("twttr.components.Promo").subclassOf(twttr.components.Base).initializer(function(){twttr.API.Promo.random({promo_type:"",limit:1},twttr.bind(this,function(a){$.isEmptyObject(a)||((new twttr.views.DashboardPromo({promo:a[0]})).render(this.$node,"append"),this.hasRendered())}))}).click({".promo .definition":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"promo",target:"definition",definition:b.find("strong").html()};scribble("dashboard_click",c)}}).deciderKey("promo_component"),a(twttr.components.Promo)})}),provide("components/Promptbird",function(a){using("_","multiGlobals/more_views","mixins/inviteFriends","mixins/userActionable","constants").as(function(b,_){twttr.klass("twttr.components.Promptbird").subclassOf(twttr.components.Base).initializer(function(a){if(!twttr.views[this.constructor._name]){var b=new Error('Promptbird view "'+this.constructor._name+'" is undefined');twttr.isLocalhost&&console.log(b,b.stack||"error.stack is unavailable :(");return}var c={action:"impression",section:"promptbird_"+a.prompt.prompt_id};trackClient(c),this.prompt=a,this.$node.addClass("promptbird");var d="promptbird-"+a.prompt.format.replace(/_/g,"-");this.$node.addClass(d),a.data.promptId=a.prompt.prompt_id;var e=(new twttr.views[this.constructor._name](a.data)).html();this.$node[0].innerHTML=e,"below_black_bar"===a.prompt.format&&(this.noSpacer=!0),this.hasRendered()}).click({".js-dismiss":function(a){a.stopImmediatePropagation();var b={prompt_id:this.prompt.prompt.prompt_id},c={success:function(a){}};return twttr.API.Promptbird.dismissPrompt(b,c),this.destroy(),!1},".call-to-action":function(a){var b=this,c={action:"click",section:"promptbird_"+this.prompt.prompt.prompt_id};trackClient(c);if($(a.currentTarget).data("preserve-prompt"))return;var d={prompt_id:this.prompt.prompt.prompt_id},e={success:function(a){}};twttr.API.Promptbird.dismissPrompt(d,e),this.destroy()}}),twttr.klass("twttr.components.PromptbirdLanguage").subclassOf(twttr.components.Promptbird).initializer(function(a){this._superInitializer(a),this.$find(".call-to-action").one("click",function(){var b=a.prompt.template_name.split("_");b.shift();var c=b.join("-"),d={success:function(){window.location.reload()}};twttr.currentUser.setLanguage(c,d)})}),twttr.klass("twttr.components.PromptLanguageDe").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageEs").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageHi").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageFr").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageFil").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageId").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageIt").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageJa").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageKo").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageMsa").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageNl").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguagePt").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageRu").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageTr").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageZhCn").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptLanguageZhTw").subclassOf(twttr.components.PromptbirdLanguage),twttr.klass("twttr.components.PromptImport").subclassOf(twttr.components.Promptbird),twttr.klass("twttr.components.PromptVitDe").subclassOf(twttr.components.Promptbird).initializer(function(a){this.registerUserActionEvents(),a.data.id=16181559,this.constructor.uberclass._initializer.apply(this,arguments),this.$find(".js-action-follow").addClass("call-to-action")}).mixin(b.mixins.userActionable),twttr.klass("twttr.components.PromptOneClickImport").subclassOf(twttr.components.Promptbird).initializer(function(a){this._superInitializer(a),this.$find(".call-to-action").one("click",function(a){var b=$(this);using("externalOauthPopup").as(function(a){var c=window.location.protocol+"//"+twttr.domains.local+"/invitations/oauth_launch?email="+encodeURIComponent(b.attr("data-email"));a.externalOauthPopup({url:c,callbackUrl:twttr.router.whoToFollowImportMatchesPath()})})})}),twttr.klass("twttr.components.PromptImportInline").subclassOf(twttr.components.Promptbird).initializer(function(a){this.constructor.uberclass._initializer.apply(this,arguments);var b=new twttr.components.ContactImportLauncher,c=this;b.bind("servicesLoaded",function(){b.$find(".service-button").addClass("call-to-action").data("preserve-prompt","true"),c.$find(".import-inline").append(b.$node)}),b.trigger("addedToPage")}),twttr.klass("twttr.components.PromptProfile").subclassOf(twttr.components.Promptbird),twttr.klass("twttr.components.PromptMobile").subclassOf(twttr.components.Promptbird).initializer(function(a){var b=twttr.router.mobileGalleryPath(),c=twttr.pageLocale==="en"?"":"?lang="+twttr.pageLocale;a.data.android_path=b+"/android"+c,a.data.blackberry_path=b+"/blackberry"+c,a.data.iphone_path=b+"/iphone"+c,a.data.ipad_path=b+"/ipad"+c,a.data.wp7_path=b+"/wp7"+c,a.data.mobile_gallery_path=b+c,this.constructor.uberclass._initializer.call(this,a)}),twttr.klass("twttr.components.PromptInvite").subclassOf(twttr.components.Promptbird).mixin(twttr.mixins.inviteFriends).initializer(function(a){this.constructor.uberclass._initializer.apply(this,arguments),this.addFormEvents(),twttr.helpers.handlePopupLinks(this.$node);if(twttr.isT1)this.$find(".js-submit").data("preserve-prompt",!0);else{var b=new twttr.components.InviteFriends;b.$find(".js-submit").addClass("call-to-action").data("preserve-prompt",!0),this.$find(".invite").append(b.$node)}}),twttr.klass("twttr.components.PromptFacebookDe").subclassOf(twttr.components.Promptbird),a(twttr.components.Promptbird)}),twttr.klass("twttr.components.PromptbirdDashboardPlaceholder").subclassOf(twttr.components.Base).initializer(function(){this.$node.attr("id","js-promptbird-dashboard-narrow-hook")})}),provide("components/RelatedServices",function(a){using().as(function(b){twttr.klass("twttr.components.RelatedServices").subclassOf(twttr.components.Base).initializer(function(){var a=this;twttr.API.Promo.random({promo_type:"related_service",limit:2},function(b){$.isEmptyObject(b)||((new twttr.views.DashboardRelatedServices({promos:b})).render(a.$node,"append"),a.hasRendered())})}).deciderKey("promo_component"),a(twttr.components.RelatedServices)})}),provide("TrendLocations",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.TrendLocations",function(a){this.getLocation(a)}).statics({LOGGED_OUT_TREND_LOCATION_COOKIE:"trend_location",install:function(a){twttr.trendLocations?twttr.trendLocations.getLocation(a):twttr.trendLocations=new twttr.TrendLocations(a)}}).methods({getLocation:function(a){var b=this;twttr.API.Trend.locations({lang:twttr.pageLocale,success:function(c){b.all=c;if(twttr.currentUser)twttr.currentUser.trendLocation().first(function(c){c?b.current=c:b.current=b.worldwide(),a(b.current)});else{var d=parseInt($.cookie(b.constructor.LOGGED_OUT_TREND_LOCATION_COOKIE),10);b.current=b.locationForWoeid(d)||b.worldwide(),a(b.current)}}})},allLocations:function(){return this.all.array},ancestorsOf:function(a){if(!a.parentid)return[];var b=this.locationForWoeid(a.parentid);return[b].concat(this.ancestorsOf(b))},withAncestorsOf:function(a){return[a].concat(this.ancestorsOf(a))},currentAncestors:function(){return this.ancestorsOf(this.current)},withCurrentAncestors:function(){return this.withAncestorsOf(this.current)},withFilterAncestors:function(){return this.withAncestorsOf(this.currentFilter())},childrenOf:function(a){return twttr.filter(this.allLocations(),function(b){return b.parentid===a.woeid})},currentChildren:function(){return this.current.isPersonalized?this.childrenOf(this.currentFilter(this.worldwide())):this.childrenOf(this.currentFilter())},locationForWoeid:function(a){return a?twttr.filter(this.allLocations(),function(b){return b.woeid==a})[0]:null},locationsForWoeids:function(a){var b=this;return twttr.map(a,function(a){return b.locationForWoeid(a)})},worldwide:function(){return this.locationForWoeid(1)},currentFilter:function(a){var c=a||this.current;return c.placeType.code===b.constants.placeTypes.city||this.childrenOf(c).length===0?this._currentFilterWoeid=c.parentid:this._currentFilterWoeid=c.woeid,this.locationForWoeid(this._currentFilterWoeid)},setPersonalized:function(a){this.current=$.extend(this.current,{isPersonalized:a})},setCurrent:function(a){this.current=this.locationForWoeid(a.woeid)||this.current,this.setPersonalized(a.isPersonalized),twttr.currentUser?twttr.currentUser.setTrendLocation(a.woeid,a.isPersonalized):(twttr.API.CurrentUser.trigger("changedLocation_success"),$.cookie(this.constructor.LOGGED_OUT_TREND_LOCATION_COOKIE,a.woeid)),scribble("switch-trend-location",{woeid:a.woeid,input:"click",origin:a.origin})}}),a(twttr.TrendLocations)})}),provide("components/PeopleResults",function(a){using("constants").as(function(b){twttr.klass("twttr.components.PeopleResults").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(a){a=a.replace(/(^|\b)(from\:|to\:|near\:|source\:)/g,""),this.scribbler=twttr.Scribbler.clientEvent.spawn({query:a,context:"user_search"});if(a.indexOf(":")!=-1)return;var b={reputable:!0,display_location:"search-component",pc:!0},c=this,d=4;twttr.API.User.search(a,b).first(d,function(b){c._readyToRender?c._renderNow(b,a):c._result={users:b,query:a}})}).methods({_renderNow:function(a,c){var d=this;a.length()>0&&(a=a.map(twttr.bind(this,function(a,b){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id),a.socialContext=a.socialContext||[];var c=d.makeSocialContextHtml(a,!1);return a.clone({socialcontext:c})})),d.$node.empty(),(new twttr.views.PeopleResults({query:c})).subview("found_people",new twttr.views.UserSmallList(a)).render(d.$node,"append"),d.$find("a.view-all").click(function(a){d.scribbler.scribe({component:d._getScribeComponentName(),action:"view_all"})}),twttr.helpers.ellipsify(d.$find("div.bio")),d.registerUserActionEvents(),d.hasRendered());var e=[],f;a.each(function(a,c){e.push(a.id);if(a.promotedContent&&a.promotedContent.impression_id){var d={target_id:a.id,item_type:b.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id,item_position:c};f=f||{},f[a.id+""]=d}}),d.scribbler.scribe({component:d._getScribeComponentName(),action:"results"},{item_ids:e,item_count:e.length,item_details:f})},render:function(){var a=this._result;a?this._renderNow(a.users,a.query):this._readyToRender=!0}}).deciderKey("onebox_user_search"),a(twttr.components.PeopleResults)})}),provide("components/ProfileActions",function(a){using("_","constants","mixins/serverRenderableObject",twttr.isT1?"mixins/t1/genericComboButton":[]).as(function(b,_,c,d,f){twttr.klass("twttr.components.ProfileActions",function(a,b,c){this.profileUser=a,this.inProfilePane=!!c,this.$node=this.$domNode(function(){return $("<div />")}),twttr.components.Base.prototype.constructor.apply(this,arguments)}).subclassOf(twttr.components.Base).initializer(function(a,b){var c=this;this.similarUser=a,this.screenName=a.screenName,this.currentRecommendations=[],this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.profileUser.id}),this.whotofollowComponentName="whotofollow_dropdown",this.ignoreScribeItemPosition=!0,twttr.recentlyViewedUsers.push(a);if(twttr.loggedIn){var d=twttr.bind(this,function(b){this._data={user:a,id:a.id,screen_name:a.screenName,notifications:b.notifications,following:b.following,followed_by:b.followedBy,blocking:b.blocking,follow_request_sent:a.followRequestSent,want_retweets:b.wantRetweets,can_dm:b.canDM&&twttr.currentUser.id!=a.id,reported:!1},this._applyMuteMethods(b,a),this._renderActions(),this.registerEvents(),this.wokeUp()});b?d(b):twttr.currentUser.relationshipWith(this.profileUser,d)}else{this._data={user:a,id:a.id,screen_name:a.screenName},this._renderActions(),this._registerFollowEvents();var e=twttr.abdecider.choose("signup_with_profiles_viewed-73",!0);if(twttr.recentlyViewedUsers.size()>=2){var f=(new Date).getTime()-864e5;e=="two_profiles"&&(twttr.recentlyViewedUsers.size()==2||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-3])<f)?twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-2])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(2,function(a){a.open()})):e=="three_profiles"&&(twttr.recentlyViewedUsers.size()==3||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-4])<f)?twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-3])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(3,function(a){a.open()})):e=="four_profiles"&&(twttr.recentlyViewedUsers.size()==4||twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-5])<f)&&twttr.recentlyViewedUsers.getLastPushTime(twttr.recentlyViewedUsers.stack[twttr.recentlyViewedUsers.size()-4])>f&&(twttr.abdecider.choose("signup_with_profiles_viewed-73"),twttr.dialogs.signupModalDialogGuest(4,function(a){a.open()}))}this.wokeUp()}this.registerUserActionEvents(),this.registerUserRecommendationsActions(".user-rec-dropdown")}).mixin(twttr.mixins.userRecommendationsHelper,twttr.mixins.userActionable,d).methods({domNodeSelector:function(){var a=this.inProfilePane?"div.details-pane ":"";return a+"div.profile-actions-container[data-user-id="+this.profileUser.id+"] div.profile-actions-component"},_renderActions:function(){if(!this.preRendered||this.didInitialRenderActions)this._deregisterTipsy(),this.$node.empty(),(new twttr.views.ProfileActions(this._data)).render(this.$node,"append");this.didInitialRenderActions=!0,this.scribeComponentName=this.$node.closest("div.details-pane").length?"mini_profile_actions":"profile_actions",this.$userProfileActionController=this.$find(".user-profile-actions-button"),this.userProfileActionsDropdown=null,this._registerTipsy()},wokeUp:function(){using(">streamWokeUp",function(){signal(">wokeUp")})},_applyMuteMethods:function(a,b){var c=this;if(!twttr.decider.isAvailable("muteUsers"))return;this.$node.delegate(".mute-action","click",function(a){var d=$(this);d.hasClass("is-muted")?(d.removeClass("is-muted"),d.text(_("Mute")),$(".stream-tweet[data-user-id="+b.id+"]").parent().show(),c._removeFromMuteList(b.id)):(d.addClass("is-muted"),d.text(_("Unmute")),$(".stream-tweet[data-user-id="+b.id+"]").parent().hide(),c._addToMuteList(b))}),twttr.merge(this._data,{show_mute:function(){return a.following&&twttr.decider.isAvailable("muteUsers")},is_muted:function(){var a=twttr.caches.User.get("muted");if(!a)return!1;for(var c in a)if(b.id==c)return!0}})},_addToMuteList:function(a){var b={screenName:a.screenName,userId:a.id,profileImageUrl:twttr.helpers.transformProfileImageUrl(a.profileImageUrl,"mini")},c=twttr.caches.User.get("muted")||{};c[a.id]=b,twttr.caches.User.set("muted",c)},_removeFromMuteList:function(a){var b=twttr.caches.User.get("muted")||{};delete b[a],twttr.caches.User.set("muted",b)},renderSimilarUsers:function(){if(!twttr.decider.isAvailable("whotofollow_similarities"))return;var a=this;a.profileUser.similarUsers({limit:2,success:function(b){var c=a.recsToUsers(b);a.trackImpressions(c,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:a.profileUser.id});if(c.length()){var d=(new twttr.views.UserRecommendationsDropdown({user:a.profileUser.name})).subview("recommended_followers",new twttr.views.UserSmallList(c)).render(a.$find(".profile-actions"),"after");a.attachUserRecommendationHideEvents("whotofollow_dropdown_hide",d),twttr.helpers.ellipsify(a.$find(".profile-actions div.bio")),d.slideDown(300)}},error:function(b){a.trackImpressions(null,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:a.profileUser.id,error_status:b.status})}})},registerEvents:function(){if(this.$node.attr("did-register-events"))return;this.$node.attr("did-register-events",!0),this.$node.delegate(".js-direct-message-action","click",twttr.bind(this,function(a){a.preventDefault(),twttr.decider.isExpando()&&$(".twttr-dialog-close").click(),twttr.dialogs.dmSingle({user:{screenName:this.profileUser.screenName,user_id:this.profileUser.attributes.id,name:this.profileUser.attributes.name,profile_image_url:this.profileUser.attributes.profile_image_url},origin:"profile-actions-direct-message"}).open(),this.scribbler.scribe({component:this.scribeComponentName,action:"dm"},{item_ids:[this.profileUser.attributes.id],item_details:this._itemDetails()})})),this._registerDeviceEvents(),this._registerRetweetEvents(),this._registerFollowEvents(),this._registerUnblockEvents(),this._registerAPIListeners()},_registerTipsy:function(){this.$find(".mute-action").tipsy({gravity:"s",delayIn:150,delayOut:500,fade:!0}),this.$find(".device-notifications").tipsy({gravity:"s",html:!0,title:function(){var a=$(this).hasClass("notifying")?_("Tweets from this user are sent to your mobile phone."):_("Tweets from this user are not sent to your mobile phone.");return(new twttr.views.Tipsy({title:a})).html()}}),this.$find(".retweet-setting").tipsy({gravity:"s",html:!0,title:function(){var a=$(this).hasClass("including")?_("Retweets from this user will appear in your timeline."):_("Retweets from this user won't appear in your timeline.");return(new twttr.views.Tipsy({title:a})).html()}})},_deregisterTipsy:function(){this.$find(".device-notifications").tipsy({stopThat:!0}),this.$find(".retweet-setting").tipsy({stopThat:!0}),this.$find(".mute-action").tipsy({stopThat:!0})},_registerDeviceEvents:function(){var a,b,c,d=this;this.$node.delegate(".js-device-notifications","click",function(e){e.preventDefault();if(!twttr.currentUser.deviceSetup){!twttr.currentUser.deviceVerified&&(!twttr.currentUser.pushTweetsDecidered||!twttr.currentUser.pushDevice)?(a={title:_("Setup mobile notifications"),content:(new twttr.views.PhoneSetupPrompt({screen_name:d._data.screen_name,ok:_("Set up phone"),cancel:_("Cancel")})).html()},b=twttr.router.devicesPath()):(a={title:_("Enable mobile notifications for Tweets"),content:(new twttr.views.PhoneTweetsOffPrompt({screen_name:d._data.screen_name,ok:_("Enable Tweet notifications"),cancel:_("Close")})).html()},twttr.currentUser.pushDevice&&twttr.currentUser.pushTweetsDecidered?b=twttr.router.pushHelpPath():b=twttr.router.devicesPath()),(new twttr.widget.Prompt({modal:!0,callback:function(a){a&&(c=function(){twttr.router.routeTo(b)},twttr.API.User.bind("subscribe",c),d.profileUser.setNotificationsOn())},template:a})).open();return}var f=$(this),g=f.hasClass("notifying")?"setNotificationsOff":"setNotificationsOn";d.profileUser[g]()})},_registerRetweetEvents:function(){var a=this;this.$node.delegate(".js-retweet-setting","click",function(b){var c=$(this);b.preventDefault();var d=c.hasClass("including"),e=d?"setWantRetweetsOff":"setWantRetweetsOn";a.profileUser[e]()})},_registerFollowEvents:function(){var a=this;this.$node.delegate(".js-follow, .profile-follow-button, .follow-request-button","click",function(b){var c=a.profileUser.impressionId;twttr.loggedIn?a.profileUser.follow({before:function(){a._showTweetsFromUserOnHome()},success:function(){a.renderSimilarUsers(),trackClient({component:a.scribeComponentName,action:"follow"},{profile_id:a.profileUser.id,item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"follow"})},error:function(b){a._hideTweetsFromUserOnHome(),twttr.helpers.showErrorFromResponse(b,"follow")},impression_id:c}):twttr.dialogs.signinOrSignup({follow:a.profileUser,justSignup:!0}).open(),b.preventDefault()}),this.$node.delegate(".js-unfollow, .profile-unfollow-link, .cancel-request-link","click",function(b){if(a.$node.find(".follow-state").hasClass("just-followed")&&!!b.clientX)return;var c=a.profileUser.impressionId;a.profileUser.unfollow({before:function(){a._hideTweetsFromUserOnHome()},success:function(){trackClient({component:a.scribeComponentName,action:"unfollow"},{profile_id:a.profileUser.id,item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"unfollow"})},error:function(b){a._showTweetsFromUserOnHome(),twttr.helpers.showErrorFromResponse(b,"unfollow")},impression_id:c}),b.preventDefault()}),this.$node.delegate(".just-followed .profile-unfollow-link","mouseleave",function(b){a.$node.find(".follow-state").removeClass("just-followed")})},_registerUnblockEvents:function(){var a=this;this.$node.delegate(".js-unblock","click",function(b){a.profileUser.unblock({before:twttr.bind(a,a._showStreamForBlockedUser),success:function(){a.scribbler.scribe({component:a.scribeComponentName,action:"unblock"},{item_ids:[a.profileUser.id],item_details:a._itemDetails(),event_info:"unblock"})},error:function(b){a._hideStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(b,"unblock")}}),b.preventDefault()}),this.$node.delegate(".js-block","click",function(b){a.profileUser.block({timeout:function(a){a.retry()},before:twttr.bind(a,a._hideStreamForBlockedUser),error:function(){a._showStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(b,"block")}})})},_updateDisplay:function(a,b){var c=this,d=!b,e=!!b;switch(a){case"follow":c._data.following=d,c._data.want_retweets=d,c._data.just_followed=d;break;case"unfollow":case"cancel_request":c._data.following=e,c._data.follow_request_sent=e,c._data.just_followed=e;break;case"follow_request":c._data.follow_request_sent=d;break;case"block":b?c._data.following=!!c._data.was_following:(c._data.was_following=c._data.following,c._data.following=!1),c._data.blocking=d,c._data.reported=e;break;case"unblock":c._data.following=e,c._data.blocking=e,c._data.reported=e,c._data.followed_by=!1;break;case"report":b?c._data.following=!!c._data.was_following:(c._data.was_following=c._data.following,c._data.following=!1),c._data.blocking=d,c._data.reported=d;break;case"subscribe":c._data.notifications=d;break;case"unsubscribe":c._data.notifications=e;break;case"does_want_retweets":c._data.want_retweets=d;break;case"doesnt_want_retweets":c._data.want_retweets=e}$(["following","blocking","followRequestSent","reported","notifications","wantRetweet"]).each(function(a,b){c._data.user.sync(b,c._data[b])}),c._renderActions()},_registerAPIListeners:function(){var a=this,b={before:function(b,c){var d=c.requestParameters[0],e=d.user_id||d.user_ids;e===a._data.id&&a._updateDisplay(b.type,!1)},error:function(b,c,d){var e=d.requestParameters[0],f=e.user_id||e.user_ids;f===a._data.id&&a._updateDisplay(b.type,!0)}};twttr.API.User.bind("follow",b),twttr.API.User.bind("unfollow",b),twttr.API.User.bind("follow_request",b),twttr.API.User.bind("cancel_request",b),twttr.API.User.bind("block",b),twttr.API.User.bind("unblock",b),twttr.API.User.bind("report",b),twttr.API.User.bind("subscribe",b),twttr.API.User.bind("unsubscribe",b),twttr.API.User.bind("does_want_retweets",b),twttr.API.User.bind("doesnt_want_retweets",b)},_getHomeTimeline:function(a){var b=twttr.app.getPage("home");b&&b.send("getStreamManager",function(b){if(b){var c=b.getStream(twttr.streams.Home);c&&a(c.$node)}})},_streamItemsForUserId:function(a,b){return a.find('.stream .stream-item[data-item-type="user"][data-item-id="'+b+'"]').add('.stream .stream-tweet[data-user-id="'+b+'"]',a).add('.stream .stream-tweet[data-retweeter-id="'+b+'"]',a).closest(".stream-item")},_hideTweetsFromUserOnHome:function(){var a=this,b=this.profileUser.id,c=this._getHomeTimeline(function(c){a._streamItemsForUserId(c,b).hide()})},_showTweetsFromUserOnHome:function(){var a=this,b=this.profileUser.id;this._getHomeTimeline(function(c){a._streamItemsForUserId(c,b).show()})},_hideStreamForBlockedUser:function(){this._streamItemsForUserId($(document.body),this.profileUser.id).hide()},_showStreamForBlockedUser:function(){this._streamItemsForUserId($(document.body),this.profileUser.id).show()},_getActionsDropdown:function(a){var b=this,c=[];return c.push({label:_("Mention {{screen_name}}",this._data),icon:"mention",handlers:{click:function(){(new twttr.widget.TweetDialog({template:{title:"Mention "+b.profileUser.screenName},draggable:!0,defaultContent:"@"+b.profileUser.screenName+" ",origin:"profile-actions-dropdown-metion"})).open().focus()}}}),this._data.blocking?c.push({label:_("Unblock {{screen_name}}",this._data),icon:"block",handlers:{click:function(){b.profileUser.unblock({before:function(){$('.stream .stream-tweet[data-user-id="'+b.profileUser.id+'"]').closest(".stream-item").show()}})}}}):c.push({label:_("Block {{screen_name}}",this._data),icon:"block",handlers:{click:function(){b.profileUser.block({timeout:function(a){a.retry()},before:twttr.bind(b,b._hideStreamForBlockedUser),error:function(){b._showStreamForBlockedUser(),twttr.helpers.showErrorFromResponse(e,"block")}})}}}),this._data.blocking||c.push({label:_('Report <span class="truncate">{{screen_name}}</span> for spam',this._data),icon:"spam",handlers:{click:function(){b.profileUser.report({before:function(){$('.stream .stream-tweet[data-user-id="'+b.profileUser.id+'"]').closest(".stream-item").hide()}})}}}),new twttr.control.Dropdown(a,{items:c,direction:"right"})},_itemDetails:function(){var a={},c=this.profileUser.impressionId;return a[""+this.profileUser.id]={item_token:c,target_id:this.profileUser.id,item_type:b.constants.clientEvent.itemType[c?"promotedUser":"user"]},a}}),twttr.control.Dropdown.createCache("lists"),f&&twttr.components.ProfileActions.mixin(f),a(twttr.components.ProfileActions)})}),provide("components/RecentTweets",function(a){using().as(function(b){twttr.klass("twttr.components.RecentTweets").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet).initializer(function(a){var b=this,c=twttr.$win.height()<600?2:3;a.timeline().first(c,function(a){a.length()>0&&((new twttr.views.RecentTweets(a)).render(b.$node,"append"),b.registerTweetActionEvents(),b.updateI18nDisplay(),b.hasRendered())})}).deciderKey("recent_tweets_component"),a(twttr.components.RecentTweets)})}),provide("components/RecentlyFollowed",function(a){using().as(function(b){twttr.klass("twttr.components.RecentlyFollowed").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable,twttr.mixins.userRecommendationsHelper).initializer(function(a){function c(a,c){var d=function(a){return a.screenName==c.screenName};b._userCollection&&!b._userCollection.find(d)&&(b._userCollection.unshift(c),b.rememberHeight(),b.deferredCreateView())}function d(a,c){var d=function(a){return a.screenName!=c.screenName};b._userCollection&&(b._userCollection=b._userCollection.filter(d),b.rememberHeight(),b.deferredCreateView())}if(!twttr.currentUser)return;this.inWelcomeFlow=a,this._maxFollowersCount=10,this._maxSimilarsCount=2;var b=this;twttr.currentUser.friends({count:this._maxFollowersCount,success:function(c){b._userCollection=c,(a||!c.isEmpty())&&b.createView(),b.registerUserActionEvents(),b.registerUserRecommendationsActions()}}),this.$node.delegate(".followed li a.dynsims","click",function(a){var c=$(this);if(c.parent().hasClass("active"))return;var d=c.attr("data-user-id"),e=b._userCollection.find(function(a,b){if(a.id.toString()==d)return a});return e&&twttr.decider.isAvailable("whotofollow_similarities")&&(b.rememberHeight(),b.showSimilarUsers(e)),a.preventDefault(),a.stopPropagation(),!1}),twttr.API.User.bind("follow.RecentlyFollowedComponent",c),twttr.API.User.bind("unfollow.RecentlyFollowedComponent",d),twttr.app.bind("fakeFollow.RecentlyFollowedComponent",c),twttr.app.bind("fakeUnfollow.RecentlyFollowedComponent",d)}).destructor(function(){twttr.app.unbind(".RecentlyFollowedComponent"),twttr.API.User.unbind(".RecentlyFollowedComponent")}).methods({rememberHeight:function(){var a=this.$find(".recently-followed-users");a.css("height",a.height()+"px")},autoHeight:function(){this.$find(".recently-followed-users").css("height","")},deferredCreateView:function(){this._createViewTimeout&&(clearTimeout(this._createViewTimeout),this._createViewTimeout=null);var a=this;this._createViewTimeout=setTimeout(function(){a.createView(),a._createViewTimeout=null},1)},createView:function(){var a=this._userCollection.first();(new twttr.views.RecentlyFollowed({user:new twttr.views.BaseStats(twttr.currentUser),latest_friends:new twttr.views.UserThumbList(this._userCollection.slice(0,this._maxFollowersCount)),latest_friend:a?a.screenName:!1,welcome_flow:!!this.inWelcomeFlow,screen_name:twttr.currentUser.screenName,following_count:twttr.currentUser.friendsCount,following_10:twttr.currentUser.friendsCount>=10})).render(this.$node,"html");var b=this.$find(".followed ul");if(a&&twttr.decider.isAvailable("whotofollow_similarities")){b.find("li a").addClass("dynsims").removeClass("user-profile-link").attr("href","#");var c=this.$find(".recently-followed-users .suggestions");this.showSimilarUsers(a)}else this.autoHeight();if(this.inWelcomeFlow){var d=b.find("li").length+1;for(var e=d;e<=10;e++)b.append('<li><span class="welcome-placeholder">'+e+"</span></li>")}this.hasRendered()},showSimilarUsers:function(a){var b=this.$find(".followed ul"),c=this.$find(".suggestions").css({opacity:0});b.find("li").removeClass("active"),a.similarUsers({limit:this._maxSimilarsCount,complete:twttr.bind(this,function(){this.autoHeight()}),success:twttr.bind(this,function(d){this.similarUser=a,this.screenName=a.screenName;var e=this.recsToUsers(d).slice(0,this._maxSimilarsCount);"florian"==a.screenName&&(e=new twttr.API.util.BaseCollection),this.trackImpressions(e,"recently_followed_view_similarities",{to_user_id:a.id,tracking_context:"recently_followed",similar_to_user:a.id}),e.length()?((new twttr.views.UserDetailedList(e)).render(c.find("ul"),"html"),b.find("li a[data-user-id="+a.id+"]").parent("li").addClass("active"),c.find("p span").text(a.name),c.animate({opacity:1},200,function(){$(this).show()})):c.hide()}),error:twttr.bind(this,function(b){this.trackImpressions(null,"recently_followed_view_similarities",{to_user_id:a.id,tracking_context:"recently_followed",similar_to_user:a.id,error_status:b.status})})})}}),a(twttr.components.RecentlyFollowed)})}),provide("components/RecentlyViewed",function(a){using().as(function(b){twttr.klass("twttr.components.RecentlyViewed").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(){this.createView(),this.registerEvents()}).methods({registerEvents:function(){var a=this;this.$node.delegate("h2 .clear-all","click",function(b){b.preventDefault(),twttr.recentlyViewedUsers.clear(),a.$node.slideUp("fast",function(){a.$node.empty().show()})}),twttr.recentlyViewedUsers.bind("push.RecentlyViewedComponent",function(b,c){a.$find('li[data-user-id="'+c+'"]').size()||a.createView()}),a.registerUserActionEvents(),a.$node.delegate(".user-profile-link, .follow-action","click",function(){var a=$(this),b=a.hasClass("user-profile-link")?"profile_click":"follow";trackClient({section:"dashboard",component:"recently_viewed",action:b},{item_ids:[parseInt(a.attr("data-user-id"))],item_count:1})})},createView:function(){var a=this;twttr.recentlyViewedUsers.findAll({success:function(b){b=b.filter(function(a){return!a.following}).slice(0,6),b.length()?(trackClient({section:"dashboard",component:"recently_viewed",action:"results"},{item_ids:b.map(function(a){return a.id}),item_count:b.length()}),(new twttr.views.RecentlyViewed(b)).render(a.$node,"html"),twttr.helpers.ellipsify(a.$find("div.bio")),a.hasRendered()):a.trigger("notRendered","noRecentlyViewedUsers")}})}}),a(twttr.components.RecentlyViewed)})}),provide("components/InviteContacts",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.InviteContacts").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},this.scribbler=b.scribbler||new twttr.Scribbler,this.clientEventComponent=b.clientEventComponent||"invite_contacts";var c;for(var d=0;d<a.contacts.length;++d)c=a.contacts[d],c.index=d,c.truncated_email=twttr.helpers.truncate(c.email),c.truncated_name=twttr.helpers.truncate(c.name);(new twttr.views.InviteContacts(a)).render(this.$node,"append"),twttr.helpers.handlePopupLinks(this.$node);var e=this.$node.find("#select-all-contacts"),f=this.$node.find(".invite-contacts-button"),g=this.$node.find(".contacts .checkbox input");e.change(function(a){return g.attr("checked",this.checked),this.checked?f.removeClass("disabled"):f.addClass("disabled"),!0}),f.addClass("disabled"),g.change(function(a){var b=!0;return g.each(function(){b=b&&this.checked}),e.attr("checked",b),this.checked?f.removeClass("disabled"):g.filter(":checked").length==0&&f.addClass("disabled"),!0});var i=b.onSuccess||$.noop,j=b.onSubmit||$.noop,k=b.showError||function(a){twttr.showError(a)},l=this;f.click(function(a){if($(this).hasClass("disabled"))return;j();var b=g.filter(":checked").map(function(){var a=l.$node.find('label[for="'+this.id+'"]').text();return a==this.value?this.value:'"'+a+'" <'+this.value+">"}).get();f.addClass("disabled");var c={source:"contact_import",success:twttr.bind(this,function(a){var b=a.invited&&a.invited.length;twttr.showMessage(_("We let {{count}} of your contacts know about Twitter.",{count:b})),l.scribbler.scribe({component:l.clientEventComponent,action:"invited"},{event_value:b,item_count:b}),l.scribbler.scribe({component:l.clientEventComponent,action:"invitable"},{item_count:g.length}),i()}),error:function(a){f.removeClass("disabled");var c=twttr.API.util.RemoteRequest.apiErrorCodeFromResponse(a)||a.status;l.scribbler.scribe({component:l.clientEventComponent,action:"error"},{status_code:c,item_count:b.length});switch(c){case 47:k(_("We couldn't send invitations to any of those addresses."));break;case 37:k(_("There was an error emailing your contacts. Please try again later."));break;default:twttr.showMessage(_("We let your contacts know about Twitter.")),i()}}};twttr.API.AddressBook.sendInvitesByEmail(b,c)}),this.hasRendered()}),a(twttr.components.InviteContacts)})}),provide("components/InviteFriends",function(a){using("_","constants","mixins/inviteFriends").as(function(b,_){twttr.klass("twttr.components.InviteFriends").subclassOf(twttr.components.Base).mixin(twttr.mixins.inviteFriends).initializer(function(a){(new twttr.views.InviteFriends).render(this.$node,"append"),twttr.helpers.handlePopupLinks(this.$node),this.addFormEvents(a),this.hasRendered()}),a(twttr.components.InviteFriends)})}),provide("components/Retweeters",function(a){using().as(function(b){twttr.klass("twttr.components.Retweeters").subclassOf(twttr.components.Base).initializer(function(a,b,c){var d=this;a.retweeters({count:b||15,success:function(b){if(b.length()){var c=a.retweetCount,e=c>50?"50+":c;(new twttr.views.TweetStats({retweeters:b.array,retweeters_count:e,retweeters_length_one:c==1,retweeters_length_other:c!=1})).render(d.$node,"append");var f=b.map(function(a){return new twttr.views.BaseUser(a)});(new twttr.views.FacePile({users:f.array})).render(d.$find(".js-face-pile-container"),"append"),d.$find(".js-user-tipsy").tipsy({gravity:"s"}),d.hasRendered()}}})}).deciderKey("retweeters_component"),a(twttr.components.Retweeters)})}),provide("components/TweetActivity",function(a){using().as(function(b){twttr.klass("twttr.components.TweetActivity").subclassOf(twttr.components.Base).initializer(function(a){this.tweet=a,this.tweet.activities&&this.loadUsersAndRenderActivity()}).methods({loadUsersAndRenderActivity:function(){var a=this,b=33,c=[],d={favoriters:{},retweeters:{},repliers:{}},e={favoriters:[],retweeters:[],repliers:[]};for(var f in e){var g=this.tweet.activities[f];for(var i=0;i<g.length;i++)c=c.concat(g.slice(0,b)),d[f][g[i]]=!0}twttr.API.User.findAll(twttr.util.arrayUniq(c),{stringifiedIds:!0,success:function(b){b.each(function(a){for(var b in e)d[b][a.id]&&e[b].push(a)}),(new twttr.views.TweetActivity({counts:{favoriters_count:a.tweet.activities.favoriters_count,retweeters_count:a.tweet.activities.retweeters_count,repliers_count:a.tweet.activities.repliers_count},activities:e})).render(a.$node,"append")}})}}).click({".tweet-activity-view-all":function(a,b){b.closest(".activity-list-container").find("li.hidden").show(),b.closest(".tweet-activity-count-container").remove(),a.preventDefault()}}).deciderKey(function(){return twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_social_context")}),a(twttr.components.TweetActivity)})}),provide("components/ConversationThread",function(a){using().as(function(b){twttr.klass("twttr.components.ConversationThread").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.ConversationThread(a)).render(this.$node,"append"),a.bind("newMessage",function(a,c){(new twttr.views.Message(c)).render(b.$find(".messages-pane-header"),"after")}),a.bind("deletedMessage",function(a,c){b.$find(".js-message[data-message-id="+c+"]").remove()}),this.hasRendered()}),a(twttr.components.ConversationThread)})}),provide("components/InReplyTo",function(a){using().as(function(b){twttr.klass("twttr.components.InReplyTo").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet).initializer(function(a){var b=this;a.isReply&&a.inReplyTo(function(a){(new twttr.views.InReplyTo(a)).render(b.$node,"append"),b.registerTweetActionEvents(),b.updateI18nDisplay(),b.hasRendered()})}).deciderKey("in_reply_to_component").methods({noSpacer:!0}),a(twttr.components.InReplyTo)})}),provide("components/InlineReplyBox",function(a){using().as(function(b){twttr.klass("twttr.components.InlineReplyBox").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable).mixin(twttr.mixins.streamablePageWithInlineMedia).mixin(twttr.mixins.i18nTweet).initializer(function(a,b,c,d,e){if(!twttr.decider.hasInlineReplies())return null;this.registerTweetActionEvents(),b.addClass("with-inline-reply");var f=this.tweetActionReply(a,"expand",!0);f=twttr.dialogs.reply(f,!0);var g=(new twttr.views.InlineReplyBox({profile_image_url:twttr.currentUser.profileImageUrl,profile_image_size:e?"48":"32"})).$html();this.tweetbox=new twttr.TweetBox(g.prependTo(b),twttr.merge(f,{condensed:!0,condensedContent:_("Reply to @{{username}}",{username:f.defaultContent.slice(1)}),width:d,statusAction:"reply",whenGeoPopupOpens:function(){b.parent().scrollTop(0).css("overflow","visible")}}));var i=this;this.tweetbox.bind("open",function(){g.addClass("shifted").find(".inline-reply-user-image").show(),e&&i.tweetbox.$find("textarea").width(e)}),this.tweetbox.bind("close",function(){g.removeClass("shifted").find(".inline-reply-user-image").hide(),e&&i.tweetbox.$find("textarea").width(d)}),this.tweetbox.bind("tweetSuccess",function(a,b){var d=c.show().find(".tweets-wrapper");d.length||(d=c),(new twttr.views.SimpleTweet(b)).render(d,"prepend"),i.addInlineMediaIcons(d),i.updateI18nDisplay()}),this.tweetbox.bind("sendingTweet",function(c,d){i.trigger("reply.tweet",[a,b,"reply"])})}).methods({focus:function(){this.tweetbox.focus()}}),a(twttr.components.InReplyTo)})}),provide("components/Conversation",function(a){using().as(function(b){twttr.klass("twttr.components.Conversation").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.usesRelatedResults,twttr.mixins.i18nTweet,twttr.mixins.streamablePageWithInlineMedia).initializer(function(a,b,c){var d=this;d._tweetId=a.id;var e=function(a){if(a.length>1){var b=$("div.inner-pane").filter("div.active").find("div.pane-components"),c=b.find("div.conversation-last-ancestor-tweet");c.length>0&&b.animate({scrollTop:c.position().top-50},800)}},f=function(b){var f=twttr.isT1?new twttr.views.Ancestors(b):new twttr.views.Conversation(d.conversationGroup,a,b);f.render(d.$node,"append"),d.registerTweetActionEvents(),d.updateI18nDisplay(),twttr.isT1&&d.addInlineMediaIcons(d.$node),d.hasRendered(),twttr.isT1&&!b.length&&d.$node.hide(),c(d),twttr.decider.isExpando()||e(b)},g=function(a){twttr.API.User.find(a,function(a){twttr.helpers.canViewUser(a)||((new twttr.views.Ancestors({protected_ancestor:{user:new twttr.views.BaseUser(a)}})).render(d.$node,"append"),c(d))})};d.withRelatedResults(a,b,{success:function(b){d.resultGroups=b,d.conversationGroup=d.conversationGroupFor(b);var c=d.conversationGroup&&d.tweetsForConversationRole(d.conversationGroup,"Ancestor");c&&c.length?f(c):a.inReplyTo({success:function(a){f(a?[a]:[])},error:function(){twttr.isT1&&a.inReplyToUserId?g(a.inReplyToUserId):f([])}})},error:function(){f([])}})}).methods({onTweetActionDelete:function(a){a===this._tweetId&&this.trigger("deleted")},noSpacer:!0}),a(twttr.components.Conversation)})}),provide("components/Replies",function(a){using().as(function(b){twttr.klass("twttr.components.Replies").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.usesRelatedResults,twttr.mixins.i18nTweet,twttr.mixins.profilePopupActionable,twttr.mixins.streamablePageWithInlineMedia).initializer(function(a,b,c,d){if(!c)return;var e=this,f=function(a,b,c){b=e.filterRetweets(b);if(twttr.decider.isExpando()){var f=a.length;f>5?a=a.slice(0,5):b.length+f>5&&(b=b.slice(0,5-f))}a.length+b.length>0?((new twttr.views.Replies(c,a,b)).render(e.$node,"append"),e.registerTweetActionEvents(),e.updateI18nDisplay(),e.hasRendered(),twttr.isT1&&e.addInlineMediaIcons(e.$node),d&&d.apply(e)):twttr.decider.hasInlineReplies()&&((new twttr.views.Replies(c,a,b)).render(e.$node,"append"),e.$node.hide(),e.registerTweetActionEvents(),d&&d.apply(e))},g=[],i=[],j=e.conversationGroupFor(c);j&&(g=e.tweetsForConversationRole(j,"Descendant"),i=e.tweetsForConversationRole(j,"Fork")),f(g,i,j)}).methods({filterRetweets:function(a){var b={};for(var c=a.length-1;c>=0;c--){var d=a[c].id;a[c].attributes.retweeting_status?b[d]===undefined&&(b[d]=!1):b[d]=!0}for(var c=a.length-1;c>=0;c--){var d=a[c].id;a[c].attributes.retweeting_status&&b[d]===!0?a.splice(c,1):a[c].attributes.retweeting_status&&b[d]===!1&&(b[d]=!0)}return a}}).deciderKey("conversations"),a(twttr.components.Replies)})}),provide("components/MoreLists",function(a){using().as(function(b){twttr.klass("twttr.components.MoreLists").subclassOf(twttr.components.Base).initializer(function(a){this.render(a),this._registerEvents(a)}).deciderKey("more_lists_component").methods({render:function(a){var b=this;a.user.lists(function(c){c.length()&&((new twttr.views.MoreLists({user:new twttr.views.BaseUser(a.user),lists:new twttr.views.ListOfLists(c),create_list_button:{link_only:!0}})).render(b.$node),b.hasRendered())})},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"update",function(c,d){d.id===a.id&&b.render(d)})}}),a(twttr.components.MoreLists)})}),provide("geo/TweetGeo",function(a){using("_").as(function(b,_){twttr.klass("twttr.geo.TweetGeo",function(a,b,c,d){this.opts=d,this.placeId=b,this.render(a,c)}).methods({render:function(a,b){var c=this;c.$target=b;var d=$.extend({},a.data());d.tweet_id=a.id,c.avatarUrl=a.user.profileImageUrl.replace(/(.+)(?:_normal)\.(\w+)$/,"$1_mini.$2"),d.coordinates&&(c.coordinates=d.coordinates.coordinates),d.is_from=!c.placeId;var e=c.placeId||a.place&&a.place.id;if(e){if(!d.place||d.place.id!=e)d.place={id:e,name:_("A Place")};twttr.API.Place.find(e,{success:function(a){var b=a.data();d.place=twttr.geo.getFullPlace(b),c.finishRendering(d)},error:function(){d.place.place_id=e,c.finishRendering(d)}})}else delete d.place,c.finishRendering(d)},finishRendering:function(a){var b=this,c=!!b.coordinates,d=!(!a.place||!a.place.geometry&&!a.place.bounding_box);a.show_map=c||d;if(a.show_map||a.place){var e=(new twttr.views[b.opts.viewName](a)).$html();$.browser.safari&&!navigator.userAgent.match(/Chrome/)&&(e.find(".map_canvas").addClass("notransform"),b.opts.mapOptions.draggable=!1),b.$target.append(e)}if(a.show_map){b.drawMap(e.find(".map_canvas"),a.place);var f={},g=a.tweet_id+"";f[g]={item_type:twttr.constants.clientEvent.itemType.tweet},trackClient({component:"tweet",action:"show",element:"map"},{event_info:"dynamic",item_details:f,item_ids:[g],item_count:1})}},drawMap:function(a,b){var c=this;twttr.geo.loadMaps(function(){c.geoMap=new twttr.geo.Map(a,c.opts.mapOptions);if(!c.geoMap.initialized)return;var d=!1;if(b)if(b.geometry){var e=b.geometry.coordinates;b.geometry.type=="Polygon"?c.geoMap.addPlacePolygon(e):b.geometry.type=="MultiPolygon"?twttr.each(e,function(a){c.geoMap.addPlacePolygon(a)}):b.geometry.type=="Point"&&(c.geoMap.addPoi(e),d=!0)}else{var e=b.bounding_box.coordinates,f=e[0][0],g=e[0][2];f[0]==g[0]&&f[1]==g[1]?(c.geoMap.addPoi(e[0][0]),d=!0):c.geoMap.addPlacePolygon(e)}!d&&c.coordinates&&c.geoMap.addPoint(c.coordinates,c.avatarUrl),c.geoMap.adjustBounds(13,!d&&c.coordinates),a.bind("refreshMap",function(){c.geoMap.resize()})})}}),a(twttr.geo.TweetGeo)})}),provide("components/MachineTranslationBackend",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.components.MachineTranslationBackend",function(){}).statics({getBackend:function(){return new twttr.components.BingMTBackend}}).methods({translationTextEqual:function(a,b){return a===b?!0:(global_spaces=RegExp(twttr.txt.regexen.spaces.toString().slice(1,-1),"g"),a.replace(/[MHL]T\d*KEN/g,"").replace(global_spaces,"").toLowerCase()===b.replace(/[MHL]T\d*KEN/g,"").replace(global_spaces,"").toLowerCase()?!0:!1)},shouldShowTranslation:function(a,b,c,d){return c==d?!1:this.translationTextEqual(a,b)?!1:!0}}),twttr.klass("twttr.components.BingMTBackend",function(){}).subclassOf(twttr.components.MachineTranslationBackend).methods({attribution:function(){return _('Translation powered by <a href="http://bing.com/translator" target="_new">Bing Translator</a>')},translate:function(a,b,c){var d=this;$.ajax({url:window.location.protocol+"//api.microsofttranslator.com/v2/ajax.svc/GetTranslations?oncomplete=?",dataType:"jsonp",data:{appId:"2ADD5BC2C5139FA743F612F9CE8ECD783FCB899F",text:a,to:b,maxTranslations:1},success:twttr.bind(this,function(b){if(b&&b.Translations){var e=b.Translations[0].TranslatedText,f=b.From;this.shouldShowTranslation(a,e,f,d.destLocale)&&c(e,f)}})})}}),twttr.klass("twttr.components.MachineTranslatedTweet").subclassOf(twttr.components.Base).initializer(function(a){this._initTranslation(a,twttr.pageLocale||$("html").attr("lang")||"en")}).deciderKey("machine_translated_tweets").methods({_initTranslation:function(a,b){a.user["protected"]||(this.destLocale=b,this.fetchTranslation(a,this.destLocale))},_preProcessTweetText:function(a){var b=a,c=function(a){return a&&a.replace&&a.replace(/^\s+|\s+$/g,"")};this._mentions=a.match(twttr.txt.regexen.extractMentions)||[];for(i in this._mentions)this._mentions[i]=c(this._mentions[i]),b=b.replace(this._mentions[i],"<M"+i+"></M"+i+">");this._hashtags=a.match(twttr.txt.regexen.autoLinkHashtags)||[];for(i in this._hashtags)this._hashtags[i]=c(this._hashtags[i]),b=b.replace(this._hashtags[i],"<H"+i+"></H"+i+">");this._links=a.match(twttr.txt.regexen.extractUrl)||[];for(i in this._links)this._links[i]=this._links[i],b=b.replace(this._links[i],"<L"+i+"></L"+i+">");return b},_postProcessTweetText:function(a){var c=a;if(this._mentions&&this._mentions.length>0)for(var d=0;d<this._mentions.length;d++)c=c.replace(new RegExp("<M"+d+">\\s?</M"+d+">","i"),this._mentions[d]);if(this._hashtags&&this._hashtags.length>0)for(var d=0;d<this._hashtags.length;d++)c=c.replace(new RegExp("<H"+d+">\\s?</H"+d+">","i"),this._hashtags[d]);if(this._links&&this._links.length>0)for(var d=0;d<this._links.length;d++)c=c.replace(new RegExp("<L"+d+">\\s?</L"+d+">","i"),this._links[d]);return b.util.linkify(c)},fetchTranslation:function(a,b){var c=this;this.sourceText=this._preProcessTweetText(a.text);var d=twttr.components.MachineTranslationBackend.getBackend();d.translate(this.sourceText,b,function(b,e){(new twttr.views.MachineTranslatedTweet({translated_text:c._postProcessTweetText(b),attribution:d.attribution()})).render(c.$node,"append"),eventTerms={client:"web",page:"home",section:"timeline",component:"tweet",action:"translate"},eventDetails={item_ids:[a.id],i18n_details:{source_lang:e,source_length:c.sourceText.length,translation_lang:c.destLocale,translation_length:b.length}},trackClient(eventTerms,eventDetails),c.hasRendered()})}}),a(twttr.components.MachineTranslationBackend)})}),provide("components/TweetGeoSmall",function(a){using().as(function(b){twttr.klass("twttr.components.TweetGeoSmall").subclassOf(twttr.components.Base).initializer(function(a,b){if(!b&&!a.showGeoMap)return;if(a.geo||a.place&&a.place.id||b||a.coordinates)new twttr.geo.TweetGeo(a,b,this.$node,{viewName:"GeoMapSmall",mapOptions:twttr.isT1?{}:{draggable:!1,disableDoubleClickZoom:!0,navigationControl:!1}}),this.hasRendered()}).deciderKey("tweet_geo_component"),a(twttr.components.TweetGeoSmall)})}),provide("components/NewestListMembers",function(a){using().as(function(b){twttr.klass("twttr.components.NewestListMembers").subclassOf(twttr.components.Base).mixin(twttr.mixins.userActionable).initializer(function(a){this.render(a),this._registerEvents(a)}).deciderKey("newest_list_members_component").methods({render:function(a){var b=this;a.members().first(4,function(c){(new twttr.views.NewestListMembers({list:a.attributes})).render(b.$node),c.length()&&(c.each(function(a){var c=new twttr.views.UserSmallListItem(a);c.is_withheld()||c.render(b.$find(".js-recent-members"),"append")}),twttr.helpers.ellipsify(b.$find("div.bio")),b.hasRendered(),b.registerUserActionEvents())})},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"add remove",function(c,d){d.id===a.id&&b.render(d)})}}),a(twttr.components.NewestListMembers)})}),provide("components/StorkPip",function(a){using().as(function(b){twttr.klass("twttr.components.StorkPip").subclassOf(twttr.components.Base).initializer(function(a,b){var c=this;this._opts=b,this._state="icon",this._$streamItem=a,this._scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({component:"stork",element:b.id}),this.constructor.allPips[b.id]||(this.constructor.allPips[b.id]=[]),this.constructor.allPips[b.id].push(this),(new twttr.views.StorkPipIcon({icon:b.icon})).render(this.$node),this.$node.hide().prependTo(a).fadeIn("fast"),b.iconHighlight&&this.highlight(b.iconHighlight),this._scribbler.scribe({action:"impression"});var d=a.closest(".js-stream-items");if(b.explainOn){twttr.is.string(b.explainOn)&&(b.explainOn={event:b.explainOn});var e=b.explainOn.selector?d.find(b.explainOn.selector):d;this._registerEvent(e,b.explainOn.event,function(a){var d=$(a.target).closest(".js-stream-item");if(d.length&&(!b.matcher||b.matcher(d))){if(d[0]!=c._$streamItem[0]&&d.find(".js-pip").length)return;if(c._state=="icon")c._scribbler.scribe({action:"show"});else{if(c._state!="prompt")return;c._scribbler.scribe({action:"success"})}c.showState("explain",d)}})}if(b.dismissOn){twttr.is.string(b.dismissOn)&&(b.dismissOn={event:b.dismissOn});var e=b.dismissOn.selector?d.find(b.dismissOn.selector):d;this._registerEvent(e,b.dismissOn.event,function(a){var d=$(a.target).closest(".js-stream-item");d.length&&(!b.matcher||b.matcher(d))&&(d[0]==c._$streamItem[0]&&c._state=="explain"&&c._scribbler.scribe({action:"complete"}),c.dismissAll())})}}).click({".js-pip":function(){this._state=="icon"?(this.showState("prompt"),this._scribbler.scribe({action:"open"})):this._state=="explain"&&(this.dismissAll(),this._scribbler.scribe({action:"dismiss"}))},".js-dismiss":function(){this.dismissAll(),this._scribbler.scribe({action:"dismiss"})}}).statics({allPips:{},openPip:null}).methods({showState:function(a,b){function e(a){var b=new twttr.views.StorkPipText({contents:a,dismiss:!1});b.render(d.$node,"append"),d.$node.fadeIn("fast")}if(a=="prompt"&&!this._opts.promptHtml)return this.showState("explain",b);b=b||this._$streamItem;if(this._state==a)return;this._state=="icon"&&(a=="prompt"||a=="explain")&&twttr.stork.incrValue(this._opts.counter);if(a!="icon"){var c=this.constructor.openPip;c&&c!=this&&(c._state=="prompt"?c.showState("icon"):c._state=="explain"&&c.dismiss()),this.constructor.openPip=this}a=="explain"&&this.dismissOthers(),this._$streamItem[0]!=b[0]&&this.unhighlight(),this._state=a,this._$streamItem=b;var d=this;this.$find(".js-pip").prependTo(this.$node.parent()).fadeOut("fast",function(){$(this).remove();if(a=="icon"){var b=(new twttr.views.StorkPipIcon({icon:d._opts.icon})).render(d.$node);d.$node.fadeIn("fast")}else{var c=d._opts[a+"Html"],f=d._opts[a+"Highlight"];twttr.is.fn(c)?c(d._$streamItem,e):e(c),f&&f!="remove"?d.highlight(f):d.unhighlight(f=="remove")}}),this.$node.hide().prependTo(b)},highlight:function(a){this._$streamItem.find(a).is(".stork-highlighted")||(this.unhighlight(),this._$streamItem.find(a).each(function(){var a=$(this),b=$("<span>").addClass("stork-highlight-background"),c=$("<span>").addClass("stork-highlight-container").css({width:a.outerWidth(),height:a.outerHeight()});a.wrap(c).before(b).addClass("stork-highlighted"),b.fadeIn()}))},unhighlight:function(a){this._$streamItem.find(".stork-highlighted").each(function(){var b=$(this),c=b.parent().find(".stork-highlight-background"),d=function(){c.remove(),b.unwrap()};b.removeClass("stork-highlighted"),a?d():c.fadeOut(d)})},dismissOthers:function(){for(var a=0;a<this.constructor.allPips[this._opts.id].length;++a){var b=this.constructor.allPips[this._opts.id][a];b!=this&&b.dismiss()}this.constructor.allPips[this._opts.id]=[this]},dismissAll:function(){var a=this.$node.closest(".js-stream-items");for(var b=0;b<this.constructor.allPips[this._opts.id].length;++b){var c=this.constructor.allPips[this._opts.id][b];c.dismiss()}this.constructor.allPips[this._opts.id]=[],twttr.stork.storkifyTweets(a)},dismiss:function(){var a=this;this._$streamItem&&this.unhighlight(),this.$node.fadeOut(function(){a.destroy()}).find(".js-pip").removeClass("js-pip")}}),a(twttr.components.StorkPip)})}),provide("components/StreamEnd",function(a){using().as(function(b){twttr.klass("twttr.components.StreamEnd").subclassOf(twttr.components.Base).initializer(function(a,b){(new twttr.views.StreamEnd({show_stream_end_bird:b===undefined?!0:b,end_text:a})).render(this.$node,"append")}),a(twttr.components.StreamEnd)})}),provide("components/StreamEndInviteFriends",function(a){using().as(function(b){twttr.klass("twttr.components.StreamEndInviteFriends").subclassOf(twttr.components.StreamEnd).initializer(function(a,b){var c=new twttr.components.InviteFriends;c.$node.addClass("stream-item"),this.$node.append(c.$node),this._superInitializer.apply(this,arguments)}),a(twttr.components.StreamEndInviteFriends)})}),provide("components/StreamWhaleEnd",function(a){using().as(function(b){twttr.klass("twttr.components.StreamWhaleEnd").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.StreamWhaleEnd({stream_fail_header:a})).render(this.$node,"append"),this.$node.delegate(".try-again-after-whale","click",function(a){a.preventDefault(),b.trigger("tryAgain")})}),a(twttr.components.StreamWhaleEnd)})}),provide("components/ContactImportErrorEnd",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.ContactImportErrorEnd").subclassOf(twttr.components.Base).initializer(function(a){var b=this;(new twttr.views.StreamWhaleEnd({stream_fail_header:a})).render(this.$node,"append"),this.$node.delegate(".try-again-after-whale","click",function(a){b.trigger("tryImportAgain")})}),a(twttr.components.ContactImportErrorEnd)})}),provide("components/EmptyHome",function(a){using().as(function(b){var c=twttr.klass("twttr.components.EmptyHome").subclassOf(twttr.components.Base).initializer(function(){this.render(),this.hasRendered()}).methods({render:function(){var a=twttr.currentUser;(new twttr.views.EmptyHome({screen_name:a.screenName,protected_account:a["protected"]})).render(this.$node.empty(),"append")}});twttr.isT1&&c.methods({render:function(){(new twttr.views.EmptyHome({show_stream_end_bird:!0,end_text:(new twttr.views.EmptyTimelineMessage).html()})).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/AddPeople",function(a){using().as(function(b){var c=twttr.klass("twttr.components.AddPeople").subclassOf(twttr.components.Base).initializer(function(){this.render();var a=twttr.isT1?"userSearchPath":"whoToFollowSearchPath";twttr.helpers.addFormEvents(this.$find(".js-search-for-list-people"),function(){var b=this.q.value;b!=""&&(twttr.router.routeTo(twttr.router[a]({query:b})),trackClient({component:"empty_list_stream",action:"search"},"list"),_scribble("search-for-people",{input:"click"}))}),this.hasRendered()});twttr.isT1?c.methods({render:twttr.util.noopInT1}).setBaseView(twttr.views.AddPeople):c.methods({render:function(){(new twttr.views.AddPeople).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/NoListMembers",function(a){using().as(function(b){var c=twttr.klass("twttr.components.NoListMembers").subclassOf(twttr.components.Base).initializer(function(){var a=this;this.render(),this.hasRendered()});twttr.isT1?c.methods({render:twttr.util.noopInT1}).setBaseView(twttr.views.NoListMembers):c.methods({render:function(){(new twttr.views.NoListMembers).render(this.$node.empty(),"append")}}),a(c)})}),provide("components/Media",function(a){using("_","util").as(function(b,_){twttr.klass("twttr.components.Media").subclassOf(twttr.components.Base).initializer(function(a,b,c){this.tweet=a,this.urls=twttr.media.extractUrls(a),this.$node.prepend($('<div class="tweet-media"/>')),this.$mediaNode=this.$node.find("div.tweet-media"),this.width=b,this.options=c||{},this.hasCalledHasRendered=!1,this.notDisplayedClass=".media-not-displayed";var d=this;this.checkForMedia(function(a){a&&(d.$mediaNode.bind("hideMedia",function(){$("div.tweet-media").empty()}),d.$mediaNode.bind("showMedia",function(){d.restrictedMedia()?twttr.loggedIn?d.loggedInBehavior():d.loggedOutBehavior():d.renderMedia()}),d.$mediaNode.trigger("showMedia"))})}).deciderKey("inline_media_component").statics({restrictedCategories:{photo:!0,video:!0},dashboardThumbnailOptions:{itemWidth:66,itemHeight:66,itemDisplayWidth:70,width:276,viewClass:twttr.views.ThumbnailViewerFacet,thumbnailViewClass:twttr.views.ThumbnailFacet}}).methods({checkForMedia:function(a){var c=this;if(b.util.objKeys(this.urls).length===0&&!twttr.media.hasMedia(this.tweet)){a(!1);return}var d=c.tweet;twttr.Cards.prototype.hasCards(d)?(this.mediaTypes=[],a(!0)):twttr.media.mediaTypes(this.urls,function(d){c.mediaTypes=d;if(b.util.objKeys(c.mediaTypes).length===0){a(!1);return}a(!0)})},onProfilePage:function(){return twttr.profileUser&&twttr.profileUser.id==this.tweet.user.id},restrictedMedia:function(){var a=!1;return $.each(this.mediaTypes,function(b,c){var d=twttr.media.iconType(b,c);!twttr.components.Media.restrictedCategories[d]||(a=!0)}),a},_getUser:function(){return this.tweet.retweetingStatus?this.tweet.retweetingStatus.user:this.tweet.user},loggedInBehavior:function(){var a=this,b=this._getUser();if(twttr.helpers.isCurrentUser(b)||this.hasClickedShowMedia){this.renderMedia();return}this.checkPossiblySensitive()},_isPossiblySensitive:function(){return!!this.tweet.possiblySensitive},checkPossiblySensitive:function(){this._isPossiblySensitive()?this.possiblySensitiveBehavior():this.renderMedia()},checkNotFollowing:function(){var a=this,b=this._getUser();twttr.currentUser.relationshipWith(b,function(c){b.sync("following",c.following),a.renderMedia()})},possiblySensitiveBehavior:function(){var a=this;twttr.currentUser.viewPossiblySensitive({success:function(b){b?a.checkNotFollowing():a.renderBlockedMessage({possibly_sensitive:!0})}})},loggedOutBehavior:function(){this.onProfilePage()&&!this._isPossiblySensitive()?this.renderMedia():this._isPossiblySensitive()&&!twttr.media.getViewMediaCookie()?this.renderBlockedMessage({possibly_sensitive:!0}):this.renderMedia()},renderMedia:function(){var a=this,b=(new twttr.media.Embedder(this.tweet,{DOMContainer:a.$mediaNode,preProcess:function(b,c){c(twttr.aug(a.options,{maxwidth:a.width}))},afterRender:function(b,c){a.hasCalledHasRendered||(a.hasRendered(),a.hasCalledHasRendered=!0),a.options.afterRender&&a.options.afterRender(b)}})).render()},buildNotDisplayedView:function(a){return new twttr.views.MediaNotDisplayed(a)},renderBlockedMessage:function(a){var b=this;b.hasCalledHasRendered||(b.hasRendered(),b.hasCalledHasRendered=!0);if(this.$node.find(this.notDisplayedClass+":visible").get(0))return;this.buildNotDisplayedView(a).render(this.$node,"prepend"),this.options.whenNotDisplayed&&this.options.whenNotDisplayed(this.$node);var c=twttr.bind(this,function(a){this.renderMedia(),this.$node.find(this.notDisplayedClass).hide(),twttr.loggedIn?this.hasClickedShowMedia=!0:twttr.media.setViewMediaCookie(),a.stopPropagation()});this.$node.find(".display-this-media").click(c),this.$node.find(".always-display-media").click(function(a){twttr.currentUser.updateViewPossiblySensitive(!0,{success:function(){twttr.showMessage(_("Your media display settings have been changed.")),c(a)},error:function(a){twttr.showError(_("Couldn't set inline media settings."))}})})}}),a(twttr.components.Media)})}),provide("components/ProfilePane",function(a){using("mixins/userActionable",twttr.isT1?["mixins/userUpdateable","mixins/profilePopupActionable"]:[]).as(function(b){var c=twttr.klass("twttr.components.ProfilePane").subclassOf(twttr.components.Base).initializer(function(a){this.user=a,this.renderPane(),twttr.loggedIn&&this.$node.append((new twttr.components.ProfileActions(this.user,undefined,!0)).$node),this.hasRendered()}).methods({renderPane:function(){var a=new twttr.views.ProfilePane(this.user);a.render(this.$node)},renderStats:function(){var a=new twttr.views.MiniProfileStats(this.user);a.render(this.$node.find(".js-mini-profile-stats"),"replaceWith")}});twttr.isT1&&c.mixin(b.mixins.userActionable,b.mixins.userUpdateable,b.mixins.profilePopupActionable).initializer(function(a){var b=this,c=a.impressionId;this.user=a,this.renderPane(),this.registerUserActionEvents(),twttr.loggedIn&&(this.registerUserUpdateEvents(this.user),this.bind("userUpdated",function(a,d){b.user=d,c&&(b.user=twttr.API.util.PromotedStore.getPromotedUserInstance(b.user,c)),b.renderStats()})),this.hasRendered()}).methods({renderPane:function(){var a=this;this.getRelationship(this.user,function(b,c){a.updateUserAttributesFromRelationship(b);var d=new twttr.views.ProfilePane(a.user);d.render(a.$node),a.showFollowOrUnfollow(a.user),twttr.helpers.canViewUser(a.user)&&a.showMiniSocialProof(a.user),a.renderUserProfileMenu(a.$find(".js-follow-combo"),a.$find(".js-action-profilemenu"),c)})}}),a(c)})}),provide("components/JapaneseAd",function(a){using("constants").as(function(b){twttr.klass("twttr.components.JapaneseAd").subclassOf(twttr.components.Base).initializer(function(){if(twttr.components.JapaneseAd.shouldBeHidden()){this.$node.hide();return}(new twttr.views.JapaneseAd).render(this.$node,"append");if(twttr.decider.isAvailable("japanese_new_ad_provider"))this.constructor.getJapanAd()?this.constructor.refreshAds():this.constructor.createIframeAd(this.$node);else if(!this.constructor.loadedOnce){this.constructor.loadedOnce=!0;var a="loadedJsCallBack"+parseInt(Math.random()*1e5,10);twttr.components.JapaneseAd.callbacks[a]=function(b){delete twttr.components.JapaneseAd.callbacks[a],twttr.components.JapaneseAd.loadedJsCallback(b)},$.ajax({cache:!0,url:window.location.protocol+b.constants.japaneseAdUrl+a,dataType:"script"})}else this.constructor.refreshAds()}).statics({shouldBeHidden:function(){var a=["japan_olympic","akiko_lawson","docomo","mhamura","warnerjp","aquarius_sports"];return twttr.pageLocale!=="ja"||twttr.app.currentPageName()==="profile"&&$.inArray(twttr.profileUser.screenName.toLowerCase(),a)!=-1},callbacks:{},loadedJsCallback:function(a){this.etologyAdSrc=a[0];if(typeof renderAd=="function"){var b=renderAd;renderAd=function(a){document.getElementById(a.spaceTag)&&b.apply(this,arguments)}}this.refreshAds()},createIframeAd:function(a){$(a).append($('<iframe id="j_ad" src="'+b.constants.japaneseAdIframeUrl+'" width="300" height="185" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>')),trackClient({component:"japanese_ad",action:"impression"},{url:b.constants.japaneseAdIframeUrl})},getJapanAd:function(){return $("#j_ad")[0]},refreshAds:function(){var a="t="+(new Date).getTime();twttr.decider.isAvailable("japanese_new_ad_provider")?this.getJapanAd()&&($("#j_ad").attr("src",b.constants.japaneseAdIframeUrl+"&"+a),trackClient({component:"japanese_ad",action:"refresh"},{url:b.constants.japaneseAdIframeUrl})):this.etologyAdSrc&&(trackClient({section:"dashboard",component:"japanese_ad",action:"refresh"},{url:this.etologyAdSrc}),_scribble("japanese-ad-refresh",{adSource:this.etologyAdSrc}),$.getScript(this.etologyAdSrc+"?"+a))}}).deciderKey("japanese_ad_component"),a(twttr.components.JapaneseAd)})}),provide("components/ProtectedUser",function(a){using().as(function(b){twttr.klass("twttr.components.ProtectedUser").subclassOf(twttr.components.Base).initializer(function(a){(new twttr.views.ProtectedUser(a)).render(this.$node,"append")}),a(twttr.components.ProtectedUser)})}),provide("components/TweetStats",function(a){using().as(function(b){var c=twttr.klass("twttr.components.TweetStats").subclassOf(twttr.components.Base).initializer(function(a,b,c){this.maxUsersToShow=b;var d=this;a.summary(function(b){d.shouldRender(b)&&($.extend(b,{screen_name:a.user.screenName,id:a.id,retweeters_length:b.retweeters.length,favoriters_length:b.favoriters.length,has_retweets:!!parseInt(b.retweeters_count,10),has_favorites:!!parseInt(b.favoriters_count,10)}),(new twttr.views.TweetStats(b)).render(d.$node,"append"),d.$node.closest(".js-stream-tweet").addClass("with-social-proof"),d.getFacePile(b),c&&c())})}).methods({shouldRender:function(a){return a.retweeters.length+a.favoriters.length>0},getFacePile:function(a){var b=this,c=twttr.util.arrayUniq(a.retweeters.concat(a.favoriters));c=c.slice(0,this.maxUsersToShow),twttr.API.User.findAll(c,function(a){var d={};a.each(function(a){d[a.id]=a});var e=new twttr.anywhere.api.util.BaseCollection($.map(c,function(a){return d[a]})),f=e.map(function(a){return new twttr.views.BaseUser(a)});(new twttr.views.FacePile({users:f.array})).render(b.$find(".js-face-pile-container"),"append"),b.$node.closest(".js-stream-tweet").addClass("with-social-proof"),b.$find(".js-user-tipsy").tipsy({gravity:"s"})})}}).deciderKey(function(){return twttr.decider.isActivityEnabled()&&twttr.decider.isAvailable("activity_status_summary")});a(c)})}),provide("components/PermalinkTweet",function(a){using().as(function(b){twttr.klass("twttr.components.PermalinkTweet").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.i18nTweet,twttr.mixins.userActionable,twttr.mixins.profilePopupActionable).initializer(function(a){this.view=new twttr.views.SingleTweet(a),this.view.render(this.$node,"append"),this._tweetId=a.id,this.registerTweetActionEvents(),this.updateI18nDisplay(),this.hasRendered(),this.scribeComponentName="tweet";if(twttr.isT1){var b=twttr.loggedIn?"TweetStats":"Retweeters",c=new twttr.components[b](a,9);this.$find("div.js-tweet-stats-container").append(c.$node)}this.registerUserActionEvents()}).methods({renderWithheld:function(){return this.view.render_withheld()},renderCreatorWithheld:function(){return this.view.is_withheld()&&this.view.is_current_user()},faveTweet:function(a){this.tweetActionFavorite(this.$find(".tweet"),a)},replyTweet:function(a){this.tweetActionReply(this.$find(".tweet"),a)},retweetTweet:function(a){this.tweetActionRetweet(this.$find(".tweet"),a)},onTweetActionDelete:function(a){a===this._tweetId&&this.trigger("deleted")}}).click({"img.user-profile-link":function(a,b){this.trigger("avatar_click.tweet",[b.closest(".js-actionable-tweet"),"avatar",b])},".tweet-user-block-screen-name":function(a,b){this.trigger("screen_name_click.tweet",[b.closest(".js-actionable-tweet"),"screen_name",b])},".stats .js-stat-count a":function(a,b){a.stopPropagation(),a.preventDefault()}}),a(twttr.components.PermalinkTweet)})}),provide("components/NoUserExists",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.NoUserExists").subclassOf(twttr.components.Base).initializer(function(){this.$node.append("<p class='no-user tweet-text tweet-text-large'>"+_("This user does not exist.")+"</p>"),this.hasRendered()}),a(twttr.components.NoUserExists)})}),provide("components/SignupCallOut",function(a){using().as(function(b){twttr.klass("twttr.components.SignupCallOut").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{};var c;if(b.profileUser){var d=twttr.merge({signup_source:a},b.profileUser.attributes);a=="permalink"?c=new twttr.views.PermalinkSignupCallOut(d):c=new twttr.views.ProfileSignupCallOut(d)}else c=new twttr.views.NewSignupCallOut({signup_source:a,query:b.query});c.render(this.$node.empty(),"append"),this.$node.delegate("form.signup-btn","submit",function(){trackClient({section:"signup_callout",component:"form",action:"signup_click"})});if(b.profileUser||twttr.isT1){var e=this.$find("form");twttr.helpers.addFormEvents(e),twttr.helpers.addHoldingInputEvents(e)}this.$node.delegate(".profile-subpage-call-out-button","click",function(){trackClient({section:"signup_callout",component:"discover_link",action:"click"},{profile_id:twttr.profileUser.id,context:"profile"})}),this.hasRendered()}),a(twttr.components.SignupCallOut)})}),provide("components/SuggestionCategoriesList",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.SuggestionCategoriesList").subclassOf(twttr.components.Base).initializer(function(a,b,c){var d=this.categoriesToLinks(a,b,c);(new twttr.views.LinkList(d,"&middot;")).render(this.$node,"append"),this.$find("ul").addClass("categories-list")}).mixin(twttr.mixins.discoveryHelper).methods({categoriesToLinks:function(a,b,c){var d=this;return a?a.map(function(a,e){var f={text:a.name};if(c==a.slug)return f;var g=d.pagePathFor(b,"InterestsCategory",{category:a.slug});return twttr.merge(f,{href:g})}).array:[]}}),a(twttr.components.SuggestionCategoriesList)})}),provide("components/ContactImportMatchesStats",function(a){using().as(function(b){twttr.klass("twttr.components.ContactImportMatchesStats").subclassOf(twttr.components.Base).initializer(function(a,b){var c=a.customHeaderView||"ContactImportMatchesStats";(new twttr.views[c](b)).render(this.$node,"append"),this.$node.delegate(".js-action-follow-all","click",function(b){a._followAll($(this)),b.preventDefault()}),this.$node.delegate(".save-as-list","click",function(b){a._saveAsList($(this)),b.preventDefault()}),this.$node.delegate(".invite-contacts","click",function(b){a.inviteOthers(),b.preventDefault()})}),a(twttr.components.ContactImportMatchesStats)})}),provide("components/media/Base",function(a){using().as(function(b){twttr.klass("twttr.components.media.Base").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.options=a,this.size=a.size||"medium",this.count=this.count||a.count||100,this.offset=this.offset||a.offset||0,this.score=a.score||!0,this.isDataReady=!1,this._urls=[]}).methods(twttr.EventProvider).methods({render:function(){throw new Error("You should implement this.")},dataReady:function(a,b){this._urls=a,this.isDataReady=!0,this.trigger("urlsLoaded",[this._urls,!!b])}}),a(twttr.components.media.Base)})}),provide("components/media/profile",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.media.profile.Images").subclassOf(twttr.components.media.Base).initializer(function(a){var b=this;this._superInitializer.apply(this,arguments),this.user=a.user,this.provider=new twttr.media.provider.UserMedia({user:this.user}),this.options=a||{},this._fetchedMedia=null,this.viewTemplate=twttr.views.FacetMedia,this.filter=a.filter||function(){return!0},this.thumbnailViewerOptions=$.extend({},{width:340,itemWidth:83,itemHeight:83,itemDisplayWidth:85,generateItemHref:function(a){return twttr.router.userMediaSlideshowPath({screen_name:b.user.screenName})+"?url="+encodeURIComponent(a)}},this.options),this.noSpacer=!!this.options.noSpacer}).methods({fetchImages:function(){var a=this;this.provider.fetch({count:this.count,page:this.offset,filter:this.filter,success:function(b){a._fetchedMedia=b;var c=!1;a.dataReady($.map(b,function(a){return c=c||a&&a.tweet&&a.tweet.possiblySensitive,a.url}),c)}})},render:function(){var a=this;if(!this.isDataReady)return;var b=4,c=this._urls.length>b;this.viewAllHref=twttr.router.userMediaGridPath({screen_name:a.user.screenName});if(this._urls.length>0){var d=(new this.viewTemplate({title:_("Recent images"),view_all_href:this.viewAllHref,show_view_all:c})).$html();this.$node.append(d),this.thumbnailViewer=new twttr.components.ThumbnailViewer(this._urls,this.thumbnailViewerOptions,this._fetchedMedia),this.thumbnailViewer.renderWithIndex(0),this.thumbnailViewer.bind("nextPage prevPage",function(a,b){trackClient({section:"dashboard",component:"photos_user_media",action:"page"},{event_info:"photos",cursor_or_page:b,profile_id:twttr.profileUser&&twttr.profileUser.id})}),this.thumbnailViewer.bind("allFailed",function(){a.trigger("failed")}),this.$find(".js-media-images").replaceWith(this.thumbnailViewer.$node)}this.hasRendered()}}),a(twttr.components.media.profile)})}),provide("components/media/facets/Base",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Base").subclassOf(twttr.components.media.Base).initializer(function(a){this._superInitializer(a)}).methods(twttr.EventProvider).methods({render:function(){throw new Error("You should implement this.")}});a(c)})}),provide("components/media/facets/Media",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Media").subclassOf(twttr.components.media.facets.Base).methods({render:function(){var a=this;if(!this.isDataReady)return;var b=a._type==="images"?4:3,c=this._urls.length>b;if(this._urls.length>0){var d=(new this.viewTemplate({title:this.title,view_all_href:!twttr.isT1||c?this.view_all_href:this.view_slideshow_href,show_view_all:c})).$html();this.$node.append(d);var e={imageSize:this.imageSize,cacheSize:this.cacheSize,width:340,itemWidth:this.itemWidth||83,itemHeight:this.itemHeight||83,itemDisplayWidth:this.itemDisplayWidth||85,delayLoading:!0,generateItemHref:function(b){return twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:a._type==="images"?"photos":a._type})+"?url="+encodeURIComponent(b)},containsVideos:a._type!=="images"?!0:!1};twttr.isT1&&twttr.aug(e,twttr.components.Media.dashboardThumbnailOptions),this.thumbnailViewer=new twttr.components.ThumbnailViewer(this._urls,e),this.thumbnailViewer.renderWithIndex(0),this.thumbnailViewer.bind("nextPage prevPage",function(b,c){var d=a._type=="images"?"photos":a._type;trackClient({section:"dashboard",component:d+"_search_facets",action:"page"},{event_info:d,query:a.options.query,page_or_cursor:c})}),this.thumbnailViewer.bind("failedToLoad",function(c,d){var e=$.inArray(d,a._urls);e>-1&&a._urls.splice(e,1),a._urls.length<=b&&a.hideViewAll()}),this.thumbnailViewer.bind("allFailed",function(){a.trigger("failed")}),this.$find(".js-media-images").replaceWith(this.thumbnailViewer.$node)}this.afterRender(),this.hasRendered()},hideViewAll:function(){this.$find(".view-all-link").remove()},afterRender:function(){},viewTemplate:twttr.views.FacetMedia});a(c)})}),provide("components/media/facets/Images",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Images").subclassOf(twttr.components.media.facets.Media).initializer(function(){var a=this;this.title=_("Top images"),this._type="images",this._superInitializer.apply(this,arguments),this.view_all_href=twttr.router.searchFacetsGridPath({query:a.options.query,mode:"photos"}),this.view_slideshow_href=twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:"photos"}),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"photos_search_facets",action:"view_all"},{query:a.options.query,event_info:"photos"}),scribble("facets_view_all_click",{mode:"images",query:a.options.query,userId:twttr.currentUser?twttr.currentUser.id:null})}),this.$node.delegate(".media-thumbnail","click",function(b){trackClient({section:"dashboard",component:"photos_search_facets",action:"click"},{query:a.options.query,event_info:"photos",url:$(this).attr("data-url")})}),twttr.SearchAPI.getImageFacets(this.options.query,{experimentId:this.options.expId,count:100,success:function(b){var c=$.map(b,function(a){return a.url});a.dataReady(c,!1)}})}).methods({scribeComponentName:"photos_search_facets"}).deciderKey("phoenix_facets_images");a(c)})}),provide("components/media/facets/Videos",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.media.facets.Videos").subclassOf(twttr.components.media.facets.Media).initializer(function(){var a=this;this.itemWidth=112,this.itemDisplayWidth=114,this.title=_("Top videos"),this._type="videos",this._superInitializer.apply(this,arguments),this.view_all_href=twttr.router.searchFacetsGridPath({query:a.options.query,mode:"videos"}),this.view_slideshow_href=twttr.router.searchFacetsSlideshowPath({query:a.options.query,mode:"videos"}),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"videos_search_facets",action:"view_all"},{query:a.options.query,event_info:"videos"})}),this.$node.delegate(".media-thumbnail","click",function(b){trackClient({section:"dashboard",component:"videos_search_facets",action:"click"},{query:a.options.query,event_info:"videos",url:$(this).attr("data-url")})}),twttr.SearchAPI.getVideoFacets(this.options.query,{experimentId:this.options.expId,count:100,success:function(b){var c=$.map(b,function(a){return a.url});a.dataReady(c,!1)}})}).methods({scribeComponentName:"videos_search_facets"}).deciderKey("phoenix_facets_videos");a(c)})}),provide("components/ThumbnailViewer",function(a){using("constants").as(function(b){var c=twttr.klass("twttr.components.ThumbnailViewer").subclassOf(twttr.components.Base).initializer(function(a,b,c){b?(this.imageSize=b.imageSize||this.imageSize,this.cacheSize=b.cacheSize||this.cacheSize,this.itemWidth=b.itemWidth||60,this.itemHeight=b.itemHeight||60,this.itemDisplayWidth=b.itemDisplayWidth||this.itemWidth,this.itemDisplayHeight=b.itemDisplayHeight||this.itemHeight,this.containsVideos=b.containsVideos||!1,this.width=b.width||304,this.viewClass=b.viewClass||twttr.views.ThumbnailViewer,this.thumbnailViewClass=b.thumbnailViewClass||twttr.views.Thumbnail,this.scribbler=b.scribbler||twttr.Scribbler.clientEvent,this.noRender=b.noRender,this.atEnd=!1,this.firstVisibleIndex=0,twttr.is.def(b.fadeOutNav)?this.fadeOutNav=b.fadeOutNav:this.fadeOutNav=!0,this.generateItemHref=b.generateItemHref||function(a){return a}):this.scribbler=twttr.Scribbler.clientEvent,this.originalCount=a.length,this.urls=a,this.embeddedMedia=c,(new this.viewClass).render(this.$node,"append"),this.thumbSetup(),this._registerEventHandlers(),this.updatePageNavigation()}).methods({animateTo:function(a){a<0&&(a=0);var b=this.getFullyVisibleThumbsPerPage();this.firstVisibleIndex=a-a%b;var c=this.determineLeftPosition(a,b),d=Modernizr.csstransitions?"animateWithCss":"animate";twttr.isRTL?this.$thumbs[d]({right:-c},400,"swing"):this.$thumbs[d]({left:-c},400,"swing"),this.loadSurroundingImages(a,b),this.updatePageNavigation()},determineLeftPosition:function(a,b){var c=this.firstVisibleIndex*this.itemDisplayWidth,d=this.getThumbsWidth(),e=a*this.itemDisplayWidth,f=this.getThumbsVisibleWidth(),g=c+f-d;if(g>=0&&this.firstVisibleIndex>=b)c-=g,this.atEnd=!0;else{var i=d-e;this.atEnd===!0&&i<f?(c-=g,this.atEnd=!0,this.firstVisibleIndex=this.urls.length-b):this.atEnd=!1}return c},loadNextImages:function(a,b){if(this.noRender)return;this.$thumbs.children().slice(a,b).trigger("loadImage")},loadSurroundingImages:function(a,b){var c=a-b;c<0&&(c=0),this.loadNextImages(c,a+b*2)},thumbSetup:function(){this.$thumbs=this.$find(".js-thumbnail-viewer-images"),this.$container=this.$find(".js-thumbnail-viewer-container"),this.$thumbs.width(this.getThumbsWidth()),this.generateThumbs(this.urls)},getThumbsWidth:function(){return this.urls.length*this.itemDisplayWidth},getThumbsVisibleWidth:function(){return this.$container.width()||this.width},getThumbsPerPage:function(){return Math.ceil(this.getThumbsVisibleWidth()/this.itemDisplayWidth)},getFullyVisibleThumbsPerPage:function(){var a=this.getThumbsVisibleWidth()/this.itemDisplayWidth;return a-Math.floor(a)>.95?Math.ceil(a):Math.floor(a)},renderWithIndex:function(a){a=this.resetIndex(a),this.animateTo(a)},removeUrl:function(a){var b=$.inArray(a,this.urls);b!==-1&&(this.urls.splice(b,1),this.trigger("failedToLoad",a),this.updatePageNavigation()),this.urls.length==0&&this.trigger("allFailed")},selectByUrl:function(a){var b=$.inArray(a,this.urls);return b==-1?!1:(this.renderWithIndex(b),this._select(this.getThumbnailByUrl(a)),!0)},selectByIndex:function(a){a=this.resetIndex(a),this.renderWithIndex(a);var b=this.$thumbs.find(".media-thumbnail");this._select($(b[a]))},resetIndex:function(a){return a>this.urls.length?0:a},getThumbnailByUrl:function(a){return this.$thumbs.find(".media-thumbnail[data-url='"+a+"']").first()},generateThumbs:function(a){var c=this;if(a.length===0)return;var d=b.constants.imageSizes,e=$(),f={width:this.itemWidth,height:this.itemHeight,dimension:Math.max(this.itemWidth,this.itemHeight),size:this.itemWidth<80&&this.itemHeight<80?d.small:d.medium,scalingMode:"trim",delayLoading:!0,thumbnailViewClass:this.thumbnailViewClass,componentName:this._namespace.split(".").pop()};this.embeddedMedia?e=twttr.images.renderProviderMedia(this.embeddedMedia,f):e=twttr.images.renderMediaUrls(a,f);if(e.length){var g=this.getFullyVisibleThumbsPerPage(),i=0,j=0,k=g*2,l=k;function m(){i+j===l&&j<=g&&(c.loadNextImages(j,j+k),l+=k)}e.addClass("thumbnail-image-wrapper").bind("failedToResolve failedToLoad",function(a,b){var d=$(this).attr("data-url");twttr.images.scribeImageFailure(c.scribbler,"photos_thumbnails",d),c.removeUrl(d),$(this).remove(),i++,m()}).bind("loaded",function(){twttr.images.animateImageFadeIn($(this).find("img"),500),j++,m()}),e.append('<div class="thumbnail-active-border"><div class="thumbnail-active-border-inner"></div></div>'),twttr.isT1||e.append('<div class="media-play-button"></div>'),this.containsVideos&&e.addClass("video"),e.each(function(){var a=$(this);a.attr("href",c.generateItemHref(a.attr("data-url")))}),this.$thumbs.append(e)}},updateWidth:function(a){this.width=a||this.$node.width(),this.animateTo(this.getActiveThumbnail().index()),this.updatePageNavigation()},prevPage:function(){var a=this.getFullyVisibleThumbsPerPage();this.animateTo(this.firstVisibleIndex-a),this.trigger("prevPage",Math.round(this.firstVisibleIndex/a)+1)},nextPage:function(){var a=this.getFullyVisibleThumbsPerPage();this.animateTo(this.firstVisibleIndex+a),this.trigger("nextPage",Math.round(this.firstVisibleIndex/a)+1)},updatePageNavigation:function(){var a=this.$find(".thumbnail-viewer-prev");this.firstVisibleIndex===0?a.addClass("disabled"):a.removeClass("disabled");var b=this.$find(".thumbnail-viewer-next");this.atEnd===!0?b.addClass("disabled"):b.removeClass("disabled");var c=this.$find(".thumbnail-viewer-nav");this.getFullyVisibleThumbsPerPage()>=this.urls.length?c.hide():c.css("display","")},deselect:function(){this.$node.find(".media-thumbnail").removeClass("media-thumbnail-active")},_select:function(a){if(a.length===0)return;this.deselect(),a.addClass("media-thumbnail-active"),this.selectedUrl=a.attr("data-url"),this.trigger("select",[{url:this.selectedUrl,index:a.prevAll().length+1,hasPrev:a.prev().length>0,hasNext:a.next().length>0}])},prev:function(){this.shiftOne("prev")},next:function(){this.shiftOne("next")},shiftOne:function(a){var b=this.getActiveThumbnail()[a]();b.length>0&&(this._select(b),this.trigger(a,[b.prevAll().length+1]),twttr.router.routeTo(b.attr("href")))},getActiveThumbnail:function(){return this.$find(".media-thumbnail-active")},_registerEventHandlers:function(){var a=this;this.$node.delegate(".media-thumbnail","click",function(b){a._select($(this))}),this.$node.delegate(".thumbnail-viewer-prev","click",function(b){a.prevPage()}),this.$node.delegate(".thumbnail-viewer-next","click",function(b){a.nextPage()});if(this.fadeOutNav){this.$nav=this.$find(".thumbnail-viewer-nav").css("opacity",0);var b=Modernizr.csstransitions?"animateWithCss":"animate";this.$node.hover(function(){a.fadeTimer&&clearTimeout(a.fadeTimer),a.$nav[b]({opacity:1},400,"swing")},function(){a.fadeTimer=window.setTimeout(function(){a.$nav[b]({opacity:0},400,"swing")},200)})}}});a(c)})}),provide("components/TheGrid",function(a){using("constants").as(function(b){twttr.klass("twttr.components.TheGrid").subclassOf(twttr.components.Base).initializer(function(a,b){(new twttr.views.TheGrid).render(this.$node,"append"),this.$grid=this.$find(".the-grid"),this.media=[],this.totalCount=0,this.imageWidth=a.imageWidth||150,this.imageHeight=a.imageHeight||150,this.margin=a.margin||10,this.chunksize=a.chunksize||100,this.gridCols=6,this.isEvent=a.isEvent||!1,this.generateItemHref=a.generateItemHref||$.noop,this.provider=a.provider,this.query=a.query,this.mode=a.mode,this.type=a.type,this.screenName=a.screenName,this.filter=a.filter,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.provider.fetch({count:100,score:!0,offset:0,mode:this.mode,query:this.query,is_event:this.isEvent,filter:this.filter,success:twttr.bind(this,this._loadMedia),error:twttr.bind(this,this.renderNoResults)}),this.setCols(b),this._registerEventHandlers()}).methods({setCols:function(a){var b=this.mode==="videos"?this._getWidthVideos(a):this._getWidthPhotos(a);this.$grid.width(b)},_getWidthPhotos:function(a){var b=960;return a>=640&&a<800?b=640:a>=800&&a<960&&(b=800),b},_getWidthVideos:function(a){var b=840;return a>=630&&a<840&&(b=630),b},decrementLoaded:function(){this.totalCount--,this.totalCount==0&&this.trigger("hideLoading")},_doLoad:function(a){var c=this,d=a.length,e=$(),f={width:this.imageWidth,height:this.imageHeight,size:b.constants.imageSizes.medium,scalingMode:"trim",componentName:this._namespace.split(".").pop()};a&&(e=twttr.images.renderProviderMedia(a,f)),e.length&&(e.addClass("grid-square").bind("failedToResolve failedToLoad",function(a,b){var e=$(this).attr("data-url");twttr.images.scribeImageFailure(c.scribbler,"photos",e),$(this).remove(),d--,d==0&&c.renderAndResolve(),c.decrementLoaded()}),this.mode=="videos"&&e.addClass("video").append('<div class="media-play-button"></div>'),e.each(function(){var a=$(this);a.attr("href",c.generateItemHref(a.attr("data-url")))}),e.bind("loaded",function(){d--,d==0&&c.renderAndResolve(),c.decrementLoaded(),twttr.images.animateImageFadeIn($(this).find("img"))}),this.mode=="videos"&&e.addClass("video").append('<div class="media-play-button"></div>'),this.$find(".the-grid").prepend(e))},renderAndResolve:function(){var a=this,b=this.media.splice(0,this.chunksize);b.length>0?this._doLoad(b):this.trigger("hideLoading")},_loadMedia:function(a){this.media=a,this.totalCount=this.media.length,this.$find(".the-grid").empty(),this.media.length>0?this.renderAndResolve():this.renderNoResults()},renderNoResults:function(){(new twttr.views.MediaGalleryNoResults({is_search:this.type==="search",is_usermedia:this.type==="userMedia",query:this.query,mode_photos:this.mode==="photos",mode_videos:this.mode==="videos",screen_name:this.screenName})).render(this.$find(".the-grid"),"append"),this.trigger("hideLoading")},_registerEventHandlers:function(){var a=this;setTimeout(function(){a.trigger("hideLoading")},1e4)}}),a(twttr.components.TheGrid)})}),provide("components/MediaGalleryControls",function(a){using("_").as(function(b,_){twttr.klass("twttr.components.MediaGalleryControls").subclassOf(twttr.components.Base).initializer(function(a){this._options=a||{},this._eventId=a.eventId||!1,this._isEvent=!!this._eventId,this._type=a.type||"search",this._view=a.view||"grid",this._mode=a.mode||"photos",this._query=a.query||"",this.screenName=a.screenName,this._render(),this._registerEvents()}).methods({_registerEvents:function(){var a=this;this.$node.delegate(".media-gallery-back-nav","click",function(b){a.trigger("close")}),this.$detailView=this.$find(".toggle-button.detailview"),this.$gridView=this.$find(".toggle-button.gridview"),this.$detailView.bind("click",function(b){a.setMode("detail")}),this.$gridView.bind("click",function(b){a.setMode("grid")})},setMode:function(a){if(this._view==a)return;a=="grid"?(this.$gridView.addClass("selected"),this.$detailView.removeClass("selected"),this.trigger("gridViewSelected")):(this.$gridView.removeClass("selected"),this.$detailView.addClass("selected"),this.trigger("detailViewSelected")),this._view=a},_render:function(){(new twttr.views.MediaGalleryControls({is_search:this._type==="search",is_usermedia:this._type==="userMedia",screen_name:this.screenName,is_grid_view:this._view==="grid",is_detail_view:this._view==="detail",mode_photos:this._mode==="photos",mode_videos:this._mode==="videos",disable_grid:twttr.decider.isAvailable("disable_gallery_grid"),disable_thumbs:twttr.decider.isAvailable("disable_gallery_thumbs"),back_text:this._isEvent?_("Back to #{{event}}",{event:this._query}):_("Back to search results"),query:this._query})).render(this.$node,"append")}}),a(twttr.components.MediaGalleryControls)})}),provide("components/MediaSlideshow",function(a){using("_","constants").as(function(b,_){twttr.klass("twttr.components.MediaSlideshow").subclassOf(twttr.components.Base).mixin(twttr.mixins.tweetActionable,twttr.mixins.tweetFlagging,twttr.mixins.profilePopupActionable).initializer(function(a){var b=this;a=a||{},this._media=[],this.options=a,this.width=a.width||530,this.height=a.height||530,this.thumbContainerWidth=a.thumbContainerWidth||494,this.thumbHeight=a.thumbHeight||48,this.thumbWidth=a.thumbWidth||48,this.thumbDisplayWidth=a.thumbDisplayWidth||50,this.thumbDisplayHeight=a.thumbDisplayHeight||48,this.type=a.type,this.screenName=a.screenName,this.options.mode=this.options.mode||"photos",this.showFirstOnFail=this.options.showFirstOnFail||!1,this.arrowOutOpacity=twttr.decider.isAvailable("disable_gallery_thumbs")?.6:0,this.isEvent=a.isEvent||!1,this.generateItemHref=a.generateItemHref||$.noop,this.provider=a.provider,this.scribbler=a.scribbler||twttr.Scribbler.clientEvent,this.scribeComponentName=this.options.mode+"_tweet",this.render(),this.registerTweetActionEvents(),this.provider.fetch({count:100,score:!0,mode:this.options.mode,query:this.options.query,is_event:this.isEvent,filter:a.filter,success:function(a){b.addMedia(a),b.addMediaComplete()},error:twttr.bind(this,this.renderNoResults)})}).methods(twttr.EventProvider).methods({render:function(){(new twttr.views.MediaSlideshow).render(this.$node,"append"),this.$thumbnails=this.$find(".media-slideshow-thumbnails"),this.$bigPicture=this.$find(".media-slideshow-picture"),this.$bigPictureWrapper=this.$find(".media-slideshow-pictures"),this.$mediaContainer=this.$find(".media-slideshow-media-container"),this.$prevButton=this.$find(".media-control-button.prev"),this.$nextButton=this.$find(".media-control-button.next"),this.$nextButton=this.$find(".media-control-button.next"),this.$flagcontainer=$('<div class="flag-container"/>'),this.$bigPicture.css({height:this.height,width:this.width}),this._registerEventHandlers()},renderNoResults:function(){this.$node.empty(),(new twttr.views.MediaGalleryNoResults({is_search:this.type==="search",is_usermedia:this.type==="userMedia",query:this.options.query,mode_photos:this.options.mode==="photos",mode_videos:this.options.mode==="videos",screen_name:this.screenName})).render(this.$node,"append"),this.trigger("hideLoading")},addMediaComplete:function(){var a=this;if(this._media.length>1){var b={itemWidth:this.thumbWidth,itemHeight:this.thumbHeight,itemDisplayWidth:this.thumbDisplayWidth,itemDisplayHeight:this.thumbDisplayHeight,width:this.thumbContainerWidth,generateItemHref:this.generateItemHref,noRender:twttr.decider.isAvailable("disable_gallery_thumbs")};this.options.mode=="videos"&&(b.containsVideos=!0),this._thumbnailViewer=new twttr.components.ThumbnailViewer(this._mediaUrls(),b,this._media),this._thumbnailViewer.$node.appendTo(this.$thumbnails),twttr.decider.isAvailable("disable_gallery_thumbs")&&this._thumbnailViewer.$node.hide(),this._thumbnailViewer.bind("select",function(b,c){a.showPicture(a._findMedia(c.url,c.index),c.hasPrev,c.hasNext,c.index)}),this._thumbnailViewer.bind("failedToLoad",function(b,c){a.removeUrl(c)}),this._thumbnailViewer.bind("next prev",function(b,c){a.scribbler.scribe({component:a.options.mode,action:"page"},{cursor_or_page:c})}),this._thumbnailViewer.bind("nextPage prevPage",function(b,c){a.scribbler.scribe({component:a.options.mode+"_thumbnails",action:"page"},{cursor_or_page:c})}),this.selectUrl(this.options.url)}else this._media.length==1?this.showPicture(a._media[0],!1,!1,1):this.renderNoResults()},_registerEventHandlers:function(){var a=this;this.$nextButton.bind("click",twttr.bind(this,this.showNext)),this.$prevButton.bind("click",twttr.bind(this,this.showPrev)),this.$flagcontainer.delegate(".flaggable","click",function(b){a.flagLinkClicked(b,a.tweet)}),this.$nav=this.$find(".media-control-button").css("opacity",this.arrowOutOpacity);var b=Modernizr.csstransitions?"animateWithCss":"animate";this.$bigPictureWrapper.hover(function(){a.fadeTimer&&clearTimeout(a.fadeTimer),a.$nav[b]({opacity:.6},400,"swing")},function(){a.fadeTimer=window.setTimeout(function(){a.$nav[b]({opacity:this.arrowOutOpacity},400,"swing")},2e3)}),this.$nav=this.$find(".media-control-button").css("opacity",this.arrowOutOpacity),this.$bigPictureWrapper.mouseenter(twttr.bind(this,this._attachMouseMove)),this.$bigPictureWrapper.mouseleave(twttr.bind(this,this._detachMouseMove))},_mouseMoveHandler:function(){var a=this;clearTimeout(this.fadeOutTimer),this.fadeOutTimer=setTimeout(twttr.bind(this,this._fadeOutArrows),b.constants.slideshow.fadeOutArrowTimeout);if(this.fadeInTimer)return;this.fadeInTimer=setTimeout(function(){a._fadeInArrows(.6)},b.constants.slideshow.fadeInArrowTimeout)},_attachMouseMove:function(){var a=this;this.$bigPictureWrapper.bind("mousemove",twttr.bind(this,this._mouseMoveHandler)),a.fadeInTimer=setTimeout(function(){a._fadeInArrows(.6)},b.constants.slideshow.fadeInArrowTimeout)},_detachMouseMove:function(){this.$bigPictureWrapper.unbind("mousemove"),this.fadeInTimer&&(clearTimeout(this.fadeInTimer),this.fadeInTimer=undefined),this._fadeOutArrows()},_fadeInArrows:function(a){var c=Modernizr.csstransitions?"animateWithCss":"animate";this.$nav[c]({opacity:a},b.constants.slideshow.fadeAnimationTime,"swing"),clearTimeout(this.fadeInTimer),this.fadeInTimer=undefined},_fadeOutArrows:function(){var a=Modernizr.csstransitions?"animateWithCss":"animate";this.$nav[a]({opacity:this.arrowOutOpacity},b.constants.slideshow.fadeAnimationTime,"swing")},addMedia:function(a){this._media=this._media.concat(a)},_findMedia:function(a,b){var c=this._media[b-1];if(c&&c.url==a)return c;var d=this._mediaUrls(),e=$.inArray(a,d);return e>=0?this._media[e]:!1},_mediaUrls:function(){return twttr.map(this._media,function(a){return a.url})},selectUrl:function(a){a=a||this._mediaUrls()[0];var b=this._thumbnailViewer.selectByUrl(a);b||(this.showFirstOnFail?this._thumbnailViewer.selectByIndex(0):(this._showNotFound(a),this._thumbnailViewer.deselect(),this._thumbnailViewer.animateTo(0),this._updateArrows(!1,!1)))},removeUrl:function(a){for(var b=0;b<this._media.length;b++)if(this._media[b].url===a){this._media.splice(b,1);break}this.currentUrl===a&&(b==0&&this._mediaUrls().length?this._thumbnailViewer.selectByUrl(this._mediaUrls()[0]):this._showNotFound())},_showNotFound:function(a){this._resetMediaContainer(),(new twttr.views.MediaSlideshowNotFound({})).render(this.$mediaContainer,"append"),this.$mediaContainer.addClass("not-found"),this.trigger("hideLoading")},_resetMediaContainer:function(){return this._removeTweet(),this.$flagcontainer.detach(),this.$mediaContainer.css({top:null}).empty()},_updateArrows:function(a,b){a?this.$prevButton.addClass("enabled"):this.$prevButton.removeClass("enabled"),b?this.$nextButton.addClass("enabled"):this.$nextButton.removeClass("enabled")},showPicture:function(a,b,c,d){if(a&&this.currentUrl!=a.url){this.currentUrl=a.url,this.trigger("showSlideshowLoading"),this.$mediaContainer.removeClass("not-found"),this.options.mode=="photos"?this.renderPicture():this.renderVideo();if(this.tweetFlaggable(a.tweet)){this.$flagcontainer.html("<a href='#' class='flaggable'>"+_("Flag this media")+"</a>");var e=this.$flagcontainer.find(".flaggable");a.tweetId&&e.attr("tweet-id",a.tweetId)}}this._renderMedia(a),this._updateArrows(b,c),this.scribbler.scribe({component:this.options.mode+"_slide",action:"impression"},{url:a.url,cursor_or_page:d})},_removeTweet:function(){this.$find(".media-slideshow-tweet").empty().addClass("loading")},_renderMedia:function(a){var b=this;a.tweet&&a.tweet.entities?this._renderTweet(a.tweet,a.url):a.tweetId&&(this.tweetId=a.tweetId,twttr.API.Status.find(a.tweetId,{success:function(c,d){b._renderTweet(c,a.url)},error:function(){b.trigger("hideLoading")}}))},_renderTweet:function(a,b){this.tweet=a,this._removeTweet(),twttr.isT1?(a.attributes.is_slideshow=!0,(new twttr.views.SimpleTweet(a)).render(this.$find(".media-slideshow-tweet"),"append")):(new twttr.views.SlideshowTweet(a)).render(this.$find(".media-slideshow-tweet"),"append"),this.$find(".media-slideshow-tweet").removeClass("loading");var c=this,d=twttr.media.types.Twimg.matchers.twimg,e=twttr.media.types.Twimg.matchers.media;if(b&&(b.match(d)||b.match(e))&&a&&a.entities&&a.entities.media){var f=a.entities.media.length,g=b.split("/").pop().split(".")[0];for(var i=0;i<f;i++){var j=a.entities.media[i];if(j.display_url.indexOf(g)>=0||j.media_url.indexOf(g)>=0){c.$imageDiv.attr("href",j.url);break}}}this.scribbler.scribe({component:this.options.mode+"_tweet",action:"impression"},{url:a.url,item_ids:[a.id]}),this.trigger("hideTweetLoading")},renderVideo:function(){var a=this,c=twttr.media.matchInstance(this.currentUrl);this._resetMediaContainer();if(!c){this._showNotFound(this.currentUrl);return}c.process(function(){c.render(a.$mediaContainer),setTimeout(function(){a.trigger("mediaRendered"),a.trigger("hideMediaLoading"),a._renderAttribution(a.currentUrl)},1)},{maxwidth:b.constants.slideshow.videoMaxWidth})},renderPicture:function(){var a=this,c;this._resetMediaContainer();var d=twttr.filter(this._media,function(b){if(a.currentUrl==b.url)return b});d&&(d=[d[0]]),this.$imageDiv=twttr.images.renderProviderMedia(d,{width:this.width,height:this.height,size:b.constants.imageSizes.large,scalingMode:"fit",divMode:"snap",componentName:this._namespace.split(".").pop()}).bind("failedToResolve failedToLoad",function(b,c){var d=$(this).attr("data-url");twttr.images.scribeImageFailure(a.scribbler,"photos_slide",d),$(this).remove(),a._showNotFound(a.currentUrl)}).bind("loaded",function(){a.trigger("mediaRendered"),a.trigger("hideMediaLoading"),a._renderAttribution(a.currentUrl),a.renderTwimgAttribution()}).attr("target","_blank"),this.$mediaContainer.append(this.$imageDiv)},_renderAttribution:function(a){var b=twttr.media.matchInstance(a);if(b){var c=$("<div class='media-attribution-and-flag'/>"),d=$(b.attribution()).appendTo(c);if(this.tweetFlaggable(this.tweet)){var e=$(twttr.at(b._namespace).flagActionTemplate);this.$flagcontainer.html(e.html());var f=this.$flagcontainer.find(".flaggable");this.tweetId&&f.attr("tweet-id",this.tweetId),this.$flagcontainer.appendTo(c)}c.appendTo(this.$mediaContainer)}},renderTwimgAttribution:function(){var a=this,b=this.currentUrl.match(twttr.media.types.CopiedTwimg.matchers.media);if(b&&b[1]){var c=b[1];twttr.API.Status.find(c,function(b){var c=b.user.screenName,d=new twttr.views.CopiedTwimgAttribution({screen_name:c,time_ago:twttr.helpers.timeAgo(twttr.helpers.parseDateString(b.createdAt),!0)});a.$imageDiv.append(d.html()).find(".attribution-wrapper").css("display","none").fadeIn("fast"),a.$imageDiv.find(".user-profile-link").click(function(){return twttr.router.routeTo(twttr.router.profilePath({screen_name:c})),!1})})}},resizePicture:function(h,a){var b,c;this.$bigPicture.css({height:h,width:a});if(this.options.mode=="photos")twttr.images.resizeImageInDiv(this.$imageDiv,{width:a,height:h,size:"large",scalingMode:"fit",divMode:"snap"}),b=this.$imageDiv.find("img").width(),c=this._offset(h,this.$imageDiv.height());else{var d=this.$mediaContainer.children().first();b=d.width(),c=this._offset(h,d[0].height)}this.$mediaContainer.css({width:b,top:c})},_offset:function(a,b){return Math.max(0,Math.floor((a-b)/2))},showNext:function(){this._thumbnailViewer&&this._thumbnailViewer.next()},showPrev:function(){this._thumbnailViewer&&this._thumbnailViewer.prev()}}),a(twttr.components.MediaSlideshow)})}),provide("components/SearchFacets",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.SearchFacets").subclassOf(twttr.components.Base).initializer(function(a,b){this.query=a,this.shouldShowBlockMessage=!0,this.darkMode=!1;if(twttr.loggedIn&&(twttr.decider.isAvailable("phoenix_facets_dark")||twttr.decider.isAvailable("phoenix_facets"))||!twttr.loggedIn&&twttr.decider.isAvailable("phoenix_facets_logged_out"))twttr.loggedIn&&!twttr.decider.isAvailable("phoenix_facets")&&twttr.decider.isAvailable("phoenix_facets_dark")&&(this.darkMode=!0),this.renderFacets()}).methods({renderFacets:function(){var a=this,b=twttr.Router.getCurrentQueryStringParams().experimentId;if(!this.darkMode){this.facetsImages=new twttr.components.media.facets.Images({query:this.query,expId:b}),this.facetsVideos=new twttr.components.media.facets.Videos({query:this.query,expId:b}),this.registerEventTracker(),this.facetsImages.bind("urlsLoaded",function(b,c){if(!c||c.length==0){a._scribeResults("photos",c);return}a.facetsImages.$node.appendTo(a.$node),a.shouldShowBlockMessage?a.showBlockedMessage():a.facetsImages.render(),a._scribeResults("photos",c)}),this.facetsImages.bind("failed",function(){a.facetsImages.$node.hide(),a._scribeResults("photos")}),this.facetsVideos.bind("urlsLoaded",function(b,c){if(!c||c.length==0){a._scribeResults("videos",c);return}a.facetsVideos.$node.appendTo(a.$node),a.shouldShowBlockMessage?a.showBlockedMessage():a.facetsVideos.render(),a._scribeResults("videos",c)}),this.facetsVideos.bind("failed",function(){a._scribeResults("videos"),a.facetsVideos.$node.hide()});if(twttr.loggedIn)a.shouldShowBlockMessage=!1,a.hideBlockedMessage();else{var c=twttr.media.getViewMediaCookie();c?(a.renderFacetsMedia(),a.shouldShowBlockMessage=!1):(a.shouldShowBlockMessage=!0,a.renderBlockedMessage())}}},renderFacetsMedia:function(){if(this.darkMode)return;this.facetsImages.render(),this.facetsVideos.render()},showBlockedMessage:function(){this.$notDisplayed||this.renderBlockedMessage(),this.$notDisplayed.show()},hideBlockedMessage:function(){this.$notDisplayed&&this.$notDisplayed.hide()},_scribeResults:function(a,b){var c=b&&b.length?"results":"no_results",d=a+"_search_facets";b=b||[],trackClient({section:"dashboard",component:d,action:c},{item_names:b.slice(0,4),item_count:b.length,event_info:a,query:this.query})},registerEventTracker:function(){function e(e,f){e?b=!0:c=!0,d=d||f&&f.length,allLoaded=b&&c,(b||c)&&a.trigger("urlsLoaded",[!!d,!!allLoaded])}var a=this,b=!1,c=!1,d=!1;this.facetsImages.one("urlsLoaded failed",function(a,b){e(!0,b)}),this.facetsVideos.one("urlsLoaded failed",function(a,b){e(!1,b)})},renderBlockedMessage:function(){var a=this;if(this.$notDisplayed||this.darkMode)return;(new twttr.views.FacetsMediaNotDisplayed).render(this.$node),this.$notDisplayed=this.$node.find(".facets-media-not-displayed"),this.$notDisplayed.hide();var b=twttr.bind(this,function(){this.renderFacetsMedia(),this.$notDisplayed.hide(),twttr.loggedIn||twttr.media.setViewMediaCookie()});this.$node.delegate(".display-this-media","click",b)}});a(c)})}),provide("components/FollowerRequestLink",function(a){using("_","components/Base","multiGlobals/more_views").as(function(b,_){var c=twttr.klass("twttr.components.FollowerRequestLink").subclassOf(b.components.Base).initializer(function(){twttr.currentUser&&twttr.currentUser["protected"]&&twttr.currentUser.friends.pending({success:twttr.bind(this,function(a){this.pendingFriendRequests=a,this.renderRequestButton()}),error:function(a){}}),this.noSpacer=!0,this.hasRendered()}).methods({renderRequestButton:function(){if(!this.pendingFriendRequests||this.pendingFriendRequests.length===0){this.destroy();return}var a;this.pendingFriendRequests.length===1?a=_("{{num}} new follower request",{num:this.pendingFriendRequests.length}):a=_("{{num}} new follower requests",{num:this.pendingFriendRequests.length}),(new twttr.views.DashboardFollowerRequestLink({button_label:a,screen_name:twttr.currentUser.screenName})).render(this.$node,"append")}});twttr.isT1&&c.setBaseView(twttr.views.Module),a(c)})}),provide("components/WebPersonalizationSettings",function(a){using("_","components/Base","mixins/userActionable","mixins/profilePopupActionable").as(function(b,_){var c=twttr.klass("twttr.components.WebPersonalizationSettings").subclassOf(b.components.Base).mixin(b.mixins.userActionable,b.mixins.profilePopupActionable).initializer(function(){var a=this;twttr.inEU||twttr.doNotTrack?(a._render({in_eu:twttr.inEU,do_not_track:!0}),a.trigger("disallow")):twttr.loggedIn?(a._hasAllowed=!1,a._render({loading:!0}),twttr.currentUser.personalizationSettings({success:function(b){!b.cookie_personalization_prompt_displayed||!b.use_cookie_personalization?a._render({show_results:!1}):(a._render({show_results:!0,results_loading:!0}),a._displayResults())},error:function(){twttr.showError(_("We can&#8217;t show you tailored suggestions at this time. Please try again later.")),a.trigger("disallow")}})):a._render({show_results:!1}),this.registerUserActionEvents()}).methods({_render:function(a){a=a||{},a.users&&(a.results=new twttr.views.WebPersonalizationResults(a.users)),(new twttr.views.WebPersonalizationSettings(a)).render(this.$node.empty())},_allow:function(){var a=this;a._render({show_results:!0,results_loading:!0}),a._hasAllowed=!0,this._updateSettings(!0,function(b){b?(twttr.showError(_("We&#8217;re not able to set your preference at this time. Please try again later.")),a._render({show_results:!1})):a._displayResults()})},_disallow:function(){var a=this;twttr.loggedIn?twttr.showError(_("Thanks. We&#8217;ve set your preference. This will go into effect on other browsers once you log into Twitter on that browser.")):twttr.showMessage(_("Thanks. We&#8217;ve set your preference.")),a._render({show_results:!1}),this._updateSettings(!1,function(b){b?(twttr.showError(_("We&#8217;re not able to set your preference at this time. Please try again later.")),a._render({show_results:a._hasAllowed,results_loading:!a._users,users:a._users})):a.trigger("disallow")})},_displayResults:function(){var a=this;this._render({show_results:!0,results_loading:!0}),twttr.API.User.recommendedUsers2({personalized:!0,force_bq:!0,limit:60,success:function(b,c){var d=b.map(function(a){return a.user});a._users=d,a._render({users:d,show_results:!0}),trackClient({component:"user_recommendations",element:"initial",action:"results"},{item_count:d.length()||0}),d.length()||trackClient({component:"user_recommendations",element:"initial",action:"no_results"},{item_count:0})},error:function(){twttr.showError(_("We can&#8217;t show you tailored suggestions at this time. Please try again later."))}})},_updateSettings:function(a,b){twttr.loggedIn?twttr.currentUser.updatePersonalizationSettings({use_cookie_personalization:a,cookie_personalization_prompt_displayed:!0},{error:function(){b("error :(")},complete:function(){b()}}):a?b():$.ajax({type:"POST",dataType:"json",url:"/account/turn_off_cookie_personalization.json",data:{authenticity_token:twttr.API.getConfig().postAuthenticityToken},complete:function(){b()},error:function(){b("error :(")}})}}).click({".js-web-personalization-allow":function(a,b){this._allow(),trackClient({element:"allow",action:"click"})},".js-web-personalization-disallow":function(a,b){this._disallow(),trackClient({element:"disallow",action:"click"})},".js-web-personalization-turnoff":function(a,b){this._disallow(),trackClient({element:"turnoff",action:"click"})},".js-web-personalization-signup .signup-btn":function(a,b){trackClient({section:"signup_callout",component:"form",action:"signup_click"})}});a(c)})}),provide("photo/turkey",function(a){using().as(function(b){twttr.provide("twttr.turkey",{tweetBoxId:1,imageMaxDim:2048,turkeyCallbacks:{},swfCallbacks:{},swfErrorCallbacks:{},swfPath:"/phoenix/flash/PhotoHelper.swf",swfPreloaded:!1,errorTypes:{tooLarge:"tooLarge",notImage:"notImage",ioError:"ioError",maxFiles:"maxFiles",dupe:"duplicate"},getTweetBoxId:function(){return twttr.turkey.preloadSwf(),"tweetbox_"+this.tweetBoxId++},getFileName:function(a){if(a.indexOf("/")==-1&&a.indexOf("\\")==-1)return a;var b=a.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/);return b[2]},validatePhoto:function(a){return/(.*)\.(jpg|jpeg|png|gif)/i.test(a)},getThumbnailOffsets:function(h,a,b){var c={};if(a==h)return{height:b,width:b,left:0,top:0};if(h<b||a<b)h<b&&a<b?(c.top=(b-h)/2,c.left=(b-a)/2):a>h?c.top=(b-h)/2:c.left=(b-a)/2;else if(a>h){var d=b/h*a;c={height:b,width:d,left:-(d-b)/2,top:0}}else if(h>a){var e=b/a*h;c={height:e,width:b,top:-(e-b)/2,left:0}}return c},hasFileReader:function(){try{return twttr.is.object(new FileReader)}catch(a){return!1}},resizeImage:function(a,b){var c=new FileReader;c.onerror=function(){b(!1)},c.onload=function(a){var c=new Image,d=document.createElement("canvas"),e=d.getContext("2d");c.onload=function(){if(c.width<twttr.turkey.imageMaxDim&&c.height<twttr.turkey.imageMaxDim){b(a.target.result.split(";base64,")[1]);return}var f,h;c.width>c.height?(f=twttr.turkey.imageMaxDim,h=c.height/c.width*twttr.turkey.imageMaxDim):(h=twttr.turkey.imageMaxDim,f=c.width/c.height*twttr.turkey.imageMaxDim),d.width=f,d.height=h,e.drawImage(c,0,0,f,h);var g=d.toDataURL("image/jpeg");b(g.split("data:image/jpeg;base64,")[1])},c.onerror=function(){b(!1)},c.src=a.target.result},c.readAsDataURL(a)},hasFlash:function(){try{return $.flash.available&&$.flash.hasVersion(10)}catch(a){return!1}},shouldUseFlash:function(){return!twttr.turkey.hasFileReader()&&twttr.turkey.hasFlash()&&twttr.decider.isAvailable("phoenix_turkey_flash")},tweetboxMode:function(){return twttr.turkey.hasFileReader()?"html5":twttr.turkey.shouldUseFlash()?"flash":"html4"},preloadSwf:function(){if(twttr.turkey.swfPreloaded||!twttr.turkey.shouldUseFlash())return;$node=twttr.turkey.loadSwf($("#flash-object-container"),0),setTimeout(function(){$node&&$node.remove()},1e3)},loadSwf:function(a,b){return a.flash({swf:twttr.turkey.swfPath,height:25,width:28,wmode:"transparent",AllowScriptAccess:"sameDomain",flashvars:{tweetBoxId:b}}),a.find("object")},shouldShowTurkeyPrompt:function(){return twttr.promptbird.getPromptByFormat(["modal"])},dismissShowTurkeyPrompt:function(a){var b={prompt_id:a},c={success:$.noop};twttr.API.Promptbird.dismissPrompt(b,c),delete twttr.promptbird.cache},showFirstTimeTurkey:function(){if(twttr.loggedIn){var a=this;using("boot/bootstrap_data",function(b){var c=a.shouldShowTurkeyPrompt();if(c&&c.prompt.format==="modal"&&c.prompt.template_name=="first_time_turkey"){a.dismissShowTurkeyPrompt(c.prompt.prompt_id);var d=600,e=new twttr.widget.Dialog({view:"FirstTimeTurkey",modal:!0,draggable:!1,css:{width:530},positioning:{top:twttr.$win.height()<=d?20:150}});e.$container.find(".button.ok-thanks").bind("click",function(a){a.preventDefault(),a.stopPropagation(),e.destroy()}),e.open()}})}}}),a(twttr.turkey)})}),provide("photo/photo_thumbnails",function(a){using("_").as(function(b,_){twttr.klass("twttr.turkey.PhotoThumbnails").subclassOf(twttr.components.Base).deciderKey("turkey").initializer(function(a,b,c,d){this.FILE_SIZE_LIMIT=3145728,this.TIMEOUT_BY_BYTES=10240,this.defaultTimeoutDelay=12e4,this.timeoutDelay=this.defaultTimeoutDelay,this.maxFiles=1,this.useIframe=!1,this.enabled=!0,this.files=[],this.$selectedFiles=b,this.$camera=c,this.$swf=this.$camera.find(".swf"),this.tweetBoxId=d,this.editor=a,this.$thumbsWrapper=$("<div/>").addClass("twitter-media-thumbs"),this.$thumbsWrapper.appendTo(this.editor.$container),this.thumbnailsMessage=_("Images will appear as links"),this.thumbnailMessage=_("Image will appear as a link"),this.$thumbnailMessage=$("<div/>").addClass("media-thumbnails-message"),this.$thumbnailMessage.appendTo(this.$thumbsWrapper),this.maxPhotosMessage=_("Maximum number of images reached."),this.addPhotoMessage=_("Add an image"),this.hasFileReader=twttr.turkey.hasFileReader(),this.shouldUseFlash=twttr.turkey.shouldUseFlash(),this.html4Mode=!this.hasFileReader&&!this.shouldUseFlash,this.$editorTextarea=this.editor.$container.find("textarea"),this.textareaPaddingBottom=this.$editorTextarea.css("padding-bottom"),this.createThumbnails(),this.createTipsy()}).methods(twttr.EventProvider).methods({animateShow:function(a){var b=this;this.html4Mode?(this.$editorTextarea.css("padding-bottom",a),this.editor.$container.addClass("has-thumbnails"),this.$camera.addClass("has-turkeys"),this.$thumbsWrapper.show()):(this.$camera.addClass("has-turkeys"),this.$editorTextarea.animate({paddingBottom:a},300,"linear",function(){b.editor.$container.addClass("has-thumbnails"),b.$thumbsWrapper.show()}))},animateHide:function(a,b){var c=this;this.editor.$container.removeClass("has-thumbnails").addClass("closing"),!this.html4Mode&&!b?(this.$camera.removeClass("has-turkeys"),this.$editorTextarea.animate({paddingBottom:a},200,"linear",function(){c.editor.$container.removeClass("has-thumbnails").removeClass("closing")})):(this.$editorTextarea.css("padding-bottom",a),this.$camera.removeClass("has-turkeys")),this.$thumbsWrapper.hide()},updateEmptyFeedback:function(){this.inst.$feedback.text()==""&&this.updateFeedback()},tweet:function(a,b){var c=this,d={};this.useIframe&&(d.iframe_callback="window.top.twttr.turkey.turkeyCallbacks."+this.tweetBoxId);switch(a){case"update":d.status=b[0],$.extend(d,b[1]);break;case"reply":d.status=b[1],d.in_reply_to_status_id=b[0],$.extend(d,b[2])}this.useIframe?this.tweetIframe(d):this.tweetAjax(d)},tweetAjax:function(a){var b=this;a["media_data[]"]=this.files[0].input.val(),a.timeout=$.noop;var c=a.error;a.error=function(a){c(a),b.scribeEvent("failure",{message:"serverError"})};var d=a.success;a.success=function(a){d(a,twttr.turkey.tweetboxMode())},twttr.API.Status.updateWithMedia(a.status,a)},tweetIframe:function(a){var b=this,c=setTimeout(function(){twttr.turkey.turkeyCallbacks[b.tweetBoxId]=$.noop,a.error({error:!0,response:{error:"Tweeting a photo timed out."}}),a.complete(),b.scribeEvent("failure",{message:"timeout",duration_ms:b.timeoutDelay})},this.timeoutDelay);twttr.turkey.turkeyCallbacks[this.tweetBoxId]=function(d){if(d.error){var e={error:!0,status:500,response:d,reason:"An error occured"};a.error(e),a.complete(),clearTimeout(c),b.scribeEvent("failure",{message:"serverError"})}else a.success(d,twttr.turkey.tweetboxMode()),a.complete(),clearTimeout(c)},this._submitTweetOptions(a)},_submitTweetOptions:function(a){this.resetForm();for(var b in a)!twttr.is.fn(a[b])&&!twttr.is.object(a[b])&&$('<input type="hidden" reset="true"/>').attr("name",b).attr("value",a[b]).appendTo(this.$selectedFiles);this.$selectedFiles.submit()},resetForm:function(){this.$selectedFiles.find("input[reset='true']").remove()},enable:function(){this.files.length>0&&this.animateShow(this.getPadding(this.files.length)),this.$camera.show(),this.enabled=!0},disable:function(){this.files.length>0&&this.animateHide(this.getPadding(0)),this.$camera.hide(),this.enabled=!1},hasItems:function(){return this.files.length>0&&this.enabled},count:function(){return this.files.length},hasDuplicate:function(a){for(var b=0;b<this.files.length;b++)if(this.files[b].input.value==a.value)return!0;return!1},getPadding:function(a){return a===0?this.textareaPaddingBottom:this.html4Mode?12+25*a+2*(a-1):60},checkFiles:function(){var a=this.files.length;a>=this.maxFiles?(this.$camera.addClass("max-turkeys"),this.editor.trigger("heightChange"),this.destroySwf()):(this.$camera.removeClass("max-turkeys"),this.editor.trigger("heightChange"),this.createSwf());var b=this.getPadding(a);a>0?(this.animateShow(b),a==1?this.$thumbnailMessage.text(this.thumbnailMessage):this.$thumbnailMessage.text(this.thumbnailsMessage)):this.animateHide(b),this.trigger("photoChanged")},removeAllFiles:function(){$.each(this.files,function(a,b){$(b.input).remove(),b.item.remove()}),this.files=[]},removeFile:function(a){var b=this;$(a.input).remove(),a.item.remove();var c=$.inArray(a,b.files);c!=-1&&b.files.splice(c,1),b.checkFiles(),this.scribeEvent("remove")},hasMaxFiles:function(){return this.files.length>=this.maxFiles},addFileError:function(a,b){this.killTipsy();if(a==twttr.turkey.errorTypes.tooLarge)twttr.showError(_("The file you selected is greater than the 3MB limit."));else if(a==twttr.turkey.errorTypes.notImage||a==twttr.turkey.errorTypes.ioError)twttr.showError(_("You did not select an image"));else if(a==twttr.turkey.errorTypes.maxFiles){var c;this.maxFiles===1?c=_("Can only tweet one image at a time."):c=_("Cannot tweet more than {{numberOfPhotos}} images at a time.",{numberOfPhotos:this.maxFiles}),twttr.showError(c)}else a==twttr.turkey.errorTypes.dupe&&twttr.showError(_("You already selected this file"));this.scribeEvent("failure",{message:a})},killTipsy:function(){this.$camera.data("tipsy")&&this.$camera.data("tipsy").$tip&&this.$camera.data("tipsy").$tip.hide()},scribeEvent:function(a,b){var c=b?b:{};c.context="photo_uploader",c.event_info=twttr.turkey.tweetboxMode(),trackClient({component:"tweetbox",action:a},c)},createThumbnailImage:function(a,b,c){var d=this,e=$("<img/>").attr("alt",a);return e.appendTo(c.item),e.bind("load",function(){var a=twttr.turkey.getThumbnailOffsets(e[0].height,e[0].width,55);e.css(a),c.item.find(".upload-file-close").bind("click",function(a){a.stopPropagation(),a.preventDefault(),d.removeFile(c)}),c.item[Modernizr.csstransitions?"animateWithCss":"animate"]({opacity:100},200,Modernizr.csstransitions?"default":"linear"),d.checkFiles()}),e.attr("src",b),e},createThumbnail:function(){var a;return this.html4Mode?a=$('<div class="upload-file upload-filename">        <span class="filename"></span><a href="#" class="thumbnail-close upload-file-close"><span></span></a>        </div>'):a=$('<div class="upload-file upload-thumbnail">        <a href="#" class="thumbnail-close upload-file-close"><span></span></a>        </div>').css({opacity:0}),a.appendTo(this.$thumbs),a},addFileItem:function(a,b){var c={input:a,item:b};return this.files.push(c),this.$selectedFiles.append(a),this.resetAddPhoto(),this.scribeEvent("add"),this.checkFiles(),c},addFileData:function(a,b,c){this.setTimeoutBySize(a.length);var d=$('<input type="hidden" maxlength="'+this.FILE_SIZE_LIMIT+'" name="media_data[]"/>');d.val(a);var e=this.createThumbnail(),f=this.addFileItem(d,e),g=this.createThumbnailImage(c,"data:image/jpeg;base64,"+b,f);this.killTipsy()},addFileInput:function(a){var b=this,c=this.createThumbnail(),d=this.addFileItem(a,c);if(this.hasFileReader&&a.files){var e=a.files[0];this.setTimeoutBySize(e.size);var f=new FileReader;f.onloadend=function(c){var e=c.target.result,f=b.createThumbnailImage(twttr.turkey.getFileName(a.value),e,d)},f.readAsDataURL(e)}else twttr.helpers.ellipsify(c.find(".filename").text(twttr.turkey.getFileName(a.value))),c.find(".upload-file-close").bind("click",function(a){a.stopPropagation(),a.preventDefault(),b.removeFile(d)}),this.inst&&this.inst.setFeedback(this.tweetboxFeedback)},addFile:function(a){var b=this;if(this.hasMaxFiles()){this.addFileError(twttr.turkey.errorTypes.maxFiles);return}if(!twttr.turkey.validatePhoto(a.value)){this.addFileError(twttr.turkey.errorTypes.notImage);return}if(this.hasDuplicate(a)){this.addFileError(twttr.turkey.errorTypes.dupe);return}var c;a.files&&a.files[0]&&(c=a.files[0]);var d=function(c){c?b.addFileData(c,c,twttr.turkey.getFileName(a.value)):b.addFileError(twttr.turkey.errorTypes.notImage)};if(c)if(!twttr.decider.isAvailable("phoenix_turkey_html5_resize")||!this.hasFileReader){if(!this.checkFileSize(c)){this.addFileError(twttr.turkey.errorTypes.tooLarge);return}this.useIframe=!0,this.addFileInput(a)}else twttr.turkey.resizeImage(c,d);else this.useIframe=!0,this.addFileInput(a);this.killTipsy()},checkFileSize:function(a){return!twttr.is.def(a.size)||a.size<=this.FILE_SIZE_LIMIT},getTimeoutBySize:function(a){var b=Math.ceil(a/this.TIMEOUT_BY_BYTES*1e3);return b<this.defaultTimeoutDelay?this.defaultTimeoutDelay:b},setTimeoutBySize:function(a){this.timeoutDelay=this.getTimeoutBySize(a)},resetPhotoPost:function(){this.useIframe=!1,this.$selectedFiles.empty();var a=twttr.API.getConfig().postAuthenticityToken;$('<input type="hidden" name="post_authenticity_token" value="'+a+'"/>"').appendTo(this.$selectedFiles),$('<input type="hidden" name="include_entities" value="true"/>').appendTo(this.$selectedFiles)},reset:function(){this.removeAllFiles(),this.$camera.removeClass("max-turkeys"),this.editor.trigger("heightChange"),this.animateHide(this.getPadding(0),!0),this.timeoutDelay=this.defaultTimeoutDelay},createThumbnails:function(){var a=this;this.$thumbs=$("<div class='media-thumbnails' />"),this.$thumbs.prependTo(this.$thumbsWrapper),this.html4Mode&&this.editor.$container.addClass("html4"),this.resetPhotoPost(),this.resetAddPhoto(),this.createSwf()},destroySwf:function(){if(!this.shouldUseFlash)return;this.$swf.empty()},createSwf:function(){if(!this.shouldUseFlash)return;var a=this;setTimeout(function(){twttr.turkey.swfErrorCallbacks[a.tweetBoxId]=twttr.bind(a,a.addFileError),twttr.turkey.swfCallbacks[a.tweetBoxId]=twttr.bind(a,a.addFileData),twttr.turkey.loadSwf(a.$swf,a.tweetBoxId)},500)},createTipsy:function(){var a=this;this.$camera.tipsy({gravity:"nw",fade:!0,opacity:.9,title:twttr.bind(this,this.getTipsyTitle)}),this.$camera.click(function(){setTimeout(function(){a.$camera.data("tipsy")&&a.$camera.data("tipsy").hide()},750)})},getTipsyTitle:function(){return this.files.length>=this.maxFiles?"":this.addPhotoMessage},resetAddPhoto:function(){var a=this;this.$camera.find('input[type="file"]').remove();var b=$('<input type="file" class="turkey-file-input" name="media[]"></input>');this.$camera.append(b),b.bind("change",function(b){a.addFile(b.target)}),this.$camera.bind("click",function(){a.scribeEvent("click")})},remove:function(){this.$thumbsWrapper.remove()}}),a(twttr.turkey.PhotoThumbnails)})}),provide("images",function(a){using().as(function(b){twttr.images={renderProviderMedia:function(a,b){var a=a.concat(),c=twttr.images.generateDivs($.map(a,function(a){return a.url}),b);this.bindLoadImageHandler(c,b.componentName);var d=function(a,b){setTimeout(function(){a.trigger("failedToResolve",[b])},0)};return $.each(a,function(a,e){var f=$(c[a]);e.mediaType.getImageURL(b.size,function(a){a?twttr.images.scaleImageIntoDiv(f,a,b):d(f,"getImageUrl did not return a resolvedURL")},b.dimension)}),c},renderMediaUrls:function(a,b,c){var d=twttr.images.generateDivs(a,b);this.bindLoadImageHandler(d,b.componentName);var e={success:function(a,c){twttr.images.scaleImageIntoDiv(a,c,b)},error:function(a,b){setTimeout(function(){a.trigger("failedToResolve",[b])},0)}};return twttr.images.resolveDataUrls(d,b,e,c),d},animateImageFadeIn:function(a,b,c){var d=Modernizr.csstransitions?"animateWithCss":"animate";a.css("opacity",0),a[d]({opacity:c||1},b||500,"swing")},renderMediaUrl:function(a,b,c){return this.renderMediaUrls([a],b,c)},generateDivs:function(a,b){var c=$(),d=b.thumbnailViewClass||twttr.views.Thumbnail;return $.each(a,function(a,e){var f=$((new d({url:e,width:b.width,height:b.height,lineHeight:b.height+"px"})).html());c=c.add(f)}),c},bindLoadImageHandler:function(a,b){var c=this;a.bind("loadImage",function(){var a=$(this);if(a.data("loaded")===!0)return;var d=a.data("resolvedUrl"),e=a.data("childImg");if(d&&e){if(twttr.decider.isAvailable("profile_image_latency")){var f=twttr.media.matchInstance(a.data("url")),g=new twttr.Profiler(c.createProfilingDescription(f.partnerName,d,b));$(e[0]).load(function(){g.done()})}e[0].src=d,a.data("loaded",!0)}else a.data("loadWhenResolved",!0)})},createProfilingDescription:function(a,b,c){return c=c?c:"",[a.toLowerCase(),JSON.stringify(b),c.toLowerCase()].join(".")},resolveDataUrls:function(a,b,c,d){a.each(function(a,e){var f=$(e),g=f.attr("data-url")||e.href;twttr.media.resolveImageUrl(g,b.size,{success:function(a){c.success&&c.success(f,a)},error:function(a){c.error&&c.error(f,a)},tweet:d,filter:b.filter},b.dimension)})},scaleImageIntoDiv:function(a,b,c){b=b.replace(/([^:])\/\//g,"$1/");var d=$("<img/>").addClass("scaled-image");d.bind("load",function(){var b=twttr.images.calculateScaleDimensions({containerWidth:c.width,containerHeight:c.height,itemWidth:this.width,itemHeight:this.height,scalingMode:c.scalingMode});d.attr({origHeight:this.height,origWidth:this.width}),c.divMode==="snap"?a.css(b).css("line-height",b.height+"px"):(d.css(b),d.css({top:Math.floor(c.height/2-b.height/2),left:Math.floor(c.width/2-b.width/2)})),setTimeout(function(){d.appendTo(a.find("div.thumbnail-wrapper")),twttr.images.addPrivacyCover(d),a.trigger("loaded")},0)}).bind("error",function(){a.trigger("failedToLoad")}),a.data("resolvedUrl",b).data("childImg",d),(!c.delayLoading||a.data("loadWhenResolved"))&&a.trigger("loadImage")},resizeImageInDiv:function(a,b){if(!a)return;var c=a.find("img.scaled-image");if(c.length==0)return;var d=twttr.images.calculateScaleDimensions({containerWidth:b.width,containerHeight:b.height,itemWidth:parseInt(c.attr("origWidth"),10),itemHeight:parseInt(c.attr("origHeight"),10),scalingMode:b.scalingMode});c.attr(d).trigger("resize"),b.divMode==="snap"?a.css(d).css("line-height",d.height+"px"):c.css({top:Math.floor(b.height/2-d.height/2),left:Math.floor(b.width/2-d.width/2)})},calculateScaleDimensions:function(a){function j(){return{width:e,height:d}}function k(){return{width:c,height:d/g}}function l(){return{width:e/i,height:b}}var b=a.containerHeight,c=a.containerWidth,d=a.itemHeight,e=a.itemWidth,f=a.scalingMode,g=e/c,i=d/b;switch(f){case"fit":return g<1&&i<1?j():g>i?k():l();case"trim":return g<1||i<1?j():g>i?l():k();default:return{width:c,height:b}}},addPrivacyCover:function(a,b){if(a.length<=0||!twttr.decider.isAvailable("prevent_right_click_on_images"))return;var c=function(){var b=a[0],d=d||a.parent();d.find(".cover").remove(),d.addClass("has-cover").height(b.height).width(b.width),d.closest(".media-instance-container").width(b.width),$("<div/>",{"class":"cover",height:b.height,width:b.width}).appendTo(d),a.bind("resize",c)},d=0,e=function(){a[0].complete===!0?setTimeout(c,0):(a.bind("load",function(){setTimeout(c,0)}),d<10&&setTimeout(e,500),d++)};e()},SCRIBABLE_PROVIDERS:["dailybooth","flickr","instagram","lockerz","photobucket","twimg","twitpic","yfrog","youtube"],scribeImageFailure:function(a,b,c){if(!twttr.decider.isAvailable("scribe_image_failures"))return;var d=twttr.media.match(c);if(d&&d.partnerName){var e=d.partnerName.toLowerCase();$.inArray(e,this.SCRIBABLE_PROVIDERS)&&a.scribe({component:b,action:"third_party_error"},{url:c,event_info:e})}}},a(twttr.images)})}),provide("components/ContactImportLauncher",function(a){using("externalOauthPopup").as(function(b){twttr.klass("twttr.components.ContactImportLauncher").subclassOf(twttr.components.Base).initializer(function(a){var b=this;this.bind("addedToPage",function(){if(!twttr.decider.isAvailable("contact_import"))return;twttr.API.AddressBook.contactsServices({success:function(c){if(!c||!c.length){b.trigger("notRendered","no_items");return}(new twttr.views.DashboardContactImport({services:c,compact:a})).render(b.$node,"append"),b.$node.delegate(".service-link","click",function(a){b.launchService($(this))}),b.trigger("servicesLoaded")},error:function(){b.trigger("notRendered","darkmoded")}})})}).methods({launchService:function(a){var c=a.attr("data-url"),d=a.attr("data-width"),e=a.attr("data-height");if(c){a.attr("data-popup")=="true"?b.externalOauthPopup({url:c,width:d,height:e,callbackUrl:twttr.router.whoToFollowImportMatchesPath()}):window.open(c,"_blank").focus();var f=a.find("strong.service-name").attr("data-service-id");trackClient({section:"dashboard",component:"contact_import_launcher",action:"launch_service"},{event_info:f,context:"import"})}}}),a(twttr.components.ContactImportLauncher)})}),provide("streams/ListStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.ListStream",function(a,b){this._cursor=-1,twttr.streams.Stream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent,twttr.loggedIn&&!twttr.isT1&&this._registerUpdateStreamEvent(twttr.API.List,"follow unfollow",function(a,b){return b.sync("following",a.type==="follow"),b})}).subclassOf(twttr.streams.Stream).methods({itemViewClass:"StreamList",streamItemType:"list",streamItemId:function(a){return a.uri},rerenderItem:function(a,b){var c=this.selectedItem(a);c.length===0&&(c=this.$find("div.js-list[data-list-id='"+a+"']").closest(".js-stream-item")),c.replaceWith(this._renderItemHtml(b))},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("list_streams")||this.constructor._deciderKey&&!twttr.decider.isAvailable(this.constructor._deciderKey)){a(this,twttr.streams.DECIDER);return}twttr.API.User.find(this.screenName)[this.API_METHOD]({cursor:this._cursor,success:function(c,d){b._cursor=d.response.next_cursor,b.push(c.array),a(b,twttr.streams.SUCCESS),b._cursor||b.reachedTheEnd()},error:function(c){c.status===502?a(b,twttr.streams.WHALE):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}})},_scribeResults:function(a,b,c){this._scribeEmptyResults(a,b,c);if(b.length){var d=twttr.map(b,function(a){return a.fullName});this.scribbler.scribe({component:"stream",action:"results"},{item_names:d,item_count:d.length,event_value:d.length,referring_event:a})}}});a(c)})}),provide("streams/OwnListsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.OwnLists",function(a,b){twttr.streams.ListStream.apply(this,arguments),this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"lists",_setTitle:function(a){this.stream_user_is_current_user()?a(_("Your lists")):a(_("{{username}}'s lists",{username:this.screenName}))},_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You haven't created any lists yet."):_("@{{screen_name}} hasn't created any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"create",b),this._registerRemoveFromStreamEvent(twttr.API.List,"delete",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}).statics({_deciderKey:"list_stream_own_lists"});a(c)})}),provide("streams/SubscriptionsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Subscriptions",function(a,b){twttr.streams.ListStream.apply(this,arguments),this.scribbler=twttr.Scribbler.clientEvent,this._registerEvents(a)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"subscriptions",_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't following any lists yet."):_("@{{screen_name}} isn't following any lists yet.",{screen_name:this.screenName})},_registerEvents:function(a){if(twttr.loggedIn){var b=function(b,c){return twttr.helpers.isCurrentUser(a.screenName)?c:null};this._registerAddToStreamEvent(twttr.API.List,"follow",b),this._registerRemoveFromStreamEvent(twttr.API.List,"unfollow",b,"uri"),this._registerUpdateStreamEvent(twttr.API.List,"update",b)}}}).statics({_deciderKey:"list_stream_subscriptions"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!1))},_setHeaderButton:function(a,b){a(new twttr.views.CreateListButton)}}):c.methods({_setTitle:function(a){a(_("Lists {{username}} follows",{username:this.screenName}))}}),a(c)})}),provide("streams/MembershipsStream",function(a){using("_").as(function(b,_){var c=twttr.stream("twttr.streams.Memberships",function(a,b){twttr.streams.ListStream.apply(this,arguments)}).subclassOf(twttr.streams.ListStream).methods({API_METHOD:"memberships",_getEmptyStreamHtml:function(){return this.stream_user_is_current_user()?_("You aren't listed yet."):_("@{{screen_name}} isn't listed yet.",{screen_name:this.screenName})}}).statics({_deciderKey:"list_stream_memberships"});twttr.isT1?c.methods({_setTitle:function(a){a(_("Lists"))},_setViewToggler:function(a,b){a(new twttr.views.ListsStreamViewToggler(!0))},_setHeaderButton:function(a,b){twttr.helpers.isCurrentUser(b.screenName)&&a(new twttr.views.CreateListButton)}}):c.methods({_setTitle:function(a){a(_("Lists following {{username}}",{username:this.screenName}))}}),a(c)})}),provide("streams/MembershipsStreamUser",function(a){using("_","streams/MembershipsStream").as(function(b,_){var c=twttr.stream("twttr.streams.MembershipsUser",function(a,b){twttr.streams.Memberships.apply(this,arguments)}).subclassOf(twttr.streams.Memberships).methods({_setViewToggler:function(a,b){a(new twttr.views.ProfileListsStreamViewToggler(!1,{screen_name:b.screenName}))}});a(c)})}),provide("multiGlobals/trackSession",function(a){var b={};b._maxLength=1e3,b._cookieName="session_buffer",b._defaultJson="[]",b._getStorage=function(){var a=$.cookie(b._cookieName)||b._defaultJson,c;try{c=JSON.parse(a)}catch(d){c=JSON.parse(b._defaultJson)}return c},b._setStorage=function(a){var c=JSON.stringify(a);if(c.length>b._maxLength){var d=Math.floor(a.length/2);a.splice(d,a.length),c=JSON.stringify(a)}$.cookie(b._cookieName,c)},b._setSession=function(a){var c=b._getStorage();c=$.grep(c,function(b){return a.key!==b.key}),c.unshift(a),b._setStorage(c)},b._extractSessions=function(a){var c=b._getStorage(),d=[];return c=$.grep(c,function(b){return $.inArray(b.key,a)>-1?(d.unshift(b),!1):!0}),b._setStorage(c),d},b.start=function(a,c){c=c||{},b._setSession({key:a,data:c});var d={component:a,action:"session_start"};trackClient(d,c)},b.stop=function(a,c){"string"==typeof a&&(a=[a]);var d=b._extractSessions(a);$.each(d,function(a,b){var d={component:b.key,action:"session_stop"};trackClient(d,b.data),c&&c(b)})},window.startTrackSession=b.start,window.stopTrackSession=b.stop,a(b)}),provide("streams/SuggestionCategoriesStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoriesStreamT1":"","mixins/discoveryHelper").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoriesStream",function(a,b){a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.Stream.apply(this,arguments),this.$node.addClass("suggestion-categories");var c=this;this.$node.delegate("div[data-item-type=suggestion_category]","click",function(a){var b=$(this).attr("data-item-id"),d={};return d[b]={item_position:$("div.js-stream-manager-container div.js-stream-item").index($(a.target).closest(".js-stream-item"))},b&&(trackClient({component:"suggestion_category",action:"click"},{step:"interests",query:b,item_details:d}),c.routePageTo(c.params.pathRoot,"InterestsCategory",{category:b})),!1})}).subclassOf(twttr.streams.Stream).statics({cacheCategories:function(a){this.CATEGORIES=a,this.CATEGORY_MAP=this.buildCategoryMap(a)},buildCategoryMap:function(a){return a.reduce({},function(a,b){return a[b.slug]=b,a})},filterTopTweetsCategories:function(a){var b=this.buildCategoryMap(a);return a.filter(function(a){if(a.slug.match(/^(.+)[_-]top-tweets$/i)){var c=b[RegExp.$1];return c&&(c.topTweetsCategory=a),!1}return!0})}}).methods({itemViewClass:"StreamSuggestionCategory",streamItemType:"suggestion_category",sampleSize:"",streamItemId:function(a){return a.slug},afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},addTipsies:function(){},_fetchItems:function(a){var b=this;if(!twttr.decider.isAvailable("suggestion_categories_streams")){a(this,twttr.streams.DECIDER);return}var c={sample_size:this.sampleSize,samples:!0,success:function(c){c=b.constructor.filterTopTweetsCategories(c),b.constructor.cacheCategories(c);var d=c.map(function(a){var c,d;return a.topTweetsCategory&&a.topTweetsCategory.sample&&(d=a.topTweetsCategory.sample.shift())&&(c=d.id),a.clone({category_link:b.pagePathFor(b.params.pathRoot,"InterestsCategory",{category:a.slug}),category_top_tweets_user_id:c,category_top_tweets_is_current_user:!!twttr.currentUser&&twttr.currentUser.id==c,following_category_top_tweets:a.topTweetsCategory?a.topTweetsCategory.followingTopTweets:null})});b.push(d.array),a(b,twttr.streams.SUCCESS),b.addTipsies(),b.reachedTheEnd();var e=c.map(function(a,b){return a.name});b.scribbler.scribe({component:"stream",action:"results"},{item_names:e,item_count:e.length()})},error:function(){a(b,twttr.streams.ERROR)}};b.defaultOpts&&(c=twttr.merge(b.defaultOpts,c)),b.params.lang&&(c.lang=b.params.lang),b.params.country&&(c.country=b.params.country),b.params.city&&(c.city=b.params.city),c.top_tweets=!0,twttr.API.SuggestionCategory.getAll(c)},_setTitle:function(a){this.params.title!==undefined?a(this.params.title):a(_("Select the topics you are interested in. Find a few people you want to hear from, then follow them."))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(this.constructor.CATEGORIES,this.params.pathRoot)},_getStreamEndComponent:function(){return this._getHeaderComponent()}}).mixin(twttr.mixins.discoveryHelper);c&&d.mixin(c),a(d)})}),provide("streams/SuggestionCategoryMembersStream",function(a){using("_",twttr.isT1?"mixins/SuggestionCategoryMembersStreamT1":"").as(function(b,_,c){var d=twttr.klass("twttr.streams.SuggestionCategoryMembersStream",function(a,b){var c=this;a.pathRoot=a.pathRoot||"whoToFollow",twttr.streams.UserStream.apply(this,arguments),this.category=a.suggestionCategory,this.ignoreScribeItemPosition=!1}).subclassOf(twttr.streams.UserStream).statics({_deciderKey:"suggestion_categories_streams"}).methods({update:function(a){this.params.lang&&(a.lang=this.params.lang),this.params.country&&(a.country=this.params.country),this.params.city&&(a.city=this.params.city),this.category.members(a)},isCursorPagination:function(){return!1},_setTitle:function(a){var b={category:this.category.name,size:this.category.size};a(this.params.title||_("View {{category}} ({{size}})",b))},_getHeaderComponent:function(){return this.params.noHeaderFooter?null:new twttr.components.SuggestionCategoriesList(twttr.streams.SuggestionCategoriesStream.CATEGORIES,this.params.pathRoot,this.category.slug)},_getStreamEndComponent:function(){return this.params.noHeaderFooter?twttr.streams.SuggestionCategoryMembersStream.uber._getStreamEndComponent.call(this):this._getHeaderComponent()}});c&&d.mixin(c),a(d)})}),provide("streams/SuggestionCategoriesDashboardStream",function(a){using().as(function(b){twttr.klass("twttr.streams.SuggestionCategoriesDashboardStream",function(a,b){a=a||{},twttr.streams.SuggestionCategoriesStream.call(this,a,b)}).subclassOf(twttr.streams.SuggestionCategoriesStream).methods({itemViewClass:twttr.isT1?"DashboardStreamInterestCategory":"StreamSuggestionCategory",_setHeader:function(a,b){a("")},addTipsies:function(){}}),a()})}),provide("streams/SuggestionCategoryMembersDashboardStream",function(a){using("streams/SuggestionCategoryMembersStream").as(function(b){twttr.klass("twttr.streams.SuggestionCategoryMembersDashboardStream",function(a,c){a=a||{},a.streamItemClass="unfocusable-stream-item",b.streams.SuggestionCategoryMembersStream.call(this,a,c)}).subclassOf(b.streams.SuggestionCategoryMembersStream).methods({_setHeader:function(a,b){a("")},itemViewClass:"DashboardStreamUser"}),a(twttr.streams.SuggestionCategoryMembersDashboardStream)})}),provide("streams/GovernmentSearchStream",function(a){using("_","mixins/hasGovernmentSearchHeader").as(function(b,_){var c=twttr.klass("twttr.streams.GovernmentSearchStream",function(a,b){var c=this;twttr.streams.UserStream.apply(this,arguments)}).subclassOf(twttr.streams.UserStream).mixin(b.mixins.hasGovernmentSearchHeader).methods({itemViewClass:"StreamUser",streamItemType:"user",afterFirstSwitchingTo:function(a){this.getMoreOldItems(a)},streamItemId:function(a){return a.id},_fetchItems:function(a){var b=this;twttr.API.UsPoliticalRep.findByZip(this.params.zipCode,{success:function(c,d){b.push(c.map(function(a){return a.user}).array),a(b,twttr.streams.SUCCESS),b.reachedTheEnd()},error:function(c){c.status===502?a(b,twttr.streams.WHALE):c.status===404?(a(b,twttr.streams.SUCCESS),b.reachedTheEnd()):a(b,twttr.streams.ERROR)},timeout:function(a){a.retry()},cancel:function(){a(b,twttr.streams.TIMEOUT)}})},_setTitle:function(a){a(_("Government"))},_getEmptyStreamHtml:function(){return _("Sorry, we couldn't find any representatives for that Zip Code.")},_setViewToggler:function(a){var b={route:twttr.router.whoToFollowInterestsPath(),name:_("View all categories")};a(new twttr.views.BackLink(b))}});a(c)})}),provide("widget/VerifyEmailDialog",function(a){using("_").as(function(b,_){twttr.klass("twttr.widget.VerifyEmailDialog",function(a,b){this.bucket=a,twttr.widget.Dialog.call(this,twttr.merge({modal:!0,draggable:!1,css:{width:530},email:b.email_address||b.attributes.states.pending_email},b.attributes))}).subclassOf(twttr.widget.Dialog).methods({registerEvents:function(){twttr.widget.Dialog.prototype.registerEvents.call(this),this.$container.find(".button.ok-thanks").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","dialog_dismissed"),a.preventDefault(),a.stopPropagation(),$.cookie("abtest_email_verification_18","1",{expires:.0417}),this.destroy()})),this.$container.find(".send-verify-email").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","resend_verification_email"),$.ajax({url:"/account/resend_confirmation_email",dataType:"json",success:twttr.bind(this,function(a){var b=this.$container.find(".twttr-dialog-verify-email");b.length?b.fadeOut(300,function(){b.find("h2").html(_("Confirmation email sent!")),b.find(".verify-email-text").html(_("Please take this time to check your email for the confirmation message and to verify your email address by <strong>clicking the link in the email</strong>.")),b.fadeIn()}):twttr.showMessage(a.messageForFlash)}),error:function(a){twttr.showError(_("Oops!  There was an error sending the confirmation email."))}}),a.preventDefault(),a.stopPropagation()})),this.$container.find(".change-email").bind("click",twttr.bind(this,function(a){twttr.abdecider.track("email_verification-18","change_email"),this.destroy()}))}}),a(twttr.widget.VerifyEmailDialog)})}),provide("SearchAPI",function(a){using().as(function(b){twttr.SearchAPI={_generateFacetsQuery:function(a){var b=a.query,c=a.facets,d={q:b,imageResults:c.images?c.images.count:null,videoResults:c.videos?c.videos.count:null};return a.experimentId&&(d.experimentId=a.experimentId),d},getImageFacets:function(a,b){twttr.SearchAPI._wrapInCache("imageFacets",a,b)},getVideoFacets:function(a,b){twttr.SearchAPI._wrapInCache("videoFacets",a,b)},_wrapInCache:function(a,b,c){var d=this,e=twttr.SearchAPI.cacheKey(a,b,c);this._facetsCache[e]?setTimeout(function(){c.success&&c.success(d._facetsCache[e])},0):twttr.API.Search[a](b,twttr.merge({},c,{success:function(a){var b=[];a.each(function(a){b.push({url:a.url,tweet:a})}),d._facetsCache[e]=b,c.success&&c.success(b)},error:function(){c.error&&c.error()}}))},cacheKey:function(){return JSON.stringify(Array.prototype.slice.apply(arguments))},_facetsCache:{},flushCache:function(){this._facetsCache={}}},a(twttr.SearchAPI)})}),provide("media/providers",function(a){using().as(function(b){var c=function(a,b){return b=b||function(){return!0},function(c){var d=[];$.each(c,function(a,c){c.mediaType=twttr.media.matchInstance(c.url,c.tweet),c.mediaType&&b(c)&&d.push(c)}),a(d)}};twttr.klass("twttr.media.provider.Search",function(a){this.options=a||{}}).methods({fetch:function(a){var b=a.query;a.success=c(a.success,a.filter),a.mode=="videos"?twttr.SearchAPI.getVideoFacets(b,a):twttr.SearchAPI.getImageFacets(b,a)}}),twttr.klass("twttr.media.provider.UserMedia",function(a){this.defaults={offset:0,count:20},this.screenName=a.screenName||null,this.user=a.user||null}).methods({fetchWithUser:function(a){var b=a.success||$.noop;a.success=function(a){var c=[];twttr.each(a.array,function(a){a.entities&&a.entities.media&&$.each(a.entities.media,function(b,d){if(d.type&&d.type=="photo"&&d.display_url){var d={url:d.display_url,tweet:a};c.push(d)}}),a.entities&&a.entities.urls&&$.each(a.entities.urls,function(b,d){var e={url:d.expanded_url||d.url,tweet:a};c.push(e)})}),b(c)},this.user.media(a)},fetchWithScreenName:function(a){var b=this;twttr.API.User.find(this.screenName,function(c){b.user=c,b.fetchWithUser(a)})},fetch:function(a){a=$.extend({},this.defaults,a),a.success=c(a.success,a.filter),this.user?this.fetchWithUser(a):this.screenName&&this.fetchWithScreenName(a)}}),a(twttr.media.provider)})}),provide("mixins/userRecommendationsHelper",function(a){using("_","constants").as(function(b,_){twttr.klass.mixin("twttr.mixins.userRecommendationsHelper",function(a){return a.methods({INTERESTING_RATING:6,BLOCK_RATING:5,USEFUL_RATING:1,LIST_ITEM_SELECTOR:"ul.recommended-followers > li.user-small-list-item",userRecommendationsAvailable:function(a){return twttr.loggedIn?a?twttr.decider.isAvailable("whotofollow_similarities"):twttr.decider.isAvailable("whotofollow_recommendations"):twttr.decider.isAvailable("whotofollow_logged_out_similarities")},trackImpressions:function(a,c,d,e,f){var g=[],i=[],j;a&&a.length()&&(a.each(function(a,c){g.push(a.id),i.push(a.feedback);if(a.promotedContent&&a.promotedContent.impression_id){var d={target_id:a.id,item_type:b.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id,item_position:c};j=j||{},j[a.id+""]=d}}),e?this.currentRecommendations=twttr.map(this.currentRecommendations,function(a,b){return a==e?g[0]:a}):this.currentRecommendations=g),this._trackOldImpressions(c,g,i,d),this._trackNewImpressions(g,i,j,f)},trackError:function(a,b){this._trackOldImpressions(a,[],[],b),this.getScribbler().scribe({component:this._getScribeComponentName(),action:"error"})},_trackOldImpressions:function(a,b,c,d){var e={recommended_users:b,recommended_users_count:b.length,tokens:c};twttr.merge(e,d||{});var f=this.mergeSimilarUserId(e);_scribble(a,f,"whotofollow")},_trackNewImpressions:function(a,b,c,d){var e={profile_id:this.getSimilarUserId(),item_ids:a,item_count:a.length,event_value:a.length,item_names:b,referring_event:d?"get_newer":"initial",duration_ms:new Date-this.initTime};c&&(e.item_details=c),this.getScribbler().scribe({component:this._getScribeComponentName(),action:a.length?"results":"no_results"},e)},_scribeResults:function(a,b,c){twttr.streams.Stream.prototype._scribeResults.apply(this,arguments);var b=b||[];c=c||{};if(a=="error"||a=="initial"&&!b.length)this.scribbler.scribe({component:"stream",action:a=="error"?"error":"no_results"},twttr.merge(c,{item_ids:[0],item_count:0,event_value:0,cursor_or_page:this._cursorOrPage(),referring_event:a}));else if(b.length){var d=this,e=[],f=[],g;twttr.each(b,function(a,b){e.push(a.id),f.push(a.feedback);if(d.constructor._namespace.indexOf("UserRecommendations")!=-1){var c;a.promotedContent&&a.promotedContent.impression_id&&(c={item_type:twttr.constants.clientEvent.itemType.promotedUser,item_token:a.promotedContent.impression_id}),c&&(g=g||{},c.item_position=b,g[a.id+""]=c)}}),g&&(c.item_details=g),this.scribbler.scribe({component:this._getScribeComponentName(),action:"results"},twttr.merge(c,{item_ids:e,item_names:f,item_count:e.length,event_value:e.length,cursor_or_page:this._cursorOrPage(),referring_event:a}))}},logPromotedImpressions:function(a){a.each(function(a){a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)})},getSimilarUserId:function(){return this.similarUser&&this.similarUser.id||twttr.profileUser&&twttr.profileUser.id},mergeSimilarUserId:function(a){return this.screenName&&$.extend(a,{to_user_id:this.getSimilarUserId()}),a.phoenix_enabled=!0,a},recsToUsers:function(a){return a.map(twttr.bind(this,function(a,b){var c=this._namespace=="twttr.streams.UserRecommendationsStream"||this._namespace=="twttr.streams.UserSimilaritiesStream";return a.user.clone({following:a.user.following===!0,feedback:a.token,dismissable:!this.screenName||c&&twttr.profileUser&&twttr.currentUser.id==twttr.profileUser.id,socialcontext:this.makeSocialContextHtml(a,c)})}))},fetch:function(a){this.screenName?twttr.profileUser.similarUsers(a):(a.force_new_signup=this.forceNewSignup,twttr.currentUser.recommendedUsers(a))},registerUserRecommendationsActions:function(a){var b=this,c=function(b){return!a||b.parents(a).length};this.bind("avatar_click.user screen_name_click.user select.user",function(a,d,e,f){if(!c(d))return;var g=parseInt(d.attr("data-user-id")),i=b.mergeSimilarUserId({rating:b.INTERESTING_RATING,recommended_user_id:g,token:d.attr("data-feedback-token")||"0"});if(!g)return;i.recommendation_position=b.getRecPosition(d),scribble(b.whotofollowComponentName+"_profile_click",i,"whotofollow"),scribble("view-profile",{profile_user_id:g,component:b._namespace.indexOf(".stream.")?"stream":"dashboard",subcomponent:"who-to-follow",target:e.is("a")?"link":"image"})}),this.bind("follow.user",function(a,d,e,f){if(!c(d))return;var g=parseInt(d.attr("data-user-id")),i=b.mergeSimilarUserId({rating:b.USEFUL_RATING,recommended_user_id:g,token:d.attr("data-feedback-token")||"0"});if(!g)return;twttr.API.UserRecommendation.rate(i),i.recommendation_position=b.getRecPosition(d),scribble(b.whotofollowComponentName+"_follow",i,"whotofollow"),scribble("follow-user",{profile_user_id:g,component:b._namespace.indexOf(".stream.")?"stream":"dashboard",subcomponent:"who-to-follow"})}),this.bind("dismiss.user",function(a,d,e,f){if(!c(d))return;twttr.isT1&&d.hasClass("js-follow-combo")&&(d=d.parent(".js-actionable-user"));var g=parseInt(d.attr("data-user-id")),i=d.attr("data-impression-id"),j=b.getRecPosition(d),k=d.attr("data-feedback-token")||"0",l=d.find("a.js-action-follow, div.js-action-follow, .follow-action, .follow-button").length||b.screenName,m={};twttr.cache.local.dismissedIDs=twttr.cache.local.dismissedIDs||[],twttr.cache.local.dismissedIDs.push(g),d.animate({opacity:0},200);var n=function(a){var c;if(e.closest('[data-section-id="wtf"]').length)if(a&&a.length()&&!twttr.is.inArray(a.first().user.id,b.currentRecommendations||[])){c=b.recsToUsers(a);var f=c.first();if(f){var i=b.renderItemView(f).$html();i.css({opacity:0}),d.replaceWith(i),i.animate({opacity:1},300),b.trackImpressions(c,"whotofollow_sidebar_replace_dismissed",twttr.merge({recommended_user_id:g,recommendation_position:j},m),g)}}else d.fadeOut(200,function(){d.animate({height:1},100,null,function(){d.remove(),b.$find(b.LIST_ITEM_SELECTOR).length==0&&(b.trigger("notRendered","noMoreRecommendations"),b.$node.empty())})});else{var n=d.parent(".stream-item");n.slideUp(100,function(){n.remove()})}l&&scribble(b.whotofollowComponentName+"_block",b.mergeSimilarUserId({token:k,recommended_user_id:g,rating:b.BLOCK_RATING,recommendation_position:j}),"whotofollow")},o=function(){twttr.showError(_("Whoops! Something went wrong. Please try again!")),d.css({opacity:1})};m=b.mergeSimilarUserId({});var p=twttr.merge({user_id:m.to_user_id,excluded:b.currentRecommendations.concat(twttr.cache.local.dismissedIDs||[]).join(","),success:n,error:o,pc:!!i},m);d.find("a.js-action-unfollow:visible, div.js-action-unfollow:visible").length?b.fetch(twttr.merge(p,{limit:1})):d.find(".unfollow-button").length&&twttr.audit.currentPage()!="similar_to"?n():(p=twttr.merge({connections:!0},p),twttr.API.UserRecommendation.hide(g,k,p))})},attachUserRecommendationHideEvents:function(){this.$find("a.js-user-dropdown-dismiss").click(twttr.bind(this,function(){this.$find("a.js-user-dropdown, div.js-user-dropdown").fadeOut(300)}))},renderItemView:function(a){return new twttr.views.UserSmallListItem(a)},getRecPosition:function(a){}}),a}),a(twttr.mixins.userRecommendationsHelper)})}),provide("mixins/t1/genericComboButton",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.t1.genericComboButton",function(){this.methods({getButton:function(a){return a.closest(".js-combo-btn")},setState:function(a,b,c){b&&c!==b&&(a.removeClass(c),a.addClass(b),a.attr("data-state",b))}}).click({".js-combo-btn-dropdown":function(a,b){var c=this.getButton(b);c.toggleClass("open"),c.hasClass("open")&&($(document).bind("click.button",function(){c.removeClass("open"),$(document).unbind("click.button")}),a.stopPropagation())},".js-combo-btn-action, .js-combo-btn-dropdown-options a":function(a,b){var c=this.getButton(b);this.setState(c,b.attr("data-state"),c.attr("data-state"))}})});a(c)})}),provide("mixins/userUpdateable",function(a){using().as(function(b){var c=twttr.klass.mixin("twttr.mixins.userUpdateable",function(){return this.methods({registerUserUpdateEvents:function(a){var b=this;if(!twttr.loggedIn)return;twttr.API.User.bind("follow unfollow",function(c,d){var e=a.id==d.id,f=twttr.helpers.isCurrentUser(a);if(!e&&!f)return;twttr.helpers.isCurrentUser(b.user)?b.trigger("userUpdated",twttr.currentUser):b.trigger("userUpdated",d)})}}),this});a(c)})}),provide("components/UserMedia",function(a){using().as(function(b){twttr.klass("twttr.components.UserMedia").subclassOf(twttr.components.Media).deciderKey("phoenix_user_media_gallery").initializer(function(a,b){this.user=a,this.options=b||{},this.notDisplayedClass=".user-media-not-displayed",this.hasCalledHasRendered=!0,this.buildSubComponents()}).methods({buildSubComponents:function(){var a=this,b=function(){a.$node.hide()},c=twttr.aug({user:this.user,filter:function(a){return!a||!a.mediaType?!1:a.mediaType.icon()===twttr.constants.media.photoIcon}},this.options);twttr.isT1&&twttr.aug(c,twttr.components.Media.dashboardThumbnailOptions),this.images=new twttr.components.media.profile.Images(c),this.images.bind("urlsLoaded",function(c,d,e){a._possiblySensitive=e,d.length===0?b():twttr.loggedIn?a.loggedInBehavior():a.loggedOutBehavior(),a._scribeResults("photos",d)}),this.images.bind("failed",function(){b(),a._scribeResults("photos")}),this.images.fetchImages()},_isPossiblySensitive:function(){return!!this._possiblySensitive},_getUser:function(){return this.user},onProfilePage:function(){return!0},renderMedia:function(){this.images.$node.appendTo(this.$node),this.images.render(),this.$node.delegate(".view-all","click",function(){trackClient({section:"dashboard",component:"photos_user_media",action:"view_all"},{event_info:"photos",profile_id:twttr.profileUser&&twttr.profileUser.id})}),this.$node.delegate(".media-thumbnail","click",function(a){trackClient({section:"dashboard",component:"photos_user_media",action:"click"},{event_info:"photos",url:$(this).attr("data-url"),profile_id:twttr.profileUser&&twttr.profileUser.id})})},buildNotDisplayedView:function(a){var b="";return a.possibly_sensitive?b=_("This media may contain sensitive content"):a.not_following&&(b=_("This media was shared by {{screen_name}}, someone you don&#8217;t follow.",{screen_name:this.user.screenName})),new twttr.views.UserMediaNotDisplayed({screenName:this.user.screenName,reason:b,renderHr:this.options.renderHr})},_scribeResults:function(a,b){var c=b&&b.length?"results":"no_results",d=a+"_user_media";b=b||[],trackClient({section:"dashboard",component:d,action:c},{item_names:b.slice(0,4),item_count:b.length,event_info:a,profile_id:twttr.profileUser&&twttr.profileUser.id})}}),a(twttr.components.UserMedia)})}),provide("components/UserRecommendations",function(a){using("_","mixins/userRecommendationsHelper","mixins/userActionable",twttr.isT1?"mixins/UserRecommendationsT1":"mixins/UserRecommendationsP1").as(function(b,_,c,d,e){var f=twttr.klass("twttr.components.UserRecommendations").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.screenName=a.screenName,this.showLinks=a.showLinks,this.currentRecommendations=[],this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.screenName&&twttr.profileUser&&twttr.profileUser.id}),this.scribeComponentName=this._determineScribeComponentName(a),this.whotofollowComponentName=this._determineWhotofollowComponentName(this.scribeComponentName),this.initTime=+(new Date),this.onDeck=[],this.scribbler.scribe({component:this.scribeComponentName,action:"impression"}),this.noSpacer=!this._shouldHaveSpacer(),this.bind("addedToPage",twttr.bind(this,function(){this.userRecommendationsAvailable()?this.loadRecommendations():this.trigger("notRendered","darkmoded")})),this.registerUserActionEvents(),this.registerUserRecommendationsActions()}).mixin(c,d,e).statics({wtfCycleTimeout:1e3}).click({".title-link":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:"dashboard_title",item:b.find(".dashboard-component-title").html()};scribble("dashboard_click",c)},".user-rec-inner h3 a":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:"view_all_recommendations",recommendations:this.currentRecommendations};scribble("dashboard_click",c)},".user-rec-inner .view-all":function(a,b){trackClient({component:this.scribeComponentName,action:"view_all"})},".flex-module-footer a[data-element-term=interests_link]":function(a,b){trackClient({component:this.scribeComponentName,element:"interests_link",action:"click"})},".flex-module-footer a[data-element-term=import_link]":function(a,b){trackClient({component:this.scribeComponentName,element:"import_link",action:"click"})},".user-rec-links a":function(a,b){var c={input:"click",component:"dashboard",subcomponent:"who_to_follow",target:b.html(),target_type:"recommendation_link",recommendations:this.currentRecommendations};scribble("dashboard_click",c)},"a.js-action-follow, div.js-action-follow":function(a,b){if(twttr.app.currentPageName()==="home"&&this.scribeComponentName!=="empty_timeline_recommendations"){var c=this,d=b.closest(".js-actionable-user");window.setTimeout(function(){c.loadRecommendations(d)},twttr.components.UserRecommendations.wtfCycleTimeout)}}}).methods({forceNewSignup:!1,renderItemView:function(a){return new twttr.views.UserSmallListItem(a)},renderModuleView:function(a,b){var c=this._getModuleViewName();(new twttr.views[c](a)).subview("recommended_followers",new twttr.views.UserSmallList(b)).render(this.$node,"append")},loadRecommendations:function(a){var b,c;this.screenName?(b="whotofollow_view_similar_users",c="profile"):(b="whotofollow_view_recommended_users",c="home"),this.fetch({limit:a?1:this._recommendationsLimit(),excluded:this.onDeck.concat(twttr.cache.local.dismissedIDs||[]).join(","),display_location:this.screenName?"st-component":"wtf-component",pc:!0,connections:!this.screenName,algorithm:this.useUserToUserRec()?"UserToUserRec":null,success:twttr.bind(this,function(d){var e=this.recsToUsers(d);this.trackImpressions(e,b,{tracking_context:c});if(e.length()>0){this.logPromotedImpressions(e);var f;if(a){f=this.renderItemView(e.first()).$html();var g=parseInt(f.attr("data-user-id"));if(this.onDeck.find(function(a){return a==g}))this.trigger("notRendered","recommendationAlreadyOnDeck");else{var i=parseInt(a.attr("data-user-id"));this.onDeck=this.onDeck.map(function(a){return a==i?g:a}),a.css({opacity:1}),f.css({opacity:0}),a.animate({opacity:0},400,function(){a.replaceWith(f),f.animate({opacity:1},400,function(){f.css({opacity:""})})})}}else{this.onDeck=e.map(function(a){return $(a).attr("id")});var j=this.screenName?{screen_name:this.screenName,self_sims:twttr.helpers.isCurrentUser(this.screenName),profile_name:twttr.profileUser.name,small_avatar:!0}:{show_links:this.showLinks};this.renderModuleView(j,e),this.attachUserRecommendationRefreshEvents(),this.hasRendered(),this.trigger("recommendationsLoaded"),f=this.$node}twttr.helpers.ellipsify(f.find(".user-screen-and-full-name")),twttr.helpers.ellipsify(f.find("div.bio"))}else this.trigger("notRendered","noMoreRecommendations")}),error:twttr.bind(this,function(a){this.trackError(b,{tracking_context:c,error_status:a.status}),this.trigger("notRendered",a)})})},refreshRecommendations:function(a){var b=this.$find(".js-recommended-followers");b.animate({opacity:0},200);var c=this.screenName?"whotofollow_refresh_similar_users":"whotofollow_refresh_recommended_users";twttr.cache.local.dismissedIDs=(twttr.cache.local.dismissedIDs||[]).concat(this.currentRecommendations),this.fetch({limit:this._recommendationsLimit(),excluded:this.onDeck.concat(twttr.cache.local.dismissedIDs).join(","),pc:a,display_location:"wtf-component",connections:!0,algorithm:this.useUserToUserRec()?"UserToUserRec":null,success:twttr.bind(this,function(d){var e=this.recsToUsers(d);if(e.length()>0){this.scribbler.scribe({component:this.scribeComponentName,action:"refresh"}),this.trackImpressions(e,c,{},!1,!0),a&&this.logPromotedImpressions(e);var f=this._generateUserList(e);f.css({opacity:0}),b.replaceWith(f),twttr.helpers.ellipsify(f.find(".user-screen-and-full-name")),f.animate({opacity:1},200)}else twttr.showMessage(_("You have no more recommendations today!")),this._removeRefreshLink(),b.css({opacity:1})}),error:function(a){this.trackError(c,{error_status:err.status}),twttr.helpers.showErrorFromResponse(a),b.css({opacity:1})}})},attachUserRecommendationRefreshEvents:function(){var a=this;this.$find("a.js-refresh-suggestions").click(twttr.bind(this,function(a){this.refreshRecommendations(!0)}))},_recommendationsLimit:function(){return 3},useUserToUserRec:function(){return this.screenName!=null&&twttr.abdecider.choose("wtf_user_to_user_rec_155")=="user_to_user_rec"},_determineScribeComponentName:function(a){return a=a||{},a.scribeComponentName?a.scribeComponentName:a.screenName?"similar_user_recommendations":"user_recommendations"},_determineWhotofollowComponentName:function(a){return a==="empty_timeline_recommendations"?"whotofollow_empty_timeline":"whotofollow_sidebar"}});a(twttr.components.UserRecommendations)})}),provide("components/Footer",function(a){using().as(function(b){var c=twttr.klass("twttr.components.Footer").subclassOf(twttr.components.Base).initializer(function(a){this.renderFooter(a),twttr.loggedIn||this.$node.delegate("a","click",function(a){var b={url:$(this).attr("href"),context:twttr.audit.currentPage()},c={section:"footer",component:"link",action:"click"};trackClient(c,b)}),this.hasRendered()}).method("renderFooter",function(a){(new(twttr.isT1?twttr.views.Footer:twttr.views.GenericFooter)({year:2012,is_slim:a=="slim"})).render(this.$node,"append")});a(c)})}),provide("components/Trends",function(a){using("_").as(function(b,_){var c=twttr.klass("twttr.components.Trends").subclassOf(twttr.components.Base).initializer(function(a){var b=this;trackClient({component:"trends",action:"impression"}),b.isFullPage=!!a&&!!a.isFullPage,this.renderTrends(),a&&a.wide&&b.$find(".trends-inner").addClass("wide-trends"),b.hasRendered(),b.registerEventHandlers(),twttr.API.CurrentUser.bind("changedLocation",function(){b.trendLocationUpdated=!0,b.updateTrends()}),twttr.TrendLocations.install(function(){b.trendLocationsLocated=!0,b.startUpdatePolling(),b.trigger("trendLocationsLocated")})}).statics({trendUpdateTime:3e5}).methods({registerEventHandlers:function(){var a=this,b=a.$find(".js-trend-toggle");b.click(function(b){var c=function(){a.dialog().open(),scribble("open-trend-dialog",{input:"click",woeid:a.currentWoeid()})};a.trendLocationsLocated?c():a.bind("trendLocationsLocated",c),b.preventDefault()}),b.hover(function(b){scribble("trend-location-selector-hover",{input:"hover",woeid:a.currentWoeid()})})},currentWoeid:function(){return twttr.trendLocations.current.woeid},dialog:function(){return this._dialog?this._dialog:this._dialog=twttr.dialogs.trends()},startUpdatePolling:function(){var a=this;!a.trendUpdateInterval&&a.trendLocationsLocated&&(a.updateTrends(),a.trendUpdateInterval=setInterval(function(){twttr.decider.isAvailable("trends_component_polling")&&a.updateTrends(!0)},twttr.components.Trends.trendUpdateTime))},stopUpdatePolling:function(){this.trendUpdateInterval&&(clearInterval(this.trendUpdateInterval),this.trendUpdateInterval=!1)},prettyHash:function(a){return a&&a[0]==="#"?a.slice(1):null},updateTrends:function(a){var b=this;b.$node.addClass("loading");var c={pc:twttr.loggedIn,promoted_location:twttr.util.params().promoted_location,success:function(c){var d=twttr.anywhere.api.util.buildCollection(twttr.anywhere.api.models.Trend,c.get(0).trends),e=c.get(0).personalized;twttr.trendLocations.current.isPersonalized!=e&&twttr.trendLocations.setPersonalized(e),b.updateTrendsLocation(),b._dialog&&b.dialog().rerender();var f=[],g=[];$trends=b.$find(".js-trends").empty(),d.each(function(c,d){var e=$.extend({attributes:{}},c);e.attributes=$.extend({index:d+1,is_full_page:b.isFullPage,pretty_hash:b.prettyHash(e.attributes.name)},e.attributes),twttr.isRTL&&(e.attributes.name=e.attributes.name.replace(/^#/,"‎#"));var i=(new twttr.views.TrendItem(e)).$html();c.promotedContent&&(a||twttr.API.util.PromotedContent.logTrendImpression(c.promotedContent.id),i.bind("click",function(a){twttr.API.util.PromotedContent.logTrendClick(c.promotedContent.id)}));var j={rank:d,woeid:b.currentWoeid(),component:"dashboard",input:"click",trend:c.name,dialog_open:b._dialog&&b._dialog.isOpen()};c.promotedContent&&(j.promoted_content_id=c.promotedContent.id),i.bind("click",function(a){scribble("show-trend",j),trackClient({section:"dashboard",component:"trend",action:"click"},{query:c.name,woeid:b.currentWoeid(),position:d}),c.promotedContent&&trackClient({section:"dashboard",component:"promoted_trend",action:"click"},{query:c.name,woeid:b.currentWoeid(),position:d})}),i.appendTo($trends),f.push(j),g.push(c.name)}),b.$node.removeClass("loading"),b.isFullPage&&$(".trends-page").removeClass("trends-page-loading"),b.showTrends(),trackClient({component:"trends",action:"results"},{item_names:g,item_count:g.length,referring_event:a||b.trendLocationUpdated?"get_newer":"initial",event_initiator:a?twttr.constants.scribe.CLIENT_SIDE_APP:twttr.constants.scribe.CLIENT_SIDE_USER}),scribble("trend-impression",{component:"dashboard",trends:f})},error:function(c){b.isFullPage&&($(".trends-page").removeClass("trends-page-loading"),a||twttr.helpers.showErrorFromResponse(c)),b.hideTrends()}};twttr.trendLocations.current.trends(c)},updateTrendsLocation:function(){var a=twttr.trendLocations.current,b=twttr.decider.isAvailable("personalized_trends")&&a.isPersonalized?_("Trends"):1===a.woeid?_("Worldwide trends"):Mustache.to_html(_("{{location}} trends"),{location:a.name});this.$find(".js-trend-location").text(b).attr("woeid",a.woeid)},showTrends:function(){!this.isFullPage&&this.$node.show()},hideTrends:function(){!this.isFullPage&&this.$node.hide()}}).deciderKey("trends_component");twttr.isT1?(c.setBaseView(twttr.views.DashboardTrends),c.methods({renderTrends:function(){this.hideTrends()}})):c.methods({renderTrends:function(){var a=this.isFullPage?twttr.views.FullPageTrends:twttr.views.DashboardTrends;(new a).render(this.$node,"append"),this.noSpacer=this.isFullPage}}),a(c)})}),provide("components/onebox/News",function(a){using("_","helpers").as(function(b,_,c){var d=twttr.klass.component("twttr.components.onebox.News").initializer(function(a){var b=this,c=b.getArticle(a);if(!c)return;b.$node.append((new twttr.views.CardNewsOnebox(c)).html()),b.$node.css("visibility","hidden")}).deciderKey("news_onebox").click({".js-news-headline,.onebox-news-url":function(a){trackClient({section:"onebox",component:"news",action:"click"})}}).methods({getTopicName:function(){return _("Top news")},getArticle:function(a){var b=twttr.at("content.articles",a);return b?b.get(0):null},render:function(){var a=this.$find(".js-news-headline"),c=this.$find(".js-news-snippet"),d=a.innerHeight();d>=36?c.css("height","18px"):d>=18&&c.css("height","36px"),b.helpers.ellipsify([a,c],!1,!0,null,{setTitle:"always",ellipsis:"&ellip;"}),b.helpers.ellipsify(this.$find(".onebox-news-url-text")),this.$node.css("visibility","")}});a(d)})}),provide("components/onebox/User",function(a){using("_","helpers","mixins/userActionable").as(function(b,_){var c=twttr.klass.component("twttr.components.onebox.User").initializer(function(a,b){this.items=[];var c=this.getUsers(a);if(!c)return;this.scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({section:"onebox"},{query:b}),this.$node.append((new twttr.views.CardAccountsOnebox(c,this.getViewAllPath(b))).html()),this.$node.css("visibility","hidden"),this.registerUserActionEvents()}).mixin(b.mixins.userActionable).statics({maxUsers:2}).deciderKey("user_onebox").methods({getTopicName:function(){return _("Top people")},getViewAllPath:function(a){var b={query:a};return twttr.isT1?twttr.router.userSearchPath(b):twttr.loggedIn?twttr.router.whoToFollowSearchPath(b):twttr.router.userSearchPath(b)},getUsers:function(a){var b=twttr.at("content.users",a),c=this;return!b||b.isEmpty()?null:(b.array=b.array.splice(0,twttr.components.onebox.User.maxUsers),b.each(function(a){c.items.push(a.idStr),a.promotedContent&&twttr.API.util.PromotedContent.logImpression(a.promotedContent.impression_id)}),b)},render:function(){twttr.isT1?b.helpers.ellipsify(this.$find(".js-onebox-ellipsis")):b.helpers.ellipsify(this.$find(".bio"),!1,!0,null,{setTitle:"always",ellipsis:"&ellip;"}),this.$node.css("visibility","")}});a(c)})}),provide("components/onebox/Sports",function(a){using("_","helpers","mixins/profilePopupActionable").as(function(b,_,c){var d=twttr.klass.component("twttr.components.onebox.Sports").initializer(function(a,b){this._timerId=0,this._event=0;var c=this,d=c.getEvent(a);if(!d)return;if(d.sport!=="soccer")return;c._event=d,c.$node.append((new twttr.views.CardSoccerOnebox(d)).html()),d.events.getMatchState().current_status!=="final"&&c._startPolling(d),this.$node.css("visibility","hidden")}).deciderKey("sports_onebox").click({".team-logo":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"avatar"})},".fullname":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"screen_name"})},".follow-team":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"follow"})},".detail":function(a){trackClient({section:"onebox",component:"sports",action:"open_link"},{url:this._event.events.getMatchedEventData().preview_url})},".recap":function(a){trackClient({section:"onebox",component:"sports",action:"open_link"},{url:this._event.events.getMatchedEventData().recap_url})},".hashtag":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".ticker-event":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".matched-score":function(a){trackClient({section:"onebox",component:"sports",action:"search"},{query:$(a.currentTarget).data("hashtag")})},".js-follow-news":function(a){trackClient({section:"onebox",component:"sports",action:"profile_click"},{event_info:"news_link"})},".js-signup-callout":function(a){if(!twttr.loggedIn){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget).data("user-id");twttr.API.User.find(b,{success:function(a){twttr.dialogs.signinOrSignup({follow:a}).open()},error:function(a){twttr.errors.showErrorFromResponse(a)}})}}}).mixin(twttr.mixins.profilePopupActionable).methods({getEvent:function(a){return twttr.at("content",a)},_renderTicker:function(a){if(a.events.data().follow_news||a.events.getOtherMatchState().length>0)this.$node.find(".tickercontainer").size()===0&&this.$node.find(".js-onebox-soccer-item").append('<div class="tickercontainer"></div>'),this.$node.find(".tickercontainer").empty().append((new twttr.views.SoccerTicker(a)).html())},_renderMatchedEvent:function(a){this.$node.find(".matched-event").empty().append((new twttr.views.SoccerMatchedEvent(a)).html()),twttr.loggedIn||this.$find(".js-user-profile-link").removeClass("js-user-profile-link").addClass("js-signup-callout")},render:function(){this._event&&(this.$node.empty(),this.$node.append((new twttr.views.CardSoccerOnebox(this._event)).html()),this._renderMatchedEvent(this._event),this._renderTicker(this._event),this._event.events.getMatchState().current_status==="final"&&$(".score a").removeClass("live")),this.$node.css("visibility",""),trackClient({section:"onebox",component:"sports",action:"impression"}),this.$find(".ticker").length!==0&&this._tickerScroll(this.$find(".tickercontainer"))},_tickerScroll:function(a){function m(){var a=b.find("li")[l-1];$(a).animate({opacity:0},k,"linear"),b.animate({top:-l*100+"%"},k,"linear",function(){if(!j)return;++l,l-1>=b.find("li").length?(g._renderTicker(g._event),g._tickerScroll(g.$find(".tickercontainer"))):(clearTimeout(i),i=setTimeout(function(){m()},f))})}this._scrollStarted=!0;var b=$(a.children()[0]),c=0,d=0;b.find(".event-item").each(function(a){var b=$(this,a).outerHeight(!0);c+=b,d<b&&(d=b)}),a.height(d),b.height(c);var e=.03,f=2e3,g=this,i,j=!0,k=d/e,l=0;b.find("li").length===1?setTimeout(function(){g._renderTicker(g._event),g._tickerScroll(g.$find(".tickercontainer"))},f):(b.css("top",d),i=setTimeout(function(){m()},f),b.hover(function(){j=!1,clearTimeout(i)},function(){j=!0,i=setTimeout(function(){m()},f)}))},_getEventIds:function(a){var b=[];return $.each(a,function(a,c){b.push(a)}),b.join()},_startPolling:function(a){var b=this;b._timerId=setInterval(function(){var c={statuses:!1,stories:!0,is_t1:twttr.isT1,trim_user:!0,event_ids:b._getEventIds(a.events.items),success:function(a){if(a.stories.length()===0)return;var c=a.stories.get(0),d=$.extend(!0,b._event.events.data().items,b.getEvent(c).events.data().items);b._event.events.data().items=d,b._renderMatchedEvent(b._event),b.$find(".ticker").length===0&&b._renderTicker(b._event),b.$find(".ticker").length!==0&&!b._scrollStarted&&b._tickerScroll(b.$find(".tickercontainer")),b._event.events.getMatchState().current_status==="final"&&(clearInterval(b._timerId),$(".score a").removeClass("live"))}};$(b.$node).parents("body").size()===0||!twttr.decider.isAvailable("sports_onebox_polling")?clearInterval(b._timerId):new Date-a.events.getMatchedEventData().scheduled_start_time_utc>0&&twttr.API.Search.search(query,c)},3e4)}});a(d)})}),provide("components/onebox/Event",function(a){using("_","helpers").as(function(b,_){var c=twttr.klass.component("twttr.components.onebox.Event").initializer(function(a,b){this.scribbler=twttr.Scribbler.clientEvent.spawnWithTerms({section:"onebox",component:"event"},{query:b});var c=a.content.events[0];c&&this.$node.append((new twttr.views.CardEventOnebox(c)).html())}).deciderKey("swift_events_reroute").click({".js-onebox-event-item":function(a){trackClient({section:"onebox",component:"event",action:"click"})}}).methods({render:function(){this.$node.css("visibility","")}});a(c)})}),provide("components/t1/EmptyTimelineRecommendations",function(a){using("components/UserRecommendations").as(function(b){twttr.klass("twttr.components.t1.EmptyTimelineRecommendations").subclassOf(twttr.components.UserRecommendations).initializer(function(a){var b=this;this.bucket=twttr.abdecider.chooseWithoutImpression("empty_timeline_176"),this.one("recommendationsLoaded.EmptyTimelineRecommendations",function(){using(">allCurrentUserDataLoaded",function(){twttr.currentUser.friends({success:function(a){b.friends=a,b.conditionallyEnableDoneButton(),twttr.API.User.bind("follow.EmptyTimelineRecommendations",function(a,c){b.friends.push(c);var d=b.$find('.js-list-item[data-user-id="'+c.id+'"]');d.length!==0&&(b.followEvent=!0,b.loadRecommendations(d)),b.conditionallyEnableDoneButton(),b.renderModuleHeaders()}),twttr.API.User.bind("unfollow.EmptyTimelineRecommendations",function(a,c){b.friends=b.friends.filter(function(a){return a.id!==c.id}),b.conditionallyDisableDoneButton(),b.renderModuleHeaders()})}})})}),this._superInitializer(a)}).destructor(function(){this.unbind(".EmptyTimelineRecommendations"),twttr.API.User.unbind(".EmptyTimelineRecommendations")}).statics({avatarLimit:5}).methods({forceNewSignup:!0,LIST_ITEM_SELECTOR:".js-empty-timeline .js-list-item",conditionallyEnableDoneButton:function(){this.friends.length()>twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1&&this.$find(".js-done").removeClass("disabled")},conditionallyDisableDoneButton:function(){this.friends.length()<twttr.components.t1.EmptyTimelineRecommendations.avatarLimit&&this.$find(".js-done").addClass("disabled")},renderItemView:function(a){var b=new twttr.views.BigAvatarListItem(a);return b.dismissable=!1,b},renderModuleView:function(a,b){var c=this,d={},e;d.following=this.setupFollowingContext(),d.avatar_limit=twttr.components.t1.EmptyTimelineRecommendations.avatarLimit,d.recommendations=[],b.each(function(a){var b=c.renderItemView(a);d.recommendations.push(b)}),(new twttr.views.EmptyTimelineRecommendationsModuleShort(d)).render(this.$node,"append")},getRecPosition:function(a){var b;return this.$find(".js-account-group").each(function(c,d){if(a.attr("data-user-id")==$(d).attr("data-user-id"))return b=c,!1}),b},renderModuleHeaders:function(){var a={},b=this.$find("h2"),c=this.$find("h3");a.following=this.setupFollowingContext(),b.length>0&&b.html((new twttr.views.EmptyTimelineTitle(a)).html()),c.length>0&&c.html((new twttr.views.EmptyTimelineSubtitle(a)).html())},setupFollowingContext:function(){if(twttr.currentUser.friendsCount!==0)return{goal:twttr.components.t1.EmptyTimelineRecommendations.avatarLimit,count:twttr.currentUser.friendsCount,follow_event:this.followEvent||!1,zero:twttr.currentUser.friendsCount===0,one:twttr.currentUser.friendsCount===1,two:twttr.currentUser.friendsCount===2,several:twttr.currentUser.friendsCount>=3&&twttr.currentUser.friendsCount<twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1,almost:twttr.currentUser.friendsCount===twttr.components.t1.EmptyTimelineRecommendations.avatarLimit-1,done:twttr.currentUser.friendsCount>=twttr.components.t1.EmptyTimelineRecommendations.avatarLimit}},_generateUserList:function(a){var b=this;return(new twttr.views.EmptyTimelineRecommendationsModuleFollowers({recommendations:a.map(function(a){return b.renderItemView(a)}).toArray()})).$html()}}).click({".js-done":function(a,b){if(b.hasClass("disabled"))return;twttr.mixins.emptyTimelineRecommendations.showing=!1,this.destroy()}}),a(twttr.components.t1.EmptyTimeline)})}),provide("components/t1/dashboard/AbstractDashboard",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.AbstractDashboard").subclassOf(twttr.components.Base).setBaseView(twttr.views.Module).initializer(function(a){var b=this;a=a||{},this.$sections={},this.$itemsContainer=this.$find(".js-items-container"),this.$itemsContainer.length||(this.$itemsContainer=this.$node),this.noSpacer=!0}).methods(twttr.EventProvider).methods({addSection:function(a){if(!a.id||!!this.$sections[a.id])return!1;a.tag=a.tag||"div",a.operation=a.operation||"append";var b=(new twttr.views.ModuleSection({tag:a.tag,id:a.id})).$html();return a.className&&b.addClass(a.className),this.$sections[a.id]=b,a.operation=a.operation||"append",this.$itemsContainer[a.operation](b),b},getSection:function(a){return this.$sections[a]?this.$sections[a]:!1},removeSection:function(a){if(!this.$sections[a])return!1;this.$sections[a].remove(),delete this.$sections[a]}});a(c)})}),provide("components/t1/dashboard/Tweetbox",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Tweetbox").subclassOf(twttr.components.t1.dashboard.AbstractDashboard).initializer(function(a){this.$node.html(a.addClass("flex-module"))});a(c)})}),provide("components/t1/dashboard/ProfileTweetbox",function(a){using("components/t1/dashboard/Tweetbox").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileTweetbox").subclassOf(b.components.t1.dashboard.Tweetbox).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/ProfileFollowCard",function(a){using("components/t1/dashboard/AbstractDashboard","mixins/userActionable","mixins/userUpdateable").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileFollowCard").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseViewOptions({class_name:"profile-card"}).mixin(b.mixins.userActionable,b.mixins.userUpdateable).initializer(function(a){function d(){b.registerUserActionEvents(),b.registerUserUpdateEvents(b.user),b.bind("userUpdated",function(a,c){b.user=c,b.renderStats()})}var b=this;this._superInitializer(),this.user=a;if(twttr.helpers.isCurrentUser(a)){var c=this.renderCard();(new twttr.views.ScreenNameFollowedBy({screen_name:a.screenName,is_current_user:!0})).render(c.$dom.find(".js-username")),d()}else this.getRelationship(a,function(c,e){b.updateUserAttributesFromRelationship(c);var f=b.renderCard();(new twttr.views.ScreenNameFollowedBy({screen_name:a.screenName,followed_by:c.followedBy})).render(f.$dom.find(".js-username")),b.renderUserProfileMenu(b.$find(".js-follow-combo"),b.$find(".js-action-profilemenu"),e),d()})}).methods({renderCard:function(){var a=this,b=new twttr.views.ProfileFollowCard(this.user),c=this.user.impressionId;return b.render(this.$node),setTimeout(function(){a.trigger("followCardRendered")},0),b},renderStats:function(){this.$find(".js-mini-profile-stats").remove(),(new twttr.views.MiniProfileStats(this.user)).render(this.$find(".js-profile-card-actions"),"append")}});a(c)})}),provide("components/t1/dashboard/Flex",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Flex").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.FlexModule).initializer(function(a){this._superInitializer(a)}).methods({addTitle:function(a){this.$itemsContainer.find(".flex-module-title").remove(),(new twttr.views.FlexModuleTitle({title:a.title,view_all_route:a.viewAllRoute})).render(this.$itemsContainer,"prepend")},addMoreLinks:function(a){this.$itemsContainer.find(".js-more-links").remove(),a.length&&(a[a.length-1].is_last=!0),(new twttr.views.FlexModuleMoreLinks({links:a})).render(this.$itemsContainer,"append")}});a(c)})}),provide("components/t1/dashboard/Nav",function(a){using("util").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.Nav").subclassOf(twttr.components.Base).initializer(function(a){a=a||{},this.$itemsContainer=this.$find(".js-items-container"),a.items&&(a.items=twttr.map(a.items,function(a){twttr.is.def(a.name)||(a.name=twttr.router.findMatchingRoute(a.route).name);if(a.type||a.name)a.element_term=b.util.underscore(a.type||a.name)+"_item";return twttr.merge({show_metadata_container:a.metadata,active:twttr.router.getCurrentRoute().name==a.name,count_commaized:a.count?b.util.formatNumber(a.count,twttr.pageLocale):"",visible:!0},a)})),(new twttr.views.Nav(a)).render(this.$node),this.afterRender(this.$node)}).methods({afterRender:$.noop});a(c)})}),provide("components/t1/dashboard/MiniHomeProfile",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass.component("twttr.components.t1.dashboard.MiniHomeProfile").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.MiniHomeProfile).initializer(function(a){var b=this;this._superInitializer(),this.showStats=!!a,this.user=twttr.currentUser,this.renderUser(),this.showStats&&(this.renderStats(),this.attachEvents()),using([twttr.bundleMore,"TweetBox"],function(){b.renderTweetBox()})}).methods({insertTweetbox:function(){if(this.tweetBox)return this.tweetBoxNode;var a=this,b=this.tweetBoxNode=$('<div class="tweet-box"/>');return this.tweetBox=new twttr.TweetBox(b.empty(),twttr.merge(this.getTweetBoxOptions(),{defaultContent:"",id:"main-tweet-box",condensed:!0,statusAction:"update",width:258,height:75,explainLinkShortening:!1,enableDraft:!0,enableAutoGrow:!0,template:{suppress_geo_text:!0,button_text:_("Tweet"),show_title:!1}})),this.tweetBox.bind("tweetSuccess",function(a,b){twttr.showMessage(_("Your Tweet has been sent!"))}),b},getTweetBoxOptions:function(){return{condensedContent:_("Compose new Tweet..."),autocompleteSuggestionLimit:5}},renderUser:function(){(new twttr.views.MiniCurrentUser(this.user)).render(this.$find(".js-profile-summary"),"append")},renderStats:function(){(new twttr.views.MiniProfileStats(this.user)).render(this.$find(".js-mini-profile-stats-container"))},renderTweetBox:function(){this.$tweetBox=this.insertTweetbox(),this.$find(".js-mini-profile-tweet-box").remove(),this.$itemsContainer.append(this.$tweetBox.addClass("tweet-user"))},tweetHandler:function(){twttr.currentUser.sync("statusesCount",twttr.currentUser.statusesCount+1),this.renderStats()},deleteTweetHandler:function(){twttr.currentUser.sync("statusesCount",twttr.currentUser.statusesCount-1),this.renderStats()},attachEvents:function(){var a=this;$(document).bind("currentUserUpdated",function(){a.renderStats()}),twttr.API.Status.bind("update retweet",function(){a.tweetHandler()}),twttr.API.Status.bind("delete unretweet",function(){a.deleteTweetHandler()})},_isCJK:function(){var a=twttr.pageLocale;return a==="ja"||a==="ko"||a==="zh-cn"||a==="zh-tw"}}).click({".js-profile-summary":function(){twttr.router.routeTo(twttr.router.profilePath({screen_name:this.user.screenName}))}});a(c)})}),provide("components/t1/dashboard/ConnectNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ConnectNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"connect-nav",items:[{title:_("Interactions"),route:twttr.router.connectPath(),visible:twttr.decider.isActivityEnabled(),type:"activity"},{name:"mentions",title:_("Mentions"),route:twttr.router.mentionsPath(),active:twttr.router.getCurrentRoute().name==="replies"||twttr.router.getCurrentRoute().name=="mentions",type:"mentions"}]})});a(c)})}),provide("components/t1/dashboard/ProfileNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"profile-nav",items:[{title:_("Tweets"),route:twttr.router.profilePath({screen_name:a.screenName})},{title:_("Following"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followingPath":"userFollowingPath"]({screen_name:a.screenName})},{title:_("Followers"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followersPath":"userFollowersPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="followers"||twttr.router.getCurrentRoute().name=="userFollowers"||twttr.router.getCurrentRoute().name=="followersYouFollow",show_metadata_container:!0},{title:_("Favorites"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"favoritesPath":"userFavoritesPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="favorites"||twttr.router.getCurrentRoute().name=="userFavorites"},{title:_("Requests"),route:twttr.router.followerRequestsPath({screen_name:a.screenName}),visible:twttr.helpers.isCurrentUser(a)&&a["protected"]},{title:_("Lists"),route:twttr.router.subscriptionsPath({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="subscriptions"||twttr.router.getCurrentRoute().name=="memberships"}]}),twttr.helpers.canViewUser(a)&&this.renderMedia()}).methods({renderMedia:function(){this.$find("ul").append((new twttr.components.UserMedia(twttr.profileUser,{view_all_href:twttr.router.userMediaGridPath({screen_name:twttr.profileUser.screenName}),renderHr:!0})).$node)}});a(c)})}),provide("components/t1/dashboard/SettingsNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SettingsNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"settings-nav",items:[{title:_("Accounts & Settings"),route:twttr.router.settingsPath()}]})});a(c)})}),provide("components/t1/dashboard/ListNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ListNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"list-nav",items:[{title:_("Tweets"),route:twttr.router.userListPath({screen_name:a.user.screenName,list_slug:a.slug})},{title:_("List members"),route:twttr.router.listMembersPath({screen_name:a.user.screenName,list_slug:a.slug})},{title:_("List subscribers"),route:twttr.router.listSubscribersPath({screen_name:a.user.screenName,list_slug:a.slug})}]})});a(c)})}),provide("components/t1/dashboard/SearchNav",function(a){using("components/t1/dashboard/Nav","components/SearchFacets").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._query=a,this._superInitializer.call(this,{name:"search-nav",items:[{title:_("Tweets"),route:twttr.router.searchResultsPath({query:a}),type:"tweets"},{title:_("People"),route:twttr.router.userSearchPath({query:a}),name:"userSearch",show_metadata_container:!0,type:"people"}]}),this.renderFacets(a)}).methods({loadUsers:function(a,b){var c=this,d={display_location:"search-component",pc:!1};twttr.API.User.search(a,twttr.merge(d,{success:function(a){var c=new twttr.components.t1.AvatarRow(a);b.find(".js-metadata").html(c.$node)}}))},afterRender:function(a){query=this._query.replace(/(^|\b)(from\:|to\:|near\:|source\:)/g,"");if(query.indexOf(":")!=-1)return;this.loadUsers(query,a)}}).methods({renderFacets:function(a){var c=this,d=!1;this.facets=new b.components.SearchFacets(a),this.facets.bind("urlsLoaded",function(a,b,e){b?d||(c.facets.$node.appendTo(c.$find(".js-items-container")),d=!0):e&&c.facets.$node.remove()})}});a(c)})}),provide("components/t1/dashboard/DiscoverNav",function(a){using("components/t1/dashboard/Nav","components/t1/AvatarRow").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.DiscoverNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(){this._superInitializer.call(this,{name:"discover-nav",items:[{title:_("Stories"),route:twttr.router.discoverPath(),type:"discover"},{title:_("Activity"),route:twttr.router.networkActivityPath(),visible:twttr.decider.isActivityEnabled(),type:"activity"},{title:_("Who to follow"),route:twttr.router.whoToFollowSuggestionsPath(),show_metadata_container:!0,type:"suggestions"},{title:_("Find friends"),route:twttr.router.whoToFollowImportPath(),type:"import"},{title:_("Browse categories"),route:twttr.router.whoToFollowInterestsPath(),active:twttr.router.getCurrentRoute().name=="whoToFollowInterestsCategory"||twttr.router.getCurrentRoute().name=="whoToFollowInterests",type:"interests"}]}),twttr.loggedIn&&this.renderWTFFacePile()}).methods({renderWTFFacePile:function(){var a=this;twttr.currentUser.recommendedUsers2(function(b){var c=b.map(function(a){return a.user}),d=new twttr.components.t1.AvatarRow(c);a.$find('[data-name="whoToFollowSuggestions"] .js-metadata').html(d.$node)})}});a(c)})}),provide("components/t1/dashboard/ProfileSummary",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileSummary").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleProfileSummary).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/ListFollowCard",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass.component("twttr.components.t1.dashboard.ListFollowCard").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseViewOptions({class_name:"follow-card"}).initializer(function(a){this._superInitializer(),this.render(a),this._registerEvents(a)}).methods({render:function(a){(new twttr.views.ListFollowCard(a)).render(this.$node)},_registerEvents:function(a){var b=this;this._registerEvent(twttr.API.List,"update follow unfollow add remove",function(c,d){d.id===a.id&&((c.type==="follow"||c.type==="unfollow")&&d.sync("following",c.type==="follow"),b.render(d))})}});a(c)})}),provide("components/t1/dashboard/SearchImages",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchImages").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleSearchImages).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/dashboard/SearchVideos",function(a){using("components/t1/dashboard/AbstractDashboard").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.SearchVideos").subclassOf(b.components.t1.dashboard.AbstractDashboard).setBaseView(twttr.views.ModuleSearchVideos).initializer(function(a){this._superInitializer(a)});a(c)})}),provide("components/t1/AvatarRow",function(a){using().as(function(b){var c=twttr.klass("twttr.components.t1.AvatarRow").subclassOf(twttr.components.Base).initializer(function(a,b){var b=b||{};this.avatarLimit=b.avatarLimit||7,this.renderFacePile(a)}).methods({renderFacePile:function(a){var b=a.slice(0,this.avatarLimit);b.length()>0&&((new twttr.views.AvatarRow(b)).render(this.$node,"html"),this.$find(".js-user-tipsy").tipsy({gravity:"s"}))}});a(c)})}),provide("components/t1/SearchHeader",function(a){using("helpers").as(function(b){var c=twttr.klass("twttr.components.t1.SearchHeader").subclassOf(twttr.components.Base).mixin(twttr.mixins.i18nTweetBox).setBaseView(twttr.views.SearchHeader).initializer(function(a){this.setQuery(a),this.registerEvents(),this.registerSearchMenuAction(),twttr.search.isSavedSearch(a)&&this.toggleSavedSearchOn()}).methods({registerEvents:function(){var a=this;this.$find(".js-search-header-query").bind("keydown keypress keyup",function(b){a.markPunctuation(b,$(this))});var c=this.$find("form.js-search-form");b.helpers.addFormEvents(c,function(a,b){var c=b.q;c?(twttr.search.setLastQuerySource(twttr.search.searchQuerySource.TYPED_QUERY),twttr.search.doSearch(c)):twttr.showMessage(_("Enter your query before submitting the search form!"))}),twttr.search.formifyLatestQuery(c)},toggleSavedSearchOn:function(){this.$find(".js-toggle-saved-search-link").html(_("Remove saved search")).addClass("saved").removeClass("not-saved"),this.$find(".js-search-title").html(_("Saved search results"))},toggleSavedSearchOff:function(){this.$find(".js-toggle-saved-search-link").html(_("Save search")).addClass("not-saved").removeClass("saved"),this.$find(".js-search-title").html(_("Search results"))},registerSearchMenuAction:function(){var a=this;this.$node.delegate(".js-search-dropdown-button","click",function(b){return a.toggleSearchMenu(),b.preventDefault(),b.stopPropagation(),!1})},showSearchMenu:function(a){var b=this;a.addClass("open"),$(document).bind("click.button",function(){b.hideSearchMenu(a)})},hideSearchMenu:function(a){a.removeClass("open"),$(document).unbind("click.button")},toggleSearchMenu:function(a){var b=this,c=this.$node.find(".js-search-dropdown");c.hasClass("open")?this.hideSearchMenu(c):this.showSearchMenu(c)},setQuery:function(a){this.$find(".js-search-header-query").val(a)},focusQuery:function(){this.$find(".js-search-header-query").focus()}});a(c)})}),provide("components/t1/PeopleSearchStreamHeader",function(a){using("helpers").as(function(b){var c=twttr.klass("twttr.components.t1.PeopleSearchStreamHeader").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},b.placeholder=b.placeholder||_("Search using a person’s full name or @username"),b.button_text=b.buttonText||_("Search Twitter"),this.searchRoute=b.searchRoute=a,(new twttr.views.StreamHeaderPeopleSearch(b)).render(this.$node,"append"),this.registerEvents()}).methods({registerEvents:function(){var a=this.$find("form.js-search-form"),c=this;b.helpers.addFormEvents(a,function(b,d){!a.find('input[name="q"]').hasClass("js-placeholded")&&d.q!=""&&(trackClient({component:"user_search_form",action:"search"},{query:d.q}),twttr.router.routeTo(c.searchRoute({query:d.q})))})}});a(c)})}),provide("components/t1/UserSimilaritiesList",function(a){using("_","mixins/userRecommendationsHelper","mixins/userActionable").as(function(b,_){var c=twttr.klass("twttr.components.t1.UserSimilaritiesList").subclassOf(twttr.components.Base).initializer(function(a,b){b=b||{},this.profileUser=a,this.screenName=this.profileUser.screenName,this.scribbler=twttr.Scribbler.clientEvent.spawn({profile_id:this.profileUser.id}),this.whotofollowComponentName="whotofollow_dropdown",this.ignoreScribeItemPosition=!0,this.initTime=+(new Date),this.userRecommendationsAvailable()?this.loadRecommendations():this.trigger("notRendered","darkmoded"),this.registerUserActionEvents(),this.registerUserRecommendationsActions()}).mixin(b.mixins.userRecommendationsHelper,b.mixins.userActionable).click({".js-close":function(a){a.preventDefault(),this.trigger("close")}}).methods({renderView:function(a){var b=(new twttr.views.UserSimilaritiesList).$html(),c=b.find(".js-users-list");a.map(function(a){var b=new twttr.views.StreamUser(a);(new twttr.views.StreamItem({item_html:b.html(),item_type:"user",item_class:"stream-item"})).render(c,"append")}),c.children(":last-child").addClass("stream-end-item"),this.$node.append(b)},loadRecommendations:function(a){this.fetch({limit:2,success:twttr.bind(this,function(a){var b=this.recsToUsers(a);this.trackImpressions(b,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:this.profileUser.id}),b.length()>0?(this.renderView(b),this.hasRendered(),this.trigger("recommendationsLoaded")):this.trigger("notRendered","noMoreRecommendations")}),error:twttr.bind(this,function(a){this.trackImpressions(null,"whotofollow_post_follow_similar_users",{tracking_context:"profile",profile_user:this.profileUser.id,error_status:a.status}),this.trigger("notRendered",a)})})}});a(twttr.components.UserSimilaritiesList)})}),provide("components/pages/mixins/profileT1",function(a){using("_","components/t1/dashboard/ProfileNav","components/t1/dashboard/ProfileFollowCard","components/SignupCallOut").as(function(b,_){var c=twttr.klass.mixin("twttr.components.pages.mixins.profileT1",function(){this.view(twttr.views.PageProfile).methods({allLists:function(a){var b=this,c=this._defaultedScreenName(a.screen_name);this.getUserInfo(c,function(){twttr.helpers.canViewUser(b.profileUser)?(b.updatePageTitle(_("Twitter / {{screenName}}'s Subscriptions",{screenName:c})),b._highlightNavIfCurrentUser(c),b.selectCurrentSideNav(),b._switchToStream({screenName:c,stream:twttr.streams.AllSubscriptionsUser})):twttr.router.routeTo(twttr.router.profilePath({screen_name:c}))},{batch:!twttr.loggedIn,profiler:!0})},memberships:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Lists following {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.MembershipsUser})},with_replies:function(a,b){var c=this,d=a.screen_name.toLowerCase();this.loading(d),this.getUserInfo(d,function(){c.updatePageTitle(_("{{{fullName}}} ({{{screenName}}}) on Twitter",{fullName:c.profileUser.name,screenName:d})),c._highlightNavIfCurrentUser(d),c._switchToStream({screenName:d,stream:twttr.streams.User,tab:"tweets"}),c.selectSideNav("profile"),c.checkWithheld()},{batch:!twttr.loggedIn,profiler:!0},twttr.bind(this,this.noUserFoundCallback))},similarTo:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Similar to {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this.selectCurrentSideNav(),this._switchToStream({screenName:c,stream:twttr.streams.UserSimilaritiesStream})},getTweetBoxOptions:function(){return{width:258,height:75,explainLinkShortening:!1,condensedContent:"@"+this.profileUser.screenName+" ",dynamicTitle:!1,autoCompleteSuggestionLimit:5,template:{suppress_geo_text:!0,name:this.profileUser.name,button_text:_("Tweet")}}},getDashboardComponents:function(){var a=[],c=this;twttr.loggedIn||a.push(new b.components.SignupCallOut("profile",{profileUser:this.profileUser})),this.shouldShowTweetBox()&&a.push(new twttr.components.t1.dashboard.ProfileTweetbox(this.renderTweetbox()));var d=new twttr.components.UserRecommendations({screenName:twttr.profileUser.screenName});return d.bind("recommendationsLoaded",function(){"similarTo"===twttr.router.getCurrentRoute().name&&c.selectSideNav("similarTo")}),a.concat([new twttr.components.t1.dashboard.ProfileNav(this.profileUser),new twttr.components.JapaneseAd,d,new twttr.components.Footer])},addSimilarUsersDropdown:function(){var a=this,b=new twttr.components.t1.UserSimilaritiesList(this.profileUser);b.bind("recommendationsLoaded",function(){a.userSimilaritiesListComponent=b,(!$.browser.msie||$.browser.version!=7)&&b.$node.hide(),a.addContainerComponent(a.$find(".js-content-main"),b,"before"),(!$.browser.msie||$.browser.version!=7)&&b.$node.slideDown(300),twttr.router.one("routed",function(){a.removeSimilarUsersDropdown()})}),b.bind("notRendered",function(){b.destroy()}),b.bind("close",function(){a.removeSimilarUsersDropdown()})},removeSimilarUsersDropdown:function(){var a=this.userSimilaritiesListComponent;this.userSimilaritiesListComponent=null,a&&($.browser.msie&&$.browser.version==7?a.destroy():a.$node.slideUp(300,function(){a.destroy()}))},addBanner:function(){var a=this.bannerPreviewUrl||this.profileUser.profileBannerUrl;if(a){var b=(new twttr.views.ProfileBanner({banner_url:decodeURIComponent(a)})).html();this.$topContent.find(".profile-card").append(b)}},addImpressionData:function(a){a.profile_id=this.profileUser&&this.profileUser.id||twttr.profileUser&&twttr.profileUser.id}}).addAfterRender(function(){var a=this,c=new b.components.t1.dashboard.ProfileFollowCard(this.profileUser);c.bind("follow.user",function(){a.addSimilarUsersDropdown()}),c.bind("unfollow.user",function(){a.removeSimilarUsersDropdown()}),c.bind("followCardRendered",function(){a.addBanner()}),this.addTopContentComponent(c)}).addOnSwitchTo(function(){var a=this;$(document).bind("tweetSuccess",function(b,c){var d=a.streamManager.getCurrent().trigger("didTweet",[c])})}).addOnSwitchAway(function(){$(document).unbind("tweetSuccess")})});a(c)})}),provide("components/pages/mixins/profileP1",function(a){using("_","constants").as(function(b,_){var c=twttr.klass.mixin("twttr.components.pages.mixins.profileP1",function(){this.methods({getTweetBoxOptions:function(){return{width:482,condensedContent:_("Tweet to {{screen_name}}",{screen_name:"@"+this.profileUser.screenName}),template:{button_text:_("Tweet"),show_title:!1}}},getDashboardComponents:function(){var a=[];a.push(new twttr.components.JapaneseAd),this.renderTweetbox(),twttr.loggedIn||a.push(new twttr.components.SignupCallOut("profile",{profileUser:twttr.profileUser}));var c=twttr.helpers.userNoobLevel(twttr.currentUser),d=twttr.helpers.isProfileUser();return d&&c>=b.constants.noob.total?a=a.concat(this.getNoobDashboardComponents(c)):(a.push(new twttr.components.DashboardProfileStats(twttr.profileUser)),a.push(new twttr.components.UserMedia(twttr.profileUser,{renderHr:!0})),this._isSocialContextAvailable()&&a.push(new twttr.components.SocialContext),twttr.loggedIn&&twttr.decider.isAvailable("whotofollow_similarities")&&a.push(new twttr.components.UserRecommendations({screenName:twttr.profileUser.screenName})),twttr.loggedIn&&a.push(new twttr.components.RecentProfileActivity(twttr.profileUser)),twttr.API.User.bind("block",this.userWasBlocked)),a.push(new twttr.components.Footer),a},getNoobDashboardComponents:function(a){var c=[],d=twttr.profileUser;c.push(new twttr.components.DashboardProfileStats(d,this.dashStatsTitle()),new twttr.components.UserMedia(twttr.profileUser,{renderHr:!0}));var e=b.constants.noob;switch(a){case e.invited:case e.silent:case e.popular:case e.struggling:c.push(new twttr.components.RecentProfileActivity(d));break;case e.friendless:case e.lonely:c.push(new twttr.components.RecentlyFollowed);break;case e.total:case e.talking:default:}return c.push(new twttr.components.GettingStarted(a)),c},memberships:function(a){var b=this,c=a.screen_name;this.updatePageTitle(_("Twitter / Lists following {{screenName}}",{screenName:c})),this._highlightNavIfCurrentUser(c),this._switchToStream({screenName:c,stream:twttr.streams.Memberships})}}).click({".stream-tab-lists":function(a,b){$(a.target).is(".tab-text, .tab-text *")&&twttr.viewHelpers.superListDropdown(twttr.profileUser,b,function(a){a.render(b,"append"),a.open()})},".stream-tab-following.dropdown-link":function(a,b){a.preventDefault();if(this._followingDropDown)return;var c=twttr.profileUser.screenName,d=[{name:_("View as list of people &rarr;"),href:twttr.router.userFollowingPath({screen_name:c})},{name:_("View as timeline &rarr;"),href:twttr.router.userFollowingTweetsPath({screen_name:c})}];$(a.target).hasClass("tab-text")&&(this._followingDropDown=new twttr.control.Dropdown(b,{itemView:"StreamLink",items:d}),this._followingDropDown.render(b,"append"),this._followingDropDown.open())},".stream-tab-followers.dropdown-link":function(a,b){if(!this._isSocialContextAvailable())return;var c=twttr.profileUser.screenName;if(this._followersDropDown)return;$(a.target).hasClass("tab-text")&&(this._followersDropDown=new twttr.control.Dropdown(b,{itemView:"StreamLink",items:[{name:_("All followers &rarr;"),href:twttr.router.userFollowersPath({screen_name:c})},{name:_("Followers you follow &rarr;"),href:twttr.router.followersYouFollowPath({screen_name:c})}]}),this._followersDropDown.render(b,"append"),this._followersDropDown.open())}})});a(c)})}),provide("components/t1/dashboard/ProfileNav",function(a){using("components/t1/dashboard/Nav").as(function(b){var c=twttr.klass("twttr.components.t1.dashboard.ProfileNav").subclassOf(b.components.t1.dashboard.Nav).initializer(function(a){this._superInitializer.call(this,{name:"profile-nav",items:[{title:_("Tweets"),route:twttr.router.profilePath({screen_name:a.screenName})},{title:_("Following"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followingPath":"userFollowingPath"]({screen_name:a.screenName})},{title:_("Followers"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"followersPath":"userFollowersPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="followers"||twttr.router.getCurrentRoute().name=="userFollowers"||twttr.router.getCurrentRoute().name=="followersYouFollow",show_metadata_container:!0},{title:_("Favorites"),route:twttr.router[twttr.helpers.isCurrentUser(a)?"favoritesPath":"userFavoritesPath"]({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="favorites"||twttr.router.getCurrentRoute().name=="userFavorites"},{title:_("Requests"),route:twttr.router.followerRequestsPath({screen_name:a.screenName}),visible:twttr.helpers.isCurrentUser(a)&&a["protected"]},{title:_("Lists"),route:twttr.router.subscriptionsPath({screen_name:a.screenName}),active:twttr.router.getCurrentRoute().name=="subscriptions"||twttr.router.getCurrentRoute().name=="memberships"}]}),twttr.helpers.canViewUser(a)&&this.renderMedia()}).methods({renderMedia:function(){this.$find("ul").append((new twttr.components.UserMedia(twttr.profileUser,{view_all_href:twttr.router.userMediaGridPath({screen_name:twttr.profileUser.screenName}),renderHr:!0})).$node)}});a(c)})}),provide("components/pages/mixins/listT1",function(a){using("components/t1/dashboard/ListNav","components/t1/dashboard/ListFollowCard","components/NewestListMembers","components/MoreLists","components/Footer").as(function(b){var c=twttr.klass.mixin("twttr.components.pages.mixins.listT1",function(){this.view(twttr.views.Page).methods({_registerEvents:function(a){var c=this;twttr.API.List.bind("update",function(d,e){if(e.id===a.id){var f=c.$find(".list-nav").closest(".component"),g=c.$find(".dashboard > *").index(f);f.remove(),c.addDashboardComponent(new b.components.t1.dashboard.ListNav(e),g+1)}})},getDashboardComponents:function(a){return this.listFollowCard=new b.components.t1.dashboard.ListFollowCard(a),[this.listFollowCard,new b.components.t1.dashboard.ListNav(a),new b.components.NewestListMembers(a),new b.components.MoreLists(a),new b.components.Footer]},addImpressionData:function(a){a.profile_id=this.owner&&this.owner.id||twttr.profileUser&&twttr.profileUser.id,a.message=this._listSlug}})});a(c)})}),provide("multiGlobals/MessageManagerMonitor",function(a){using().as(function(a){if(twttr.isT1){var b;twttr.decider.isAvailable("phoenix_use_conversation_endpoint")?b=twttr.messageManager=new twttr.ConversationManager:b=twttr.messageManager=new twttr.MessageManager,b.bind("pendingThreads",function(){var a=b.hasPendingThreads();a?($("div.js-topbar li.js-session").addClass("new"),$("div.js-topbar span.js-direct-message-count").addClass("new").text(a)):($("div.js-topbar li.js-session").removeClass("new"),$("div.js-topbar span.js-direct-message-count").removeClass("new").text(""))}),b.setupContinuousPoll()}}),a()}),provide("google",function(a){using().as(function(b){using(twttr.bundleMore,function(){if(twttr.isTestEnv)return;jQuery.active>0?$(document).one("ajaxComplete",twttr.insertGAScriptElement):twttr.insertGAScriptElement()}),a()})}),provide("ttft_ajax",function(a){using().as(function(b){using(twttr.bundleMore,function(){var a=0,b=0,c=function(){++b>=a&&(window.ttft.ajaxComplete(a),$(document).unbind("ajaxComplete",c))};window.ttft&&$.active&&($(document).ajaxComplete(c),activeAjaxCount=$.active)}),a()})}),provide("bundle/t1-more",function(a){using("bundle/t1-core",function(){using(["mixins/ActivityViewHelpers","/account/templates_t1_more.js","multiGlobals/more_views","multiGlobals/more_views_t1","$lib/easyXDM.js","libwrap/easyxdm","lib/lazyload","phoenix-more-css-wrapper","$lib/jquery.ui.core.js","$lib/jquery.ui.widget.js","$lib/jquery.ui.mouse.js","$lib/jquery.ui.draggable.js","$lib/jquery.ui.progressbar.js","$lib/jquery.swfobject.js","$lib/jquery.hotkeys.js","$lib/jquery.autoellipsis.js","mixins/tweetFlagging","promptbird","MessageManager","ConversationManager","externalOauthPopup","mixins/photoBox","mixins/profileStreamMixin","streams/Mentions","streams/Favorites","streams/User","streams/Profile","streams/FollowingTweets","streams/List","streams/Search","streams/UserStream","streams/Friends","streams/FollowerRequests","streams/Followers","streams/SocialContextStream","streams/SuggestionCategoriesStream","streams/PeopleSearch","streams/t1/HeadlessPeopleSearch","streams/DashboardPeopleSearch","streams/DashboardTopPeopleSearch","streams/ListFollowers","streams/ListMembers","streams/Discover","streams/SavedSearches","mixins/SinceMaxPagination","mixins/PollingStream","mixins/activityStreamEvents","mixins/inviteFriends","mixins/newStreamItemsBar","mixins/typeaheadScribing","mixins/discoveryHelper","mixins/usesRelatedResults","mixins/profileHelper","mixins/commonDashboardClickHandlers","mixins/t1/cardActionable","mixins/t1/discoveryStoryHelpers","mixins/UserSimilaritiesStreamT1","mixins/SuggestionCategoriesStreamT1","mixins/SuggestionCategoryMembersStreamT1","mixins/UserRecommendationsT1","mixins/hasGovernmentSearchHeader","mixins/prefollowingStream","streams/StarterList","streams/StarterFriends","streams/UserRecommendationsStream","streams/UserRecommendationsDashboardStream","streams/UserSimilaritiesStream","streams/ContactImportMatches","streams/DashboardContactImportMatches","streams/ContactImportServices","mixins/ContactImportServicesT1","streams/DashboardContactImportServices","StoredUserStack","PasswordStrength","mixins/urlShortener","mixins/caretHelper","geo","components/Autocomplete","components/Typeahead","components/TypeaheadDatasource","components/TypeaheadSearchQueryDatasource","components/TypeaheadAccountsDatasource","components/GlobalNavTypeahead","components/Editor","TweetBox","components/TweetboxAutocomplete","shortcuts_t1","stork","streams/ActivityStream","streams/ActivityByUserStream","streams/ActivityByNetworkStream","streams/ActivityOfMeStream","streams/AllSubscriptions","streams/AllSubscriptionsUser","media","media/Iconifier","media/Embedder","media/mediaType","media/expandodo","platform/BaseApplication","platform/EmbeddedApplication","platform/SandboxedApplication","sandboxedAjax","media/types","geo/Map","geo/Location","control/Dropdown","widget/Dialog","dialogs","widget/TweetDialog","widget/Prompt","widget/DeviceSetupDialog","widget/InviteContactsDialog","widget/ListDialog","components/t1/DirectMessageDialog","widget/MuteDialog","widget/DiscoveryDialog","widget/GeoPromoDialog","widget/RetweetDialog","widget/TrendsDialog","widget/ReplyDialog","widget/ListMembershipDialog","widget/MiniProfileDialog","widget/EmbedDialog","components/pages/mixins/searchT1","components/pages/ProfileAbstract","components/pages/Search","components/pages/SearchHome","components/pages/Front","components/pages/Login","components/pages/Logout","components/pages/Profile","components/pages/List","components/pages/Permalink","components/pages/WhoToFollow","components/pages/WebPersonalizationPreview","components/pages/404","components/pages/403","components/pages/PlaceT1","components/pages/RateLimit","components/pages/mixins/welcomeLearnFlowT1","components/pages/WelcomeLearnFlow","components/pages/Welcome","components/pages/AbstractMediaGallery","components/pages/UserMediaGallery","components/pages/FacetsMediaGallery","components/pages/EventsMediaGallery","components/pages/BigPhotoPermalink","components/pages/Discover","components/pages/Connect","widget/Banner","components/Promo","components/Promptbird","components/RelatedServices","TrendLocations","components/PeopleResults","components/ProfileActions","components/RecentTweets","components/RecentlyFollowed","components/RecentlyViewed","components/InviteContacts","components/InviteFriends","components/Retweeters","components/TweetActivity","components/ConversationThread","components/InReplyTo","components/InlineReplyBox","components/Conversation","components/Replies","components/MoreLists","geo/TweetGeo","components/MachineTranslationBackend","components/TweetGeoSmall","components/NewestListMembers","components/StorkPip","components/StreamEnd","components/StreamEndInviteFriends","components/StreamWhaleEnd","components/ContactImportErrorEnd","components/EmptyHome","components/AddPeople","components/NoListMembers","components/Media","components/ProfilePane","components/JapaneseAd","components/ProtectedUser","components/TweetStats","components/PermalinkTweet","components/NoUserExists","components/SignupCallOut","components/SuggestionCategoriesList","components/ContactImportMatchesStats","components/media/Base","components/media/profile","components/media/facets/Base","components/media/facets/Media","components/media/facets/Images","components/media/facets/Videos","components/ThumbnailViewer","components/TheGrid","components/MediaGalleryControls","components/MediaSlideshow","components/SearchFacets","components/FollowerRequestLink","components/WebPersonalizationSettings","photo/turkey","photo/photo_thumbnails","images","components/ContactImportLauncher","streams/ListStream","streams/OwnListsStream","streams/SubscriptionsStream","streams/MembershipsStream","streams/MembershipsStreamUser","multiGlobals/trackSession","streams/SuggestionCategoriesStream","streams/SuggestionCategoryMembersStream","streams/SuggestionCategoriesDashboardStream","streams/SuggestionCategoryMembersDashboardStream","streams/GovernmentSearchStream","widget/VerifyEmailDialog","SearchAPI","media/providers","mixins/userRecommendationsHelper","mixins/t1/genericComboButton","mixins/userUpdateable","components/UserMedia","components/UserRecommendations","components/Footer","components/Trends","components/onebox/News","components/onebox/User","components/onebox/Sports","components/onebox/Event","components/t1/EmptyTimelineRecommendations","components/t1/dashboard/AbstractDashboard","components/t1/dashboard/Tweetbox","components/t1/dashboard/ProfileTweetbox","components/t1/dashboard/ProfileFollowCard","components/t1/dashboard/Flex","components/t1/dashboard/Nav","components/t1/dashboard/MiniHomeProfile","components/t1/dashboard/ConnectNav","components/t1/dashboard/ProfileNav","components/t1/dashboard/SettingsNav","components/t1/dashboard/ListNav","components/t1/dashboard/SearchNav","components/t1/dashboard/DiscoverNav","components/t1/dashboard/ProfileSummary","components/t1/dashboard/ListFollowCard","components/t1/dashboard/SearchImages","components/t1/dashboard/SearchVideos","components/t1/AvatarRow","components/t1/SearchHeader","components/t1/PeopleSearchStreamHeader","components/t1/UserSimilaritiesList","components/pages/mixins/profileT1","components/pages/mixins/profileP1","components/t1/dashboard/ProfileNav","components/pages/mixins/listT1","multiGlobals/MessageManagerMonitor","google","ttft_ajax"],function(){a()})})});